/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkwhiteboard_bridge"] = self["webpackChunkwhiteboard_bridge"] || []).push([["netless"],{

/***/ 42560:
/*!**********************************************************!*\
  !*** ./node_modules/@netless/app-slide/dist/main.cjs.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, exports) {

"use strict";
eval("var XI=Object.defineProperty,qI=Object.defineProperties;var YI=Object.getOwnPropertyDescriptors;var XS=Object.getOwnPropertySymbols;var $I=Object.prototype.hasOwnProperty,JI=Object.prototype.propertyIsEnumerable;var qS=(S,M,v)=>M in S?XI(S,M,{enumerable:!0,configurable:!0,writable:!0,value:v}):S[M]=v,H_=(S,M)=>{for(var v in M||(M={}))$I.call(M,v)&&qS(S,v,M[v]);if(XS)for(var v of XS(M))JI.call(M,v)&&qS(S,v,M[v]);return S},YS=(S,M)=>qI(S,YI(M));Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:\"Module\"}});const iT=\"!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\",ZI=iT.length,$S=Array(20),Up=()=>{for(let S=0;S<20;S++)$S[S]=iT.charAt(Math.random()*ZI);return $S.join(\"\")};class jp{constructor(){this.disposers=new Map}add(M,v=Up()){return this.flush(v),this.disposers.set(v,M()),v}addDisposer(M,v=Up()){return this.flush(v),this.disposers.set(v,M),v}addEventListener(M,v,b,Q,me=Up()){return this.add(()=>(M.addEventListener(v,b,Q),()=>M.removeEventListener(v,b,Q)),me),me}setTimeout(M,v,b=Up()){return this.add(()=>{const Q=window.setTimeout(()=>{this.remove(b),M()},v);return()=>window.clearTimeout(Q)},b)}setInterval(M,v,b=Up()){return this.add(()=>{const Q=window.setInterval(M,v);return()=>window.clearInterval(Q)},b)}remove(M){const v=this.disposers.get(M);return this.disposers.delete(M),v}flush(M){const v=this.remove(M);if(v)try{v()}catch(b){console.error(b)}}flushAll(){this.disposers.forEach(M=>{try{M()}catch(v){console.error(v)}}),this.disposers.clear()}}var wi=function(S){var M={};function v(b){if(M[b])return M[b].exports;var Q=M[b]={i:b,l:!1,exports:{}};return S[b].call(Q.exports,Q,Q.exports,v),Q.l=!0,Q.exports}return v.m=S,v.c=M,v.d=function(b,Q,me){v.o(b,Q)||Object.defineProperty(b,Q,{enumerable:!0,get:me})},v.r=function(b){typeof Symbol!=\"undefined\"&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(b,\"__esModule\",{value:!0})},v.t=function(b,Q){if(1&Q&&(b=v(b)),8&Q||4&Q&&typeof b==\"object\"&&b&&b.__esModule)return b;var me=Object.create(null);if(v.r(me),Object.defineProperty(me,\"default\",{enumerable:!0,value:b}),2&Q&&typeof b!=\"string\")for(var q in b)v.d(me,q,function(O){return b[O]}.bind(null,q));return me},v.n=function(b){var Q=b&&b.__esModule?function(){return b.default}:function(){return b};return v.d(Q,\"a\",Q),Q},v.o=function(b,Q){return Object.prototype.hasOwnProperty.call(b,Q)},v.p=\"\",v(v.s=65)}([function(S,M,v){var b=Object.prototype.hasOwnProperty,Q=\"~\";function me(){}function q(D,Z,be){this.fn=D,this.context=Z,this.once=be||!1}function O(D,Z,be,Ce,Ie){if(typeof be!=\"function\")throw new TypeError(\"The listener must be a function\");var E=new q(be,Ce||D,Ie),L=Q?Q+Z:Z;return D._events[L]?D._events[L].fn?D._events[L]=[D._events[L],E]:D._events[L].push(E):(D._events[L]=E,D._eventsCount++),D}function $(D,Z){--D._eventsCount==0?D._events=new me:delete D._events[Z]}function H(){this._events=new me,this._eventsCount=0}Object.create&&(me.prototype=Object.create(null),new me().__proto__||(Q=!1)),H.prototype.eventNames=function(){var D,Z,be=[];if(this._eventsCount===0)return be;for(Z in D=this._events)b.call(D,Z)&&be.push(Q?Z.slice(1):Z);return Object.getOwnPropertySymbols?be.concat(Object.getOwnPropertySymbols(D)):be},H.prototype.listeners=function(D){var Z=Q?Q+D:D,be=this._events[Z];if(!be)return[];if(be.fn)return[be.fn];for(var Ce=0,Ie=be.length,E=new Array(Ie);Ce<Ie;Ce++)E[Ce]=be[Ce].fn;return E},H.prototype.listenerCount=function(D){var Z=Q?Q+D:D,be=this._events[Z];return be?be.fn?1:be.length:0},H.prototype.emit=function(D,Z,be,Ce,Ie,E){var L=Q?Q+D:D;if(!this._events[L])return!1;var N,ee,C=this._events[L],z=arguments.length;if(C.fn){switch(C.once&&this.removeListener(D,C.fn,void 0,!0),z){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,Z),!0;case 3:return C.fn.call(C.context,Z,be),!0;case 4:return C.fn.call(C.context,Z,be,Ce),!0;case 5:return C.fn.call(C.context,Z,be,Ce,Ie),!0;case 6:return C.fn.call(C.context,Z,be,Ce,Ie,E),!0}for(ee=1,N=new Array(z-1);ee<z;ee++)N[ee-1]=arguments[ee];C.fn.apply(C.context,N)}else{var X,ne=C.length;for(ee=0;ee<ne;ee++)switch(C[ee].once&&this.removeListener(D,C[ee].fn,void 0,!0),z){case 1:C[ee].fn.call(C[ee].context);break;case 2:C[ee].fn.call(C[ee].context,Z);break;case 3:C[ee].fn.call(C[ee].context,Z,be);break;case 4:C[ee].fn.call(C[ee].context,Z,be,Ce);break;default:if(!N)for(X=1,N=new Array(z-1);X<z;X++)N[X-1]=arguments[X];C[ee].fn.apply(C[ee].context,N)}}return!0},H.prototype.on=function(D,Z,be){return O(this,D,Z,be,!1)},H.prototype.once=function(D,Z,be){return O(this,D,Z,be,!0)},H.prototype.removeListener=function(D,Z,be,Ce){var Ie=Q?Q+D:D;if(!this._events[Ie])return this;if(!Z)return $(this,Ie),this;var E=this._events[Ie];if(E.fn)E.fn!==Z||Ce&&!E.once||be&&E.context!==be||$(this,Ie);else{for(var L=0,N=[],ee=E.length;L<ee;L++)(E[L].fn!==Z||Ce&&!E[L].once||be&&E[L].context!==be)&&N.push(E[L]);N.length?this._events[Ie]=N.length===1?N[0]:N:$(this,Ie)}return this},H.prototype.removeAllListeners=function(D){var Z;return D?(Z=Q?Q+D:D,this._events[Z]&&$(this,Z)):(this._events=new me,this._eventsCount=0),this},H.prototype.off=H.prototype.removeListener,H.prototype.addListener=H.prototype.on,H.prefixed=Q,H.EventEmitter=H,S.exports=H},function(S,M,v){(function(b,Q){var me;/**\n * @license\n * Lodash <https://lodash.com/>\n * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */(function(){var q=\"Expected a function\",O=\"__lodash_placeholder__\",$=[[\"ary\",128],[\"bind\",1],[\"bindKey\",2],[\"curry\",8],[\"curryRight\",16],[\"flip\",512],[\"partial\",32],[\"partialRight\",64],[\"rearg\",256]],H=\"[object Arguments]\",D=\"[object Array]\",Z=\"[object Boolean]\",be=\"[object Date]\",Ce=\"[object Error]\",Ie=\"[object Function]\",E=\"[object GeneratorFunction]\",L=\"[object Map]\",N=\"[object Number]\",ee=\"[object Object]\",C=\"[object RegExp]\",z=\"[object Set]\",X=\"[object String]\",ne=\"[object Symbol]\",Ve=\"[object WeakMap]\",pt=\"[object ArrayBuffer]\",Ne=\"[object DataView]\",ae=\"[object Float32Array]\",Me=\"[object Float64Array]\",Fe=\"[object Int8Array]\",j=\"[object Int16Array]\",ye=\"[object Int32Array]\",Oe=\"[object Uint8Array]\",Le=\"[object Uint16Array]\",De=\"[object Uint32Array]\",Je=/\\b__p \\+= '';/g,et=/\\b(__p \\+=) '' \\+/g,bt=/(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g,_t=/&(?:amp|lt|gt|quot|#39);/g,ln=/[&<>\"']/g,wt=RegExp(_t.source),Xt=RegExp(ln.source),qt=/<%-([\\s\\S]+?)%>/g,en=/<%([\\s\\S]+?)%>/g,Bt=/<%=([\\s\\S]+?)%>/g,Fn=/\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,Bn=/^\\w*$/,Mn=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,qn=/[\\\\^$.*+?()[\\]{}|]/g,An=RegExp(qn.source),In=/^\\s+/,Ai=/\\s/,Rn=/\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/,Ni=/\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/,mi=/,? & /,co=/[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g,ka=/[()=,{}\\[\\]\\/\\s]/,Po=/\\\\(\\\\)?/g,po=/\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g,Ws=/\\w*$/,T=/^[-+]0x[0-9a-f]+$/i,P=/^0b[01]+$/i,I=/^\\[object .+?Constructor\\]$/,te=/^0o[0-7]+$/i,J=/^(?:0|[1-9]\\d*)$/,K=/[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g,le=/($^)/,ve=/['\\n\\r\\u2028\\u2029\\\\]/g,we=\"\\\\u0300-\\\\u036f\\\\ufe20-\\\\ufe2f\\\\u20d0-\\\\u20ff\",Se=\"\\\\xac\\\\xb1\\\\xd7\\\\xf7\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf\\\\u2000-\\\\u206f \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\",ke=\"[\\\\ud800-\\\\udfff]\",$e=\"[\"+Se+\"]\",ct=\"[\"+we+\"]\",Pt=\"\\\\d+\",Tt=\"[\\\\u2700-\\\\u27bf]\",un=\"[a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff]\",wn=\"[^\\\\ud800-\\\\udfff\"+Se+Pt+\"\\\\u2700-\\\\u27bfa-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xffA-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde]\",Di=\"\\\\ud83c[\\\\udffb-\\\\udfff]\",Ua=\"[^\\\\ud800-\\\\udfff]\",fo=\"(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}\",Io=\"[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]\",Kn=\"[A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde]\",Gu=\"(?:\"+un+\"|\"+wn+\")\",Lg=\"(?:\"+Kn+\"|\"+wn+\")\",ps=\"(?:\"+ct+\"|\"+Di+\")?\",Yp=\"[\\\\ufe0e\\\\ufe0f]?\"+ps+(\"(?:\\\\u200d(?:\"+[Ua,fo,Io].join(\"|\")+\")[\\\\ufe0e\\\\ufe0f]?\"+ps+\")*\"),Xs=\"(?:\"+[Tt,fo,Io].join(\"|\")+\")\"+Yp,$p=\"(?:\"+[Ua+ct+\"?\",ct,fo,Io,ke].join(\"|\")+\")\",Jp=RegExp(\"['\\u2019]\",\"g\"),wl=RegExp(ct,\"g\"),Hu=RegExp(Di+\"(?=\"+Di+\")|\"+$p+Yp,\"g\"),Sl=RegExp([Kn+\"?\"+un+\"+(?:['\\u2019](?:d|ll|m|re|s|t|ve))?(?=\"+[$e,Kn,\"$\"].join(\"|\")+\")\",Lg+\"+(?:['\\u2019](?:D|LL|M|RE|S|T|VE))?(?=\"+[$e,Kn+Gu,\"$\"].join(\"|\")+\")\",Kn+\"?\"+Gu+\"+(?:['\\u2019](?:d|ll|m|re|s|t|ve))?\",Kn+\"+(?:['\\u2019](?:D|LL|M|RE|S|T|VE))?\",\"\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])\",\"\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])\",Pt,Xs].join(\"|\"),\"g\"),Oo=RegExp(\"[\\\\u200d\\\\ud800-\\\\udfff\"+we+\"\\\\ufe0e\\\\ufe0f]\"),qs=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Zp=[\"Array\",\"Buffer\",\"DataView\",\"Date\",\"Error\",\"Float32Array\",\"Float64Array\",\"Function\",\"Int8Array\",\"Int16Array\",\"Int32Array\",\"Map\",\"Math\",\"Object\",\"Promise\",\"RegExp\",\"Set\",\"String\",\"Symbol\",\"TypeError\",\"Uint8Array\",\"Uint8ClampedArray\",\"Uint16Array\",\"Uint32Array\",\"WeakMap\",\"_\",\"clearTimeout\",\"isFinite\",\"parseInt\",\"setTimeout\"],Kp=-1,Wn={};Wn[ae]=Wn[Me]=Wn[Fe]=Wn[j]=Wn[ye]=Wn[Oe]=Wn[\"[object Uint8ClampedArray]\"]=Wn[Le]=Wn[De]=!0,Wn[H]=Wn[D]=Wn[pt]=Wn[Z]=Wn[Ne]=Wn[be]=Wn[Ce]=Wn[Ie]=Wn[L]=Wn[N]=Wn[ee]=Wn[C]=Wn[z]=Wn[X]=Wn[Ve]=!1;var On={};On[H]=On[D]=On[pt]=On[Ne]=On[Z]=On[be]=On[ae]=On[Me]=On[Fe]=On[j]=On[ye]=On[L]=On[N]=On[ee]=On[C]=On[z]=On[X]=On[ne]=On[Oe]=On[\"[object Uint8ClampedArray]\"]=On[Le]=On[De]=!0,On[Ce]=On[Ie]=On[Ve]=!1;var Qp={\"\\\\\":\"\\\\\",\"'\":\"'\",\"\\n\":\"n\",\"\\r\":\"r\",\"\\u2028\":\"u2028\",\"\\u2029\":\"u2029\"},Lo=parseFloat,Tr=parseInt,Xc=typeof b==\"object\"&&b&&b.Object===Object&&b,ef=typeof self==\"object\"&&self&&self.Object===Object&&self,Fi=Xc||ef||Function(\"return this\")(),fs=M&&!M.nodeType&&M,mo=fs&&typeof Q==\"object\"&&Q&&!Q.nodeType&&Q,qc=mo&&mo.exports===fs,zu=qc&&Xc.process,Er=function(){try{var Ue=mo&&mo.require&&mo.require(\"util\").types;return Ue||zu&&zu.binding&&zu.binding(\"util\")}catch{}}(),Yc=Er&&Er.isArrayBuffer,$c=Er&&Er.isDate,Jc=Er&&Er.isMap,ju=Er&&Er.isRegExp,Vu=Er&&Er.isSet,Wu=Er&&Er.isTypedArray;function er(Ue,it,at){switch(at.length){case 0:return Ue.call(it);case 1:return Ue.call(it,at[0]);case 2:return Ue.call(it,at[0],at[1]);case 3:return Ue.call(it,at[0],at[1],at[2])}return Ue.apply(it,at)}function Zc(Ue,it,at,Rt){for(var hn=-1,tn=Ue==null?0:Ue.length;++hn<tn;){var oi=Ue[hn];it(Rt,oi,at(oi),Ue)}return Rt}function ur(Ue,it){for(var at=-1,Rt=Ue==null?0:Ue.length;++at<Rt&&it(Ue[at],at,Ue)!==!1;);return Ue}function Kc(Ue,it){for(var at=Ue==null?0:Ue.length;at--&&it(Ue[at],at,Ue)!==!1;);return Ue}function Xu(Ue,it){for(var at=-1,Rt=Ue==null?0:Ue.length;++at<Rt;)if(!it(Ue[at],at,Ue))return!1;return!0}function No(Ue,it){for(var at=-1,Rt=Ue==null?0:Ue.length,hn=0,tn=[];++at<Rt;){var oi=Ue[at];it(oi,at,Ue)&&(tn[hn++]=oi)}return tn}function Ga(Ue,it){return!!(Ue!=null&&Ue.length)&&Ys(Ue,it,0)>-1}function Tl(Ue,it,at){for(var Rt=-1,hn=Ue==null?0:Ue.length;++Rt<hn;)if(at(it,Ue[Rt]))return!0;return!1}function Yn(Ue,it){for(var at=-1,Rt=Ue==null?0:Ue.length,hn=Array(Rt);++at<Rt;)hn[at]=it(Ue[at],at,Ue);return hn}function Do(Ue,it){for(var at=-1,Rt=it.length,hn=Ue.length;++at<Rt;)Ue[hn+at]=it[at];return Ue}function qu(Ue,it,at,Rt){var hn=-1,tn=Ue==null?0:Ue.length;for(Rt&&tn&&(at=Ue[++hn]);++hn<tn;)at=it(at,Ue[hn],hn,Ue);return at}function tf(Ue,it,at,Rt){var hn=Ue==null?0:Ue.length;for(Rt&&hn&&(at=Ue[--hn]);hn--;)at=it(at,Ue[hn],hn,Ue);return at}function Yu(Ue,it){for(var at=-1,Rt=Ue==null?0:Ue.length;++at<Rt;)if(it(Ue[at],at,Ue))return!0;return!1}var nf=$u(\"length\");function Qc(Ue,it,at){var Rt;return at(Ue,function(hn,tn,oi){if(it(hn,tn,oi))return Rt=tn,!1}),Rt}function El(Ue,it,at,Rt){for(var hn=Ue.length,tn=at+(Rt?1:-1);Rt?tn--:++tn<hn;)if(it(Ue[tn],tn,Ue))return tn;return-1}function Ys(Ue,it,at){return it==it?function(Rt,hn,tn){for(var oi=tn-1,Mr=Rt.length;++oi<Mr;)if(Rt[oi]===hn)return oi;return-1}(Ue,it,at):El(Ue,ed,at)}function rf(Ue,it,at,Rt){for(var hn=at-1,tn=Ue.length;++hn<tn;)if(Rt(Ue[hn],it))return hn;return-1}function ed(Ue){return Ue!=Ue}function td(Ue,it){var at=Ue==null?0:Ue.length;return at?Zu(Ue,it)/at:NaN}function $u(Ue){return function(it){return it==null?void 0:it[Ue]}}function Ju(Ue){return function(it){return Ue==null?void 0:Ue[it]}}function nd(Ue,it,at,Rt,hn){return hn(Ue,function(tn,oi,Mr){at=Rt?(Rt=!1,tn):it(at,tn,oi,Mr)}),at}function Zu(Ue,it){for(var at,Rt=-1,hn=Ue.length;++Rt<hn;){var tn=it(Ue[Rt]);tn!==void 0&&(at=at===void 0?tn:at+tn)}return at}function Ku(Ue,it){for(var at=-1,Rt=Array(Ue);++at<Ue;)Rt[at]=it(at);return Rt}function id(Ue){return Ue&&Ue.slice(0,ms(Ue)+1).replace(In,\"\")}function hr(Ue){return function(it){return Ue(it)}}function Qu(Ue,it){return Yn(it,function(at){return Ue[at]})}function Ha(Ue,it){return Ue.has(it)}function rd(Ue,it){for(var at=-1,Rt=Ue.length;++at<Rt&&Ys(it,Ue[at],0)>-1;);return at}function od(Ue,it){for(var at=Ue.length;at--&&Ys(it,Ue[at],0)>-1;);return at}function of(Ue,it){for(var at=Ue.length,Rt=0;at--;)Ue[at]===it&&++Rt;return Rt}var sf=Ju({\\u00C0:\"A\",\\u00C1:\"A\",\\u00C2:\"A\",\\u00C3:\"A\",\\u00C4:\"A\",\\u00C5:\"A\",\\u00E0:\"a\",\\u00E1:\"a\",\\u00E2:\"a\",\\u00E3:\"a\",\\u00E4:\"a\",\\u00E5:\"a\",\\u00C7:\"C\",\\u00E7:\"c\",\\u00D0:\"D\",\\u00F0:\"d\",\\u00C8:\"E\",\\u00C9:\"E\",\\u00CA:\"E\",\\u00CB:\"E\",\\u00E8:\"e\",\\u00E9:\"e\",\\u00EA:\"e\",\\u00EB:\"e\",\\u00CC:\"I\",\\u00CD:\"I\",\\u00CE:\"I\",\\u00CF:\"I\",\\u00EC:\"i\",\\u00ED:\"i\",\\u00EE:\"i\",\\u00EF:\"i\",\\u00D1:\"N\",\\u00F1:\"n\",\\u00D2:\"O\",\\u00D3:\"O\",\\u00D4:\"O\",\\u00D5:\"O\",\\u00D6:\"O\",\\u00D8:\"O\",\\u00F2:\"o\",\\u00F3:\"o\",\\u00F4:\"o\",\\u00F5:\"o\",\\u00F6:\"o\",\\u00F8:\"o\",\\u00D9:\"U\",\\u00DA:\"U\",\\u00DB:\"U\",\\u00DC:\"U\",\\u00F9:\"u\",\\u00FA:\"u\",\\u00FB:\"u\",\\u00FC:\"u\",\\u00DD:\"Y\",\\u00FD:\"y\",\\u00FF:\"y\",\\u00C6:\"Ae\",\\u00E6:\"ae\",\\u00DE:\"Th\",\\u00FE:\"th\",\\u00DF:\"ss\",\\u0100:\"A\",\\u0102:\"A\",\\u0104:\"A\",\\u0101:\"a\",\\u0103:\"a\",\\u0105:\"a\",\\u0106:\"C\",\\u0108:\"C\",\\u010A:\"C\",\\u010C:\"C\",\\u0107:\"c\",\\u0109:\"c\",\\u010B:\"c\",\\u010D:\"c\",\\u010E:\"D\",\\u0110:\"D\",\\u010F:\"d\",\\u0111:\"d\",\\u0112:\"E\",\\u0114:\"E\",\\u0116:\"E\",\\u0118:\"E\",\\u011A:\"E\",\\u0113:\"e\",\\u0115:\"e\",\\u0117:\"e\",\\u0119:\"e\",\\u011B:\"e\",\\u011C:\"G\",\\u011E:\"G\",\\u0120:\"G\",\\u0122:\"G\",\\u011D:\"g\",\\u011F:\"g\",\\u0121:\"g\",\\u0123:\"g\",\\u0124:\"H\",\\u0126:\"H\",\\u0125:\"h\",\\u0127:\"h\",\\u0128:\"I\",\\u012A:\"I\",\\u012C:\"I\",\\u012E:\"I\",\\u0130:\"I\",\\u0129:\"i\",\\u012B:\"i\",\\u012D:\"i\",\\u012F:\"i\",\\u0131:\"i\",\\u0134:\"J\",\\u0135:\"j\",\\u0136:\"K\",\\u0137:\"k\",\\u0138:\"k\",\\u0139:\"L\",\\u013B:\"L\",\\u013D:\"L\",\\u013F:\"L\",\\u0141:\"L\",\\u013A:\"l\",\\u013C:\"l\",\\u013E:\"l\",\\u0140:\"l\",\\u0142:\"l\",\\u0143:\"N\",\\u0145:\"N\",\\u0147:\"N\",\\u014A:\"N\",\\u0144:\"n\",\\u0146:\"n\",\\u0148:\"n\",\\u014B:\"n\",\\u014C:\"O\",\\u014E:\"O\",\\u0150:\"O\",\\u014D:\"o\",\\u014F:\"o\",\\u0151:\"o\",\\u0154:\"R\",\\u0156:\"R\",\\u0158:\"R\",\\u0155:\"r\",\\u0157:\"r\",\\u0159:\"r\",\\u015A:\"S\",\\u015C:\"S\",\\u015E:\"S\",\\u0160:\"S\",\\u015B:\"s\",\\u015D:\"s\",\\u015F:\"s\",\\u0161:\"s\",\\u0162:\"T\",\\u0164:\"T\",\\u0166:\"T\",\\u0163:\"t\",\\u0165:\"t\",\\u0167:\"t\",\\u0168:\"U\",\\u016A:\"U\",\\u016C:\"U\",\\u016E:\"U\",\\u0170:\"U\",\\u0172:\"U\",\\u0169:\"u\",\\u016B:\"u\",\\u016D:\"u\",\\u016F:\"u\",\\u0171:\"u\",\\u0173:\"u\",\\u0174:\"W\",\\u0175:\"w\",\\u0176:\"Y\",\\u0177:\"y\",\\u0178:\"Y\",\\u0179:\"Z\",\\u017B:\"Z\",\\u017D:\"Z\",\\u017A:\"z\",\\u017C:\"z\",\\u017E:\"z\",\\u0132:\"IJ\",\\u0133:\"ij\",\\u0152:\"Oe\",\\u0153:\"oe\",\\u0149:\"'n\",\\u017F:\"s\"}),af=Ju({\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#39;\"});function lf(Ue){return\"\\\\\"+Qp[Ue]}function $s(Ue){return Oo.test(Ue)}function eh(Ue){var it=-1,at=Array(Ue.size);return Ue.forEach(function(Rt,hn){at[++it]=[hn,Rt]}),at}function sd(Ue,it){return function(at){return Ue(it(at))}}function Fo(Ue,it){for(var at=-1,Rt=Ue.length,hn=0,tn=[];++at<Rt;){var oi=Ue[at];oi!==it&&oi!==O||(Ue[at]=O,tn[hn++]=at)}return tn}function Ml(Ue){var it=-1,at=Array(Ue.size);return Ue.forEach(function(Rt){at[++it]=Rt}),at}function Al(Ue){var it=-1,at=Array(Ue.size);return Ue.forEach(function(Rt){at[++it]=[Rt,Rt]}),at}function go(Ue){return $s(Ue)?function(it){for(var at=Hu.lastIndex=0;Hu.test(it);)++at;return at}(Ue):nf(Ue)}function cr(Ue){return $s(Ue)?function(it){return it.match(Hu)||[]}(Ue):function(it){return it.split(\"\")}(Ue)}function ms(Ue){for(var it=Ue.length;it--&&Ai.test(Ue.charAt(it)););return it}var Js=Ju({\"&amp;\":\"&\",\"&lt;\":\"<\",\"&gt;\":\">\",\"&quot;\":'\"',\"&#39;\":\"'\"}),gs=function Ue(it){var at,Rt=(it=it==null?Fi:gs.defaults(Fi.Object(),it,gs.pick(Fi,Zp))).Array,hn=it.Date,tn=it.Error,oi=it.Function,Mr=it.Math,Gn=it.Object,th=it.RegExp,ad=it.String,dr=it.TypeError,za=Rt.prototype,uf=oi.prototype,vs=Gn.prototype,vo=it[\"__core-js_shared__\"],Rl=uf.toString,kn=vs.hasOwnProperty,nh=0,hf=(at=/[^.]+$/.exec(vo&&vo.keys&&vo.keys.IE_PROTO||\"\"))?\"Symbol(src)_1.\"+at:\"\",ih=vs.toString,Ng=Rl.call(Gn),Dg=Fi._,Fg=th(\"^\"+Rl.call(kn).replace(qn,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\"),rh=qc?it.Buffer:void 0,_s=it.Symbol,oh=it.Uint8Array,cf=rh?rh.allocUnsafe:void 0,sh=sd(Gn.getPrototypeOf,Gn),df=Gn.create,pf=vs.propertyIsEnumerable,ah=za.splice,ld=_s?_s.isConcatSpreadable:void 0,_o=_s?_s.iterator:void 0,kr=_s?_s.toStringTag:void 0,lh=function(){try{var c=ya(Gn,\"defineProperty\");return c({},\"\",{}),c}catch{}}(),Bg=it.clearTimeout!==Fi.clearTimeout&&it.clearTimeout,kg=hn&&hn.now!==Fi.Date.now&&hn.now,Ug=it.setTimeout!==Fi.setTimeout&&it.setTimeout,uh=Mr.ceil,hh=Mr.floor,ud=Gn.getOwnPropertySymbols,Gg=rh?rh.isBuffer:void 0,ch=it.isFinite,ys=za.join,Vi=sd(Gn.keys,Gn),li=Mr.max,ui=Mr.min,Cl=hn.now,Ar=it.parseInt,Bi=Mr.random,hd=za.reverse,Zs=ya(it,\"DataView\"),Ks=ya(it,\"Map\"),dh=ya(it,\"Promise\"),Qs=ya(it,\"Set\"),ja=ya(it,\"WeakMap\"),gt=ya(Gn,\"create\"),Qn=ja&&new ja,Jr={},ea=$o(Zs),Hg=$o(Ks),gi=$o(dh),cd=$o(Qs),Un=$o(ja),pr=_s?_s.prototype:void 0,Va=pr?pr.valueOf:void 0,ph=pr?pr.toString:void 0;function Y(c){if(pi(c)&&!cn(c)&&!(c instanceof nn)){if(c instanceof Rr)return c;if(kn.call(c,\"__wrapped__\"))return Ad(c)}return new Rr(c)}var re=function(){function c(){}return function(f){if(!si(f))return{};if(df)return df(f);c.prototype=f;var x=new c;return c.prototype=void 0,x}}();function Wa(){}function Rr(c,f){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=void 0}function nn(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function tr(c){var f=-1,x=c==null?0:c.length;for(this.clear();++f<x;){var A=c[f];this.set(A[0],A[1])}}function Cr(c){var f=-1,x=c==null?0:c.length;for(this.clear();++f<x;){var A=c[f];this.set(A[0],A[1])}}function Zr(c){var f=-1,x=c==null?0:c.length;for(this.clear();++f<x;){var A=c[f];this.set(A[0],A[1])}}function Ur(c){var f=-1,x=c==null?0:c.length;for(this.__data__=new Zr;++f<x;)this.add(c[f])}function Yi(c){var f=this.__data__=new Cr(c);this.size=f.size}function ta(c,f){var x=cn(c),A=!x&&Ts(c),k=!x&&!A&&jr(c),ie=!x&&!A&&!k&&Qa(c),pe=x||A||k||ie,Te=pe?Ku(c.length,ad):[],Be=Te.length;for(var nt in c)!f&&!kn.call(c,nt)||pe&&(nt==\"length\"||k&&(nt==\"offset\"||nt==\"parent\")||ie&&(nt==\"buffer\"||nt==\"byteLength\"||nt==\"byteOffset\")||Yo(nt,Be))||Te.push(nt);return Te}function Bo(c){var f=c.length;return f?c[ws(0,f-1)]:void 0}function xs(c,f){return Ph(Ji(c),Uo(f,0,c.length))}function na(c){return Ph(Ji(c))}function ia(c,f,x){(x!==void 0&&!Ui(c[f],x)||x===void 0&&!(f in c))&&ko(c,f,x)}function bs(c,f,x){var A=c[f];kn.call(c,f)&&Ui(A,x)&&(x!==void 0||f in c)||ko(c,f,x)}function ra(c,f){for(var x=c.length;x--;)if(Ui(c[x][0],f))return x;return-1}function oa(c,f,x,A){return Kr(c,function(k,ie,pe){f(A,k,x(k),pe)}),A}function fh(c,f){return c&&nr(f,on(f),c)}function ko(c,f,x){f==\"__proto__\"&&lh?lh(c,f,{configurable:!0,enumerable:!0,value:x,writable:!0}):c[f]=x}function mh(c,f){for(var x=-1,A=f.length,k=Rt(A),ie=c==null;++x<A;)k[x]=ie?void 0:Ko(c,f[x]);return k}function Uo(c,f,x){return c==c&&(x!==void 0&&(c=c<=x?c:x),f!==void 0&&(c=c>=f?c:f)),c}function fr(c,f,x,A,k,ie){var pe,Te=1&f,Be=2&f,nt=4&f;if(x&&(pe=k?x(c,A,k,ie):x(c)),pe!==void 0)return pe;if(!si(c))return c;var rt=cn(c);if(rt){if(pe=function(ut){var xt=ut.length,Yt=new ut.constructor(xt);return xt&&typeof ut[0]==\"string\"&&kn.call(ut,\"index\")&&(Yt.index=ut.index,Yt.input=ut.input),Yt}(c),!Te)return Ji(c,pe)}else{var vt=vi(c),Ft=vt==Ie||vt==E;if(jr(c))return wd(c,Te);if(vt==ee||vt==H||Ft&&!k){if(pe=Be||Ft?{}:Ja(c),!Te)return Be?function(ut,xt){return nr(ut,io(ut),xt)}(c,function(ut,xt){return ut&&nr(xt,or(xt),ut)}(pe,c)):function(ut,xt){return nr(ut,Td(ut),xt)}(c,fh(pe,c))}else{if(!On[vt])return k?c:{};pe=function(ut,xt,Yt){var Lt=ut.constructor;switch(xt){case pt:return Eh(ut);case Z:case be:return new Lt(+ut);case Ne:return function(zt,dn){var Ht=dn?Eh(zt.buffer):zt.buffer;return new zt.constructor(Ht,zt.byteOffset,zt.byteLength)}(ut,Yt);case ae:case Me:case Fe:case j:case ye:case Oe:case\"[object Uint8ClampedArray]\":case Le:case De:return gf(ut,Yt);case L:return new Lt;case N:case X:return new Lt(ut);case C:return function(zt){var dn=new zt.constructor(zt.source,Ws.exec(zt));return dn.lastIndex=zt.lastIndex,dn}(ut);case z:return new Lt;case ne:return $t=ut,Va?Gn(Va.call($t)):{}}var $t}(c,vt,Te)}}ie||(ie=new Yi);var Gt=ie.get(c);if(Gt)return Gt;ie.set(c,pe),jf(c)?c.forEach(function(ut){pe.add(fr(ut,f,x,ut,c,ie))}):Fd(c)&&c.forEach(function(ut,xt){pe.set(xt,fr(ut,f,x,xt,c,ie))});var Wt=rt?void 0:(nt?Be?ir:Ch:Be?or:on)(c);return ur(Wt||c,function(ut,xt){Wt&&(ut=c[xt=ut]),bs(pe,xt,fr(ut,f,x,xt,c,ie))}),pe}function Go(c,f,x){var A=x.length;if(c==null)return!A;for(c=Gn(c);A--;){var k=x[A],ie=f[k],pe=c[k];if(pe===void 0&&!(k in c)||!ie(pe))return!1}return!0}function yo(c,f,x){if(typeof c!=\"function\")throw new dr(q);return Wl(function(){c.apply(void 0,x)},f)}function sa(c,f,x,A){var k=-1,ie=Ga,pe=!0,Te=c.length,Be=[],nt=f.length;if(!Te)return Be;x&&(f=Yn(f,hr(x))),A?(ie=Tl,pe=!1):f.length>=200&&(ie=Ha,pe=!1,f=new Ur(f));e:for(;++k<Te;){var rt=c[k],vt=x==null?rt:x(rt);if(rt=A||rt!==0?rt:0,pe&&vt==vt){for(var Ft=nt;Ft--;)if(f[Ft]===vt)continue e;Be.push(rt)}else ie(f,vt,A)||Be.push(rt)}return Be}Y.templateSettings={escape:qt,evaluate:en,interpolate:Bt,variable:\"\",imports:{_:Y}},Y.prototype=Wa.prototype,Y.prototype.constructor=Y,Rr.prototype=re(Wa.prototype),Rr.prototype.constructor=Rr,nn.prototype=re(Wa.prototype),nn.prototype.constructor=nn,tr.prototype.clear=function(){this.__data__=gt?gt(null):{},this.size=0},tr.prototype.delete=function(c){var f=this.has(c)&&delete this.__data__[c];return this.size-=f?1:0,f},tr.prototype.get=function(c){var f=this.__data__;if(gt){var x=f[c];return x===\"__lodash_hash_undefined__\"?void 0:x}return kn.call(f,c)?f[c]:void 0},tr.prototype.has=function(c){var f=this.__data__;return gt?f[c]!==void 0:kn.call(f,c)},tr.prototype.set=function(c,f){var x=this.__data__;return this.size+=this.has(c)?0:1,x[c]=gt&&f===void 0?\"__lodash_hash_undefined__\":f,this},Cr.prototype.clear=function(){this.__data__=[],this.size=0},Cr.prototype.delete=function(c){var f=this.__data__,x=ra(f,c);return!(x<0)&&(x==f.length-1?f.pop():ah.call(f,x,1),--this.size,!0)},Cr.prototype.get=function(c){var f=this.__data__,x=ra(f,c);return x<0?void 0:f[x][1]},Cr.prototype.has=function(c){return ra(this.__data__,c)>-1},Cr.prototype.set=function(c,f){var x=this.__data__,A=ra(x,c);return A<0?(++this.size,x.push([c,f])):x[A][1]=f,this},Zr.prototype.clear=function(){this.size=0,this.__data__={hash:new tr,map:new(Ks||Cr),string:new tr}},Zr.prototype.delete=function(c){var f=_a(this,c).delete(c);return this.size-=f?1:0,f},Zr.prototype.get=function(c){return _a(this,c).get(c)},Zr.prototype.has=function(c){return _a(this,c).has(c)},Zr.prototype.set=function(c,f){var x=_a(this,c),A=x.size;return x.set(c,f),this.size+=x.size==A?0:1,this},Ur.prototype.add=Ur.prototype.push=function(c){return this.__data__.set(c,\"__lodash_hash_undefined__\"),this},Ur.prototype.has=function(c){return this.__data__.has(c)},Yi.prototype.clear=function(){this.__data__=new Cr,this.size=0},Yi.prototype.delete=function(c){var f=this.__data__,x=f.delete(c);return this.size=f.size,x},Yi.prototype.get=function(c){return this.__data__.get(c)},Yi.prototype.has=function(c){return this.__data__.has(c)},Yi.prototype.set=function(c,f){var x=this.__data__;if(x instanceof Cr){var A=x.__data__;if(!Ks||A.length<199)return A.push([c,f]),this.size=++x.size,this;x=this.__data__=new Zr(A)}return x.set(c,f),this.size=x.size,this};var Kr=Ri(Si),Ho=Ri(pd,!0);function dd(c,f){var x=!0;return Kr(c,function(A,k,ie){return x=!!f(A,k,ie)}),x}function aa(c,f,x){for(var A=-1,k=c.length;++A<k;){var ie=c[A],pe=f(ie);if(pe!=null&&(Te===void 0?pe==pe&&!Or(pe):x(pe,Te)))var Te=pe,Be=ie}return Be}function gh(c,f){var x=[];return Kr(c,function(A,k,ie){f(A,k,ie)&&x.push(A)}),x}function ei(c,f,x,A,k){var ie=-1,pe=c.length;for(x||(x=_f),k||(k=[]);++ie<pe;){var Te=c[ie];f>0&&x(Te)?f>1?ei(Te,f-1,x,A,k):Do(k,Te):A||(k[k.length]=Te)}return k}var Ut=Vt(),la=Vt(!0);function Si(c,f){return c&&Ut(c,f,on)}function pd(c,f){return c&&la(c,f,on)}function vh(c,f){return No(f,function(x){return Jo(c[x])})}function mr(c,f){for(var x=0,A=(f=zo(f,c)).length;c!=null&&x<A;)c=c[zr(f[x++])];return x&&x==A?c:void 0}function Pl(c,f,x){var A=f(c);return cn(c)?A:Do(A,x(c))}function jn(c){return c==null?c===void 0?\"[object Undefined]\":\"[object Null]\":kr&&kr in Gn(c)?function(f){var x=kn.call(f,kr),A=f[kr];try{f[kr]=void 0;var k=!0}catch{}var ie=ih.call(f);return k&&(x?f[kr]=A:delete f[kr]),ie}(c):function(f){return ih.call(f)}(c)}function _h(c,f){return c>f}function ff(c,f){return c!=null&&kn.call(c,f)}function ua(c,f){return c!=null&&f in Gn(c)}function Il(c,f,x){for(var A=x?Tl:Ga,k=c[0].length,ie=c.length,pe=ie,Te=Rt(ie),Be=1/0,nt=[];pe--;){var rt=c[pe];pe&&f&&(rt=Yn(rt,hr(f))),Be=ui(rt.length,Be),Te[pe]=!x&&(f||k>=120&&rt.length>=120)?new Ur(pe&&rt):void 0}rt=c[0];var vt=-1,Ft=Te[0];e:for(;++vt<k&&nt.length<Be;){var Gt=rt[vt],Wt=f?f(Gt):Gt;if(Gt=x||Gt!==0?Gt:0,!(Ft?Ha(Ft,Wt):A(nt,Wt,x))){for(pe=ie;--pe;){var ut=Te[pe];if(!(ut?Ha(ut,Wt):A(c[pe],Wt,x)))continue e}Ft&&Ft.push(Wt),nt.push(Gt)}}return nt}function Ol(c,f,x){var A=(c=wf(c,f=zo(f,c)))==null?c:c[zr(Vn(f))];return A==null?void 0:er(A,c,x)}function fd(c){return pi(c)&&jn(c)==H}function xo(c,f,x,A,k){return c===f||(c==null||f==null||!pi(c)&&!pi(f)?c!=c&&f!=f:function(ie,pe,Te,Be,nt,rt){var vt=cn(ie),Ft=cn(pe),Gt=vt?D:vi(ie),Wt=Ft?D:vi(pe),ut=(Gt=Gt==H?ee:Gt)==ee,xt=(Wt=Wt==H?ee:Wt)==ee,Yt=Gt==Wt;if(Yt&&jr(ie)){if(!jr(pe))return!1;vt=!0,ut=!1}if(Yt&&!ut)return rt||(rt=new Yi),vt||Qa(ie)?ga(ie,pe,Te,Be,nt,rt):function(Ht,Kt,yi,Hi,Wr,Ln,Lr){switch(yi){case Ne:if(Ht.byteLength!=Kt.byteLength||Ht.byteOffset!=Kt.byteOffset)return!1;Ht=Ht.buffer,Kt=Kt.buffer;case pt:return!(Ht.byteLength!=Kt.byteLength||!Ln(new oh(Ht),new oh(Kt)));case Z:case be:case N:return Ui(+Ht,+Kt);case Ce:return Ht.name==Kt.name&&Ht.message==Kt.message;case C:case X:return Ht==Kt+\"\";case L:var To=eh;case z:var Sa=1&Hi;if(To||(To=Ml),Ht.size!=Kt.size&&!Sa)return!1;var Ta=Lr.get(Ht);if(Ta)return Ta==Kt;Hi|=2,Lr.set(Ht,Kt);var Ms=ga(To(Ht),To(Kt),Hi,Wr,Ln,Lr);return Lr.delete(Ht),Ms;case ne:if(Va)return Va.call(Ht)==Va.call(Kt)}return!1}(ie,pe,Gt,Te,Be,nt,rt);if(!(1&Te)){var Lt=ut&&kn.call(ie,\"__wrapped__\"),$t=xt&&kn.call(pe,\"__wrapped__\");if(Lt||$t){var zt=Lt?ie.value():ie,dn=$t?pe.value():pe;return rt||(rt=new Yi),nt(zt,dn,Te,Be,rt)}}return Yt?(rt||(rt=new Yi),function(Ht,Kt,yi,Hi,Wr,Ln){var Lr=1&yi,To=Ch(Ht),Sa=To.length,Ta=Ch(Kt).length;if(Sa!=Ta&&!Lr)return!1;for(var Ms=Sa;Ms--;){var Eo=To[Ms];if(!(Lr?Eo in Kt:kn.call(Kt,Eo)))return!1}var tc=Ln.get(Ht),nc=Ln.get(Kt);if(tc&&nc)return tc==Kt&&nc==Ht;var ou=!0;Ln.set(Ht,Kt),Ln.set(Kt,Ht);for(var Ea=Lr;++Ms<Sa;){Eo=To[Ms];var As=Ht[Eo],Ma=Kt[Eo];if(Hi)var ic=Lr?Hi(Ma,As,Eo,Kt,Ht,Ln):Hi(As,Ma,Eo,Ht,Kt,Ln);if(!(ic===void 0?As===Ma||Wr(As,Ma,yi,Hi,Ln):ic)){ou=!1;break}Ea||(Ea=Eo==\"constructor\")}if(ou&&!Ea){var Rs=Ht.constructor,su=Kt.constructor;Rs==su||!(\"constructor\"in Ht)||!(\"constructor\"in Kt)||typeof Rs==\"function\"&&Rs instanceof Rs&&typeof su==\"function\"&&su instanceof su||(ou=!1)}return Ln.delete(Ht),Ln.delete(Kt),ou}(ie,pe,Te,Be,nt,rt)):!1}(c,f,x,A,xo,k))}function Qr(c,f,x,A){var k=x.length,ie=k,pe=!A;if(c==null)return!ie;for(c=Gn(c);k--;){var Te=x[k];if(pe&&Te[2]?Te[1]!==c[Te[0]]:!(Te[0]in c))return!1}for(;++k<ie;){var Be=(Te=x[k])[0],nt=c[Be],rt=Te[1];if(pe&&Te[2]){if(nt===void 0&&!(Be in c))return!1}else{var vt=new Yi;if(A)var Ft=A(nt,rt,Be,c,f,vt);if(!(Ft===void 0?xo(rt,nt,3,A,vt):Ft))return!1}}return!0}function Ll(c){return!(!si(c)||(f=c,hf&&hf in f))&&(Jo(c)?Fg:I).test($o(c));var f}function Xa(c){return typeof c==\"function\"?c:c==null?sr:typeof c==\"object\"?cn(c)?mf(c[0],c[1]):vd(c):jd(c)}function md(c){if(!Vl(c))return Vi(c);var f=[];for(var x in Gn(c))kn.call(c,x)&&x!=\"constructor\"&&f.push(x);return f}function zg(c){if(!si(c))return function(k){var ie=[];if(k!=null)for(var pe in Gn(k))ie.push(pe);return ie}(c);var f=Vl(c),x=[];for(var A in c)(A!=\"constructor\"||!f&&kn.call(c,A))&&x.push(A);return x}function yh(c,f){return c<f}function gd(c,f){var x=-1,A=gr(c)?Rt(c.length):[];return Kr(c,function(k,ie,pe){A[++x]=f(k,ie,pe)}),A}function vd(c){var f=zl(c);return f.length==1&&f[0][2]?xf(f[0][0],f[0][1]):function(x){return x===c||Qr(x,c,f)}}function mf(c,f){return _n(c)&&yf(f)?xf(zr(c),f):function(x){var A=Ko(x,c);return A===void 0&&A===f?Ud(x,c):xo(f,A,3)}}function Nl(c,f,x,A,k){c!==f&&Ut(f,function(ie,pe){if(k||(k=new Yi),si(ie))(function(Be,nt,rt,vt,Ft,Gt,Wt){var ut=Ed(Be,rt),xt=Ed(nt,rt),Yt=Wt.get(xt);if(Yt)return void ia(Be,rt,Yt);var Lt=Gt?Gt(ut,xt,rt+\"\",Be,nt,Wt):void 0,$t=Lt===void 0;if($t){var zt=cn(xt),dn=!zt&&jr(xt),Ht=!zt&&!dn&&Qa(xt);Lt=xt,zt||dn||Ht?cn(ut)?Lt=ut:_i(ut)?Lt=Ji(ut):dn?($t=!1,Lt=wd(xt,!0)):Ht?($t=!1,Lt=gf(xt,!0)):Lt=[]:Ka(xt)||Ts(xt)?(Lt=ut,Ts(ut)?Lt=Bd(ut):si(ut)&&!Jo(ut)||(Lt=Ja(xt))):$t=!1}$t&&(Wt.set(xt,Lt),Ft(Lt,xt,vt,Gt,Wt),Wt.delete(xt)),ia(Be,rt,Lt)})(c,f,pe,x,Nl,A,k);else{var Te=A?A(Ed(c,pe),ie,pe+\"\",c,f,k):void 0;Te===void 0&&(Te=ie),ia(c,pe,Te)}},or)}function yn(c,f){var x=c.length;if(x)return Yo(f+=f<0?x:0,x)?c[f]:void 0}function Gr(c,f,x){f=f.length?Yn(f,function(k){return cn(k)?function(ie){return mr(ie,k.length===1?k[0]:k)}:k}):[sr];var A=-1;return f=Yn(f,hr(jt())),function(k,ie){var pe=k.length;for(k.sort(ie);pe--;)k[pe]=k[pe].value;return k}(gd(c,function(k,ie,pe){return{criteria:Yn(f,function(Te){return Te(k)}),index:++A,value:k}}),function(k,ie){return function(pe,Te,Be){for(var nt=-1,rt=pe.criteria,vt=Te.criteria,Ft=rt.length,Gt=Be.length;++nt<Ft;){var Wt=da(rt[nt],vt[nt]);if(Wt){if(nt>=Gt)return Wt;var ut=Be[nt];return Wt*(ut==\"desc\"?-1:1)}}return pe.index-Te.index}(k,ie,x)})}function bo(c,f,x){for(var A=-1,k=f.length,ie={};++A<k;){var pe=f[A],Te=mr(c,pe);x(Te,pe)&&ha(ie,zo(pe,c),Te)}return ie}function Dl(c,f,x,A){var k=A?rf:Ys,ie=-1,pe=f.length,Te=c;for(c===f&&(f=Ji(f)),x&&(Te=Yn(c,hr(x)));++ie<pe;)for(var Be=0,nt=f[ie],rt=x?x(nt):nt;(Be=k(Te,rt,Be,A))>-1;)Te!==c&&ah.call(Te,Be,1),ah.call(c,Be,1);return c}function wo(c,f){for(var x=c?f.length:0,A=x-1;x--;){var k=f[x];if(x==A||k!==ie){var ie=k;Yo(k)?ah.call(c,k,1):Hn(c,k)}}return c}function ws(c,f){return c+hh(Bi()*(f-c+1))}function Ss(c,f){var x=\"\";if(!c||f<1||f>9007199254740991)return x;do f%2&&(x+=c),(f=hh(f/2))&&(c+=c);while(f);return x}function vn(c,f){return Md(bf(c,f,sr),c+\"\")}function _d(c){return Bo(oo(c))}function yd(c,f){var x=oo(c);return Ph(x,Uo(f,0,x.length))}function ha(c,f,x,A){if(!si(c))return c;for(var k=-1,ie=(f=zo(f,c)).length,pe=ie-1,Te=c;Te!=null&&++k<ie;){var Be=zr(f[k]),nt=x;if(Be===\"__proto__\"||Be===\"constructor\"||Be===\"prototype\")return c;if(k!=pe){var rt=Te[Be];(nt=A?A(rt,Be,Te):void 0)===void 0&&(nt=si(rt)?rt:Yo(f[k+1])?[]:{})}bs(Te,Be,nt),Te=Te[Be]}return c}var hi=Qn?function(c,f){return Qn.set(c,f),c}:sr,jg=lh?function(c,f){return lh(c,\"toString\",{configurable:!0,enumerable:!1,value:nl(f),writable:!0})}:sr;function ki(c){return Ph(oo(c))}function Pr(c,f,x){var A=-1,k=c.length;f<0&&(f=-f>k?0:k+f),(x=x>k?k:x)<0&&(x+=k),k=f>x?0:x-f>>>0,f>>>=0;for(var ie=Rt(k);++A<k;)ie[A]=c[A+f];return ie}function eo(c,f){var x;return Kr(c,function(A,k,ie){return!(x=f(A,k,ie))}),!!x}function ca(c,f,x){var A=0,k=c==null?A:c.length;if(typeof f==\"number\"&&f==f&&k<=2147483647){for(;A<k;){var ie=A+k>>>1,pe=c[ie];pe!==null&&!Or(pe)&&(x?pe<=f:pe<f)?A=ie+1:k=ie}return k}return Fl(c,f,sr,x)}function Fl(c,f,x,A){var k=0,ie=c==null?0:c.length;if(ie===0)return 0;for(var pe=(f=x(f))!=f,Te=f===null,Be=Or(f),nt=f===void 0;k<ie;){var rt=hh((k+ie)/2),vt=x(c[rt]),Ft=vt!==void 0,Gt=vt===null,Wt=vt==vt,ut=Or(vt);if(pe)var xt=A||Wt;else xt=nt?Wt&&(A||Ft):Te?Wt&&Ft&&(A||!Gt):Be?Wt&&Ft&&!Gt&&(A||!ut):!Gt&&!ut&&(A?vt<=f:vt<f);xt?k=rt+1:ie=rt}return ui(ie,4294967294)}function xh(c,f){for(var x=-1,A=c.length,k=0,ie=[];++x<A;){var pe=c[x],Te=f?f(pe):pe;if(!x||!Ui(Te,Be)){var Be=Te;ie[k++]=pe===0?0:pe}}return ie}function bh(c){return typeof c==\"number\"?c:Or(c)?NaN:+c}function Et(c){if(typeof c==\"string\")return c;if(cn(c))return Yn(c,Et)+\"\";if(Or(c))return ph?ph.call(c):\"\";var f=c+\"\";return f==\"0\"&&1/c==-1/0?\"-0\":f}function $i(c,f,x){var A=-1,k=Ga,ie=c.length,pe=!0,Te=[],Be=Te;if(x)pe=!1,k=Tl;else if(ie>=200){var nt=f?null:Ah(c);if(nt)return Ml(nt);pe=!1,k=Ha,Be=new Ur}else Be=f?[]:Te;e:for(;++A<ie;){var rt=c[A],vt=f?f(rt):rt;if(rt=x||rt!==0?rt:0,pe&&vt==vt){for(var Ft=Be.length;Ft--;)if(Be[Ft]===vt)continue e;f&&Be.push(vt),Te.push(rt)}else k(Be,vt,x)||(Be!==Te&&Be.push(vt),Te.push(rt))}return Te}function Hn(c,f){return(c=wf(c,f=zo(f,c)))==null||delete c[zr(Vn(f))]}function Bl(c,f,x,A){return ha(c,f,x(mr(c,f)),A)}function mn(c,f,x,A){for(var k=c.length,ie=A?k:-1;(A?ie--:++ie<k)&&f(c[ie],ie,c););return x?Pr(c,A?0:ie,A?ie+1:k):Pr(c,A?ie+1:0,A?k:ie)}function xd(c,f){var x=c;return x instanceof nn&&(x=x.value()),qu(f,function(A,k){return k.func.apply(k.thisArg,Do([A],k.args))},x)}function wh(c,f,x){var A=c.length;if(A<2)return A?$i(c[0]):[];for(var k=-1,ie=Rt(A);++k<A;)for(var pe=c[k],Te=-1;++Te<A;)Te!=k&&(ie[k]=sa(ie[k]||pe,c[Te],f,x));return $i(ei(ie,1),f,x)}function bd(c,f,x){for(var A=-1,k=c.length,ie=f.length,pe={};++A<k;){var Te=A<ie?f[A]:void 0;x(pe,c[A],Te)}return pe}function Sh(c){return _i(c)?c:[]}function qa(c){return typeof c==\"function\"?c:sr}function zo(c,f){return cn(c)?c:_n(c,f)?[c]:Mf(Dn(c))}var Th=vn;function jo(c,f,x){var A=c.length;return x=x===void 0?A:x,!f&&x>=A?c:Pr(c,f,x)}var Mt=Bg||function(c){return Fi.clearTimeout(c)};function wd(c,f){if(f)return c.slice();var x=c.length,A=cf?cf(x):new c.constructor(x);return c.copy(A),A}function Eh(c){var f=new c.constructor(c.byteLength);return new oh(f).set(new oh(c)),f}function gf(c,f){var x=f?Eh(c.buffer):c.buffer;return new c.constructor(x,c.byteOffset,c.length)}function da(c,f){if(c!==f){var x=c!==void 0,A=c===null,k=c==c,ie=Or(c),pe=f!==void 0,Te=f===null,Be=f==f,nt=Or(f);if(!Te&&!nt&&!ie&&c>f||ie&&pe&&Be&&!Te&&!nt||A&&pe&&Be||!x&&Be||!k)return 1;if(!A&&!ie&&!nt&&c<f||nt&&x&&k&&!A&&!ie||Te&&x&&k||!pe&&k||!Be)return-1}return 0}function vf(c,f,x,A){for(var k=-1,ie=c.length,pe=x.length,Te=-1,Be=f.length,nt=li(ie-pe,0),rt=Rt(Be+nt),vt=!A;++Te<Be;)rt[Te]=f[Te];for(;++k<pe;)(vt||k<ie)&&(rt[x[k]]=c[k]);for(;nt--;)rt[Te++]=c[k++];return rt}function Ir(c,f,x,A){for(var k=-1,ie=c.length,pe=-1,Te=x.length,Be=-1,nt=f.length,rt=li(ie-Te,0),vt=Rt(rt+nt),Ft=!A;++k<rt;)vt[k]=c[k];for(var Gt=k;++Be<nt;)vt[Gt+Be]=f[Be];for(;++pe<Te;)(Ft||k<ie)&&(vt[Gt+x[pe]]=c[k++]);return vt}function Ji(c,f){var x=-1,A=c.length;for(f||(f=Rt(A));++x<A;)f[x]=c[x];return f}function nr(c,f,x,A){var k=!x;x||(x={});for(var ie=-1,pe=f.length;++ie<pe;){var Te=f[ie],Be=A?A(x[Te],c[Te],Te,x,c):void 0;Be===void 0&&(Be=c[Te]),k?ko(x,Te,Be):bs(x,Te,Be)}return x}function Zi(c,f){return function(x,A){var k=cn(x)?Zc:oa,ie=f?f():{};return k(x,c,jt(A,2),ie)}}function So(c){return vn(function(f,x){var A=-1,k=x.length,ie=k>1?x[k-1]:void 0,pe=k>2?x[2]:void 0;for(ie=c.length>3&&typeof ie==\"function\"?(k--,ie):void 0,pe&&di(x[0],x[1],pe)&&(ie=k<3?void 0:ie,k=1),f=Gn(f);++A<k;){var Te=x[A];Te&&c(f,Te,A,ie)}return f})}function Ri(c,f){return function(x,A){if(x==null)return x;if(!gr(x))return c(x,A);for(var k=x.length,ie=f?k:-1,pe=Gn(x);(f?ie--:++ie<k)&&A(pe[ie],ie,pe)!==!1;);return x}}function Vt(c){return function(f,x,A){for(var k=-1,ie=Gn(f),pe=A(f),Te=pe.length;Te--;){var Be=pe[c?Te:++k];if(x(ie[Be],Be,ie)===!1)break}return f}}function Sd(c){return function(f){var x=$s(f=Dn(f))?cr(f):void 0,A=x?x[0]:f.charAt(0),k=x?jo(x,1).join(\"\"):f.slice(1);return A[c]()+k}}function to(c){return function(f){return qu(jh(wa(f).replace(Jp,\"\")),c,\"\")}}function pa(c){return function(){var f=arguments;switch(f.length){case 0:return new c;case 1:return new c(f[0]);case 2:return new c(f[0],f[1]);case 3:return new c(f[0],f[1],f[2]);case 4:return new c(f[0],f[1],f[2],f[3]);case 5:return new c(f[0],f[1],f[2],f[3],f[4]);case 6:return new c(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new c(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var x=re(c.prototype),A=c.apply(x,f);return si(A)?A:x}}function Vo(c){return function(f,x,A){var k=Gn(f);if(!gr(f)){var ie=jt(x,3);f=on(f),x=function(Te){return ie(k[Te],Te,k)}}var pe=c(f,x,A);return pe>-1?k[ie?f[pe]:pe]:void 0}}function Wo(c){return ti(function(f){var x=f.length,A=x,k=Rr.prototype.thru;for(c&&f.reverse();A--;){var ie=f[A];if(typeof ie!=\"function\")throw new dr(q);if(k&&!pe&&ci(ie)==\"wrapper\")var pe=new Rr([],!0)}for(A=pe?A:x;++A<x;){var Te=ci(ie=f[A]),Be=Te==\"wrapper\"?va(ie):void 0;pe=Be&&Ct(Be[0])&&Be[1]==424&&!Be[4].length&&Be[9]==1?pe[ci(Be[0])].apply(pe,Be[3]):ie.length==1&&Ct(ie)?pe[Te]():pe.thru(ie)}return function(){var nt=arguments,rt=nt[0];if(pe&&nt.length==1&&cn(rt))return pe.plant(rt).value();for(var vt=0,Ft=x?f[vt].apply(this,nt):rt;++vt<x;)Ft=f[vt].call(this,Ft);return Ft}})}function no(c,f,x,A,k,ie,pe,Te,Be,nt){var rt=128&f,vt=1&f,Ft=2&f,Gt=24&f,Wt=512&f,ut=Ft?void 0:pa(c);return function xt(){for(var Yt=arguments.length,Lt=Rt(Yt),$t=Yt;$t--;)Lt[$t]=arguments[$t];if(Gt)var zt=qo(xt),dn=of(Lt,zt);if(A&&(Lt=vf(Lt,A,k,Gt)),ie&&(Lt=Ir(Lt,ie,pe,Gt)),Yt-=dn,Gt&&Yt<nt){var Ht=Fo(Lt,zt);return Gl(c,f,no,xt.placeholder,x,Lt,Ht,Te,Be,nt-Yt)}var Kt=vt?x:this,yi=Ft?Kt[c]:c;return Yt=Lt.length,Te?Lt=Vg(Lt,Te):Wt&&Yt>1&&Lt.reverse(),rt&&Be<Yt&&(Lt.length=Be),this&&this!==Fi&&this instanceof xt&&(yi=ut||pa(yi)),yi.apply(Kt,Lt)}}function Mh(c,f){return function(x,A){return function(k,ie,pe,Te){return Si(k,function(Be,nt,rt){ie(Te,pe(Be),nt,rt)}),Te}(x,c,f(A),{})}}function Ya(c,f){return function(x,A){var k;if(x===void 0&&A===void 0)return f;if(x!==void 0&&(k=x),A!==void 0){if(k===void 0)return A;typeof x==\"string\"||typeof A==\"string\"?(x=Et(x),A=Et(A)):(x=bh(x),A=bh(A)),k=c(x,A)}return k}}function kl(c){return ti(function(f){return f=Yn(f,hr(jt())),vn(function(x){var A=this;return c(f,function(k){return er(k,A,x)})})})}function fa(c,f){var x=(f=f===void 0?\" \":Et(f)).length;if(x<2)return x?Ss(f,c):f;var A=Ss(f,uh(c/go(f)));return $s(f)?jo(cr(A),0,c).join(\"\"):A.slice(0,c)}function Ul(c){return function(f,x,A){return A&&typeof A!=\"number\"&&di(f,x,A)&&(x=A=void 0),f=Zo(f),x===void 0?(x=f,f=0):x=Zo(x),function(k,ie,pe,Te){for(var Be=-1,nt=li(uh((ie-k)/(pe||1)),0),rt=Rt(nt);nt--;)rt[Te?nt:++Be]=k,k+=pe;return rt}(f,x,A=A===void 0?f<x?1:-1:Zo(A),c)}}function ma(c){return function(f,x){return typeof f==\"string\"&&typeof x==\"string\"||(f=Vr(f),x=Vr(x)),c(f,x)}}function Gl(c,f,x,A,k,ie,pe,Te,Be,nt){var rt=8&f;f|=rt?32:64,4&(f&=~(rt?64:32))||(f&=-4);var vt=[c,f,k,rt?ie:void 0,rt?pe:void 0,rt?void 0:ie,rt?void 0:pe,Te,Be,nt],Ft=x.apply(void 0,vt);return Ct(c)&&Sf(Ft,vt),Ft.placeholder=A,Tf(Ft,c,f)}function $a(c){var f=Mr[c];return function(x,A){if(x=Vr(x),(A=A==null?0:ui(gn(A),292))&&ch(x)){var k=(Dn(x)+\"e\").split(\"e\");return+((k=(Dn(f(k[0]+\"e\"+(+k[1]+A)))+\"e\").split(\"e\"))[0]+\"e\"+(+k[1]-A))}return f(x)}}var Ah=Qs&&1/Ml(new Qs([,-0]))[1]==1/0?function(c){return new Qs(c)}:qh;function Rh(c){return function(f){var x=vi(f);return x==L?eh(f):x==z?Al(f):function(A,k){return Yn(k,function(ie){return[ie,A[ie]]})}(f,c(f))}}function Hr(c,f,x,A,k,ie,pe,Te){var Be=2&f;if(!Be&&typeof c!=\"function\")throw new dr(q);var nt=A?A.length:0;if(nt||(f&=-97,A=k=void 0),pe=pe===void 0?pe:li(gn(pe),0),Te=Te===void 0?Te:gn(Te),nt-=k?k.length:0,64&f){var rt=A,vt=k;A=k=void 0}var Ft=Be?void 0:va(c),Gt=[c,f,x,A,k,rt,vt,ie,pe,Te];if(Ft&&function(ut,xt){var Yt=ut[1],Lt=xt[1],$t=Yt|Lt,zt=$t<131,dn=Lt==128&&Yt==8||Lt==128&&Yt==256&&ut[7].length<=xt[8]||Lt==384&&xt[7].length<=xt[8]&&Yt==8;if(!zt&&!dn)return ut;1&Lt&&(ut[2]=xt[2],$t|=1&Yt?0:4);var Ht=xt[3];if(Ht){var Kt=ut[3];ut[3]=Kt?vf(Kt,Ht,xt[4]):Ht,ut[4]=Kt?Fo(ut[3],O):xt[4]}(Ht=xt[5])&&(Kt=ut[5],ut[5]=Kt?Ir(Kt,Ht,xt[6]):Ht,ut[6]=Kt?Fo(ut[5],O):xt[6]),(Ht=xt[7])&&(ut[7]=Ht),128&Lt&&(ut[8]=ut[8]==null?xt[8]:ui(ut[8],xt[8])),ut[9]==null&&(ut[9]=xt[9]),ut[0]=xt[0],ut[1]=$t}(Gt,Ft),c=Gt[0],f=Gt[1],x=Gt[2],A=Gt[3],k=Gt[4],!(Te=Gt[9]=Gt[9]===void 0?Be?0:c.length:li(Gt[9]-nt,0))&&24&f&&(f&=-25),f&&f!=1)Wt=f==8||f==16?function(ut,xt,Yt){var Lt=pa(ut);return function $t(){for(var zt=arguments.length,dn=Rt(zt),Ht=zt,Kt=qo($t);Ht--;)dn[Ht]=arguments[Ht];var yi=zt<3&&dn[0]!==Kt&&dn[zt-1]!==Kt?[]:Fo(dn,Kt);if((zt-=yi.length)<Yt)return Gl(ut,xt,no,$t.placeholder,void 0,dn,yi,void 0,void 0,Yt-zt);var Hi=this&&this!==Fi&&this instanceof $t?Lt:ut;return er(Hi,this,dn)}}(c,f,Te):f!=32&&f!=33||k.length?no.apply(void 0,Gt):function(ut,xt,Yt,Lt){var $t=1&xt,zt=pa(ut);return function dn(){for(var Ht=-1,Kt=arguments.length,yi=-1,Hi=Lt.length,Wr=Rt(Hi+Kt),Ln=this&&this!==Fi&&this instanceof dn?zt:ut;++yi<Hi;)Wr[yi]=Lt[yi];for(;Kt--;)Wr[yi++]=arguments[++Ht];return er(Ln,$t?Yt:this,Wr)}}(c,f,x,A);else var Wt=function(ut,xt,Yt){var Lt=1&xt,$t=pa(ut);return function zt(){var dn=this&&this!==Fi&&this instanceof zt?$t:ut;return dn.apply(Lt?Yt:this,arguments)}}(c,f,x);return Tf((Ft?hi:Sf)(Wt,Gt),c,f)}function Xn(c,f,x,A){return c===void 0||Ui(c,vs[x])&&!kn.call(A,x)?f:c}function Hl(c,f,x,A,k,ie){return si(c)&&si(f)&&(ie.set(f,c),Nl(c,f,void 0,Hl,ie),ie.delete(f)),c}function Xo(c){return Ka(c)?void 0:c}function ga(c,f,x,A,k,ie){var pe=1&x,Te=c.length,Be=f.length;if(Te!=Be&&!(pe&&Be>Te))return!1;var nt=ie.get(c),rt=ie.get(f);if(nt&&rt)return nt==f&&rt==c;var vt=-1,Ft=!0,Gt=2&x?new Ur:void 0;for(ie.set(c,f),ie.set(f,c);++vt<Te;){var Wt=c[vt],ut=f[vt];if(A)var xt=pe?A(ut,Wt,vt,f,c,ie):A(Wt,ut,vt,c,f,ie);if(xt!==void 0){if(xt)continue;Ft=!1;break}if(Gt){if(!Yu(f,function(Yt,Lt){if(!Ha(Gt,Lt)&&(Wt===Yt||k(Wt,Yt,x,A,ie)))return Gt.push(Lt)})){Ft=!1;break}}else if(Wt!==ut&&!k(Wt,ut,x,A,ie)){Ft=!1;break}}return ie.delete(c),ie.delete(f),Ft}function ti(c){return Md(bf(c,void 0,Pd),c+\"\")}function Ch(c){return Pl(c,on,Td)}function ir(c){return Pl(c,or,io)}var va=Qn?function(c){return Qn.get(c)}:qh;function ci(c){for(var f=c.name+\"\",x=Jr[f],A=kn.call(Jr,f)?x.length:0;A--;){var k=x[A],ie=k.func;if(ie==null||ie==c)return k.name}return f}function qo(c){return(kn.call(Y,\"placeholder\")?Y:c).placeholder}function jt(){var c=Y.iteratee||Xh;return c=c===Xh?Xa:c,arguments.length?c(arguments[0],arguments[1]):c}function _a(c,f){var x,A,k=c.__data__;return((A=typeof(x=f))==\"string\"||A==\"number\"||A==\"symbol\"||A==\"boolean\"?x!==\"__proto__\":x===null)?k[typeof f==\"string\"?\"string\":\"hash\"]:k.map}function zl(c){for(var f=on(c),x=f.length;x--;){var A=f[x],k=c[A];f[x]=[A,k,yf(k)]}return f}function ya(c,f){var x=function(A,k){return A==null?void 0:A[k]}(c,f);return Ll(x)?x:void 0}var Td=ud?function(c){return c==null?[]:(c=Gn(c),No(ud(c),function(f){return pf.call(c,f)}))}:Zh,io=ud?function(c){for(var f=[];c;)Do(f,Td(c)),c=sh(c);return f}:Zh,vi=jn;function jl(c,f,x){for(var A=-1,k=(f=zo(f,c)).length,ie=!1;++A<k;){var pe=zr(f[A]);if(!(ie=c!=null&&x(c,pe)))break;c=c[pe]}return ie||++A!=k?ie:!!(k=c==null?0:c.length)&&Bh(k)&&Yo(pe,k)&&(cn(c)||Ts(c))}function Ja(c){return typeof c.constructor!=\"function\"||Vl(c)?{}:re(sh(c))}function _f(c){return cn(c)||Ts(c)||!!(ld&&c&&c[ld])}function Yo(c,f){var x=typeof c;return!!(f=f==null?9007199254740991:f)&&(x==\"number\"||x!=\"symbol\"&&J.test(c))&&c>-1&&c%1==0&&c<f}function di(c,f,x){if(!si(x))return!1;var A=typeof f;return!!(A==\"number\"?gr(x)&&Yo(f,x.length):A==\"string\"&&f in x)&&Ui(x[f],c)}function _n(c,f){if(cn(c))return!1;var x=typeof c;return!(x!=\"number\"&&x!=\"symbol\"&&x!=\"boolean\"&&c!=null&&!Or(c))||Bn.test(c)||!Fn.test(c)||f!=null&&c in Gn(f)}function Ct(c){var f=ci(c),x=Y[f];if(typeof x!=\"function\"||!(f in nn.prototype))return!1;if(c===x)return!0;var A=va(x);return!!A&&c===A[0]}(Zs&&vi(new Zs(new ArrayBuffer(1)))!=Ne||Ks&&vi(new Ks)!=L||dh&&vi(dh.resolve())!=\"[object Promise]\"||Qs&&vi(new Qs)!=z||ja&&vi(new ja)!=Ve)&&(vi=function(c){var f=jn(c),x=f==ee?c.constructor:void 0,A=x?$o(x):\"\";if(A)switch(A){case ea:return Ne;case Hg:return L;case gi:return\"[object Promise]\";case cd:return z;case Un:return Ve}return f});var ro=vo?Jo:Kh;function Vl(c){var f=c&&c.constructor;return c===(typeof f==\"function\"&&f.prototype||vs)}function yf(c){return c==c&&!si(c)}function xf(c,f){return function(x){return x!=null&&x[c]===f&&(f!==void 0||c in Gn(x))}}function bf(c,f,x){return f=li(f===void 0?c.length-1:f,0),function(){for(var A=arguments,k=-1,ie=li(A.length-f,0),pe=Rt(ie);++k<ie;)pe[k]=A[f+k];k=-1;for(var Te=Rt(f+1);++k<f;)Te[k]=A[k];return Te[f]=x(pe),er(c,this,Te)}}function wf(c,f){return f.length<2?c:mr(c,Pr(f,0,-1))}function Vg(c,f){for(var x=c.length,A=ui(f.length,x),k=Ji(c);A--;){var ie=f[A];c[A]=Yo(ie,x)?k[ie]:void 0}return c}function Ed(c,f){if((f!==\"constructor\"||typeof c[f]!=\"function\")&&f!=\"__proto__\")return c[f]}var Sf=Ef(hi),Wl=Ug||function(c,f){return Fi.setTimeout(c,f)},Md=Ef(jg);function Tf(c,f,x){var A=f+\"\";return Md(c,function(k,ie){var pe=ie.length;if(!pe)return k;var Te=pe-1;return ie[Te]=(pe>1?\"& \":\"\")+ie[Te],ie=ie.join(pe>2?\", \":\" \"),k.replace(Rn,`{\n/* [wrapped with `+ie+`] */\n`)}(A,function(k,ie){return ur($,function(pe){var Te=\"_.\"+pe[0];ie&pe[1]&&!Ga(k,Te)&&k.push(Te)}),k.sort()}(function(k){var ie=k.match(Ni);return ie?ie[1].split(mi):[]}(A),x)))}function Ef(c){var f=0,x=0;return function(){var A=Cl(),k=16-(A-x);if(x=A,k>0){if(++f>=800)return arguments[0]}else f=0;return c.apply(void 0,arguments)}}function Ph(c,f){var x=-1,A=c.length,k=A-1;for(f=f===void 0?A:f;++x<f;){var ie=ws(x,k),pe=c[ie];c[ie]=c[x],c[x]=pe}return c.length=f,c}var Mf=function(c){var f=Nh(c,function(A){return x.size===500&&x.clear(),A}),x=f.cache;return f}(function(c){var f=[];return c.charCodeAt(0)===46&&f.push(\"\"),c.replace(Mn,function(x,A,k,ie){f.push(k?ie.replace(Po,\"$1\"):A||x)}),f});function zr(c){if(typeof c==\"string\"||Or(c))return c;var f=c+\"\";return f==\"0\"&&1/c==-1/0?\"-0\":f}function $o(c){if(c!=null){try{return Rl.call(c)}catch{}try{return c+\"\"}catch{}}return\"\"}function Ad(c){if(c instanceof nn)return c.clone();var f=new Rr(c.__wrapped__,c.__chain__);return f.__actions__=Ji(c.__actions__),f.__index__=c.__index__,f.__values__=c.__values__,f}var Wg=vn(function(c,f){return _i(c)?sa(c,ei(f,1,_i,!0)):[]}),Xg=vn(function(c,f){var x=Vn(f);return _i(x)&&(x=void 0),_i(c)?sa(c,ei(f,1,_i,!0),jt(x,2)):[]}),Af=vn(function(c,f){var x=Vn(f);return _i(x)&&(x=void 0),_i(c)?sa(c,ei(f,1,_i,!0),void 0,x):[]});function Rd(c,f,x){var A=c==null?0:c.length;if(!A)return-1;var k=x==null?0:gn(x);return k<0&&(k=li(A+k,0)),El(c,jt(f,3),k)}function Cd(c,f,x){var A=c==null?0:c.length;if(!A)return-1;var k=A-1;return x!==void 0&&(k=gn(x),k=x<0?li(A+k,0):ui(k,A-1)),El(c,jt(f,3),k,!0)}function Pd(c){return c!=null&&c.length?ei(c,1):[]}function Id(c){return c&&c.length?c[0]:void 0}var Rf=vn(function(c){var f=Yn(c,Sh);return f.length&&f[0]===c[0]?Il(f):[]}),Za=vn(function(c){var f=Vn(c),x=Yn(c,Sh);return f===Vn(x)?f=void 0:x.pop(),x.length&&x[0]===c[0]?Il(x,jt(f,2)):[]}),rr=vn(function(c){var f=Vn(c),x=Yn(c,Sh);return(f=typeof f==\"function\"?f:void 0)&&x.pop(),x.length&&x[0]===c[0]?Il(x,void 0,f):[]});function Vn(c){var f=c==null?0:c.length;return f?c[f-1]:void 0}var Cf=vn(Pf);function Pf(c,f){return c&&c.length&&f&&f.length?Dl(c,f):c}var qg=ti(function(c,f){var x=c==null?0:c.length,A=mh(c,f);return wo(c,Yn(f,function(k){return Yo(k,x)?+k:k}).sort(da)),A});function Od(c){return c==null?c:hd.call(c)}var Yg=vn(function(c){return $i(ei(c,1,_i,!0))}),$g=vn(function(c){var f=Vn(c);return _i(f)&&(f=void 0),$i(ei(c,1,_i,!0),jt(f,2))}),Jg=vn(function(c){var f=Vn(c);return f=typeof f==\"function\"?f:void 0,$i(ei(c,1,_i,!0),void 0,f)});function Ld(c){if(!c||!c.length)return[];var f=0;return c=No(c,function(x){if(_i(x))return f=li(x.length,f),!0}),Ku(f,function(x){return Yn(c,$u(x))})}function If(c,f){if(!c||!c.length)return[];var x=Ld(c);return f==null?x:Yn(x,function(A){return er(f,void 0,A)})}var Zg=vn(function(c,f){return _i(c)?sa(c,f):[]}),Kg=vn(function(c){return wh(No(c,_i))}),Qg=vn(function(c){var f=Vn(c);return _i(f)&&(f=void 0),wh(No(c,_i),jt(f,2))}),ev=vn(function(c){var f=Vn(c);return f=typeof f==\"function\"?f:void 0,wh(No(c,_i),void 0,f)}),tv=vn(Ld),nv=vn(function(c){var f=c.length,x=f>1?c[f-1]:void 0;return x=typeof x==\"function\"?(c.pop(),x):void 0,If(c,x)});function Of(c){var f=Y(c);return f.__chain__=!0,f}function Ih(c,f){return f(c)}var iv=ti(function(c){var f=c.length,x=f?c[0]:0,A=this.__wrapped__,k=function(ie){return mh(ie,c)};return!(f>1||this.__actions__.length)&&A instanceof nn&&Yo(x)?((A=A.slice(x,+x+(f?1:0))).__actions__.push({func:Ih,args:[k],thisArg:void 0}),new Rr(A,this.__chain__).thru(function(ie){return f&&!ie.length&&ie.push(void 0),ie})):this.thru(k)}),rv=Zi(function(c,f,x){kn.call(c,x)?++c[x]:ko(c,x,1)}),ov=Vo(Rd),sv=Vo(Cd);function Lf(c,f){return(cn(c)?ur:Kr)(c,jt(f,3))}function Nf(c,f){return(cn(c)?Kc:Ho)(c,jt(f,3))}var av=Zi(function(c,f,x){kn.call(c,x)?c[x].push(f):ko(c,x,[f])}),lv=vn(function(c,f,x){var A=-1,k=typeof f==\"function\",ie=gr(c)?Rt(c.length):[];return Kr(c,function(pe){ie[++A]=k?er(f,pe,x):Ol(pe,f,x)}),ie}),uv=Zi(function(c,f,x){ko(c,x,f)});function Oh(c,f){return(cn(c)?Yn:gd)(c,jt(f,3))}var hv=Zi(function(c,f,x){c[x?0:1].push(f)},function(){return[[],[]]}),cv=vn(function(c,f){if(c==null)return[];var x=f.length;return x>1&&di(c,f[0],f[1])?f=[]:x>2&&di(f[0],f[1],f[2])&&(f=[f[0]]),Gr(c,ei(f,1),[])}),Lh=kg||function(){return Fi.Date.now()};function Df(c,f,x){return f=x?void 0:f,Hr(c,128,void 0,void 0,void 0,void 0,f=c&&f==null?c.length:f)}function Ff(c,f){var x;if(typeof f!=\"function\")throw new dr(q);return c=gn(c),function(){return--c>0&&(x=f.apply(this,arguments)),c<=1&&(f=void 0),x}}var Nd=vn(function(c,f,x){var A=1;if(x.length){var k=Fo(x,qo(Nd));A|=32}return Hr(c,A,f,x,k)}),Bf=vn(function(c,f,x){var A=3;if(x.length){var k=Fo(x,qo(Bf));A|=32}return Hr(f,A,c,x,k)});function kf(c,f,x){var A,k,ie,pe,Te,Be,nt=0,rt=!1,vt=!1,Ft=!0;if(typeof c!=\"function\")throw new dr(q);function Gt($t){var zt=A,dn=k;return A=k=void 0,nt=$t,pe=c.apply(dn,zt)}function Wt($t){return nt=$t,Te=Wl(xt,f),rt?Gt($t):pe}function ut($t){var zt=$t-Be;return Be===void 0||zt>=f||zt<0||vt&&$t-nt>=ie}function xt(){var $t=Lh();if(ut($t))return Yt($t);Te=Wl(xt,function(zt){var dn=f-(zt-Be);return vt?ui(dn,ie-(zt-nt)):dn}($t))}function Yt($t){return Te=void 0,Ft&&A?Gt($t):(A=k=void 0,pe)}function Lt(){var $t=Lh(),zt=ut($t);if(A=arguments,k=this,Be=$t,zt){if(Te===void 0)return Wt(Be);if(vt)return Mt(Te),Te=Wl(xt,f),Gt(Be)}return Te===void 0&&(Te=Wl(xt,f)),pe}return f=Vr(f)||0,si(x)&&(rt=!!x.leading,ie=(vt=\"maxWait\"in x)?li(Vr(x.maxWait)||0,f):ie,Ft=\"trailing\"in x?!!x.trailing:Ft),Lt.cancel=function(){Te!==void 0&&Mt(Te),nt=0,A=Be=k=Te=void 0},Lt.flush=function(){return Te===void 0?pe:Yt(Lh())},Lt}var dv=vn(function(c,f){return yo(c,1,f)}),pv=vn(function(c,f,x){return yo(c,Vr(f)||0,x)});function Nh(c,f){if(typeof c!=\"function\"||f!=null&&typeof f!=\"function\")throw new dr(q);var x=function(){var A=arguments,k=f?f.apply(this,A):A[0],ie=x.cache;if(ie.has(k))return ie.get(k);var pe=c.apply(this,A);return x.cache=ie.set(k,pe)||ie,pe};return x.cache=new(Nh.Cache||Zr),x}function Xl(c){if(typeof c!=\"function\")throw new dr(q);return function(){var f=arguments;switch(f.length){case 0:return!c.call(this);case 1:return!c.call(this,f[0]);case 2:return!c.call(this,f[0],f[1]);case 3:return!c.call(this,f[0],f[1],f[2])}return!c.apply(this,f)}}Nh.Cache=Zr;var Uf=Th(function(c,f){var x=(f=f.length==1&&cn(f[0])?Yn(f[0],hr(jt())):Yn(ei(f,1),hr(jt()))).length;return vn(function(A){for(var k=-1,ie=ui(A.length,x);++k<ie;)A[k]=f[k].call(this,A[k]);return er(c,this,A)})}),ql=vn(function(c,f){return Hr(c,32,void 0,f,Fo(f,qo(ql)))}),Dd=vn(function(c,f){return Hr(c,64,void 0,f,Fo(f,qo(Dd)))}),fv=ti(function(c,f){return Hr(c,256,void 0,void 0,void 0,f)});function Ui(c,f){return c===f||c!=c&&f!=f}var Gf=ma(_h),mv=ma(function(c,f){return c>=f}),Ts=fd(function(){return arguments}())?fd:function(c){return pi(c)&&kn.call(c,\"callee\")&&!pf.call(c,\"callee\")},cn=Rt.isArray,Yl=Yc?hr(Yc):function(c){return pi(c)&&jn(c)==pt};function gr(c){return c!=null&&Bh(c.length)&&!Jo(c)}function _i(c){return pi(c)&&gr(c)}var jr=Gg||Kh,Hf=$c?hr($c):function(c){return pi(c)&&jn(c)==be};function Dh(c){if(!pi(c))return!1;var f=jn(c);return f==Ce||f==\"[object DOMException]\"||typeof c.message==\"string\"&&typeof c.name==\"string\"&&!Ka(c)}function Jo(c){if(!si(c))return!1;var f=jn(c);return f==Ie||f==E||f==\"[object AsyncFunction]\"||f==\"[object Proxy]\"}function Fh(c){return typeof c==\"number\"&&c==gn(c)}function Bh(c){return typeof c==\"number\"&&c>-1&&c%1==0&&c<=9007199254740991}function si(c){var f=typeof c;return c!=null&&(f==\"object\"||f==\"function\")}function pi(c){return c!=null&&typeof c==\"object\"}var Fd=Jc?hr(Jc):function(c){return pi(c)&&vi(c)==L};function zf(c){return typeof c==\"number\"||pi(c)&&jn(c)==N}function Ka(c){if(!pi(c)||jn(c)!=ee)return!1;var f=sh(c);if(f===null)return!0;var x=kn.call(f,\"constructor\")&&f.constructor;return typeof x==\"function\"&&x instanceof x&&Rl.call(x)==Ng}var kh=ju?hr(ju):function(c){return pi(c)&&jn(c)==C},jf=Vu?hr(Vu):function(c){return pi(c)&&vi(c)==z};function Uh(c){return typeof c==\"string\"||!cn(c)&&pi(c)&&jn(c)==X}function Or(c){return typeof c==\"symbol\"||pi(c)&&jn(c)==ne}var Qa=Wu?hr(Wu):function(c){return pi(c)&&Bh(c.length)&&!!Wn[jn(c)]},Vf=ma(yh),Wf=ma(function(c,f){return c<=f});function Xf(c){if(!c)return[];if(gr(c))return Uh(c)?cr(c):Ji(c);if(_o&&c[_o])return function(x){for(var A,k=[];!(A=x.next()).done;)k.push(A.value);return k}(c[_o]());var f=vi(c);return(f==L?eh:f==z?Ml:oo)(c)}function Zo(c){return c?(c=Vr(c))===1/0||c===-1/0?17976931348623157e292*(c<0?-1:1):c==c?c:0:c===0?c:0}function gn(c){var f=Zo(c),x=f%1;return f==f?x?f-x:f:0}function qf(c){return c?Uo(gn(c),0,4294967295):0}function Vr(c){if(typeof c==\"number\")return c;if(Or(c))return NaN;if(si(c)){var f=typeof c.valueOf==\"function\"?c.valueOf():c;c=si(f)?f+\"\":f}if(typeof c!=\"string\")return c===0?c:+c;c=id(c);var x=P.test(c);return x||te.test(c)?Tr(c.slice(2),x?2:8):T.test(c)?NaN:+c}function Bd(c){return nr(c,or(c))}function Dn(c){return c==null?\"\":Et(c)}var $l=So(function(c,f){if(Vl(f)||gr(f))nr(f,on(f),c);else for(var x in f)kn.call(f,x)&&bs(c,x,f[x])}),Jl=So(function(c,f){nr(f,or(f),c)}),Zl=So(function(c,f,x,A){nr(f,or(f),c,A)}),gv=So(function(c,f,x,A){nr(f,on(f),c,A)}),vv=ti(mh),Yf=vn(function(c,f){c=Gn(c);var x=-1,A=f.length,k=A>2?f[2]:void 0;for(k&&di(f[0],f[1],k)&&(A=1);++x<A;)for(var ie=f[x],pe=or(ie),Te=-1,Be=pe.length;++Te<Be;){var nt=pe[Te],rt=c[nt];(rt===void 0||Ui(rt,vs[nt])&&!kn.call(c,nt))&&(c[nt]=ie[nt])}return c}),kd=vn(function(c){return c.push(void 0,Hl),er(el,void 0,c)});function Ko(c,f,x){var A=c==null?void 0:mr(c,f);return A===void 0?x:A}function Ud(c,f){return c!=null&&jl(c,f,ua)}var Gd=Mh(function(c,f,x){f!=null&&typeof f.toString!=\"function\"&&(f=ih.call(f)),c[f]=x},nl(sr)),_v=Mh(function(c,f,x){f!=null&&typeof f.toString!=\"function\"&&(f=ih.call(f)),kn.call(c,f)?c[f].push(x):c[f]=[x]},jt),yv=vn(Ol);function on(c){return gr(c)?ta(c):md(c)}function or(c){return gr(c)?ta(c,!0):zg(c)}var Kl=So(function(c,f,x){Nl(c,f,x)}),el=So(function(c,f,x,A){Nl(c,f,x,A)}),Ql=ti(function(c,f){var x={};if(c==null)return x;var A=!1;f=Yn(f,function(ie){return ie=zo(ie,c),A||(A=ie.length>1),ie}),nr(c,ir(c),x),A&&(x=fr(x,7,Xo));for(var k=f.length;k--;)Hn(x,f[k]);return x}),xa=ti(function(c,f){return c==null?{}:function(x,A){return bo(x,A,function(k,ie){return Ud(x,ie)})}(c,f)});function fi(c,f){if(c==null)return{};var x=Yn(ir(c),function(A){return[A]});return f=jt(f),bo(c,x,function(A,k){return f(A,k[0])})}var Qo=Rh(on),eu=Rh(or);function oo(c){return c==null?[]:Qu(c,on(c))}var tu=to(function(c,f,x){return f=f.toLowerCase(),c+(x?ba(f):f)});function ba(c){return zh(Dn(c).toLowerCase())}function wa(c){return(c=Dn(c))&&c.replace(K,sf).replace(wl,\"\")}var tl=to(function(c,f,x){return c+(x?\"-\":\"\")+f.toLowerCase()}),nu=to(function(c,f,x){return c+(x?\" \":\"\")+f.toLowerCase()}),$f=Sd(\"toLowerCase\"),Gh=to(function(c,f,x){return c+(x?\"_\":\"\")+f.toLowerCase()}),iu=to(function(c,f,x){return c+(x?\" \":\"\")+zh(f)}),Hh=to(function(c,f,x){return c+(x?\" \":\"\")+f.toUpperCase()}),zh=Sd(\"toUpperCase\");function jh(c,f,x){return c=Dn(c),(f=x?void 0:f)===void 0?function(A){return qs.test(A)}(c)?function(A){return A.match(Sl)||[]}(c):function(A){return A.match(co)||[]}(c):c.match(f)||[]}var Hd=vn(function(c,f){try{return er(c,void 0,f)}catch(x){return Dh(x)?x:new tn(x)}}),Vh=ti(function(c,f){return ur(f,function(x){x=zr(x),ko(c,x,Nd(c[x],c))}),c});function nl(c){return function(){return c}}var Wh=Wo(),Jf=Wo(!0);function sr(c){return c}function Xh(c){return Xa(typeof c==\"function\"?c:fr(c,1))}var Zf=vn(function(c,f){return function(x){return Ol(x,c,f)}}),Kf=vn(function(c,f){return function(x){return Ol(c,x,f)}});function zd(c,f,x){var A=on(f),k=vh(f,A);x!=null||si(f)&&(k.length||!A.length)||(x=f,f=c,c=this,k=vh(f,on(f)));var ie=!(si(x)&&\"chain\"in x&&!x.chain),pe=Jo(c);return ur(k,function(Te){var Be=f[Te];c[Te]=Be,pe&&(c.prototype[Te]=function(){var nt=this.__chain__;if(ie||nt){var rt=c(this.__wrapped__),vt=rt.__actions__=Ji(this.__actions__);return vt.push({func:Be,args:arguments,thisArg:c}),rt.__chain__=nt,rt}return Be.apply(c,Do([this.value()],arguments))})}),c}function qh(){}var Yh=kl(Yn),$h=kl(Xu),Es=kl(Yu);function jd(c){return _n(c)?$u(zr(c)):function(f){return function(x){return mr(x,f)}}(c)}var xv=Ul(),Jh=Ul(!0);function Zh(){return[]}function Kh(){return!1}var Qh=Ya(function(c,f){return c+f},0),ru=$a(\"ceil\"),Vd=Ya(function(c,f){return c/f},1),Gi=$a(\"floor\"),ec,Qf=Ya(function(c,f){return c*f},1),em=$a(\"round\"),Wd=Ya(function(c,f){return c-f},0);return Y.after=function(c,f){if(typeof f!=\"function\")throw new dr(q);return c=gn(c),function(){if(--c<1)return f.apply(this,arguments)}},Y.ary=Df,Y.assign=$l,Y.assignIn=Jl,Y.assignInWith=Zl,Y.assignWith=gv,Y.at=vv,Y.before=Ff,Y.bind=Nd,Y.bindAll=Vh,Y.bindKey=Bf,Y.castArray=function(){if(!arguments.length)return[];var c=arguments[0];return cn(c)?c:[c]},Y.chain=Of,Y.chunk=function(c,f,x){f=(x?di(c,f,x):f===void 0)?1:li(gn(f),0);var A=c==null?0:c.length;if(!A||f<1)return[];for(var k=0,ie=0,pe=Rt(uh(A/f));k<A;)pe[ie++]=Pr(c,k,k+=f);return pe},Y.compact=function(c){for(var f=-1,x=c==null?0:c.length,A=0,k=[];++f<x;){var ie=c[f];ie&&(k[A++]=ie)}return k},Y.concat=function(){var c=arguments.length;if(!c)return[];for(var f=Rt(c-1),x=arguments[0],A=c;A--;)f[A-1]=arguments[A];return Do(cn(x)?Ji(x):[x],ei(f,1))},Y.cond=function(c){var f=c==null?0:c.length,x=jt();return c=f?Yn(c,function(A){if(typeof A[1]!=\"function\")throw new dr(q);return[x(A[0]),A[1]]}):[],vn(function(A){for(var k=-1;++k<f;){var ie=c[k];if(er(ie[0],this,A))return er(ie[1],this,A)}})},Y.conforms=function(c){return function(f){var x=on(f);return function(A){return Go(A,f,x)}}(fr(c,1))},Y.constant=nl,Y.countBy=rv,Y.create=function(c,f){var x=re(c);return f==null?x:fh(x,f)},Y.curry=function c(f,x,A){var k=Hr(f,8,void 0,void 0,void 0,void 0,void 0,x=A?void 0:x);return k.placeholder=c.placeholder,k},Y.curryRight=function c(f,x,A){var k=Hr(f,16,void 0,void 0,void 0,void 0,void 0,x=A?void 0:x);return k.placeholder=c.placeholder,k},Y.debounce=kf,Y.defaults=Yf,Y.defaultsDeep=kd,Y.defer=dv,Y.delay=pv,Y.difference=Wg,Y.differenceBy=Xg,Y.differenceWith=Af,Y.drop=function(c,f,x){var A=c==null?0:c.length;return A?Pr(c,(f=x||f===void 0?1:gn(f))<0?0:f,A):[]},Y.dropRight=function(c,f,x){var A=c==null?0:c.length;return A?Pr(c,0,(f=A-(f=x||f===void 0?1:gn(f)))<0?0:f):[]},Y.dropRightWhile=function(c,f){return c&&c.length?mn(c,jt(f,3),!0,!0):[]},Y.dropWhile=function(c,f){return c&&c.length?mn(c,jt(f,3),!0):[]},Y.fill=function(c,f,x,A){var k=c==null?0:c.length;return k?(x&&typeof x!=\"number\"&&di(c,f,x)&&(x=0,A=k),function(ie,pe,Te,Be){var nt=ie.length;for((Te=gn(Te))<0&&(Te=-Te>nt?0:nt+Te),(Be=Be===void 0||Be>nt?nt:gn(Be))<0&&(Be+=nt),Be=Te>Be?0:qf(Be);Te<Be;)ie[Te++]=pe;return ie}(c,f,x,A)):[]},Y.filter=function(c,f){return(cn(c)?No:gh)(c,jt(f,3))},Y.flatMap=function(c,f){return ei(Oh(c,f),1)},Y.flatMapDeep=function(c,f){return ei(Oh(c,f),1/0)},Y.flatMapDepth=function(c,f,x){return x=x===void 0?1:gn(x),ei(Oh(c,f),x)},Y.flatten=Pd,Y.flattenDeep=function(c){return c!=null&&c.length?ei(c,1/0):[]},Y.flattenDepth=function(c,f){return c!=null&&c.length?ei(c,f=f===void 0?1:gn(f)):[]},Y.flip=function(c){return Hr(c,512)},Y.flow=Wh,Y.flowRight=Jf,Y.fromPairs=function(c){for(var f=-1,x=c==null?0:c.length,A={};++f<x;){var k=c[f];A[k[0]]=k[1]}return A},Y.functions=function(c){return c==null?[]:vh(c,on(c))},Y.functionsIn=function(c){return c==null?[]:vh(c,or(c))},Y.groupBy=av,Y.initial=function(c){return c!=null&&c.length?Pr(c,0,-1):[]},Y.intersection=Rf,Y.intersectionBy=Za,Y.intersectionWith=rr,Y.invert=Gd,Y.invertBy=_v,Y.invokeMap=lv,Y.iteratee=Xh,Y.keyBy=uv,Y.keys=on,Y.keysIn=or,Y.map=Oh,Y.mapKeys=function(c,f){var x={};return f=jt(f,3),Si(c,function(A,k,ie){ko(x,f(A,k,ie),A)}),x},Y.mapValues=function(c,f){var x={};return f=jt(f,3),Si(c,function(A,k,ie){ko(x,k,f(A,k,ie))}),x},Y.matches=function(c){return vd(fr(c,1))},Y.matchesProperty=function(c,f){return mf(c,fr(f,1))},Y.memoize=Nh,Y.merge=Kl,Y.mergeWith=el,Y.method=Zf,Y.methodOf=Kf,Y.mixin=zd,Y.negate=Xl,Y.nthArg=function(c){return c=gn(c),vn(function(f){return yn(f,c)})},Y.omit=Ql,Y.omitBy=function(c,f){return fi(c,Xl(jt(f)))},Y.once=function(c){return Ff(2,c)},Y.orderBy=function(c,f,x,A){return c==null?[]:(cn(f)||(f=f==null?[]:[f]),cn(x=A?void 0:x)||(x=x==null?[]:[x]),Gr(c,f,x))},Y.over=Yh,Y.overArgs=Uf,Y.overEvery=$h,Y.overSome=Es,Y.partial=ql,Y.partialRight=Dd,Y.partition=hv,Y.pick=xa,Y.pickBy=fi,Y.property=jd,Y.propertyOf=function(c){return function(f){return c==null?void 0:mr(c,f)}},Y.pull=Cf,Y.pullAll=Pf,Y.pullAllBy=function(c,f,x){return c&&c.length&&f&&f.length?Dl(c,f,jt(x,2)):c},Y.pullAllWith=function(c,f,x){return c&&c.length&&f&&f.length?Dl(c,f,void 0,x):c},Y.pullAt=qg,Y.range=xv,Y.rangeRight=Jh,Y.rearg=fv,Y.reject=function(c,f){return(cn(c)?No:gh)(c,Xl(jt(f,3)))},Y.remove=function(c,f){var x=[];if(!c||!c.length)return x;var A=-1,k=[],ie=c.length;for(f=jt(f,3);++A<ie;){var pe=c[A];f(pe,A,c)&&(x.push(pe),k.push(A))}return wo(c,k),x},Y.rest=function(c,f){if(typeof c!=\"function\")throw new dr(q);return vn(c,f=f===void 0?f:gn(f))},Y.reverse=Od,Y.sampleSize=function(c,f,x){return f=(x?di(c,f,x):f===void 0)?1:gn(f),(cn(c)?xs:yd)(c,f)},Y.set=function(c,f,x){return c==null?c:ha(c,f,x)},Y.setWith=function(c,f,x,A){return A=typeof A==\"function\"?A:void 0,c==null?c:ha(c,f,x,A)},Y.shuffle=function(c){return(cn(c)?na:ki)(c)},Y.slice=function(c,f,x){var A=c==null?0:c.length;return A?(x&&typeof x!=\"number\"&&di(c,f,x)?(f=0,x=A):(f=f==null?0:gn(f),x=x===void 0?A:gn(x)),Pr(c,f,x)):[]},Y.sortBy=cv,Y.sortedUniq=function(c){return c&&c.length?xh(c):[]},Y.sortedUniqBy=function(c,f){return c&&c.length?xh(c,jt(f,2)):[]},Y.split=function(c,f,x){return x&&typeof x!=\"number\"&&di(c,f,x)&&(f=x=void 0),(x=x===void 0?4294967295:x>>>0)?(c=Dn(c))&&(typeof f==\"string\"||f!=null&&!kh(f))&&!(f=Et(f))&&$s(c)?jo(cr(c),0,x):c.split(f,x):[]},Y.spread=function(c,f){if(typeof c!=\"function\")throw new dr(q);return f=f==null?0:li(gn(f),0),vn(function(x){var A=x[f],k=jo(x,0,f);return A&&Do(k,A),er(c,this,k)})},Y.tail=function(c){var f=c==null?0:c.length;return f?Pr(c,1,f):[]},Y.take=function(c,f,x){return c&&c.length?Pr(c,0,(f=x||f===void 0?1:gn(f))<0?0:f):[]},Y.takeRight=function(c,f,x){var A=c==null?0:c.length;return A?Pr(c,(f=A-(f=x||f===void 0?1:gn(f)))<0?0:f,A):[]},Y.takeRightWhile=function(c,f){return c&&c.length?mn(c,jt(f,3),!1,!0):[]},Y.takeWhile=function(c,f){return c&&c.length?mn(c,jt(f,3)):[]},Y.tap=function(c,f){return f(c),c},Y.throttle=function(c,f,x){var A=!0,k=!0;if(typeof c!=\"function\")throw new dr(q);return si(x)&&(A=\"leading\"in x?!!x.leading:A,k=\"trailing\"in x?!!x.trailing:k),kf(c,f,{leading:A,maxWait:f,trailing:k})},Y.thru=Ih,Y.toArray=Xf,Y.toPairs=Qo,Y.toPairsIn=eu,Y.toPath=function(c){return cn(c)?Yn(c,zr):Or(c)?[c]:Ji(Mf(Dn(c)))},Y.toPlainObject=Bd,Y.transform=function(c,f,x){var A=cn(c),k=A||jr(c)||Qa(c);if(f=jt(f,4),x==null){var ie=c&&c.constructor;x=k?A?new ie:[]:si(c)&&Jo(ie)?re(sh(c)):{}}return(k?ur:Si)(c,function(pe,Te,Be){return f(x,pe,Te,Be)}),x},Y.unary=function(c){return Df(c,1)},Y.union=Yg,Y.unionBy=$g,Y.unionWith=Jg,Y.uniq=function(c){return c&&c.length?$i(c):[]},Y.uniqBy=function(c,f){return c&&c.length?$i(c,jt(f,2)):[]},Y.uniqWith=function(c,f){return f=typeof f==\"function\"?f:void 0,c&&c.length?$i(c,void 0,f):[]},Y.unset=function(c,f){return c==null||Hn(c,f)},Y.unzip=Ld,Y.unzipWith=If,Y.update=function(c,f,x){return c==null?c:Bl(c,f,qa(x))},Y.updateWith=function(c,f,x,A){return A=typeof A==\"function\"?A:void 0,c==null?c:Bl(c,f,qa(x),A)},Y.values=oo,Y.valuesIn=function(c){return c==null?[]:Qu(c,or(c))},Y.without=Zg,Y.words=jh,Y.wrap=function(c,f){return ql(qa(f),c)},Y.xor=Kg,Y.xorBy=Qg,Y.xorWith=ev,Y.zip=tv,Y.zipObject=function(c,f){return bd(c||[],f||[],bs)},Y.zipObjectDeep=function(c,f){return bd(c||[],f||[],ha)},Y.zipWith=nv,Y.entries=Qo,Y.entriesIn=eu,Y.extend=Jl,Y.extendWith=Zl,zd(Y,Y),Y.add=Qh,Y.attempt=Hd,Y.camelCase=tu,Y.capitalize=ba,Y.ceil=ru,Y.clamp=function(c,f,x){return x===void 0&&(x=f,f=void 0),x!==void 0&&(x=(x=Vr(x))==x?x:0),f!==void 0&&(f=(f=Vr(f))==f?f:0),Uo(Vr(c),f,x)},Y.clone=function(c){return fr(c,4)},Y.cloneDeep=function(c){return fr(c,5)},Y.cloneDeepWith=function(c,f){return fr(c,5,f=typeof f==\"function\"?f:void 0)},Y.cloneWith=function(c,f){return fr(c,4,f=typeof f==\"function\"?f:void 0)},Y.conformsTo=function(c,f){return f==null||Go(c,f,on(f))},Y.deburr=wa,Y.defaultTo=function(c,f){return c==null||c!=c?f:c},Y.divide=Vd,Y.endsWith=function(c,f,x){c=Dn(c),f=Et(f);var A=c.length,k=x=x===void 0?A:Uo(gn(x),0,A);return(x-=f.length)>=0&&c.slice(x,k)==f},Y.eq=Ui,Y.escape=function(c){return(c=Dn(c))&&Xt.test(c)?c.replace(ln,af):c},Y.escapeRegExp=function(c){return(c=Dn(c))&&An.test(c)?c.replace(qn,\"\\\\$&\"):c},Y.every=function(c,f,x){var A=cn(c)?Xu:dd;return x&&di(c,f,x)&&(f=void 0),A(c,jt(f,3))},Y.find=ov,Y.findIndex=Rd,Y.findKey=function(c,f){return Qc(c,jt(f,3),Si)},Y.findLast=sv,Y.findLastIndex=Cd,Y.findLastKey=function(c,f){return Qc(c,jt(f,3),pd)},Y.floor=Gi,Y.forEach=Lf,Y.forEachRight=Nf,Y.forIn=function(c,f){return c==null?c:Ut(c,jt(f,3),or)},Y.forInRight=function(c,f){return c==null?c:la(c,jt(f,3),or)},Y.forOwn=function(c,f){return c&&Si(c,jt(f,3))},Y.forOwnRight=function(c,f){return c&&pd(c,jt(f,3))},Y.get=Ko,Y.gt=Gf,Y.gte=mv,Y.has=function(c,f){return c!=null&&jl(c,f,ff)},Y.hasIn=Ud,Y.head=Id,Y.identity=sr,Y.includes=function(c,f,x,A){c=gr(c)?c:oo(c),x=x&&!A?gn(x):0;var k=c.length;return x<0&&(x=li(k+x,0)),Uh(c)?x<=k&&c.indexOf(f,x)>-1:!!k&&Ys(c,f,x)>-1},Y.indexOf=function(c,f,x){var A=c==null?0:c.length;if(!A)return-1;var k=x==null?0:gn(x);return k<0&&(k=li(A+k,0)),Ys(c,f,k)},Y.inRange=function(c,f,x){return f=Zo(f),x===void 0?(x=f,f=0):x=Zo(x),function(A,k,ie){return A>=ui(k,ie)&&A<li(k,ie)}(c=Vr(c),f,x)},Y.invoke=yv,Y.isArguments=Ts,Y.isArray=cn,Y.isArrayBuffer=Yl,Y.isArrayLike=gr,Y.isArrayLikeObject=_i,Y.isBoolean=function(c){return c===!0||c===!1||pi(c)&&jn(c)==Z},Y.isBuffer=jr,Y.isDate=Hf,Y.isElement=function(c){return pi(c)&&c.nodeType===1&&!Ka(c)},Y.isEmpty=function(c){if(c==null)return!0;if(gr(c)&&(cn(c)||typeof c==\"string\"||typeof c.splice==\"function\"||jr(c)||Qa(c)||Ts(c)))return!c.length;var f=vi(c);if(f==L||f==z)return!c.size;if(Vl(c))return!md(c).length;for(var x in c)if(kn.call(c,x))return!1;return!0},Y.isEqual=function(c,f){return xo(c,f)},Y.isEqualWith=function(c,f,x){var A=(x=typeof x==\"function\"?x:void 0)?x(c,f):void 0;return A===void 0?xo(c,f,void 0,x):!!A},Y.isError=Dh,Y.isFinite=function(c){return typeof c==\"number\"&&ch(c)},Y.isFunction=Jo,Y.isInteger=Fh,Y.isLength=Bh,Y.isMap=Fd,Y.isMatch=function(c,f){return c===f||Qr(c,f,zl(f))},Y.isMatchWith=function(c,f,x){return x=typeof x==\"function\"?x:void 0,Qr(c,f,zl(f),x)},Y.isNaN=function(c){return zf(c)&&c!=+c},Y.isNative=function(c){if(ro(c))throw new tn(\"Unsupported core-js use. Try https://npms.io/search?q=ponyfill.\");return Ll(c)},Y.isNil=function(c){return c==null},Y.isNull=function(c){return c===null},Y.isNumber=zf,Y.isObject=si,Y.isObjectLike=pi,Y.isPlainObject=Ka,Y.isRegExp=kh,Y.isSafeInteger=function(c){return Fh(c)&&c>=-9007199254740991&&c<=9007199254740991},Y.isSet=jf,Y.isString=Uh,Y.isSymbol=Or,Y.isTypedArray=Qa,Y.isUndefined=function(c){return c===void 0},Y.isWeakMap=function(c){return pi(c)&&vi(c)==Ve},Y.isWeakSet=function(c){return pi(c)&&jn(c)==\"[object WeakSet]\"},Y.join=function(c,f){return c==null?\"\":ys.call(c,f)},Y.kebabCase=tl,Y.last=Vn,Y.lastIndexOf=function(c,f,x){var A=c==null?0:c.length;if(!A)return-1;var k=A;return x!==void 0&&(k=(k=gn(x))<0?li(A+k,0):ui(k,A-1)),f==f?function(ie,pe,Te){for(var Be=Te+1;Be--;)if(ie[Be]===pe)return Be;return Be}(c,f,k):El(c,ed,k,!0)},Y.lowerCase=nu,Y.lowerFirst=$f,Y.lt=Vf,Y.lte=Wf,Y.max=function(c){return c&&c.length?aa(c,sr,_h):void 0},Y.maxBy=function(c,f){return c&&c.length?aa(c,jt(f,2),_h):void 0},Y.mean=function(c){return td(c,sr)},Y.meanBy=function(c,f){return td(c,jt(f,2))},Y.min=function(c){return c&&c.length?aa(c,sr,yh):void 0},Y.minBy=function(c,f){return c&&c.length?aa(c,jt(f,2),yh):void 0},Y.stubArray=Zh,Y.stubFalse=Kh,Y.stubObject=function(){return{}},Y.stubString=function(){return\"\"},Y.stubTrue=function(){return!0},Y.multiply=Qf,Y.nth=function(c,f){return c&&c.length?yn(c,gn(f)):void 0},Y.noConflict=function(){return Fi._===this&&(Fi._=Dg),this},Y.noop=qh,Y.now=Lh,Y.pad=function(c,f,x){c=Dn(c);var A=(f=gn(f))?go(c):0;if(!f||A>=f)return c;var k=(f-A)/2;return fa(hh(k),x)+c+fa(uh(k),x)},Y.padEnd=function(c,f,x){c=Dn(c);var A=(f=gn(f))?go(c):0;return f&&A<f?c+fa(f-A,x):c},Y.padStart=function(c,f,x){c=Dn(c);var A=(f=gn(f))?go(c):0;return f&&A<f?fa(f-A,x)+c:c},Y.parseInt=function(c,f,x){return x||f==null?f=0:f&&(f=+f),Ar(Dn(c).replace(In,\"\"),f||0)},Y.random=function(c,f,x){if(x&&typeof x!=\"boolean\"&&di(c,f,x)&&(f=x=void 0),x===void 0&&(typeof f==\"boolean\"?(x=f,f=void 0):typeof c==\"boolean\"&&(x=c,c=void 0)),c===void 0&&f===void 0?(c=0,f=1):(c=Zo(c),f===void 0?(f=c,c=0):f=Zo(f)),c>f){var A=c;c=f,f=A}if(x||c%1||f%1){var k=Bi();return ui(c+k*(f-c+Lo(\"1e-\"+((k+\"\").length-1))),f)}return ws(c,f)},Y.reduce=function(c,f,x){var A=cn(c)?qu:nd,k=arguments.length<3;return A(c,jt(f,4),x,k,Kr)},Y.reduceRight=function(c,f,x){var A=cn(c)?tf:nd,k=arguments.length<3;return A(c,jt(f,4),x,k,Ho)},Y.repeat=function(c,f,x){return f=(x?di(c,f,x):f===void 0)?1:gn(f),Ss(Dn(c),f)},Y.replace=function(){var c=arguments,f=Dn(c[0]);return c.length<3?f:f.replace(c[1],c[2])},Y.result=function(c,f,x){var A=-1,k=(f=zo(f,c)).length;for(k||(k=1,c=void 0);++A<k;){var ie=c==null?void 0:c[zr(f[A])];ie===void 0&&(A=k,ie=x),c=Jo(ie)?ie.call(c):ie}return c},Y.round=em,Y.runInContext=Ue,Y.sample=function(c){return(cn(c)?Bo:_d)(c)},Y.size=function(c){if(c==null)return 0;if(gr(c))return Uh(c)?go(c):c.length;var f=vi(c);return f==L||f==z?c.size:md(c).length},Y.snakeCase=Gh,Y.some=function(c,f,x){var A=cn(c)?Yu:eo;return x&&di(c,f,x)&&(f=void 0),A(c,jt(f,3))},Y.sortedIndex=function(c,f){return ca(c,f)},Y.sortedIndexBy=function(c,f,x){return Fl(c,f,jt(x,2))},Y.sortedIndexOf=function(c,f){var x=c==null?0:c.length;if(x){var A=ca(c,f);if(A<x&&Ui(c[A],f))return A}return-1},Y.sortedLastIndex=function(c,f){return ca(c,f,!0)},Y.sortedLastIndexBy=function(c,f,x){return Fl(c,f,jt(x,2),!0)},Y.sortedLastIndexOf=function(c,f){if(c!=null&&c.length){var x=ca(c,f,!0)-1;if(Ui(c[x],f))return x}return-1},Y.startCase=iu,Y.startsWith=function(c,f,x){return c=Dn(c),x=x==null?0:Uo(gn(x),0,c.length),f=Et(f),c.slice(x,x+f.length)==f},Y.subtract=Wd,Y.sum=function(c){return c&&c.length?Zu(c,sr):0},Y.sumBy=function(c,f){return c&&c.length?Zu(c,jt(f,2)):0},Y.template=function(c,f,x){var A=Y.templateSettings;x&&di(c,f,x)&&(f=void 0),c=Dn(c),f=Zl({},f,A,Xn);var k,ie,pe=Zl({},f.imports,A.imports,Xn),Te=on(pe),Be=Qu(pe,Te),nt=0,rt=f.interpolate||le,vt=\"__p += '\",Ft=th((f.escape||le).source+\"|\"+rt.source+\"|\"+(rt===Bt?po:le).source+\"|\"+(f.evaluate||le).source+\"|$\",\"g\"),Gt=\"//# sourceURL=\"+(kn.call(f,\"sourceURL\")?(f.sourceURL+\"\").replace(/\\s/g,\" \"):\"lodash.templateSources[\"+ ++Kp+\"]\")+`\n`;c.replace(Ft,function(xt,Yt,Lt,$t,zt,dn){return Lt||(Lt=$t),vt+=c.slice(nt,dn).replace(ve,lf),Yt&&(k=!0,vt+=`' +\n__e(`+Yt+`) +\n'`),zt&&(ie=!0,vt+=`';\n`+zt+`;\n__p += '`),Lt&&(vt+=`' +\n((__t = (`+Lt+`)) == null ? '' : __t) +\n'`),nt=dn+xt.length,xt}),vt+=`';\n`;var Wt=kn.call(f,\"variable\")&&f.variable;if(Wt){if(ka.test(Wt))throw new tn(\"Invalid `variable` option passed into `_.template`\")}else vt=`with (obj) {\n`+vt+`\n}\n`;vt=(ie?vt.replace(Je,\"\"):vt).replace(et,\"$1\").replace(bt,\"$1;\"),vt=\"function(\"+(Wt||\"obj\")+`) {\n`+(Wt?\"\":`obj || (obj = {});\n`)+\"var __t, __p = ''\"+(k?\", __e = _.escape\":\"\")+(ie?`, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n`:`;\n`)+vt+`return __p\n}`;var ut=Hd(function(){return oi(Te,Gt+\"return \"+vt).apply(void 0,Be)});if(ut.source=vt,Dh(ut))throw ut;return ut},Y.times=function(c,f){if((c=gn(c))<1||c>9007199254740991)return[];var x=4294967295,A=ui(c,4294967295);c-=4294967295;for(var k=Ku(A,f=jt(f));++x<c;)f(x);return k},Y.toFinite=Zo,Y.toInteger=gn,Y.toLength=qf,Y.toLower=function(c){return Dn(c).toLowerCase()},Y.toNumber=Vr,Y.toSafeInteger=function(c){return c?Uo(gn(c),-9007199254740991,9007199254740991):c===0?c:0},Y.toString=Dn,Y.toUpper=function(c){return Dn(c).toUpperCase()},Y.trim=function(c,f,x){if((c=Dn(c))&&(x||f===void 0))return id(c);if(!c||!(f=Et(f)))return c;var A=cr(c),k=cr(f);return jo(A,rd(A,k),od(A,k)+1).join(\"\")},Y.trimEnd=function(c,f,x){if((c=Dn(c))&&(x||f===void 0))return c.slice(0,ms(c)+1);if(!c||!(f=Et(f)))return c;var A=cr(c);return jo(A,0,od(A,cr(f))+1).join(\"\")},Y.trimStart=function(c,f,x){if((c=Dn(c))&&(x||f===void 0))return c.replace(In,\"\");if(!c||!(f=Et(f)))return c;var A=cr(c);return jo(A,rd(A,cr(f))).join(\"\")},Y.truncate=function(c,f){var x=30,A=\"...\";if(si(f)){var k=\"separator\"in f?f.separator:k;x=\"length\"in f?gn(f.length):x,A=\"omission\"in f?Et(f.omission):A}var ie=(c=Dn(c)).length;if($s(c)){var pe=cr(c);ie=pe.length}if(x>=ie)return c;var Te=x-go(A);if(Te<1)return A;var Be=pe?jo(pe,0,Te).join(\"\"):c.slice(0,Te);if(k===void 0)return Be+A;if(pe&&(Te+=Be.length-Te),kh(k)){if(c.slice(Te).search(k)){var nt,rt=Be;for(k.global||(k=th(k.source,Dn(Ws.exec(k))+\"g\")),k.lastIndex=0;nt=k.exec(rt);)var vt=nt.index;Be=Be.slice(0,vt===void 0?Te:vt)}}else if(c.indexOf(Et(k),Te)!=Te){var Ft=Be.lastIndexOf(k);Ft>-1&&(Be=Be.slice(0,Ft))}return Be+A},Y.unescape=function(c){return(c=Dn(c))&&wt.test(c)?c.replace(_t,Js):c},Y.uniqueId=function(c){var f=++nh;return Dn(c)+f},Y.upperCase=Hh,Y.upperFirst=zh,Y.each=Lf,Y.eachRight=Nf,Y.first=Id,zd(Y,(ec={},Si(Y,function(c,f){kn.call(Y.prototype,f)||(ec[f]=c)}),ec),{chain:!1}),Y.VERSION=\"4.17.21\",ur([\"bind\",\"bindKey\",\"curry\",\"curryRight\",\"partial\",\"partialRight\"],function(c){Y[c].placeholder=Y}),ur([\"drop\",\"take\"],function(c,f){nn.prototype[c]=function(x){x=x===void 0?1:li(gn(x),0);var A=this.__filtered__&&!f?new nn(this):this.clone();return A.__filtered__?A.__takeCount__=ui(x,A.__takeCount__):A.__views__.push({size:ui(x,4294967295),type:c+(A.__dir__<0?\"Right\":\"\")}),A},nn.prototype[c+\"Right\"]=function(x){return this.reverse()[c](x).reverse()}}),ur([\"filter\",\"map\",\"takeWhile\"],function(c,f){var x=f+1,A=x==1||x==3;nn.prototype[c]=function(k){var ie=this.clone();return ie.__iteratees__.push({iteratee:jt(k,3),type:x}),ie.__filtered__=ie.__filtered__||A,ie}}),ur([\"head\",\"last\"],function(c,f){var x=\"take\"+(f?\"Right\":\"\");nn.prototype[c]=function(){return this[x](1).value()[0]}}),ur([\"initial\",\"tail\"],function(c,f){var x=\"drop\"+(f?\"\":\"Right\");nn.prototype[c]=function(){return this.__filtered__?new nn(this):this[x](1)}}),nn.prototype.compact=function(){return this.filter(sr)},nn.prototype.find=function(c){return this.filter(c).head()},nn.prototype.findLast=function(c){return this.reverse().find(c)},nn.prototype.invokeMap=vn(function(c,f){return typeof c==\"function\"?new nn(this):this.map(function(x){return Ol(x,c,f)})}),nn.prototype.reject=function(c){return this.filter(Xl(jt(c)))},nn.prototype.slice=function(c,f){c=gn(c);var x=this;return x.__filtered__&&(c>0||f<0)?new nn(x):(c<0?x=x.takeRight(-c):c&&(x=x.drop(c)),f!==void 0&&(x=(f=gn(f))<0?x.dropRight(-f):x.take(f-c)),x)},nn.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},nn.prototype.toArray=function(){return this.take(4294967295)},Si(nn.prototype,function(c,f){var x=/^(?:filter|find|map|reject)|While$/.test(f),A=/^(?:head|last)$/.test(f),k=Y[A?\"take\"+(f==\"last\"?\"Right\":\"\"):f],ie=A||/^find/.test(f);k&&(Y.prototype[f]=function(){var pe=this.__wrapped__,Te=A?[1]:arguments,Be=pe instanceof nn,nt=Te[0],rt=Be||cn(pe),vt=function(Yt){var Lt=k.apply(Y,Do([Yt],Te));return A&&Ft?Lt[0]:Lt};rt&&x&&typeof nt==\"function\"&&nt.length!=1&&(Be=rt=!1);var Ft=this.__chain__,Gt=!!this.__actions__.length,Wt=ie&&!Ft,ut=Be&&!Gt;if(!ie&&rt){pe=ut?pe:new nn(this);var xt=c.apply(pe,Te);return xt.__actions__.push({func:Ih,args:[vt],thisArg:void 0}),new Rr(xt,Ft)}return Wt&&ut?c.apply(this,Te):(xt=this.thru(vt),Wt?A?xt.value()[0]:xt.value():xt)})}),ur([\"pop\",\"push\",\"shift\",\"sort\",\"splice\",\"unshift\"],function(c){var f=za[c],x=/^(?:push|sort|unshift)$/.test(c)?\"tap\":\"thru\",A=/^(?:pop|shift)$/.test(c);Y.prototype[c]=function(){var k=arguments;if(A&&!this.__chain__){var ie=this.value();return f.apply(cn(ie)?ie:[],k)}return this[x](function(pe){return f.apply(cn(pe)?pe:[],k)})}}),Si(nn.prototype,function(c,f){var x=Y[f];if(x){var A=x.name+\"\";kn.call(Jr,A)||(Jr[A]=[]),Jr[A].push({name:f,func:x})}}),Jr[no(void 0,2).name]=[{name:\"wrapper\",func:void 0}],nn.prototype.clone=function(){var c=new nn(this.__wrapped__);return c.__actions__=Ji(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=Ji(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=Ji(this.__views__),c},nn.prototype.reverse=function(){if(this.__filtered__){var c=new nn(this);c.__dir__=-1,c.__filtered__=!0}else(c=this.clone()).__dir__*=-1;return c},nn.prototype.value=function(){var c=this.__wrapped__.value(),f=this.__dir__,x=cn(c),A=f<0,k=x?c.length:0,ie=function(dn,Ht,Kt){for(var yi=-1,Hi=Kt.length;++yi<Hi;){var Wr=Kt[yi],Ln=Wr.size;switch(Wr.type){case\"drop\":dn+=Ln;break;case\"dropRight\":Ht-=Ln;break;case\"take\":Ht=ui(Ht,dn+Ln);break;case\"takeRight\":dn=li(dn,Ht-Ln)}}return{start:dn,end:Ht}}(0,k,this.__views__),pe=ie.start,Te=ie.end,Be=Te-pe,nt=A?Te:pe-1,rt=this.__iteratees__,vt=rt.length,Ft=0,Gt=ui(Be,this.__takeCount__);if(!x||!A&&k==Be&&Gt==Be)return xd(c,this.__actions__);var Wt=[];e:for(;Be--&&Ft<Gt;){for(var ut=-1,xt=c[nt+=f];++ut<vt;){var Yt=rt[ut],Lt=Yt.iteratee,$t=Yt.type,zt=Lt(xt);if($t==2)xt=zt;else if(!zt){if($t==1)continue e;break e}}Wt[Ft++]=xt}return Wt},Y.prototype.at=iv,Y.prototype.chain=function(){return Of(this)},Y.prototype.commit=function(){return new Rr(this.value(),this.__chain__)},Y.prototype.next=function(){this.__values__===void 0&&(this.__values__=Xf(this.value()));var c=this.__index__>=this.__values__.length;return{done:c,value:c?void 0:this.__values__[this.__index__++]}},Y.prototype.plant=function(c){for(var f,x=this;x instanceof Wa;){var A=Ad(x);A.__index__=0,A.__values__=void 0,f?k.__wrapped__=A:f=A;var k=A;x=x.__wrapped__}return k.__wrapped__=c,f},Y.prototype.reverse=function(){var c=this.__wrapped__;if(c instanceof nn){var f=c;return this.__actions__.length&&(f=new nn(this)),(f=f.reverse()).__actions__.push({func:Ih,args:[Od],thisArg:void 0}),new Rr(f,this.__chain__)}return this.thru(Od)},Y.prototype.toJSON=Y.prototype.valueOf=Y.prototype.value=function(){return xd(this.__wrapped__,this.__actions__)},Y.prototype.first=Y.prototype.head,_o&&(Y.prototype[_o]=function(){return this}),Y}();Fi._=gs,(me=function(){return gs}.call(M,v,M,Q))===void 0||(Q.exports=me)}).call(this)}).call(this,v(4),v(8)(S))},function(S,M,v){(function(b){S.exports=function Q(me,q,O){function $(Z,be){if(!q[Z]){if(!me[Z]){if(H)return H(Z,!0);var Ce=new Error(\"Cannot find module '\"+Z+\"'\");throw Ce.code=\"MODULE_NOT_FOUND\",Ce}var Ie=q[Z]={exports:{}};me[Z][0].call(Ie.exports,function(E){var L=me[Z][1][E];return $(L||E)},Ie,Ie.exports,Q,me,q,O)}return q[Z].exports}for(var H=!1,D=0;D<O.length;D++)$(O[D]);return $}({1:[function(Q,me,q){(function(O){var $,H,D=O.MutationObserver||O.WebKitMutationObserver;if(D){var Z=0,be=new D(L),Ce=O.document.createTextNode(\"\");be.observe(Ce,{characterData:!0}),$=function(){Ce.data=Z=++Z%2}}else if(O.setImmediate||O.MessageChannel===void 0)$=\"document\"in O&&\"onreadystatechange\"in O.document.createElement(\"script\")?function(){var N=O.document.createElement(\"script\");N.onreadystatechange=function(){L(),N.onreadystatechange=null,N.parentNode.removeChild(N),N=null},O.document.documentElement.appendChild(N)}:function(){setTimeout(L,0)};else{var Ie=new O.MessageChannel;Ie.port1.onmessage=L,$=function(){Ie.port2.postMessage(0)}}var E=[];function L(){var N,ee;H=!0;for(var C=E.length;C;){for(ee=E,E=[],N=-1;++N<C;)ee[N]();C=E.length}H=!1}me.exports=function(N){E.push(N)!==1||H||$()}}).call(this,b!==void 0?b:typeof self!=\"undefined\"?self:typeof window!=\"undefined\"?window:{})},{}],2:[function(Q,me,q){var O=Q(1);function $(){}var H={},D=[\"REJECTED\"],Z=[\"FULFILLED\"],be=[\"PENDING\"];function Ce(C){if(typeof C!=\"function\")throw new TypeError(\"resolver must be a function\");this.state=be,this.queue=[],this.outcome=void 0,C!==$&&N(this,C)}function Ie(C,z,X){this.promise=C,typeof z==\"function\"&&(this.onFulfilled=z,this.callFulfilled=this.otherCallFulfilled),typeof X==\"function\"&&(this.onRejected=X,this.callRejected=this.otherCallRejected)}function E(C,z,X){O(function(){var ne;try{ne=z(X)}catch(Ve){return H.reject(C,Ve)}ne===C?H.reject(C,new TypeError(\"Cannot resolve promise with itself\")):H.resolve(C,ne)})}function L(C){var z=C&&C.then;if(C&&(typeof C==\"object\"||typeof C==\"function\")&&typeof z==\"function\")return function(){z.apply(C,arguments)}}function N(C,z){var X=!1;function ne(Ne){X||(X=!0,H.reject(C,Ne))}function Ve(Ne){X||(X=!0,H.resolve(C,Ne))}var pt=ee(function(){z(Ve,ne)});pt.status===\"error\"&&ne(pt.value)}function ee(C,z){var X={};try{X.value=C(z),X.status=\"success\"}catch(ne){X.status=\"error\",X.value=ne}return X}me.exports=Ce,Ce.prototype.catch=function(C){return this.then(null,C)},Ce.prototype.then=function(C,z){if(typeof C!=\"function\"&&this.state===Z||typeof z!=\"function\"&&this.state===D)return this;var X=new this.constructor($);return this.state!==be?E(X,this.state===Z?C:z,this.outcome):this.queue.push(new Ie(X,C,z)),X},Ie.prototype.callFulfilled=function(C){H.resolve(this.promise,C)},Ie.prototype.otherCallFulfilled=function(C){E(this.promise,this.onFulfilled,C)},Ie.prototype.callRejected=function(C){H.reject(this.promise,C)},Ie.prototype.otherCallRejected=function(C){E(this.promise,this.onRejected,C)},H.resolve=function(C,z){var X=ee(L,z);if(X.status===\"error\")return H.reject(C,X.value);var ne=X.value;if(ne)N(C,ne);else{C.state=Z,C.outcome=z;for(var Ve=-1,pt=C.queue.length;++Ve<pt;)C.queue[Ve].callFulfilled(z)}return C},H.reject=function(C,z){C.state=D,C.outcome=z;for(var X=-1,ne=C.queue.length;++X<ne;)C.queue[X].callRejected(z);return C},Ce.resolve=function(C){return C instanceof this?C:H.resolve(new this($),C)},Ce.reject=function(C){var z=new this($);return H.reject(z,C)},Ce.all=function(C){var z=this;if(Object.prototype.toString.call(C)!==\"[object Array]\")return this.reject(new TypeError(\"must be an array\"));var X=C.length,ne=!1;if(!X)return this.resolve([]);for(var Ve=new Array(X),pt=0,Ne=-1,ae=new this($);++Ne<X;)Me(C[Ne],Ne);return ae;function Me(Fe,j){z.resolve(Fe).then(function(ye){Ve[j]=ye,++pt!==X||ne||(ne=!0,H.resolve(ae,Ve))},function(ye){ne||(ne=!0,H.reject(ae,ye))})}},Ce.race=function(C){var z=this;if(Object.prototype.toString.call(C)!==\"[object Array]\")return this.reject(new TypeError(\"must be an array\"));var X=C.length,ne=!1;if(!X)return this.resolve([]);for(var Ve,pt=-1,Ne=new this($);++pt<X;)Ve=C[pt],z.resolve(Ve).then(function(ae){ne||(ne=!0,H.resolve(Ne,ae))},function(ae){ne||(ne=!0,H.reject(Ne,ae))});return Ne}},{1:1}],3:[function(Q,me,q){(function(O){typeof O.Promise!=\"function\"&&(O.Promise=Q(2))}).call(this,b!==void 0?b:typeof self!=\"undefined\"?self:typeof window!=\"undefined\"?window:{})},{2:2}],4:[function(Q,me,q){var O=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(T){return typeof T}:function(T){return T&&typeof Symbol==\"function\"&&T.constructor===Symbol&&T!==Symbol.prototype?\"symbol\":typeof T},$=function(){try{if(typeof indexedDB!=\"undefined\")return indexedDB;if(typeof webkitIndexedDB!=\"undefined\")return webkitIndexedDB;if(typeof mozIndexedDB!=\"undefined\")return mozIndexedDB;if(typeof OIndexedDB!=\"undefined\")return OIndexedDB;if(typeof msIndexedDB!=\"undefined\")return msIndexedDB}catch{return}}();function H(T,P){T=T||[],P=P||{};try{return new Blob(T,P)}catch(J){if(J.name!==\"TypeError\")throw J;for(var I=new(typeof BlobBuilder!=\"undefined\"?BlobBuilder:typeof MSBlobBuilder!=\"undefined\"?MSBlobBuilder:typeof MozBlobBuilder!=\"undefined\"?MozBlobBuilder:WebKitBlobBuilder),te=0;te<T.length;te+=1)I.append(T[te]);return I.getBlob(P.type)}}typeof Promise==\"undefined\"&&Q(3);var D=Promise;function Z(T,P){P&&T.then(function(I){P(null,I)},function(I){P(I)})}function be(T,P,I){typeof P==\"function\"&&T.then(P),typeof I==\"function\"&&T.catch(I)}function Ce(T){return typeof T!=\"string\"&&(console.warn(T+\" used as a key, but it is not a string.\"),T=String(T)),T}function Ie(){if(arguments.length&&typeof arguments[arguments.length-1]==\"function\")return arguments[arguments.length-1]}var E=void 0,L={},N=Object.prototype.toString;function ee(T){return typeof E==\"boolean\"?D.resolve(E):function(P){return new D(function(I){var te=P.transaction(\"local-forage-detect-blob-support\",\"readwrite\"),J=H([\"\"]);te.objectStore(\"local-forage-detect-blob-support\").put(J,\"key\"),te.onabort=function(K){K.preventDefault(),K.stopPropagation(),I(!1)},te.oncomplete=function(){var K=navigator.userAgent.match(/Chrome\\/(\\d+)/),le=navigator.userAgent.match(/Edge\\//);I(le||!K||parseInt(K[1],10)>=43)}}).catch(function(){return!1})}(T).then(function(P){return E=P})}function C(T){var P=L[T.name],I={};I.promise=new D(function(te,J){I.resolve=te,I.reject=J}),P.deferredOperations.push(I),P.dbReady?P.dbReady=P.dbReady.then(function(){return I.promise}):P.dbReady=I.promise}function z(T){var P=L[T.name].deferredOperations.pop();if(P)return P.resolve(),P.promise}function X(T,P){var I=L[T.name].deferredOperations.pop();if(I)return I.reject(P),I.promise}function ne(T,P){return new D(function(I,te){if(L[T.name]=L[T.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},T.db){if(!P)return I(T.db);C(T),T.db.close()}var J=[T.name];P&&J.push(T.version);var K=$.open.apply($,J);P&&(K.onupgradeneeded=function(le){var ve=K.result;try{ve.createObjectStore(T.storeName),le.oldVersion<=1&&ve.createObjectStore(\"local-forage-detect-blob-support\")}catch(we){if(we.name!==\"ConstraintError\")throw we;console.warn('The database \"'+T.name+'\" has been upgraded from version '+le.oldVersion+\" to version \"+le.newVersion+', but the storage \"'+T.storeName+'\" already exists.')}}),K.onerror=function(le){le.preventDefault(),te(K.error)},K.onsuccess=function(){I(K.result),z(T)}})}function Ve(T){return ne(T,!1)}function pt(T){return ne(T,!0)}function Ne(T,P){if(!T.db)return!0;var I=!T.db.objectStoreNames.contains(T.storeName),te=T.version<T.db.version,J=T.version>T.db.version;if(te&&(T.version!==P&&console.warn('The database \"'+T.name+`\" can't be downgraded from version `+T.db.version+\" to version \"+T.version+\".\"),T.version=T.db.version),J||I){if(I){var K=T.db.version+1;K>T.version&&(T.version=K)}return!0}return!1}function ae(T){return H([function(P){for(var I=P.length,te=new ArrayBuffer(I),J=new Uint8Array(te),K=0;K<I;K++)J[K]=P.charCodeAt(K);return te}(atob(T.data))],{type:T.type})}function Me(T){return T&&T.__local_forage_encoded_blob}function Fe(T){var P=this,I=P._initReady().then(function(){var te=L[P._dbInfo.name];if(te&&te.dbReady)return te.dbReady});return be(I,T,T),I}function j(T,P,I,te){te===void 0&&(te=1);try{var J=T.db.transaction(T.storeName,P);I(null,J)}catch(K){if(te>0&&(!T.db||K.name===\"InvalidStateError\"||K.name===\"NotFoundError\"))return D.resolve().then(function(){if(!T.db||K.name===\"NotFoundError\"&&!T.db.objectStoreNames.contains(T.storeName)&&T.version<=T.db.version)return T.db&&(T.version=T.db.version+1),pt(T)}).then(function(){return function(le){C(le);for(var ve=L[le.name],we=ve.forages,Se=0;Se<we.length;Se++){var ke=we[Se];ke._dbInfo.db&&(ke._dbInfo.db.close(),ke._dbInfo.db=null)}return le.db=null,Ve(le).then(function($e){return le.db=$e,Ne(le)?pt(le):$e}).then(function($e){le.db=ve.db=$e;for(var ct=0;ct<we.length;ct++)we[ct]._dbInfo.db=$e}).catch(function($e){throw X(le,$e),$e})}(T).then(function(){j(T,P,I,te-1)})}).catch(I);I(K)}}var ye={_driver:\"asyncStorage\",_initStorage:function(T){var P=this,I={db:null};if(T)for(var te in T)I[te]=T[te];var J=L[I.name];J||(J={forages:[],db:null,dbReady:null,deferredOperations:[]},L[I.name]=J),J.forages.push(P),P._initReady||(P._initReady=P.ready,P.ready=Fe);var K=[];function le(){return D.resolve()}for(var ve=0;ve<J.forages.length;ve++){var we=J.forages[ve];we!==P&&K.push(we._initReady().catch(le))}var Se=J.forages.slice(0);return D.all(K).then(function(){return I.db=J.db,Ve(I)}).then(function(ke){return I.db=ke,Ne(I,P._defaultConfig.version)?pt(I):ke}).then(function(ke){I.db=J.db=ke,P._dbInfo=I;for(var $e=0;$e<Se.length;$e++){var ct=Se[$e];ct!==P&&(ct._dbInfo.db=I.db,ct._dbInfo.version=I.version)}})},_support:function(){try{if(!$||!$.open)return!1;var T=typeof openDatabase!=\"undefined\"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),P=typeof fetch==\"function\"&&fetch.toString().indexOf(\"[native code\")!==-1;return(!T||P)&&typeof indexedDB!=\"undefined\"&&typeof IDBKeyRange!=\"undefined\"}catch{return!1}}(),iterate:function(T,P){var I=this,te=new D(function(J,K){I.ready().then(function(){j(I._dbInfo,\"readonly\",function(le,ve){if(le)return K(le);try{var we=ve.objectStore(I._dbInfo.storeName).openCursor(),Se=1;we.onsuccess=function(){var ke=we.result;if(ke){var $e=ke.value;Me($e)&&($e=ae($e));var ct=T($e,ke.key,Se++);ct!==void 0?J(ct):ke.continue()}else J()},we.onerror=function(){K(we.error)}}catch(ke){K(ke)}})}).catch(K)});return Z(te,P),te},getItem:function(T,P){var I=this;T=Ce(T);var te=new D(function(J,K){I.ready().then(function(){j(I._dbInfo,\"readonly\",function(le,ve){if(le)return K(le);try{var we=ve.objectStore(I._dbInfo.storeName).get(T);we.onsuccess=function(){var Se=we.result;Se===void 0&&(Se=null),Me(Se)&&(Se=ae(Se)),J(Se)},we.onerror=function(){K(we.error)}}catch(Se){K(Se)}})}).catch(K)});return Z(te,P),te},setItem:function(T,P,I){var te=this;T=Ce(T);var J=new D(function(K,le){var ve;te.ready().then(function(){return ve=te._dbInfo,N.call(P)===\"[object Blob]\"?ee(ve.db).then(function(we){return we?P:(Se=P,new D(function(ke,$e){var ct=new FileReader;ct.onerror=$e,ct.onloadend=function(Pt){var Tt=btoa(Pt.target.result||\"\");ke({__local_forage_encoded_blob:!0,data:Tt,type:Se.type})},ct.readAsBinaryString(Se)}));var Se}):P}).then(function(we){j(te._dbInfo,\"readwrite\",function(Se,ke){if(Se)return le(Se);try{var $e=ke.objectStore(te._dbInfo.storeName);we===null&&(we=void 0);var ct=$e.put(we,T);ke.oncomplete=function(){we===void 0&&(we=null),K(we)},ke.onabort=ke.onerror=function(){var Pt=ct.error?ct.error:ct.transaction.error;le(Pt)}}catch(Pt){le(Pt)}})}).catch(le)});return Z(J,I),J},removeItem:function(T,P){var I=this;T=Ce(T);var te=new D(function(J,K){I.ready().then(function(){j(I._dbInfo,\"readwrite\",function(le,ve){if(le)return K(le);try{var we=ve.objectStore(I._dbInfo.storeName).delete(T);ve.oncomplete=function(){J()},ve.onerror=function(){K(we.error)},ve.onabort=function(){var Se=we.error?we.error:we.transaction.error;K(Se)}}catch(Se){K(Se)}})}).catch(K)});return Z(te,P),te},clear:function(T){var P=this,I=new D(function(te,J){P.ready().then(function(){j(P._dbInfo,\"readwrite\",function(K,le){if(K)return J(K);try{var ve=le.objectStore(P._dbInfo.storeName).clear();le.oncomplete=function(){te()},le.onabort=le.onerror=function(){var we=ve.error?ve.error:ve.transaction.error;J(we)}}catch(we){J(we)}})}).catch(J)});return Z(I,T),I},length:function(T){var P=this,I=new D(function(te,J){P.ready().then(function(){j(P._dbInfo,\"readonly\",function(K,le){if(K)return J(K);try{var ve=le.objectStore(P._dbInfo.storeName).count();ve.onsuccess=function(){te(ve.result)},ve.onerror=function(){J(ve.error)}}catch(we){J(we)}})}).catch(J)});return Z(I,T),I},key:function(T,P){var I=this,te=new D(function(J,K){T<0?J(null):I.ready().then(function(){j(I._dbInfo,\"readonly\",function(le,ve){if(le)return K(le);try{var we=ve.objectStore(I._dbInfo.storeName),Se=!1,ke=we.openKeyCursor();ke.onsuccess=function(){var $e=ke.result;$e?T===0||Se?J($e.key):(Se=!0,$e.advance(T)):J(null)},ke.onerror=function(){K(ke.error)}}catch($e){K($e)}})}).catch(K)});return Z(te,P),te},keys:function(T){var P=this,I=new D(function(te,J){P.ready().then(function(){j(P._dbInfo,\"readonly\",function(K,le){if(K)return J(K);try{var ve=le.objectStore(P._dbInfo.storeName).openKeyCursor(),we=[];ve.onsuccess=function(){var Se=ve.result;Se?(we.push(Se.key),Se.continue()):te(we)},ve.onerror=function(){J(ve.error)}}catch(Se){J(Se)}})}).catch(J)});return Z(I,T),I},dropInstance:function(T,P){P=Ie.apply(this,arguments);var I=this.config();(T=typeof T!=\"function\"&&T||{}).name||(T.name=T.name||I.name,T.storeName=T.storeName||I.storeName);var te,J=this;if(T.name){var K=T.name===I.name&&J._dbInfo.db,le=K?D.resolve(J._dbInfo.db):Ve(T).then(function(ve){var we=L[T.name],Se=we.forages;we.db=ve;for(var ke=0;ke<Se.length;ke++)Se[ke]._dbInfo.db=ve;return ve});te=T.storeName?le.then(function(ve){if(ve.objectStoreNames.contains(T.storeName)){var we=ve.version+1;C(T);var Se=L[T.name],ke=Se.forages;ve.close();for(var $e=0;$e<ke.length;$e++){var ct=ke[$e];ct._dbInfo.db=null,ct._dbInfo.version=we}return new D(function(Pt,Tt){var un=$.open(T.name,we);un.onerror=function(wn){un.result.close(),Tt(wn)},un.onupgradeneeded=function(){un.result.deleteObjectStore(T.storeName)},un.onsuccess=function(){var wn=un.result;wn.close(),Pt(wn)}}).then(function(Pt){Se.db=Pt;for(var Tt=0;Tt<ke.length;Tt++){var un=ke[Tt];un._dbInfo.db=Pt,z(un._dbInfo)}}).catch(function(Pt){throw(X(T,Pt)||D.resolve()).catch(function(){}),Pt})}}):le.then(function(ve){C(T);var we=L[T.name],Se=we.forages;ve.close();for(var ke=0;ke<Se.length;ke++)Se[ke]._dbInfo.db=null;return new D(function($e,ct){var Pt=$.deleteDatabase(T.name);Pt.onerror=Pt.onblocked=function(Tt){var un=Pt.result;un&&un.close(),ct(Tt)},Pt.onsuccess=function(){var Tt=Pt.result;Tt&&Tt.close(),$e(Tt)}}).then(function($e){we.db=$e;for(var ct=0;ct<Se.length;ct++)z(Se[ct]._dbInfo)}).catch(function($e){throw(X(T,$e)||D.resolve()).catch(function(){}),$e})})}else te=D.reject(\"Invalid arguments\");return Z(te,P),te}},Oe=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",Le=/^~~local_forage_type~([^~]+)~/,De=9,Je=De+4,et=Object.prototype.toString;function bt(T){var P,I,te,J,K,le=.75*T.length,ve=T.length,we=0;T[T.length-1]===\"=\"&&(le--,T[T.length-2]===\"=\"&&le--);var Se=new ArrayBuffer(le),ke=new Uint8Array(Se);for(P=0;P<ve;P+=4)I=Oe.indexOf(T[P]),te=Oe.indexOf(T[P+1]),J=Oe.indexOf(T[P+2]),K=Oe.indexOf(T[P+3]),ke[we++]=I<<2|te>>4,ke[we++]=(15&te)<<4|J>>2,ke[we++]=(3&J)<<6|63&K;return Se}function _t(T){var P,I=new Uint8Array(T),te=\"\";for(P=0;P<I.length;P+=3)te+=Oe[I[P]>>2],te+=Oe[(3&I[P])<<4|I[P+1]>>4],te+=Oe[(15&I[P+1])<<2|I[P+2]>>6],te+=Oe[63&I[P+2]];return I.length%3==2?te=te.substring(0,te.length-1)+\"=\":I.length%3==1&&(te=te.substring(0,te.length-2)+\"==\"),te}var ln={serialize:function(T,P){var I=\"\";if(T&&(I=et.call(T)),T&&(I===\"[object ArrayBuffer]\"||T.buffer&&et.call(T.buffer)===\"[object ArrayBuffer]\")){var te,J=\"__lfsc__:\";T instanceof ArrayBuffer?(te=T,J+=\"arbf\"):(te=T.buffer,I===\"[object Int8Array]\"?J+=\"si08\":I===\"[object Uint8Array]\"?J+=\"ui08\":I===\"[object Uint8ClampedArray]\"?J+=\"uic8\":I===\"[object Int16Array]\"?J+=\"si16\":I===\"[object Uint16Array]\"?J+=\"ur16\":I===\"[object Int32Array]\"?J+=\"si32\":I===\"[object Uint32Array]\"?J+=\"ui32\":I===\"[object Float32Array]\"?J+=\"fl32\":I===\"[object Float64Array]\"?J+=\"fl64\":P(new Error(\"Failed to get type for BinaryArray\"))),P(J+_t(te))}else if(I===\"[object Blob]\"){var K=new FileReader;K.onload=function(){var le=\"~~local_forage_type~\"+T.type+\"~\"+_t(this.result);P(\"__lfsc__:blob\"+le)},K.readAsArrayBuffer(T)}else try{P(JSON.stringify(T))}catch(le){console.error(\"Couldn't convert value into a JSON string: \",T),P(null,le)}},deserialize:function(T){if(T.substring(0,De)!==\"__lfsc__:\")return JSON.parse(T);var P,I=T.substring(Je),te=T.substring(De,Je);if(te===\"blob\"&&Le.test(I)){var J=I.match(Le);P=J[1],I=I.substring(J[0].length)}var K=bt(I);switch(te){case\"arbf\":return K;case\"blob\":return H([K],{type:P});case\"si08\":return new Int8Array(K);case\"ui08\":return new Uint8Array(K);case\"uic8\":return new Uint8ClampedArray(K);case\"si16\":return new Int16Array(K);case\"ur16\":return new Uint16Array(K);case\"si32\":return new Int32Array(K);case\"ui32\":return new Uint32Array(K);case\"fl32\":return new Float32Array(K);case\"fl64\":return new Float64Array(K);default:throw new Error(\"Unkown type: \"+te)}},stringToBuffer:bt,bufferToString:_t};function wt(T,P,I,te){T.executeSql(\"CREATE TABLE IF NOT EXISTS \"+P.storeName+\" (id INTEGER PRIMARY KEY, key unique, value)\",[],I,te)}function Xt(T,P,I,te,J,K){T.executeSql(I,te,J,function(le,ve){ve.code===ve.SYNTAX_ERR?le.executeSql(\"SELECT name FROM sqlite_master WHERE type='table' AND name = ?\",[P.storeName],function(we,Se){Se.rows.length?K(we,ve):wt(we,P,function(){we.executeSql(I,te,J,K)},K)},K):K(le,ve)},K)}function qt(T,P,I,te){var J=this;T=Ce(T);var K=new D(function(le,ve){J.ready().then(function(){P===void 0&&(P=null);var we=P,Se=J._dbInfo;Se.serializer.serialize(P,function(ke,$e){$e?ve($e):Se.db.transaction(function(ct){Xt(ct,Se,\"INSERT OR REPLACE INTO \"+Se.storeName+\" (key, value) VALUES (?, ?)\",[T,ke],function(){le(we)},function(Pt,Tt){ve(Tt)})},function(ct){if(ct.code===ct.QUOTA_ERR){if(te>0)return void le(qt.apply(J,[T,we,I,te-1]));ve(ct)}})})}).catch(ve)});return Z(K,I),K}function en(T){return new D(function(P,I){T.transaction(function(te){te.executeSql(\"SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'\",[],function(J,K){for(var le=[],ve=0;ve<K.rows.length;ve++)le.push(K.rows.item(ve).name);P({db:T,storeNames:le})},function(J,K){I(K)})},function(te){I(te)})})}var Bt={_driver:\"webSQLStorage\",_initStorage:function(T){var P=this,I={db:null};if(T)for(var te in T)I[te]=typeof T[te]!=\"string\"?T[te].toString():T[te];var J=new D(function(K,le){try{I.db=openDatabase(I.name,String(I.version),I.description,I.size)}catch(ve){return le(ve)}I.db.transaction(function(ve){wt(ve,I,function(){P._dbInfo=I,K()},function(we,Se){le(Se)})},le)});return I.serializer=ln,J},_support:typeof openDatabase==\"function\",iterate:function(T,P){var I=this,te=new D(function(J,K){I.ready().then(function(){var le=I._dbInfo;le.db.transaction(function(ve){Xt(ve,le,\"SELECT * FROM \"+le.storeName,[],function(we,Se){for(var ke=Se.rows,$e=ke.length,ct=0;ct<$e;ct++){var Pt=ke.item(ct),Tt=Pt.value;if(Tt&&(Tt=le.serializer.deserialize(Tt)),(Tt=T(Tt,Pt.key,ct+1))!==void 0)return void J(Tt)}J()},function(we,Se){K(Se)})})}).catch(K)});return Z(te,P),te},getItem:function(T,P){var I=this;T=Ce(T);var te=new D(function(J,K){I.ready().then(function(){var le=I._dbInfo;le.db.transaction(function(ve){Xt(ve,le,\"SELECT * FROM \"+le.storeName+\" WHERE key = ? LIMIT 1\",[T],function(we,Se){var ke=Se.rows.length?Se.rows.item(0).value:null;ke&&(ke=le.serializer.deserialize(ke)),J(ke)},function(we,Se){K(Se)})})}).catch(K)});return Z(te,P),te},setItem:function(T,P,I){return qt.apply(this,[T,P,I,1])},removeItem:function(T,P){var I=this;T=Ce(T);var te=new D(function(J,K){I.ready().then(function(){var le=I._dbInfo;le.db.transaction(function(ve){Xt(ve,le,\"DELETE FROM \"+le.storeName+\" WHERE key = ?\",[T],function(){J()},function(we,Se){K(Se)})})}).catch(K)});return Z(te,P),te},clear:function(T){var P=this,I=new D(function(te,J){P.ready().then(function(){var K=P._dbInfo;K.db.transaction(function(le){Xt(le,K,\"DELETE FROM \"+K.storeName,[],function(){te()},function(ve,we){J(we)})})}).catch(J)});return Z(I,T),I},length:function(T){var P=this,I=new D(function(te,J){P.ready().then(function(){var K=P._dbInfo;K.db.transaction(function(le){Xt(le,K,\"SELECT COUNT(key) as c FROM \"+K.storeName,[],function(ve,we){var Se=we.rows.item(0).c;te(Se)},function(ve,we){J(we)})})}).catch(J)});return Z(I,T),I},key:function(T,P){var I=this,te=new D(function(J,K){I.ready().then(function(){var le=I._dbInfo;le.db.transaction(function(ve){Xt(ve,le,\"SELECT key FROM \"+le.storeName+\" WHERE id = ? LIMIT 1\",[T+1],function(we,Se){var ke=Se.rows.length?Se.rows.item(0).key:null;J(ke)},function(we,Se){K(Se)})})}).catch(K)});return Z(te,P),te},keys:function(T){var P=this,I=new D(function(te,J){P.ready().then(function(){var K=P._dbInfo;K.db.transaction(function(le){Xt(le,K,\"SELECT key FROM \"+K.storeName,[],function(ve,we){for(var Se=[],ke=0;ke<we.rows.length;ke++)Se.push(we.rows.item(ke).key);te(Se)},function(ve,we){J(we)})})}).catch(J)});return Z(I,T),I},dropInstance:function(T,P){P=Ie.apply(this,arguments);var I=this.config();(T=typeof T!=\"function\"&&T||{}).name||(T.name=T.name||I.name,T.storeName=T.storeName||I.storeName);var te,J=this;return Z(te=T.name?new D(function(K){var le;le=T.name===I.name?J._dbInfo.db:openDatabase(T.name,\"\",\"\",0),T.storeName?K({db:le,storeNames:[T.storeName]}):K(en(le))}).then(function(K){return new D(function(le,ve){K.db.transaction(function(we){function Se(Pt){return new D(function(Tt,un){we.executeSql(\"DROP TABLE IF EXISTS \"+Pt,[],function(){Tt()},function(wn,Di){un(Di)})})}for(var ke=[],$e=0,ct=K.storeNames.length;$e<ct;$e++)ke.push(Se(K.storeNames[$e]));D.all(ke).then(function(){le()}).catch(function(Pt){ve(Pt)})},function(we){ve(we)})})}):D.reject(\"Invalid arguments\"),P),te}};function Fn(T,P){var I=T.name+\"/\";return T.storeName!==P.storeName&&(I+=T.storeName+\"/\"),I}function Bn(){return!function(){try{return localStorage.setItem(\"_localforage_support_test\",!0),localStorage.removeItem(\"_localforage_support_test\"),!1}catch{return!0}}()||localStorage.length>0}var Mn={_driver:\"localStorageWrapper\",_initStorage:function(T){var P={};if(T)for(var I in T)P[I]=T[I];return P.keyPrefix=Fn(T,this._defaultConfig),Bn()?(this._dbInfo=P,P.serializer=ln,D.resolve()):D.reject()},_support:function(){try{return typeof localStorage!=\"undefined\"&&\"setItem\"in localStorage&&!!localStorage.setItem}catch{return!1}}(),iterate:function(T,P){var I=this,te=I.ready().then(function(){for(var J=I._dbInfo,K=J.keyPrefix,le=K.length,ve=localStorage.length,we=1,Se=0;Se<ve;Se++){var ke=localStorage.key(Se);if(ke.indexOf(K)===0){var $e=localStorage.getItem(ke);if($e&&($e=J.serializer.deserialize($e)),($e=T($e,ke.substring(le),we++))!==void 0)return $e}}});return Z(te,P),te},getItem:function(T,P){var I=this;T=Ce(T);var te=I.ready().then(function(){var J=I._dbInfo,K=localStorage.getItem(J.keyPrefix+T);return K&&(K=J.serializer.deserialize(K)),K});return Z(te,P),te},setItem:function(T,P,I){var te=this;T=Ce(T);var J=te.ready().then(function(){P===void 0&&(P=null);var K=P;return new D(function(le,ve){var we=te._dbInfo;we.serializer.serialize(P,function(Se,ke){if(ke)ve(ke);else try{localStorage.setItem(we.keyPrefix+T,Se),le(K)}catch($e){$e.name!==\"QuotaExceededError\"&&$e.name!==\"NS_ERROR_DOM_QUOTA_REACHED\"||ve($e),ve($e)}})})});return Z(J,I),J},removeItem:function(T,P){var I=this;T=Ce(T);var te=I.ready().then(function(){var J=I._dbInfo;localStorage.removeItem(J.keyPrefix+T)});return Z(te,P),te},clear:function(T){var P=this,I=P.ready().then(function(){for(var te=P._dbInfo.keyPrefix,J=localStorage.length-1;J>=0;J--){var K=localStorage.key(J);K.indexOf(te)===0&&localStorage.removeItem(K)}});return Z(I,T),I},length:function(T){var P=this.keys().then(function(I){return I.length});return Z(P,T),P},key:function(T,P){var I=this,te=I.ready().then(function(){var J,K=I._dbInfo;try{J=localStorage.key(T)}catch{J=null}return J&&(J=J.substring(K.keyPrefix.length)),J});return Z(te,P),te},keys:function(T){var P=this,I=P.ready().then(function(){for(var te=P._dbInfo,J=localStorage.length,K=[],le=0;le<J;le++){var ve=localStorage.key(le);ve.indexOf(te.keyPrefix)===0&&K.push(ve.substring(te.keyPrefix.length))}return K});return Z(I,T),I},dropInstance:function(T,P){if(P=Ie.apply(this,arguments),!(T=typeof T!=\"function\"&&T||{}).name){var I=this.config();T.name=T.name||I.name,T.storeName=T.storeName||I.storeName}var te,J=this;return Z(te=T.name?new D(function(K){T.storeName?K(Fn(T,J._defaultConfig)):K(T.name+\"/\")}).then(function(K){for(var le=localStorage.length-1;le>=0;le--){var ve=localStorage.key(le);ve.indexOf(K)===0&&localStorage.removeItem(ve)}}):D.reject(\"Invalid arguments\"),P),te}},qn=function(T,P){for(var I,te,J=T.length,K=0;K<J;){if((I=T[K])===(te=P)||typeof I==\"number\"&&typeof te==\"number\"&&isNaN(I)&&isNaN(te))return!0;K++}return!1},An=Array.isArray||function(T){return Object.prototype.toString.call(T)===\"[object Array]\"},In={},Ai={},Rn={INDEXEDDB:ye,WEBSQL:Bt,LOCALSTORAGE:Mn},Ni=[Rn.INDEXEDDB._driver,Rn.WEBSQL._driver,Rn.LOCALSTORAGE._driver],mi=[\"dropInstance\"],co=[\"clear\",\"getItem\",\"iterate\",\"key\",\"keys\",\"length\",\"removeItem\",\"setItem\"].concat(mi),ka={description:\"\",driver:Ni.slice(),name:\"localforage\",size:4980736,storeName:\"keyvaluepairs\",version:1};function Po(T,P){T[P]=function(){var I=arguments;return T.ready().then(function(){return T[P].apply(T,I)})}}function po(){for(var T=1;T<arguments.length;T++){var P=arguments[T];if(P)for(var I in P)P.hasOwnProperty(I)&&(An(P[I])?arguments[0][I]=P[I].slice():arguments[0][I]=P[I])}return arguments[0]}var Ws=new(function(){function T(P){for(var I in function(K,le){if(!(K instanceof le))throw new TypeError(\"Cannot call a class as a function\")}(this,T),Rn)if(Rn.hasOwnProperty(I)){var te=Rn[I],J=te._driver;this[I]=J,In[J]||this.defineDriver(te)}this._defaultConfig=po({},ka),this._config=po({},this._defaultConfig,P),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return T.prototype.config=function(P){if((P===void 0?\"undefined\":O(P))===\"object\"){if(this._ready)return new Error(\"Can't call config() after localforage has been used.\");for(var I in P){if(I===\"storeName\"&&(P[I]=P[I].replace(/\\W/g,\"_\")),I===\"version\"&&typeof P[I]!=\"number\")return new Error(\"Database version must be a number.\");this._config[I]=P[I]}return!(\"driver\"in P)||!P.driver||this.setDriver(this._config.driver)}return typeof P==\"string\"?this._config[P]:this._config},T.prototype.defineDriver=function(P,I,te){var J=new D(function(K,le){try{var ve=P._driver,we=new Error(\"Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver\");if(!P._driver)return void le(we);for(var Se=co.concat(\"_initStorage\"),ke=0,$e=Se.length;ke<$e;ke++){var ct=Se[ke];if((!qn(mi,ct)||P[ct])&&typeof P[ct]!=\"function\")return void le(we)}(function(){for(var Tt=function(Ua){return function(){var fo=new Error(\"Method \"+Ua+\" is not implemented by the current driver\"),Io=D.reject(fo);return Z(Io,arguments[arguments.length-1]),Io}},un=0,wn=mi.length;un<wn;un++){var Di=mi[un];P[Di]||(P[Di]=Tt(Di))}})();var Pt=function(Tt){In[ve]&&console.info(\"Redefining LocalForage driver: \"+ve),In[ve]=P,Ai[ve]=Tt,K()};\"_support\"in P?P._support&&typeof P._support==\"function\"?P._support().then(Pt,le):Pt(!!P._support):Pt(!0)}catch(Tt){le(Tt)}});return be(J,I,te),J},T.prototype.driver=function(){return this._driver||null},T.prototype.getDriver=function(P,I,te){var J=In[P]?D.resolve(In[P]):D.reject(new Error(\"Driver not found.\"));return be(J,I,te),J},T.prototype.getSerializer=function(P){var I=D.resolve(ln);return be(I,P),I},T.prototype.ready=function(P){var I=this,te=I._driverSet.then(function(){return I._ready===null&&(I._ready=I._initDriver()),I._ready});return be(te,P,P),te},T.prototype.setDriver=function(P,I,te){var J=this;An(P)||(P=[P]);var K=this._getSupportedDrivers(P);function le(){J._config.driver=J.driver()}function ve(Se){return J._extend(Se),le(),J._ready=J._initStorage(J._config),J._ready}var we=this._driverSet!==null?this._driverSet.catch(function(){return D.resolve()}):D.resolve();return this._driverSet=we.then(function(){var Se=K[0];return J._dbInfo=null,J._ready=null,J.getDriver(Se).then(function(ke){J._driver=ke._driver,le(),J._wrapLibraryMethodsWithReady(),J._initDriver=function($e){return function(){var ct=0;return function Pt(){for(;ct<$e.length;){var Tt=$e[ct];return ct++,J._dbInfo=null,J._ready=null,J.getDriver(Tt).then(ve).catch(Pt)}le();var un=new Error(\"No available storage method found.\");return J._driverSet=D.reject(un),J._driverSet}()}}(K)})}).catch(function(){le();var Se=new Error(\"No available storage method found.\");return J._driverSet=D.reject(Se),J._driverSet}),be(this._driverSet,I,te),this._driverSet},T.prototype.supports=function(P){return!!Ai[P]},T.prototype._extend=function(P){po(this,P)},T.prototype._getSupportedDrivers=function(P){for(var I=[],te=0,J=P.length;te<J;te++){var K=P[te];this.supports(K)&&I.push(K)}return I},T.prototype._wrapLibraryMethodsWithReady=function(){for(var P=0,I=co.length;P<I;P++)Po(this,co[P])},T.prototype.createInstance=function(P){return new T(P)},T}());me.exports=Ws},{3:3}]},{},[4])(4)}).call(this,v(4))},function(S,M,v){var b;(function(Q){function me(C,z){var X=(65535&C)+(65535&z);return(C>>16)+(z>>16)+(X>>16)<<16|65535&X}function q(C,z,X,ne,Ve,pt){return me((Ne=me(me(z,C),me(ne,pt)))<<(ae=Ve)|Ne>>>32-ae,X);var Ne,ae}function O(C,z,X,ne,Ve,pt,Ne){return q(z&X|~z&ne,C,z,Ve,pt,Ne)}function $(C,z,X,ne,Ve,pt,Ne){return q(z&ne|X&~ne,C,z,Ve,pt,Ne)}function H(C,z,X,ne,Ve,pt,Ne){return q(z^X^ne,C,z,Ve,pt,Ne)}function D(C,z,X,ne,Ve,pt,Ne){return q(X^(z|~ne),C,z,Ve,pt,Ne)}function Z(C,z){var X,ne,Ve,pt,Ne;C[z>>5]|=128<<z%32,C[14+(z+64>>>9<<4)]=z;var ae=1732584193,Me=-271733879,Fe=-1732584194,j=271733878;for(X=0;X<C.length;X+=16)ne=ae,Ve=Me,pt=Fe,Ne=j,ae=O(ae,Me,Fe,j,C[X],7,-680876936),j=O(j,ae,Me,Fe,C[X+1],12,-389564586),Fe=O(Fe,j,ae,Me,C[X+2],17,606105819),Me=O(Me,Fe,j,ae,C[X+3],22,-1044525330),ae=O(ae,Me,Fe,j,C[X+4],7,-176418897),j=O(j,ae,Me,Fe,C[X+5],12,1200080426),Fe=O(Fe,j,ae,Me,C[X+6],17,-1473231341),Me=O(Me,Fe,j,ae,C[X+7],22,-45705983),ae=O(ae,Me,Fe,j,C[X+8],7,1770035416),j=O(j,ae,Me,Fe,C[X+9],12,-1958414417),Fe=O(Fe,j,ae,Me,C[X+10],17,-42063),Me=O(Me,Fe,j,ae,C[X+11],22,-1990404162),ae=O(ae,Me,Fe,j,C[X+12],7,1804603682),j=O(j,ae,Me,Fe,C[X+13],12,-40341101),Fe=O(Fe,j,ae,Me,C[X+14],17,-1502002290),ae=$(ae,Me=O(Me,Fe,j,ae,C[X+15],22,1236535329),Fe,j,C[X+1],5,-165796510),j=$(j,ae,Me,Fe,C[X+6],9,-1069501632),Fe=$(Fe,j,ae,Me,C[X+11],14,643717713),Me=$(Me,Fe,j,ae,C[X],20,-373897302),ae=$(ae,Me,Fe,j,C[X+5],5,-701558691),j=$(j,ae,Me,Fe,C[X+10],9,38016083),Fe=$(Fe,j,ae,Me,C[X+15],14,-660478335),Me=$(Me,Fe,j,ae,C[X+4],20,-405537848),ae=$(ae,Me,Fe,j,C[X+9],5,568446438),j=$(j,ae,Me,Fe,C[X+14],9,-1019803690),Fe=$(Fe,j,ae,Me,C[X+3],14,-187363961),Me=$(Me,Fe,j,ae,C[X+8],20,1163531501),ae=$(ae,Me,Fe,j,C[X+13],5,-1444681467),j=$(j,ae,Me,Fe,C[X+2],9,-51403784),Fe=$(Fe,j,ae,Me,C[X+7],14,1735328473),ae=H(ae,Me=$(Me,Fe,j,ae,C[X+12],20,-1926607734),Fe,j,C[X+5],4,-378558),j=H(j,ae,Me,Fe,C[X+8],11,-2022574463),Fe=H(Fe,j,ae,Me,C[X+11],16,1839030562),Me=H(Me,Fe,j,ae,C[X+14],23,-35309556),ae=H(ae,Me,Fe,j,C[X+1],4,-1530992060),j=H(j,ae,Me,Fe,C[X+4],11,1272893353),Fe=H(Fe,j,ae,Me,C[X+7],16,-155497632),Me=H(Me,Fe,j,ae,C[X+10],23,-1094730640),ae=H(ae,Me,Fe,j,C[X+13],4,681279174),j=H(j,ae,Me,Fe,C[X],11,-358537222),Fe=H(Fe,j,ae,Me,C[X+3],16,-722521979),Me=H(Me,Fe,j,ae,C[X+6],23,76029189),ae=H(ae,Me,Fe,j,C[X+9],4,-640364487),j=H(j,ae,Me,Fe,C[X+12],11,-421815835),Fe=H(Fe,j,ae,Me,C[X+15],16,530742520),ae=D(ae,Me=H(Me,Fe,j,ae,C[X+2],23,-995338651),Fe,j,C[X],6,-198630844),j=D(j,ae,Me,Fe,C[X+7],10,1126891415),Fe=D(Fe,j,ae,Me,C[X+14],15,-1416354905),Me=D(Me,Fe,j,ae,C[X+5],21,-57434055),ae=D(ae,Me,Fe,j,C[X+12],6,1700485571),j=D(j,ae,Me,Fe,C[X+3],10,-1894986606),Fe=D(Fe,j,ae,Me,C[X+10],15,-1051523),Me=D(Me,Fe,j,ae,C[X+1],21,-2054922799),ae=D(ae,Me,Fe,j,C[X+8],6,1873313359),j=D(j,ae,Me,Fe,C[X+15],10,-30611744),Fe=D(Fe,j,ae,Me,C[X+6],15,-1560198380),Me=D(Me,Fe,j,ae,C[X+13],21,1309151649),ae=D(ae,Me,Fe,j,C[X+4],6,-145523070),j=D(j,ae,Me,Fe,C[X+11],10,-1120210379),Fe=D(Fe,j,ae,Me,C[X+2],15,718787259),Me=D(Me,Fe,j,ae,C[X+9],21,-343485551),ae=me(ae,ne),Me=me(Me,Ve),Fe=me(Fe,pt),j=me(j,Ne);return[ae,Me,Fe,j]}function be(C){var z,X=\"\",ne=32*C.length;for(z=0;z<ne;z+=8)X+=String.fromCharCode(C[z>>5]>>>z%32&255);return X}function Ce(C){var z,X=[];for(X[(C.length>>2)-1]=void 0,z=0;z<X.length;z+=1)X[z]=0;var ne=8*C.length;for(z=0;z<ne;z+=8)X[z>>5]|=(255&C.charCodeAt(z/8))<<z%32;return X}function Ie(C){var z,X,ne=\"\";for(X=0;X<C.length;X+=1)z=C.charCodeAt(X),ne+=\"0123456789abcdef\".charAt(z>>>4&15)+\"0123456789abcdef\".charAt(15&z);return ne}function E(C){return unescape(encodeURIComponent(C))}function L(C){return function(z){return be(Z(Ce(z),8*z.length))}(E(C))}function N(C,z){return function(X,ne){var Ve,pt,Ne=Ce(X),ae=[],Me=[];for(ae[15]=Me[15]=void 0,Ne.length>16&&(Ne=Z(Ne,8*X.length)),Ve=0;Ve<16;Ve+=1)ae[Ve]=909522486^Ne[Ve],Me[Ve]=1549556828^Ne[Ve];return pt=Z(ae.concat(Ce(ne)),512+8*ne.length),be(Z(Me.concat(pt),640))}(E(C),E(z))}function ee(C,z,X){return z?X?N(z,C):Ie(N(z,C)):X?L(C):Ie(L(C))}(b=function(){return ee}.call(M,v,M,S))===void 0||(S.exports=b)})()},function(S,M){var v;v=function(){return this}();try{v=v||new Function(\"return this\")()}catch{typeof window==\"object\"&&(v=window)}S.exports=v},function(S,M,v){var b=v(58),Q=v(59);function me(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}M.parse=C,M.resolve=function(z,X){return C(z,!1,!0).resolve(X)},M.resolveObject=function(z,X){return z?C(z,!1,!0).resolveObject(X):X},M.format=function(z){return Q.isString(z)&&(z=C(z)),z instanceof me?z.format():me.prototype.format.call(z)},M.Url=me;var q=/^([a-z0-9.+-]+:)/i,O=/:[0-9]*$/,$=/^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,H=[\"{\",\"}\",\"|\",\"\\\\\",\"^\",\"`\"].concat([\"<\",\">\",'\"',\"`\",\" \",\"\\r\",`\n`,\"\t\"]),D=[\"'\"].concat(H),Z=[\"%\",\"/\",\"?\",\";\",\"#\"].concat(D),be=[\"/\",\"?\",\"#\"],Ce=/^[+a-z0-9A-Z_-]{0,63}$/,Ie=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,\"javascript:\":!0},L={javascript:!0,\"javascript:\":!0},N={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,\"http:\":!0,\"https:\":!0,\"ftp:\":!0,\"gopher:\":!0,\"file:\":!0},ee=v(60);function C(z,X,ne){if(z&&Q.isObject(z)&&z instanceof me)return z;var Ve=new me;return Ve.parse(z,X,ne),Ve}me.prototype.parse=function(z,X,ne){if(!Q.isString(z))throw new TypeError(\"Parameter 'url' must be a string, not \"+typeof z);var Ve=z.indexOf(\"?\"),pt=Ve!==-1&&Ve<z.indexOf(\"#\")?\"?\":\"#\",Ne=z.split(pt);Ne[0]=Ne[0].replace(/\\\\/g,\"/\");var ae=z=Ne.join(pt);if(ae=ae.trim(),!ne&&z.split(\"#\").length===1){var Me=$.exec(ae);if(Me)return this.path=ae,this.href=ae,this.pathname=Me[1],Me[2]?(this.search=Me[2],this.query=X?ee.parse(this.search.substr(1)):this.search.substr(1)):X&&(this.search=\"\",this.query={}),this}var Fe=q.exec(ae);if(Fe){var j=(Fe=Fe[0]).toLowerCase();this.protocol=j,ae=ae.substr(Fe.length)}if(ne||Fe||ae.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)){var ye=ae.substr(0,2)===\"//\";!ye||Fe&&L[Fe]||(ae=ae.substr(2),this.slashes=!0)}if(!L[Fe]&&(ye||Fe&&!N[Fe])){for(var Oe,Le,De=-1,Je=0;Je<be.length;Je++)(et=ae.indexOf(be[Je]))!==-1&&(De===-1||et<De)&&(De=et);for((Le=De===-1?ae.lastIndexOf(\"@\"):ae.lastIndexOf(\"@\",De))!==-1&&(Oe=ae.slice(0,Le),ae=ae.slice(Le+1),this.auth=decodeURIComponent(Oe)),De=-1,Je=0;Je<Z.length;Je++){var et;(et=ae.indexOf(Z[Je]))!==-1&&(De===-1||et<De)&&(De=et)}De===-1&&(De=ae.length),this.host=ae.slice(0,De),ae=ae.slice(De),this.parseHost(),this.hostname=this.hostname||\"\";var bt=this.hostname[0]===\"[\"&&this.hostname[this.hostname.length-1]===\"]\";if(!bt)for(var _t=this.hostname.split(/\\./),ln=(Je=0,_t.length);Je<ln;Je++){var wt=_t[Je];if(wt&&!wt.match(Ce)){for(var Xt=\"\",qt=0,en=wt.length;qt<en;qt++)wt.charCodeAt(qt)>127?Xt+=\"x\":Xt+=wt[qt];if(!Xt.match(Ce)){var Bt=_t.slice(0,Je),Fn=_t.slice(Je+1),Bn=wt.match(Ie);Bn&&(Bt.push(Bn[1]),Fn.unshift(Bn[2])),Fn.length&&(ae=\"/\"+Fn.join(\".\")+ae),this.hostname=Bt.join(\".\");break}}}this.hostname.length>255?this.hostname=\"\":this.hostname=this.hostname.toLowerCase(),bt||(this.hostname=b.toASCII(this.hostname));var Mn=this.port?\":\"+this.port:\"\",qn=this.hostname||\"\";this.host=qn+Mn,this.href+=this.host,bt&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),ae[0]!==\"/\"&&(ae=\"/\"+ae))}if(!E[j])for(Je=0,ln=D.length;Je<ln;Je++){var An=D[Je];if(ae.indexOf(An)!==-1){var In=encodeURIComponent(An);In===An&&(In=escape(An)),ae=ae.split(An).join(In)}}var Ai=ae.indexOf(\"#\");Ai!==-1&&(this.hash=ae.substr(Ai),ae=ae.slice(0,Ai));var Rn=ae.indexOf(\"?\");if(Rn!==-1?(this.search=ae.substr(Rn),this.query=ae.substr(Rn+1),X&&(this.query=ee.parse(this.query)),ae=ae.slice(0,Rn)):X&&(this.search=\"\",this.query={}),ae&&(this.pathname=ae),N[j]&&this.hostname&&!this.pathname&&(this.pathname=\"/\"),this.pathname||this.search){Mn=this.pathname||\"\";var Ni=this.search||\"\";this.path=Mn+Ni}return this.href=this.format(),this},me.prototype.format=function(){var z=this.auth||\"\";z&&(z=(z=encodeURIComponent(z)).replace(/%3A/i,\":\"),z+=\"@\");var X=this.protocol||\"\",ne=this.pathname||\"\",Ve=this.hash||\"\",pt=!1,Ne=\"\";this.host?pt=z+this.host:this.hostname&&(pt=z+(this.hostname.indexOf(\":\")===-1?this.hostname:\"[\"+this.hostname+\"]\"),this.port&&(pt+=\":\"+this.port)),this.query&&Q.isObject(this.query)&&Object.keys(this.query).length&&(Ne=ee.stringify(this.query));var ae=this.search||Ne&&\"?\"+Ne||\"\";return X&&X.substr(-1)!==\":\"&&(X+=\":\"),this.slashes||(!X||N[X])&&pt!==!1?(pt=\"//\"+(pt||\"\"),ne&&ne.charAt(0)!==\"/\"&&(ne=\"/\"+ne)):pt||(pt=\"\"),Ve&&Ve.charAt(0)!==\"#\"&&(Ve=\"#\"+Ve),ae&&ae.charAt(0)!==\"?\"&&(ae=\"?\"+ae),X+pt+(ne=ne.replace(/[?#]/g,function(Me){return encodeURIComponent(Me)}))+(ae=ae.replace(\"#\",\"%23\"))+Ve},me.prototype.resolve=function(z){return this.resolveObject(C(z,!1,!0)).format()},me.prototype.resolveObject=function(z){if(Q.isString(z)){var X=new me;X.parse(z,!1,!0),z=X}for(var ne=new me,Ve=Object.keys(this),pt=0;pt<Ve.length;pt++){var Ne=Ve[pt];ne[Ne]=this[Ne]}if(ne.hash=z.hash,z.href===\"\")return ne.href=ne.format(),ne;if(z.slashes&&!z.protocol){for(var ae=Object.keys(z),Me=0;Me<ae.length;Me++){var Fe=ae[Me];Fe!==\"protocol\"&&(ne[Fe]=z[Fe])}return N[ne.protocol]&&ne.hostname&&!ne.pathname&&(ne.path=ne.pathname=\"/\"),ne.href=ne.format(),ne}if(z.protocol&&z.protocol!==ne.protocol){if(!N[z.protocol]){for(var j=Object.keys(z),ye=0;ye<j.length;ye++){var Oe=j[ye];ne[Oe]=z[Oe]}return ne.href=ne.format(),ne}if(ne.protocol=z.protocol,z.host||L[z.protocol])ne.pathname=z.pathname;else{for(var Le=(z.pathname||\"\").split(\"/\");Le.length&&!(z.host=Le.shift()););z.host||(z.host=\"\"),z.hostname||(z.hostname=\"\"),Le[0]!==\"\"&&Le.unshift(\"\"),Le.length<2&&Le.unshift(\"\"),ne.pathname=Le.join(\"/\")}if(ne.search=z.search,ne.query=z.query,ne.host=z.host||\"\",ne.auth=z.auth,ne.hostname=z.hostname||z.host,ne.port=z.port,ne.pathname||ne.search){var De=ne.pathname||\"\",Je=ne.search||\"\";ne.path=De+Je}return ne.slashes=ne.slashes||z.slashes,ne.href=ne.format(),ne}var et=ne.pathname&&ne.pathname.charAt(0)===\"/\",bt=z.host||z.pathname&&z.pathname.charAt(0)===\"/\",_t=bt||et||ne.host&&z.pathname,ln=_t,wt=ne.pathname&&ne.pathname.split(\"/\")||[],Xt=(Le=z.pathname&&z.pathname.split(\"/\")||[],ne.protocol&&!N[ne.protocol]);if(Xt&&(ne.hostname=\"\",ne.port=null,ne.host&&(wt[0]===\"\"?wt[0]=ne.host:wt.unshift(ne.host)),ne.host=\"\",z.protocol&&(z.hostname=null,z.port=null,z.host&&(Le[0]===\"\"?Le[0]=z.host:Le.unshift(z.host)),z.host=null),_t=_t&&(Le[0]===\"\"||wt[0]===\"\")),bt)ne.host=z.host||z.host===\"\"?z.host:ne.host,ne.hostname=z.hostname||z.hostname===\"\"?z.hostname:ne.hostname,ne.search=z.search,ne.query=z.query,wt=Le;else if(Le.length)wt||(wt=[]),wt.pop(),wt=wt.concat(Le),ne.search=z.search,ne.query=z.query;else if(!Q.isNullOrUndefined(z.search))return Xt&&(ne.hostname=ne.host=wt.shift(),(Bn=!!(ne.host&&ne.host.indexOf(\"@\")>0)&&ne.host.split(\"@\"))&&(ne.auth=Bn.shift(),ne.host=ne.hostname=Bn.shift())),ne.search=z.search,ne.query=z.query,Q.isNull(ne.pathname)&&Q.isNull(ne.search)||(ne.path=(ne.pathname?ne.pathname:\"\")+(ne.search?ne.search:\"\")),ne.href=ne.format(),ne;if(!wt.length)return ne.pathname=null,ne.search?ne.path=\"/\"+ne.search:ne.path=null,ne.href=ne.format(),ne;for(var qt=wt.slice(-1)[0],en=(ne.host||z.host||wt.length>1)&&(qt===\".\"||qt===\"..\")||qt===\"\",Bt=0,Fn=wt.length;Fn>=0;Fn--)(qt=wt[Fn])===\".\"?wt.splice(Fn,1):qt===\"..\"?(wt.splice(Fn,1),Bt++):Bt&&(wt.splice(Fn,1),Bt--);if(!_t&&!ln)for(;Bt--;Bt)wt.unshift(\"..\");!_t||wt[0]===\"\"||wt[0]&&wt[0].charAt(0)===\"/\"||wt.unshift(\"\"),en&&wt.join(\"/\").substr(-1)!==\"/\"&&wt.push(\"\");var Bn,Mn=wt[0]===\"\"||wt[0]&&wt[0].charAt(0)===\"/\";return Xt&&(ne.hostname=ne.host=Mn?\"\":wt.length?wt.shift():\"\",(Bn=!!(ne.host&&ne.host.indexOf(\"@\")>0)&&ne.host.split(\"@\"))&&(ne.auth=Bn.shift(),ne.host=ne.hostname=Bn.shift())),(_t=_t||ne.host&&wt.length)&&!Mn&&wt.unshift(\"\"),wt.length?ne.pathname=wt.join(\"/\"):(ne.pathname=null,ne.path=null),Q.isNull(ne.pathname)&&Q.isNull(ne.search)||(ne.path=(ne.pathname?ne.pathname:\"\")+(ne.search?ne.search:\"\")),ne.auth=z.auth||ne.auth,ne.slashes=ne.slashes||z.slashes,ne.href=ne.format(),ne},me.prototype.parseHost=function(){var z=this.host,X=O.exec(z);X&&((X=X[0])!==\":\"&&(this.port=X.substr(1)),z=z.substr(0,z.length-X.length)),z&&(this.hostname=z)}},function(S,M,v){(function(b){S.exports=function Q(me,q,O){function $(Z,be){if(!q[Z]){if(!me[Z]){if(H)return H(Z,!0);var Ce=new Error(\"Cannot find module '\"+Z+\"'\");throw Ce.code=\"MODULE_NOT_FOUND\",Ce}var Ie=q[Z]={exports:{}};me[Z][0].call(Ie.exports,function(E){var L=me[Z][1][E];return $(L||E)},Ie,Ie.exports,Q,me,q,O)}return q[Z].exports}for(var H=!1,D=0;D<O.length;D++)$(O[D]);return $}({1:[function(Q,me,q){(function(O){var $,H,D=O.MutationObserver||O.WebKitMutationObserver;if(D){var Z=0,be=new D(L),Ce=O.document.createTextNode(\"\");be.observe(Ce,{characterData:!0}),$=function(){Ce.data=Z=++Z%2}}else if(O.setImmediate||O.MessageChannel===void 0)$=\"document\"in O&&\"onreadystatechange\"in O.document.createElement(\"script\")?function(){var N=O.document.createElement(\"script\");N.onreadystatechange=function(){L(),N.onreadystatechange=null,N.parentNode.removeChild(N),N=null},O.document.documentElement.appendChild(N)}:function(){setTimeout(L,0)};else{var Ie=new O.MessageChannel;Ie.port1.onmessage=L,$=function(){Ie.port2.postMessage(0)}}var E=[];function L(){var N,ee;H=!0;for(var C=E.length;C;){for(ee=E,E=[],N=-1;++N<C;)ee[N]();C=E.length}H=!1}me.exports=function(N){E.push(N)!==1||H||$()}}).call(this,b!==void 0?b:typeof self!=\"undefined\"?self:typeof window!=\"undefined\"?window:{})},{}],2:[function(Q,me,q){var O=Q(1);function $(){}var H={},D=[\"REJECTED\"],Z=[\"FULFILLED\"],be=[\"PENDING\"];function Ce(C){if(typeof C!=\"function\")throw new TypeError(\"resolver must be a function\");this.state=be,this.queue=[],this.outcome=void 0,C!==$&&N(this,C)}function Ie(C,z,X){this.promise=C,typeof z==\"function\"&&(this.onFulfilled=z,this.callFulfilled=this.otherCallFulfilled),typeof X==\"function\"&&(this.onRejected=X,this.callRejected=this.otherCallRejected)}function E(C,z,X){O(function(){var ne;try{ne=z(X)}catch(Ve){return H.reject(C,Ve)}ne===C?H.reject(C,new TypeError(\"Cannot resolve promise with itself\")):H.resolve(C,ne)})}function L(C){var z=C&&C.then;if(C&&(typeof C==\"object\"||typeof C==\"function\")&&typeof z==\"function\")return function(){z.apply(C,arguments)}}function N(C,z){var X=!1;function ne(Ne){X||(X=!0,H.reject(C,Ne))}function Ve(Ne){X||(X=!0,H.resolve(C,Ne))}var pt=ee(function(){z(Ve,ne)});pt.status===\"error\"&&ne(pt.value)}function ee(C,z){var X={};try{X.value=C(z),X.status=\"success\"}catch(ne){X.status=\"error\",X.value=ne}return X}me.exports=Ce,Ce.prototype.catch=function(C){return this.then(null,C)},Ce.prototype.then=function(C,z){if(typeof C!=\"function\"&&this.state===Z||typeof z!=\"function\"&&this.state===D)return this;var X=new this.constructor($);return this.state!==be?E(X,this.state===Z?C:z,this.outcome):this.queue.push(new Ie(X,C,z)),X},Ie.prototype.callFulfilled=function(C){H.resolve(this.promise,C)},Ie.prototype.otherCallFulfilled=function(C){E(this.promise,this.onFulfilled,C)},Ie.prototype.callRejected=function(C){H.reject(this.promise,C)},Ie.prototype.otherCallRejected=function(C){E(this.promise,this.onRejected,C)},H.resolve=function(C,z){var X=ee(L,z);if(X.status===\"error\")return H.reject(C,X.value);var ne=X.value;if(ne)N(C,ne);else{C.state=Z,C.outcome=z;for(var Ve=-1,pt=C.queue.length;++Ve<pt;)C.queue[Ve].callFulfilled(z)}return C},H.reject=function(C,z){C.state=D,C.outcome=z;for(var X=-1,ne=C.queue.length;++X<ne;)C.queue[X].callRejected(z);return C},Ce.resolve=function(C){return C instanceof this?C:H.resolve(new this($),C)},Ce.reject=function(C){var z=new this($);return H.reject(z,C)},Ce.all=function(C){var z=this;if(Object.prototype.toString.call(C)!==\"[object Array]\")return this.reject(new TypeError(\"must be an array\"));var X=C.length,ne=!1;if(!X)return this.resolve([]);for(var Ve=new Array(X),pt=0,Ne=-1,ae=new this($);++Ne<X;)Me(C[Ne],Ne);return ae;function Me(Fe,j){z.resolve(Fe).then(function(ye){Ve[j]=ye,++pt!==X||ne||(ne=!0,H.resolve(ae,Ve))},function(ye){ne||(ne=!0,H.reject(ae,ye))})}},Ce.race=function(C){var z=this;if(Object.prototype.toString.call(C)!==\"[object Array]\")return this.reject(new TypeError(\"must be an array\"));var X=C.length,ne=!1;if(!X)return this.resolve([]);for(var Ve,pt=-1,Ne=new this($);++pt<X;)Ve=C[pt],z.resolve(Ve).then(function(ae){ne||(ne=!0,H.resolve(Ne,ae))},function(ae){ne||(ne=!0,H.reject(Ne,ae))});return Ne}},{1:1}],3:[function(Q,me,q){(function(O){typeof O.Promise!=\"function\"&&(O.Promise=Q(2))}).call(this,b!==void 0?b:typeof self!=\"undefined\"?self:typeof window!=\"undefined\"?window:{})},{2:2}],4:[function(Q,me,q){var O=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(T){return typeof T}:function(T){return T&&typeof Symbol==\"function\"&&T.constructor===Symbol&&T!==Symbol.prototype?\"symbol\":typeof T},$=function(){try{if(typeof indexedDB!=\"undefined\")return indexedDB;if(typeof webkitIndexedDB!=\"undefined\")return webkitIndexedDB;if(typeof mozIndexedDB!=\"undefined\")return mozIndexedDB;if(typeof OIndexedDB!=\"undefined\")return OIndexedDB;if(typeof msIndexedDB!=\"undefined\")return msIndexedDB}catch{return}}();function H(T,P){T=T||[],P=P||{};try{return new Blob(T,P)}catch(J){if(J.name!==\"TypeError\")throw J;for(var I=new(typeof BlobBuilder!=\"undefined\"?BlobBuilder:typeof MSBlobBuilder!=\"undefined\"?MSBlobBuilder:typeof MozBlobBuilder!=\"undefined\"?MozBlobBuilder:WebKitBlobBuilder),te=0;te<T.length;te+=1)I.append(T[te]);return I.getBlob(P.type)}}typeof Promise==\"undefined\"&&Q(3);var D=Promise;function Z(T,P){P&&T.then(function(I){P(null,I)},function(I){P(I)})}function be(T,P,I){typeof P==\"function\"&&T.then(P),typeof I==\"function\"&&T.catch(I)}function Ce(T){return typeof T!=\"string\"&&(console.warn(T+\" used as a key, but it is not a string.\"),T=String(T)),T}function Ie(){if(arguments.length&&typeof arguments[arguments.length-1]==\"function\")return arguments[arguments.length-1]}var E=void 0,L={},N=Object.prototype.toString;function ee(T){return typeof E==\"boolean\"?D.resolve(E):function(P){return new D(function(I){var te=P.transaction(\"local-forage-detect-blob-support\",\"readwrite\"),J=H([\"\"]);te.objectStore(\"local-forage-detect-blob-support\").put(J,\"key\"),te.onabort=function(K){K.preventDefault(),K.stopPropagation(),I(!1)},te.oncomplete=function(){var K=navigator.userAgent.match(/Chrome\\/(\\d+)/),le=navigator.userAgent.match(/Edge\\//);I(le||!K||parseInt(K[1],10)>=43)}}).catch(function(){return!1})}(T).then(function(P){return E=P})}function C(T){var P=L[T.name],I={};I.promise=new D(function(te,J){I.resolve=te,I.reject=J}),P.deferredOperations.push(I),P.dbReady?P.dbReady=P.dbReady.then(function(){return I.promise}):P.dbReady=I.promise}function z(T){var P=L[T.name].deferredOperations.pop();if(P)return P.resolve(),P.promise}function X(T,P){var I=L[T.name].deferredOperations.pop();if(I)return I.reject(P),I.promise}function ne(T,P){return new D(function(I,te){if(L[T.name]=L[T.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},T.db){if(!P)return I(T.db);C(T),T.db.close()}var J=[T.name];P&&J.push(T.version);var K=$.open.apply($,J);P&&(K.onupgradeneeded=function(le){var ve=K.result;try{ve.createObjectStore(T.storeName),le.oldVersion<=1&&ve.createObjectStore(\"local-forage-detect-blob-support\")}catch(we){if(we.name!==\"ConstraintError\")throw we;console.warn('The database \"'+T.name+'\" has been upgraded from version '+le.oldVersion+\" to version \"+le.newVersion+', but the storage \"'+T.storeName+'\" already exists.')}}),K.onerror=function(le){le.preventDefault(),te(K.error)},K.onsuccess=function(){var le=K.result;le.onversionchange=function(ve){ve.target.close()},I(le),z(T)}})}function Ve(T){return ne(T,!1)}function pt(T){return ne(T,!0)}function Ne(T,P){if(!T.db)return!0;var I=!T.db.objectStoreNames.contains(T.storeName),te=T.version<T.db.version,J=T.version>T.db.version;if(te&&(T.version!==P&&console.warn('The database \"'+T.name+`\" can't be downgraded from version `+T.db.version+\" to version \"+T.version+\".\"),T.version=T.db.version),J||I){if(I){var K=T.db.version+1;K>T.version&&(T.version=K)}return!0}return!1}function ae(T){return H([function(P){for(var I=P.length,te=new ArrayBuffer(I),J=new Uint8Array(te),K=0;K<I;K++)J[K]=P.charCodeAt(K);return te}(atob(T.data))],{type:T.type})}function Me(T){return T&&T.__local_forage_encoded_blob}function Fe(T){var P=this,I=P._initReady().then(function(){var te=L[P._dbInfo.name];if(te&&te.dbReady)return te.dbReady});return be(I,T,T),I}function j(T,P,I,te){te===void 0&&(te=1);try{var J=T.db.transaction(T.storeName,P);I(null,J)}catch(K){if(te>0&&(!T.db||K.name===\"InvalidStateError\"||K.name===\"NotFoundError\"))return D.resolve().then(function(){if(!T.db||K.name===\"NotFoundError\"&&!T.db.objectStoreNames.contains(T.storeName)&&T.version<=T.db.version)return T.db&&(T.version=T.db.version+1),pt(T)}).then(function(){return function(le){C(le);for(var ve=L[le.name],we=ve.forages,Se=0;Se<we.length;Se++){var ke=we[Se];ke._dbInfo.db&&(ke._dbInfo.db.close(),ke._dbInfo.db=null)}return le.db=null,Ve(le).then(function($e){return le.db=$e,Ne(le)?pt(le):$e}).then(function($e){le.db=ve.db=$e;for(var ct=0;ct<we.length;ct++)we[ct]._dbInfo.db=$e}).catch(function($e){throw X(le,$e),$e})}(T).then(function(){j(T,P,I,te-1)})}).catch(I);I(K)}}var ye={_driver:\"asyncStorage\",_initStorage:function(T){var P=this,I={db:null};if(T)for(var te in T)I[te]=T[te];var J=L[I.name];J||(J={forages:[],db:null,dbReady:null,deferredOperations:[]},L[I.name]=J),J.forages.push(P),P._initReady||(P._initReady=P.ready,P.ready=Fe);var K=[];function le(){return D.resolve()}for(var ve=0;ve<J.forages.length;ve++){var we=J.forages[ve];we!==P&&K.push(we._initReady().catch(le))}var Se=J.forages.slice(0);return D.all(K).then(function(){return I.db=J.db,Ve(I)}).then(function(ke){return I.db=ke,Ne(I,P._defaultConfig.version)?pt(I):ke}).then(function(ke){I.db=J.db=ke,P._dbInfo=I;for(var $e=0;$e<Se.length;$e++){var ct=Se[$e];ct!==P&&(ct._dbInfo.db=I.db,ct._dbInfo.version=I.version)}})},_support:function(){try{if(!$||!$.open)return!1;var T=typeof openDatabase!=\"undefined\"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),P=typeof fetch==\"function\"&&fetch.toString().indexOf(\"[native code\")!==-1;return(!T||P)&&typeof indexedDB!=\"undefined\"&&typeof IDBKeyRange!=\"undefined\"}catch{return!1}}(),iterate:function(T,P){var I=this,te=new D(function(J,K){I.ready().then(function(){j(I._dbInfo,\"readonly\",function(le,ve){if(le)return K(le);try{var we=ve.objectStore(I._dbInfo.storeName).openCursor(),Se=1;we.onsuccess=function(){var ke=we.result;if(ke){var $e=ke.value;Me($e)&&($e=ae($e));var ct=T($e,ke.key,Se++);ct!==void 0?J(ct):ke.continue()}else J()},we.onerror=function(){K(we.error)}}catch(ke){K(ke)}})}).catch(K)});return Z(te,P),te},getItem:function(T,P){var I=this;T=Ce(T);var te=new D(function(J,K){I.ready().then(function(){j(I._dbInfo,\"readonly\",function(le,ve){if(le)return K(le);try{var we=ve.objectStore(I._dbInfo.storeName).get(T);we.onsuccess=function(){var Se=we.result;Se===void 0&&(Se=null),Me(Se)&&(Se=ae(Se)),J(Se)},we.onerror=function(){K(we.error)}}catch(Se){K(Se)}})}).catch(K)});return Z(te,P),te},setItem:function(T,P,I){var te=this;T=Ce(T);var J=new D(function(K,le){var ve;te.ready().then(function(){return ve=te._dbInfo,N.call(P)===\"[object Blob]\"?ee(ve.db).then(function(we){return we?P:(Se=P,new D(function(ke,$e){var ct=new FileReader;ct.onerror=$e,ct.onloadend=function(Pt){var Tt=btoa(Pt.target.result||\"\");ke({__local_forage_encoded_blob:!0,data:Tt,type:Se.type})},ct.readAsBinaryString(Se)}));var Se}):P}).then(function(we){j(te._dbInfo,\"readwrite\",function(Se,ke){if(Se)return le(Se);try{var $e=ke.objectStore(te._dbInfo.storeName);we===null&&(we=void 0);var ct=$e.put(we,T);ke.oncomplete=function(){we===void 0&&(we=null),K(we)},ke.onabort=ke.onerror=function(){var Pt=ct.error?ct.error:ct.transaction.error;le(Pt)}}catch(Pt){le(Pt)}})}).catch(le)});return Z(J,I),J},removeItem:function(T,P){var I=this;T=Ce(T);var te=new D(function(J,K){I.ready().then(function(){j(I._dbInfo,\"readwrite\",function(le,ve){if(le)return K(le);try{var we=ve.objectStore(I._dbInfo.storeName).delete(T);ve.oncomplete=function(){J()},ve.onerror=function(){K(we.error)},ve.onabort=function(){var Se=we.error?we.error:we.transaction.error;K(Se)}}catch(Se){K(Se)}})}).catch(K)});return Z(te,P),te},clear:function(T){var P=this,I=new D(function(te,J){P.ready().then(function(){j(P._dbInfo,\"readwrite\",function(K,le){if(K)return J(K);try{var ve=le.objectStore(P._dbInfo.storeName).clear();le.oncomplete=function(){te()},le.onabort=le.onerror=function(){var we=ve.error?ve.error:ve.transaction.error;J(we)}}catch(we){J(we)}})}).catch(J)});return Z(I,T),I},length:function(T){var P=this,I=new D(function(te,J){P.ready().then(function(){j(P._dbInfo,\"readonly\",function(K,le){if(K)return J(K);try{var ve=le.objectStore(P._dbInfo.storeName).count();ve.onsuccess=function(){te(ve.result)},ve.onerror=function(){J(ve.error)}}catch(we){J(we)}})}).catch(J)});return Z(I,T),I},key:function(T,P){var I=this,te=new D(function(J,K){T<0?J(null):I.ready().then(function(){j(I._dbInfo,\"readonly\",function(le,ve){if(le)return K(le);try{var we=ve.objectStore(I._dbInfo.storeName),Se=!1,ke=we.openKeyCursor();ke.onsuccess=function(){var $e=ke.result;$e?T===0||Se?J($e.key):(Se=!0,$e.advance(T)):J(null)},ke.onerror=function(){K(ke.error)}}catch($e){K($e)}})}).catch(K)});return Z(te,P),te},keys:function(T){var P=this,I=new D(function(te,J){P.ready().then(function(){j(P._dbInfo,\"readonly\",function(K,le){if(K)return J(K);try{var ve=le.objectStore(P._dbInfo.storeName).openKeyCursor(),we=[];ve.onsuccess=function(){var Se=ve.result;Se?(we.push(Se.key),Se.continue()):te(we)},ve.onerror=function(){J(ve.error)}}catch(Se){J(Se)}})}).catch(J)});return Z(I,T),I},dropInstance:function(T,P){P=Ie.apply(this,arguments);var I=this.config();(T=typeof T!=\"function\"&&T||{}).name||(T.name=T.name||I.name,T.storeName=T.storeName||I.storeName);var te,J=this;if(T.name){var K=T.name===I.name&&J._dbInfo.db,le=K?D.resolve(J._dbInfo.db):Ve(T).then(function(ve){var we=L[T.name],Se=we.forages;we.db=ve;for(var ke=0;ke<Se.length;ke++)Se[ke]._dbInfo.db=ve;return ve});te=T.storeName?le.then(function(ve){if(ve.objectStoreNames.contains(T.storeName)){var we=ve.version+1;C(T);var Se=L[T.name],ke=Se.forages;ve.close();for(var $e=0;$e<ke.length;$e++){var ct=ke[$e];ct._dbInfo.db=null,ct._dbInfo.version=we}return new D(function(Pt,Tt){var un=$.open(T.name,we);un.onerror=function(wn){un.result.close(),Tt(wn)},un.onupgradeneeded=function(){un.result.deleteObjectStore(T.storeName)},un.onsuccess=function(){var wn=un.result;wn.close(),Pt(wn)}}).then(function(Pt){Se.db=Pt;for(var Tt=0;Tt<ke.length;Tt++){var un=ke[Tt];un._dbInfo.db=Pt,z(un._dbInfo)}}).catch(function(Pt){throw(X(T,Pt)||D.resolve()).catch(function(){}),Pt})}}):le.then(function(ve){C(T);var we=L[T.name],Se=we.forages;ve.close();for(var ke=0;ke<Se.length;ke++)Se[ke]._dbInfo.db=null;return new D(function($e,ct){var Pt=$.deleteDatabase(T.name);Pt.onerror=function(){var Tt=Pt.result;Tt&&Tt.close(),ct(Pt.error)},Pt.onblocked=function(){console.warn('dropInstance blocked for database \"'+T.name+'\" until all open connections are closed')},Pt.onsuccess=function(){var Tt=Pt.result;Tt&&Tt.close(),$e(Tt)}}).then(function($e){we.db=$e;for(var ct=0;ct<Se.length;ct++)z(Se[ct]._dbInfo)}).catch(function($e){throw(X(T,$e)||D.resolve()).catch(function(){}),$e})})}else te=D.reject(\"Invalid arguments\");return Z(te,P),te}},Oe=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",Le=/^~~local_forage_type~([^~]+)~/,De=9,Je=De+4,et=Object.prototype.toString;function bt(T){var P,I,te,J,K,le=.75*T.length,ve=T.length,we=0;T[T.length-1]===\"=\"&&(le--,T[T.length-2]===\"=\"&&le--);var Se=new ArrayBuffer(le),ke=new Uint8Array(Se);for(P=0;P<ve;P+=4)I=Oe.indexOf(T[P]),te=Oe.indexOf(T[P+1]),J=Oe.indexOf(T[P+2]),K=Oe.indexOf(T[P+3]),ke[we++]=I<<2|te>>4,ke[we++]=(15&te)<<4|J>>2,ke[we++]=(3&J)<<6|63&K;return Se}function _t(T){var P,I=new Uint8Array(T),te=\"\";for(P=0;P<I.length;P+=3)te+=Oe[I[P]>>2],te+=Oe[(3&I[P])<<4|I[P+1]>>4],te+=Oe[(15&I[P+1])<<2|I[P+2]>>6],te+=Oe[63&I[P+2]];return I.length%3==2?te=te.substring(0,te.length-1)+\"=\":I.length%3==1&&(te=te.substring(0,te.length-2)+\"==\"),te}var ln={serialize:function(T,P){var I=\"\";if(T&&(I=et.call(T)),T&&(I===\"[object ArrayBuffer]\"||T.buffer&&et.call(T.buffer)===\"[object ArrayBuffer]\")){var te,J=\"__lfsc__:\";T instanceof ArrayBuffer?(te=T,J+=\"arbf\"):(te=T.buffer,I===\"[object Int8Array]\"?J+=\"si08\":I===\"[object Uint8Array]\"?J+=\"ui08\":I===\"[object Uint8ClampedArray]\"?J+=\"uic8\":I===\"[object Int16Array]\"?J+=\"si16\":I===\"[object Uint16Array]\"?J+=\"ur16\":I===\"[object Int32Array]\"?J+=\"si32\":I===\"[object Uint32Array]\"?J+=\"ui32\":I===\"[object Float32Array]\"?J+=\"fl32\":I===\"[object Float64Array]\"?J+=\"fl64\":P(new Error(\"Failed to get type for BinaryArray\"))),P(J+_t(te))}else if(I===\"[object Blob]\"){var K=new FileReader;K.onload=function(){var le=\"~~local_forage_type~\"+T.type+\"~\"+_t(this.result);P(\"__lfsc__:blob\"+le)},K.readAsArrayBuffer(T)}else try{P(JSON.stringify(T))}catch(le){console.error(\"Couldn't convert value into a JSON string: \",T),P(null,le)}},deserialize:function(T){if(T.substring(0,De)!==\"__lfsc__:\")return JSON.parse(T);var P,I=T.substring(Je),te=T.substring(De,Je);if(te===\"blob\"&&Le.test(I)){var J=I.match(Le);P=J[1],I=I.substring(J[0].length)}var K=bt(I);switch(te){case\"arbf\":return K;case\"blob\":return H([K],{type:P});case\"si08\":return new Int8Array(K);case\"ui08\":return new Uint8Array(K);case\"uic8\":return new Uint8ClampedArray(K);case\"si16\":return new Int16Array(K);case\"ur16\":return new Uint16Array(K);case\"si32\":return new Int32Array(K);case\"ui32\":return new Uint32Array(K);case\"fl32\":return new Float32Array(K);case\"fl64\":return new Float64Array(K);default:throw new Error(\"Unkown type: \"+te)}},stringToBuffer:bt,bufferToString:_t};function wt(T,P,I,te){T.executeSql(\"CREATE TABLE IF NOT EXISTS \"+P.storeName+\" (id INTEGER PRIMARY KEY, key unique, value)\",[],I,te)}function Xt(T,P,I,te,J,K){T.executeSql(I,te,J,function(le,ve){ve.code===ve.SYNTAX_ERR?le.executeSql(\"SELECT name FROM sqlite_master WHERE type='table' AND name = ?\",[P.storeName],function(we,Se){Se.rows.length?K(we,ve):wt(we,P,function(){we.executeSql(I,te,J,K)},K)},K):K(le,ve)},K)}function qt(T,P,I,te){var J=this;T=Ce(T);var K=new D(function(le,ve){J.ready().then(function(){P===void 0&&(P=null);var we=P,Se=J._dbInfo;Se.serializer.serialize(P,function(ke,$e){$e?ve($e):Se.db.transaction(function(ct){Xt(ct,Se,\"INSERT OR REPLACE INTO \"+Se.storeName+\" (key, value) VALUES (?, ?)\",[T,ke],function(){le(we)},function(Pt,Tt){ve(Tt)})},function(ct){if(ct.code===ct.QUOTA_ERR){if(te>0)return void le(qt.apply(J,[T,we,I,te-1]));ve(ct)}})})}).catch(ve)});return Z(K,I),K}function en(T){return new D(function(P,I){T.transaction(function(te){te.executeSql(\"SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'\",[],function(J,K){for(var le=[],ve=0;ve<K.rows.length;ve++)le.push(K.rows.item(ve).name);P({db:T,storeNames:le})},function(J,K){I(K)})},function(te){I(te)})})}var Bt={_driver:\"webSQLStorage\",_initStorage:function(T){var P=this,I={db:null};if(T)for(var te in T)I[te]=typeof T[te]!=\"string\"?T[te].toString():T[te];var J=new D(function(K,le){try{I.db=openDatabase(I.name,String(I.version),I.description,I.size)}catch(ve){return le(ve)}I.db.transaction(function(ve){wt(ve,I,function(){P._dbInfo=I,K()},function(we,Se){le(Se)})},le)});return I.serializer=ln,J},_support:typeof openDatabase==\"function\",iterate:function(T,P){var I=this,te=new D(function(J,K){I.ready().then(function(){var le=I._dbInfo;le.db.transaction(function(ve){Xt(ve,le,\"SELECT * FROM \"+le.storeName,[],function(we,Se){for(var ke=Se.rows,$e=ke.length,ct=0;ct<$e;ct++){var Pt=ke.item(ct),Tt=Pt.value;if(Tt&&(Tt=le.serializer.deserialize(Tt)),(Tt=T(Tt,Pt.key,ct+1))!==void 0)return void J(Tt)}J()},function(we,Se){K(Se)})})}).catch(K)});return Z(te,P),te},getItem:function(T,P){var I=this;T=Ce(T);var te=new D(function(J,K){I.ready().then(function(){var le=I._dbInfo;le.db.transaction(function(ve){Xt(ve,le,\"SELECT * FROM \"+le.storeName+\" WHERE key = ? LIMIT 1\",[T],function(we,Se){var ke=Se.rows.length?Se.rows.item(0).value:null;ke&&(ke=le.serializer.deserialize(ke)),J(ke)},function(we,Se){K(Se)})})}).catch(K)});return Z(te,P),te},setItem:function(T,P,I){return qt.apply(this,[T,P,I,1])},removeItem:function(T,P){var I=this;T=Ce(T);var te=new D(function(J,K){I.ready().then(function(){var le=I._dbInfo;le.db.transaction(function(ve){Xt(ve,le,\"DELETE FROM \"+le.storeName+\" WHERE key = ?\",[T],function(){J()},function(we,Se){K(Se)})})}).catch(K)});return Z(te,P),te},clear:function(T){var P=this,I=new D(function(te,J){P.ready().then(function(){var K=P._dbInfo;K.db.transaction(function(le){Xt(le,K,\"DELETE FROM \"+K.storeName,[],function(){te()},function(ve,we){J(we)})})}).catch(J)});return Z(I,T),I},length:function(T){var P=this,I=new D(function(te,J){P.ready().then(function(){var K=P._dbInfo;K.db.transaction(function(le){Xt(le,K,\"SELECT COUNT(key) as c FROM \"+K.storeName,[],function(ve,we){var Se=we.rows.item(0).c;te(Se)},function(ve,we){J(we)})})}).catch(J)});return Z(I,T),I},key:function(T,P){var I=this,te=new D(function(J,K){I.ready().then(function(){var le=I._dbInfo;le.db.transaction(function(ve){Xt(ve,le,\"SELECT key FROM \"+le.storeName+\" WHERE id = ? LIMIT 1\",[T+1],function(we,Se){var ke=Se.rows.length?Se.rows.item(0).key:null;J(ke)},function(we,Se){K(Se)})})}).catch(K)});return Z(te,P),te},keys:function(T){var P=this,I=new D(function(te,J){P.ready().then(function(){var K=P._dbInfo;K.db.transaction(function(le){Xt(le,K,\"SELECT key FROM \"+K.storeName,[],function(ve,we){for(var Se=[],ke=0;ke<we.rows.length;ke++)Se.push(we.rows.item(ke).key);te(Se)},function(ve,we){J(we)})})}).catch(J)});return Z(I,T),I},dropInstance:function(T,P){P=Ie.apply(this,arguments);var I=this.config();(T=typeof T!=\"function\"&&T||{}).name||(T.name=T.name||I.name,T.storeName=T.storeName||I.storeName);var te,J=this;return Z(te=T.name?new D(function(K){var le;le=T.name===I.name?J._dbInfo.db:openDatabase(T.name,\"\",\"\",0),T.storeName?K({db:le,storeNames:[T.storeName]}):K(en(le))}).then(function(K){return new D(function(le,ve){K.db.transaction(function(we){function Se(Pt){return new D(function(Tt,un){we.executeSql(\"DROP TABLE IF EXISTS \"+Pt,[],function(){Tt()},function(wn,Di){un(Di)})})}for(var ke=[],$e=0,ct=K.storeNames.length;$e<ct;$e++)ke.push(Se(K.storeNames[$e]));D.all(ke).then(function(){le()}).catch(function(Pt){ve(Pt)})},function(we){ve(we)})})}):D.reject(\"Invalid arguments\"),P),te}};function Fn(T,P){var I=T.name+\"/\";return T.storeName!==P.storeName&&(I+=T.storeName+\"/\"),I}function Bn(){return!function(){try{return localStorage.setItem(\"_localforage_support_test\",!0),localStorage.removeItem(\"_localforage_support_test\"),!1}catch{return!0}}()||localStorage.length>0}var Mn={_driver:\"localStorageWrapper\",_initStorage:function(T){var P={};if(T)for(var I in T)P[I]=T[I];return P.keyPrefix=Fn(T,this._defaultConfig),Bn()?(this._dbInfo=P,P.serializer=ln,D.resolve()):D.reject()},_support:function(){try{return typeof localStorage!=\"undefined\"&&\"setItem\"in localStorage&&!!localStorage.setItem}catch{return!1}}(),iterate:function(T,P){var I=this,te=I.ready().then(function(){for(var J=I._dbInfo,K=J.keyPrefix,le=K.length,ve=localStorage.length,we=1,Se=0;Se<ve;Se++){var ke=localStorage.key(Se);if(ke.indexOf(K)===0){var $e=localStorage.getItem(ke);if($e&&($e=J.serializer.deserialize($e)),($e=T($e,ke.substring(le),we++))!==void 0)return $e}}});return Z(te,P),te},getItem:function(T,P){var I=this;T=Ce(T);var te=I.ready().then(function(){var J=I._dbInfo,K=localStorage.getItem(J.keyPrefix+T);return K&&(K=J.serializer.deserialize(K)),K});return Z(te,P),te},setItem:function(T,P,I){var te=this;T=Ce(T);var J=te.ready().then(function(){P===void 0&&(P=null);var K=P;return new D(function(le,ve){var we=te._dbInfo;we.serializer.serialize(P,function(Se,ke){if(ke)ve(ke);else try{localStorage.setItem(we.keyPrefix+T,Se),le(K)}catch($e){$e.name!==\"QuotaExceededError\"&&$e.name!==\"NS_ERROR_DOM_QUOTA_REACHED\"||ve($e),ve($e)}})})});return Z(J,I),J},removeItem:function(T,P){var I=this;T=Ce(T);var te=I.ready().then(function(){var J=I._dbInfo;localStorage.removeItem(J.keyPrefix+T)});return Z(te,P),te},clear:function(T){var P=this,I=P.ready().then(function(){for(var te=P._dbInfo.keyPrefix,J=localStorage.length-1;J>=0;J--){var K=localStorage.key(J);K.indexOf(te)===0&&localStorage.removeItem(K)}});return Z(I,T),I},length:function(T){var P=this.keys().then(function(I){return I.length});return Z(P,T),P},key:function(T,P){var I=this,te=I.ready().then(function(){var J,K=I._dbInfo;try{J=localStorage.key(T)}catch{J=null}return J&&(J=J.substring(K.keyPrefix.length)),J});return Z(te,P),te},keys:function(T){var P=this,I=P.ready().then(function(){for(var te=P._dbInfo,J=localStorage.length,K=[],le=0;le<J;le++){var ve=localStorage.key(le);ve.indexOf(te.keyPrefix)===0&&K.push(ve.substring(te.keyPrefix.length))}return K});return Z(I,T),I},dropInstance:function(T,P){if(P=Ie.apply(this,arguments),!(T=typeof T!=\"function\"&&T||{}).name){var I=this.config();T.name=T.name||I.name,T.storeName=T.storeName||I.storeName}var te,J=this;return Z(te=T.name?new D(function(K){T.storeName?K(Fn(T,J._defaultConfig)):K(T.name+\"/\")}).then(function(K){for(var le=localStorage.length-1;le>=0;le--){var ve=localStorage.key(le);ve.indexOf(K)===0&&localStorage.removeItem(ve)}}):D.reject(\"Invalid arguments\"),P),te}},qn=function(T,P){for(var I,te,J=T.length,K=0;K<J;){if((I=T[K])===(te=P)||typeof I==\"number\"&&typeof te==\"number\"&&isNaN(I)&&isNaN(te))return!0;K++}return!1},An=Array.isArray||function(T){return Object.prototype.toString.call(T)===\"[object Array]\"},In={},Ai={},Rn={INDEXEDDB:ye,WEBSQL:Bt,LOCALSTORAGE:Mn},Ni=[Rn.INDEXEDDB._driver,Rn.WEBSQL._driver,Rn.LOCALSTORAGE._driver],mi=[\"dropInstance\"],co=[\"clear\",\"getItem\",\"iterate\",\"key\",\"keys\",\"length\",\"removeItem\",\"setItem\"].concat(mi),ka={description:\"\",driver:Ni.slice(),name:\"localforage\",size:4980736,storeName:\"keyvaluepairs\",version:1};function Po(T,P){T[P]=function(){var I=arguments;return T.ready().then(function(){return T[P].apply(T,I)})}}function po(){for(var T=1;T<arguments.length;T++){var P=arguments[T];if(P)for(var I in P)P.hasOwnProperty(I)&&(An(P[I])?arguments[0][I]=P[I].slice():arguments[0][I]=P[I])}return arguments[0]}var Ws=new(function(){function T(P){for(var I in function(K,le){if(!(K instanceof le))throw new TypeError(\"Cannot call a class as a function\")}(this,T),Rn)if(Rn.hasOwnProperty(I)){var te=Rn[I],J=te._driver;this[I]=J,In[J]||this.defineDriver(te)}this._defaultConfig=po({},ka),this._config=po({},this._defaultConfig,P),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return T.prototype.config=function(P){if((P===void 0?\"undefined\":O(P))===\"object\"){if(this._ready)return new Error(\"Can't call config() after localforage has been used.\");for(var I in P){if(I===\"storeName\"&&(P[I]=P[I].replace(/\\W/g,\"_\")),I===\"version\"&&typeof P[I]!=\"number\")return new Error(\"Database version must be a number.\");this._config[I]=P[I]}return!(\"driver\"in P)||!P.driver||this.setDriver(this._config.driver)}return typeof P==\"string\"?this._config[P]:this._config},T.prototype.defineDriver=function(P,I,te){var J=new D(function(K,le){try{var ve=P._driver,we=new Error(\"Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver\");if(!P._driver)return void le(we);for(var Se=co.concat(\"_initStorage\"),ke=0,$e=Se.length;ke<$e;ke++){var ct=Se[ke];if((!qn(mi,ct)||P[ct])&&typeof P[ct]!=\"function\")return void le(we)}(function(){for(var Tt=function(Ua){return function(){var fo=new Error(\"Method \"+Ua+\" is not implemented by the current driver\"),Io=D.reject(fo);return Z(Io,arguments[arguments.length-1]),Io}},un=0,wn=mi.length;un<wn;un++){var Di=mi[un];P[Di]||(P[Di]=Tt(Di))}})();var Pt=function(Tt){In[ve]&&console.info(\"Redefining LocalForage driver: \"+ve),In[ve]=P,Ai[ve]=Tt,K()};\"_support\"in P?P._support&&typeof P._support==\"function\"?P._support().then(Pt,le):Pt(!!P._support):Pt(!0)}catch(Tt){le(Tt)}});return be(J,I,te),J},T.prototype.driver=function(){return this._driver||null},T.prototype.getDriver=function(P,I,te){var J=In[P]?D.resolve(In[P]):D.reject(new Error(\"Driver not found.\"));return be(J,I,te),J},T.prototype.getSerializer=function(P){var I=D.resolve(ln);return be(I,P),I},T.prototype.ready=function(P){var I=this,te=I._driverSet.then(function(){return I._ready===null&&(I._ready=I._initDriver()),I._ready});return be(te,P,P),te},T.prototype.setDriver=function(P,I,te){var J=this;An(P)||(P=[P]);var K=this._getSupportedDrivers(P);function le(){J._config.driver=J.driver()}function ve(Se){return J._extend(Se),le(),J._ready=J._initStorage(J._config),J._ready}var we=this._driverSet!==null?this._driverSet.catch(function(){return D.resolve()}):D.resolve();return this._driverSet=we.then(function(){var Se=K[0];return J._dbInfo=null,J._ready=null,J.getDriver(Se).then(function(ke){J._driver=ke._driver,le(),J._wrapLibraryMethodsWithReady(),J._initDriver=function($e){return function(){var ct=0;return function Pt(){for(;ct<$e.length;){var Tt=$e[ct];return ct++,J._dbInfo=null,J._ready=null,J.getDriver(Tt).then(ve).catch(Pt)}le();var un=new Error(\"No available storage method found.\");return J._driverSet=D.reject(un),J._driverSet}()}}(K)})}).catch(function(){le();var Se=new Error(\"No available storage method found.\");return J._driverSet=D.reject(Se),J._driverSet}),be(this._driverSet,I,te),this._driverSet},T.prototype.supports=function(P){return!!Ai[P]},T.prototype._extend=function(P){po(this,P)},T.prototype._getSupportedDrivers=function(P){for(var I=[],te=0,J=P.length;te<J;te++){var K=P[te];this.supports(K)&&I.push(K)}return I},T.prototype._wrapLibraryMethodsWithReady=function(){for(var P=0,I=co.length;P<I;P++)Po(this,co[P])},T.prototype.createInstance=function(P){return new T(P)},T}());me.exports=Ws},{3:3}]},{},[4])(4)}).call(this,v(4))},function(S,M,v){var b=v(63);S.exports=function(Q,me){me=me||{};var q=new b,O=me.inPlace||!1,$=Q.map(function(D){return O?D:{width:D.width,height:D.height,item:D}});$=$.sort(function(D,Z){return Z.width*Z.height-D.width*D.height}),q.fit($);var H={width:$.reduce(function(D,Z){return Math.max(D,Z.x+Z.width)},0),height:$.reduce(function(D,Z){return Math.max(D,Z.y+Z.height)},0)};return O||(H.items=$),H}},function(S,M){S.exports=function(v){return v.webpackPolyfill||(v.deprecate=function(){},v.paths=[],v.children||(v.children=[]),Object.defineProperty(v,\"loaded\",{enumerable:!0,get:function(){return v.l}}),Object.defineProperty(v,\"id\",{enumerable:!0,get:function(){return v.i}}),v.webpackPolyfill=1),v}},function(S,M,v){var b=Object.prototype.hasOwnProperty,Q=\"~\";function me(){}function q(D,Z,be){this.fn=D,this.context=Z,this.once=be||!1}function O(D,Z,be,Ce,Ie){if(typeof be!=\"function\")throw new TypeError(\"The listener must be a function\");var E=new q(be,Ce||D,Ie),L=Q?Q+Z:Z;return D._events[L]?D._events[L].fn?D._events[L]=[D._events[L],E]:D._events[L].push(E):(D._events[L]=E,D._eventsCount++),D}function $(D,Z){--D._eventsCount==0?D._events=new me:delete D._events[Z]}function H(){this._events=new me,this._eventsCount=0}Object.create&&(me.prototype=Object.create(null),new me().__proto__||(Q=!1)),H.prototype.eventNames=function(){var D,Z,be=[];if(this._eventsCount===0)return be;for(Z in D=this._events)b.call(D,Z)&&be.push(Q?Z.slice(1):Z);return Object.getOwnPropertySymbols?be.concat(Object.getOwnPropertySymbols(D)):be},H.prototype.listeners=function(D){var Z=Q?Q+D:D,be=this._events[Z];if(!be)return[];if(be.fn)return[be.fn];for(var Ce=0,Ie=be.length,E=new Array(Ie);Ce<Ie;Ce++)E[Ce]=be[Ce].fn;return E},H.prototype.listenerCount=function(D){var Z=Q?Q+D:D,be=this._events[Z];return be?be.fn?1:be.length:0},H.prototype.emit=function(D,Z,be,Ce,Ie,E){var L=Q?Q+D:D;if(!this._events[L])return!1;var N,ee,C=this._events[L],z=arguments.length;if(C.fn){switch(C.once&&this.removeListener(D,C.fn,void 0,!0),z){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,Z),!0;case 3:return C.fn.call(C.context,Z,be),!0;case 4:return C.fn.call(C.context,Z,be,Ce),!0;case 5:return C.fn.call(C.context,Z,be,Ce,Ie),!0;case 6:return C.fn.call(C.context,Z,be,Ce,Ie,E),!0}for(ee=1,N=new Array(z-1);ee<z;ee++)N[ee-1]=arguments[ee];C.fn.apply(C.context,N)}else{var X,ne=C.length;for(ee=0;ee<ne;ee++)switch(C[ee].once&&this.removeListener(D,C[ee].fn,void 0,!0),z){case 1:C[ee].fn.call(C[ee].context);break;case 2:C[ee].fn.call(C[ee].context,Z);break;case 3:C[ee].fn.call(C[ee].context,Z,be);break;case 4:C[ee].fn.call(C[ee].context,Z,be,Ce);break;default:if(!N)for(X=1,N=new Array(z-1);X<z;X++)N[X-1]=arguments[X];C[ee].fn.apply(C[ee].context,N)}}return!0},H.prototype.on=function(D,Z,be){return O(this,D,Z,be,!1)},H.prototype.once=function(D,Z,be){return O(this,D,Z,be,!0)},H.prototype.removeListener=function(D,Z,be,Ce){var Ie=Q?Q+D:D;if(!this._events[Ie])return this;if(!Z)return $(this,Ie),this;var E=this._events[Ie];if(E.fn)E.fn!==Z||Ce&&!E.once||be&&E.context!==be||$(this,Ie);else{for(var L=0,N=[],ee=E.length;L<ee;L++)(E[L].fn!==Z||Ce&&!E[L].once||be&&E[L].context!==be)&&N.push(E[L]);N.length?this._events[Ie]=N.length===1?N[0]:N:$(this,Ie)}return this},H.prototype.removeAllListeners=function(D){var Z;return D?(Z=Q?Q+D:D,this._events[Z]&&$(this,Z)):(this._events=new me,this._eventsCount=0),this},H.prototype.off=H.prototype.removeListener,H.prototype.addListener=H.prototype.on,H.prefixed=Q,H.EventEmitter=H,S.exports=H},function(S,M,v){function b(j,ye,Oe){Oe=Oe||2;var Le,De,Je,et,bt,_t,ln,wt=ye&&ye.length,Xt=wt?ye[0]*Oe:j.length,qt=Q(j,0,Xt,Oe,!0),en=[];if(!qt||qt.next===qt.prev)return en;if(wt&&(qt=function(Fn,Bn,Mn,qn){var An,In,Ai,Rn,Ni,mi=[];for(An=0,In=Bn.length;An<In;An++)Ai=Bn[An]*qn,Rn=An<In-1?Bn[An+1]*qn:Fn.length,(Ni=Q(Fn,Ai,Rn,qn,!1))===Ni.next&&(Ni.steiner=!0),mi.push(E(Ni));for(mi.sort(Z),An=0;An<mi.length;An++)Mn=me(Mn=be(mi[An],Mn),Mn.next);return Mn}(j,ye,qt,Oe)),j.length>80*Oe){Le=Je=j[0],De=et=j[1];for(var Bt=Oe;Bt<Xt;Bt+=Oe)(bt=j[Bt])<Le&&(Le=bt),(_t=j[Bt+1])<De&&(De=_t),bt>Je&&(Je=bt),_t>et&&(et=_t);ln=(ln=Math.max(Je-Le,et-De))!==0?1/ln:0}return q(qt,en,Oe,Le,De,ln),en}function Q(j,ye,Oe,Le,De){var Je,et;if(De===Fe(j,ye,Oe,Le)>0)for(Je=ye;Je<Oe;Je+=Le)et=Ne(Je,j[Je],j[Je+1],et);else for(Je=Oe-Le;Je>=ye;Je-=Le)et=Ne(Je,j[Je],j[Je+1],et);return et&&C(et,et.next)&&(ae(et),et=et.next),et}function me(j,ye){if(!j)return j;ye||(ye=j);var Oe,Le=j;do if(Oe=!1,Le.steiner||!C(Le,Le.next)&&ee(Le.prev,Le,Le.next)!==0)Le=Le.next;else{if(ae(Le),(Le=ye=Le.prev)===Le.next)break;Oe=!0}while(Oe||Le!==ye);return ye}function q(j,ye,Oe,Le,De,Je,et){if(j){!et&&Je&&function(wt,Xt,qt,en){var Bt=wt;do Bt.z===null&&(Bt.z=Ie(Bt.x,Bt.y,Xt,qt,en)),Bt.prevZ=Bt.prev,Bt.nextZ=Bt.next,Bt=Bt.next;while(Bt!==wt);Bt.prevZ.nextZ=null,Bt.prevZ=null,function(Fn){var Bn,Mn,qn,An,In,Ai,Rn,Ni,mi=1;do{for(Mn=Fn,Fn=null,In=null,Ai=0;Mn;){for(Ai++,qn=Mn,Rn=0,Bn=0;Bn<mi&&(Rn++,qn=qn.nextZ);Bn++);for(Ni=mi;Rn>0||Ni>0&&qn;)Rn!==0&&(Ni===0||!qn||Mn.z<=qn.z)?(An=Mn,Mn=Mn.nextZ,Rn--):(An=qn,qn=qn.nextZ,Ni--),In?In.nextZ=An:Fn=An,An.prevZ=In,In=An;Mn=qn}In.nextZ=null,mi*=2}while(Ai>1)}(Bt)}(j,Le,De,Je);for(var bt,_t,ln=j;j.prev!==j.next;)if(bt=j.prev,_t=j.next,Je?$(j,Le,De,Je):O(j))ye.push(bt.i/Oe),ye.push(j.i/Oe),ye.push(_t.i/Oe),ae(j),j=_t.next,ln=_t.next;else if((j=_t)===ln){et?et===1?q(j=H(me(j),ye,Oe),ye,Oe,Le,De,Je,2):et===2&&D(j,ye,Oe,Le,De,Je):q(me(j),ye,Oe,Le,De,Je,1);break}}}function O(j){var ye=j.prev,Oe=j,Le=j.next;if(ee(ye,Oe,Le)>=0)return!1;for(var De=j.next.next;De!==j.prev;){if(L(ye.x,ye.y,Oe.x,Oe.y,Le.x,Le.y,De.x,De.y)&&ee(De.prev,De,De.next)>=0)return!1;De=De.next}return!0}function $(j,ye,Oe,Le){var De=j.prev,Je=j,et=j.next;if(ee(De,Je,et)>=0)return!1;for(var bt=De.x<Je.x?De.x<et.x?De.x:et.x:Je.x<et.x?Je.x:et.x,_t=De.y<Je.y?De.y<et.y?De.y:et.y:Je.y<et.y?Je.y:et.y,ln=De.x>Je.x?De.x>et.x?De.x:et.x:Je.x>et.x?Je.x:et.x,wt=De.y>Je.y?De.y>et.y?De.y:et.y:Je.y>et.y?Je.y:et.y,Xt=Ie(bt,_t,ye,Oe,Le),qt=Ie(ln,wt,ye,Oe,Le),en=j.prevZ,Bt=j.nextZ;en&&en.z>=Xt&&Bt&&Bt.z<=qt;){if(en!==j.prev&&en!==j.next&&L(De.x,De.y,Je.x,Je.y,et.x,et.y,en.x,en.y)&&ee(en.prev,en,en.next)>=0||(en=en.prevZ,Bt!==j.prev&&Bt!==j.next&&L(De.x,De.y,Je.x,Je.y,et.x,et.y,Bt.x,Bt.y)&&ee(Bt.prev,Bt,Bt.next)>=0))return!1;Bt=Bt.nextZ}for(;en&&en.z>=Xt;){if(en!==j.prev&&en!==j.next&&L(De.x,De.y,Je.x,Je.y,et.x,et.y,en.x,en.y)&&ee(en.prev,en,en.next)>=0)return!1;en=en.prevZ}for(;Bt&&Bt.z<=qt;){if(Bt!==j.prev&&Bt!==j.next&&L(De.x,De.y,Je.x,Je.y,et.x,et.y,Bt.x,Bt.y)&&ee(Bt.prev,Bt,Bt.next)>=0)return!1;Bt=Bt.nextZ}return!0}function H(j,ye,Oe){var Le=j;do{var De=Le.prev,Je=Le.next.next;!C(De,Je)&&z(De,Le,Le.next,Je)&&Ve(De,Je)&&Ve(Je,De)&&(ye.push(De.i/Oe),ye.push(Le.i/Oe),ye.push(Je.i/Oe),ae(Le),ae(Le.next),Le=j=Je),Le=Le.next}while(Le!==j);return me(Le)}function D(j,ye,Oe,Le,De,Je){var et=j;do{for(var bt=et.next.next;bt!==et.prev;){if(et.i!==bt.i&&N(et,bt)){var _t=pt(et,bt);return et=me(et,et.next),_t=me(_t,_t.next),q(et,ye,Oe,Le,De,Je),void q(_t,ye,Oe,Le,De,Je)}bt=bt.next}et=et.next}while(et!==j)}function Z(j,ye){return j.x-ye.x}function be(j,ye){var Oe=function(Je,et){var bt,_t=et,ln=Je.x,wt=Je.y,Xt=-1/0;do{if(wt<=_t.y&&wt>=_t.next.y&&_t.next.y!==_t.y){var qt=_t.x+(wt-_t.y)*(_t.next.x-_t.x)/(_t.next.y-_t.y);if(qt<=ln&&qt>Xt){if(Xt=qt,qt===ln){if(wt===_t.y)return _t;if(wt===_t.next.y)return _t.next}bt=_t.x<_t.next.x?_t:_t.next}}_t=_t.next}while(_t!==et);if(!bt)return null;if(ln===Xt)return bt;var en,Bt=bt,Fn=bt.x,Bn=bt.y,Mn=1/0;_t=bt;do ln>=_t.x&&_t.x>=Fn&&ln!==_t.x&&L(wt<Bn?ln:Xt,wt,Fn,Bn,wt<Bn?Xt:ln,wt,_t.x,_t.y)&&(en=Math.abs(wt-_t.y)/(ln-_t.x),Ve(_t,Je)&&(en<Mn||en===Mn&&(_t.x>bt.x||_t.x===bt.x&&Ce(bt,_t)))&&(bt=_t,Mn=en)),_t=_t.next;while(_t!==Bt);return bt}(j,ye);if(!Oe)return ye;var Le=pt(Oe,j),De=me(Oe,Oe.next);return me(Le,Le.next),ye===Oe?De:ye}function Ce(j,ye){return ee(j.prev,j,ye.prev)<0&&ee(ye.next,j,j.next)<0}function Ie(j,ye,Oe,Le,De){return(j=1431655765&((j=858993459&((j=252645135&((j=16711935&((j=32767*(j-Oe)*De)|j<<8))|j<<4))|j<<2))|j<<1))|(ye=1431655765&((ye=858993459&((ye=252645135&((ye=16711935&((ye=32767*(ye-Le)*De)|ye<<8))|ye<<4))|ye<<2))|ye<<1))<<1}function E(j){var ye=j,Oe=j;do(ye.x<Oe.x||ye.x===Oe.x&&ye.y<Oe.y)&&(Oe=ye),ye=ye.next;while(ye!==j);return Oe}function L(j,ye,Oe,Le,De,Je,et,bt){return(De-et)*(ye-bt)-(j-et)*(Je-bt)>=0&&(j-et)*(Le-bt)-(Oe-et)*(ye-bt)>=0&&(Oe-et)*(Je-bt)-(De-et)*(Le-bt)>=0}function N(j,ye){return j.next.i!==ye.i&&j.prev.i!==ye.i&&!function(Oe,Le){var De=Oe;do{if(De.i!==Oe.i&&De.next.i!==Oe.i&&De.i!==Le.i&&De.next.i!==Le.i&&z(De,De.next,Oe,Le))return!0;De=De.next}while(De!==Oe);return!1}(j,ye)&&(Ve(j,ye)&&Ve(ye,j)&&function(Oe,Le){var De=Oe,Je=!1,et=(Oe.x+Le.x)/2,bt=(Oe.y+Le.y)/2;do De.y>bt!=De.next.y>bt&&De.next.y!==De.y&&et<(De.next.x-De.x)*(bt-De.y)/(De.next.y-De.y)+De.x&&(Je=!Je),De=De.next;while(De!==Oe);return Je}(j,ye)&&(ee(j.prev,j,ye.prev)||ee(j,ye.prev,ye))||C(j,ye)&&ee(j.prev,j,j.next)>0&&ee(ye.prev,ye,ye.next)>0)}function ee(j,ye,Oe){return(ye.y-j.y)*(Oe.x-ye.x)-(ye.x-j.x)*(Oe.y-ye.y)}function C(j,ye){return j.x===ye.x&&j.y===ye.y}function z(j,ye,Oe,Le){var De=ne(ee(j,ye,Oe)),Je=ne(ee(j,ye,Le)),et=ne(ee(Oe,Le,j)),bt=ne(ee(Oe,Le,ye));return De!==Je&&et!==bt||!(De!==0||!X(j,Oe,ye))||!(Je!==0||!X(j,Le,ye))||!(et!==0||!X(Oe,j,Le))||!(bt!==0||!X(Oe,ye,Le))}function X(j,ye,Oe){return ye.x<=Math.max(j.x,Oe.x)&&ye.x>=Math.min(j.x,Oe.x)&&ye.y<=Math.max(j.y,Oe.y)&&ye.y>=Math.min(j.y,Oe.y)}function ne(j){return j>0?1:j<0?-1:0}function Ve(j,ye){return ee(j.prev,j,j.next)<0?ee(j,ye,j.next)>=0&&ee(j,j.prev,ye)>=0:ee(j,ye,j.prev)<0||ee(j,j.next,ye)<0}function pt(j,ye){var Oe=new Me(j.i,j.x,j.y),Le=new Me(ye.i,ye.x,ye.y),De=j.next,Je=ye.prev;return j.next=ye,ye.prev=j,Oe.next=De,De.prev=Oe,Le.next=Oe,Oe.prev=Le,Je.next=Le,Le.prev=Je,Le}function Ne(j,ye,Oe,Le){var De=new Me(j,ye,Oe);return Le?(De.next=Le.next,De.prev=Le,Le.next.prev=De,Le.next=De):(De.prev=De,De.next=De),De}function ae(j){j.next.prev=j.prev,j.prev.next=j.next,j.prevZ&&(j.prevZ.nextZ=j.nextZ),j.nextZ&&(j.nextZ.prevZ=j.prevZ)}function Me(j,ye,Oe){this.i=j,this.x=ye,this.y=Oe,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Fe(j,ye,Oe,Le){for(var De=0,Je=ye,et=Oe-Le;Je<Oe;Je+=Le)De+=(j[et]-j[Je])*(j[Je+1]+j[et+1]),et=Je;return De}S.exports=b,S.exports.default=b,b.deviation=function(j,ye,Oe,Le){var De=ye&&ye.length,Je=De?ye[0]*Oe:j.length,et=Math.abs(Fe(j,0,Je,Oe));if(De)for(var bt=0,_t=ye.length;bt<_t;bt++){var ln=ye[bt]*Oe,wt=bt<_t-1?ye[bt+1]*Oe:j.length;et-=Math.abs(Fe(j,ln,wt,Oe))}var Xt=0;for(bt=0;bt<Le.length;bt+=3){var qt=Le[bt]*Oe,en=Le[bt+1]*Oe,Bt=Le[bt+2]*Oe;Xt+=Math.abs((j[qt]-j[Bt])*(j[en+1]-j[qt+1])-(j[qt]-j[en])*(j[Bt+1]-j[qt+1]))}return et===0&&Xt===0?0:Math.abs((Xt-et)/et)},b.flatten=function(j){for(var ye=j[0][0].length,Oe={vertices:[],holes:[],dimensions:ye},Le=0,De=0;De<j.length;De++){for(var Je=0;Je<j[De].length;Je++)for(var et=0;et<ye;et++)Oe.vertices.push(j[De][Je][et]);De>0&&(Le+=j[De-1].length,Oe.holes.push(Le))}return Oe}},function(S,M){S.exports=`varying vec2 vUv;\nvoid main() {\n\tvUv = uv;\n\tgl_Position = (projectionMatrix * modelViewMatrix) * vec4(position, 1.0);\n}\n`},function(S,M){S.exports=`vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform float lines[26];\nvarying vec2 vUv;\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tfloat middleAlpha = 0.0;\n\tfloat endAlpha = 0.0;\n\tfloat headLength = 0.0;\n\tif (timePercent < 0.5) {\n\t\tmiddleAlpha = 1.0;\n\t\tendAlpha = 1.0 - (timePercent / 0.5);\n\t}\n\telse {\n\t\tmiddleAlpha = 1.0 - ((timePercent - 0.5) / 0.5);\n\t\tendAlpha = 0.0;\n\t}\n\tfor (int i = 0; i < 26; i++) {\n\t\tfloat halfDis = lines[i] / 2.0;\n\t\tfloat middleX = headLength + halfDis;\n\t\theadLength += lines[i];\n\t\tif (abs(vUv.x - middleX) <= halfDis) {\n\t\t\tsrcColor.a = endAlpha + (((halfDis - abs(vUv.x - middleX)) / halfDis) * (middleAlpha - endAlpha));\n\t\t\tgl_FragColor = blendSrcOver(srcColor, distColor);\n\t\t\treturn ;\n\t\t}\n\t}\n\tgl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\n}\n`},function(S,M){S.exports=`vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform float width;\nuniform float height;\nvarying vec2 vUv;\nvec2 transform(vec2 uv) {\n\tuv.y = (uv.y * height) / width;\n\treturn uv - vec2(0.5, (0.5 * height) / width);\n}\nvoid main() {\n\tfloat maxR;\n\tfloat ringR;\n\tfloat radiusMin;\n\tfloat radiusMax;\n\tfloat dist;\n\tvec2 uv = vec2(vUv.x, vUv.y);\n\tmaxR = length(transform(vec2(1.0, 1.0)));\n\tringR = 1.0 / 6.0;\n\tradiusMin = timePercent * maxR;\n\tradiusMax = radiusMin + ringR;\n\tdist = length(transform(uv));\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tif (dist < radiusMin) {\n\t\tsrcColor.a = 0.0;\n\t}\n\telse if ((dist >= radiusMin) && (dist <= radiusMax)) {\n\t\tsrcColor.a = (dist - radiusMin) / ringR;\n\t}\n\telse {\n\t\tsrcColor.a = 1.0;\n\t}\n\tif (timePercent >= 1.0) {\n\t\tsrcColor.a = 0.0;\n\t}\n\telse if (timePercent == 0.0) {\n\t\tsrcColor.a = 1.0;\n\t}\n\tgl_FragColor = blendSrcOver(srcColor, distColor);\n}\n`},function(S,M){S.exports=`vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform float width;\nuniform float height;\nvarying vec2 vUv;\nvec2 transform(vec2 uv) {\n\tuv.y = (uv.y * height) / width;\n\treturn uv - vec2(0.5, (0.5 * height) / width);\n}\nvec2 offset(float progress[4], float band, float amp, float radius) {\n\tvec2 tc = vUv.xy;\n\tvec2 uv = vec2(0.0, 0.0);\n\tvec2 p;\n\tfloat len;\n\tvec2 uv_offset;\n\tfloat wave_width = band * radius;\n\tfor (int i = 0; i < 4; i += 1) {\n\t\tif (progress[i] == -1.0) {\n\t\t\tcontinue;\n\t\t}\n\t\tp = tc - vec2(0.5, 0.5);\n\t\tp.x = (p.x * width) / height;\n\t\tlen = length(p);\n\t\tfloat current_progress = progress[i];\n\t\tfloat current_radius = radius * current_progress;\n\t\tfloat damp_factor = 1.0;\n\t\tif (current_progress > .5) {\n\t\t\tdamp_factor = (1.0 - current_progress) * 2.0;\n\t\t}\n\t\tfloat cut_factor = clamp((wave_width * damp_factor) - abs(current_radius - len), 0.0, 1.0);\n\t\tfloat waves_factor = (4.0 * len) / radius;\n\t\tuv_offset = (((p / len) * cos((waves_factor - (current_progress * 10.0)) * 3.14)) * amp) * cut_factor;\n\t\tuv += uv_offset;\n\t}\n\treturn uv;\n}\nvoid main() {\n\tfloat maxR;\n\tfloat ringR;\n\tfloat radiusMin;\n\tfloat radiusMax;\n\tfloat dist;\n\tfloat progress[4];\n\tvec2 uv = vUv.xy;\n\tvec2 uvOffset = vec2(0.0, 0.0);\n\tmaxR = length(transform(vec2(1.0, 1.0)));\n\tringR = 1.0 / 6.0;\n\tradiusMin = timePercent * maxR;\n\tradiusMax = radiusMin + ringR;\n\tdist = length(transform(uv));\n\tfor (int i = 0; i < 4; i++) {\n\t\tprogress[i] = timePercent + (0.1 * float(i));\n\t\tif (progress[i] < 0.0) {\n\t\t\tprogress[i] = 0.0;\n\t\t}\n\t}\n\tuvOffset = offset(progress, 0.2, 0.3, 1.0);\n\tvec4 srcColor = texture2D(texturePrev, fract(vUv + uvOffset));\n\tvec4 distColor = texture2D(textureNext, fract(vUv + uvOffset));\n\tif (dist < radiusMin) {\n\t\tsrcColor.a = 0.0;\n\t}\n\telse if ((dist >= radiusMin) && (dist <= radiusMax)) {\n\t\tsrcColor.a = (dist - radiusMin) / ringR;\n\t}\n\telse {\n\t\tsrcColor.a = 1.0;\n\t}\n\tif (timePercent >= 1.0) {\n\t\tsrcColor.a = 0.0;\n\t}\n\telse if (timePercent == 0.0) {\n\t\tsrcColor.a = 1.0;\n\t}\n\tgl_FragColor = blendSrcOver(srcColor, distColor);\n}\n`},function(S,M){S.exports=`vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tfloat alphaStart = timePercent > 0.5 ? ((timePercent - 0.5) / 0.5) * 1.0 : 1.0;\n\tfloat alphaEnd = timePercent < 0.5 ? ((0.5 - timePercent) / 0.5) * 1.0 : 0.0;\n\tfloat rectStart = 0.5 * (1.0 - timePercent);\n\tfloat rectEnd = rectStart + 0.5;\n\tif (timePercent <= 0.33) {\n\t\talphaStart = 1.0;\n\t\talphaEnd = (1.0 - (timePercent / 0.33)) * 1.0;\n\t\trectStart = 0.5;\n\t\trectEnd = 1.0;\n\t}\n\telse if ((timePercent > 0.33) && (timePercent <= 0.66)) {\n\t\talphaStart = 1.0;\n\t\talphaEnd = 0.0;\n\t\trectEnd = 1.0 - (((timePercent - 0.33) / 0.33) * 0.5);\n\t\trectStart = rectEnd - 0.5;\n\t}\n\telse {\n\t\talphaStart = ((1.0 - timePercent) / (1.0 - 0.66)) * 1.0;\n\t\talphaEnd = 0.0;\n\t\trectStart = 0.0;\n\t\trectEnd = 0.5;\n\t}\n\tif (vUv.x >= rectEnd) {\n\t\tsrcColor.a = 0.0;\n\t}\n\telse if (vUv.x <= rectStart) {\n\t\tsrcColor.a = 1.0;\n\t}\n\telse {\n\t\tsrcColor.a = alphaStart - (((vUv.x - rectStart) / 0.5) * (alphaStart - alphaEnd));\n\t}\n\tgl_FragColor = blendSrcOver(srcColor, distColor);\n}\n`},function(S,M){S.exports=`uniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform sampler2D dissolveTexture;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec4 dissolveColor = texture2D(dissolveTexture, vUv);\n\tif (dissolveColor.r == 0.0) {\n\t\tresult = srcColor;\n\t}\n\telse {\n\t\tresult = distColor;\n\t}\n\tgl_FragColor = result;\n}\n`},function(S,M){S.exports=`uniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tif (timePercent < 0.5) {\n\t\tfloat stagePercent = timePercent / 0.5;\n\t\tresult = srcColor + (stagePercent * (1.0 - srcColor));\n\t}\n\telse {\n\t\tfloat stagePercent = (timePercent - 0.5) / 0.5;\n\t\tresult = 1.0 - (stagePercent * (1.0 - distColor));\n\t}\n\tgl_FragColor = result;\n}\n`},function(S,M){S.exports=`vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tsrcColor.a = 1.0 - timePercent;\n\tgl_FragColor = blendSrcOver(srcColor, distColor);\n}\n`},function(S,M){S.exports=`float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tfloat line = interpolationFloat(0.0, 1.0, 0.0, 1.0, timePercent, 3);\n\tif (vUv.y > line) {\n\t\tvec2 uv = vUv.xy;\n\t\tuv.y -= line;\n\t\tresult = texture2D(texturePrev, uv);\n\t}\n\telse {\n\t\tvec2 uv = vUv.xy;\n\t\tuv.y += (1.0 - line);\n\t\tresult = texture2D(textureNext, uv);\n\t}\n\tgl_FragColor = result;\n}\n`},function(S,M){S.exports=`vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec2 rectLeft = vec2(0.25, 0.5);\n\tvec2 rectRight = vec2(0.5, 0.75);\n\tvec2 alphaLeft = vec2(1.0, 1.0);\n\tvec2 alphaRight = vec2(1.0, 1.0);\n\tif (timePercent <= 0.333) {\n\t\talphaLeft.y = 1.0 - (timePercent / 0.333);\n\t\talphaRight.x = 1.0 - (timePercent / 0.333);\n\t}\n\telse if ((timePercent <= 0.666) && (timePercent > 0.333)) {\n\t\trectLeft.x -= (((timePercent - 0.333) / 0.333) * 0.25);\n\t\trectLeft.y = rectLeft.x + 0.25;\n\t\trectRight.y += (((timePercent - 0.333) / 0.333) * 0.25);\n\t\trectRight.x = rectRight.y - 0.25;\n\t\talphaLeft.y = 0.0;\n\t\talphaRight.x = 0.0;\n\t}\n\telse {\n\t\trectLeft = vec2(0.0, 0.25);\n\t\trectRight = vec2(0.75, 1.0);\n\t\talphaLeft.y = 0.0;\n\t\talphaRight.x = 0.0;\n\t\talphaLeft.x = 1.0 - ((timePercent - 0.666) / (1.0 - 0.666));\n\t\talphaRight.y = 1.0 - ((timePercent - 0.666) / (1.0 - 0.666));\n\t}\n\tif ((vUv.x < rectLeft.x) || (vUv.x > rectRight.y)) {\n\t\tsrcColor.a = 1.0;\n\t}\n\telse if ((vUv.x > rectLeft.y) && (vUv.x < rectRight.x)) {\n\t\tsrcColor.a = 0.0;\n\t}\n\telse {\n\t\tif ((vUv.x >= rectLeft.x) && (vUv.x <= rectLeft.y)) {\n\t\t\tsrcColor.a = alphaLeft.x - (((vUv.x - rectLeft.x) / (rectLeft.y - rectLeft.x)) * (alphaLeft.x - alphaLeft.y));\n\t\t}\n\t\telse {\n\t\t\tsrcColor.a = alphaRight.y - (((rectRight.y - vUv.x) / (rectLeft.y - rectLeft.x)) * (alphaRight.y - alphaRight.x));\n\t\t}\n\t}\n\tgl_FragColor = blendSrcOver(srcColor, distColor);\n}\n`},function(S,M){S.exports=`uniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 uv4 = vec4(vUv.x, vUv.y, 1.0, 1.0);\n\tfloat scale = 1.0;\n\tfloat transform = 0.0;\n\tif (timePercent < 0.5) {\n\t\tscale = 1.0 - ((timePercent / 0.5) * 0.05);\n\t\ttransform = (1.0 - scale) * 0.5;\n\t}\n\telse {\n\t\tscale = 0.95 + (((timePercent - 0.5) / 0.5) * 0.05);\n\t\ttransform = (1.0 - scale) * 0.5;\n\t}\n\tmat4 matrix = mat4(scale, 0.0, 0.0, 0.0, 0.0, scale, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, transform, transform, 0.0, 1.0);\n\tvec4 uv = matrix * uv4;\n\tvec4 srcColor = texture2D(texturePrev, uv.xy);\n\tvec4 distColor = texture2D(textureNext, uv.xy);\n\tvec4 result = timePercent < 0.5 ? srcColor : distColor;\n\tvec3 start;\n\tvec3 end;\n\tvec3 white = vec3(1.0, 1.0, 1.0);\n\tif ((timePercent < 0.25) || (timePercent > 0.75)) {\n\t\tresult *= 1.0;\n\t}\n\telse if ((timePercent >= 0.25) && (timePercent <= 0.5)) {\n\t\tif (timePercent <= 0.375) {\n\t\t\tstart = result.rgb;\n\t\t\tend = start + (((timePercent - 0.25) / 0.125) * (white - result.rgb));\n\t\t}\n\t\telse {\n\t\t\tstart = result.rgb + (((timePercent - 0.375) / 0.125) * (white - result.rgb));\n\t\t\tend = white;\n\t\t}\n\t\tresult = vec4(start - (vUv.x * (start - end)), result.a);\n\t}\n\telse if ((timePercent > 0.5) && (timePercent <= 0.75)) {\n\t\tif (timePercent < 0.625) {\n\t\t\tstart = white - (((timePercent - 0.5) / 0.125) * (white - result.rgb));\n\t\t\tend = white;\n\t\t}\n\t\telse {\n\t\t\tstart = result.rgb;\n\t\t\tend = white - (((timePercent - 0.625) / 0.125) * (white - result.rgb));\n\t\t}\n\t\tresult = vec4(start - (vUv.x * (start - end)), result.a);\n\t}\n\tgl_FragColor = result;\n}\n`},function(S,M){S.exports=`float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tfloat line = interpolationFloat(1.0, 0.0, 0.0, 1.0, timePercent, 1);\n\tif (vUv.x > line) {\n\t\tresult = texture2D(textureNext, vUv);\n\t}\n\telse {\n\t\tvec2 uv = vUv.xy;\n\t\tuv.x = 1.0 - (line - vUv.x);\n\t\tresult = texture2D(texturePrev, uv);\n\t}\n\tgl_FragColor = result;\n}\n`},function(S,M){S.exports=`float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tfloat line = interpolationFloat(1.0, 0.0, 0.0, 1.0, timePercent, 3);\n\tif (vUv.x > line) {\n\t\tvec2 uv = vUv.xy;\n\t\tuv.x = vUv.x - line;\n\t\tresult = texture2D(textureNext, uv);\n\t}\n\telse {\n\t\tresult = texture2D(texturePrev, vUv);\n\t}\n\tgl_FragColor = result;\n}\n`},function(S,M){S.exports=`float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nmat3 yuv2rgb = mat3(1.0, 0.0, 1.13983, 1.0, -0.39465, -0.58060, 1.0, 2.03211, 0.0);\nmat3 rgb2yuv = mat3(0.2126, 0.7152, 0.0722, -0.09991, -0.33609, 0.43600, 0.615, -0.5586, -0.05639);\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec3 result;\n\tfloat resultAlpha;\n\tif (timePercent < 0.5) {\n\t\tresult = srcColor.rgb * rgb2yuv;\n\t\tresult.r += interpolationFloat(0.0, 1.0, 0.0, 0.5, timePercent, 0);\n\t\tresultAlpha = srcColor.a;\n\t}\n\telse {\n\t\tresult = distColor.rgb * rgb2yuv;\n\t\tresult.r += interpolationFloat(1.0, 0.0, 0.5, 1.0, timePercent, 0);\n\t\tresultAlpha = distColor.a;\n\t}\n\tresult *= yuv2rgb;\n\tgl_FragColor = vec4(result.rgb, resultAlpha);\n}\n`},function(S,M){S.exports=`uniform float horizontalSegments;\nuniform float verticalSegments;\nuniform float timePercent;\nuniform float segmentWidth;\nuniform float segmentHeight;\nattribute vec2 segment;\nattribute float times;\nvarying vec2 vUv;\nvarying float fakePercent;\nvoid main() {\n\tvUv = uv;\n\tfloat width = segmentWidth * horizontalSegments;\n\tfloat height = segmentHeight * verticalSegments;\n\tvec4 newPosition = vec4(position, 1.0);\n\tvec2 segmentOrigin = vec2(((segment.x + 0.5) * segmentWidth) - (width * 0.5), (height * 0.5) - ((1.0 * (segment.y + 0.5)) * segmentHeight));\n\tif (timePercent > times) {\n\t\tfloat percent = (timePercent - times) / 0.7;\n\t\tif (percent > 1.0) {\n\t\t\tpercent = 1.0;\n\t\t}\n\t\tif (percent > 0.5) {\n\t\t\tpercent += 1.0;\n\t\t}\n\t\tmat4 matrix = mat4(cos((-1.0 * percent) * 3.14), 0.0, sin((-1.0 * percent) * 3.14), 0.0, 0.0, 1.0, 0.0, 0.0, -sin((-1.0 * percent) * 3.14), 0.0, cos((-1.0 * percent) * 3.14), 0.0, 0.0, 0.0, 0.0, 1.0);\n\t\tnewPosition.x -= segmentOrigin.x;\n\t\tnewPosition.y -= segmentOrigin.y;\n\t\tnewPosition = matrix * newPosition;\n\t\tnewPosition.x += segmentOrigin.x;\n\t\tnewPosition.y += segmentOrigin.y;\n\t\tif (segment.x < (horizontalSegments / 2.0)) {\n\t\t\tfakePercent = percent - (abs((horizontalSegments / 2.0) - segment.x) * (0.25 / horizontalSegments));\n\t\t}\n\t\telse {\n\t\t\tfakePercent = percent + (abs((horizontalSegments / 2.0) - segment.x) * (0.25 / horizontalSegments));\n\t\t}\n\t}\n\tif ((timePercent < 0.0001) || (timePercent > 0.9999)) {\n\t\tgl_Position = (projectionMatrix * modelViewMatrix) * vec4(position, 1.0);\n\t\treturn ;\n\t}\n\tgl_Position = (projectionMatrix * modelViewMatrix) * newPosition;\n}\n`},function(S,M){S.exports=`uniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvarying float fakePercent;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec4 color = srcColor;\n\tif (fakePercent > 0.5) {\n\t\tcolor = distColor;\n\t}\n\tif ((fakePercent < 0.5) && (fakePercent > 0.35)) {\n\t\tcolor.a = 0.5;\n\t}\n\tgl_FragColor = color;\n}\n`},function(S,M){S.exports=`#define PI 3.14159265\nuniform float horizontalSegments;\nuniform float verticalSegments;\nuniform float timePercent;\nuniform float segmentWidth;\nuniform float segmentHeight;\nuniform float duration;\nattribute vec2 segment;\nattribute float times;\nvarying vec2 vUv;\nmat4 rotateY(float angle) {\n\treturn mat4(cos(angle), 0.0, sin(angle), 0.0, 0.0, 1.0, 0.0, 0.0, -sin(angle), 0.0, cos(angle), 0.0, 0.0, 0.0, 0.0, 1.0);\n}\nvoid main() {\n\tvUv = uv;\n\tfloat width = segmentWidth * horizontalSegments;\n\tfloat height = segmentHeight * verticalSegments;\n\tmat4 matrix;\n\tfloat stagePercent;\n\tvec4 newPosition = vec4(position, 1.0);\n\tfloat selfTimePercent = (timePercent - times) / (4.0 / 5.0);\n\tif (selfTimePercent < 0.0) {\n\t\tselfTimePercent = 0.0;\n\t}\n\telse if (selfTimePercent > 1.0) {\n\t\tselfTimePercent = 1.0;\n\t}\n\tif (selfTimePercent < (2.0 / 5.0)) {\n\t\tstagePercent = selfTimePercent / (2.0 / 5.0);\n\t\tnewPosition.x -= (0.5 * width);\n\t\tmatrix = rotateY(((-1.0 * stagePercent) * PI) * 0.5);\n\t\tnewPosition = matrix * newPosition;\n\t\tnewPosition.x += (0.5 * width);\n\t}\n\telse if ((selfTimePercent >= (2.0 / 5.0)) && (selfTimePercent < (3.0 / 5.0))) {\n\t\tstagePercent = (selfTimePercent - (2.0 / 5.0)) / (1.0 / 5.0);\n\t\tnewPosition.x -= (0.5 * width);\n\t\tnewPosition = rotateY((-1.0 * PI) * 0.5) * newPosition;\n\t\tmatrix = rotateY(((-1.0 * stagePercent) * PI) * 2.0);\n\t\tnewPosition = matrix * newPosition;\n\t\tnewPosition.x += (0.5 * width);\n\t\tnewPosition.x -= (width * stagePercent);\n\t}\n\telse {\n\t\tfloat offset = (((newPosition.x + (0.5 * width)) / width) * 2.0) / 5.0;\n\t\tstagePercent = (selfTimePercent - (1.0 / 5.0)) / ((2.0 / 5.0) + offset);\n\t\tif (stagePercent > 1.0) {\n\t\t\tstagePercent = 1.0;\n\t\t}\n\t\tvec4 vvUvv = vec4(vUv.x - 0.5, vUv.y - 0.5, 0.0, 1.0);\n\t\tvvUvv = rotateY(-1.0 * PI) * vvUvv;\n\t\tvUv = vvUvv.xy + 0.5;\n\t\tnewPosition.x -= (0.5 * width);\n\t\tmatrix = rotateY((((-1.0 * stagePercent) * PI) * 0.5) - (PI * 2.5));\n\t\tnewPosition = matrix * newPosition;\n\t\tnewPosition.x += (0.5 * width);\n\t\tnewPosition.x -= width;\n\t}\n\tif ((timePercent < 0.0001) || (timePercent > 0.9999)) {\n\t\tvUv = uv;\n\t\tgl_Position = (projectionMatrix * modelViewMatrix) * vec4(position, 1.0);\n\t\treturn ;\n\t}\n\tgl_Position = (projectionMatrix * modelViewMatrix) * newPosition;\n}\n`},function(S,M){S.exports=`uniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec4 color = srcColor;\n\tif (timePercent > 0.5) {\n\t\tcolor = distColor;\n\t}\n\tif (timePercent < 0.0001) {\n\t\tcolor = srcColor;\n\t}\n\telse if (timePercent > 0.9999) {\n\t\tcolor = distColor;\n\t}\n\tgl_FragColor = color;\n}\n`},function(S,M){S.exports=`#define PI 3.14159265\nattribute float index;\nattribute float type;\nattribute float delay;\nuniform float timePercent;\nuniform float segmentWidth;\nuniform float segments;\nvarying vec2 vUv;\nvarying float vType;\nvarying float rotatePercent;\nmat4 rotateY(float angle) {\n\treturn mat4(cos(angle), 0.0, sin(angle), 0.0, 0.0, 1.0, 0.0, 0.0, -sin(angle), 0.0, cos(angle), 0.0, 0.0, 0.0, 0.0, 1.0);\n}\nvoid main() {\n\tvUv = uv;\n\tvType = type;\n\tvec4 newPosition = vec4(position, 1.0);\n\tfloat selfPercent = (timePercent - delay) / 0.7;\n\trotatePercent = selfPercent;\n\tif (selfPercent < 0.0) {\n\t\tselfPercent = 0.0;\n\t}\n\telse if (selfPercent > 1.0) {\n\t\tselfPercent = 1.0;\n\t}\n\tfloat offsetX = ((segments * segmentWidth) * 0.5) - ((index + 0.5) * segmentWidth);\n\tfloat offsetZ = segmentWidth * 0.5;\n\tnewPosition.x += offsetX;\n\tnewPosition.z += offsetZ;\n\tnewPosition.x *= (0.9 + ((abs(timePercent - 0.5) / 0.5) * 0.1));\n\tnewPosition.z *= (0.9 + ((abs(timePercent - 0.5) / 0.5) * 0.1));\n\tnewPosition = rotateY((PI * 0.5) * selfPercent) * newPosition;\n\tnewPosition.x -= offsetX;\n\tnewPosition.z -= offsetZ;\n\tgl_Position = (projectionMatrix * modelViewMatrix) * newPosition;\n}\n`},function(S,M){S.exports=`uniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvarying float vType;\nvarying float rotatePercent;\nmat3 yuv2rgb = mat3(1.0, 0.0, 1.13983, 1.0, -0.39465, -0.58060, 1.0, 2.03211, 0.0);\nmat3 rgb2yuv = mat3(0.2126, 0.7152, 0.0722, -0.09991, -0.33609, 0.43600, 0.615, -0.5586, -0.05639);\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec3 srcYuv;\n\tvec3 distYuv;\n\tif (rotatePercent < 0.5) {\n\t\tdistYuv = distColor.rgb * rgb2yuv;\n\t\tdistYuv.r *= (1.0 - (abs(rotatePercent - 0.5) / 0.5));\n\t\tdistColor = vec4(distYuv * yuv2rgb, distColor.a);\n\t}\n\telse {\n\t\tsrcYuv = distColor.rgb * rgb2yuv;\n\t\tsrcYuv.r *= (abs(rotatePercent - 0.5) / 0.5);\n\t\tsrcColor = vec4(srcYuv * yuv2rgb, srcColor.a);\n\t}\n\tvec4 color = vType < 0.5 ? srcColor : distColor;\n\tgl_FragColor = color;\n}\n`},function(S,M){S.exports=`float easeInFloat(float t, float b, float c, float d) {\n\tt = t / d;\n\treturn ((c * t) * t) + b;\n}\nfloat interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\n#define PI 3.141592653\nuniform float horizontalSegments;\nuniform float verticalSegments;\nuniform float timePercent;\nuniform float segmentWidth;\nuniform float segmentHeight;\nattribute float isLeft;\nvarying vec2 vUv;\nvarying vec4 shadow;\nvoid main() {\n\tvUv = uv;\n\tfloat scaleX;\n\tfloat transform;\n\tfloat displacement;\n\tvec4 newPosition = vec4(position, 1.0);\n\tvec4 glPosition = (projectionMatrix * modelViewMatrix) * newPosition;\n\tfloat crestCount = 24.0;\n\tfloat width = horizontalSegments * segmentWidth;\n\tfloat height = verticalSegments * segmentHeight;\n\tfloat heightFactor = (newPosition.y + (height * 0.5)) / height;\n\tfloat scaleY = interpolationFloat(1.0, 1.05, 0.0, 0.11, timePercent, 0);\n\tnewPosition.y += (height * 0.5);\n\tnewPosition.y *= scaleY;\n\tnewPosition.y -= (height * 0.5);\n\tnewPosition.y += 10.0;\n\tif ((timePercent > 0.0) && (timePercent < 0.333)) {\n\t\tfloat delay = (1.0 - heightFactor) * 0.1;\n\t\tscaleX = interpolationFloat(1.0, 0.5, 0.0 + delay, 0.333, timePercent, 1);\n\t}\n\telse if ((timePercent >= 0.333) && (timePercent < 0.5)) {\n\t\tfloat scaleTop = 0.5;\n\t\tfloat scaleBottom = interpolationFloat(0.5, 0.25, 0.333, 0.5, timePercent, 2);\n\t\tfloat incr = easeInFloat(1.0 - heightFactor, 0.0, abs(scaleBottom - scaleTop), 1.0);\n\t\tscaleX = scaleTop - incr;\n\t}\n\telse if ((timePercent >= 0.5) && (timePercent < 0.583)) {\n\t\tfloat scaleTop = 0.5;\n\t\tfloat scaleBottom = interpolationFloat(0.25, 0.5, 0.5, 0.583, timePercent, 1);\n\t\tfloat incr = easeInFloat(1.0 - heightFactor, 0.0, abs(scaleBottom - scaleTop), 1.0);\n\t\tscaleX = scaleTop - incr;\n\t}\n\telse if (timePercent >= 0.583) {\n\t\tfloat scaleTop = 0.5;\n\t\tfloat scaleBottom = interpolationFloat(0.5, 0.75, 0.583, 0.666, timePercent, 2);\n\t\tfloat incr = easeInFloat(1.0 - heightFactor, 0.0, abs(scaleBottom - scaleTop), 1.0);\n\t\tscaleX = scaleTop + incr;\n\t}\n\tif (timePercent > 0.583) {\n\t\tdisplacement = (isLeft < 0.5 ? 1.0 : -1.0) * interpolationFloat(0.0, width / 2.0, 0.583, 1.0, timePercent, 0);\n\t}\n\tfloat ampTop = interpolationFloat(0.0, 1.0, 0.0, 0.11, timePercent, 0);\n\tfloat ampBottom = interpolationFloat(0.0, 1.0, 0.11, 0.22, timePercent, 0);\n\tfloat amp = ampBottom + (heightFactor * abs(ampBottom - ampTop));\n\tfloat foo = newPosition.x * ((crestCount * PI) / width);\n\tnewPosition.z = (amp * cos(foo + (PI / 2.0))) * 20.0;\n\ttransform = (isLeft < 0.5 ? -1.0 : 1.0) * (width * 0.5);\n\tnewPosition.x += transform;\n\tnewPosition.x *= scaleX;\n\tnewPosition.x -= transform;\n\tnewPosition.x += displacement;\n\tshadow = vec4(0.0, 0.0, 0.0, 0.0);\n\tif (newPosition.z < 15.0) {\n\t\tfloat alpha = 0.3 * (1.0 - ((newPosition.z + 20.0) / 35.0));\n\t\tshadow.a = alpha * amp;\n\t}\n\tgl_Position = (projectionMatrix * modelViewMatrix) * newPosition;\n}\n`},function(S,M){S.exports=`vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvarying vec4 shadow;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec4 color = blendSrcOver(shadow, srcColor);\n\tgl_FragColor = color;\n}\n`},function(S,M){S.exports=`float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\n#define PI 3.14159265\nuniform float timePercent;\nuniform float aCoefficient;\nuniform float zCurveLimit;\nuniform float horizontalSegments;\nuniform float verticalSegments;\nuniform float segmentWidth;\nuniform float segmentHeight;\nvarying vec2 vUv;\nvoid main() {\n\tfloat halfWidth = (segmentWidth * horizontalSegments) * 0.5;\n\tfloat halfHeight = (segmentHeight * verticalSegments) * 0.5;\n\tvUv = uv;\n\tvec4 newPosition = vec4(position, 1.0);\n\tfloat curve;\n\tfloat aStart = interpolationFloat(0.00000009, aCoefficient, 0.0, 0.5, timePercent, 0);\n\tfloat aEnd = 0.0000009;\n\tfloat zStart = interpolationFloat(0.0, zCurveLimit, 0.0, 0.5, timePercent, 0);\n\tfloat zEnd = 0.0;\n\tfloat a = interpolationFloat(aStart, aEnd, 0.0, halfWidth * 2.0, newPosition.x + halfWidth, 0);\n\tfloat z = interpolationFloat(zStart, zEnd, 0.0, halfWidth * 2.0, newPosition.x + halfWidth, 0);\n\tnewPosition.z -= (((-a * newPosition.y) * newPosition.y) + z);\n\tfloat scaleYStart = interpolationFloat(1.0, 0.8, 0.0, 0.5, timePercent, 0);\n\tfloat scaleYEnd = 1.0;\n\tfloat scaleY = interpolationFloat(scaleYStart, scaleYEnd, 0.0, halfWidth * 2.0, newPosition.x + halfWidth, 0);\n\tnewPosition.y += halfHeight;\n\tnewPosition.y *= scaleY;\n\tfloat angle = interpolationFloat(0.0, -((2.0 * PI) / 3.0), 0.111, 1.0, timePercent, 1);\n\tmat4 rotateX = mat4(1.0, 0.0, 0.0, 0.0, 0.0, cos(angle), sin(angle), 0.0, 0.0, -sin(angle), cos(angle), 0.0, 0.0, 0.0, 0.0, 1.0);\n\tnewPosition = rotateX * newPosition;\n\tnewPosition.y -= halfHeight;\n\tgl_Position = (projectionMatrix * modelViewMatrix) * newPosition;\n}\n`},function(S,M){S.exports=`float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\nvec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tfloat alpha = interpolationFloat(0.0, 0.6, 0.5, 1.0, timePercent, 0);\n\tvec4 shadow = vec4(0.0, 0.0, 0.0, alpha);\n\tgl_FragColor = blendSrcOver(shadow, srcColor);\n}\n`},function(S,M){S.exports=`float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\n#define PI 3.14159265358\nuniform float timePercent;\nuniform float horizontalSegments;\nuniform float verticalSegments;\nuniform float segmentWidth;\nuniform float segmentHeight;\nvarying vec2 vUv;\nvarying float shadowAlpha;\nmat2 rotateOrigin(float angle) {\n\treturn mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n}\nvoid main() {\n\tfloat halfWidth = (segmentWidth * horizontalSegments) * 0.5;\n\tfloat halfHeight = (segmentHeight * verticalSegments) * 0.5;\n\tvUv = uv;\n\tvec2 shadowPosition = vec2(position.xy);\n\tfloat rotateAngle = PI * 0.27;\n\tfloat min_r = halfWidth * 0.05;\n\tshadowPosition = rotateOrigin(rotateAngle) * shadowPosition;\n\tvec4 newPosition = vec4(shadowPosition.xy, position.z, 1.0);\n\tfloat line = interpolationFloat(0.0, halfWidth * 2.8, 0.0, 1.0, timePercent, 1);\n\tfloat dis2BaseLine = halfWidth - newPosition.x;\n\tfloat dis2Line = line - dis2BaseLine;\n\tfloat L = line <= (halfWidth * 2.0) ? line : halfWidth * 2.0;\n\tfloat r = L / PI;\n\tr = r < min_r ? min_r : r;\n\tfloat angle = dis2Line / r;\n\tif (((dis2Line > 0.0) && (dis2Line < (line * 0.5))) && (r > min_r)) {\n\t\tshadowAlpha = interpolationFloat(0.0, 0.3, 0.0, line * 0.5, dis2Line, 0);\n\t}\n\telse {\n\t\tshadowAlpha = 0.0;\n\t}\n\tif (dis2BaseLine < line) {\n\t\tnewPosition.x = ((sin(angle) * r) + halfWidth) - line;\n\t\tnewPosition.z = (r - (cos(angle) * r)) * 0.5;\n\t}\n\tvec2 finalPosition = vec2(newPosition.xy);\n\tfinalPosition = rotateOrigin(-rotateAngle) * finalPosition;\n\tgl_Position = (projectionMatrix * modelViewMatrix) * vec4(finalPosition.xy, newPosition.z, 1.0);\n}\n`},function(S,M){S.exports=`vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvarying float shadowAlpha;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec4 shadow = vec4(0.0, 0.0, 0.0, shadowAlpha);\n\tgl_FragColor = blendSrcOver(shadow, srcColor);\n}\n`},function(S,M){S.exports=`float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\n#define PI 3.14159265358\nuniform float timePercent;\nuniform float horizontalSegments;\nuniform float verticalSegments;\nuniform float segmentWidth;\nuniform float segmentHeight;\nvarying vec2 vUv;\nmat4 rotateX(float angle) {\n\treturn mat4(1.0, 0.0, 0.0, 0.0, 0.0, cos(angle), sin(angle), 0.0, 0.0, -sin(angle), cos(angle), 0.0, 0.0, 0.0, 0.0, 1.0);\n}\nvoid main() {\n\tfloat halfWidth = (segmentWidth * horizontalSegments) * 0.5;\n\tfloat halfHeight = (segmentHeight * verticalSegments) * 0.5;\n\tvUv = uv;\n\tvec4 newPosition = vec4(position, 1.0);\n\tfloat delay = interpolationFloat(0.0, 0.08, 0.0, halfWidth * 2.0, halfWidth + newPosition.x, 0);\n\tfloat arc = halfHeight - newPosition.y;\n\tfloat L;\n\tif (timePercent < 0.8) {\n\t\tL = interpolationFloat(halfHeight * 4.0, halfHeight * 22.0, 0.3 + delay, 0.8, timePercent, 0);\n\t}\n\telse {\n\t\tL = interpolationFloat(halfHeight * 22.0, halfHeight * 300.0, 0.8, 1.0, timePercent, 0);\n\t}\n\tfloat r = L / (2.0 * PI);\n\tfloat angle = PI - (arc / r);\n\tfloat y = sin(angle) * r;\n\tfloat z = cos(angle) * r;\n\tnewPosition.y = halfHeight - y;\n\tnewPosition.z = (z + r) * 0.45;\n\tfloat rotateAngle = interpolationFloat(-PI * 0.5, 0.0, 0.0 + delay, 0.4, timePercent, 0);\n\tnewPosition.y -= halfHeight;\n\tnewPosition = rotateX(rotateAngle) * newPosition;\n\tnewPosition.y += halfHeight;\n\tfloat backRotate1 = interpolationFloat(0.0, PI * 0.03, 0.75, 0.9, timePercent, 0);\n\tnewPosition.y -= halfHeight;\n\tnewPosition = rotateX(backRotate1) * newPosition;\n\tnewPosition.y += halfHeight;\n\tfloat backRotate2 = interpolationFloat(0.0, -PI * 0.03, 0.8, 1.0, timePercent, 0);\n\tnewPosition.y -= halfHeight;\n\tnewPosition = rotateX(backRotate2) * newPosition;\n\tnewPosition.y += halfHeight;\n\tgl_Position = (projectionMatrix * modelViewMatrix) * newPosition;\n}\n`},function(S,M){S.exports=`float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\nvec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tfloat alpha = interpolationFloat(0.0, 0.6, 0.5, 1.0, timePercent, 0);\n\tvec4 shadow = vec4(0.0, 0.0, 0.0, 0.0);\n\tgl_FragColor = blendSrcOver(shadow, distColor);\n}\n`},function(S,M){S.exports=`vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nfloat interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\n#define PI 3.14159265358\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform float width;\nuniform float height;\nvarying vec2 vUv;\nvec2 transform(vec2 uv) {\n\tuv.y = (uv.y * height) / width;\n\treturn uv - vec2(0.5, (0.5 * height) / width);\n}\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tfloat shadowAngle = PI / 6.0;\n\tfloat clockAngle;\n\tvec2 a;\n\tvec2 b = transform(vUv);\n\tfloat angle;\n\tif (timePercent < 0.5) {\n\t\ta = vec2(0.0, 0.5);\n\t\tclockAngle = interpolationFloat(0.0, PI, 0.0, 0.5, timePercent, 0);\n\t\tif (b.x > 0.0) {\n\t\t\tangle = acos(((a.x * b.x) + (a.y * b.y)) / (sqrt((a.x * a.x) + (a.y * a.y)) * sqrt((b.x * b.x) + (b.y * b.y))));\n\t\t\tif (angle < clockAngle) {\n\t\t\t\tif (angle > (clockAngle - shadowAngle)) {\n\t\t\t\t\tfloat shadowAlpha = interpolationFloat(1.0, 0.0, 0.0, 1.0, abs(clockAngle - angle) / shadowAngle, 0);\n\t\t\t\t\tsrcColor.a = shadowAlpha;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tsrcColor.a = 0.0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tsrcColor.a = 1.0;\n\t\t}\n\t}\n\telse {\n\t\ta = vec2(0.0, -0.5);\n\t\tclockAngle = interpolationFloat(0.0, PI + shadowAngle, 0.5, 1.0, timePercent, 0);\n\t\tif (b.x <= 0.0) {\n\t\t\tangle = acos(((a.x * b.x) + (a.y * b.y)) / (sqrt((a.x * a.x) + (a.y * a.y)) * sqrt((b.x * b.x) + (b.y * b.y))));\n\t\t\tif (angle < clockAngle) {\n\t\t\t\tif (angle > (clockAngle - shadowAngle)) {\n\t\t\t\t\tfloat shadowAlpha = interpolationFloat(1.0, 0.0, 0.0, 1.0, abs(clockAngle - angle) / shadowAngle, 0);\n\t\t\t\t\tsrcColor.a = shadowAlpha;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tsrcColor.a = 0.0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tsrcColor.a = 0.0;\n\t\t}\n\t}\n\tgl_FragColor = blendSrcOver(srcColor, distColor);\n}\n`},function(S,M){S.exports=`float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\n#define PI 3.14159265358\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform float width;\nuniform float height;\nvarying vec2 vUv;\nvoid main() {\n\tvec2 uv = vUv;\n\tbool useSrc = false;\n\tvec2 row;\n\tfloat delay = 0.02;\n\tfor (int i = 0; i < 7; i++) {\n\t\tfloat fi = float(i);\n\t\trow.r = (fi * 1.0) / 7.0;\n\t\trow.g = (float(i + 1) * 1.0) / 7.0;\n\t\tif ((vUv.y <= row.g) && (vUv.y > row.r)) {\n\t\t\tif ((i % 2) == 0) {\n\t\t\t\tfloat x = interpolationFloat(0.0, 1.0, delay * fi, (delay * fi) + 0.86, timePercent, 1);\n\t\t\t\tif (vUv.x < x) {\n\t\t\t\t\tuseSrc = false;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tuv.x -= x;\n\t\t\t\t\tuseSrc = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfloat x = interpolationFloat(1.0, 0.0, delay * fi, (delay * fi) + 0.86, timePercent, 1);\n\t\t\t\tif (vUv.x < x) {\n\t\t\t\t\tuv.x = (1.0 - x) + uv.x;\n\t\t\t\t\tuseSrc = true;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tuseSrc = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t}\n\tvec4 srcColor = texture2D(texturePrev, uv);\n\tvec4 distColor = texture2D(textureNext, uv);\n\tgl_FragColor = useSrc ? srcColor : distColor;\n}\n`},function(S,M){S.exports=`vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nfloat interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\n#define PI 3.14159265358\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform float width;\nuniform float height;\nvarying vec2 vUv;\nvoid main() {\n\tvec2 uvSrc = vUv;\n\tvec2 uvDist = vUv;\n\tfloat scaleSrc = interpolationFloat(1.0, 0.1, 0.0, 1.0, timePercent, 0);\n\tfloat scaleDist = interpolationFloat(2.0, 1.0, 0.0, 1.0, timePercent, 0);\n\tuvSrc -= 0.5;\n\tuvSrc *= scaleSrc;\n\tuvSrc += 0.5;\n\tuvDist -= 0.5;\n\tuvDist *= scaleDist;\n\tuvDist += 0.5;\n\tvec4 srcColor = texture2D(texturePrev, uvSrc);\n\tsrcColor.a = interpolationFloat(1.0, 0.0, 0.0, 1.0, timePercent, 0);\n\tvec4 distColor;\n\tif ((((uvDist.x > 1.0) || (uvDist.x < 0.0)) || (uvDist.y > 1.0)) || (uvDist.y < 0.0)) {\n\t\tdistColor = vec4(0.0, 0.0, 0.0, 1.0);\n\t}\n\telse {\n\t\tdistColor = texture2D(textureNext, uvDist);\n\t}\n\tgl_FragColor = blendSrcOver(srcColor, distColor);\n}\n`},function(S,M){S.exports=`float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\n#define PI 3.14159265358\nuniform float timePercent;\nuniform float horizontalSegments;\nuniform float verticalSegments;\nuniform float segmentWidth;\nuniform float segmentHeight;\nvarying vec2 vUv;\nmat4 rotateY(float angle) {\n\treturn mat4(cos(angle), 0.0, sin(angle), 0.0, 0.0, 1.0, 0.0, 0.0, -sin(angle), 0.0, cos(angle), 0.0, 0.0, 0.0, 0.0, 1.0);\n}\nvoid main() {\n\tfloat halfWidth = (segmentWidth * horizontalSegments) * 0.5;\n\tfloat halfHeight = (segmentHeight * verticalSegments) * 0.5;\n\tvUv = uv;\n\tvec4 newPosition = vec4(position, 1.0);\n\tfloat stageOneAngle = PI / 14.0;\n\tfloat stageTwoAngle = (PI * 12.0) / 14.0;\n\tfloat stage_1 = 0.1;\n\tfloat stage_2 = 0.8;\n\tif (timePercent < 0.5) {\n\t\tnewPosition.z = interpolationFloat(0.0, -100.0, 0.0, 0.5, timePercent, 0);\n\t}\n\telse {\n\t\tnewPosition.z = interpolationFloat(-100.0, 0.0, 0.5, 1.0, timePercent, 0);\n\t}\n\tif (timePercent < stage_1) {\n\t\tfloat angle = interpolationFloat(0.0, stageOneAngle, 0.0, stage_1, timePercent, 0);\n\t\tnewPosition.x += halfWidth;\n\t\tnewPosition *= rotateY(angle);\n\t\tnewPosition.x -= halfWidth;\n\t}\n\telse if ((timePercent >= stage_1) && (timePercent < stage_2)) {\n\t\tif (timePercent > 0.5) {\n\t\t\tnewPosition *= rotateY(PI);\n\t\t}\n\t\tfloat offset = halfWidth - (sin((PI * 0.5) - stageOneAngle) * halfWidth);\n\t\tfloat angle = interpolationFloat(0.0, stageTwoAngle, stage_1, stage_2, timePercent, 0);\n\t\tnewPosition *= rotateY(angle);\n\t\tnewPosition.x += halfWidth;\n\t\tnewPosition *= rotateY(stageOneAngle);\n\t\tnewPosition.x -= halfWidth;\n\t\tnewPosition.x += interpolationFloat(0.0, 2.0 * offset, stage_1, stage_2, timePercent, 0);\n\t}\n\telse {\n\t\tfloat angle = interpolationFloat(-stageOneAngle, 0.0, stage_2, 1.0, timePercent, 0);\n\t\tnewPosition.x -= halfWidth;\n\t\tnewPosition *= rotateY(angle);\n\t\tnewPosition.x += halfWidth;\n\t}\n\tgl_Position = (projectionMatrix * modelViewMatrix) * newPosition;\n}\n`},function(S,M){S.exports=`uniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tgl_FragColor = timePercent < 0.5 ? srcColor : distColor;\n}\n`},function(S,M,v){(function(b){var Q=v(45),me=v(46),q=setTimeout,O=b!==void 0?b:null;function $(N){return Boolean(N&&N.length!==void 0)}function H(){}function D(N){if(!(this instanceof D))throw new TypeError(\"Promises must be constructed via new\");if(typeof N!=\"function\")throw new TypeError(\"not a function\");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],L(N,this)}function Z(N,ee){for(;N._state===3;)N=N._value;N._state!==0?(N._handled=!0,D._immediateFn(function(){var C=N._state===1?ee.onFulfilled:ee.onRejected;if(C!==null){var z;try{z=C(N._value)}catch(X){return void Ce(ee.promise,X)}be(ee.promise,z)}else(N._state===1?be:Ce)(ee.promise,N._value)})):N._deferreds.push(ee)}function be(N,ee){try{if(ee===N)throw new TypeError(\"A promise cannot be resolved with itself.\");if(ee&&(typeof ee==\"object\"||typeof ee==\"function\")){var C=ee.then;if(ee instanceof D)return N._state=3,N._value=ee,void Ie(N);if(typeof C==\"function\")return void L((z=C,X=ee,function(){z.apply(X,arguments)}),N)}N._state=1,N._value=ee,Ie(N)}catch(ne){Ce(N,ne)}var z,X}function Ce(N,ee){N._state=2,N._value=ee,Ie(N)}function Ie(N){N._state===2&&N._deferreds.length===0&&D._immediateFn(function(){N._handled||D._unhandledRejectionFn(N._value)});for(var ee=0,C=N._deferreds.length;ee<C;ee++)Z(N,N._deferreds[ee]);N._deferreds=null}function E(N,ee,C){this.onFulfilled=typeof N==\"function\"?N:null,this.onRejected=typeof ee==\"function\"?ee:null,this.promise=C}function L(N,ee){var C=!1;try{N(function(z){C||(C=!0,be(ee,z))},function(z){C||(C=!0,Ce(ee,z))})}catch(z){if(C)return;C=!0,Ce(ee,z)}}D.prototype.catch=function(N){return this.then(null,N)},D.prototype.then=function(N,ee){var C=new this.constructor(H);return Z(this,new E(N,ee,C)),C},D.prototype.finally=Q.a,D.all=function(N){return new D(function(ee,C){if(!$(N))return C(new TypeError(\"Promise.all accepts an array\"));var z=Array.prototype.slice.call(N);if(z.length===0)return ee([]);var X=z.length;function ne(pt,Ne){try{if(Ne&&(typeof Ne==\"object\"||typeof Ne==\"function\")){var ae=Ne.then;if(typeof ae==\"function\")return void ae.call(Ne,function(Me){ne(pt,Me)},C)}z[pt]=Ne,--X==0&&ee(z)}catch(Me){C(Me)}}for(var Ve=0;Ve<z.length;Ve++)ne(Ve,z[Ve])})},D.allSettled=me.a,D.resolve=function(N){return N&&typeof N==\"object\"&&N.constructor===D?N:new D(function(ee){ee(N)})},D.reject=function(N){return new D(function(ee,C){C(N)})},D.race=function(N){return new D(function(ee,C){if(!$(N))return C(new TypeError(\"Promise.race accepts an array\"));for(var z=0,X=N.length;z<X;z++)D.resolve(N[z]).then(ee,C)})},D._immediateFn=typeof O==\"function\"&&function(N){O(N)}||function(N){q(N,0)},D._unhandledRejectionFn=function(N){typeof console!=\"undefined\"&&console&&console.warn(\"Possible Unhandled Promise Rejection:\",N)},M.a=D}).call(this,v(55).setImmediate)},function(S,M,v){M.a=function(b){var Q=this.constructor;return this.then(function(me){return Q.resolve(b()).then(function(){return me})},function(me){return Q.resolve(b()).then(function(){return Q.reject(me)})})}},function(S,M,v){M.a=function(b){return new this(function(Q,me){if(!b||b.length===void 0)return me(new TypeError(typeof b+\" \"+b+\" is not iterable(cannot read property Symbol(Symbol.iterator))\"));var q=Array.prototype.slice.call(b);if(q.length===0)return Q([]);var O=q.length;function $(D,Z){if(Z&&(typeof Z==\"object\"||typeof Z==\"function\")){var be=Z.then;if(typeof be==\"function\")return void be.call(Z,function(Ce){$(D,Ce)},function(Ce){q[D]={status:\"rejected\",reason:Ce},--O==0&&Q(q)})}q[D]={status:\"fulfilled\",value:Z},--O==0&&Q(q)}for(var H=0;H<q.length;H++)$(H,q[H])})}},function(S,M,v){/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/var b=Object.getOwnPropertySymbols,Q=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable;function q(O){if(O==null)throw new TypeError(\"Object.assign cannot be called with null or undefined\");return Object(O)}S.exports=function(){try{if(!Object.assign)return!1;var O=new String(\"abc\");if(O[5]=\"de\",Object.getOwnPropertyNames(O)[0]===\"5\")return!1;for(var $={},H=0;H<10;H++)$[\"_\"+String.fromCharCode(H)]=H;if(Object.getOwnPropertyNames($).map(function(Z){return $[Z]}).join(\"\")!==\"0123456789\")return!1;var D={};return\"abcdefghijklmnopqrst\".split(\"\").forEach(function(Z){D[Z]=Z}),Object.keys(Object.assign({},D)).join(\"\")===\"abcdefghijklmnopqrst\"}catch{return!1}}()?Object.assign:function(O,$){for(var H,D,Z=q(O),be=1;be<arguments.length;be++){for(var Ce in H=Object(arguments[be]))Q.call(H,Ce)&&(Z[Ce]=H[Ce]);if(b){D=b(H);for(var Ie=0;Ie<D.length;Ie++)me.call(H,D[Ie])&&(Z[D[Ie]]=H[D[Ie]])}}return Z}},function(S,M){S.exports=`precision mediump float;\nattribute vec2 aVertexPosition;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\nvec4 filterVertexPosition() {\n\tvec2 position = (aVertexPosition * max(outputFrame.zw, vec2(0.))) + outputFrame.xy;\n\treturn vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\nvec2 filterTextureCoord() {\n\treturn aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\nvoid main() {\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n}\n`},function(S,M){S.exports=`precision mediump float;\n#define KERNEL 7\nvarying vec2 vTextureCoord;\nuniform vec4 uShapeFilterArea;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec4 inputSize;\nuniform float uStartAlpha;\nuniform float uEndAlpha;\nuniform int uBlur;\nvoid main() {\n\tfloat halfHeight = uShapeFilterArea.w / 2.0;\n\tvec2 cod = vTextureCoord * inputSize.xy;\n\tif (cod.y < halfHeight) {\n\t\tgl_FragColor = texture2D(uSampler, vTextureCoord);\n\t}\n\telse {\n\t\tfloat alpha = uStartAlpha - (((cod.y - halfHeight) / halfHeight) * (uStartAlpha - uEndAlpha));\n\t\tvec2 cord = vec2(vTextureCoord.x, (uShapeFilterArea.w - cod.y) / inputSize.y);\n\t\tvec4 outputColor = texture2D(uSampler, cord);\n\t\toutputColor *= alpha;\n\t\tgl_FragColor = outputColor;\n\t}\n}\n`},function(S,M,v){(function(b){var Q;/*!\n *  howler.js v2.2.3\n *  howlerjs.com\n *\n *  (c) 2013-2020, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */(function(){var me=function(){this.init()};me.prototype={init:function(){var E=this||q;return E._counter=1e3,E._html5AudioPool=[],E.html5PoolSize=10,E._codecs={},E._howls=[],E._muted=!1,E._volume=1,E._canPlayEvent=\"canplaythrough\",E._navigator=typeof window!=\"undefined\"&&window.navigator?window.navigator:null,E.masterGain=null,E.noAudio=!1,E.usingWebAudio=!0,E.autoSuspend=!0,E.ctx=null,E.autoUnlock=!0,E._setup(),E},volume:function(E){var L=this||q;if(E=parseFloat(E),L.ctx||Ie(),E!==void 0&&E>=0&&E<=1){if(L._volume=E,L._muted)return L;L.usingWebAudio&&L.masterGain.gain.setValueAtTime(E,q.ctx.currentTime);for(var N=0;N<L._howls.length;N++)if(!L._howls[N]._webAudio)for(var ee=L._howls[N]._getSoundIds(),C=0;C<ee.length;C++){var z=L._howls[N]._soundById(ee[C]);z&&z._node&&(z._node.volume=z._volume*E)}return L}return L._volume},mute:function(E){var L=this||q;L.ctx||Ie(),L._muted=E,L.usingWebAudio&&L.masterGain.gain.setValueAtTime(E?0:L._volume,q.ctx.currentTime);for(var N=0;N<L._howls.length;N++)if(!L._howls[N]._webAudio)for(var ee=L._howls[N]._getSoundIds(),C=0;C<ee.length;C++){var z=L._howls[N]._soundById(ee[C]);z&&z._node&&(z._node.muted=!!E||z._muted)}return L},stop:function(){for(var E=this||q,L=0;L<E._howls.length;L++)E._howls[L].stop();return E},unload:function(){for(var E=this||q,L=E._howls.length-1;L>=0;L--)E._howls[L].unload();return E.usingWebAudio&&E.ctx&&E.ctx.close!==void 0&&(E.ctx.close(),E.ctx=null,Ie()),E},codecs:function(E){return(this||q)._codecs[E.replace(/^x-/,\"\")]},_setup:function(){var E=this||q;if(E.state=E.ctx&&E.ctx.state||\"suspended\",E._autoSuspend(),!E.usingWebAudio)if(typeof Audio!=\"undefined\")try{new Audio().oncanplaythrough===void 0&&(E._canPlayEvent=\"canplay\")}catch{E.noAudio=!0}else E.noAudio=!0;try{new Audio().muted&&(E.noAudio=!0)}catch{}return E.noAudio||E._setupCodecs(),E},_setupCodecs:function(){var E=this||q,L=null;try{L=typeof Audio!=\"undefined\"?new Audio:null}catch{return E}if(!L||typeof L.canPlayType!=\"function\")return E;var N=L.canPlayType(\"audio/mpeg;\").replace(/^no$/,\"\"),ee=E._navigator?E._navigator.userAgent:\"\",C=ee.match(/OPR\\/([0-6].)/g),z=C&&parseInt(C[0].split(\"/\")[1],10)<33,X=ee.indexOf(\"Safari\")!==-1&&ee.indexOf(\"Chrome\")===-1,ne=ee.match(/Version\\/(.*?) /),Ve=X&&ne&&parseInt(ne[1],10)<15;return E._codecs={mp3:!(z||!N&&!L.canPlayType(\"audio/mp3;\").replace(/^no$/,\"\")),mpeg:!!N,opus:!!L.canPlayType('audio/ogg; codecs=\"opus\"').replace(/^no$/,\"\"),ogg:!!L.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/,\"\"),oga:!!L.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/,\"\"),wav:!!(L.canPlayType('audio/wav; codecs=\"1\"')||L.canPlayType(\"audio/wav\")).replace(/^no$/,\"\"),aac:!!L.canPlayType(\"audio/aac;\").replace(/^no$/,\"\"),caf:!!L.canPlayType(\"audio/x-caf;\").replace(/^no$/,\"\"),m4a:!!(L.canPlayType(\"audio/x-m4a;\")||L.canPlayType(\"audio/m4a;\")||L.canPlayType(\"audio/aac;\")).replace(/^no$/,\"\"),m4b:!!(L.canPlayType(\"audio/x-m4b;\")||L.canPlayType(\"audio/m4b;\")||L.canPlayType(\"audio/aac;\")).replace(/^no$/,\"\"),mp4:!!(L.canPlayType(\"audio/x-mp4;\")||L.canPlayType(\"audio/mp4;\")||L.canPlayType(\"audio/aac;\")).replace(/^no$/,\"\"),weba:!(Ve||!L.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/,\"\")),webm:!(Ve||!L.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/,\"\")),dolby:!!L.canPlayType('audio/mp4; codecs=\"ec-3\"').replace(/^no$/,\"\"),flac:!!(L.canPlayType(\"audio/x-flac;\")||L.canPlayType(\"audio/flac;\")).replace(/^no$/,\"\")},E},_unlockAudio:function(){var E=this||q;if(!E._audioUnlocked&&E.ctx){E._audioUnlocked=!1,E.autoUnlock=!1,E._mobileUnloaded||E.ctx.sampleRate===44100||(E._mobileUnloaded=!0,E.unload()),E._scratchBuffer=E.ctx.createBuffer(1,1,22050);var L=function(N){for(;E._html5AudioPool.length<E.html5PoolSize;)try{var ee=new Audio;ee._unlocked=!0,E._releaseHtml5Audio(ee)}catch{E.noAudio=!0;break}for(var C=0;C<E._howls.length;C++)if(!E._howls[C]._webAudio)for(var z=E._howls[C]._getSoundIds(),X=0;X<z.length;X++){var ne=E._howls[C]._soundById(z[X]);ne&&ne._node&&!ne._node._unlocked&&(ne._node._unlocked=!0,ne._node.load())}E._autoResume();var Ve=E.ctx.createBufferSource();Ve.buffer=E._scratchBuffer,Ve.connect(E.ctx.destination),Ve.start===void 0?Ve.noteOn(0):Ve.start(0),typeof E.ctx.resume==\"function\"&&E.ctx.resume(),Ve.onended=function(){Ve.disconnect(0),E._audioUnlocked=!0,document.removeEventListener(\"touchstart\",L,!0),document.removeEventListener(\"touchend\",L,!0),document.removeEventListener(\"click\",L,!0),document.removeEventListener(\"keydown\",L,!0);for(var pt=0;pt<E._howls.length;pt++)E._howls[pt]._emit(\"unlock\")}};return document.addEventListener(\"touchstart\",L,!0),document.addEventListener(\"touchend\",L,!0),document.addEventListener(\"click\",L,!0),document.addEventListener(\"keydown\",L,!0),E}},_obtainHtml5Audio:function(){var E=this||q;if(E._html5AudioPool.length)return E._html5AudioPool.pop();var L=new Audio().play();return L&&typeof Promise!=\"undefined\"&&(L instanceof Promise||typeof L.then==\"function\")&&L.catch(function(){console.warn(\"HTML5 Audio pool exhausted, returning potentially locked audio object.\")}),new Audio},_releaseHtml5Audio:function(E){var L=this||q;return E._unlocked&&L._html5AudioPool.push(E),L},_autoSuspend:function(){var E=this;if(E.autoSuspend&&E.ctx&&E.ctx.suspend!==void 0&&q.usingWebAudio){for(var L=0;L<E._howls.length;L++)if(E._howls[L]._webAudio){for(var N=0;N<E._howls[L]._sounds.length;N++)if(!E._howls[L]._sounds[N]._paused)return E}return E._suspendTimer&&clearTimeout(E._suspendTimer),E._suspendTimer=setTimeout(function(){if(E.autoSuspend){E._suspendTimer=null,E.state=\"suspending\";var ee=function(){E.state=\"suspended\",E._resumeAfterSuspend&&(delete E._resumeAfterSuspend,E._autoResume())};E.ctx.suspend().then(ee,ee)}},3e4),E}},_autoResume:function(){var E=this;if(E.ctx&&E.ctx.resume!==void 0&&q.usingWebAudio)return E.state===\"running\"&&E.ctx.state!==\"interrupted\"&&E._suspendTimer?(clearTimeout(E._suspendTimer),E._suspendTimer=null):E.state===\"suspended\"||E.state===\"running\"&&E.ctx.state===\"interrupted\"?(E.ctx.resume().then(function(){E.state=\"running\";for(var L=0;L<E._howls.length;L++)E._howls[L]._emit(\"resume\")}),E._suspendTimer&&(clearTimeout(E._suspendTimer),E._suspendTimer=null)):E.state===\"suspending\"&&(E._resumeAfterSuspend=!0),E}};var q=new me,O=function(E){E.src&&E.src.length!==0?this.init(E):console.error(\"An array of source files must be passed with any new Howl.\")};O.prototype={init:function(E){var L=this;return q.ctx||Ie(),L._autoplay=E.autoplay||!1,L._format=typeof E.format!=\"string\"?E.format:[E.format],L._html5=E.html5||!1,L._muted=E.mute||!1,L._loop=E.loop||!1,L._pool=E.pool||5,L._preload=typeof E.preload!=\"boolean\"&&E.preload!==\"metadata\"||E.preload,L._rate=E.rate||1,L._sprite=E.sprite||{},L._src=typeof E.src!=\"string\"?E.src:[E.src],L._volume=E.volume!==void 0?E.volume:1,L._xhr={method:E.xhr&&E.xhr.method?E.xhr.method:\"GET\",headers:E.xhr&&E.xhr.headers?E.xhr.headers:null,withCredentials:!(!E.xhr||!E.xhr.withCredentials)&&E.xhr.withCredentials},L._duration=0,L._state=\"unloaded\",L._sounds=[],L._endTimers={},L._queue=[],L._playLock=!1,L._onend=E.onend?[{fn:E.onend}]:[],L._onfade=E.onfade?[{fn:E.onfade}]:[],L._onload=E.onload?[{fn:E.onload}]:[],L._onloaderror=E.onloaderror?[{fn:E.onloaderror}]:[],L._onplayerror=E.onplayerror?[{fn:E.onplayerror}]:[],L._onpause=E.onpause?[{fn:E.onpause}]:[],L._onplay=E.onplay?[{fn:E.onplay}]:[],L._onstop=E.onstop?[{fn:E.onstop}]:[],L._onmute=E.onmute?[{fn:E.onmute}]:[],L._onvolume=E.onvolume?[{fn:E.onvolume}]:[],L._onrate=E.onrate?[{fn:E.onrate}]:[],L._onseek=E.onseek?[{fn:E.onseek}]:[],L._onunlock=E.onunlock?[{fn:E.onunlock}]:[],L._onresume=[],L._webAudio=q.usingWebAudio&&!L._html5,q.ctx!==void 0&&q.ctx&&q.autoUnlock&&q._unlockAudio(),q._howls.push(L),L._autoplay&&L._queue.push({event:\"play\",action:function(){L.play()}}),L._preload&&L._preload!==\"none\"&&L.load(),L},load:function(){var E=null;if(q.noAudio)this._emit(\"loaderror\",null,\"No audio support.\");else{typeof this._src==\"string\"&&(this._src=[this._src]);for(var L=0;L<this._src.length;L++){var N,ee;if(this._format&&this._format[L])N=this._format[L];else{if(typeof(ee=this._src[L])!=\"string\"){this._emit(\"loaderror\",null,\"Non-string found in selected audio sources - ignoring.\");continue}(N=/^data:audio\\/([^;,]+);/i.exec(ee))||(N=/\\.([^.]+)$/.exec(ee.split(\"?\",1)[0])),N&&(N=N[1].toLowerCase())}if(N||console.warn('No file extension was found. Consider using the \"format\" property or specify an extension.'),N&&q.codecs(N)){E=this._src[L];break}}if(E)return this._src=E,this._state=\"loading\",window.location.protocol===\"https:\"&&E.slice(0,5)===\"http:\"&&(this._html5=!0,this._webAudio=!1),new $(this),this._webAudio&&D(this),this;this._emit(\"loaderror\",null,\"No codec support for selected audio sources.\")}},play:function(E,L){var N=this,ee=null;if(typeof E==\"number\")ee=E,E=null;else{if(typeof E==\"string\"&&N._state===\"loaded\"&&!N._sprite[E])return null;if(E===void 0&&(E=\"__default\",!N._playLock)){for(var C=0,z=0;z<N._sounds.length;z++)N._sounds[z]._paused&&!N._sounds[z]._ended&&(C++,ee=N._sounds[z]._id);C===1?E=null:ee=null}}var X=ee?N._soundById(ee):N._inactiveSound();if(!X)return null;if(ee&&!E&&(E=X._sprite||\"__default\"),N._state!==\"loaded\"){X._sprite=E,X._ended=!1;var ne=X._id;return N._queue.push({event:\"play\",action:function(){N.play(ne)}}),ne}if(ee&&!X._paused)return L||N._loadQueue(\"play\"),X._id;N._webAudio&&q._autoResume();var Ve=Math.max(0,X._seek>0?X._seek:N._sprite[E][0]/1e3),pt=Math.max(0,(N._sprite[E][0]+N._sprite[E][1])/1e3-Ve),Ne=1e3*pt/Math.abs(X._rate),ae=N._sprite[E][0]/1e3,Me=(N._sprite[E][0]+N._sprite[E][1])/1e3;X._sprite=E,X._ended=!1;var Fe=function(){X._paused=!1,X._seek=Ve,X._start=ae,X._stop=Me,X._loop=!(!X._loop&&!N._sprite[E][2])};if(!(Ve>=Me)){var j=X._node;if(N._webAudio){var ye=function(){N._playLock=!1,Fe(),N._refreshBuffer(X);var Je=X._muted||N._muted?0:X._volume;j.gain.setValueAtTime(Je,q.ctx.currentTime),X._playStart=q.ctx.currentTime,j.bufferSource.start===void 0?X._loop?j.bufferSource.noteGrainOn(0,Ve,86400):j.bufferSource.noteGrainOn(0,Ve,pt):X._loop?j.bufferSource.start(0,Ve,86400):j.bufferSource.start(0,Ve,pt),Ne!==1/0&&(N._endTimers[X._id]=setTimeout(N._ended.bind(N,X),Ne)),L||setTimeout(function(){N._emit(\"play\",X._id),N._loadQueue()},0)};q.state===\"running\"&&q.ctx.state!==\"interrupted\"?ye():(N._playLock=!0,N.once(\"resume\",ye),N._clearTimer(X._id))}else{var Oe=function(){j.currentTime=Ve,j.muted=X._muted||N._muted||q._muted||j.muted,j.volume=X._volume*q.volume(),j.playbackRate=X._rate;try{var Je=j.play();if(Je&&typeof Promise!=\"undefined\"&&(Je instanceof Promise||typeof Je.then==\"function\")?(N._playLock=!0,Fe(),Je.then(function(){N._playLock=!1,j._unlocked=!0,L?N._loadQueue():N._emit(\"play\",X._id)}).catch(function(){N._playLock=!1,N._emit(\"playerror\",X._id,\"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.\"),X._ended=!0,X._paused=!0})):L||(N._playLock=!1,Fe(),N._emit(\"play\",X._id)),j.playbackRate=X._rate,j.paused)return void N._emit(\"playerror\",X._id,\"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.\");E!==\"__default\"||X._loop?N._endTimers[X._id]=setTimeout(N._ended.bind(N,X),Ne):(N._endTimers[X._id]=function(){N._ended(X),j.removeEventListener(\"ended\",N._endTimers[X._id],!1)},j.addEventListener(\"ended\",N._endTimers[X._id],!1))}catch(et){N._emit(\"playerror\",X._id,et)}};j.src===\"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA\"&&(j.src=N._src,j.load());var Le=window&&window.ejecta||!j.readyState&&q._navigator.isCocoonJS;if(j.readyState>=3||Le)Oe();else{N._playLock=!0,N._state=\"loading\";var De=function(){N._state=\"loaded\",Oe(),j.removeEventListener(q._canPlayEvent,De,!1)};j.addEventListener(q._canPlayEvent,De,!1),N._clearTimer(X._id)}}return X._id}N._ended(X)},pause:function(E){var L=this;if(L._state!==\"loaded\"||L._playLock)return L._queue.push({event:\"pause\",action:function(){L.pause(E)}}),L;for(var N=L._getSoundIds(E),ee=0;ee<N.length;ee++){L._clearTimer(N[ee]);var C=L._soundById(N[ee]);if(C&&!C._paused&&(C._seek=L.seek(N[ee]),C._rateSeek=0,C._paused=!0,L._stopFade(N[ee]),C._node))if(L._webAudio){if(!C._node.bufferSource)continue;C._node.bufferSource.stop===void 0?C._node.bufferSource.noteOff(0):C._node.bufferSource.stop(0),L._cleanBuffer(C._node)}else isNaN(C._node.duration)&&C._node.duration!==1/0||C._node.pause();arguments[1]||L._emit(\"pause\",C?C._id:null)}return L},stop:function(E,L){var N=this;if(N._state!==\"loaded\"||N._playLock)return N._queue.push({event:\"stop\",action:function(){N.stop(E)}}),N;for(var ee=N._getSoundIds(E),C=0;C<ee.length;C++){N._clearTimer(ee[C]);var z=N._soundById(ee[C]);z&&(z._seek=z._start||0,z._rateSeek=0,z._paused=!0,z._ended=!0,N._stopFade(ee[C]),z._node&&(N._webAudio?z._node.bufferSource&&(z._node.bufferSource.stop===void 0?z._node.bufferSource.noteOff(0):z._node.bufferSource.stop(0),N._cleanBuffer(z._node)):isNaN(z._node.duration)&&z._node.duration!==1/0||(z._node.currentTime=z._start||0,z._node.pause(),z._node.duration===1/0&&N._clearSound(z._node))),L||N._emit(\"stop\",z._id))}return N},mute:function(E,L){var N=this;if(N._state!==\"loaded\"||N._playLock)return N._queue.push({event:\"mute\",action:function(){N.mute(E,L)}}),N;if(L===void 0){if(typeof E!=\"boolean\")return N._muted;N._muted=E}for(var ee=N._getSoundIds(L),C=0;C<ee.length;C++){var z=N._soundById(ee[C]);z&&(z._muted=E,z._interval&&N._stopFade(z._id),N._webAudio&&z._node?z._node.gain.setValueAtTime(E?0:z._volume,q.ctx.currentTime):z._node&&(z._node.muted=!!q._muted||E),N._emit(\"mute\",z._id))}return N},volume:function(){var E,L,N,ee=this,C=arguments;if(C.length===0)return ee._volume;if(C.length===1||C.length===2&&C[1]===void 0){var z=ee._getSoundIds(),X=z.indexOf(C[0]);X>=0?L=parseInt(C[0],10):E=parseFloat(C[0])}else C.length>=2&&(E=parseFloat(C[0]),L=parseInt(C[1],10));if(!(E!==void 0&&E>=0&&E<=1))return(N=L?ee._soundById(L):ee._sounds[0])?N._volume:0;if(ee._state!==\"loaded\"||ee._playLock)return ee._queue.push({event:\"volume\",action:function(){ee.volume.apply(ee,C)}}),ee;L===void 0&&(ee._volume=E),L=ee._getSoundIds(L);for(var ne=0;ne<L.length;ne++)(N=ee._soundById(L[ne]))&&(N._volume=E,C[2]||ee._stopFade(L[ne]),ee._webAudio&&N._node&&!N._muted?N._node.gain.setValueAtTime(E,q.ctx.currentTime):N._node&&!N._muted&&(N._node.volume=E*q.volume()),ee._emit(\"volume\",N._id));return ee},fade:function(E,L,N,ee){var C=this;if(C._state!==\"loaded\"||C._playLock)return C._queue.push({event:\"fade\",action:function(){C.fade(E,L,N,ee)}}),C;E=Math.min(Math.max(0,parseFloat(E)),1),L=Math.min(Math.max(0,parseFloat(L)),1),N=parseFloat(N),C.volume(E,ee);for(var z=C._getSoundIds(ee),X=0;X<z.length;X++){var ne=C._soundById(z[X]);if(ne){if(ee||C._stopFade(z[X]),C._webAudio&&!ne._muted){var Ve=q.ctx.currentTime,pt=Ve+N/1e3;ne._volume=E,ne._node.gain.setValueAtTime(E,Ve),ne._node.gain.linearRampToValueAtTime(L,pt)}C._startFadeInterval(ne,E,L,N,z[X],ee===void 0)}}return C},_startFadeInterval:function(E,L,N,ee,C,z){var X=this,ne=L,Ve=N-L,pt=Math.abs(Ve/.01),Ne=Math.max(4,pt>0?ee/pt:ee),ae=Date.now();E._fadeTo=N,E._interval=setInterval(function(){var Me=(Date.now()-ae)/ee;ae=Date.now(),ne+=Ve*Me,ne=Math.round(100*ne)/100,ne=Ve<0?Math.max(N,ne):Math.min(N,ne),X._webAudio?E._volume=ne:X.volume(ne,E._id,!0),z&&(X._volume=ne),(N<L&&ne<=N||N>L&&ne>=N)&&(clearInterval(E._interval),E._interval=null,E._fadeTo=null,X.volume(N,E._id),X._emit(\"fade\",E._id))},Ne)},_stopFade:function(E){var L=this._soundById(E);return L&&L._interval&&(this._webAudio&&L._node.gain.cancelScheduledValues(q.ctx.currentTime),clearInterval(L._interval),L._interval=null,this.volume(L._fadeTo,E),L._fadeTo=null,this._emit(\"fade\",E)),this},loop:function(){var E,L,N,ee=this,C=arguments;if(C.length===0)return ee._loop;if(C.length===1){if(typeof C[0]!=\"boolean\")return!!(N=ee._soundById(parseInt(C[0],10)))&&N._loop;E=C[0],ee._loop=E}else C.length===2&&(E=C[0],L=parseInt(C[1],10));for(var z=ee._getSoundIds(L),X=0;X<z.length;X++)(N=ee._soundById(z[X]))&&(N._loop=E,ee._webAudio&&N._node&&N._node.bufferSource&&(N._node.bufferSource.loop=E,E&&(N._node.bufferSource.loopStart=N._start||0,N._node.bufferSource.loopEnd=N._stop,ee.playing(z[X])&&(ee.pause(z[X],!0),ee.play(z[X],!0)))));return ee},rate:function(){var E,L,N,ee=this,C=arguments;if(C.length===0)L=ee._sounds[0]._id;else if(C.length===1){var z=ee._getSoundIds(),X=z.indexOf(C[0]);X>=0?L=parseInt(C[0],10):E=parseFloat(C[0])}else C.length===2&&(E=parseFloat(C[0]),L=parseInt(C[1],10));if(typeof E!=\"number\")return(N=ee._soundById(L))?N._rate:ee._rate;if(ee._state!==\"loaded\"||ee._playLock)return ee._queue.push({event:\"rate\",action:function(){ee.rate.apply(ee,C)}}),ee;L===void 0&&(ee._rate=E),L=ee._getSoundIds(L);for(var ne=0;ne<L.length;ne++)if(N=ee._soundById(L[ne])){ee.playing(L[ne])&&(N._rateSeek=ee.seek(L[ne]),N._playStart=ee._webAudio?q.ctx.currentTime:N._playStart),N._rate=E,ee._webAudio&&N._node&&N._node.bufferSource?N._node.bufferSource.playbackRate.setValueAtTime(E,q.ctx.currentTime):N._node&&(N._node.playbackRate=E);var Ve=ee.seek(L[ne]),pt=(ee._sprite[N._sprite][0]+ee._sprite[N._sprite][1])/1e3-Ve,Ne=1e3*pt/Math.abs(N._rate);!ee._endTimers[L[ne]]&&N._paused||(ee._clearTimer(L[ne]),ee._endTimers[L[ne]]=setTimeout(ee._ended.bind(ee,N),Ne)),ee._emit(\"rate\",N._id)}return ee},seek:function(){var E,L,N=this,ee=arguments;if(ee.length===0)N._sounds.length&&(L=N._sounds[0]._id);else if(ee.length===1){var C=N._getSoundIds(),z=C.indexOf(ee[0]);z>=0?L=parseInt(ee[0],10):N._sounds.length&&(L=N._sounds[0]._id,E=parseFloat(ee[0]))}else ee.length===2&&(E=parseFloat(ee[0]),L=parseInt(ee[1],10));if(L===void 0)return 0;if(typeof E==\"number\"&&(N._state!==\"loaded\"||N._playLock))return N._queue.push({event:\"seek\",action:function(){N.seek.apply(N,ee)}}),N;var X=N._soundById(L);if(X){if(!(typeof E==\"number\"&&E>=0)){if(N._webAudio){var ne=N.playing(L)?q.ctx.currentTime-X._playStart:0,Ve=X._rateSeek?X._rateSeek-X._seek:0;return X._seek+(Ve+ne*Math.abs(X._rate))}return X._node.currentTime}var pt=N.playing(L);pt&&N.pause(L,!0),X._seek=E,X._ended=!1,N._clearTimer(L),N._webAudio||!X._node||isNaN(X._node.duration)||(X._node.currentTime=E);var Ne=function(){pt&&N.play(L,!0),N._emit(\"seek\",L)};if(pt&&!N._webAudio){var ae=function(){N._playLock?setTimeout(ae,0):Ne()};setTimeout(ae,0)}else Ne()}return N},playing:function(E){if(typeof E==\"number\"){var L=this._soundById(E);return!!L&&!L._paused}for(var N=0;N<this._sounds.length;N++)if(!this._sounds[N]._paused)return!0;return!1},duration:function(E){var L=this._duration,N=this._soundById(E);return N&&(L=this._sprite[N._sprite][1]/1e3),L},state:function(){return this._state},unload:function(){for(var E=this,L=E._sounds,N=0;N<L.length;N++)L[N]._paused||E.stop(L[N]._id),E._webAudio||(E._clearSound(L[N]._node),L[N]._node.removeEventListener(\"error\",L[N]._errorFn,!1),L[N]._node.removeEventListener(q._canPlayEvent,L[N]._loadFn,!1),L[N]._node.removeEventListener(\"ended\",L[N]._endFn,!1),q._releaseHtml5Audio(L[N]._node)),delete L[N]._node,E._clearTimer(L[N]._id);var ee=q._howls.indexOf(E);ee>=0&&q._howls.splice(ee,1);var C=!0;for(N=0;N<q._howls.length;N++)if(q._howls[N]._src===E._src||E._src.indexOf(q._howls[N]._src)>=0){C=!1;break}return H&&C&&delete H[E._src],q.noAudio=!1,E._state=\"unloaded\",E._sounds=[],E=null,null},on:function(E,L,N,ee){var C=this[\"_on\"+E];return typeof L==\"function\"&&C.push(ee?{id:N,fn:L,once:ee}:{id:N,fn:L}),this},off:function(E,L,N){var ee=this[\"_on\"+E],C=0;if(typeof L==\"number\"&&(N=L,L=null),L||N)for(C=0;C<ee.length;C++){var z=N===ee[C].id;if(L===ee[C].fn&&z||!L&&z){ee.splice(C,1);break}}else if(E)this[\"_on\"+E]=[];else{var X=Object.keys(this);for(C=0;C<X.length;C++)X[C].indexOf(\"_on\")===0&&Array.isArray(this[X[C]])&&(this[X[C]]=[])}return this},once:function(E,L,N){return this.on(E,L,N,1),this},_emit:function(E,L,N){for(var ee=this[\"_on\"+E],C=ee.length-1;C>=0;C--)ee[C].id&&ee[C].id!==L&&E!==\"load\"||(setTimeout(function(z){z.call(this,L,N)}.bind(this,ee[C].fn),0),ee[C].once&&this.off(E,ee[C].fn,ee[C].id));return this._loadQueue(E),this},_loadQueue:function(E){if(this._queue.length>0){var L=this._queue[0];L.event===E&&(this._queue.shift(),this._loadQueue()),E||L.action()}return this},_ended:function(E){var L=E._sprite;if(!this._webAudio&&E._node&&!E._node.paused&&!E._node.ended&&E._node.currentTime<E._stop)return setTimeout(this._ended.bind(this,E),100),this;var N=!(!E._loop&&!this._sprite[L][2]);if(this._emit(\"end\",E._id),!this._webAudio&&N&&this.stop(E._id,!0).play(E._id),this._webAudio&&N){this._emit(\"play\",E._id),E._seek=E._start||0,E._rateSeek=0,E._playStart=q.ctx.currentTime;var ee=1e3*(E._stop-E._start)/Math.abs(E._rate);this._endTimers[E._id]=setTimeout(this._ended.bind(this,E),ee)}return this._webAudio&&!N&&(E._paused=!0,E._ended=!0,E._seek=E._start||0,E._rateSeek=0,this._clearTimer(E._id),this._cleanBuffer(E._node),q._autoSuspend()),this._webAudio||N||this.stop(E._id,!0),this},_clearTimer:function(E){if(this._endTimers[E]){if(typeof this._endTimers[E]!=\"function\")clearTimeout(this._endTimers[E]);else{var L=this._soundById(E);L&&L._node&&L._node.removeEventListener(\"ended\",this._endTimers[E],!1)}delete this._endTimers[E]}return this},_soundById:function(E){for(var L=0;L<this._sounds.length;L++)if(E===this._sounds[L]._id)return this._sounds[L];return null},_inactiveSound:function(){this._drain();for(var E=0;E<this._sounds.length;E++)if(this._sounds[E]._ended)return this._sounds[E].reset();return new $(this)},_drain:function(){var E=this._pool,L=0,N=0;if(!(this._sounds.length<E)){for(N=0;N<this._sounds.length;N++)this._sounds[N]._ended&&L++;for(N=this._sounds.length-1;N>=0;N--){if(L<=E)return;this._sounds[N]._ended&&(this._webAudio&&this._sounds[N]._node&&this._sounds[N]._node.disconnect(0),this._sounds.splice(N,1),L--)}}},_getSoundIds:function(E){if(E===void 0){for(var L=[],N=0;N<this._sounds.length;N++)L.push(this._sounds[N]._id);return L}return[E]},_refreshBuffer:function(E){return E._node.bufferSource=q.ctx.createBufferSource(),E._node.bufferSource.buffer=H[this._src],E._panner?E._node.bufferSource.connect(E._panner):E._node.bufferSource.connect(E._node),E._node.bufferSource.loop=E._loop,E._loop&&(E._node.bufferSource.loopStart=E._start||0,E._node.bufferSource.loopEnd=E._stop||0),E._node.bufferSource.playbackRate.setValueAtTime(E._rate,q.ctx.currentTime),this},_cleanBuffer:function(E){var L=q._navigator&&q._navigator.vendor.indexOf(\"Apple\")>=0;if(q._scratchBuffer&&E.bufferSource&&(E.bufferSource.onended=null,E.bufferSource.disconnect(0),L))try{E.bufferSource.buffer=q._scratchBuffer}catch{}return E.bufferSource=null,this},_clearSound:function(E){/MSIE |Trident\\//.test(q._navigator&&q._navigator.userAgent)||(E.src=\"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA\")}};var $=function(E){this._parent=E,this.init()};$.prototype={init:function(){var E=this._parent;return this._muted=E._muted,this._loop=E._loop,this._volume=E._volume,this._rate=E._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite=\"__default\",this._id=++q._counter,E._sounds.push(this),this.create(),this},create:function(){var E=this._parent,L=q._muted||this._muted||this._parent._muted?0:this._volume;return E._webAudio?(this._node=q.ctx.createGain===void 0?q.ctx.createGainNode():q.ctx.createGain(),this._node.gain.setValueAtTime(L,q.ctx.currentTime),this._node.paused=!0,this._node.connect(q.masterGain)):q.noAudio||(this._node=q._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener(\"error\",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(q._canPlayEvent,this._loadFn,!1),this._endFn=this._endListener.bind(this),this._node.addEventListener(\"ended\",this._endFn,!1),this._node.src=E._src,this._node.preload=E._preload===!0?\"auto\":E._preload,this._node.volume=L*q.volume(),this._node.load()),this},reset:function(){var E=this._parent;return this._muted=E._muted,this._loop=E._loop,this._volume=E._volume,this._rate=E._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite=\"__default\",this._id=++q._counter,this},_errorListener:function(){this._parent._emit(\"loaderror\",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener(\"error\",this._errorFn,!1)},_loadListener:function(){var E=this._parent;E._duration=Math.ceil(10*this._node.duration)/10,Object.keys(E._sprite).length===0&&(E._sprite={__default:[0,1e3*E._duration]}),E._state!==\"loaded\"&&(E._state=\"loaded\",E._emit(\"load\"),E._loadQueue()),this._node.removeEventListener(q._canPlayEvent,this._loadFn,!1)},_endListener:function(){var E=this._parent;E._duration===1/0&&(E._duration=Math.ceil(10*this._node.duration)/10,E._sprite.__default[1]===1/0&&(E._sprite.__default[1]=1e3*E._duration),E._ended(this)),this._node.removeEventListener(\"ended\",this._endFn,!1)}};var H={},D=function(E){var L=E._src;if(H[L])return E._duration=H[L].duration,void Ce(E);if(/^data:[^;]+;base64,/.test(L)){for(var N=atob(L.split(\",\")[1]),ee=new Uint8Array(N.length),C=0;C<N.length;++C)ee[C]=N.charCodeAt(C);be(ee.buffer,E)}else{var z=new XMLHttpRequest;z.open(E._xhr.method,L,!0),z.withCredentials=E._xhr.withCredentials,z.responseType=\"arraybuffer\",E._xhr.headers&&Object.keys(E._xhr.headers).forEach(function(X){z.setRequestHeader(X,E._xhr.headers[X])}),z.onload=function(){var X=(z.status+\"\")[0];X===\"0\"||X===\"2\"||X===\"3\"?be(z.response,E):E._emit(\"loaderror\",null,\"Failed loading audio file with status: \"+z.status+\".\")},z.onerror=function(){E._webAudio&&(E._html5=!0,E._webAudio=!1,E._sounds=[],delete H[L],E.load())},Z(z)}},Z=function(E){try{E.send()}catch{E.onerror()}},be=function(E,L){var N=function(){L._emit(\"loaderror\",null,\"Decoding audio data failed.\")},ee=function(C){C&&L._sounds.length>0?(H[L._src]=C,Ce(L,C)):N()};typeof Promise!=\"undefined\"&&q.ctx.decodeAudioData.length===1?q.ctx.decodeAudioData(E).then(ee).catch(N):q.ctx.decodeAudioData(E,ee,N)},Ce=function(E,L){L&&!E._duration&&(E._duration=L.duration),Object.keys(E._sprite).length===0&&(E._sprite={__default:[0,1e3*E._duration]}),E._state!==\"loaded\"&&(E._state=\"loaded\",E._emit(\"load\"),E._loadQueue())},Ie=function(){if(q.usingWebAudio){try{typeof AudioContext!=\"undefined\"?q.ctx=new AudioContext:typeof webkitAudioContext!=\"undefined\"?q.ctx=new webkitAudioContext:q.usingWebAudio=!1}catch{q.usingWebAudio=!1}q.ctx||(q.usingWebAudio=!1);var E=/iP(hone|od|ad)/.test(q._navigator&&q._navigator.platform),L=q._navigator&&q._navigator.appVersion.match(/OS (\\d+)_(\\d+)_?(\\d+)?/),N=L?parseInt(L[1],10):null;if(E&&N&&N<9){var ee=/safari/.test(q._navigator&&q._navigator.userAgent.toLowerCase());q._navigator&&!ee&&(q.usingWebAudio=!1)}q.usingWebAudio&&(q.masterGain=q.ctx.createGain===void 0?q.ctx.createGainNode():q.ctx.createGain(),q.masterGain.gain.setValueAtTime(q._muted?0:q._volume,q.ctx.currentTime),q.masterGain.connect(q.ctx.destination)),q._setup()}};(Q=function(){return{Howler:q,Howl:O}}.apply(M,[]))===void 0||(S.exports=Q),M.Howler=q,M.Howl=O,b!==void 0?(b.HowlerGlobal=me,b.Howler=q,b.Howl=O,b.Sound=$):typeof window!=\"undefined\"&&(window.HowlerGlobal=me,window.Howler=q,window.Howl=O,window.Sound=$)})(),function(){var me;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(O){if(!this.ctx||!this.ctx.listener)return this;for(var $=this._howls.length-1;$>=0;$--)this._howls[$].stereo(O);return this},HowlerGlobal.prototype.pos=function(O,$,H){return this.ctx&&this.ctx.listener?($=typeof $!=\"number\"?this._pos[1]:$,H=typeof H!=\"number\"?this._pos[2]:H,typeof O!=\"number\"?this._pos:(this._pos=[O,$,H],this.ctx.listener.positionX!==void 0?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(O,$,H,D,Z,be){if(!this.ctx||!this.ctx.listener)return this;var Ce=this._orientation;return $=typeof $!=\"number\"?Ce[1]:$,H=typeof H!=\"number\"?Ce[2]:H,D=typeof D!=\"number\"?Ce[3]:D,Z=typeof Z!=\"number\"?Ce[4]:Z,be=typeof be!=\"number\"?Ce[5]:be,typeof O!=\"number\"?Ce:(this._orientation=[O,$,H,D,Z,be],this.ctx.listener.forwardX!==void 0?(this.ctx.listener.forwardX.setTargetAtTime(O,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime($,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(H,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(D,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(Z,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(be,Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(O,$,H,D,Z,be),this)},Howl.prototype.init=(me=Howl.prototype.init,function(O){return this._orientation=O.orientation||[1,0,0],this._stereo=O.stereo||null,this._pos=O.pos||null,this._pannerAttr={coneInnerAngle:O.coneInnerAngle!==void 0?O.coneInnerAngle:360,coneOuterAngle:O.coneOuterAngle!==void 0?O.coneOuterAngle:360,coneOuterGain:O.coneOuterGain!==void 0?O.coneOuterGain:0,distanceModel:O.distanceModel!==void 0?O.distanceModel:\"inverse\",maxDistance:O.maxDistance!==void 0?O.maxDistance:1e4,panningModel:O.panningModel!==void 0?O.panningModel:\"HRTF\",refDistance:O.refDistance!==void 0?O.refDistance:1,rolloffFactor:O.rolloffFactor!==void 0?O.rolloffFactor:1},this._onstereo=O.onstereo?[{fn:O.onstereo}]:[],this._onpos=O.onpos?[{fn:O.onpos}]:[],this._onorientation=O.onorientation?[{fn:O.onorientation}]:[],me.call(this,O)}),Howl.prototype.stereo=function(O,$){var H=this;if(!H._webAudio)return H;if(H._state!==\"loaded\")return H._queue.push({event:\"stereo\",action:function(){H.stereo(O,$)}}),H;var D=Howler.ctx.createStereoPanner===void 0?\"spatial\":\"stereo\";if($===void 0){if(typeof O!=\"number\")return H._stereo;H._stereo=O,H._pos=[O,0,0]}for(var Z=H._getSoundIds($),be=0;be<Z.length;be++){var Ce=H._soundById(Z[be]);if(Ce){if(typeof O!=\"number\")return Ce._stereo;Ce._stereo=O,Ce._pos=[O,0,0],Ce._node&&(Ce._pannerAttr.panningModel=\"equalpower\",Ce._panner&&Ce._panner.pan||q(Ce,D),D===\"spatial\"?Ce._panner.positionX!==void 0?(Ce._panner.positionX.setValueAtTime(O,Howler.ctx.currentTime),Ce._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),Ce._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):Ce._panner.setPosition(O,0,0):Ce._panner.pan.setValueAtTime(O,Howler.ctx.currentTime)),H._emit(\"stereo\",Ce._id)}}return H},Howl.prototype.pos=function(O,$,H,D){var Z=this;if(!Z._webAudio)return Z;if(Z._state!==\"loaded\")return Z._queue.push({event:\"pos\",action:function(){Z.pos(O,$,H,D)}}),Z;if($=typeof $!=\"number\"?0:$,H=typeof H!=\"number\"?-.5:H,D===void 0){if(typeof O!=\"number\")return Z._pos;Z._pos=[O,$,H]}for(var be=Z._getSoundIds(D),Ce=0;Ce<be.length;Ce++){var Ie=Z._soundById(be[Ce]);if(Ie){if(typeof O!=\"number\")return Ie._pos;Ie._pos=[O,$,H],Ie._node&&(Ie._panner&&!Ie._panner.pan||q(Ie,\"spatial\"),Ie._panner.positionX!==void 0?(Ie._panner.positionX.setValueAtTime(O,Howler.ctx.currentTime),Ie._panner.positionY.setValueAtTime($,Howler.ctx.currentTime),Ie._panner.positionZ.setValueAtTime(H,Howler.ctx.currentTime)):Ie._panner.setPosition(O,$,H)),Z._emit(\"pos\",Ie._id)}}return Z},Howl.prototype.orientation=function(O,$,H,D){var Z=this;if(!Z._webAudio)return Z;if(Z._state!==\"loaded\")return Z._queue.push({event:\"orientation\",action:function(){Z.orientation(O,$,H,D)}}),Z;if($=typeof $!=\"number\"?Z._orientation[1]:$,H=typeof H!=\"number\"?Z._orientation[2]:H,D===void 0){if(typeof O!=\"number\")return Z._orientation;Z._orientation=[O,$,H]}for(var be=Z._getSoundIds(D),Ce=0;Ce<be.length;Ce++){var Ie=Z._soundById(be[Ce]);if(Ie){if(typeof O!=\"number\")return Ie._orientation;Ie._orientation=[O,$,H],Ie._node&&(Ie._panner||(Ie._pos||(Ie._pos=Z._pos||[0,0,-.5]),q(Ie,\"spatial\")),Ie._panner.orientationX!==void 0?(Ie._panner.orientationX.setValueAtTime(O,Howler.ctx.currentTime),Ie._panner.orientationY.setValueAtTime($,Howler.ctx.currentTime),Ie._panner.orientationZ.setValueAtTime(H,Howler.ctx.currentTime)):Ie._panner.setOrientation(O,$,H)),Z._emit(\"orientation\",Ie._id)}}return Z},Howl.prototype.pannerAttr=function(){var O,$,H,D=this,Z=arguments;if(!D._webAudio)return D;if(Z.length===0)return D._pannerAttr;if(Z.length===1){if(typeof Z[0]!=\"object\")return(H=D._soundById(parseInt(Z[0],10)))?H._pannerAttr:D._pannerAttr;O=Z[0],$===void 0&&(O.pannerAttr||(O.pannerAttr={coneInnerAngle:O.coneInnerAngle,coneOuterAngle:O.coneOuterAngle,coneOuterGain:O.coneOuterGain,distanceModel:O.distanceModel,maxDistance:O.maxDistance,refDistance:O.refDistance,rolloffFactor:O.rolloffFactor,panningModel:O.panningModel}),D._pannerAttr={coneInnerAngle:O.pannerAttr.coneInnerAngle!==void 0?O.pannerAttr.coneInnerAngle:D._coneInnerAngle,coneOuterAngle:O.pannerAttr.coneOuterAngle!==void 0?O.pannerAttr.coneOuterAngle:D._coneOuterAngle,coneOuterGain:O.pannerAttr.coneOuterGain!==void 0?O.pannerAttr.coneOuterGain:D._coneOuterGain,distanceModel:O.pannerAttr.distanceModel!==void 0?O.pannerAttr.distanceModel:D._distanceModel,maxDistance:O.pannerAttr.maxDistance!==void 0?O.pannerAttr.maxDistance:D._maxDistance,refDistance:O.pannerAttr.refDistance!==void 0?O.pannerAttr.refDistance:D._refDistance,rolloffFactor:O.pannerAttr.rolloffFactor!==void 0?O.pannerAttr.rolloffFactor:D._rolloffFactor,panningModel:O.pannerAttr.panningModel!==void 0?O.pannerAttr.panningModel:D._panningModel})}else Z.length===2&&(O=Z[0],$=parseInt(Z[1],10));for(var be=D._getSoundIds($),Ce=0;Ce<be.length;Ce++)if(H=D._soundById(be[Ce])){var Ie=H._pannerAttr;Ie={coneInnerAngle:O.coneInnerAngle!==void 0?O.coneInnerAngle:Ie.coneInnerAngle,coneOuterAngle:O.coneOuterAngle!==void 0?O.coneOuterAngle:Ie.coneOuterAngle,coneOuterGain:O.coneOuterGain!==void 0?O.coneOuterGain:Ie.coneOuterGain,distanceModel:O.distanceModel!==void 0?O.distanceModel:Ie.distanceModel,maxDistance:O.maxDistance!==void 0?O.maxDistance:Ie.maxDistance,refDistance:O.refDistance!==void 0?O.refDistance:Ie.refDistance,rolloffFactor:O.rolloffFactor!==void 0?O.rolloffFactor:Ie.rolloffFactor,panningModel:O.panningModel!==void 0?O.panningModel:Ie.panningModel};var E=H._panner;E?(E.coneInnerAngle=Ie.coneInnerAngle,E.coneOuterAngle=Ie.coneOuterAngle,E.coneOuterGain=Ie.coneOuterGain,E.distanceModel=Ie.distanceModel,E.maxDistance=Ie.maxDistance,E.refDistance=Ie.refDistance,E.rolloffFactor=Ie.rolloffFactor,E.panningModel=Ie.panningModel):(H._pos||(H._pos=D._pos||[0,0,-.5]),q(H,\"spatial\"))}return D},Sound.prototype.init=function(O){return function(){var $=this._parent;this._orientation=$._orientation,this._stereo=$._stereo,this._pos=$._pos,this._pannerAttr=$._pannerAttr,O.call(this),this._stereo?$.stereo(this._stereo):this._pos&&$.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(O){return function(){var $=this._parent;return this._orientation=$._orientation,this._stereo=$._stereo,this._pos=$._pos,this._pannerAttr=$._pannerAttr,this._stereo?$.stereo(this._stereo):this._pos?$.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,$._refreshBuffer(this)),O.call(this)}}(Sound.prototype.reset);var q=function(O,$){($=$||\"spatial\")===\"spatial\"?(O._panner=Howler.ctx.createPanner(),O._panner.coneInnerAngle=O._pannerAttr.coneInnerAngle,O._panner.coneOuterAngle=O._pannerAttr.coneOuterAngle,O._panner.coneOuterGain=O._pannerAttr.coneOuterGain,O._panner.distanceModel=O._pannerAttr.distanceModel,O._panner.maxDistance=O._pannerAttr.maxDistance,O._panner.refDistance=O._pannerAttr.refDistance,O._panner.rolloffFactor=O._pannerAttr.rolloffFactor,O._panner.panningModel=O._pannerAttr.panningModel,O._panner.positionX!==void 0?(O._panner.positionX.setValueAtTime(O._pos[0],Howler.ctx.currentTime),O._panner.positionY.setValueAtTime(O._pos[1],Howler.ctx.currentTime),O._panner.positionZ.setValueAtTime(O._pos[2],Howler.ctx.currentTime)):O._panner.setPosition(O._pos[0],O._pos[1],O._pos[2]),O._panner.orientationX!==void 0?(O._panner.orientationX.setValueAtTime(O._orientation[0],Howler.ctx.currentTime),O._panner.orientationY.setValueAtTime(O._orientation[1],Howler.ctx.currentTime),O._panner.orientationZ.setValueAtTime(O._orientation[2],Howler.ctx.currentTime)):O._panner.setOrientation(O._orientation[0],O._orientation[1],O._orientation[2])):(O._panner=Howler.ctx.createStereoPanner(),O._panner.pan.setValueAtTime(O._stereo,Howler.ctx.currentTime)),O._panner.connect(O._node),O._paused||O._parent.pause(O._id,!0).play(O._id,!0)}}()}).call(this,v(4))},function(S,M){S.exports=`varying vec2 vTextureCoord;\nvarying vec2 vVertexPosition;\nvarying float vPercent;\nvarying float vDirection;\nvarying float vTransition;\nuniform sampler2D uSampler;\nvoid main() {\n\tvec4 outputColor;\n\tfloat percent = vPercent;\n\tfloat direction = vDirection;\n\tif (vTransition < 0.0) {\n\t\tpercent = 1.0 - percent;\n\t\tif ((vDirection > 1.5) && (vDirection < 2.5)) {\n\t\t\tdirection = 1.0;\n\t\t}\n\t\telse if ((vDirection > 0.5) && (vDirection < 1.5)) {\n\t\t\tdirection = 2.0;\n\t\t}\n\t\telse if ((vDirection > 2.5) && (vDirection < 3.5)) {\n\t\t\tdirection = 4.0;\n\t\t}\n\t\telse {\n\t\t\tdirection = 3.0;\n\t\t}\n\t}\n\tif ((direction > 1.5) && (direction < 2.5)) {\n\t\tif (vVertexPosition.y >= (1.0 - percent)) {\n\t\t\toutputColor = texture2D(uSampler, vTextureCoord);\n\t\t}\n\t\telse {\n\t\t\toutputColor = vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\t\tif ((vVertexPosition.y >= (1.0 - percent)) && (vVertexPosition.y <= ((1.0 - percent) + 0.2))) {\n\t\t\toutputColor = outputColor * ((vVertexPosition.y - (1.0 - percent)) / 0.2);\n\t\t}\n\t}\n\telse if ((direction > 0.5) && (direction < 1.5)) {\n\t\tif (vVertexPosition.y <= percent) {\n\t\t\toutputColor = texture2D(uSampler, vTextureCoord);\n\t\t}\n\t\telse {\n\t\t\toutputColor = vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\t\tif ((vVertexPosition.y <= percent) && (vVertexPosition.y >= (percent - 0.2))) {\n\t\t\toutputColor = outputColor * (1.0 - ((vVertexPosition.y - (percent - 0.2)) / 0.2));\n\t\t}\n\t}\n\telse if ((direction > 2.5) && (direction < 3.5)) {\n\t\tif (vVertexPosition.x <= percent) {\n\t\t\toutputColor = texture2D(uSampler, vTextureCoord);\n\t\t}\n\t\telse {\n\t\t\toutputColor = vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\t\tif ((vVertexPosition.x <= percent) && (vVertexPosition.x >= (percent - 0.2))) {\n\t\t\toutputColor = outputColor * (1.0 - ((vVertexPosition.x - (percent - 0.2)) / 0.2));\n\t\t}\n\t}\n\telse {\n\t\tif (vVertexPosition.x >= (1.0 - percent)) {\n\t\t\toutputColor = texture2D(uSampler, vTextureCoord);\n\t\t}\n\t\telse {\n\t\t\toutputColor = vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\t\tif ((vVertexPosition.x >= (1.0 - percent)) && (vVertexPosition.x <= ((1.0 - percent) + 0.2))) {\n\t\t\toutputColor = outputColor * ((vVertexPosition.x - (1.0 - percent)) / 0.2);\n\t\t}\n\t}\n\tgl_FragColor = outputColor;\n}\n`},function(S,M){S.exports=`attribute vec2 aVertexPosition;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvarying vec2 vVertexPosition;\nvarying float vPercent;\nvarying float vDirection;\nvarying float vTransition;\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\nuniform float percent;\nuniform float direction;\nuniform float transition;\nvec4 filterVertexPosition() {\n\tvec2 position = (aVertexPosition * max(outputFrame.zw, vec2(0.))) + outputFrame.xy;\n\treturn vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\nvec2 filterTextureCoord(vec2 aVertexPosition) {\n\treturn aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\nvoid main() {\n\tvTransition = transition;\n\tvDirection = direction;\n\tvPercent = percent;\n\tvVertexPosition = aVertexPosition;\n\tvec2 localVertexPosition = aVertexPosition;\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord(localVertexPosition);\n}\n`},function(S,M){S.exports=`varying vec2 vTextureCoord;\nuniform float percent;\nuniform sampler2D uSampler;\nuniform float transition;\nvoid main() {\n\tfloat alpha = (transition * (percent - 0.5)) + 0.5;\n\tvec4 color1 = texture2D(uSampler, vTextureCoord);\n\tgl_FragColor = color1 * alpha;\n}\n`},function(S,M,v){var b;(function(Q,me){var q=\"model\",O=\"name\",$=\"type\",H=\"vendor\",D=\"version\",Z=\"mobile\",be=\"tablet\",Ce=\"smarttv\",Ie=function(Ne){for(var ae={},Me=0;Me<Ne.length;Me++)ae[Ne[Me].toUpperCase()]=Ne[Me];return ae},E=function(Ne,ae){return typeof Ne==\"string\"&&L(ae).indexOf(L(Ne))!==-1},L=function(Ne){return Ne.toLowerCase()},N=function(Ne,ae){if(typeof Ne==\"string\")return Ne=Ne.replace(/^\\s\\s*/,\"\").replace(/\\s\\s*$/,\"\"),ae===void 0?Ne:Ne.substring(0,255)},ee=function(Ne,ae){for(var Me,Fe,j,ye,Oe,Le,De=0;De<ae.length&&!Oe;){var Je=ae[De],et=ae[De+1];for(Me=Fe=0;Me<Je.length&&!Oe;)if(Oe=Je[Me++].exec(Ne))for(j=0;j<et.length;j++)Le=Oe[++Fe],typeof(ye=et[j])==\"object\"&&ye.length>0?ye.length===2?typeof ye[1]==\"function\"?this[ye[0]]=ye[1].call(this,Le):this[ye[0]]=ye[1]:ye.length===3?typeof ye[1]!=\"function\"||ye[1].exec&&ye[1].test?this[ye[0]]=Le?Le.replace(ye[1],ye[2]):void 0:this[ye[0]]=Le?ye[1].call(this,Le,ye[2]):void 0:ye.length===4&&(this[ye[0]]=Le?ye[3].call(this,Le.replace(ye[1],ye[2])):void 0):this[ye]=Le||void 0;De+=2}},C=function(Ne,ae){for(var Me in ae)if(typeof ae[Me]==\"object\"&&ae[Me].length>0){for(var Fe=0;Fe<ae[Me].length;Fe++)if(E(ae[Me][Fe],Ne))return Me===\"?\"?void 0:Me}else if(E(ae[Me],Ne))return Me===\"?\"?void 0:Me;return Ne},z={ME:\"4.90\",\"NT 3.11\":\"NT3.51\",\"NT 4.0\":\"NT4.0\",2e3:\"NT 5.0\",XP:[\"NT 5.1\",\"NT 5.2\"],Vista:\"NT 6.0\",7:\"NT 6.1\",8:\"NT 6.2\",8.1:\"NT 6.3\",10:[\"NT 6.4\",\"NT 10.0\"],RT:\"ARM\"},X={browser:[[/\\b(?:crmo|crios)\\/([\\w\\.]+)/i],[D,[O,\"Chrome\"]],[/edg(?:e|ios|a)?\\/([\\w\\.]+)/i],[D,[O,\"Edge\"]],[/(opera mini)\\/([-\\w\\.]+)/i,/(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i,/(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i],[O,D],[/opios[\\/ ]+([\\w\\.]+)/i],[D,[O,\"Opera Mini\"]],[/\\bopr\\/([\\w\\.]+)/i],[D,[O,\"Opera\"]],[/(kindle)\\/([\\w\\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\\/ ]?([\\w\\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\\/ ]?([\\w\\.]*)/i,/(ba?idubrowser)[\\/ ]?([\\w\\.]+)/i,/(?:ms|\\()(ie) ([\\w\\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\\/([-\\w\\.]+)/i,/(weibo)__([\\d\\.]+)/i],[O,D],[/(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i],[D,[O,\"UCBrowser\"]],[/\\bqbcore\\/([\\w\\.]+)/i],[D,[O,\"WeChat(Win) Desktop\"]],[/micromessenger\\/([\\w\\.]+)/i],[D,[O,\"WeChat\"]],[/konqueror\\/([\\w\\.]+)/i],[D,[O,\"Konqueror\"]],[/trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i],[D,[O,\"IE\"]],[/yabrowser\\/([\\w\\.]+)/i],[D,[O,\"Yandex\"]],[/(avast|avg)\\/([\\w\\.]+)/i],[[O,/(.+)/,\"$1 Secure Browser\"],D],[/\\bfocus\\/([\\w\\.]+)/i],[D,[O,\"Firefox Focus\"]],[/\\bopt\\/([\\w\\.]+)/i],[D,[O,\"Opera Touch\"]],[/coc_coc\\w+\\/([\\w\\.]+)/i],[D,[O,\"Coc Coc\"]],[/dolfin\\/([\\w\\.]+)/i],[D,[O,\"Dolphin\"]],[/coast\\/([\\w\\.]+)/i],[D,[O,\"Opera Coast\"]],[/miuibrowser\\/([\\w\\.]+)/i],[D,[O,\"MIUI Browser\"]],[/fxios\\/([-\\w\\.]+)/i],[D,[O,\"Firefox\"]],[/\\bqihu|(qi?ho?o?|360)browser/i],[[O,\"360 Browser\"]],[/(oculus|samsung|sailfish)browser\\/([\\w\\.]+)/i],[[O,/(.+)/,\"$1 Browser\"],D],[/(comodo_dragon)\\/([\\w\\.]+)/i],[[O,/_/g,\" \"],D],[/(electron)\\/([\\w\\.]+) safari/i,/(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\\/ ]?([\\w\\.]+)/i],[O,D],[/(metasr)[\\/ ]?([\\w\\.]+)/i,/(lbbrowser)/i],[O],[/((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i],[[O,\"Facebook\"],D],[/safari (line)\\/([\\w\\.]+)/i,/\\b(line)\\/([\\w\\.]+)\\/iab/i,/(chromium|instagram)[\\/ ]([-\\w\\.]+)/i],[O,D],[/\\bgsa\\/([\\w\\.]+) .*safari\\//i],[D,[O,\"GSA\"]],[/headlesschrome(?:\\/([\\w\\.]+)| )/i],[D,[O,\"Chrome Headless\"]],[/ wv\\).+(chrome)\\/([\\w\\.]+)/i],[[O,\"Chrome WebView\"],D],[/droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i],[D,[O,\"Android Browser\"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i],[O,D],[/version\\/([\\w\\.]+) .*mobile\\/\\w+ (safari)/i],[D,[O,\"Mobile Safari\"]],[/version\\/([\\w\\.]+) .*(mobile ?safari|safari)/i],[D,O],[/webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i],[O,[D,C,{\"1.0\":\"/8\",1.2:\"/1\",1.3:\"/3\",\"2.0\":\"/412\",\"2.0.2\":\"/416\",\"2.0.3\":\"/417\",\"2.0.4\":\"/419\",\"?\":\"/\"}]],[/(webkit|khtml)\\/([\\w\\.]+)/i],[O,D],[/(navigator|netscape\\d?)\\/([-\\w\\.]+)/i],[[O,\"Netscape\"],D],[/mobile vr; rv:([\\w\\.]+)\\).+firefox/i],[D,[O,\"Firefox Reality\"]],[/ekiohf.+(flow)\\/([\\w\\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\\/ ]?([\\w\\.\\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,/(firefox)\\/([\\w\\.]+)/i,/(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,/(links) \\(([\\w\\.]+)/i],[O,D]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\\)]/i],[[\"architecture\",\"amd64\"]],[/(ia32(?=;))/i],[[\"architecture\",L]],[/((?:i[346]|x)86)[;\\)]/i],[[\"architecture\",\"ia32\"]],[/\\b(aarch64|arm(v?8e?l?|_?64))\\b/i],[[\"architecture\",\"arm64\"]],[/\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i],[[\"architecture\",\"armhf\"]],[/windows (ce|mobile); ppc;/i],[[\"architecture\",\"arm\"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\\))/i],[[\"architecture\",/ower/,\"\",L]],[/(sun4\\w)[;\\)]/i],[[\"architecture\",\"sparc\"]],[/((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i],[[\"architecture\",L]]],device:[[/\\b(sch-i[89]0\\d|shw-m380s|sm-[pt]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i],[q,[H,\"Samsung\"],[$,be]],[/\\b((?:s[cgp]h|gt|sm)-\\w+|galaxy nexus)/i,/samsung[- ]([-\\w]+)/i,/sec-(sgh\\w+)/i],[q,[H,\"Samsung\"],[$,Z]],[/\\((ip(?:hone|od)[\\w ]*);/i],[q,[H,\"Apple\"],[$,Z]],[/\\((ipad);[-\\w\\),; ]+apple/i,/applecoremedia\\/[\\w\\.]+ \\((ipad)/i,/\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i],[q,[H,\"Apple\"],[$,be]],[/\\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\\d{2})\\b(?!.+d\\/s)/i],[q,[H,\"Huawei\"],[$,be]],[/(?:huawei|honor)([-\\w ]+)[;\\)]/i,/\\b(nexus 6p|\\w{2,4}-[atu]?[ln][01259x][012359][an]?)\\b(?!.+d\\/s)/i],[q,[H,\"Huawei\"],[$,Z]],[/\\b(poco[\\w ]+)(?: bui|\\))/i,/\\b; (\\w+) build\\/hm\\1/i,/\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i,/\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i,/\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\\))/i],[[q,/_/g,\" \"],[H,\"Xiaomi\"],[$,Z]],[/\\b(mi[-_ ]?(?:pad)(?:[\\w_ ]+))(?: bui|\\))/i],[[q,/_/g,\" \"],[H,\"Xiaomi\"],[$,be]],[/; (\\w+) bui.+ oppo/i,/\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i],[q,[H,\"OPPO\"],[$,Z]],[/vivo (\\w+)(?: bui|\\))/i,/\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i],[q,[H,\"Vivo\"],[$,Z]],[/\\b(rmx[12]\\d{3})(?: bui|;|\\))/i],[q,[H,\"Realme\"],[$,Z]],[/\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,/\\bmot(?:orola)?[- ](\\w*)/i,/((?:moto[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i],[q,[H,\"Motorola\"],[$,Z]],[/\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i],[q,[H,\"Motorola\"],[$,be]],[/((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i],[q,[H,\"LG\"],[$,be]],[/(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,/\\blg[-e;\\/ ]+((?!browser|netcast|android tv)\\w+)/i,/\\blg-?([\\d\\w]+) bui/i],[q,[H,\"LG\"],[$,Z]],[/(ideatab[-\\w ]+)/i,/lenovo ?(s[56]000[-\\w]+|tab(?:[\\w ]+)|yt[-\\d\\w]{6}|tb[-\\d\\w]{6})/i],[q,[H,\"Lenovo\"],[$,be]],[/(?:maemo|nokia).*(n900|lumia \\d+)/i,/nokia[-_ ]?([-\\w\\.]*)/i],[[q,/_/g,\" \"],[H,\"Nokia\"],[$,Z]],[/(pixel c)\\b/i],[q,[H,\"Google\"],[$,be]],[/droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i],[q,[H,\"Google\"],[$,Z]],[/droid.+ ([c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i],[q,[H,\"Sony\"],[$,Z]],[/sony tablet [ps]/i,/\\b(?:sony)?sgp\\w+(?: bui|\\))/i],[[q,\"Xperia Tablet\"],[H,\"Sony\"],[$,be]],[/ (kb2005|in20[12]5|be20[12][59])\\b/i,/(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i],[q,[H,\"OnePlus\"],[$,Z]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\\))/i,/(kf[a-z]+)( bui|\\)).+silk\\//i],[q,[H,\"Amazon\"],[$,be]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i],[[q,/(.+)/g,\"Fire Phone $1\"],[H,\"Amazon\"],[$,Z]],[/(playbook);[-\\w\\),; ]+(rim)/i],[q,H,[$,be]],[/\\b((?:bb[a-f]|st[hv])100-\\d)/i,/\\(bb10; (\\w+)/i],[q,[H,\"BlackBerry\"],[$,Z]],[/(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i],[q,[H,\"ASUS\"],[$,be]],[/ (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i],[q,[H,\"ASUS\"],[$,Z]],[/(nexus 9)/i],[q,[H,\"HTC\"],[$,be]],[/(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i,/(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\\w]*)/i],[H,[q,/_/g,\" \"],[$,Z]],[/droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i],[q,[H,\"Acer\"],[$,be]],[/droid.+; (m[1-5] note) bui/i,/\\bmz-([-\\w]{2,})/i],[q,[H,\"Meizu\"],[$,Z]],[/\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i],[q,[H,\"Sharp\"],[$,Z]],[/(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\\w]*)/i,/(hp) ([\\w ]+\\w)/i,/(asus)-?(\\w+)/i,/(microsoft); (lumia[\\w ]+)/i,/(lenovo)[-_ ]?([-\\w]+)/i,/(jolla)/i,/(oppo) ?([\\w ]+) bui/i],[H,q,[$,Z]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\\/([\\w\\.]+)/i,/(nook)[\\w ]+build\\/(\\w+)/i,/(dell) (strea[kpr\\d ]*[\\dko])/i,/(le[- ]+pan)[- ]+(\\w{1,9}) bui/i,/(trinity)[- ]*(t\\d{3}) bui/i,/(gigaset)[- ]+(q\\w{1,9}) bui/i,/(vodafone) ([\\w ]+)(?:\\)| bui)/i],[H,q,[$,be]],[/(surface duo)/i],[q,[H,\"Microsoft\"],[$,be]],[/droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i],[q,[H,\"Fairphone\"],[$,Z]],[/(u304aa)/i],[q,[H,\"AT&T\"],[$,Z]],[/\\bsie-(\\w*)/i],[q,[H,\"Siemens\"],[$,Z]],[/\\b(rct\\w+) b/i],[q,[H,\"RCA\"],[$,be]],[/\\b(venue[\\d ]{2,7}) b/i],[q,[H,\"Dell\"],[$,be]],[/\\b(q(?:mv|ta)\\w+) b/i],[q,[H,\"Verizon\"],[$,be]],[/\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i],[q,[H,\"Barnes & Noble\"],[$,be]],[/\\b(tm\\d{3}\\w+) b/i],[q,[H,\"NuVision\"],[$,be]],[/\\b(k88) b/i],[q,[H,\"ZTE\"],[$,be]],[/\\b(nx\\d{3}j) b/i],[q,[H,\"ZTE\"],[$,Z]],[/\\b(gen\\d{3}) b.+49h/i],[q,[H,\"Swiss\"],[$,Z]],[/\\b(zur\\d{3}) b/i],[q,[H,\"Swiss\"],[$,be]],[/\\b((zeki)?tb.*\\b) b/i],[q,[H,\"Zeki\"],[$,be]],[/\\b([yr]\\d{2}) b/i,/\\b(dragon[- ]+touch |dt)(\\w{5}) b/i],[[H,\"Dragon Touch\"],q,[$,be]],[/\\b(ns-?\\w{0,9}) b/i],[q,[H,\"Insignia\"],[$,be]],[/\\b((nxa|next)-?\\w{0,9}) b/i],[q,[H,\"NextBook\"],[$,be]],[/\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[H,\"Voice\"],q,[$,Z]],[/\\b(lvtel\\-)?(v1[12]) b/i],[[H,\"LvTel\"],q,[$,Z]],[/\\b(ph-1) /i],[q,[H,\"Essential\"],[$,Z]],[/\\b(v(100md|700na|7011|917g).*\\b) b/i],[q,[H,\"Envizen\"],[$,be]],[/\\b(trio[-\\w\\. ]+) b/i],[q,[H,\"MachSpeed\"],[$,be]],[/\\btu_(1491) b/i],[q,[H,\"Rotor\"],[$,be]],[/(shield[\\w ]+) b/i],[q,[H,\"Nvidia\"],[$,be]],[/(sprint) (\\w+)/i],[H,q,[$,Z]],[/(kin\\.[onetw]{3})/i],[[q,/\\./g,\" \"],[H,\"Microsoft\"],[$,Z]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i],[q,[H,\"Zebra\"],[$,be]],[/droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i],[q,[H,\"Zebra\"],[$,Z]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[H,q,[$,\"console\"]],[/droid.+; (shield) bui/i],[q,[H,\"Nvidia\"],[$,\"console\"]],[/(playstation [345portablevi]+)/i],[q,[H,\"Sony\"],[$,\"console\"]],[/\\b(xbox(?: one)?(?!; xbox))[\\); ]/i],[q,[H,\"Microsoft\"],[$,\"console\"]],[/smart-tv.+(samsung)/i],[H,[$,Ce]],[/hbbtv.+maple;(\\d+)/i],[[q,/^/,\"SmartTV\"],[H,\"Samsung\"],[$,Ce]],[/(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i],[[H,\"LG\"],[$,Ce]],[/(apple) ?tv/i],[H,[q,\"Apple TV\"],[$,Ce]],[/crkey/i],[[q,\"Chromecast\"],[H,\"Google\"],[$,Ce]],[/droid.+aft(\\w)( bui|\\))/i],[q,[H,\"Amazon\"],[$,Ce]],[/\\(dtv[\\);].+(aquos)/i],[q,[H,\"Sharp\"],[$,Ce]],[/\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i,/hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w ]*; *(\\w[^;]*);([^;]*)/i],[[H,N],[q,N],[$,Ce]],[/\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i],[[$,Ce]],[/((pebble))app/i],[H,q,[$,\"wearable\"]],[/droid.+; (glass) \\d/i],[q,[H,\"Google\"],[$,\"wearable\"]],[/droid.+; (wt63?0{2,3})\\)/i],[q,[H,\"Zebra\"],[$,\"wearable\"]],[/(quest( 2)?)/i],[q,[H,\"Facebook\"],[$,\"wearable\"]],[/(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i],[H,[$,\"embedded\"]],[/droid .+?; ([^;]+?)(?: bui|\\) applew).+? mobile safari/i],[q,[$,Z]],[/droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i],[q,[$,be]],[/\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i],[[$,be]],[/(phone|mobile(?:[;\\/]| safari)|pda(?=.+windows ce))/i],[[$,Z]],[/(android[-\\w\\. ]{0,9});.+buil/i],[q,[H,\"Generic\"]]],engine:[[/windows.+ edge\\/([\\w\\.]+)/i],[D,[O,\"EdgeHTML\"]],[/webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i],[D,[O,\"Blink\"]],[/(presto)\\/([\\w\\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\\/([\\w\\.]+)/i,/ekioh(flow)\\/([\\w\\.]+)/i,/(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i,/(icab)[\\/ ]([23]\\.[\\d\\.]+)/i],[O,D],[/rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i],[D,O]],os:[[/microsoft (windows) (vista|xp)/i],[O,D],[/(windows) nt 6\\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\\/ ]?([\\d\\.\\w ]*)/i,/(windows)[\\/ ]?([ntce\\d\\. ]+\\w)(?!.+xbox)/i],[O,[D,C,z]],[/(win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i],[[O,\"Windows\"],[D,C,z]],[/ip[honead]{2,4}\\b(?:.*os ([\\w]+) like mac|; opera)/i,/cfnetwork\\/.+darwin/i],[[D,/_/g,\".\"],[O,\"iOS\"]],[/(mac os x) ?([\\w\\. ]*)/i,/(macintosh|mac_powerpc\\b)(?!.+haiku)/i],[[O,\"Mac OS\"],[D,/_/g,\".\"]],[/droid ([\\w\\.]+)\\b.+(android[- ]x86)/i],[D,O],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\\/ ]?([\\w\\.]*)/i,/(blackberry)\\w*\\/([\\w\\.]*)/i,/(tizen|kaios)[\\/ ]([\\w\\.]+)/i,/\\((series40);/i],[O,D],[/\\(bb(10);/i],[D,[O,\"BlackBerry\"]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\\/ ]?([\\w\\.]*)/i],[D,[O,\"Symbian\"]],[/mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i],[D,[O,\"Firefox OS\"]],[/web0s;.+rt(tv)/i,/\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i],[D,[O,\"webOS\"]],[/crkey\\/([\\d\\.]+)/i],[D,[O,\"Chromecast\"]],[/(cros) [\\w]+ ([\\w\\.]+\\w)/i],[[O,\"Chromium OS\"],D],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\\);]+)/i,/\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i,/(mint)[\\/\\(\\) ]?(\\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,/(hurd|linux) ?([\\w\\.]*)/i,/(gnu) ?([\\w\\.]*)/i,/\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i,/(haiku) (\\w+)/i],[O,D],[/(sunos) ?([\\w\\.\\d]*)/i],[[O,\"Solaris\"],D],[/((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i,/(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i,/\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\\w\\.]*)/i],[O,D]]},ne=function(Ne,ae){if(typeof Ne==\"object\"&&(ae=Ne,Ne=void 0),!(this instanceof ne))return new ne(Ne,ae).getResult();var Me=Ne||(Q!==void 0&&Q.navigator&&Q.navigator.userAgent?Q.navigator.userAgent:\"\"),Fe=ae?function(j,ye){var Oe={};for(var Le in j)ye[Le]&&ye[Le].length%2==0?Oe[Le]=ye[Le].concat(j[Le]):Oe[Le]=j[Le];return Oe}(X,ae):X;return this.getBrowser=function(){var j,ye={};return ye[O]=void 0,ye[D]=void 0,ee.call(ye,Me,Fe.browser),ye.major=typeof(j=ye.version)==\"string\"?j.replace(/[^\\d\\.]/g,\"\").split(\".\")[0]:void 0,ye},this.getCPU=function(){var j={architecture:void 0};return ee.call(j,Me,Fe.cpu),j},this.getDevice=function(){var j={vendor:void 0,model:void 0,type:void 0};return ee.call(j,Me,Fe.device),j},this.getEngine=function(){var j={name:void 0,version:void 0};return ee.call(j,Me,Fe.engine),j},this.getOS=function(){var j={name:void 0,version:void 0};return ee.call(j,Me,Fe.os),j},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Me},this.setUA=function(j){return Me=typeof j==\"string\"&&j.length>255?N(j,255):j,this},this.setUA(Me),this};ne.VERSION=\"1.0.2\",ne.BROWSER=Ie([O,D,\"major\"]),ne.CPU=Ie([\"architecture\"]),ne.DEVICE=Ie([q,H,$,\"console\",Z,Ce,be,\"wearable\",\"embedded\"]),ne.ENGINE=ne.OS=Ie([O,D]),M!==void 0?(S!==void 0&&S.exports&&(M=S.exports=ne),M.UAParser=ne):v(64)?(b=function(){return ne}.call(M,v,M,S))===void 0||(S.exports=b):Q!==void 0&&(Q.UAParser=ne);var Ve=Q!==void 0&&(Q.jQuery||Q.Zepto);if(Ve&&!Ve.ua){var pt=new ne;Ve.ua=pt.getResult(),Ve.ua.get=function(){return pt.getUA()},Ve.ua.set=function(Ne){pt.setUA(Ne);var ae=pt.getResult();for(var Me in ae)Ve.ua[Me]=ae[Me]}}})(typeof window==\"object\"?window:this)},function(S,M,v){(function(b){var Q=b!==void 0&&b||typeof self!=\"undefined\"&&self||window,me=Function.prototype.apply;function q(O,$){this._id=O,this._clearFn=$}M.setTimeout=function(){return new q(me.call(setTimeout,Q,arguments),clearTimeout)},M.setInterval=function(){return new q(me.call(setInterval,Q,arguments),clearInterval)},M.clearTimeout=M.clearInterval=function(O){O&&O.close()},q.prototype.unref=q.prototype.ref=function(){},q.prototype.close=function(){this._clearFn.call(Q,this._id)},M.enroll=function(O,$){clearTimeout(O._idleTimeoutId),O._idleTimeout=$},M.unenroll=function(O){clearTimeout(O._idleTimeoutId),O._idleTimeout=-1},M._unrefActive=M.active=function(O){clearTimeout(O._idleTimeoutId);var $=O._idleTimeout;$>=0&&(O._idleTimeoutId=setTimeout(function(){O._onTimeout&&O._onTimeout()},$))},v(56),M.setImmediate=typeof self!=\"undefined\"&&self.setImmediate||b!==void 0&&b.setImmediate||this&&this.setImmediate,M.clearImmediate=typeof self!=\"undefined\"&&self.clearImmediate||b!==void 0&&b.clearImmediate||this&&this.clearImmediate}).call(this,v(4))},function(S,M,v){(function(b,Q){(function(me,q){if(!me.setImmediate){var O,$,H,D,Z,be=1,Ce={},Ie=!1,E=me.document,L=Object.getPrototypeOf&&Object.getPrototypeOf(me);L=L&&L.setTimeout?L:me,{}.toString.call(me.process)===\"[object process]\"?O=function(C){Q.nextTick(function(){ee(C)})}:function(){if(me.postMessage&&!me.importScripts){var C=!0,z=me.onmessage;return me.onmessage=function(){C=!1},me.postMessage(\"\",\"*\"),me.onmessage=z,C}}()?(D=\"setImmediate$\"+Math.random()+\"$\",Z=function(C){C.source===me&&typeof C.data==\"string\"&&C.data.indexOf(D)===0&&ee(+C.data.slice(D.length))},me.addEventListener?me.addEventListener(\"message\",Z,!1):me.attachEvent(\"onmessage\",Z),O=function(C){me.postMessage(D+C,\"*\")}):me.MessageChannel?((H=new MessageChannel).port1.onmessage=function(C){ee(C.data)},O=function(C){H.port2.postMessage(C)}):E&&\"onreadystatechange\"in E.createElement(\"script\")?($=E.documentElement,O=function(C){var z=E.createElement(\"script\");z.onreadystatechange=function(){ee(C),z.onreadystatechange=null,$.removeChild(z),z=null},$.appendChild(z)}):O=function(C){setTimeout(ee,0,C)},L.setImmediate=function(C){typeof C!=\"function\"&&(C=new Function(\"\"+C));for(var z=new Array(arguments.length-1),X=0;X<z.length;X++)z[X]=arguments[X+1];var ne={callback:C,args:z};return Ce[be]=ne,O(be),be++},L.clearImmediate=N}function N(C){delete Ce[C]}function ee(C){if(Ie)setTimeout(ee,0,C);else{var z=Ce[C];if(z){Ie=!0;try{(function(X){var ne=X.callback,Ve=X.args;switch(Ve.length){case 0:ne();break;case 1:ne(Ve[0]);break;case 2:ne(Ve[0],Ve[1]);break;case 3:ne(Ve[0],Ve[1],Ve[2]);break;default:ne.apply(void 0,Ve)}})(z)}finally{N(C),Ie=!1}}}}})(typeof self==\"undefined\"?b===void 0?this:b:self)}).call(this,v(4),v(57))},function(S,M){var v,b,Q=S.exports={};function me(){throw new Error(\"setTimeout has not been defined\")}function q(){throw new Error(\"clearTimeout has not been defined\")}function O(L){if(v===setTimeout)return setTimeout(L,0);if((v===me||!v)&&setTimeout)return v=setTimeout,setTimeout(L,0);try{return v(L,0)}catch{try{return v.call(null,L,0)}catch{return v.call(this,L,0)}}}(function(){try{v=typeof setTimeout==\"function\"?setTimeout:me}catch{v=me}try{b=typeof clearTimeout==\"function\"?clearTimeout:q}catch{b=q}})();var $,H=[],D=!1,Z=-1;function be(){D&&$&&(D=!1,$.length?H=$.concat(H):Z=-1,H.length&&Ce())}function Ce(){if(!D){var L=O(be);D=!0;for(var N=H.length;N;){for($=H,H=[];++Z<N;)$&&$[Z].run();Z=-1,N=H.length}$=null,D=!1,function(ee){if(b===clearTimeout)return clearTimeout(ee);if((b===q||!b)&&clearTimeout)return b=clearTimeout,clearTimeout(ee);try{b(ee)}catch{try{return b.call(null,ee)}catch{return b.call(this,ee)}}}(L)}}function Ie(L,N){this.fun=L,this.array=N}function E(){}Q.nextTick=function(L){var N=new Array(arguments.length-1);if(arguments.length>1)for(var ee=1;ee<arguments.length;ee++)N[ee-1]=arguments[ee];H.push(new Ie(L,N)),H.length!==1||D||O(Ce)},Ie.prototype.run=function(){this.fun.apply(null,this.array)},Q.title=\"browser\",Q.browser=!0,Q.env={},Q.argv=[],Q.version=\"\",Q.versions={},Q.on=E,Q.addListener=E,Q.once=E,Q.off=E,Q.removeListener=E,Q.removeAllListeners=E,Q.emit=E,Q.prependListener=E,Q.prependOnceListener=E,Q.listeners=function(L){return[]},Q.binding=function(L){throw new Error(\"process.binding is not supported\")},Q.cwd=function(){return\"/\"},Q.chdir=function(L){throw new Error(\"process.chdir is not supported\")},Q.umask=function(){return 0}},function(S,M,v){(function(b,Q){var me;/*! https://mths.be/punycode v1.4.1 by @mathias */(function(q){M&&M.nodeType,b&&b.nodeType;var O=typeof Q==\"object\"&&Q;O.global!==O&&O.window!==O&&O.self;var $,H=2147483647,D=/^xn--/,Z=/[^\\x20-\\x7E]/,be=/[\\x2E\\u3002\\uFF0E\\uFF61]/g,Ce={overflow:\"Overflow: input needs wider integers to process\",\"not-basic\":\"Illegal input >= 0x80 (not a basic code point)\",\"invalid-input\":\"Invalid input\"},Ie=Math.floor,E=String.fromCharCode;function L(Ne){throw new RangeError(Ce[Ne])}function N(Ne,ae){for(var Me=Ne.length,Fe=[];Me--;)Fe[Me]=ae(Ne[Me]);return Fe}function ee(Ne,ae){var Me=Ne.split(\"@\"),Fe=\"\";return Me.length>1&&(Fe=Me[0]+\"@\",Ne=Me[1]),Fe+N((Ne=Ne.replace(be,\".\")).split(\".\"),ae).join(\".\")}function C(Ne){for(var ae,Me,Fe=[],j=0,ye=Ne.length;j<ye;)(ae=Ne.charCodeAt(j++))>=55296&&ae<=56319&&j<ye?(64512&(Me=Ne.charCodeAt(j++)))==56320?Fe.push(((1023&ae)<<10)+(1023&Me)+65536):(Fe.push(ae),j--):Fe.push(ae);return Fe}function z(Ne){return N(Ne,function(ae){var Me=\"\";return ae>65535&&(Me+=E((ae-=65536)>>>10&1023|55296),ae=56320|1023&ae),Me+=E(ae)}).join(\"\")}function X(Ne,ae){return Ne+22+75*(Ne<26)-((ae!=0)<<5)}function ne(Ne,ae,Me){var Fe=0;for(Ne=Me?Ie(Ne/700):Ne>>1,Ne+=Ie(Ne/ae);Ne>455;Fe+=36)Ne=Ie(Ne/35);return Ie(Fe+36*Ne/(Ne+38))}function Ve(Ne){var ae,Me,Fe,j,ye,Oe,Le,De,Je,et,bt,_t=[],ln=Ne.length,wt=0,Xt=128,qt=72;for((Me=Ne.lastIndexOf(\"-\"))<0&&(Me=0),Fe=0;Fe<Me;++Fe)Ne.charCodeAt(Fe)>=128&&L(\"not-basic\"),_t.push(Ne.charCodeAt(Fe));for(j=Me>0?Me+1:0;j<ln;){for(ye=wt,Oe=1,Le=36;j>=ln&&L(\"invalid-input\"),((De=(bt=Ne.charCodeAt(j++))-48<10?bt-22:bt-65<26?bt-65:bt-97<26?bt-97:36)>=36||De>Ie((H-wt)/Oe))&&L(\"overflow\"),wt+=De*Oe,!(De<(Je=Le<=qt?1:Le>=qt+26?26:Le-qt));Le+=36)Oe>Ie(H/(et=36-Je))&&L(\"overflow\"),Oe*=et;qt=ne(wt-ye,ae=_t.length+1,ye==0),Ie(wt/ae)>H-Xt&&L(\"overflow\"),Xt+=Ie(wt/ae),wt%=ae,_t.splice(wt++,0,Xt)}return z(_t)}function pt(Ne){var ae,Me,Fe,j,ye,Oe,Le,De,Je,et,bt,_t,ln,wt,Xt,qt=[];for(_t=(Ne=C(Ne)).length,ae=128,Me=0,ye=72,Oe=0;Oe<_t;++Oe)(bt=Ne[Oe])<128&&qt.push(E(bt));for(Fe=j=qt.length,j&&qt.push(\"-\");Fe<_t;){for(Le=H,Oe=0;Oe<_t;++Oe)(bt=Ne[Oe])>=ae&&bt<Le&&(Le=bt);for(Le-ae>Ie((H-Me)/(ln=Fe+1))&&L(\"overflow\"),Me+=(Le-ae)*ln,ae=Le,Oe=0;Oe<_t;++Oe)if((bt=Ne[Oe])<ae&&++Me>H&&L(\"overflow\"),bt==ae){for(De=Me,Je=36;!(De<(et=Je<=ye?1:Je>=ye+26?26:Je-ye));Je+=36)Xt=De-et,wt=36-et,qt.push(E(X(et+Xt%wt,0))),De=Ie(Xt/wt);qt.push(E(X(De,0))),ye=ne(Me,ln,Fe==j),Me=0,++Fe}++Me,++ae}return qt.join(\"\")}$={version:\"1.4.1\",ucs2:{decode:C,encode:z},decode:Ve,encode:pt,toASCII:function(Ne){return ee(Ne,function(ae){return Z.test(ae)?\"xn--\"+pt(ae):ae})},toUnicode:function(Ne){return ee(Ne,function(ae){return D.test(ae)?Ve(ae.slice(4).toLowerCase()):ae})}},(me=function(){return $}.call(M,v,M,b))===void 0||(b.exports=me)})()}).call(this,v(8)(S),v(4))},function(S,M,v){S.exports={isString:function(b){return typeof b==\"string\"},isObject:function(b){return typeof b==\"object\"&&b!==null},isNull:function(b){return b===null},isNullOrUndefined:function(b){return b==null}}},function(S,M,v){M.decode=M.parse=v(61),M.encode=M.stringify=v(62)},function(S,M,v){function b(me,q){return Object.prototype.hasOwnProperty.call(me,q)}S.exports=function(me,q,O,$){q=q||\"&\",O=O||\"=\";var H={};if(typeof me!=\"string\"||me.length===0)return H;var D=/\\+/g;me=me.split(q);var Z=1e3;$&&typeof $.maxKeys==\"number\"&&(Z=$.maxKeys);var be=me.length;Z>0&&be>Z&&(be=Z);for(var Ce=0;Ce<be;++Ce){var Ie,E,L,N,ee=me[Ce].replace(D,\"%20\"),C=ee.indexOf(O);C>=0?(Ie=ee.substr(0,C),E=ee.substr(C+1)):(Ie=ee,E=\"\"),L=decodeURIComponent(Ie),N=decodeURIComponent(E),b(H,L)?Q(H[L])?H[L].push(N):H[L]=[H[L],N]:H[L]=N}return H};var Q=Array.isArray||function(me){return Object.prototype.toString.call(me)===\"[object Array]\"}},function(S,M,v){var b=function(O){switch(typeof O){case\"string\":return O;case\"boolean\":return O?\"true\":\"false\";case\"number\":return isFinite(O)?O:\"\";default:return\"\"}};S.exports=function(O,$,H,D){return $=$||\"&\",H=H||\"=\",O===null&&(O=void 0),typeof O==\"object\"?me(q(O),function(Z){var be=encodeURIComponent(b(Z))+H;return Q(O[Z])?me(O[Z],function(Ce){return be+encodeURIComponent(b(Ce))}).join($):be+encodeURIComponent(b(O[Z]))}).join($):D?encodeURIComponent(b(D))+H+encodeURIComponent(b(O)):\"\"};var Q=Array.isArray||function(O){return Object.prototype.toString.call(O)===\"[object Array]\"};function me(O,$){if(O.map)return O.map($);for(var H=[],D=0;D<O.length;D++)H.push($(O[D],D));return H}var q=Object.keys||function(O){var $=[];for(var H in O)Object.prototype.hasOwnProperty.call(O,H)&&$.push(H);return $}},function(S,M){var v=function(){};v.prototype={fit:function(b){var Q,me,q,O,$=b.length,H=$>0?b[0].width:0,D=$>0?b[0].height:0;for(this.root={x:0,y:0,width:H,height:D},Q=0;Q<$;Q++)q=b[Q],(me=this.findNode(this.root,q.width,q.height))?(O=this.splitNode(me,q.width,q.height),q.x=O.x,q.y=O.y):(O=this.growNode(q.width,q.height),q.x=O.x,q.y=O.y)},findNode:function(b,Q,me){return b.used?this.findNode(b.right,Q,me)||this.findNode(b.down,Q,me):Q<=b.width&&me<=b.height?b:null},splitNode:function(b,Q,me){return b.used=!0,b.down={x:b.x,y:b.y+me,width:b.width,height:b.height-me},b.right={x:b.x+Q,y:b.y,width:b.width-Q,height:me},b},growNode:function(b,Q){var me=b<=this.root.width,q=Q<=this.root.height,O=q&&this.root.height>=this.root.width+b,$=me&&this.root.width>=this.root.height+Q;return O?this.growRight(b,Q):$?this.growDown(b,Q):q?this.growRight(b,Q):me?this.growDown(b,Q):null},growRight:function(b,Q){var me;return this.root={used:!0,x:0,y:0,width:this.root.width+b,height:this.root.height,down:this.root,right:{x:this.root.width,y:0,width:b,height:this.root.height}},(me=this.findNode(this.root,b,Q))?this.splitNode(me,b,Q):null},growDown:function(b,Q){var me;return this.root={used:!0,x:0,y:0,width:this.root.width,height:this.root.height+Q,down:{x:0,y:this.root.height,width:this.root.width,height:Q},right:this.root},(me=this.findNode(this.root,b,Q))?this.splitNode(me,b,Q):null}},S.exports=v},function(S,M){(function(v){S.exports=v}).call(this,{})},function(S,M,v){v.r(M),v.d(M,\"ErrorType\",function(){return us}),v.d(M,\"delay\",function(){return F_}),v.d(M,\"waitUntil\",function(){return B_}),v.d(M,\"SLIDE_EVENTS\",function(){return ao}),v.d(M,\"Slide\",function(){return WI});var b={};v.r(b),v.d(b,\"ACESFilmicToneMapping\",function(){return J}),v.d(b,\"AddEquation\",function(){return Le}),v.d(b,\"AddOperation\",function(){return Ws}),v.d(b,\"AdditiveAnimationBlendMode\",function(){return it}),v.d(b,\"AdditiveBlending\",function(){return Fe}),v.d(b,\"AlphaFormat\",function(){return Qp}),v.d(b,\"AlwaysDepth\",function(){return In}),v.d(b,\"AlwaysStencilFunc\",function(){return ld}),v.d(b,\"AmbientLight\",function(){return cm}),v.d(b,\"AmbientLightProbe\",function(){return Dy}),v.d(b,\"AnimationClip\",function(){return Kd}),v.d(b,\"AnimationLoader\",function(){return iE}),v.d(b,\"AnimationMixer\",function(){return Wy}),v.d(b,\"AnimationObjectGroup\",function(){return Vy}),v.d(b,\"AnimationUtils\",function(){return ai}),v.d(b,\"ArcCurve\",function(){return To}),v.d(b,\"ArrayCamera\",function(){return kd}),v.d(b,\"ArrowHelper\",function(){return DE}),v.d(b,\"Audio\",function(){return qv}),v.d(b,\"AudioAnalyser\",function(){return zy}),v.d(b,\"AudioContext\",function(){return Xv}),v.d(b,\"AudioListener\",function(){return cE}),v.d(b,\"AudioLoader\",function(){return Ly}),v.d(b,\"AxesHelper\",function(){return lx}),v.d(b,\"AxisHelper\",function(){return dM}),v.d(b,\"BackSide\",function(){return ne}),v.d(b,\"BasicDepthPacking\",function(){return uf}),v.d(b,\"BasicShadowMap\",function(){return N}),v.d(b,\"BinaryTextureLoader\",function(){return vM}),v.d(b,\"Bone\",function(){return $h}),v.d(b,\"BooleanKeyframeTrack\",function(){return hu}),v.d(b,\"BoundingBoxHelper\",function(){return pM}),v.d(b,\"Box2\",function(){return mc}),v.d(b,\"Box3\",function(){return nn}),v.d(b,\"Box3Helper\",function(){return LE}),v.d(b,\"BoxBufferGeometry\",function(){return Xo}),v.d(b,\"BoxGeometry\",function(){return Xo}),v.d(b,\"BoxHelper\",function(){return sx}),v.d(b,\"BufferAttribute\",function(){return mn}),v.d(b,\"BufferGeometry\",function(){return Vt}),v.d(b,\"BufferGeometryLoader\",function(){return Ry}),v.d(b,\"ByteType\",function(){return $p}),v.d(b,\"Cache\",function(){return du}),v.d(b,\"Camera\",function(){return va}),v.d(b,\"CameraHelper\",function(){return OE}),v.d(b,\"CanvasRenderer\",function(){return yM}),v.d(b,\"CanvasTexture\",function(){return ut}),v.d(b,\"CatmullRomCurve3\",function(){return nc}),v.d(b,\"CineonToneMapping\",function(){return te}),v.d(b,\"CircleBufferGeometry\",function(){return Yt}),v.d(b,\"CircleGeometry\",function(){return Yt}),v.d(b,\"ClampToEdgeWrapping\",function(){return Tt}),v.d(b,\"Clock\",function(){return ky}),v.d(b,\"Color\",function(){return Et}),v.d(b,\"ColorKeyframeTrack\",function(){return Lv}),v.d(b,\"CompressedTexture\",function(){return Wt}),v.d(b,\"CompressedTextureLoader\",function(){return rE}),v.d(b,\"ConeBufferGeometry\",function(){return $t}),v.d(b,\"ConeGeometry\",function(){return $t}),v.d(b,\"CubeCamera\",function(){return qo}),v.d(b,\"CubeReflectionMapping\",function(){return ve}),v.d(b,\"CubeRefractionMapping\",function(){return we}),v.d(b,\"CubeTexture\",function(){return jt}),v.d(b,\"CubeTextureLoader\",function(){return vy}),v.d(b,\"CubeUVReflectionMapping\",function(){return $e}),v.d(b,\"CubeUVRefractionMapping\",function(){return ct}),v.d(b,\"CubicBezierCurve\",function(){return Ma}),v.d(b,\"CubicBezierCurve3\",function(){return ic}),v.d(b,\"CubicInterpolant\",function(){return py}),v.d(b,\"CullFaceBack\",function(){return Ie}),v.d(b,\"CullFaceFront\",function(){return E}),v.d(b,\"CullFaceFrontBack\",function(){return L}),v.d(b,\"CullFaceNone\",function(){return Ce}),v.d(b,\"Curve\",function(){return Ln}),v.d(b,\"CurvePath\",function(){return yy}),v.d(b,\"CustomBlending\",function(){return Oe}),v.d(b,\"CustomToneMapping\",function(){return K}),v.d(b,\"CylinderBufferGeometry\",function(){return Lt}),v.d(b,\"CylinderGeometry\",function(){return Lt}),v.d(b,\"Cylindrical\",function(){return EE}),v.d(b,\"DataTexture\",function(){return Es}),v.d(b,\"DataTexture2DArray\",function(){return zr}),v.d(b,\"DataTexture3D\",function(){return $o}),v.d(b,\"DataTextureLoader\",function(){return _y}),v.d(b,\"DataUtils\",function(){return BE}),v.d(b,\"DecrementStencilOp\",function(){return Ng}),v.d(b,\"DecrementWrapStencilOp\",function(){return Fg}),v.d(b,\"DefaultLoadingManager\",function(){return gy}),v.d(b,\"DepthFormat\",function(){return fs}),v.d(b,\"DepthStencilFormat\",function(){return mo}),v.d(b,\"DepthTexture\",function(){return xt}),v.d(b,\"DirectionalLight\",function(){return hm}),v.d(b,\"DirectionalLightHelper\",function(){return IE}),v.d(b,\"DiscreteInterpolant\",function(){return fy}),v.d(b,\"DodecahedronBufferGeometry\",function(){return dn}),v.d(b,\"DodecahedronGeometry\",function(){return dn}),v.d(b,\"DoubleSide\",function(){return Ve}),v.d(b,\"DstAlphaFactor\",function(){return Bt}),v.d(b,\"DstColorFactor\",function(){return Bn}),v.d(b,\"DynamicBufferAttribute\",function(){return nM}),v.d(b,\"DynamicCopyUsage\",function(){return hh}),v.d(b,\"DynamicDrawUsage\",function(){return kr}),v.d(b,\"DynamicReadUsage\",function(){return kg}),v.d(b,\"EdgesGeometry\",function(){return Wr}),v.d(b,\"EdgesHelper\",function(){return fM}),v.d(b,\"EllipseCurve\",function(){return Lr}),v.d(b,\"EqualDepth\",function(){return Ni}),v.d(b,\"EqualStencilFunc\",function(){return cf}),v.d(b,\"EquirectangularReflectionMapping\",function(){return Se}),v.d(b,\"EquirectangularRefractionMapping\",function(){return ke}),v.d(b,\"Euler\",function(){return ua}),v.d(b,\"EventDispatcher\",function(){return ys}),v.d(b,\"ExtrudeBufferGeometry\",function(){return es}),v.d(b,\"ExtrudeGeometry\",function(){return es}),v.d(b,\"FaceColors\",function(){return WE}),v.d(b,\"FileLoader\",function(){return is}),v.d(b,\"FlatShading\",function(){return pt}),v.d(b,\"Float16BufferAttribute\",function(){return jo}),v.d(b,\"Float32Attribute\",function(){return hM}),v.d(b,\"Float32BufferAttribute\",function(){return Mt}),v.d(b,\"Float64Attribute\",function(){return cM}),v.d(b,\"Float64BufferAttribute\",function(){return wd}),v.d(b,\"FloatType\",function(){return Oo}),v.d(b,\"Fog\",function(){return el}),v.d(b,\"FogExp2\",function(){return Kl}),v.d(b,\"Font\",function(){return Wv}),v.d(b,\"FontLoader\",function(){return lE}),v.d(b,\"FrontSide\",function(){return X}),v.d(b,\"Frustum\",function(){return Ja}),v.d(b,\"GLBufferAttribute\",function(){return qy}),v.d(b,\"GLSL1\",function(){return Gg}),v.d(b,\"GLSL3\",function(){return ch}),v.d(b,\"GammaEncoding\",function(){return Mr}),v.d(b,\"GreaterDepth\",function(){return co}),v.d(b,\"GreaterEqualDepth\",function(){return mi}),v.d(b,\"GreaterEqualStencilFunc\",function(){return ah}),v.d(b,\"GreaterStencilFunc\",function(){return df}),v.d(b,\"GridHelper\",function(){return ix}),v.d(b,\"Group\",function(){return Ko}),v.d(b,\"HalfFloatType\",function(){return qs}),v.d(b,\"HemisphereLight\",function(){return Fv}),v.d(b,\"HemisphereLightHelper\",function(){return CE}),v.d(b,\"HemisphereLightProbe\",function(){return Ny}),v.d(b,\"IcosahedronBufferGeometry\",function(){return oc}),v.d(b,\"IcosahedronGeometry\",function(){return oc}),v.d(b,\"ImageBitmapLoader\",function(){return Iy}),v.d(b,\"ImageLoader\",function(){return Qd}),v.d(b,\"ImageUtils\",function(){return ea}),v.d(b,\"ImmediateRenderObject\",function(){return Ky}),v.d(b,\"IncrementStencilOp\",function(){return ih}),v.d(b,\"IncrementWrapStencilOp\",function(){return Dg}),v.d(b,\"InstancedBufferAttribute\",function(){return Vv}),v.d(b,\"InstancedBufferGeometry\",function(){return jv}),v.d(b,\"InstancedInterleavedBuffer\",function(){return Xy}),v.d(b,\"InstancedMesh\",function(){return Vd}),v.d(b,\"Int16Attribute\",function(){return sM}),v.d(b,\"Int16BufferAttribute\",function(){return Sh}),v.d(b,\"Int32Attribute\",function(){return lM}),v.d(b,\"Int32BufferAttribute\",function(){return zo}),v.d(b,\"Int8Attribute\",function(){return iM}),v.d(b,\"Int8BufferAttribute\",function(){return xd}),v.d(b,\"IntType\",function(){return Hu}),v.d(b,\"InterleavedBuffer\",function(){return xa}),v.d(b,\"InterleavedBufferAttribute\",function(){return Qo}),v.d(b,\"Interpolant\",function(){return Aa}),v.d(b,\"InterpolateDiscrete\",function(){return Al}),v.d(b,\"InterpolateLinear\",function(){return go}),v.d(b,\"InterpolateSmooth\",function(){return cr}),v.d(b,\"InvertStencilOp\",function(){return rh}),v.d(b,\"JSONLoader\",function(){return xM}),v.d(b,\"KeepStencilOp\",function(){return nh}),v.d(b,\"KeyframeTrack\",function(){return ts}),v.d(b,\"LOD\",function(){return sr}),v.d(b,\"LatheBufferGeometry\",function(){return sc}),v.d(b,\"LatheGeometry\",function(){return sc}),v.d(b,\"Layers\",function(){return Il}),v.d(b,\"LensFlare\",function(){return wM}),v.d(b,\"LessDepth\",function(){return Ai}),v.d(b,\"LessEqualDepth\",function(){return Rn}),v.d(b,\"LessEqualStencilFunc\",function(){return sh}),v.d(b,\"LessStencilFunc\",function(){return oh}),v.d(b,\"Light\",function(){return rs}),v.d(b,\"LightProbe\",function(){return tp}),v.d(b,\"Line\",function(){return f}),v.d(b,\"Line3\",function(){return Zy}),v.d(b,\"LineBasicMaterial\",function(){return Gi}),v.d(b,\"LineCurve\",function(){return Rs}),v.d(b,\"LineCurve3\",function(){return su}),v.d(b,\"LineDashedMaterial\",function(){return Iv}),v.d(b,\"LineLoop\",function(){return ie}),v.d(b,\"LinePieces\",function(){return jE}),v.d(b,\"LineSegments\",function(){return k}),v.d(b,\"LineStrip\",function(){return zE}),v.d(b,\"LinearEncoding\",function(){return tn}),v.d(b,\"LinearFilter\",function(){return Kn}),v.d(b,\"LinearInterpolant\",function(){return Ov}),v.d(b,\"LinearMipMapLinearFilter\",function(){return Yp}),v.d(b,\"LinearMipMapNearestFilter\",function(){return Lg}),v.d(b,\"LinearMipmapLinearFilter\",function(){return ps}),v.d(b,\"LinearMipmapNearestFilter\",function(){return Gu}),v.d(b,\"LinearToneMapping\",function(){return P}),v.d(b,\"Loader\",function(){return vr}),v.d(b,\"LoaderUtils\",function(){return dm}),v.d(b,\"LoadingManager\",function(){return Nv}),v.d(b,\"LogLuvEncoding\",function(){return th}),v.d(b,\"LoopOnce\",function(){return sd}),v.d(b,\"LoopPingPong\",function(){return Ml}),v.d(b,\"LoopRepeat\",function(){return Fo}),v.d(b,\"LuminanceAlphaFormat\",function(){return ef}),v.d(b,\"LuminanceFormat\",function(){return Xc}),v.d(b,\"MOUSE\",function(){return Z}),v.d(b,\"Material\",function(){return ki}),v.d(b,\"MaterialLoader\",function(){return Ay}),v.d(b,\"Math\",function(){return ja}),v.d(b,\"MathUtils\",function(){return ja}),v.d(b,\"Matrix3\",function(){return Qn}),v.d(b,\"Matrix4\",function(){return Ut}),v.d(b,\"MaxEquation\",function(){return bt}),v.d(b,\"Mesh\",function(){return Xn}),v.d(b,\"MeshBasicMaterial\",function(){return $i}),v.d(b,\"MeshDepthMaterial\",function(){return $l}),v.d(b,\"MeshDistanceMaterial\",function(){return Jl}),v.d(b,\"MeshFaceMaterial\",function(){return qE}),v.d(b,\"MeshLambertMaterial\",function(){return um}),v.d(b,\"MeshMatcapMaterial\",function(){return Pv}),v.d(b,\"MeshNormalMaterial\",function(){return Cv}),v.d(b,\"MeshPhongMaterial\",function(){return lm}),v.d(b,\"MeshPhysicalMaterial\",function(){return Av}),v.d(b,\"MeshStandardMaterial\",function(){return am}),v.d(b,\"MeshToonMaterial\",function(){return Rv}),v.d(b,\"MinEquation\",function(){return et}),v.d(b,\"MirroredRepeatWrapping\",function(){return un}),v.d(b,\"MixOperation\",function(){return po}),v.d(b,\"MultiMaterial\",function(){return YE}),v.d(b,\"MultiplyBlending\",function(){return ye}),v.d(b,\"MultiplyOperation\",function(){return Po}),v.d(b,\"NearestFilter\",function(){return wn}),v.d(b,\"NearestMipMapLinearFilter\",function(){return Io}),v.d(b,\"NearestMipMapNearestFilter\",function(){return Ua}),v.d(b,\"NearestMipmapLinearFilter\",function(){return fo}),v.d(b,\"NearestMipmapNearestFilter\",function(){return Di}),v.d(b,\"NeverDepth\",function(){return An}),v.d(b,\"NeverStencilFunc\",function(){return _s}),v.d(b,\"NoBlending\",function(){return ae}),v.d(b,\"NoColors\",function(){return VE}),v.d(b,\"NoToneMapping\",function(){return T}),v.d(b,\"NormalAnimationBlendMode\",function(){return Ue}),v.d(b,\"NormalBlending\",function(){return Me}),v.d(b,\"NotEqualDepth\",function(){return ka}),v.d(b,\"NotEqualStencilFunc\",function(){return pf}),v.d(b,\"NumberKeyframeTrack\",function(){return Jd}),v.d(b,\"Object3D\",function(){return yn}),v.d(b,\"ObjectLoader\",function(){return oE}),v.d(b,\"ObjectSpaceNormalMap\",function(){return Rl}),v.d(b,\"OctahedronBufferGeometry\",function(){return au}),v.d(b,\"OctahedronGeometry\",function(){return au}),v.d(b,\"OneFactor\",function(){return ln}),v.d(b,\"OneMinusDstAlphaFactor\",function(){return Fn}),v.d(b,\"OneMinusDstColorFactor\",function(){return Mn}),v.d(b,\"OneMinusSrcAlphaFactor\",function(){return en}),v.d(b,\"OneMinusSrcColorFactor\",function(){return Xt}),v.d(b,\"OrthographicCamera\",function(){return fc}),v.d(b,\"PCFShadowMap\",function(){return ee}),v.d(b,\"PCFSoftShadowMap\",function(){return C}),v.d(b,\"PMREMGenerator\",function(){return UE}),v.d(b,\"ParametricBufferGeometry\",function(){return $d}),v.d(b,\"ParametricGeometry\",function(){return $d}),v.d(b,\"Particle\",function(){return JE}),v.d(b,\"ParticleBasicMaterial\",function(){return QE}),v.d(b,\"ParticleSystem\",function(){return ZE}),v.d(b,\"ParticleSystemMaterial\",function(){return eM}),v.d(b,\"Path\",function(){return pu}),v.d(b,\"PerspectiveCamera\",function(){return ci}),v.d(b,\"Plane\",function(){return io}),v.d(b,\"PlaneBufferGeometry\",function(){return di}),v.d(b,\"PlaneGeometry\",function(){return di}),v.d(b,\"PlaneHelper\",function(){return NE}),v.d(b,\"PointCloud\",function(){return $E}),v.d(b,\"PointCloudMaterial\",function(){return KE}),v.d(b,\"PointLight\",function(){return Gv}),v.d(b,\"PointLightHelper\",function(){return AE}),v.d(b,\"Points\",function(){return vt}),v.d(b,\"PointsMaterial\",function(){return pe}),v.d(b,\"PolarGridHelper\",function(){return PE}),v.d(b,\"PolyhedronBufferGeometry\",function(){return zt}),v.d(b,\"PolyhedronGeometry\",function(){return zt}),v.d(b,\"PositionalAudio\",function(){return pE}),v.d(b,\"PropertyBinding\",function(){return Nn}),v.d(b,\"PropertyMixer\",function(){return jy}),v.d(b,\"QuadraticBezierCurve\",function(){return tm}),v.d(b,\"QuadraticBezierCurve3\",function(){return bv}),v.d(b,\"Quaternion\",function(){return Y}),v.d(b,\"QuaternionKeyframeTrack\",function(){return pc}),v.d(b,\"QuaternionLinearInterpolant\",function(){return my}),v.d(b,\"REVISION\",function(){return D}),v.d(b,\"RGBADepthPacking\",function(){return vs}),v.d(b,\"RGBAFormat\",function(){return Tr}),v.d(b,\"RGBAIntegerFormat\",function(){return Jc}),v.d(b,\"RGBA_ASTC_10x10_Format\",function(){return td}),v.d(b,\"RGBA_ASTC_10x5_Format\",function(){return Ys}),v.d(b,\"RGBA_ASTC_10x6_Format\",function(){return rf}),v.d(b,\"RGBA_ASTC_10x8_Format\",function(){return ed}),v.d(b,\"RGBA_ASTC_12x10_Format\",function(){return $u}),v.d(b,\"RGBA_ASTC_12x12_Format\",function(){return Ju}),v.d(b,\"RGBA_ASTC_4x4_Format\",function(){return Yn}),v.d(b,\"RGBA_ASTC_5x4_Format\",function(){return Do}),v.d(b,\"RGBA_ASTC_5x5_Format\",function(){return qu}),v.d(b,\"RGBA_ASTC_6x5_Format\",function(){return tf}),v.d(b,\"RGBA_ASTC_6x6_Format\",function(){return Yu}),v.d(b,\"RGBA_ASTC_8x5_Format\",function(){return nf}),v.d(b,\"RGBA_ASTC_8x6_Format\",function(){return Qc}),v.d(b,\"RGBA_ASTC_8x8_Format\",function(){return El}),v.d(b,\"RGBA_BPTC_Format\",function(){return nd}),v.d(b,\"RGBA_ETC2_EAC_Format\",function(){return Tl}),v.d(b,\"RGBA_PVRTC_2BPPV1_Format\",function(){return Xu}),v.d(b,\"RGBA_PVRTC_4BPPV1_Format\",function(){return Kc}),v.d(b,\"RGBA_S3TC_DXT1_Format\",function(){return Vu}),v.d(b,\"RGBA_S3TC_DXT3_Format\",function(){return Wu}),v.d(b,\"RGBA_S3TC_DXT5_Format\",function(){return er}),v.d(b,\"RGBDEncoding\",function(){return za}),v.d(b,\"RGBEEncoding\",function(){return Gn}),v.d(b,\"RGBEFormat\",function(){return Fi}),v.d(b,\"RGBFormat\",function(){return Lo}),v.d(b,\"RGBIntegerFormat\",function(){return $c}),v.d(b,\"RGBM16Encoding\",function(){return dr}),v.d(b,\"RGBM7Encoding\",function(){return ad}),v.d(b,\"RGB_ETC1_Format\",function(){return No}),v.d(b,\"RGB_ETC2_Format\",function(){return Ga}),v.d(b,\"RGB_PVRTC_2BPPV1_Format\",function(){return ur}),v.d(b,\"RGB_PVRTC_4BPPV1_Format\",function(){return Zc}),v.d(b,\"RGB_S3TC_DXT1_Format\",function(){return ju}),v.d(b,\"RGFormat\",function(){return Er}),v.d(b,\"RGIntegerFormat\",function(){return Yc}),v.d(b,\"RawShaderMaterial\",function(){return dc}),v.d(b,\"Ray\",function(){return ei}),v.d(b,\"Raycaster\",function(){return SE}),v.d(b,\"RectAreaLight\",function(){return Hv}),v.d(b,\"RedFormat\",function(){return qc}),v.d(b,\"RedIntegerFormat\",function(){return zu}),v.d(b,\"ReinhardToneMapping\",function(){return I}),v.d(b,\"RepeatWrapping\",function(){return Pt}),v.d(b,\"ReplaceStencilOp\",function(){return hf}),v.d(b,\"ReverseSubtractEquation\",function(){return Je}),v.d(b,\"RingBufferGeometry\",function(){return ac}),v.d(b,\"RingGeometry\",function(){return ac}),v.d(b,\"SRGB8_ALPHA8_ASTC_10x10_Format\",function(){return lf}),v.d(b,\"SRGB8_ALPHA8_ASTC_10x5_Format\",function(){return of}),v.d(b,\"SRGB8_ALPHA8_ASTC_10x6_Format\",function(){return sf}),v.d(b,\"SRGB8_ALPHA8_ASTC_10x8_Format\",function(){return af}),v.d(b,\"SRGB8_ALPHA8_ASTC_12x10_Format\",function(){return $s}),v.d(b,\"SRGB8_ALPHA8_ASTC_12x12_Format\",function(){return eh}),v.d(b,\"SRGB8_ALPHA8_ASTC_4x4_Format\",function(){return Zu}),v.d(b,\"SRGB8_ALPHA8_ASTC_5x4_Format\",function(){return Ku}),v.d(b,\"SRGB8_ALPHA8_ASTC_5x5_Format\",function(){return id}),v.d(b,\"SRGB8_ALPHA8_ASTC_6x5_Format\",function(){return hr}),v.d(b,\"SRGB8_ALPHA8_ASTC_6x6_Format\",function(){return Qu}),v.d(b,\"SRGB8_ALPHA8_ASTC_8x5_Format\",function(){return Ha}),v.d(b,\"SRGB8_ALPHA8_ASTC_8x6_Format\",function(){return rd}),v.d(b,\"SRGB8_ALPHA8_ASTC_8x8_Format\",function(){return od}),v.d(b,\"Scene\",function(){return Ql}),v.d(b,\"SceneUtils\",function(){return bM}),v.d(b,\"ShaderChunk\",function(){return _n}),v.d(b,\"ShaderLib\",function(){return ro}),v.d(b,\"ShaderMaterial\",function(){return ir}),v.d(b,\"ShadowMaterial\",function(){return Mv}),v.d(b,\"Shape\",function(){return rl}),v.d(b,\"ShapeBufferGeometry\",function(){return lu}),v.d(b,\"ShapeGeometry\",function(){return lu}),v.d(b,\"ShapePath\",function(){return Oy}),v.d(b,\"ShapeUtils\",function(){return Cs}),v.d(b,\"ShortType\",function(){return Jp}),v.d(b,\"Skeleton\",function(){return Jh}),v.d(b,\"SkeletonHelper\",function(){return ex}),v.d(b,\"SkinnedMesh\",function(){return Yh}),v.d(b,\"SmoothShading\",function(){return Ne}),v.d(b,\"Sphere\",function(){return Go}),v.d(b,\"SphereBufferGeometry\",function(){return uu}),v.d(b,\"SphereGeometry\",function(){return uu}),v.d(b,\"Spherical\",function(){return TE}),v.d(b,\"SphericalHarmonics3\",function(){return zv}),v.d(b,\"SplineCurve\",function(){return nm}),v.d(b,\"SpotLight\",function(){return kv}),v.d(b,\"SpotLightHelper\",function(){return ME}),v.d(b,\"Sprite\",function(){return Vh}),v.d(b,\"SpriteMaterial\",function(){return eu}),v.d(b,\"SrcAlphaFactor\",function(){return qt}),v.d(b,\"SrcAlphaSaturateFactor\",function(){return qn}),v.d(b,\"SrcColorFactor\",function(){return wt}),v.d(b,\"StaticCopyUsage\",function(){return uh}),v.d(b,\"StaticDrawUsage\",function(){return _o}),v.d(b,\"StaticReadUsage\",function(){return Bg}),v.d(b,\"StereoCamera\",function(){return uE}),v.d(b,\"StreamCopyUsage\",function(){return ud}),v.d(b,\"StreamDrawUsage\",function(){return lh}),v.d(b,\"StreamReadUsage\",function(){return Ug}),v.d(b,\"StringKeyframeTrack\",function(){return cu}),v.d(b,\"SubtractEquation\",function(){return De}),v.d(b,\"SubtractiveBlending\",function(){return j}),v.d(b,\"TOUCH\",function(){return be}),v.d(b,\"TangentSpaceNormalMap\",function(){return vo}),v.d(b,\"TetrahedronBufferGeometry\",function(){return lc}),v.d(b,\"TetrahedronGeometry\",function(){return lc}),v.d(b,\"TextBufferGeometry\",function(){return sm}),v.d(b,\"TextGeometry\",function(){return sm}),v.d(b,\"Texture\",function(){return gi}),v.d(b,\"TextureLoader\",function(){return Dv}),v.d(b,\"TorusBufferGeometry\",function(){return uc}),v.d(b,\"TorusGeometry\",function(){return uc}),v.d(b,\"TorusKnotBufferGeometry\",function(){return hc}),v.d(b,\"TorusKnotGeometry\",function(){return hc}),v.d(b,\"Triangle\",function(){return hi}),v.d(b,\"TriangleFanDrawMode\",function(){return hn}),v.d(b,\"TriangleStripDrawMode\",function(){return Rt}),v.d(b,\"TrianglesDrawMode\",function(){return at}),v.d(b,\"TubeBufferGeometry\",function(){return cc}),v.d(b,\"TubeGeometry\",function(){return cc}),v.d(b,\"UVMapping\",function(){return le}),v.d(b,\"Uint16Attribute\",function(){return aM}),v.d(b,\"Uint16BufferAttribute\",function(){return qa}),v.d(b,\"Uint32Attribute\",function(){return uM}),v.d(b,\"Uint32BufferAttribute\",function(){return Th}),v.d(b,\"Uint8Attribute\",function(){return rM}),v.d(b,\"Uint8BufferAttribute\",function(){return wh}),v.d(b,\"Uint8ClampedAttribute\",function(){return oM}),v.d(b,\"Uint8ClampedBufferAttribute\",function(){return bd}),v.d(b,\"Uniform\",function(){return fm}),v.d(b,\"UniformsLib\",function(){return Ct}),v.d(b,\"UniformsUtils\",function(){return Ch}),v.d(b,\"UnsignedByteType\",function(){return Xs}),v.d(b,\"UnsignedInt248Type\",function(){return On}),v.d(b,\"UnsignedIntType\",function(){return Sl}),v.d(b,\"UnsignedShort4444Type\",function(){return Zp}),v.d(b,\"UnsignedShort5551Type\",function(){return Kp}),v.d(b,\"UnsignedShort565Type\",function(){return Wn}),v.d(b,\"UnsignedShortType\",function(){return wl}),v.d(b,\"VSMShadowMap\",function(){return z}),v.d(b,\"Vector2\",function(){return gt}),v.d(b,\"Vector3\",function(){return re}),v.d(b,\"Vector4\",function(){return Un}),v.d(b,\"VectorKeyframeTrack\",function(){return Zd}),v.d(b,\"Vertex\",function(){return tM}),v.d(b,\"VertexColors\",function(){return XE}),v.d(b,\"VideoTexture\",function(){return Gt}),v.d(b,\"WebGL1Renderer\",function(){return or}),v.d(b,\"WebGLCubeRenderTarget\",function(){return _a}),v.d(b,\"WebGLMultipleRenderTargets\",function(){return Va}),v.d(b,\"WebGLMultisampleRenderTarget\",function(){return ph}),v.d(b,\"WebGLRenderTarget\",function(){return pr}),v.d(b,\"WebGLRenderTargetCube\",function(){return _M}),v.d(b,\"WebGLRenderer\",function(){return on}),v.d(b,\"WebGLUtils\",function(){return Yf}),v.d(b,\"WireframeGeometry\",function(){return Ev}),v.d(b,\"WireframeHelper\",function(){return mM}),v.d(b,\"WrapAroundEnding\",function(){return gs}),v.d(b,\"XHRLoader\",function(){return gM}),v.d(b,\"ZeroCurvatureEnding\",function(){return ms}),v.d(b,\"ZeroFactor\",function(){return _t}),v.d(b,\"ZeroSlopeEnding\",function(){return Js}),v.d(b,\"ZeroStencilOp\",function(){return kn}),v.d(b,\"sRGBEncoding\",function(){return oi});var Q={};v.r(Q),v.d(Q,\"isMobile\",function(){return os}),v.d(Q,\"EventEmitter\",function(){return _c.a}),v.d(Q,\"earcut\",function(){return d0.a}),v.d(Q,\"BaseTextureCache\",function(){return Mo}),v.d(Q,\"CanvasRenderTarget\",function(){return T0}),v.d(Q,\"DATA_URI\",function(){return Kx}),v.d(Q,\"ProgramCache\",function(){return S0}),v.d(Q,\"TextureCache\",function(){return Xr}),v.d(Q,\"clearTextureCache\",function(){return e2}),v.d(Q,\"correctBlendMode\",function(){return y0}),v.d(Q,\"createIndicesForQuads\",function(){return $x}),v.d(Q,\"decomposeDataUri\",function(){return t2}),v.d(Q,\"deprecation\",function(){return yc}),v.d(Q,\"destroyTextureCache\",function(){return QA}),v.d(Q,\"determineCrossOrigin\",function(){return Qx}),v.d(Q,\"getBufferType\",function(){return Rm}),v.d(Q,\"getResolutionOfUrl\",function(){return ap}),v.d(Q,\"hex2rgb\",function(){return wu}),v.d(Q,\"hex2string\",function(){return g0}),v.d(Q,\"interleaveTypedArrays\",function(){return ZA}),v.d(Q,\"isPow2\",function(){return b0}),v.d(Q,\"isWebGLSupported\",function(){return qx}),v.d(Q,\"log2\",function(){return w0}),v.d(Q,\"nextPow2\",function(){return sp}),v.d(Q,\"premultiplyBlendMode\",function(){return _0}),v.d(Q,\"premultiplyRgba\",function(){return Yx}),v.d(Q,\"premultiplyTint\",function(){return Am}),v.d(Q,\"premultiplyTintToRgba\",function(){return x0}),v.d(Q,\"removeItems\",function(){return Su}),v.d(Q,\"rgb2hex\",function(){return $A}),v.d(Q,\"sayHello\",function(){return Xx}),v.d(Q,\"sign\",function(){return Tu}),v.d(Q,\"skipHello\",function(){return qA}),v.d(Q,\"string2hex\",function(){return v0}),v.d(Q,\"trimCanvas\",function(){return Zx}),v.d(Q,\"uid\",function(){return ll}),v.d(Q,\"url\",function(){return bu});var me=v(6),q=v(0),O=v.n(q),$=v(2),H=v(1);/**\n * @license\n * Copyright 2010-2021 Three.js Authors\n * SPDX-License-Identifier: MIT\n */const D=\"130\",Z={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},be={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Ce=0,Ie=1,E=2,L=3,N=0,ee=1,C=2,z=3,X=0,ne=1,Ve=2,pt=1,Ne=2,ae=0,Me=1,Fe=2,j=3,ye=4,Oe=5,Le=100,De=101,Je=102,et=103,bt=104,_t=200,ln=201,wt=202,Xt=203,qt=204,en=205,Bt=206,Fn=207,Bn=208,Mn=209,qn=210,An=0,In=1,Ai=2,Rn=3,Ni=4,mi=5,co=6,ka=7,Po=0,po=1,Ws=2,T=0,P=1,I=2,te=3,J=4,K=5,le=300,ve=301,we=302,Se=303,ke=304,$e=306,ct=307,Pt=1e3,Tt=1001,un=1002,wn=1003,Di=1004,Ua=1004,fo=1005,Io=1005,Kn=1006,Gu=1007,Lg=1007,ps=1008,Yp=1008,Xs=1009,$p=1010,Jp=1011,wl=1012,Hu=1013,Sl=1014,Oo=1015,qs=1016,Zp=1017,Kp=1018,Wn=1019,On=1020,Qp=1021,Lo=1022,Tr=1023,Xc=1024,ef=1025,Fi=Tr,fs=1026,mo=1027,qc=1028,zu=1029,Er=1030,Yc=1031,$c=1032,Jc=1033,ju=33776,Vu=33777,Wu=33778,er=33779,Zc=35840,ur=35841,Kc=35842,Xu=35843,No=36196,Ga=37492,Tl=37496,Yn=37808,Do=37809,qu=37810,tf=37811,Yu=37812,nf=37813,Qc=37814,El=37815,Ys=37816,rf=37817,ed=37818,td=37819,$u=37820,Ju=37821,nd=36492,Zu=37840,Ku=37841,id=37842,hr=37843,Qu=37844,Ha=37845,rd=37846,od=37847,of=37848,sf=37849,af=37850,lf=37851,$s=37852,eh=37853,sd=2200,Fo=2201,Ml=2202,Al=2300,go=2301,cr=2302,ms=2400,Js=2401,gs=2402,Ue=2500,it=2501,at=0,Rt=1,hn=2,tn=3e3,oi=3001,Mr=3007,Gn=3002,th=3003,ad=3004,dr=3005,za=3006,uf=3200,vs=3201,vo=0,Rl=1,kn=0,nh=7680,hf=7681,ih=7682,Ng=7683,Dg=34055,Fg=34056,rh=5386,_s=512,oh=513,cf=514,sh=515,df=516,pf=517,ah=518,ld=519,_o=35044,kr=35048,lh=35040,Bg=35045,kg=35049,Ug=35041,uh=35046,hh=35050,ud=35042,Gg=\"100\",ch=\"300 es\";class ys{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const n=this._listeners[e];if(n!==void 0){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const n=t.slice(0);for(let r=0,o=n.length;r<o;r++)n[r].call(this,e);e.target=null}}}const Vi=[];for(let i=0;i<256;i++)Vi[i]=(i<16?\"0\":\"\")+i.toString(16);let li=1234567;const ui=Math.PI/180,Cl=180/Math.PI;function Ar(){const i=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Vi[255&i]+Vi[i>>8&255]+Vi[i>>16&255]+Vi[i>>24&255]+\"-\"+Vi[255&e]+Vi[e>>8&255]+\"-\"+Vi[e>>16&15|64]+Vi[e>>24&255]+\"-\"+Vi[63&t|128]+Vi[t>>8&255]+\"-\"+Vi[t>>16&255]+Vi[t>>24&255]+Vi[255&n]+Vi[n>>8&255]+Vi[n>>16&255]+Vi[n>>24&255]).toUpperCase()}function Bi(i,e,t){return Math.max(e,Math.min(t,i))}function hd(i,e){return(i%e+e)%e}function Zs(i,e,t){return(1-t)*i+t*e}function Ks(i){return(i&i-1)==0&&i!==0}function dh(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function Qs(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}var ja=Object.freeze({__proto__:null,DEG2RAD:ui,RAD2DEG:Cl,generateUUID:Ar,clamp:Bi,euclideanModulo:hd,mapLinear:function(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)},inverseLerp:function(i,e,t){return i!==e?(t-i)/(e-i):0},lerp:Zs,damp:function(i,e,t,n){return Zs(i,e,1-Math.exp(-t*n))},pingpong:function(i,e=1){return e-Math.abs(hd(i,2*e)-e)},smoothstep:function(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e))*i*(3-2*i)},smootherstep:function(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e))*i*i*(i*(6*i-15)+10)},randInt:function(i,e){return i+Math.floor(Math.random()*(e-i+1))},randFloat:function(i,e){return i+Math.random()*(e-i)},randFloatSpread:function(i){return i*(.5-Math.random())},seededRandom:function(i){return i!==void 0&&(li=i%2147483647),li=16807*li%2147483647,(li-1)/2147483646},degToRad:function(i){return i*ui},radToDeg:function(i){return i*Cl},isPowerOfTwo:Ks,ceilPowerOfTwo:dh,floorPowerOfTwo:Qs,setQuaternionFromProperEuler:function(i,e,t,n,r){const o=Math.cos,s=Math.sin,a=o(t/2),l=s(t/2),u=o((e+n)/2),h=s((e+n)/2),d=o((e-n)/2),p=s((e-n)/2),m=o((n-e)/2),g=s((n-e)/2);switch(r){case\"XYX\":i.set(a*h,l*d,l*p,a*u);break;case\"YZY\":i.set(l*p,a*h,l*d,a*u);break;case\"ZXZ\":i.set(l*d,l*p,a*h,a*u);break;case\"XZX\":i.set(a*h,l*g,l*m,a*u);break;case\"YXY\":i.set(l*m,a*h,l*g,a*u);break;case\"ZYZ\":i.set(l*g,l*m,a*h,a*u);break;default:console.warn(\"THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: \"+r)}}});class gt{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error(\"index is out of range: \"+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error(\"index is out of range: \"+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn(\"THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn(\"THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return n!==void 0&&console.warn(\"THREE.Vector2: offset has been removed from .fromBufferAttribute().\"),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),o=this.x-e.x,s=this.y-e.y;return this.x=o*n-s*r+e.x,this.y=o*r+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}gt.prototype.isVector2=!0;class Qn{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error(\"THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.\")}set(e,t,n,r,o,s,a,l,u){const h=this.elements;return h[0]=e,h[1]=r,h[2]=a,h[3]=t,h[4]=o,h[5]=l,h[6]=n,h[7]=s,h[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,o=this.elements,s=n[0],a=n[3],l=n[6],u=n[1],h=n[4],d=n[7],p=n[2],m=n[5],g=n[8],_=r[0],y=r[3],w=r[6],R=r[1],F=r[4],U=r[7],B=r[2],V=r[5],G=r[8];return o[0]=s*_+a*R+l*B,o[3]=s*y+a*F+l*V,o[6]=s*w+a*U+l*G,o[1]=u*_+h*R+d*B,o[4]=u*y+h*F+d*V,o[7]=u*w+h*U+d*G,o[2]=p*_+m*R+g*B,o[5]=p*y+m*F+g*V,o[8]=p*w+m*U+g*G,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],h=e[8];return t*s*h-t*a*u-n*o*h+n*a*l+r*o*u-r*s*l}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],h=e[8],d=h*s-a*u,p=a*l-h*o,m=u*o-s*l,g=t*d+n*p+r*m;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const _=1/g;return e[0]=d*_,e[1]=(r*u-h*n)*_,e[2]=(a*n-r*s)*_,e[3]=p*_,e[4]=(h*t-r*l)*_,e[5]=(r*o-a*t)*_,e[6]=m*_,e[7]=(n*l-u*t)*_,e[8]=(s*t-n*o)*_,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,o,s,a){const l=Math.cos(o),u=Math.sin(o);return this.set(n*l,n*u,-n*(l*s+u*a)+s+e,-r*u,r*l,-r*(-u*s+l*a)+a+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,o=r[0],s=r[3],a=r[6],l=r[1],u=r[4],h=r[7];return r[0]=t*o+n*l,r[3]=t*s+n*u,r[6]=t*a+n*h,r[1]=-n*o+t*l,r[4]=-n*s+t*u,r[7]=-n*a+t*h,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}let Jr;Qn.prototype.isMatrix3=!0;class ea{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement==\"undefined\")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Jr===void 0&&(Jr=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\")),Jr.width=e.width,Jr.height=e.height;const n=Jr.getContext(\"2d\");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Jr}return t.width>2048||t.height>2048?(console.warn(\"THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons\",e),t.toDataURL(\"image/jpeg\",.6)):t.toDataURL(\"image/png\")}}let Hg=0;class gi extends ys{constructor(e=gi.DEFAULT_IMAGE,t=gi.DEFAULT_MAPPING,n=Tt,r=Tt,o=Kn,s=ps,a=Tr,l=Xs,u=1,h=tn){super(),Object.defineProperty(this,\"id\",{value:Hg++}),this.uuid=Ar(),this.name=\"\",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=o,this.minFilter=s,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new gt(0,0),this.repeat=new gt(1,1),this.center=new gt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Qn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h,this.version=0,this.onUpdate=null}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this}toJSON(e){const t=e===void 0||typeof e==\"string\";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.5,type:\"Texture\",generator:\"Texture.toJSON\"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const r=this.image;if(r.uuid===void 0&&(r.uuid=Ar()),!t&&e.images[r.uuid]===void 0){let o;if(Array.isArray(r)){o=[];for(let s=0,a=r.length;s<a;s++)r[s].isDataTexture?o.push(cd(r[s].image)):o.push(cd(r[s]))}else o=cd(r);e.images[r.uuid]={uuid:r.uuid,url:o}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:\"dispose\"})}transformUv(e){if(this.mapping!==le)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Pt:e.x=e.x-Math.floor(e.x);break;case Tt:e.x=e.x<0?0:1;break;case un:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Pt:e.y=e.y-Math.floor(e.y);break;case Tt:e.y=e.y<0?0:1;break;case un:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&this.version++}}function cd(i){return typeof HTMLImageElement!=\"undefined\"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement!=\"undefined\"&&i instanceof HTMLCanvasElement||typeof ImageBitmap!=\"undefined\"&&i instanceof ImageBitmap?ea.getDataURL(i):i.data?{data:Array.prototype.slice.call(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn(\"THREE.Texture: Unable to serialize Texture.\"),{})}gi.DEFAULT_IMAGE=void 0,gi.DEFAULT_MAPPING=le,gi.prototype.isTexture=!0;class Un{constructor(e=0,t=0,n=0,r=1){this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error(\"index is out of range: \"+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error(\"index is out of range: \"+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn(\"THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn(\"THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,o=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r+s[12]*o,this.y=s[1]*t+s[5]*n+s[9]*r+s[13]*o,this.z=s[2]*t+s[6]*n+s[10]*r+s[14]*o,this.w=s[3]*t+s[7]*n+s[11]*r+s[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,o;const s=e.elements,a=s[0],l=s[4],u=s[8],h=s[1],d=s[5],p=s[9],m=s[2],g=s[6],_=s[10];if(Math.abs(l-h)<.01&&Math.abs(u-m)<.01&&Math.abs(p-g)<.01){if(Math.abs(l+h)<.1&&Math.abs(u+m)<.1&&Math.abs(p+g)<.1&&Math.abs(a+d+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const w=(a+1)/2,R=(d+1)/2,F=(_+1)/2,U=(l+h)/4,B=(u+m)/4,V=(p+g)/4;return w>R&&w>F?w<.01?(n=0,r=.707106781,o=.707106781):(n=Math.sqrt(w),r=U/n,o=B/n):R>F?R<.01?(n=.707106781,r=0,o=.707106781):(r=Math.sqrt(R),n=U/r,o=V/r):F<.01?(n=.707106781,r=.707106781,o=0):(o=Math.sqrt(F),n=B/o,r=V/o),this.set(n,r,o,t),this}let y=Math.sqrt((g-p)*(g-p)+(u-m)*(u-m)+(h-l)*(h-l));return Math.abs(y)<.001&&(y=1),this.x=(g-p)/y,this.y=(u-m)/y,this.z=(h-l)/y,this.w=Math.acos((a+d+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return n!==void 0&&console.warn(\"THREE.Vector4: offset has been removed from .fromBufferAttribute().\"),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}Un.prototype.isVector4=!0;class pr extends ys{constructor(e,t,n={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new Un(0,0,e,t),this.scissorTest=!1,this.viewport=new Un(0,0,e,t),this.texture=new gi(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=n.generateMipmaps!==void 0&&n.generateMipmaps,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Kn,this.depthBuffer=n.depthBuffer===void 0||n.depthBuffer,this.stencilBuffer=n.stencilBuffer!==void 0&&n.stencilBuffer,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=H_({},this.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:\"dispose\"})}}pr.prototype.isWebGLRenderTarget=!0;class Va extends pr{constructor(e,t,n){super(e,t);const r=this.texture;this.texture=[];for(let o=0;o<n;o++)this.texture[o]=r.clone()}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,o=this.texture.length;r<o;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}Va.prototype.isWebGLMultipleRenderTargets=!0;class ph extends pr{constructor(e,t,n){super(e,t,n),this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}ph.prototype.isWebGLMultisampleRenderTarget=!0;class Y{constructor(e=0,t=0,n=0,r=1){this._x=e,this._y=t,this._z=n,this._w=r}static slerp(e,t,n,r){return console.warn(\"THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead.\"),n.slerpQuaternions(e,t,r)}static slerpFlat(e,t,n,r,o,s,a){let l=n[r+0],u=n[r+1],h=n[r+2],d=n[r+3];const p=o[s+0],m=o[s+1],g=o[s+2],_=o[s+3];if(a===0)return e[t+0]=l,e[t+1]=u,e[t+2]=h,void(e[t+3]=d);if(a===1)return e[t+0]=p,e[t+1]=m,e[t+2]=g,void(e[t+3]=_);if(d!==_||l!==p||u!==m||h!==g){let y=1-a;const w=l*p+u*m+h*g+d*_,R=w>=0?1:-1,F=1-w*w;if(F>Number.EPSILON){const B=Math.sqrt(F),V=Math.atan2(B,w*R);y=Math.sin(y*V)/B,a=Math.sin(a*V)/B}const U=a*R;if(l=l*y+p*U,u=u*y+m*U,h=h*y+g*U,d=d*y+_*U,y===1-a){const B=1/Math.sqrt(l*l+u*u+h*h+d*d);l*=B,u*=B,h*=B,d*=B}}e[t]=l,e[t+1]=u,e[t+2]=h,e[t+3]=d}static multiplyQuaternionsFlat(e,t,n,r,o,s){const a=n[r],l=n[r+1],u=n[r+2],h=n[r+3],d=o[s],p=o[s+1],m=o[s+2],g=o[s+3];return e[t]=a*g+h*d+l*m-u*p,e[t+1]=l*g+h*p+u*d-a*m,e[t+2]=u*g+h*m+a*p-l*d,e[t+3]=h*g-a*d-l*p-u*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error(\"THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.\");const n=e._x,r=e._y,o=e._z,s=e._order,a=Math.cos,l=Math.sin,u=a(n/2),h=a(r/2),d=a(o/2),p=l(n/2),m=l(r/2),g=l(o/2);switch(s){case\"XYZ\":this._x=p*h*d+u*m*g,this._y=u*m*d-p*h*g,this._z=u*h*g+p*m*d,this._w=u*h*d-p*m*g;break;case\"YXZ\":this._x=p*h*d+u*m*g,this._y=u*m*d-p*h*g,this._z=u*h*g-p*m*d,this._w=u*h*d+p*m*g;break;case\"ZXY\":this._x=p*h*d-u*m*g,this._y=u*m*d+p*h*g,this._z=u*h*g+p*m*d,this._w=u*h*d-p*m*g;break;case\"ZYX\":this._x=p*h*d-u*m*g,this._y=u*m*d+p*h*g,this._z=u*h*g-p*m*d,this._w=u*h*d+p*m*g;break;case\"YZX\":this._x=p*h*d+u*m*g,this._y=u*m*d+p*h*g,this._z=u*h*g-p*m*d,this._w=u*h*d-p*m*g;break;case\"XZY\":this._x=p*h*d-u*m*g,this._y=u*m*d-p*h*g,this._z=u*h*g+p*m*d,this._w=u*h*d+p*m*g;break;default:console.warn(\"THREE.Quaternion: .setFromEuler() encountered an unknown order: \"+s)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],o=t[8],s=t[1],a=t[5],l=t[9],u=t[2],h=t[6],d=t[10],p=n+a+d;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(h-l)*m,this._y=(o-u)*m,this._z=(s-r)*m}else if(n>a&&n>d){const m=2*Math.sqrt(1+n-a-d);this._w=(h-l)/m,this._x=.25*m,this._y=(r+s)/m,this._z=(o+u)/m}else if(a>d){const m=2*Math.sqrt(1+a-n-d);this._w=(o-u)/m,this._x=(r+s)/m,this._y=.25*m,this._z=(l+h)/m}else{const m=2*Math.sqrt(1+d-n-a);this._w=(s-r)/m,this._x=(o+u)/m,this._y=(l+h)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Bi(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn(\"THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.\"),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,o=e._z,s=e._w,a=t._x,l=t._y,u=t._z,h=t._w;return this._x=n*h+s*a+r*u-o*l,this._y=r*h+s*l+o*a-n*u,this._z=o*h+s*u+n*l-r*a,this._w=s*h-n*a-r*l-o*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,o=this._z,s=this._w;let a=s*e._w+n*e._x+r*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=n,this._y=r,this._z=o,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*s+t*this._w,this._x=m*n+t*this._x,this._y=m*r+t*this._y,this._z=m*o+t*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),h=Math.atan2(u,a),d=Math.sin((1-t)*h)/u,p=Math.sin(t*h)/u;return this._w=s*d+this._w*p,this._x=n*d+this._x*p,this._y=r*d+this._y*p,this._z=o*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,n){this.copy(e).slerp(t,n)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Y.prototype.isQuaternion=!0;class re{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error(\"index is out of range: \"+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error(\"index is out of range: \"+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn(\"THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn(\"THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn(\"THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.\"),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error(\"THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.\"),this.applyQuaternion(Rr.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Rr.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[3]*n+o[6]*r,this.y=o[1]*t+o[4]*n+o[7]*r,this.z=o[2]*t+o[5]*n+o[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,o=e.elements,s=1/(o[3]*t+o[7]*n+o[11]*r+o[15]);return this.x=(o[0]*t+o[4]*n+o[8]*r+o[12])*s,this.y=(o[1]*t+o[5]*n+o[9]*r+o[13])*s,this.z=(o[2]*t+o[6]*n+o[10]*r+o[14])*s,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,o=e.x,s=e.y,a=e.z,l=e.w,u=l*t+s*r-a*n,h=l*n+a*t-o*r,d=l*r+o*n-s*t,p=-o*t-s*n-a*r;return this.x=u*l+p*-o+h*-a-d*-s,this.y=h*l+p*-s+d*-o-u*-a,this.z=d*l+p*-a+u*-s-h*-o,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r,this.y=o[1]*t+o[5]*n+o[9]*r,this.z=o[2]*t+o[6]*n+o[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return t!==void 0?(console.warn(\"THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.\"),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,o=e.z,s=t.x,a=t.y,l=t.z;return this.x=r*l-o*a,this.y=o*s-n*l,this.z=n*a-r*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Wa.copy(this).projectOnVector(e),this.sub(Wa)}reflect(e){return this.sub(Wa.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Bi(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return n!==void 0&&console.warn(\"THREE.Vector3: offset has been removed from .fromBufferAttribute().\"),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}re.prototype.isVector3=!0;const Wa=new re,Rr=new Y;class nn{constructor(e=new re(1/0,1/0,1/0),t=new re(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,o=-1/0,s=-1/0,a=-1/0;for(let l=0,u=e.length;l<u;l+=3){const h=e[l],d=e[l+1],p=e[l+2];h<t&&(t=h),d<n&&(n=d),p<r&&(r=p),h>o&&(o=h),d>s&&(s=d),p>a&&(a=p)}return this.min.set(t,n,r),this.max.set(o,s,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,o=-1/0,s=-1/0,a=-1/0;for(let l=0,u=e.count;l<u;l++){const h=e.getX(l),d=e.getY(l),p=e.getZ(l);h<t&&(t=h),d<n&&(n=d),p<r&&(r=p),h>o&&(o=h),d>s&&(s=d),p>a&&(a=p)}return this.min.set(t,n,r),this.max.set(o,s,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Cr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;t!==void 0&&(t.boundingBox===null&&t.computeBoundingBox(),Zr.copy(t.boundingBox),Zr.applyMatrix4(e.matrixWorld),this.union(Zr));const n=e.children;for(let r=0,o=n.length;r<o;r++)this.expandByObject(n[r]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Cr),Cr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ia),bs.subVectors(this.max,ia),Ur.subVectors(e.a,ia),Yi.subVectors(e.b,ia),ta.subVectors(e.c,ia),Bo.subVectors(Yi,Ur),xs.subVectors(ta,Yi),na.subVectors(Ur,ta);let t=[0,-Bo.z,Bo.y,0,-xs.z,xs.y,0,-na.z,na.y,Bo.z,0,-Bo.x,xs.z,0,-xs.x,na.z,0,-na.x,-Bo.y,Bo.x,0,-xs.y,xs.x,0,-na.y,na.x,0];return!!fh(t,Ur,Yi,ta,bs)&&(t=[1,0,0,0,1,0,0,0,1],!!fh(t,Ur,Yi,ta,bs)&&(ra.crossVectors(Bo,xs),t=[ra.x,ra.y,ra.z],fh(t,Ur,Yi,ta,bs)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Cr.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Cr).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(tr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),tr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),tr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),tr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),tr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),tr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),tr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),tr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(tr)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}nn.prototype.isBox3=!0;const tr=[new re,new re,new re,new re,new re,new re,new re,new re],Cr=new re,Zr=new nn,Ur=new re,Yi=new re,ta=new re,Bo=new re,xs=new re,na=new re,ia=new re,bs=new re,ra=new re,oa=new re;function fh(i,e,t,n,r){for(let o=0,s=i.length-3;o<=s;o+=3){oa.fromArray(i,o);const a=r.x*Math.abs(oa.x)+r.y*Math.abs(oa.y)+r.z*Math.abs(oa.z),l=e.dot(oa),u=t.dot(oa),h=n.dot(oa);if(Math.max(-Math.max(l,u,h),Math.min(l,u,h))>a)return!1}return!0}const ko=new nn,mh=new re,Uo=new re,fr=new re;class Go{constructor(e=new re,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):ko.setFromPoints(e).getCenter(n);let r=0;for(let o=0,s=e.length;o<s;o++)r=Math.max(r,n.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){fr.subVectors(e,this.center);const t=fr.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=.5*(n-this.radius);this.center.add(fr.multiplyScalar(r/n)),this.radius+=r}return this}union(e){return Uo.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(mh.copy(e.center).add(Uo)),this.expandByPoint(mh.copy(e.center).sub(Uo)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const yo=new re,sa=new re,Kr=new re,Ho=new re,dd=new re,aa=new re,gh=new re;class ei{constructor(e=new re,t=new re(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,yo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=yo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(yo.copy(this.direction).multiplyScalar(t).add(this.origin),yo.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){sa.copy(e).add(t).multiplyScalar(.5),Kr.copy(t).sub(e).normalize(),Ho.copy(this.origin).sub(sa);const o=.5*e.distanceTo(t),s=-this.direction.dot(Kr),a=Ho.dot(this.direction),l=-Ho.dot(Kr),u=Ho.lengthSq(),h=Math.abs(1-s*s);let d,p,m,g;if(h>0)if(d=s*l-a,p=s*a-l,g=o*h,d>=0)if(p>=-g)if(p<=g){const _=1/h;d*=_,p*=_,m=d*(d+s*p+2*a)+p*(s*d+p+2*l)+u}else p=o,d=Math.max(0,-(s*p+a)),m=-d*d+p*(p+2*l)+u;else p=-o,d=Math.max(0,-(s*p+a)),m=-d*d+p*(p+2*l)+u;else p<=-g?(d=Math.max(0,-(-s*o+a)),p=d>0?-o:Math.min(Math.max(-o,-l),o),m=-d*d+p*(p+2*l)+u):p<=g?(d=0,p=Math.min(Math.max(-o,-l),o),m=p*(p+2*l)+u):(d=Math.max(0,-(s*o+a)),p=d>0?o:Math.min(Math.max(-o,-l),o),m=-d*d+p*(p+2*l)+u);else p=s>0?-o:o,d=Math.max(0,-(s*p+a)),m=-d*d+p*(p+2*l)+u;return n&&n.copy(this.direction).multiplyScalar(d).add(this.origin),r&&r.copy(Kr).multiplyScalar(p).add(sa),m}intersectSphere(e,t){yo.subVectors(e.center,this.origin);const n=yo.dot(this.direction),r=yo.dot(yo)-n*n,o=e.radius*e.radius;if(r>o)return null;const s=Math.sqrt(o-r),a=n-s,l=n+s;return a<0&&l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0?!0:e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,o,s,a,l;const u=1/this.direction.x,h=1/this.direction.y,d=1/this.direction.z,p=this.origin;return u>=0?(n=(e.min.x-p.x)*u,r=(e.max.x-p.x)*u):(n=(e.max.x-p.x)*u,r=(e.min.x-p.x)*u),h>=0?(o=(e.min.y-p.y)*h,s=(e.max.y-p.y)*h):(o=(e.max.y-p.y)*h,s=(e.min.y-p.y)*h),n>s||o>r?null:((o>n||n!=n)&&(n=o),(s<r||r!=r)&&(r=s),d>=0?(a=(e.min.z-p.z)*d,l=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,l=(e.min.z-p.z)*d),n>l||a>r?null:((a>n||n!=n)&&(n=a),(l<r||r!=r)&&(r=l),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return this.intersectBox(e,yo)!==null}intersectTriangle(e,t,n,r,o){dd.subVectors(t,e),aa.subVectors(n,e),gh.crossVectors(dd,aa);let s,a=this.direction.dot(gh);if(a>0){if(r)return null;s=1}else{if(!(a<0))return null;s=-1,a=-a}Ho.subVectors(this.origin,e);const l=s*this.direction.dot(aa.crossVectors(Ho,aa));if(l<0)return null;const u=s*this.direction.dot(dd.cross(Ho));if(u<0||l+u>a)return null;const h=-s*Ho.dot(gh);return h<0?null:this.at(h/a,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ut{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error(\"THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.\")}set(e,t,n,r,o,s,a,l,u,h,d,p,m,g,_,y){const w=this.elements;return w[0]=e,w[4]=t,w[8]=n,w[12]=r,w[1]=o,w[5]=s,w[9]=a,w[13]=l,w[2]=u,w[6]=h,w[10]=d,w[14]=p,w[3]=m,w[7]=g,w[11]=_,w[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ut().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/la.setFromMatrixColumn(e,0).length(),o=1/la.setFromMatrixColumn(e,1).length(),s=1/la.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*o,t[5]=n[5]*o,t[6]=n[6]*o,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error(\"THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.\");const t=this.elements,n=e.x,r=e.y,o=e.z,s=Math.cos(n),a=Math.sin(n),l=Math.cos(r),u=Math.sin(r),h=Math.cos(o),d=Math.sin(o);if(e.order===\"XYZ\"){const p=s*h,m=s*d,g=a*h,_=a*d;t[0]=l*h,t[4]=-l*d,t[8]=u,t[1]=m+g*u,t[5]=p-_*u,t[9]=-a*l,t[2]=_-p*u,t[6]=g+m*u,t[10]=s*l}else if(e.order===\"YXZ\"){const p=l*h,m=l*d,g=u*h,_=u*d;t[0]=p+_*a,t[4]=g*a-m,t[8]=s*u,t[1]=s*d,t[5]=s*h,t[9]=-a,t[2]=m*a-g,t[6]=_+p*a,t[10]=s*l}else if(e.order===\"ZXY\"){const p=l*h,m=l*d,g=u*h,_=u*d;t[0]=p-_*a,t[4]=-s*d,t[8]=g+m*a,t[1]=m+g*a,t[5]=s*h,t[9]=_-p*a,t[2]=-s*u,t[6]=a,t[10]=s*l}else if(e.order===\"ZYX\"){const p=s*h,m=s*d,g=a*h,_=a*d;t[0]=l*h,t[4]=g*u-m,t[8]=p*u+_,t[1]=l*d,t[5]=_*u+p,t[9]=m*u-g,t[2]=-u,t[6]=a*l,t[10]=s*l}else if(e.order===\"YZX\"){const p=s*l,m=s*u,g=a*l,_=a*u;t[0]=l*h,t[4]=_-p*d,t[8]=g*d+m,t[1]=d,t[5]=s*h,t[9]=-a*h,t[2]=-u*h,t[6]=m*d+g,t[10]=p-_*d}else if(e.order===\"XZY\"){const p=s*l,m=s*u,g=a*l,_=a*u;t[0]=l*h,t[4]=-d,t[8]=u*h,t[1]=p*d+_,t[5]=s*h,t[9]=m*d-g,t[2]=g*d-m,t[6]=a*h,t[10]=_*d+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(pd,e,vh)}lookAt(e,t,n){const r=this.elements;return jn.subVectors(e,t),jn.lengthSq()===0&&(jn.z=1),jn.normalize(),mr.crossVectors(n,jn),mr.lengthSq()===0&&(Math.abs(n.z)===1?jn.x+=1e-4:jn.z+=1e-4,jn.normalize(),mr.crossVectors(n,jn)),mr.normalize(),Pl.crossVectors(jn,mr),r[0]=mr.x,r[4]=Pl.x,r[8]=jn.x,r[1]=mr.y,r[5]=Pl.y,r[9]=jn.y,r[2]=mr.z,r[6]=Pl.z,r[10]=jn.z,this}multiply(e,t){return t!==void 0?(console.warn(\"THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.\"),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,o=this.elements,s=n[0],a=n[4],l=n[8],u=n[12],h=n[1],d=n[5],p=n[9],m=n[13],g=n[2],_=n[6],y=n[10],w=n[14],R=n[3],F=n[7],U=n[11],B=n[15],V=r[0],G=r[4],W=r[8],ge=r[12],he=r[1],se=r[5],de=r[9],ue=r[13],xe=r[2],We=r[6],Ge=r[10],Ae=r[14],Re=r[3],Ze=r[7],lt=r[11],dt=r[15];return o[0]=s*V+a*he+l*xe+u*Re,o[4]=s*G+a*se+l*We+u*Ze,o[8]=s*W+a*de+l*Ge+u*lt,o[12]=s*ge+a*ue+l*Ae+u*dt,o[1]=h*V+d*he+p*xe+m*Re,o[5]=h*G+d*se+p*We+m*Ze,o[9]=h*W+d*de+p*Ge+m*lt,o[13]=h*ge+d*ue+p*Ae+m*dt,o[2]=g*V+_*he+y*xe+w*Re,o[6]=g*G+_*se+y*We+w*Ze,o[10]=g*W+_*de+y*Ge+w*lt,o[14]=g*ge+_*ue+y*Ae+w*dt,o[3]=R*V+F*he+U*xe+B*Re,o[7]=R*G+F*se+U*We+B*Ze,o[11]=R*W+F*de+U*Ge+B*lt,o[15]=R*ge+F*ue+U*Ae+B*dt,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],o=e[12],s=e[1],a=e[5],l=e[9],u=e[13],h=e[2],d=e[6],p=e[10],m=e[14];return e[3]*(+o*l*d-r*u*d-o*a*p+n*u*p+r*a*m-n*l*m)+e[7]*(+t*l*m-t*u*p+o*s*p-r*s*m+r*u*h-o*l*h)+e[11]*(+t*u*d-t*a*m-o*s*d+n*s*m+o*a*h-n*u*h)+e[15]*(-r*a*h-t*l*d+t*a*p+r*s*d-n*s*p+n*l*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],h=e[8],d=e[9],p=e[10],m=e[11],g=e[12],_=e[13],y=e[14],w=e[15],R=d*y*u-_*p*u+_*l*m-a*y*m-d*l*w+a*p*w,F=g*p*u-h*y*u-g*l*m+s*y*m+h*l*w-s*p*w,U=h*_*u-g*d*u+g*a*m-s*_*m-h*a*w+s*d*w,B=g*d*l-h*_*l-g*a*p+s*_*p+h*a*y-s*d*y,V=t*R+n*F+r*U+o*B;if(V===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const G=1/V;return e[0]=R*G,e[1]=(_*p*o-d*y*o-_*r*m+n*y*m+d*r*w-n*p*w)*G,e[2]=(a*y*o-_*l*o+_*r*u-n*y*u-a*r*w+n*l*w)*G,e[3]=(d*l*o-a*p*o-d*r*u+n*p*u+a*r*m-n*l*m)*G,e[4]=F*G,e[5]=(h*y*o-g*p*o+g*r*m-t*y*m-h*r*w+t*p*w)*G,e[6]=(g*l*o-s*y*o-g*r*u+t*y*u+s*r*w-t*l*w)*G,e[7]=(s*p*o-h*l*o+h*r*u-t*p*u-s*r*m+t*l*m)*G,e[8]=U*G,e[9]=(g*d*o-h*_*o-g*n*m+t*_*m+h*n*w-t*d*w)*G,e[10]=(s*_*o-g*a*o+g*n*u-t*_*u-s*n*w+t*a*w)*G,e[11]=(h*a*o-s*d*o-h*n*u+t*d*u+s*n*m-t*a*m)*G,e[12]=B*G,e[13]=(h*_*r-g*d*r+g*n*p-t*_*p-h*n*y+t*d*y)*G,e[14]=(g*a*r-s*_*r-g*n*l+t*_*l+s*n*y-t*a*y)*G,e[15]=(s*d*r-h*a*r+h*n*l-t*d*l-s*n*p+t*a*p)*G,this}scale(e){const t=this.elements,n=e.x,r=e.y,o=e.z;return t[0]*=n,t[4]*=r,t[8]*=o,t[1]*=n,t[5]*=r,t[9]*=o,t[2]*=n,t[6]*=r,t[10]*=o,t[3]*=n,t[7]*=r,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),o=1-n,s=e.x,a=e.y,l=e.z,u=o*s,h=o*a;return this.set(u*s+n,u*a-r*l,u*l+r*a,0,u*a+r*l,h*a+n,h*l-r*s,0,u*l-r*a,h*l+r*s,o*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,o,s){return this.set(1,n,o,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,o=t._x,s=t._y,a=t._z,l=t._w,u=o+o,h=s+s,d=a+a,p=o*u,m=o*h,g=o*d,_=s*h,y=s*d,w=a*d,R=l*u,F=l*h,U=l*d,B=n.x,V=n.y,G=n.z;return r[0]=(1-(_+w))*B,r[1]=(m+U)*B,r[2]=(g-F)*B,r[3]=0,r[4]=(m-U)*V,r[5]=(1-(p+w))*V,r[6]=(y+R)*V,r[7]=0,r[8]=(g+F)*G,r[9]=(y-R)*G,r[10]=(1-(p+_))*G,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let o=la.set(r[0],r[1],r[2]).length();const s=la.set(r[4],r[5],r[6]).length(),a=la.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),e.x=r[12],e.y=r[13],e.z=r[14],Si.copy(this);const l=1/o,u=1/s,h=1/a;return Si.elements[0]*=l,Si.elements[1]*=l,Si.elements[2]*=l,Si.elements[4]*=u,Si.elements[5]*=u,Si.elements[6]*=u,Si.elements[8]*=h,Si.elements[9]*=h,Si.elements[10]*=h,t.setFromRotationMatrix(Si),n.x=o,n.y=s,n.z=a,this}makePerspective(e,t,n,r,o,s){s===void 0&&console.warn(\"THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.\");const a=this.elements,l=2*o/(t-e),u=2*o/(n-r),h=(t+e)/(t-e),d=(n+r)/(n-r),p=-(s+o)/(s-o),m=-2*s*o/(s-o);return a[0]=l,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=u,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=p,a[14]=m,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,o,s){const a=this.elements,l=1/(t-e),u=1/(n-r),h=1/(s-o),d=(t+e)*l,p=(n+r)*u,m=(s+o)*h;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-p,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-m,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}Ut.prototype.isMatrix4=!0;const la=new re,Si=new Ut,pd=new re(0,0,0),vh=new re(1,1,1),mr=new re,Pl=new re,jn=new re,_h=new Ut,ff=new Y;class ua{constructor(e=0,t=0,n=0,r=ua.DefaultOrder){this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,o=r[0],s=r[4],a=r[8],l=r[1],u=r[5],h=r[9],d=r[2],p=r[6],m=r[10];switch(t){case\"XYZ\":this._y=Math.asin(Bi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,m),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(p,u),this._z=0);break;case\"YXZ\":this._x=Math.asin(-Bi(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,o),this._z=0);break;case\"ZXY\":this._x=Math.asin(Bi(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(l,o));break;case\"ZYX\":this._y=Math.asin(-Bi(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-s,u));break;case\"YZX\":this._z=Math.asin(Bi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-d,o)):(this._x=0,this._y=Math.atan2(a,m));break;case\"XZY\":this._z=Math.asin(-Bi(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-h,m),this._y=0);break;default:console.warn(\"THREE.Euler: .setFromRotationMatrix() encountered an unknown order: \"+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return _h.makeRotationFromQuaternion(e),this.setFromRotationMatrix(_h,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return ff.setFromEuler(this),this.setFromQuaternion(ff,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new re(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}ua.prototype.isEuler=!0,ua.DefaultOrder=\"XYZ\",ua.RotationOrders=[\"XYZ\",\"YZX\",\"ZXY\",\"XZY\",\"YXZ\",\"ZYX\"];class Il{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!=0}}let Ol=0;const fd=new re,xo=new Y,Qr=new Ut,Ll=new re,Xa=new re,md=new re,zg=new Y,yh=new re(1,0,0),gd=new re(0,1,0),vd=new re(0,0,1),mf={type:\"added\"},Nl={type:\"removed\"};class yn extends ys{constructor(){super(),Object.defineProperty(this,\"id\",{value:Ol++}),this.uuid=Ar(),this.name=\"\",this.type=\"Object3D\",this.parent=null,this.children=[],this.up=yn.DefaultUp.clone();const e=new re,t=new ua,n=new Y,r=new re(1,1,1);t._onChange(function(){n.setFromEuler(t,!1)}),n._onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ut},normalMatrix:{value:new Qn}}),this.matrix=new Ut,this.matrixWorld=new Ut,this.matrixAutoUpdate=yn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Il,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return xo.setFromAxisAngle(e,t),this.quaternion.multiply(xo),this}rotateOnWorldAxis(e,t){return xo.setFromAxisAngle(e,t),this.quaternion.premultiply(xo),this}rotateX(e){return this.rotateOnAxis(yh,e)}rotateY(e){return this.rotateOnAxis(gd,e)}rotateZ(e){return this.rotateOnAxis(vd,e)}translateOnAxis(e,t){return fd.copy(e).applyQuaternion(this.quaternion),this.position.add(fd.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(yh,e)}translateY(e){return this.translateOnAxis(gd,e)}translateZ(e){return this.translateOnAxis(vd,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Qr.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Ll.copy(e):Ll.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Xa.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Qr.lookAt(Xa,Ll,this.up):Qr.lookAt(Ll,Xa,this.up),this.quaternion.setFromRotationMatrix(Qr),r&&(Qr.extractRotation(r.matrixWorld),xo.setFromRotationMatrix(Qr),this.quaternion.premultiply(xo.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error(\"THREE.Object3D.add: object can't be added as a child of itself.\",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(mf)):console.error(\"THREE.Object3D.add: object not an instance of THREE.Object3D.\",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Nl)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(Nl)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Qr.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Qr.multiply(e.parent.matrixWorld)),e.applyMatrix4(Qr),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty(\"id\",e)}getObjectByName(e){return this.getObjectByProperty(\"name\",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Xa,e,md),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Xa,zg,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let o=0,s=r.length;o<s;o++)r[o].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e==\"string\",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:\"Object\",generator:\"Object3D.toJSON\"});const r={};function o(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(r.uuid=this.uuid,r.type=this.type,this.name!==\"\"&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),JSON.stringify(this.userData)!==\"{}\"&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type=\"InstancedMesh\",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=o(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,h=l.length;u<h;u++){const d=l[u];o(e.shapes,d)}else o(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(o(e.materials,this.material[l]));r.material=a}else r.material=o(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(o(e.animations,l))}}if(t){const a=s(e.geometries),l=s(e.materials),u=s(e.textures),h=s(e.images),d=s(e.shapes),p=s(e.skeletons),m=s(e.animations);a.length>0&&(n.geometries=a),l.length>0&&(n.materials=l),u.length>0&&(n.textures=u),h.length>0&&(n.images=h),d.length>0&&(n.shapes=d),p.length>0&&(n.skeletons=p),m.length>0&&(n.animations=m)}return n.object=r,n;function s(a){const l=[];for(const u in a){const h=a[u];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}}yn.DefaultUp=new re(0,1,0),yn.DefaultMatrixAutoUpdate=!0,yn.prototype.isObject3D=!0;const Gr=new re,bo=new re,Dl=new re,wo=new re,ws=new re,Ss=new re,vn=new re,_d=new re,yd=new re,ha=new re;class hi{constructor(e=new re,t=new re,n=new re){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),Gr.subVectors(e,t),r.cross(Gr);const o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(e,t,n,r,o){Gr.subVectors(r,t),bo.subVectors(n,t),Dl.subVectors(e,t);const s=Gr.dot(Gr),a=Gr.dot(bo),l=Gr.dot(Dl),u=bo.dot(bo),h=bo.dot(Dl),d=s*u-a*a;if(d===0)return o.set(-2,-1,-1);const p=1/d,m=(u*l-a*h)*p,g=(s*h-a*l)*p;return o.set(1-m-g,g,m)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,wo),wo.x>=0&&wo.y>=0&&wo.x+wo.y<=1}static getUV(e,t,n,r,o,s,a,l){return this.getBarycoord(e,t,n,r,wo),l.set(0,0),l.addScaledVector(o,wo.x),l.addScaledVector(s,wo.y),l.addScaledVector(a,wo.z),l}static isFrontFacing(e,t,n,r){return Gr.subVectors(n,t),bo.subVectors(e,t),Gr.cross(bo).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Gr.subVectors(this.c,this.b),bo.subVectors(this.a,this.b),.5*Gr.cross(bo).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return hi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return hi.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,o){return hi.getUV(e,this.a,this.b,this.c,t,n,r,o)}containsPoint(e){return hi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return hi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,o=this.c;let s,a;ws.subVectors(r,n),Ss.subVectors(o,n),_d.subVectors(e,n);const l=ws.dot(_d),u=Ss.dot(_d);if(l<=0&&u<=0)return t.copy(n);yd.subVectors(e,r);const h=ws.dot(yd),d=Ss.dot(yd);if(h>=0&&d<=h)return t.copy(r);const p=l*d-h*u;if(p<=0&&l>=0&&h<=0)return s=l/(l-h),t.copy(n).addScaledVector(ws,s);ha.subVectors(e,o);const m=ws.dot(ha),g=Ss.dot(ha);if(g>=0&&m<=g)return t.copy(o);const _=m*u-l*g;if(_<=0&&u>=0&&g<=0)return a=u/(u-g),t.copy(n).addScaledVector(Ss,a);const y=h*g-m*d;if(y<=0&&d-h>=0&&m-g>=0)return vn.subVectors(o,r),a=(d-h)/(d-h+(m-g)),t.copy(r).addScaledVector(vn,a);const w=1/(y+_+p);return s=_*w,a=p*w,t.copy(n).addScaledVector(ws,s).addScaledVector(Ss,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let jg=0;class ki extends ys{constructor(){super(),Object.defineProperty(this,\"id\",{value:jg++}),this.uuid=Ar(),this.name=\"\",this.type=\"Material\",this.fog=!0,this.blending=Me,this.side=X,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=qt,this.blendDst=en,this.blendEquation=Le,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Rn,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ld,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=nh,this.stencilZFail=nh,this.stencilZPass=nh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}onBuild(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(\"THREE.Material: '\"+t+\"' parameter is undefined.\");continue}if(t===\"shading\"){console.warn(\"THREE.\"+this.type+\": .shading has been removed. Use the boolean .flatShading instead.\"),this.flatShading=n===pt;continue}const r=this[t];r!==void 0?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn(\"THREE.\"+this.type+\": '\"+t+\"' is not a property of this material.\")}}toJSON(e){const t=e===void 0||typeof e==\"string\";t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:\"Material\",generator:\"Material.toJSON\"}};function r(o){const s=[];for(const a in o){const l=o[a];delete l.metadata,s.push(l)}return s}if(n.uuid=this.uuid,n.type=this.type,this.name!==\"\"&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Me&&(n.blending=this.blending),this.side!==X&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(n.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!==\"round\"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!==\"round\"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(n.morphTargets=!0),this.morphNormals===!0&&(n.morphNormals=!0),this.flatShading===!0&&(n.flatShading=this.flatShading),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),JSON.stringify(this.userData)!==\"{}\"&&(n.userData=this.userData),t){const o=r(e.textures),s=r(e.images);o.length>0&&(n.textures=o),s.length>0&&(n.images=s)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let o=0;o!==r;++o)n[o]=t[o].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:\"dispose\"})}set needsUpdate(e){e===!0&&this.version++}}ki.prototype.isMaterial=!0;const Pr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},eo={h:0,s:0,l:0},ca={h:0,s:0,l:0};function Fl(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+6*(e-i)*t:t<.5?e:t<2/3?i+6*(e-i)*(2/3-t):i}function xh(i){return i<.04045?.0773993808*i:Math.pow(.9478672986*i+.0521327014,2.4)}function bh(i){return i<.0031308?12.92*i:1.055*Math.pow(i,.41666)-.055}class Et{constructor(e,t,n){return t===void 0&&n===void 0?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):typeof e==\"number\"?this.setHex(e):typeof e==\"string\"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this}setHSL(e,t,n){if(e=hd(e,1),t=Bi(t,0,1),n=Bi(n,0,1),t===0)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,o=2*n-r;this.r=Fl(o,r,e+1/3),this.g=Fl(o,r,e),this.b=Fl(o,r,e-1/3)}return this}setStyle(e){function t(r){r!==void 0&&parseFloat(r)<1&&console.warn(\"THREE.Color: Alpha component of \"+e+\" will be ignored.\")}let n;if(n=/^((?:rgb|hsl)a?)\\(([^\\)]*)\\)/.exec(e)){let r;const o=n[1],s=n[2];switch(o){case\"rgb\":case\"rgba\":if(r=/^\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[4]),this;if(r=/^\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[4]),this;break;case\"hsl\":case\"hsla\":if(r=/^\\s*(\\d*\\.?\\d+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec(s)){const a=parseFloat(r[1])/360,l=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return t(r[4]),this.setHSL(a,l,u)}}}else if(n=/^\\#([A-Fa-f\\d]+)$/.exec(e)){const r=n[1],o=r.length;if(o===3)return this.r=parseInt(r.charAt(0)+r.charAt(0),16)/255,this.g=parseInt(r.charAt(1)+r.charAt(1),16)/255,this.b=parseInt(r.charAt(2)+r.charAt(2),16)/255,this;if(o===6)return this.r=parseInt(r.charAt(0)+r.charAt(1),16)/255,this.g=parseInt(r.charAt(2)+r.charAt(3),16)/255,this.b=parseInt(r.charAt(4)+r.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=Pr[e.toLowerCase()];return t!==void 0?this.setHex(t):console.warn(\"THREE.Color: Unknown color \"+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=xh(e.r),this.g=xh(e.g),this.b=xh(e.b),this}copyLinearToSRGB(e){return this.r=bh(e.r),this.g=bh(e.g),this.b=bh(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return(\"000000\"+this.getHex().toString(16)).slice(-6)}getHSL(e){const t=this.r,n=this.g,r=this.b,o=Math.max(t,n,r),s=Math.min(t,n,r);let a,l;const u=(s+o)/2;if(s===o)a=0,l=0;else{const h=o-s;switch(l=u<=.5?h/(o+s):h/(2-o-s),o){case t:a=(n-r)/h+(n<r?6:0);break;case n:a=(r-t)/h+2;break;case r:a=(t-n)/h+4}a/=6}return e.h=a,e.s=l,e.l=u,e}getStyle(){return\"rgb(\"+(255*this.r|0)+\",\"+(255*this.g|0)+\",\"+(255*this.b|0)+\")\"}offsetHSL(e,t,n){return this.getHSL(eo),eo.h+=e,eo.s+=t,eo.l+=n,this.setHSL(eo.h,eo.s,eo.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(eo),e.getHSL(ca);const n=Zs(eo.h,ca.h,t),r=Zs(eo.s,ca.s,t),o=Zs(eo.l,ca.l,t);return this.setHSL(n,r,o),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Et.NAMES=Pr,Et.prototype.isColor=!0,Et.prototype.r=1,Et.prototype.g=1,Et.prototype.b=1;class $i extends ki{constructor(e){super(),this.type=\"MeshBasicMaterial\",this.color=new Et(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Po,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=\"round\",this.wireframeLinejoin=\"round\",this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this}}$i.prototype.isMeshBasicMaterial=!0;const Hn=new re,Bl=new gt;class mn{constructor(e,t,n){if(Array.isArray(e))throw new TypeError(\"THREE.BufferAttribute: array should be a Typed Array.\");this.name=\"\",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n===!0,this.usage=_o,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let n=0;for(let r=0,o=e.length;r<o;r++){let s=e[r];s===void 0&&(console.warn(\"THREE.BufferAttribute.copyColorsArray(): color is undefined\",r),s=new Et),t[n++]=s.r,t[n++]=s.g,t[n++]=s.b}return this}copyVector2sArray(e){const t=this.array;let n=0;for(let r=0,o=e.length;r<o;r++){let s=e[r];s===void 0&&(console.warn(\"THREE.BufferAttribute.copyVector2sArray(): vector is undefined\",r),s=new gt),t[n++]=s.x,t[n++]=s.y}return this}copyVector3sArray(e){const t=this.array;let n=0;for(let r=0,o=e.length;r<o;r++){let s=e[r];s===void 0&&(console.warn(\"THREE.BufferAttribute.copyVector3sArray(): vector is undefined\",r),s=new re),t[n++]=s.x,t[n++]=s.y,t[n++]=s.z}return this}copyVector4sArray(e){const t=this.array;let n=0;for(let r=0,o=e.length;r<o;r++){let s=e[r];s===void 0&&(console.warn(\"THREE.BufferAttribute.copyVector4sArray(): vector is undefined\",r),s=new Un),t[n++]=s.x,t[n++]=s.y,t[n++]=s.z,t[n++]=s.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)Bl.fromBufferAttribute(this,t),Bl.applyMatrix3(e),this.setXY(t,Bl.x,Bl.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Hn.fromBufferAttribute(this,t),Hn.applyMatrix3(e),this.setXYZ(t,Hn.x,Hn.y,Hn.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Hn.x=this.getX(t),Hn.y=this.getY(t),Hn.z=this.getZ(t),Hn.applyMatrix4(e),this.setXYZ(t,Hn.x,Hn.y,Hn.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Hn.x=this.getX(t),Hn.y=this.getY(t),Hn.z=this.getZ(t),Hn.applyNormalMatrix(e),this.setXYZ(t,Hn.x,Hn.y,Hn.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Hn.x=this.getX(t),Hn.y=this.getY(t),Hn.z=this.getZ(t),Hn.transformDirection(e),this.setXYZ(t,Hn.x,Hn.y,Hn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,o){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==\"\"&&(e.name=this.name),this.usage!==_o&&(e.usage=this.usage),this.updateRange.offset===0&&this.updateRange.count===-1||(e.updateRange=this.updateRange),e}}mn.prototype.isBufferAttribute=!0;class xd extends mn{constructor(e,t,n){super(new Int8Array(e),t,n)}}class wh extends mn{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class bd extends mn{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class Sh extends mn{constructor(e,t,n){super(new Int16Array(e),t,n)}}class qa extends mn{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class zo extends mn{constructor(e,t,n){super(new Int32Array(e),t,n)}}class Th extends mn{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class jo extends mn{constructor(e,t,n){super(new Uint16Array(e),t,n)}}jo.prototype.isFloat16BufferAttribute=!0;class Mt extends mn{constructor(e,t,n){super(new Float32Array(e),t,n)}}class wd extends mn{constructor(e,t,n){super(new Float64Array(e),t,n)}}function Eh(i){if(i.length===0)return-1/0;let e=i[0];for(let t=1,n=i.length;t<n;++t)i[t]>e&&(e=i[t]);return e}const gf={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function da(i,e){return new gf[i](e)}let vf=0;const Ir=new Ut,Ji=new yn,nr=new re,Zi=new nn,So=new nn,Ri=new re;class Vt extends ys{constructor(){super(),Object.defineProperty(this,\"id\",{value:vf++}),this.uuid=Ar(),this.name=\"\",this.type=\"BufferGeometry\",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Eh(e)>65535?Th:qa)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const o=new Qn().getNormalMatrix(e);n.applyNormalMatrix(o),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ir.makeRotationFromQuaternion(e),this.applyMatrix4(Ir),this}rotateX(e){return Ir.makeRotationX(e),this.applyMatrix4(Ir),this}rotateY(e){return Ir.makeRotationY(e),this.applyMatrix4(Ir),this}rotateZ(e){return Ir.makeRotationZ(e),this.applyMatrix4(Ir),this}translate(e,t,n){return Ir.makeTranslation(e,t,n),this.applyMatrix4(Ir),this}scale(e,t,n){return Ir.makeScale(e,t,n),this.applyMatrix4(Ir),this}lookAt(e){return Ji.lookAt(e),Ji.updateMatrix(),this.applyMatrix4(Ji.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(nr).negate(),this.translate(nr.x,nr.y,nr.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const o=e[n];t.push(o.x,o.y,o.z||0)}return this.setAttribute(\"position\",new Mt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new nn);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set \"mesh.frustumCulled\" to \"false\".',this),void this.boundingBox.set(new re(-1/0,-1/0,-1/0),new re(1/0,1/0,1/0));if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const o=t[n];Zi.setFromBufferAttribute(o),this.morphTargetsRelative?(Ri.addVectors(this.boundingBox.min,Zi.min),this.boundingBox.expandByPoint(Ri),Ri.addVectors(this.boundingBox.max,Zi.max),this.boundingBox.expandByPoint(Ri)):(this.boundingBox.expandByPoint(Zi.min),this.boundingBox.expandByPoint(Zi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Go);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set \"mesh.frustumCulled\" to \"false\".',this),void this.boundingSphere.set(new re,1/0);if(e){const n=this.boundingSphere.center;if(Zi.setFromBufferAttribute(e),t)for(let o=0,s=t.length;o<s;o++){const a=t[o];So.setFromBufferAttribute(a),this.morphTargetsRelative?(Ri.addVectors(Zi.min,So.min),Zi.expandByPoint(Ri),Ri.addVectors(Zi.max,So.max),Zi.expandByPoint(Ri)):(Zi.expandByPoint(So.min),Zi.expandByPoint(So.max))}Zi.getCenter(n);let r=0;for(let o=0,s=e.count;o<s;o++)Ri.fromBufferAttribute(e,o),r=Math.max(r,n.distanceToSquared(Ri));if(t)for(let o=0,s=t.length;o<s;o++){const a=t[o],l=this.morphTargetsRelative;for(let u=0,h=a.count;u<h;u++)Ri.fromBufferAttribute(a,u),l&&(nr.fromBufferAttribute(e,u),Ri.add(nr)),r=Math.max(r,n.distanceToSquared(Ri))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.',this)}}computeFaceNormals(){}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0)return void console.error(\"THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)\");const n=e.array,r=t.position.array,o=t.normal.array,s=t.uv.array,a=r.length/3;t.tangent===void 0&&this.setAttribute(\"tangent\",new mn(new Float32Array(4*a),4));const l=t.tangent.array,u=[],h=[];for(let he=0;he<a;he++)u[he]=new re,h[he]=new re;const d=new re,p=new re,m=new re,g=new gt,_=new gt,y=new gt,w=new re,R=new re;function F(he,se,de){d.fromArray(r,3*he),p.fromArray(r,3*se),m.fromArray(r,3*de),g.fromArray(s,2*he),_.fromArray(s,2*se),y.fromArray(s,2*de),p.sub(d),m.sub(d),_.sub(g),y.sub(g);const ue=1/(_.x*y.y-y.x*_.y);isFinite(ue)&&(w.copy(p).multiplyScalar(y.y).addScaledVector(m,-_.y).multiplyScalar(ue),R.copy(m).multiplyScalar(_.x).addScaledVector(p,-y.x).multiplyScalar(ue),u[he].add(w),u[se].add(w),u[de].add(w),h[he].add(R),h[se].add(R),h[de].add(R))}let U=this.groups;U.length===0&&(U=[{start:0,count:n.length}]);for(let he=0,se=U.length;he<se;++he){const de=U[he],ue=de.start;for(let xe=ue,We=ue+de.count;xe<We;xe+=3)F(n[xe+0],n[xe+1],n[xe+2])}const B=new re,V=new re,G=new re,W=new re;function ge(he){G.fromArray(o,3*he),W.copy(G);const se=u[he];B.copy(se),B.sub(G.multiplyScalar(G.dot(se))).normalize(),V.crossVectors(W,se);const de=V.dot(h[he])<0?-1:1;l[4*he]=B.x,l[4*he+1]=B.y,l[4*he+2]=B.z,l[4*he+3]=de}for(let he=0,se=U.length;he<se;++he){const de=U[he],ue=de.start;for(let xe=ue,We=ue+de.count;xe<We;xe+=3)ge(n[xe+0]),ge(n[xe+1]),ge(n[xe+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute(\"position\");if(t!==void 0){let n=this.getAttribute(\"normal\");if(n===void 0)n=new mn(new Float32Array(3*t.count),3),this.setAttribute(\"normal\",n);else for(let p=0,m=n.count;p<m;p++)n.setXYZ(p,0,0,0);const r=new re,o=new re,s=new re,a=new re,l=new re,u=new re,h=new re,d=new re;if(e)for(let p=0,m=e.count;p<m;p+=3){const g=e.getX(p+0),_=e.getX(p+1),y=e.getX(p+2);r.fromBufferAttribute(t,g),o.fromBufferAttribute(t,_),s.fromBufferAttribute(t,y),h.subVectors(s,o),d.subVectors(r,o),h.cross(d),a.fromBufferAttribute(n,g),l.fromBufferAttribute(n,_),u.fromBufferAttribute(n,y),a.add(h),l.add(h),u.add(h),n.setXYZ(g,a.x,a.y,a.z),n.setXYZ(_,l.x,l.y,l.z),n.setXYZ(y,u.x,u.y,u.z)}else for(let p=0,m=t.count;p<m;p+=3)r.fromBufferAttribute(t,p+0),o.fromBufferAttribute(t,p+1),s.fromBufferAttribute(t,p+2),h.subVectors(s,o),d.subVectors(r,o),h.cross(d),n.setXYZ(p+0,h.x,h.y,h.z),n.setXYZ(p+1,h.x,h.y,h.z),n.setXYZ(p+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error(\"THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.\",e);t===void 0&&(t=0,console.warn(\"THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.\"));const n=this.attributes;for(const r in n){if(e.attributes[r]===void 0)continue;const o=n[r].array,s=e.attributes[r],a=s.array,l=s.itemSize*t,u=Math.min(a.length,o.length-l);for(let h=0,d=l;h<u;h++,d++)o[d]=a[h]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Ri.fromBufferAttribute(e,t),Ri.normalize(),e.setXYZ(t,Ri.x,Ri.y,Ri.z)}toNonIndexed(){function e(a,l){const u=a.array,h=a.itemSize,d=a.normalized,p=new u.constructor(l.length*h);let m=0,g=0;for(let _=0,y=l.length;_<y;_++){m=a.isInterleavedBufferAttribute?l[_]*a.data.stride+a.offset:l[_]*h;for(let w=0;w<h;w++)p[g++]=u[m++]}return new mn(p,h,d)}if(this.index===null)return console.warn(\"THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed.\"),this;const t=new Vt,n=this.index.array,r=this.attributes;for(const a in r){const l=e(r[a],n);t.setAttribute(a,l)}const o=this.morphAttributes;for(const a in o){const l=[],u=o[a];for(let h=0,d=u.length;h<d;h++){const p=e(u[h],n);l.push(p)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,l=s.length;a<l;a++){const u=s[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:\"BufferGeometry\",generator:\"BufferGeometry.toJSON\"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==\"\"&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n){const u=n[l];e.data.attributes[l]=u.toJSON(e.data)}const r={};let o=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],h=[];for(let d=0,p=u.length;d<p;d++){const m=u[d];h.push(m.toJSON(e.data))}h.length>0&&(r[l]=h,o=!0)}o&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new Vt().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const r=e.attributes;for(const u in r){const h=r[u];this.setAttribute(u,h.clone(t))}const o=e.morphAttributes;for(const u in o){const h=[],d=o[u];for(let p=0,m=d.length;p<m;p++)h.push(d[p].clone(t));this.morphAttributes[u]=h}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let u=0,h=s.length;u<h;u++){const d=s[u];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:\"dispose\"})}}Vt.prototype.isBufferGeometry=!0;const Sd=new Ut,to=new ei,pa=new Go,Vo=new re,Wo=new re,no=new re,Mh=new re,Ya=new re,kl=new re,fa=new re,Ul=new re,ma=new re,Gl=new gt,$a=new gt,Ah=new gt,Rh=new re,Hr=new re;class Xn extends yn{constructor(e=new Vt,t=new $i){super(),this.type=\"Mesh\",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){const a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error(\"THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.\")}}raycast(e,t){const n=this.geometry,r=this.material,o=this.matrixWorld;if(r===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),pa.copy(n.boundingSphere),pa.applyMatrix4(o),e.ray.intersectsSphere(pa)===!1)||(Sd.copy(o).invert(),to.copy(e.ray).applyMatrix4(Sd),n.boundingBox!==null&&to.intersectsBox(n.boundingBox)===!1))return;let s;if(n.isBufferGeometry){const a=n.index,l=n.attributes.position,u=n.morphAttributes.position,h=n.morphTargetsRelative,d=n.attributes.uv,p=n.attributes.uv2,m=n.groups,g=n.drawRange;if(a!==null)if(Array.isArray(r))for(let _=0,y=m.length;_<y;_++){const w=m[_],R=r[w.materialIndex];for(let F=Math.max(w.start,g.start),U=Math.min(w.start+w.count,g.start+g.count);F<U;F+=3){const B=a.getX(F),V=a.getX(F+1),G=a.getX(F+2);s=Hl(this,R,e,to,l,u,h,d,p,B,V,G),s&&(s.faceIndex=Math.floor(F/3),s.face.materialIndex=w.materialIndex,t.push(s))}}else for(let _=Math.max(0,g.start),y=Math.min(a.count,g.start+g.count);_<y;_+=3){const w=a.getX(_),R=a.getX(_+1),F=a.getX(_+2);s=Hl(this,r,e,to,l,u,h,d,p,w,R,F),s&&(s.faceIndex=Math.floor(_/3),t.push(s))}else if(l!==void 0)if(Array.isArray(r))for(let _=0,y=m.length;_<y;_++){const w=m[_],R=r[w.materialIndex];for(let F=Math.max(w.start,g.start),U=Math.min(w.start+w.count,g.start+g.count);F<U;F+=3)s=Hl(this,R,e,to,l,u,h,d,p,F,F+1,F+2),s&&(s.faceIndex=Math.floor(F/3),s.face.materialIndex=w.materialIndex,t.push(s))}else for(let _=Math.max(0,g.start),y=Math.min(l.count,g.start+g.count);_<y;_+=3)s=Hl(this,r,e,to,l,u,h,d,p,_,_+1,_+2),s&&(s.faceIndex=Math.floor(_/3),t.push(s))}else n.isGeometry&&console.error(\"THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.\")}}function Hl(i,e,t,n,r,o,s,a,l,u,h,d){Vo.fromBufferAttribute(r,u),Wo.fromBufferAttribute(r,h),no.fromBufferAttribute(r,d);const p=i.morphTargetInfluences;if(e.morphTargets&&o&&p){fa.set(0,0,0),Ul.set(0,0,0),ma.set(0,0,0);for(let g=0,_=o.length;g<_;g++){const y=p[g],w=o[g];y!==0&&(Mh.fromBufferAttribute(w,u),Ya.fromBufferAttribute(w,h),kl.fromBufferAttribute(w,d),s?(fa.addScaledVector(Mh,y),Ul.addScaledVector(Ya,y),ma.addScaledVector(kl,y)):(fa.addScaledVector(Mh.sub(Vo),y),Ul.addScaledVector(Ya.sub(Wo),y),ma.addScaledVector(kl.sub(no),y)))}Vo.add(fa),Wo.add(Ul),no.add(ma)}i.isSkinnedMesh&&(i.boneTransform(u,Vo),i.boneTransform(h,Wo),i.boneTransform(d,no));const m=function(g,_,y,w,R,F,U,B){let V;if(V=_.side===ne?w.intersectTriangle(U,F,R,!0,B):w.intersectTriangle(R,F,U,_.side!==Ve,B),V===null)return null;Hr.copy(B),Hr.applyMatrix4(g.matrixWorld);const G=y.ray.origin.distanceTo(Hr);return G<y.near||G>y.far?null:{distance:G,point:Hr.clone(),object:g}}(i,e,t,n,Vo,Wo,no,Rh);if(m){a&&(Gl.fromBufferAttribute(a,u),$a.fromBufferAttribute(a,h),Ah.fromBufferAttribute(a,d),m.uv=hi.getUV(Rh,Vo,Wo,no,Gl,$a,Ah,new gt)),l&&(Gl.fromBufferAttribute(l,u),$a.fromBufferAttribute(l,h),Ah.fromBufferAttribute(l,d),m.uv2=hi.getUV(Rh,Vo,Wo,no,Gl,$a,Ah,new gt));const g={a:u,b:h,c:d,normal:new re,materialIndex:0};hi.getNormal(Vo,Wo,no,g.normal),m.face=g}return m}Xn.prototype.isMesh=!0;class Xo extends Vt{constructor(e=1,t=1,n=1,r=1,o=1,s=1){super(),this.type=\"BoxGeometry\",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:o,depthSegments:s};const a=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);const l=[],u=[],h=[],d=[];let p=0,m=0;function g(_,y,w,R,F,U,B,V,G,W,ge){const he=U/G,se=B/W,de=U/2,ue=B/2,xe=V/2,We=G+1,Ge=W+1;let Ae=0,Re=0;const Ze=new re;for(let lt=0;lt<Ge;lt++){const dt=lt*se-ue;for(let ce=0;ce<We;ce++){const fe=ce*he-de;Ze[_]=fe*R,Ze[y]=dt*F,Ze[w]=xe,u.push(Ze.x,Ze.y,Ze.z),Ze[_]=0,Ze[y]=0,Ze[w]=V>0?1:-1,h.push(Ze.x,Ze.y,Ze.z),d.push(ce/G),d.push(1-lt/W),Ae+=1}}for(let lt=0;lt<W;lt++)for(let dt=0;dt<G;dt++){const ce=p+dt+We*lt,fe=p+dt+We*(lt+1),Qe=p+(dt+1)+We*(lt+1),Xe=p+(dt+1)+We*lt;l.push(ce,fe,Xe),l.push(fe,Qe,Xe),Re+=6}a.addGroup(m,Re,ge),m+=Re,p+=Ae}g(\"z\",\"y\",\"x\",-1,-1,n,t,e,s,o,0),g(\"z\",\"y\",\"x\",1,-1,n,t,-e,s,o,1),g(\"x\",\"z\",\"y\",1,1,e,n,t,r,s,2),g(\"x\",\"z\",\"y\",1,-1,e,n,-t,r,s,3),g(\"x\",\"y\",\"z\",1,-1,e,t,n,r,o,4),g(\"x\",\"y\",\"z\",-1,-1,e,t,-n,r,o,5),this.setIndex(l),this.setAttribute(\"position\",new Mt(u,3)),this.setAttribute(\"normal\",new Mt(h,3)),this.setAttribute(\"uv\",new Mt(d,2))}static fromJSON(e){return new Xo(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ga(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function ti(i){const e={};for(let t=0;t<i.length;t++){const n=ga(i[t]);for(const r in n)e[r]=n[r]}return e}const Ch={clone:ga,merge:ti};class ir extends ki{constructor(e){super(),this.type=\"ShaderMaterial\",this.defines={},this.uniforms={},this.vertexShader=`void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}`,this.fragmentShader=`void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}`,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error(\"THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.\"),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ga(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:\"t\",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:\"c\",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:\"v2\",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:\"v3\",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:\"v4\",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:\"m3\",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:\"m4\",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}ir.prototype.isShaderMaterial=!0;class va extends yn{constructor(){super(),this.type=\"Camera\",this.matrixWorldInverse=new Ut,this.projectionMatrix=new Ut,this.projectionMatrixInverse=new Ut}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}va.prototype.isCamera=!0;class ci extends va{constructor(e=50,t=1,n=.1,r=2e3){super(),this.type=\"PerspectiveCamera\",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Cl*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*ui*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Cl*Math.atan(Math.tan(.5*ui*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,o,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*ui*this.fov)/this.zoom,n=2*t,r=this.aspect*n,o=-.5*r;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,u=s.fullHeight;o+=s.offsetX*r/l,t-=s.offsetY*n/u,r*=s.width/l,n*=s.height/u}const a=this.filmOffset;a!==0&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}ci.prototype.isPerspectiveCamera=!0;class qo extends yn{constructor(e,t,n){if(super(),this.type=\"CubeCamera\",n.isWebGLCubeRenderTarget!==!0)return void console.error(\"THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.\");this.renderTarget=n;const r=new ci(90,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new re(1,0,0)),this.add(r);const o=new ci(90,1,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new re(-1,0,0)),this.add(o);const s=new ci(90,1,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new re(0,1,0)),this.add(s);const a=new ci(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new re(0,-1,0)),this.add(a);const l=new ci(90,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new re(0,0,1)),this.add(l);const u=new ci(90,1,e,t);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new re(0,0,-1)),this.add(u)}update(e,t){this.parent===null&&this.updateMatrixWorld();const n=this.renderTarget,[r,o,s,a,l,u]=this.children,h=e.xr.enabled,d=e.getRenderTarget();e.xr.enabled=!1;const p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,o),e.setRenderTarget(n,2),e.render(t,s),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,l),n.texture.generateMipmaps=p,e.setRenderTarget(n,5),e.render(t,u),e.setRenderTarget(d),e.xr.enabled=h}}class jt extends gi{constructor(e,t,n,r,o,s,a,l,u,h){super(e=e!==void 0?e:[],t=t!==void 0?t:ve,n,r,o,s,a=a!==void 0?a:Lo,l,u,h),this._needsFlipEnvMap=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}jt.prototype.isCubeTexture=!0;class _a extends pr{constructor(e,t,n){Number.isInteger(t)&&(console.warn(\"THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )\"),t=n),super(e,e,t),t=t||{},this.texture=new jt(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.generateMipmaps=t.generateMipmaps!==void 0&&t.generateMipmaps,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Kn,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=Tr,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t`,fragmentShader:`\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t`},r=new Xo(5,5,5),o=new ir({name:\"CubemapFromEquirect\",uniforms:ga(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:ne,blending:ae});o.uniforms.tEquirect.value=t;const s=new Xn(r,o),a=t.minFilter;return t.minFilter===ps&&(t.minFilter=Kn),new qo(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,n,r){const o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,n,r);e.setRenderTarget(o)}}_a.prototype.isWebGLCubeRenderTarget=!0;const zl=new re,ya=new re,Td=new Qn;class io{constructor(e=new re(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=zl.subVectors(n,t).cross(ya.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(zl),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:t.copy(n).multiplyScalar(o).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Td.getNormalMatrix(e),r=this.coplanarPoint(zl).applyMatrix4(e),o=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}io.prototype.isPlane=!0;const vi=new Go,jl=new re;class Ja{constructor(e=new io,t=new io,n=new io,r=new io,o=new io,s=new io){this.planes=[e,t,n,r,o,s]}set(e,t,n,r,o,s){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(o),a[5].copy(s),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],o=n[1],s=n[2],a=n[3],l=n[4],u=n[5],h=n[6],d=n[7],p=n[8],m=n[9],g=n[10],_=n[11],y=n[12],w=n[13],R=n[14],F=n[15];return t[0].setComponents(a-r,d-l,_-p,F-y).normalize(),t[1].setComponents(a+r,d+l,_+p,F+y).normalize(),t[2].setComponents(a+o,d+u,_+m,F+w).normalize(),t[3].setComponents(a-o,d-u,_-m,F-w).normalize(),t[4].setComponents(a-s,d-h,_-g,F-R).normalize(),t[5].setComponents(a+s,d+h,_+g,F+R).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),vi.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(vi)}intersectsSprite(e){return vi.center.set(0,0,0),vi.radius=.7071067811865476,vi.applyMatrix4(e.matrixWorld),this.intersectsSphere(vi)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(jl.x=r.normal.x>0?e.max.x:e.min.x,jl.y=r.normal.y>0?e.max.y:e.min.y,jl.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(jl)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function _f(){let i=null,e=!1,t=null,n=null;function r(o,s){t(o,s),n=i.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){i=o}}}function Yo(i,e){const t=e.isWebGL2,n=new WeakMap;return{get:function(r){return r.isInterleavedBufferAttribute&&(r=r.data),n.get(r)},remove:function(r){r.isInterleavedBufferAttribute&&(r=r.data);const o=n.get(r);o&&(i.deleteBuffer(o.buffer),n.delete(r))},update:function(r,o){if(r.isGLBufferAttribute){const a=n.get(r);return void((!a||a.version<r.version)&&n.set(r,{buffer:r.buffer,type:r.type,bytesPerElement:r.elementSize,version:r.version}))}r.isInterleavedBufferAttribute&&(r=r.data);const s=n.get(r);s===void 0?n.set(r,function(a,l){const u=a.array,h=a.usage,d=i.createBuffer();i.bindBuffer(l,d),i.bufferData(l,u,h),a.onUploadCallback();let p=5126;return u instanceof Float32Array?p=5126:u instanceof Float64Array?console.warn(\"THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.\"):u instanceof Uint16Array?a.isFloat16BufferAttribute?t?p=5131:console.warn(\"THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.\"):p=5123:u instanceof Int16Array?p=5122:u instanceof Uint32Array?p=5125:u instanceof Int32Array?p=5124:u instanceof Int8Array?p=5120:(u instanceof Uint8Array||u instanceof Uint8ClampedArray)&&(p=5121),{buffer:d,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:a.version}}(r,o)):s.version<r.version&&(function(a,l,u){const h=l.array,d=l.updateRange;i.bindBuffer(u,a),d.count===-1?i.bufferSubData(u,0,h):(t?i.bufferSubData(u,d.offset*h.BYTES_PER_ELEMENT,h,d.offset,d.count):i.bufferSubData(u,d.offset*h.BYTES_PER_ELEMENT,h.subarray(d.offset,d.offset+d.count)),d.count=-1)}(s.buffer,r,o),s.version=r.version)}}}class di extends Vt{constructor(e=1,t=1,n=1,r=1){super(),this.type=\"PlaneGeometry\",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const o=e/2,s=t/2,a=Math.floor(n),l=Math.floor(r),u=a+1,h=l+1,d=e/a,p=t/l,m=[],g=[],_=[],y=[];for(let w=0;w<h;w++){const R=w*p-s;for(let F=0;F<u;F++){const U=F*d-o;g.push(U,-R,0),_.push(0,0,1),y.push(F/a),y.push(1-w/l)}}for(let w=0;w<l;w++)for(let R=0;R<a;R++){const F=R+u*w,U=R+u*(w+1),B=R+1+u*(w+1),V=R+1+u*w;m.push(F,U,V),m.push(U,B,V)}this.setIndex(m),this.setAttribute(\"position\",new Mt(g,3)),this.setAttribute(\"normal\",new Mt(_,3)),this.setAttribute(\"uv\",new Mt(y,2))}static fromJSON(e){return new di(e.width,e.height,e.widthSegments,e.heightSegments)}}const _n={alphamap_fragment:`#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif`,alphamap_pars_fragment:`#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif`,alphatest_fragment:`#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif`,aomap_fragment:`#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif`,aomap_pars_fragment:`#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif`,begin_vertex:\"vec3 transformed = vec3( position );\",beginnormal_vertex:`vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif`,bsdfs:`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotVH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif`,bumpmap_pars_fragment:`#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif`,clipping_planes_fragment:`#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif`,clipping_planes_pars_fragment:`#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif`,clipping_planes_pars_vertex:`#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif`,clipping_planes_vertex:`#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif`,color_fragment:`#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif`,color_pars_fragment:`#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif`,color_pars_vertex:`#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif`,color_vertex:`#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif`,common:`#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}`,cube_uv_reflection_fragment:`#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif`,defaultnormal_vertex:`vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif`,displacementmap_pars_vertex:`#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif`,displacementmap_vertex:`#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif`,emissivemap_fragment:`#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif`,emissivemap_pars_fragment:`#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif`,encodings_fragment:\"gl_FragColor = linearToOutputTexel( gl_FragColor );\",encodings_pars_fragment:`\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}`,envmap_fragment:`#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif`,envmap_common_pars_fragment:`#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif`,envmap_pars_fragment:`#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif`,envmap_pars_vertex:`#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif`,envmap_physical_pars_fragment:`#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif`,envmap_vertex:`#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif`,fog_vertex:`#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif`,fog_pars_vertex:`#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif`,fog_fragment:`#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif`,fog_pars_fragment:`#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif`,gradientmap_pars_fragment:`#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}`,lightmap_fragment:`#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif`,lightmap_pars_fragment:`#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif`,lights_lambert_vertex:`vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif`,lights_pars_begin:`uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif`,lights_toon_fragment:`ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment:`varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)`,lights_phong_fragment:`BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;`,lights_phong_pars_fragment:`varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)`,lights_physical_fragment:`PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif`,lights_physical_pars_fragment:`struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}`,lights_fragment_begin:`\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif`,lights_fragment_maps:`#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif`,lights_fragment_end:`#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif`,logdepthbuf_fragment:`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif`,logdepthbuf_pars_fragment:`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif`,logdepthbuf_pars_vertex:`#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif`,logdepthbuf_vertex:`#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif`,map_fragment:`#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif`,map_pars_fragment:`#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif`,map_particle_fragment:`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif`,map_particle_pars_fragment:`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif`,metalnessmap_fragment:`float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif`,metalnessmap_pars_fragment:`#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif`,morphnormal_vertex:`#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif`,morphtarget_pars_vertex:`#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif`,morphtarget_vertex:`#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif`,normal_fragment_begin:`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;`,normal_fragment_maps:`#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif`,normalmap_pars_fragment:`#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif`,clearcoat_normal_fragment_begin:`#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif`,clearcoat_normal_fragment_maps:`#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif`,clearcoat_pars_fragment:`#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif`,packing:`vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}`,premultiplied_alpha_fragment:`#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif`,project_vertex:`vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;`,dithering_fragment:`#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif`,dithering_pars_fragment:`#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif`,roughnessmap_fragment:`float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif`,roughnessmap_pars_fragment:`#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif`,shadowmap_pars_fragment:`#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif`,shadowmap_pars_vertex:`#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif`,shadowmap_vertex:`#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif`,shadowmask_pars_fragment:`float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}`,skinbase_vertex:`#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif`,skinning_pars_vertex:`#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif`,skinning_vertex:`#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif`,skinnormal_vertex:`#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif`,specularmap_fragment:`float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif`,specularmap_pars_fragment:`#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif`,tonemapping_fragment:`#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif`,tonemapping_pars_fragment:`#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment:`#ifdef USE_TRANSMISSION\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSNMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition.xyz / vWorldPosition.w;\n\tvec3 v = normalize( cameraPosition - pos );\n\tfloat ior = ( 1.0 + 0.4 * reflectivity ) / ( 1.0 - 0.4 * reflectivity );\n\tvec3 transmission = transmissionFactor * getIBLVolumeRefraction(\n\t\tnormal, v, roughnessFactor, material.diffuseColor, totalSpecular,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission, transmissionFactor );\n#endif`,transmission_pars_fragment:`#ifdef USE_TRANSMISSION\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec4 vWorldPosition;\n\tvec3 getVolumeTransmissionRay(vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix) {\n\t\tvec3 refractionVector = refract(-v, normalize(n), 1.0 / ior);\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length(vec3(modelMatrix[0].xyz));\n\t\tmodelScale.y = length(vec3(modelMatrix[1].xyz));\n\t\tmodelScale.z = length(vec3(modelMatrix[2].xyz));\n\t\treturn normalize(refractionVector) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness(float roughness, float ior) {\n\t\treturn roughness * clamp(ior * 2.0 - 2.0, 0.0, 1.0);\n\t}\n\tvec3 getTransmissionSample(vec2 fragCoord, float roughness, float ior) {\n\t\tfloat framebufferLod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness, ior);\n\t\treturn texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod).rgb;\n\t}\n\tvec3 applyVolumeAttenuation(vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance) {\n\t\tif (attenuationDistance == 0.0) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log(attenuationColor) / attenuationDistance;\n\t\t\tvec3 transmittance = exp(-attenuationCoefficient * transmissionDistance);\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec3 getIBLVolumeRefraction(vec3 n, vec3 v, float perceptualRoughness, vec3 baseColor, vec3 specularColor,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay(n, v, thickness, ior, modelMatrix);\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4(refractedRayExit, 1.0);\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec3 transmittedLight = getTransmissionSample(refractionCoords, perceptualRoughness, ior);\n\t\tvec3 attenuatedColor = applyVolumeAttenuation(transmittedLight, length(transmissionRay), attenuationColor, attenuationDistance);\n\t\treturn (1.0 - specularColor) * attenuatedColor * baseColor;\n\t}\n#endif`,uv_pars_fragment:`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif`,uv_pars_vertex:`#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif`,uv_vertex:`#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif`,uv2_pars_fragment:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif`,uv2_pars_vertex:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif`,uv2_vertex:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif`,worldpos_vertex:`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif`,background_frag:`uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}`,background_vert:`varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}`,cube_frag:`#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}`,cube_vert:`varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}`,depth_frag:`#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}`,depth_vert:`#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}`,distanceRGBA_frag:`#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}`,distanceRGBA_vert:`#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}`,equirect_frag:`uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}`,equirect_vert:`varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}`,linedashed_frag:`uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}`,linedashed_vert:`uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}`,meshbasic_frag:`uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}`,meshbasic_vert:`#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}`,meshlambert_frag:`uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}`,meshlambert_vert:`#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}`,meshmatcap_frag:`#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}`,meshmatcap_vert:`#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}`,meshtoon_frag:`#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}`,meshtoon_vert:`#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}`,meshphong_frag:`#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}`,meshphong_vert:`#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}`,meshphysical_frag:`#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform vec3 attenuationColor;\n\tuniform float attenuationDistance;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <transmission_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}`,meshphysical_vert:`#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#ifdef USE_TRANSMISSION\n\tvarying vec4 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition;\n#endif\n}`,normal_frag:`#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}`,normal_vert:`#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}`,points_frag:`uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}`,points_vert:`uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}`,shadow_frag:`uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}`,shadow_vert:`#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}`,sprite_frag:`uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}`,sprite_vert:`uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}`},Ct={common:{diffuse:{value:new Et(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Qn},uv2Transform:{value:new Qn},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new gt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Et(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Et(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Qn}},sprite:{diffuse:{value:new Et(16777215)},opacity:{value:1},center:{value:new gt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Qn}}},ro={basic:{uniforms:ti([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.fog]),vertexShader:_n.meshbasic_vert,fragmentShader:_n.meshbasic_frag},lambert:{uniforms:ti([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.fog,Ct.lights,{emissive:{value:new Et(0)}}]),vertexShader:_n.meshlambert_vert,fragmentShader:_n.meshlambert_frag},phong:{uniforms:ti([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,Ct.lights,{emissive:{value:new Et(0)},specular:{value:new Et(1118481)},shininess:{value:30}}]),vertexShader:_n.meshphong_vert,fragmentShader:_n.meshphong_frag},standard:{uniforms:ti([Ct.common,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.roughnessmap,Ct.metalnessmap,Ct.fog,Ct.lights,{emissive:{value:new Et(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:_n.meshphysical_vert,fragmentShader:_n.meshphysical_frag},toon:{uniforms:ti([Ct.common,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.gradientmap,Ct.fog,Ct.lights,{emissive:{value:new Et(0)}}]),vertexShader:_n.meshtoon_vert,fragmentShader:_n.meshtoon_frag},matcap:{uniforms:ti([Ct.common,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,{matcap:{value:null}}]),vertexShader:_n.meshmatcap_vert,fragmentShader:_n.meshmatcap_frag},points:{uniforms:ti([Ct.points,Ct.fog]),vertexShader:_n.points_vert,fragmentShader:_n.points_frag},dashed:{uniforms:ti([Ct.common,Ct.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:_n.linedashed_vert,fragmentShader:_n.linedashed_frag},depth:{uniforms:ti([Ct.common,Ct.displacementmap]),vertexShader:_n.depth_vert,fragmentShader:_n.depth_frag},normal:{uniforms:ti([Ct.common,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,{opacity:{value:1}}]),vertexShader:_n.normal_vert,fragmentShader:_n.normal_frag},sprite:{uniforms:ti([Ct.sprite,Ct.fog]),vertexShader:_n.sprite_vert,fragmentShader:_n.sprite_frag},background:{uniforms:{uvTransform:{value:new Qn},t2D:{value:null}},vertexShader:_n.background_vert,fragmentShader:_n.background_frag},cube:{uniforms:ti([Ct.envmap,{opacity:{value:1}}]),vertexShader:_n.cube_vert,fragmentShader:_n.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:_n.equirect_vert,fragmentShader:_n.equirect_frag},distanceRGBA:{uniforms:ti([Ct.common,Ct.displacementmap,{referencePosition:{value:new re},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:_n.distanceRGBA_vert,fragmentShader:_n.distanceRGBA_frag},shadow:{uniforms:ti([Ct.lights,Ct.fog,{color:{value:new Et(0)},opacity:{value:1}}]),vertexShader:_n.shadow_vert,fragmentShader:_n.shadow_frag}};function Vl(i,e,t,n,r){const o=new Et(0);let s,a,l=0,u=null,h=0,d=null;function p(m,g){t.buffers.color.setClear(m.r,m.g,m.b,g,r)}return{getClearColor:function(){return o},setClearColor:function(m,g=1){o.set(m),l=g,p(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(m){l=m,p(o,l)},render:function(m,g){let _=!1,y=g.isScene===!0?g.background:null;y&&y.isTexture&&(y=e.get(y));const w=i.xr,R=w.getSession&&w.getSession();R&&R.environmentBlendMode===\"additive\"&&(y=null),y===null?p(o,l):y&&y.isColor&&(p(y,1),_=!0),(i.autoClear||_)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),y&&(y.isCubeTexture||y.mapping===$e)?(a===void 0&&(a=new Xn(new Xo(1,1,1),new ir({name:\"BackgroundCubeMaterial\",uniforms:ga(ro.cube.uniforms),vertexShader:ro.cube.vertexShader,fragmentShader:ro.cube.fragmentShader,side:ne,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute(\"normal\"),a.geometry.deleteAttribute(\"uv\"),a.onBeforeRender=function(F,U,B){this.matrixWorld.copyPosition(B.matrixWorld)},Object.defineProperty(a.material,\"envMap\",{get:function(){return this.uniforms.envMap.value}}),n.update(a)),a.material.uniforms.envMap.value=y,a.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y._needsFlipEnvMap?-1:1,u===y&&h===y.version&&d===i.toneMapping||(a.material.needsUpdate=!0,u=y,h=y.version,d=i.toneMapping),m.unshift(a,a.geometry,a.material,0,0,null)):y&&y.isTexture&&(s===void 0&&(s=new Xn(new di(2,2),new ir({name:\"BackgroundMaterial\",uniforms:ga(ro.background.uniforms),vertexShader:ro.background.vertexShader,fragmentShader:ro.background.fragmentShader,side:X,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute(\"normal\"),Object.defineProperty(s.material,\"map\",{get:function(){return this.uniforms.t2D.value}}),n.update(s)),s.material.uniforms.t2D.value=y,y.matrixAutoUpdate===!0&&y.updateMatrix(),s.material.uniforms.uvTransform.value.copy(y.matrix),u===y&&h===y.version&&d===i.toneMapping||(s.material.needsUpdate=!0,u=y,h=y.version,d=i.toneMapping),m.unshift(s,s.geometry,s.material,0,0,null))}}}function yf(i,e,t,n){const r=i.getParameter(34921),o=n.isWebGL2?null:e.get(\"OES_vertex_array_object\"),s=n.isWebGL2||o!==null,a={},l=p(null);let u=l;function h(U){return n.isWebGL2?i.bindVertexArray(U):o.bindVertexArrayOES(U)}function d(U){return n.isWebGL2?i.deleteVertexArray(U):o.deleteVertexArrayOES(U)}function p(U){const B=[],V=[],G=[];for(let W=0;W<r;W++)B[W]=0,V[W]=0,G[W]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:B,enabledAttributes:V,attributeDivisors:G,object:U,attributes:{},index:null}}function m(){const U=u.newAttributes;for(let B=0,V=U.length;B<V;B++)U[B]=0}function g(U){_(U,0)}function _(U,B){const V=u.newAttributes,G=u.enabledAttributes,W=u.attributeDivisors;V[U]=1,G[U]===0&&(i.enableVertexAttribArray(U),G[U]=1),W[U]!==B&&((n.isWebGL2?i:e.get(\"ANGLE_instanced_arrays\"))[n.isWebGL2?\"vertexAttribDivisor\":\"vertexAttribDivisorANGLE\"](U,B),W[U]=B)}function y(){const U=u.newAttributes,B=u.enabledAttributes;for(let V=0,G=B.length;V<G;V++)B[V]!==U[V]&&(i.disableVertexAttribArray(V),B[V]=0)}function w(U,B,V,G,W,ge){n.isWebGL2!==!0||V!==5124&&V!==5125?i.vertexAttribPointer(U,B,V,G,W,ge):i.vertexAttribIPointer(U,B,V,W,ge)}function R(){F(),u!==l&&(u=l,h(u.object))}function F(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(U,B,V,G,W){let ge=!1;if(s){const he=function(se,de,ue){const xe=ue.wireframe===!0;let We=a[se.id];We===void 0&&(We={},a[se.id]=We);let Ge=We[de.id];Ge===void 0&&(Ge={},We[de.id]=Ge);let Ae=Ge[xe];return Ae===void 0&&(Ae=p(n.isWebGL2?i.createVertexArray():o.createVertexArrayOES()),Ge[xe]=Ae),Ae}(G,V,B);u!==he&&(u=he,h(u.object)),ge=function(se,de){const ue=u.attributes,xe=se.attributes;let We=0;for(const Ge in xe){const Ae=ue[Ge],Re=xe[Ge];if(Ae===void 0||Ae.attribute!==Re||Ae.data!==Re.data)return!0;We++}return u.attributesNum!==We||u.index!==de}(G,W),ge&&function(se,de){const ue={},xe=se.attributes;let We=0;for(const Ge in xe){const Ae=xe[Ge],Re={};Re.attribute=Ae,Ae.data&&(Re.data=Ae.data),ue[Ge]=Re,We++}u.attributes=ue,u.attributesNum=We,u.index=de}(G,W)}else{const he=B.wireframe===!0;u.geometry===G.id&&u.program===V.id&&u.wireframe===he||(u.geometry=G.id,u.program=V.id,u.wireframe=he,ge=!0)}U.isInstancedMesh===!0&&(ge=!0),W!==null&&t.update(W,34963),ge&&(function(he,se,de,ue){if(n.isWebGL2===!1&&(he.isInstancedMesh||ue.isInstancedBufferGeometry)&&e.get(\"ANGLE_instanced_arrays\")===null)return;m();const xe=ue.attributes,We=de.getAttributes(),Ge=se.defaultAttributeValues;for(const Ae in We){const Re=We[Ae];if(Re>=0){const Ze=xe[Ae];if(Ze!==void 0){const lt=Ze.normalized,dt=Ze.itemSize,ce=t.get(Ze);if(ce===void 0)continue;const fe=ce.buffer,Qe=ce.type,Xe=ce.bytesPerElement;if(Ze.isInterleavedBufferAttribute){const je=Ze.data,ft=je.stride,mt=Ze.offset;je&&je.isInstancedInterleavedBuffer?(_(Re,je.meshPerAttribute),ue._maxInstanceCount===void 0&&(ue._maxInstanceCount=je.meshPerAttribute*je.count)):g(Re),i.bindBuffer(34962,fe),w(Re,dt,Qe,lt,ft*Xe,mt*Xe)}else Ze.isInstancedBufferAttribute?(_(Re,Ze.meshPerAttribute),ue._maxInstanceCount===void 0&&(ue._maxInstanceCount=Ze.meshPerAttribute*Ze.count)):g(Re),i.bindBuffer(34962,fe),w(Re,dt,Qe,lt,0,0)}else if(Ae===\"instanceMatrix\"){const lt=t.get(he.instanceMatrix);if(lt===void 0)continue;const dt=lt.buffer,ce=lt.type;_(Re+0,1),_(Re+1,1),_(Re+2,1),_(Re+3,1),i.bindBuffer(34962,dt),i.vertexAttribPointer(Re+0,4,ce,!1,64,0),i.vertexAttribPointer(Re+1,4,ce,!1,64,16),i.vertexAttribPointer(Re+2,4,ce,!1,64,32),i.vertexAttribPointer(Re+3,4,ce,!1,64,48)}else if(Ae===\"instanceColor\"){const lt=t.get(he.instanceColor);if(lt===void 0)continue;const dt=lt.buffer,ce=lt.type;_(Re,1),i.bindBuffer(34962,dt),i.vertexAttribPointer(Re,3,ce,!1,12,0)}else if(Ge!==void 0){const lt=Ge[Ae];if(lt!==void 0)switch(lt.length){case 2:i.vertexAttrib2fv(Re,lt);break;case 3:i.vertexAttrib3fv(Re,lt);break;case 4:i.vertexAttrib4fv(Re,lt);break;default:i.vertexAttrib1fv(Re,lt)}}}}y()}(U,B,V,G),W!==null&&i.bindBuffer(34963,t.get(W).buffer))},reset:R,resetDefaultState:F,dispose:function(){R();for(const U in a){const B=a[U];for(const V in B){const G=B[V];for(const W in G)d(G[W].object),delete G[W];delete B[V]}delete a[U]}},releaseStatesOfGeometry:function(U){if(a[U.id]===void 0)return;const B=a[U.id];for(const V in B){const G=B[V];for(const W in G)d(G[W].object),delete G[W];delete B[V]}delete a[U.id]},releaseStatesOfProgram:function(U){for(const B in a){const V=a[B];if(V[U.id]===void 0)continue;const G=V[U.id];for(const W in G)d(G[W].object),delete G[W];delete V[U.id]}},initAttributes:m,enableAttribute:g,disableUnusedAttributes:y}}function xf(i,e,t,n){const r=n.isWebGL2;let o;this.setMode=function(s){o=s},this.render=function(s,a){i.drawArrays(o,s,a),t.update(a,o,1)},this.renderInstances=function(s,a,l){if(l===0)return;let u,h;if(r)u=i,h=\"drawArraysInstanced\";else if(u=e.get(\"ANGLE_instanced_arrays\"),h=\"drawArraysInstancedANGLE\",u===null)return void console.error(\"THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\");u[h](o,s,a,l),t.update(a,o,l)}}function bf(i,e,t){let n;function r(U){if(U===\"highp\"){if(i.getShaderPrecisionFormat(35633,36338).precision>0&&i.getShaderPrecisionFormat(35632,36338).precision>0)return\"highp\";U=\"mediump\"}return U===\"mediump\"&&i.getShaderPrecisionFormat(35633,36337).precision>0&&i.getShaderPrecisionFormat(35632,36337).precision>0?\"mediump\":\"lowp\"}const o=typeof WebGL2RenderingContext!=\"undefined\"&&i instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!=\"undefined\"&&i instanceof WebGL2ComputeRenderingContext;let s=t.precision!==void 0?t.precision:\"highp\";const a=r(s);a!==s&&(console.warn(\"THREE.WebGLRenderer:\",s,\"not supported, using\",a,\"instead.\"),s=a);const l=o||e.has(\"WEBGL_draw_buffers\"),u=t.logarithmicDepthBuffer===!0,h=i.getParameter(34930),d=i.getParameter(35660),p=i.getParameter(3379),m=i.getParameter(34076),g=i.getParameter(34921),_=i.getParameter(36347),y=i.getParameter(36348),w=i.getParameter(36349),R=d>0,F=o||e.has(\"OES_texture_float\");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function(){if(n!==void 0)return n;if(e.has(\"EXT_texture_filter_anisotropic\")===!0){const U=e.get(\"EXT_texture_filter_anisotropic\");n=i.getParameter(U.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n},getMaxPrecision:r,precision:s,logarithmicDepthBuffer:u,maxTextures:h,maxVertexTextures:d,maxTextureSize:p,maxCubemapSize:m,maxAttributes:g,maxVertexUniforms:_,maxVaryings:y,maxFragmentUniforms:w,vertexTextures:R,floatFragmentTextures:F,floatVertexTextures:R&&F,maxSamples:o?i.getParameter(36183):0}}function wf(i){const e=this;let t=null,n=0,r=!1,o=!1;const s=new io,a=new Qn,l={value:null,needsUpdate:!1};function u(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function h(d,p,m,g){const _=d!==null?d.length:0;let y=null;if(_!==0){if(y=l.value,g!==!0||y===null){const w=m+4*_,R=p.matrixWorldInverse;a.getNormalMatrix(R),(y===null||y.length<w)&&(y=new Float32Array(w));for(let F=0,U=m;F!==_;++F,U+=4)s.copy(d[F]).applyMatrix4(R,a),s.normal.toArray(y,U),y[U+3]=s.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,y}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p,m){const g=d.length!==0||p||n!==0||r;return r=p,t=h(d,m,0),n=d.length,g},this.beginShadows=function(){o=!0,h(null)},this.endShadows=function(){o=!1,u()},this.setState=function(d,p,m){const g=d.clippingPlanes,_=d.clipIntersection,y=d.clipShadows,w=i.get(d);if(!r||g===null||g.length===0||o&&!y)o?h(null):u();else{const R=o?0:n,F=4*R;let U=w.clippingState||null;l.value=U,U=h(g,p,F,m);for(let B=0;B!==F;++B)U[B]=t[B];w.clippingState=U,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=R}}}function Vg(i){let e=new WeakMap;function t(r,o){return o===Se?r.mapping=ve:o===ke&&(r.mapping=we),r}function n(r){const o=r.target;o.removeEventListener(\"dispose\",n);const s=e.get(o);s!==void 0&&(e.delete(o),s.dispose())}return{get:function(r){if(r&&r.isTexture){const o=r.mapping;if(o===Se||o===ke){if(e.has(r))return t(e.get(r).texture,r.mapping);{const s=r.image;if(s&&s.height>0){const a=i.getRenderTarget(),l=new _a(s.height/2);return l.fromEquirectangularTexture(i,r),e.set(r,l),i.setRenderTarget(a),r.addEventListener(\"dispose\",n),t(l.texture,r.mapping)}return null}}}return r},dispose:function(){e=new WeakMap}}}function Ed(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case\"WEBGL_depth_texture\":r=i.getExtension(\"WEBGL_depth_texture\")||i.getExtension(\"MOZ_WEBGL_depth_texture\")||i.getExtension(\"WEBKIT_WEBGL_depth_texture\");break;case\"EXT_texture_filter_anisotropic\":r=i.getExtension(\"EXT_texture_filter_anisotropic\")||i.getExtension(\"MOZ_EXT_texture_filter_anisotropic\")||i.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\");break;case\"WEBGL_compressed_texture_s3tc\":r=i.getExtension(\"WEBGL_compressed_texture_s3tc\")||i.getExtension(\"MOZ_WEBGL_compressed_texture_s3tc\")||i.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc\");break;case\"WEBGL_compressed_texture_pvrtc\":r=i.getExtension(\"WEBGL_compressed_texture_pvrtc\")||i.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?t(\"EXT_color_buffer_float\"):(t(\"WEBGL_depth_texture\"),t(\"OES_texture_float\"),t(\"OES_texture_half_float\"),t(\"OES_texture_half_float_linear\"),t(\"OES_standard_derivatives\"),t(\"OES_element_index_uint\"),t(\"OES_vertex_array_object\"),t(\"ANGLE_instanced_arrays\")),t(\"OES_texture_float_linear\"),t(\"EXT_color_buffer_half_float\")},get:function(n){const r=t(n);return r===null&&console.warn(\"THREE.WebGLRenderer: \"+n+\" extension not supported.\"),r}}}function Sf(i,e,t,n){const r={},o=new WeakMap;function s(l){const u=l.target;u.index!==null&&e.remove(u.index);for(const d in u.attributes)e.remove(u.attributes[d]);u.removeEventListener(\"dispose\",s),delete r[u.id];const h=o.get(u);h&&(e.remove(h),o.delete(u)),n.releaseStatesOfGeometry(u),u.isInstancedBufferGeometry===!0&&delete u._maxInstanceCount,t.memory.geometries--}function a(l){const u=[],h=l.index,d=l.attributes.position;let p=0;if(h!==null){const _=h.array;p=h.version;for(let y=0,w=_.length;y<w;y+=3){const R=_[y+0],F=_[y+1],U=_[y+2];u.push(R,F,F,U,U,R)}}else{const _=d.array;p=d.version;for(let y=0,w=_.length/3-1;y<w;y+=3){const R=y+0,F=y+1,U=y+2;u.push(R,F,F,U,U,R)}}const m=new(Eh(u)>65535?Th:qa)(u,1);m.version=p;const g=o.get(l);g&&e.remove(g),o.set(l,m)}return{get:function(l,u){return r[u.id]===!0||(u.addEventListener(\"dispose\",s),r[u.id]=!0,t.memory.geometries++),u},update:function(l){const u=l.attributes;for(const d in u)e.update(u[d],34962);const h=l.morphAttributes;for(const d in h){const p=h[d];for(let m=0,g=p.length;m<g;m++)e.update(p[m],34962)}},getWireframeAttribute:function(l){const u=o.get(l);if(u){const h=l.index;h!==null&&u.version<h.version&&a(l)}else a(l);return o.get(l)}}}function Wl(i,e,t,n){const r=n.isWebGL2;let o,s,a;this.setMode=function(l){o=l},this.setIndex=function(l){s=l.type,a=l.bytesPerElement},this.render=function(l,u){i.drawElements(o,u,s,l*a),t.update(u,o,1)},this.renderInstances=function(l,u,h){if(h===0)return;let d,p;if(r)d=i,p=\"drawElementsInstanced\";else if(d=e.get(\"ANGLE_instanced_arrays\"),p=\"drawElementsInstancedANGLE\",d===null)return void console.error(\"THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\");d[p](o,u,s,l*a,h),t.update(u,o,h)}}function Md(i){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,r){switch(e.calls++,n){case 4:e.triangles+=r*(t/3);break;case 1:e.lines+=r*(t/2);break;case 3:e.lines+=r*(t-1);break;case 2:e.lines+=r*t;break;case 0:e.points+=r*t;break;default:console.error(\"THREE.WebGLInfo: Unknown draw mode:\",n)}}}}function Tf(i,e){return i[0]-e[0]}function Ef(i,e){return Math.abs(e[1])-Math.abs(i[1])}function Ph(i){const e={},t=new Float32Array(8),n=[];for(let r=0;r<8;r++)n[r]=[r,0];return{update:function(r,o,s,a){const l=r.morphTargetInfluences,u=l===void 0?0:l.length;let h=e[o.id];if(h===void 0||h.length!==u){h=[];for(let _=0;_<u;_++)h[_]=[_,0];e[o.id]=h}for(let _=0;_<u;_++){const y=h[_];y[0]=_,y[1]=l[_]}h.sort(Ef);for(let _=0;_<8;_++)_<u&&h[_][1]?(n[_][0]=h[_][0],n[_][1]=h[_][1]):(n[_][0]=Number.MAX_SAFE_INTEGER,n[_][1]=0);n.sort(Tf);const d=s.morphTargets&&o.morphAttributes.position,p=s.morphNormals&&o.morphAttributes.normal;let m=0;for(let _=0;_<8;_++){const y=n[_],w=y[0],R=y[1];w!==Number.MAX_SAFE_INTEGER&&R?(d&&o.getAttribute(\"morphTarget\"+_)!==d[w]&&o.setAttribute(\"morphTarget\"+_,d[w]),p&&o.getAttribute(\"morphNormal\"+_)!==p[w]&&o.setAttribute(\"morphNormal\"+_,p[w]),t[_]=R,m+=R):(d&&o.hasAttribute(\"morphTarget\"+_)===!0&&o.deleteAttribute(\"morphTarget\"+_),p&&o.hasAttribute(\"morphNormal\"+_)===!0&&o.deleteAttribute(\"morphNormal\"+_),t[_]=0)}const g=o.morphTargetsRelative?1:1-m;a.getUniforms().setValue(i,\"morphTargetBaseInfluence\",g),a.getUniforms().setValue(i,\"morphTargetInfluences\",t)}}}function Mf(i,e,t,n){let r=new WeakMap;function o(s){const a=s.target;a.removeEventListener(\"dispose\",o),t.remove(a.instanceMatrix),a.instanceColor!==null&&t.remove(a.instanceColor)}return{update:function(s){const a=n.render.frame,l=s.geometry,u=e.get(s,l);return r.get(u)!==a&&(e.update(u),r.set(u,a)),s.isInstancedMesh&&(s.hasEventListener(\"dispose\",o)===!1&&s.addEventListener(\"dispose\",o),t.update(s.instanceMatrix,34962),s.instanceColor!==null&&t.update(s.instanceColor,34962)),u},dispose:function(){r=new WeakMap}}}ro.physical={uniforms:ti([ro.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new gt(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Et(0)},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new gt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Et(0)}}]),vertexShader:_n.meshphysical_vert,fragmentShader:_n.meshphysical_frag};class zr extends gi{constructor(e=null,t=1,n=1,r=1){super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=wn,this.minFilter=wn,this.wrapR=Tt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}zr.prototype.isDataTexture2DArray=!0;class $o extends gi{constructor(e=null,t=1,n=1,r=1){super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=wn,this.minFilter=wn,this.wrapR=Tt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}$o.prototype.isDataTexture3D=!0;const Ad=new gi,Wg=new zr,Xg=new $o,Af=new jt,Rd=[],Cd=[],Pd=new Float32Array(16),Id=new Float32Array(9),Rf=new Float32Array(4);function Za(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let o=Rd[r];if(o===void 0&&(o=new Float32Array(r),Rd[r]=o),e!==0){n.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=t,i[s].toArray(o,a)}return o}function rr(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Vn(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function Cf(i,e){let t=Cd[e];t===void 0&&(t=new Int32Array(e),Cd[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function Pf(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function qg(i,e){const t=this.cache;if(e.x!==void 0)t[0]===e.x&&t[1]===e.y||(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(rr(t,e))return;i.uniform2fv(this.addr,e),Vn(t,e)}}function Od(i,e){const t=this.cache;if(e.x!==void 0)t[0]===e.x&&t[1]===e.y&&t[2]===e.z||(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)t[0]===e.r&&t[1]===e.g&&t[2]===e.b||(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(rr(t,e))return;i.uniform3fv(this.addr,e),Vn(t,e)}}function Yg(i,e){const t=this.cache;if(e.x!==void 0)t[0]===e.x&&t[1]===e.y&&t[2]===e.z&&t[3]===e.w||(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(rr(t,e))return;i.uniform4fv(this.addr,e),Vn(t,e)}}function $g(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(rr(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Vn(t,e)}else{if(rr(t,n))return;Rf.set(n),i.uniformMatrix2fv(this.addr,!1,Rf),Vn(t,n)}}function Jg(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(rr(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Vn(t,e)}else{if(rr(t,n))return;Id.set(n),i.uniformMatrix3fv(this.addr,!1,Id),Vn(t,n)}}function Ld(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(rr(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Vn(t,e)}else{if(rr(t,n))return;Pd.set(n),i.uniformMatrix4fv(this.addr,!1,Pd),Vn(t,n)}}function If(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function Zg(i,e){const t=this.cache;rr(t,e)||(i.uniform2iv(this.addr,e),Vn(t,e))}function Kg(i,e){const t=this.cache;rr(t,e)||(i.uniform3iv(this.addr,e),Vn(t,e))}function Qg(i,e){const t=this.cache;rr(t,e)||(i.uniform4iv(this.addr,e),Vn(t,e))}function ev(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function tv(i,e){const t=this.cache;rr(t,e)||(i.uniform2uiv(this.addr,e),Vn(t,e))}function nv(i,e){const t=this.cache;rr(t,e)||(i.uniform3uiv(this.addr,e),Vn(t,e))}function Of(i,e){const t=this.cache;rr(t,e)||(i.uniform4uiv(this.addr,e),Vn(t,e))}function Ih(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.safeSetTexture2D(e||Ad,r)}function iv(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||Xg,r)}function rv(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.safeSetTextureCube(e||Af,r)}function ov(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||Wg,r)}function sv(i,e){i.uniform1fv(this.addr,e)}function Lf(i,e){const t=Za(e,this.size,2);i.uniform2fv(this.addr,t)}function Nf(i,e){const t=Za(e,this.size,3);i.uniform3fv(this.addr,t)}function av(i,e){const t=Za(e,this.size,4);i.uniform4fv(this.addr,t)}function lv(i,e){const t=Za(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function uv(i,e){const t=Za(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function Oh(i,e){const t=Za(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function hv(i,e){i.uniform1iv(this.addr,e)}function cv(i,e){i.uniform2iv(this.addr,e)}function Lh(i,e){i.uniform3iv(this.addr,e)}function Df(i,e){i.uniform4iv(this.addr,e)}function Ff(i,e){i.uniform1uiv(this.addr,e)}function Nd(i,e){i.uniform2uiv(this.addr,e)}function Bf(i,e){i.uniform3uiv(this.addr,e)}function kf(i,e){i.uniform4uiv(this.addr,e)}function dv(i,e,t){const n=e.length,r=Cf(t,n);i.uniform1iv(this.addr,r);for(let o=0;o!==n;++o)t.safeSetTexture2D(e[o]||Ad,r[o])}function pv(i,e,t){const n=e.length,r=Cf(t,n);i.uniform1iv(this.addr,r);for(let o=0;o!==n;++o)t.safeSetTextureCube(e[o]||Af,r[o])}function Nh(i,e,t){this.id=i,this.addr=t,this.cache=[],this.setValue=function(n){switch(n){case 5126:return Pf;case 35664:return qg;case 35665:return Od;case 35666:return Yg;case 35674:return $g;case 35675:return Jg;case 35676:return Ld;case 5124:case 35670:return If;case 35667:case 35671:return Zg;case 35668:case 35672:return Kg;case 35669:case 35673:return Qg;case 5125:return ev;case 36294:return tv;case 36295:return nv;case 36296:return Of;case 35678:case 36198:case 36298:case 36306:case 35682:return Ih;case 35679:case 36299:case 36307:return iv;case 35680:case 36300:case 36308:case 36293:return rv;case 36289:case 36303:case 36311:case 36292:return ov}}(e.type)}function Xl(i,e,t){this.id=i,this.addr=t,this.cache=[],this.size=e.size,this.setValue=function(n){switch(n){case 5126:return sv;case 35664:return Lf;case 35665:return Nf;case 35666:return av;case 35674:return lv;case 35675:return uv;case 35676:return Oh;case 5124:case 35670:return hv;case 35667:case 35671:return cv;case 35668:case 35672:return Lh;case 35669:case 35673:return Df;case 5125:return Ff;case 36294:return Nd;case 36295:return Bf;case 36296:return kf;case 35678:case 36198:case 36298:case 36306:case 35682:return dv;case 35680:case 36300:case 36308:case 36293:return pv}}(e.type)}function Uf(i){this.id=i,this.seq=[],this.map={}}Xl.prototype.updateCache=function(i){const e=this.cache;i instanceof Float32Array&&e.length!==i.length&&(this.cache=new Float32Array(i.length)),Vn(e,i)},Uf.prototype.setValue=function(i,e,t){const n=this.seq;for(let r=0,o=n.length;r!==o;++r){const s=n[r];s.setValue(i,e[s.id],t)}};const ql=/(\\w+)(\\])?(\\[|\\.)?/g;function Dd(i,e){i.seq.push(e),i.map[e.id]=e}function fv(i,e,t){const n=i.name,r=n.length;for(ql.lastIndex=0;;){const o=ql.exec(n),s=ql.lastIndex;let a=o[1];const l=o[2]===\"]\",u=o[3];if(l&&(a|=0),u===void 0||u===\"[\"&&s+2===r){Dd(t,u===void 0?new Nh(a,i,e):new Xl(a,i,e));break}{let h=t.map[a];h===void 0&&(h=new Uf(a),Dd(t,h)),t=h}}}function Ui(i,e){this.seq=[],this.map={};const t=i.getProgramParameter(e,35718);for(let n=0;n<t;++n){const r=i.getActiveUniform(e,n);fv(r,i.getUniformLocation(e,r.name),this)}}function Gf(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}Ui.prototype.setValue=function(i,e,t,n){const r=this.map[e];r!==void 0&&r.setValue(i,t,n)},Ui.prototype.setOptional=function(i,e,t){const n=e[t];n!==void 0&&this.setValue(i,t,n)},Ui.upload=function(i,e,t,n){for(let r=0,o=e.length;r!==o;++r){const s=e[r],a=t[s.id];a.needsUpdate!==!1&&s.setValue(i,a.value,n)}},Ui.seqWithValue=function(i,e){const t=[];for(let n=0,r=i.length;n!==r;++n){const o=i[n];o.id in e&&t.push(o)}return t};let mv=0;function Ts(i){switch(i){case tn:return[\"Linear\",\"( value )\"];case oi:return[\"sRGB\",\"( value )\"];case Gn:return[\"RGBE\",\"( value )\"];case ad:return[\"RGBM\",\"( value, 7.0 )\"];case dr:return[\"RGBM\",\"( value, 16.0 )\"];case za:return[\"RGBD\",\"( value, 256.0 )\"];case Mr:return[\"Gamma\",\"( value, float( GAMMA_FACTOR ) )\"];case th:return[\"LogLuv\",\"( value )\"];default:return console.warn(\"THREE.WebGLProgram: Unsupported encoding:\",i),[\"Linear\",\"( value )\"]}}function cn(i,e,t){const n=i.getShaderParameter(e,35713),r=i.getShaderInfoLog(e).trim();return n&&r===\"\"?\"\":\"THREE.WebGLShader: gl.getShaderInfoLog() \"+t+`\n`+r+function(o){const s=o.split(`\n`);for(let a=0;a<s.length;a++)s[a]=a+1+\": \"+s[a];return s.join(`\n`)}(i.getShaderSource(e))}function Yl(i,e){const t=Ts(e);return\"vec4 \"+i+\"( vec4 value ) { return \"+t[0]+\"ToLinear\"+t[1]+\"; }\"}function gr(i,e){const t=Ts(e);return\"vec4 \"+i+\"( vec4 value ) { return LinearTo\"+t[0]+t[1]+\"; }\"}function _i(i,e){let t;switch(e){case P:t=\"Linear\";break;case I:t=\"Reinhard\";break;case te:t=\"OptimizedCineon\";break;case J:t=\"ACESFilmic\";break;case K:t=\"Custom\";break;default:console.warn(\"THREE.WebGLProgram: Unsupported toneMapping:\",e),t=\"Linear\"}return\"vec3 \"+i+\"( vec3 color ) { return \"+t+\"ToneMapping( color ); }\"}function jr(i){return i!==\"\"}function Hf(i,e){return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Dh(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Jo=/^[ \\t]*#include +<([\\w\\d./]+)>/gm;function Fh(i){return i.replace(Jo,Bh)}function Bh(i,e){const t=_n[e];if(t===void 0)throw new Error(\"Can not resolve #include <\"+e+\">\");return Fh(t)}const si=/#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g,pi=/#pragma unroll_loop_start\\s+for\\s*\\(\\s*int\\s+i\\s*=\\s*(\\d+)\\s*;\\s*i\\s*<\\s*(\\d+)\\s*;\\s*i\\s*\\+\\+\\s*\\)\\s*{([\\s\\S]+?)}\\s+#pragma unroll_loop_end/g;function Fd(i){return i.replace(pi,Ka).replace(si,zf)}function zf(i,e,t,n){return console.warn(\"WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead.\"),Ka(i,e,t,n)}function Ka(i,e,t,n){let r=\"\";for(let o=parseInt(e);o<parseInt(t);o++)r+=n.replace(/\\[\\s*i\\s*\\]/g,\"[ \"+o+\" ]\").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function kh(i){let e=\"precision \"+i.precision+` float;\nprecision `+i.precision+\" int;\";return i.precision===\"highp\"?e+=`\n#define HIGH_PRECISION`:i.precision===\"mediump\"?e+=`\n#define MEDIUM_PRECISION`:i.precision===\"lowp\"&&(e+=`\n#define LOW_PRECISION`),e}function jf(i,e,t,n){const r=i.getContext(),o=t.defines;let s=t.vertexShader,a=t.fragmentShader;const l=function(W){let ge=\"SHADOWMAP_TYPE_BASIC\";return W.shadowMapType===ee?ge=\"SHADOWMAP_TYPE_PCF\":W.shadowMapType===C?ge=\"SHADOWMAP_TYPE_PCF_SOFT\":W.shadowMapType===z&&(ge=\"SHADOWMAP_TYPE_VSM\"),ge}(t),u=function(W){let ge=\"ENVMAP_TYPE_CUBE\";if(W.envMap)switch(W.envMapMode){case ve:case we:ge=\"ENVMAP_TYPE_CUBE\";break;case $e:case ct:ge=\"ENVMAP_TYPE_CUBE_UV\"}return ge}(t),h=function(W){let ge=\"ENVMAP_MODE_REFLECTION\";if(W.envMap)switch(W.envMapMode){case we:case ct:ge=\"ENVMAP_MODE_REFRACTION\"}return ge}(t),d=function(W){let ge=\"ENVMAP_BLENDING_NONE\";if(W.envMap)switch(W.combine){case Po:ge=\"ENVMAP_BLENDING_MULTIPLY\";break;case po:ge=\"ENVMAP_BLENDING_MIX\";break;case Ws:ge=\"ENVMAP_BLENDING_ADD\"}return ge}(t),p=i.gammaFactor>0?i.gammaFactor:1,m=t.isWebGL2?\"\":function(W){return[W.extensionDerivatives||W.envMapCubeUV||W.bumpMap||W.tangentSpaceNormalMap||W.clearcoatNormalMap||W.flatShading||W.shaderID===\"physical\"?\"#extension GL_OES_standard_derivatives : enable\":\"\",(W.extensionFragDepth||W.logarithmicDepthBuffer)&&W.rendererExtensionFragDepth?\"#extension GL_EXT_frag_depth : enable\":\"\",W.extensionDrawBuffers&&W.rendererExtensionDrawBuffers?\"#extension GL_EXT_draw_buffers : require\":\"\",(W.extensionShaderTextureLOD||W.envMap||W.transmission>0)&&W.rendererExtensionShaderTextureLod?\"#extension GL_EXT_shader_texture_lod : enable\":\"\"].filter(jr).join(`\n`)}(t),g=function(W){const ge=[];for(const he in W){const se=W[he];se!==!1&&ge.push(\"#define \"+he+\" \"+se)}return ge.join(`\n`)}(o),_=r.createProgram();let y,w,R=t.glslVersion?\"#version \"+t.glslVersion+`\n`:\"\";t.isRawShaderMaterial?(y=[g].filter(jr).join(`\n`),y.length>0&&(y+=`\n`),w=[m,g].filter(jr).join(`\n`),w.length>0&&(w+=`\n`)):(y=[kh(t),\"#define SHADER_NAME \"+t.shaderName,g,t.instancing?\"#define USE_INSTANCING\":\"\",t.instancingColor?\"#define USE_INSTANCING_COLOR\":\"\",t.supportsVertexTextures?\"#define VERTEX_TEXTURES\":\"\",\"#define GAMMA_FACTOR \"+p,\"#define MAX_BONES \"+t.maxBones,t.useFog&&t.fog?\"#define USE_FOG\":\"\",t.useFog&&t.fogExp2?\"#define FOG_EXP2\":\"\",t.map?\"#define USE_MAP\":\"\",t.envMap?\"#define USE_ENVMAP\":\"\",t.envMap?\"#define \"+h:\"\",t.lightMap?\"#define USE_LIGHTMAP\":\"\",t.aoMap?\"#define USE_AOMAP\":\"\",t.emissiveMap?\"#define USE_EMISSIVEMAP\":\"\",t.bumpMap?\"#define USE_BUMPMAP\":\"\",t.normalMap?\"#define USE_NORMALMAP\":\"\",t.normalMap&&t.objectSpaceNormalMap?\"#define OBJECTSPACE_NORMALMAP\":\"\",t.normalMap&&t.tangentSpaceNormalMap?\"#define TANGENTSPACE_NORMALMAP\":\"\",t.clearcoatMap?\"#define USE_CLEARCOATMAP\":\"\",t.clearcoatRoughnessMap?\"#define USE_CLEARCOAT_ROUGHNESSMAP\":\"\",t.clearcoatNormalMap?\"#define USE_CLEARCOAT_NORMALMAP\":\"\",t.displacementMap&&t.supportsVertexTextures?\"#define USE_DISPLACEMENTMAP\":\"\",t.specularMap?\"#define USE_SPECULARMAP\":\"\",t.roughnessMap?\"#define USE_ROUGHNESSMAP\":\"\",t.metalnessMap?\"#define USE_METALNESSMAP\":\"\",t.alphaMap?\"#define USE_ALPHAMAP\":\"\",t.transmission?\"#define USE_TRANSMISSION\":\"\",t.transmissionMap?\"#define USE_TRANSMISSIONMAP\":\"\",t.thicknessMap?\"#define USE_THICKNESSMAP\":\"\",t.vertexTangents?\"#define USE_TANGENT\":\"\",t.vertexColors?\"#define USE_COLOR\":\"\",t.vertexAlphas?\"#define USE_COLOR_ALPHA\":\"\",t.vertexUvs?\"#define USE_UV\":\"\",t.uvsVertexOnly?\"#define UVS_VERTEX_ONLY\":\"\",t.flatShading?\"#define FLAT_SHADED\":\"\",t.skinning?\"#define USE_SKINNING\":\"\",t.useVertexTexture?\"#define BONE_TEXTURE\":\"\",t.morphTargets?\"#define USE_MORPHTARGETS\":\"\",t.morphNormals&&t.flatShading===!1?\"#define USE_MORPHNORMALS\":\"\",t.doubleSided?\"#define DOUBLE_SIDED\":\"\",t.flipSided?\"#define FLIP_SIDED\":\"\",t.shadowMapEnabled?\"#define USE_SHADOWMAP\":\"\",t.shadowMapEnabled?\"#define \"+l:\"\",t.sizeAttenuation?\"#define USE_SIZEATTENUATION\":\"\",t.logarithmicDepthBuffer?\"#define USE_LOGDEPTHBUF\":\"\",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?\"#define USE_LOGDEPTHBUF_EXT\":\"\",\"uniform mat4 modelMatrix;\",\"uniform mat4 modelViewMatrix;\",\"uniform mat4 projectionMatrix;\",\"uniform mat4 viewMatrix;\",\"uniform mat3 normalMatrix;\",\"uniform vec3 cameraPosition;\",\"uniform bool isOrthographic;\",\"#ifdef USE_INSTANCING\",\"\tattribute mat4 instanceMatrix;\",\"#endif\",\"#ifdef USE_INSTANCING_COLOR\",\"\tattribute vec3 instanceColor;\",\"#endif\",\"attribute vec3 position;\",\"attribute vec3 normal;\",\"attribute vec2 uv;\",\"#ifdef USE_TANGENT\",\"\tattribute vec4 tangent;\",\"#endif\",\"#if defined( USE_COLOR_ALPHA )\",\"\tattribute vec4 color;\",\"#elif defined( USE_COLOR )\",\"\tattribute vec3 color;\",\"#endif\",\"#ifdef USE_MORPHTARGETS\",\"\tattribute vec3 morphTarget0;\",\"\tattribute vec3 morphTarget1;\",\"\tattribute vec3 morphTarget2;\",\"\tattribute vec3 morphTarget3;\",\"\t#ifdef USE_MORPHNORMALS\",\"\t\tattribute vec3 morphNormal0;\",\"\t\tattribute vec3 morphNormal1;\",\"\t\tattribute vec3 morphNormal2;\",\"\t\tattribute vec3 morphNormal3;\",\"\t#else\",\"\t\tattribute vec3 morphTarget4;\",\"\t\tattribute vec3 morphTarget5;\",\"\t\tattribute vec3 morphTarget6;\",\"\t\tattribute vec3 morphTarget7;\",\"\t#endif\",\"#endif\",\"#ifdef USE_SKINNING\",\"\tattribute vec4 skinIndex;\",\"\tattribute vec4 skinWeight;\",\"#endif\",`\n`].filter(jr).join(`\n`),w=[m,kh(t),\"#define SHADER_NAME \"+t.shaderName,g,t.alphaTest?\"#define ALPHATEST \"+t.alphaTest+(t.alphaTest%1?\"\":\".0\"):\"\",\"#define GAMMA_FACTOR \"+p,t.useFog&&t.fog?\"#define USE_FOG\":\"\",t.useFog&&t.fogExp2?\"#define FOG_EXP2\":\"\",t.map?\"#define USE_MAP\":\"\",t.matcap?\"#define USE_MATCAP\":\"\",t.envMap?\"#define USE_ENVMAP\":\"\",t.envMap?\"#define \"+u:\"\",t.envMap?\"#define \"+h:\"\",t.envMap?\"#define \"+d:\"\",t.lightMap?\"#define USE_LIGHTMAP\":\"\",t.aoMap?\"#define USE_AOMAP\":\"\",t.emissiveMap?\"#define USE_EMISSIVEMAP\":\"\",t.bumpMap?\"#define USE_BUMPMAP\":\"\",t.normalMap?\"#define USE_NORMALMAP\":\"\",t.normalMap&&t.objectSpaceNormalMap?\"#define OBJECTSPACE_NORMALMAP\":\"\",t.normalMap&&t.tangentSpaceNormalMap?\"#define TANGENTSPACE_NORMALMAP\":\"\",t.clearcoatMap?\"#define USE_CLEARCOATMAP\":\"\",t.clearcoatRoughnessMap?\"#define USE_CLEARCOAT_ROUGHNESSMAP\":\"\",t.clearcoatNormalMap?\"#define USE_CLEARCOAT_NORMALMAP\":\"\",t.specularMap?\"#define USE_SPECULARMAP\":\"\",t.roughnessMap?\"#define USE_ROUGHNESSMAP\":\"\",t.metalnessMap?\"#define USE_METALNESSMAP\":\"\",t.alphaMap?\"#define USE_ALPHAMAP\":\"\",t.sheen?\"#define USE_SHEEN\":\"\",t.transmission?\"#define USE_TRANSMISSION\":\"\",t.transmissionMap?\"#define USE_TRANSMISSIONMAP\":\"\",t.thicknessMap?\"#define USE_THICKNESSMAP\":\"\",t.vertexTangents?\"#define USE_TANGENT\":\"\",t.vertexColors||t.instancingColor?\"#define USE_COLOR\":\"\",t.vertexAlphas?\"#define USE_COLOR_ALPHA\":\"\",t.vertexUvs?\"#define USE_UV\":\"\",t.uvsVertexOnly?\"#define UVS_VERTEX_ONLY\":\"\",t.gradientMap?\"#define USE_GRADIENTMAP\":\"\",t.flatShading?\"#define FLAT_SHADED\":\"\",t.doubleSided?\"#define DOUBLE_SIDED\":\"\",t.flipSided?\"#define FLIP_SIDED\":\"\",t.shadowMapEnabled?\"#define USE_SHADOWMAP\":\"\",t.shadowMapEnabled?\"#define \"+l:\"\",t.premultipliedAlpha?\"#define PREMULTIPLIED_ALPHA\":\"\",t.physicallyCorrectLights?\"#define PHYSICALLY_CORRECT_LIGHTS\":\"\",t.logarithmicDepthBuffer?\"#define USE_LOGDEPTHBUF\":\"\",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?\"#define USE_LOGDEPTHBUF_EXT\":\"\",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?\"#define TEXTURE_LOD_EXT\":\"\",\"uniform mat4 viewMatrix;\",\"uniform vec3 cameraPosition;\",\"uniform bool isOrthographic;\",t.toneMapping!==T?\"#define TONE_MAPPING\":\"\",t.toneMapping!==T?_n.tonemapping_pars_fragment:\"\",t.toneMapping!==T?_i(\"toneMapping\",t.toneMapping):\"\",t.dithering?\"#define DITHERING\":\"\",_n.encodings_pars_fragment,t.map?Yl(\"mapTexelToLinear\",t.mapEncoding):\"\",t.matcap?Yl(\"matcapTexelToLinear\",t.matcapEncoding):\"\",t.envMap?Yl(\"envMapTexelToLinear\",t.envMapEncoding):\"\",t.emissiveMap?Yl(\"emissiveMapTexelToLinear\",t.emissiveMapEncoding):\"\",t.lightMap?Yl(\"lightMapTexelToLinear\",t.lightMapEncoding):\"\",gr(\"linearToOutputTexel\",t.outputEncoding),t.depthPacking?\"#define DEPTH_PACKING \"+t.depthPacking:\"\",`\n`].filter(jr).join(`\n`)),s=Fh(s),s=Hf(s,t),s=Dh(s,t),a=Fh(a),a=Hf(a,t),a=Dh(a,t),s=Fd(s),a=Fd(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(R=`#version 300 es\n`,y=[\"#define attribute in\",\"#define varying out\",\"#define texture2D texture\"].join(`\n`)+`\n`+y,w=[\"#define varying in\",t.glslVersion===ch?\"\":\"out highp vec4 pc_fragColor;\",t.glslVersion===ch?\"\":\"#define gl_FragColor pc_fragColor\",\"#define gl_FragDepthEXT gl_FragDepth\",\"#define texture2D texture\",\"#define textureCube texture\",\"#define texture2DProj textureProj\",\"#define texture2DLodEXT textureLod\",\"#define texture2DProjLodEXT textureProjLod\",\"#define textureCubeLodEXT textureLod\",\"#define texture2DGradEXT textureGrad\",\"#define texture2DProjGradEXT textureProjGrad\",\"#define textureCubeGradEXT textureGrad\"].join(`\n`)+`\n`+w);const F=R+w+a,U=Gf(r,35633,R+y+s),B=Gf(r,35632,F);if(r.attachShader(_,U),r.attachShader(_,B),t.index0AttributeName!==void 0?r.bindAttribLocation(_,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(_,0,\"position\"),r.linkProgram(_),i.debug.checkShaderErrors){const W=r.getProgramInfoLog(_).trim(),ge=r.getShaderInfoLog(U).trim(),he=r.getShaderInfoLog(B).trim();let se=!0,de=!0;if(r.getProgramParameter(_,35714)===!1){se=!1;const ue=cn(r,U,\"vertex\"),xe=cn(r,B,\"fragment\");console.error(\"THREE.WebGLProgram: shader error: \",r.getError(),\"35715\",r.getProgramParameter(_,35715),\"gl.getProgramInfoLog\",W,ue,xe)}else W!==\"\"?console.warn(\"THREE.WebGLProgram: gl.getProgramInfoLog()\",W):ge!==\"\"&&he!==\"\"||(de=!1);de&&(this.diagnostics={runnable:se,programLog:W,vertexShader:{log:ge,prefix:y},fragmentShader:{log:he,prefix:w}})}let V,G;return r.deleteShader(U),r.deleteShader(B),this.getUniforms=function(){return V===void 0&&(V=new Ui(r,_)),V},this.getAttributes=function(){return G===void 0&&(G=function(W,ge){const he={},se=W.getProgramParameter(ge,35721);for(let de=0;de<se;de++){const ue=W.getActiveAttrib(ge,de).name;he[ue]=W.getAttribLocation(ge,ue)}return he}(r,_)),G},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(_),this.program=void 0},this.name=t.shaderName,this.id=mv++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=U,this.fragmentShader=B,this}function Uh(i,e,t,n,r,o){const s=[],a=n.isWebGL2,l=n.logarithmicDepthBuffer,u=n.floatVertexTextures,h=n.maxVertexUniforms,d=n.vertexTextures;let p=n.precision;const m={MeshDepthMaterial:\"depth\",MeshDistanceMaterial:\"distanceRGBA\",MeshNormalMaterial:\"normal\",MeshBasicMaterial:\"basic\",MeshLambertMaterial:\"lambert\",MeshPhongMaterial:\"phong\",MeshToonMaterial:\"toon\",MeshStandardMaterial:\"physical\",MeshPhysicalMaterial:\"physical\",MeshMatcapMaterial:\"matcap\",LineBasicMaterial:\"basic\",LineDashedMaterial:\"dashed\",PointsMaterial:\"points\",ShadowMaterial:\"shadow\",SpriteMaterial:\"sprite\"},g=[\"precision\",\"isWebGL2\",\"supportsVertexTextures\",\"outputEncoding\",\"instancing\",\"instancingColor\",\"map\",\"mapEncoding\",\"matcap\",\"matcapEncoding\",\"envMap\",\"envMapMode\",\"envMapEncoding\",\"envMapCubeUV\",\"lightMap\",\"lightMapEncoding\",\"aoMap\",\"emissiveMap\",\"emissiveMapEncoding\",\"bumpMap\",\"normalMap\",\"objectSpaceNormalMap\",\"tangentSpaceNormalMap\",\"clearcoatMap\",\"clearcoatRoughnessMap\",\"clearcoatNormalMap\",\"displacementMap\",\"specularMap\",\"roughnessMap\",\"metalnessMap\",\"gradientMap\",\"alphaMap\",\"combine\",\"vertexColors\",\"vertexAlphas\",\"vertexTangents\",\"vertexUvs\",\"uvsVertexOnly\",\"fog\",\"useFog\",\"fogExp2\",\"flatShading\",\"sizeAttenuation\",\"logarithmicDepthBuffer\",\"skinning\",\"maxBones\",\"useVertexTexture\",\"morphTargets\",\"morphNormals\",\"premultipliedAlpha\",\"numDirLights\",\"numPointLights\",\"numSpotLights\",\"numHemiLights\",\"numRectAreaLights\",\"numDirLightShadows\",\"numPointLightShadows\",\"numSpotLightShadows\",\"shadowMapEnabled\",\"shadowMapType\",\"toneMapping\",\"physicallyCorrectLights\",\"alphaTest\",\"doubleSided\",\"flipSided\",\"numClippingPlanes\",\"numClipIntersection\",\"depthPacking\",\"dithering\",\"sheen\",\"transmission\",\"transmissionMap\",\"thicknessMap\"];function _(y){let w;return y&&y.isTexture?w=y.encoding:y&&y.isWebGLRenderTarget?(console.warn(\"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\"),w=y.texture.encoding):w=tn,w}return{getParameters:function(y,w,R,F,U){const B=F.fog,V=y.isMeshStandardMaterial?F.environment:null,G=e.get(y.envMap||V),W=m[y.type],ge=U.isSkinnedMesh?function(ue){const xe=ue.skeleton.bones;if(u)return 1024;{const We=h,Ge=Math.floor((We-20)/4),Ae=Math.min(Ge,xe.length);return Ae<xe.length?(console.warn(\"THREE.WebGLRenderer: Skeleton has \"+xe.length+\" bones. This GPU supports \"+Ae+\".\"),0):Ae}}(U):0;let he,se;if(y.precision!==null&&(p=n.getMaxPrecision(y.precision),p!==y.precision&&console.warn(\"THREE.WebGLProgram.getParameters:\",y.precision,\"not supported, using\",p,\"instead.\")),W){const ue=ro[W];he=ue.vertexShader,se=ue.fragmentShader}else he=y.vertexShader,se=y.fragmentShader;const de=i.getRenderTarget();return{isWebGL2:a,shaderID:W,shaderName:y.type,vertexShader:he,fragmentShader:se,defines:y.defines,isRawShaderMaterial:y.isRawShaderMaterial===!0,glslVersion:y.glslVersion,precision:p,instancing:U.isInstancedMesh===!0,instancingColor:U.isInstancedMesh===!0&&U.instanceColor!==null,supportsVertexTextures:d,outputEncoding:de!==null?_(de.texture):i.outputEncoding,map:!!y.map,mapEncoding:_(y.map),matcap:!!y.matcap,matcapEncoding:_(y.matcap),envMap:!!G,envMapMode:G&&G.mapping,envMapEncoding:_(G),envMapCubeUV:!!G&&(G.mapping===$e||G.mapping===ct),lightMap:!!y.lightMap,lightMapEncoding:_(y.lightMap),aoMap:!!y.aoMap,emissiveMap:!!y.emissiveMap,emissiveMapEncoding:_(y.emissiveMap),bumpMap:!!y.bumpMap,normalMap:!!y.normalMap,objectSpaceNormalMap:y.normalMapType===Rl,tangentSpaceNormalMap:y.normalMapType===vo,clearcoatMap:!!y.clearcoatMap,clearcoatRoughnessMap:!!y.clearcoatRoughnessMap,clearcoatNormalMap:!!y.clearcoatNormalMap,displacementMap:!!y.displacementMap,roughnessMap:!!y.roughnessMap,metalnessMap:!!y.metalnessMap,specularMap:!!y.specularMap,alphaMap:!!y.alphaMap,gradientMap:!!y.gradientMap,sheen:!!y.sheen,transmission:!!y.transmission,transmissionMap:!!y.transmissionMap,thicknessMap:!!y.thicknessMap,combine:y.combine,vertexTangents:y.normalMap&&y.vertexTangents,vertexColors:y.vertexColors,vertexAlphas:y.vertexColors===!0&&U.geometry&&U.geometry.attributes.color&&U.geometry.attributes.color.itemSize===4,vertexUvs:!!(y.map||y.bumpMap||y.normalMap||y.specularMap||y.alphaMap||y.emissiveMap||y.roughnessMap||y.metalnessMap||y.clearcoatMap||y.clearcoatRoughnessMap||y.clearcoatNormalMap||y.displacementMap||y.transmissionMap||y.thicknessMap),uvsVertexOnly:!(y.map||y.bumpMap||y.normalMap||y.specularMap||y.alphaMap||y.emissiveMap||y.roughnessMap||y.metalnessMap||y.clearcoatNormalMap||y.transmission||y.transmissionMap||y.thicknessMap||!y.displacementMap),fog:!!B,useFog:y.fog,fogExp2:B&&B.isFogExp2,flatShading:!!y.flatShading,sizeAttenuation:y.sizeAttenuation,logarithmicDepthBuffer:l,skinning:U.isSkinnedMesh===!0&&ge>0,maxBones:ge,useVertexTexture:u,morphTargets:y.morphTargets,morphNormals:y.morphNormals,numDirLights:w.directional.length,numPointLights:w.point.length,numSpotLights:w.spot.length,numRectAreaLights:w.rectArea.length,numHemiLights:w.hemi.length,numDirLightShadows:w.directionalShadowMap.length,numPointLightShadows:w.pointShadowMap.length,numSpotLightShadows:w.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:y.dithering,shadowMapEnabled:i.shadowMap.enabled&&R.length>0,shadowMapType:i.shadowMap.type,toneMapping:y.toneMapped?i.toneMapping:T,physicallyCorrectLights:i.physicallyCorrectLights,premultipliedAlpha:y.premultipliedAlpha,alphaTest:y.alphaTest,doubleSided:y.side===Ve,flipSided:y.side===ne,depthPacking:y.depthPacking!==void 0&&y.depthPacking,index0AttributeName:y.index0AttributeName,extensionDerivatives:y.extensions&&y.extensions.derivatives,extensionFragDepth:y.extensions&&y.extensions.fragDepth,extensionDrawBuffers:y.extensions&&y.extensions.drawBuffers,extensionShaderTextureLOD:y.extensions&&y.extensions.shaderTextureLOD,rendererExtensionFragDepth:a||t.has(\"EXT_frag_depth\"),rendererExtensionDrawBuffers:a||t.has(\"WEBGL_draw_buffers\"),rendererExtensionShaderTextureLod:a||t.has(\"EXT_shader_texture_lod\"),customProgramCacheKey:y.customProgramCacheKey()}},getProgramCacheKey:function(y){const w=[];if(y.shaderID?w.push(y.shaderID):(w.push(y.fragmentShader),w.push(y.vertexShader)),y.defines!==void 0)for(const R in y.defines)w.push(R),w.push(y.defines[R]);if(y.isRawShaderMaterial===!1){for(let R=0;R<g.length;R++)w.push(y[g[R]]);w.push(i.outputEncoding),w.push(i.gammaFactor)}return w.push(y.customProgramCacheKey),w.join()},getUniforms:function(y){const w=m[y.type];let R;if(w){const F=ro[w];R=Ch.clone(F.uniforms)}else R=y.uniforms;return R},acquireProgram:function(y,w){let R;for(let F=0,U=s.length;F<U;F++){const B=s[F];if(B.cacheKey===w){R=B,++R.usedTimes;break}}return R===void 0&&(R=new jf(i,w,y,r),s.push(R)),R},releaseProgram:function(y){if(--y.usedTimes==0){const w=s.indexOf(y);s[w]=s[s.length-1],s.pop(),y.destroy()}},programs:s}}function Or(){let i=new WeakMap;return{get:function(e){let t=i.get(e);return t===void 0&&(t={},i.set(e,t)),t},remove:function(e){i.delete(e)},update:function(e,t,n){i.get(e)[t]=n},dispose:function(){i=new WeakMap}}}function Qa(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.program!==e.program?i.program.id-e.program.id:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function Vf(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function Wf(i){const e=[];let t=0;const n=[],r=[],o=[],s={id:-1};function a(l,u,h,d,p,m){let g=e[t];const _=i.get(h);return g===void 0?(g={id:l.id,object:l,geometry:u,material:h,program:_.program||s,groupOrder:d,renderOrder:l.renderOrder,z:p,group:m},e[t]=g):(g.id=l.id,g.object=l,g.geometry=u,g.material=h,g.program=_.program||s,g.groupOrder=d,g.renderOrder=l.renderOrder,g.z=p,g.group=m),t++,g}return{opaque:n,transmissive:r,transparent:o,init:function(){t=0,n.length=0,r.length=0,o.length=0},push:function(l,u,h,d,p,m){const g=a(l,u,h,d,p,m);h.transmission>0?r.push(g):h.transparent===!0?o.push(g):n.push(g)},unshift:function(l,u,h,d,p,m){const g=a(l,u,h,d,p,m);h.transmission>0?r.unshift(g):h.transparent===!0?o.unshift(g):n.unshift(g)},finish:function(){for(let l=t,u=e.length;l<u;l++){const h=e[l];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.program=null,h.group=null}},sort:function(l,u){n.length>1&&n.sort(l||Qa),r.length>1&&r.sort(u||Vf),o.length>1&&o.sort(u||Vf)}}}function Xf(i){let e=new WeakMap;return{get:function(t,n){let r;return e.has(t)===!1?(r=new Wf(i),e.set(t,[r])):n>=e.get(t).length?(r=new Wf(i),e.get(t).push(r)):r=e.get(t)[n],r},dispose:function(){e=new WeakMap}}}function Zo(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case\"DirectionalLight\":t={direction:new re,color:new Et};break;case\"SpotLight\":t={position:new re,direction:new re,color:new Et,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case\"PointLight\":t={position:new re,color:new Et,distance:0,decay:0};break;case\"HemisphereLight\":t={direction:new re,skyColor:new Et,groundColor:new Et};break;case\"RectAreaLight\":t={color:new Et,position:new re,halfWidth:new re,halfHeight:new re}}return i[e.id]=t,t}}}let gn=0;function qf(i,e){return(e.castShadow?1:0)-(i.castShadow?1:0)}function Vr(i,e){const t=new Zo,n=function(){const l={};return{get:function(u){if(l[u.id]!==void 0)return l[u.id];let h;switch(u.type){case\"DirectionalLight\":case\"SpotLight\":h={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt};break;case\"PointLight\":h={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt,shadowCameraNear:1,shadowCameraFar:1e3}}return l[u.id]=h,h}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let l=0;l<9;l++)r.probe.push(new re);const o=new re,s=new Ut,a=new Ut;return{setup:function(l){let u=0,h=0,d=0;for(let B=0;B<9;B++)r.probe[B].set(0,0,0);let p=0,m=0,g=0,_=0,y=0,w=0,R=0,F=0;l.sort(qf);for(let B=0,V=l.length;B<V;B++){const G=l[B],W=G.color,ge=G.intensity,he=G.distance,se=G.shadow&&G.shadow.map?G.shadow.map.texture:null;if(G.isAmbientLight)u+=W.r*ge,h+=W.g*ge,d+=W.b*ge;else if(G.isLightProbe)for(let de=0;de<9;de++)r.probe[de].addScaledVector(G.sh.coefficients[de],ge);else if(G.isDirectionalLight){const de=t.get(G);if(de.color.copy(G.color).multiplyScalar(G.intensity),G.castShadow){const ue=G.shadow,xe=n.get(G);xe.shadowBias=ue.bias,xe.shadowNormalBias=ue.normalBias,xe.shadowRadius=ue.radius,xe.shadowMapSize=ue.mapSize,r.directionalShadow[p]=xe,r.directionalShadowMap[p]=se,r.directionalShadowMatrix[p]=G.shadow.matrix,w++}r.directional[p]=de,p++}else if(G.isSpotLight){const de=t.get(G);if(de.position.setFromMatrixPosition(G.matrixWorld),de.color.copy(W).multiplyScalar(ge),de.distance=he,de.coneCos=Math.cos(G.angle),de.penumbraCos=Math.cos(G.angle*(1-G.penumbra)),de.decay=G.decay,G.castShadow){const ue=G.shadow,xe=n.get(G);xe.shadowBias=ue.bias,xe.shadowNormalBias=ue.normalBias,xe.shadowRadius=ue.radius,xe.shadowMapSize=ue.mapSize,r.spotShadow[g]=xe,r.spotShadowMap[g]=se,r.spotShadowMatrix[g]=G.shadow.matrix,F++}r.spot[g]=de,g++}else if(G.isRectAreaLight){const de=t.get(G);de.color.copy(W).multiplyScalar(ge),de.halfWidth.set(.5*G.width,0,0),de.halfHeight.set(0,.5*G.height,0),r.rectArea[_]=de,_++}else if(G.isPointLight){const de=t.get(G);if(de.color.copy(G.color).multiplyScalar(G.intensity),de.distance=G.distance,de.decay=G.decay,G.castShadow){const ue=G.shadow,xe=n.get(G);xe.shadowBias=ue.bias,xe.shadowNormalBias=ue.normalBias,xe.shadowRadius=ue.radius,xe.shadowMapSize=ue.mapSize,xe.shadowCameraNear=ue.camera.near,xe.shadowCameraFar=ue.camera.far,r.pointShadow[m]=xe,r.pointShadowMap[m]=se,r.pointShadowMatrix[m]=G.shadow.matrix,R++}r.point[m]=de,m++}else if(G.isHemisphereLight){const de=t.get(G);de.skyColor.copy(G.color).multiplyScalar(ge),de.groundColor.copy(G.groundColor).multiplyScalar(ge),r.hemi[y]=de,y++}}_>0&&(e.isWebGL2||i.has(\"OES_texture_float_linear\")===!0?(r.rectAreaLTC1=Ct.LTC_FLOAT_1,r.rectAreaLTC2=Ct.LTC_FLOAT_2):i.has(\"OES_texture_half_float_linear\")===!0?(r.rectAreaLTC1=Ct.LTC_HALF_1,r.rectAreaLTC2=Ct.LTC_HALF_2):console.error(\"THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.\")),r.ambient[0]=u,r.ambient[1]=h,r.ambient[2]=d;const U=r.hash;U.directionalLength===p&&U.pointLength===m&&U.spotLength===g&&U.rectAreaLength===_&&U.hemiLength===y&&U.numDirectionalShadows===w&&U.numPointShadows===R&&U.numSpotShadows===F||(r.directional.length=p,r.spot.length=g,r.rectArea.length=_,r.point.length=m,r.hemi.length=y,r.directionalShadow.length=w,r.directionalShadowMap.length=w,r.pointShadow.length=R,r.pointShadowMap.length=R,r.spotShadow.length=F,r.spotShadowMap.length=F,r.directionalShadowMatrix.length=w,r.pointShadowMatrix.length=R,r.spotShadowMatrix.length=F,U.directionalLength=p,U.pointLength=m,U.spotLength=g,U.rectAreaLength=_,U.hemiLength=y,U.numDirectionalShadows=w,U.numPointShadows=R,U.numSpotShadows=F,r.version=gn++)},setupView:function(l,u){let h=0,d=0,p=0,m=0,g=0;const _=u.matrixWorldInverse;for(let y=0,w=l.length;y<w;y++){const R=l[y];if(R.isDirectionalLight){const F=r.directional[h];F.direction.setFromMatrixPosition(R.matrixWorld),o.setFromMatrixPosition(R.target.matrixWorld),F.direction.sub(o),F.direction.transformDirection(_),h++}else if(R.isSpotLight){const F=r.spot[p];F.position.setFromMatrixPosition(R.matrixWorld),F.position.applyMatrix4(_),F.direction.setFromMatrixPosition(R.matrixWorld),o.setFromMatrixPosition(R.target.matrixWorld),F.direction.sub(o),F.direction.transformDirection(_),p++}else if(R.isRectAreaLight){const F=r.rectArea[m];F.position.setFromMatrixPosition(R.matrixWorld),F.position.applyMatrix4(_),a.identity(),s.copy(R.matrixWorld),s.premultiply(_),a.extractRotation(s),F.halfWidth.set(.5*R.width,0,0),F.halfHeight.set(0,.5*R.height,0),F.halfWidth.applyMatrix4(a),F.halfHeight.applyMatrix4(a),m++}else if(R.isPointLight){const F=r.point[d];F.position.setFromMatrixPosition(R.matrixWorld),F.position.applyMatrix4(_),d++}else if(R.isHemisphereLight){const F=r.hemi[g];F.direction.setFromMatrixPosition(R.matrixWorld),F.direction.transformDirection(_),F.direction.normalize(),g++}}},state:r}}function Bd(i,e){const t=new Vr(i,e),n=[],r=[];return{init:function(){n.length=0,r.length=0},state:{lightsArray:n,shadowsArray:r,lights:t},setupLights:function(){t.setup(n)},setupLightsView:function(o){t.setupView(n,o)},pushLight:function(o){n.push(o)},pushShadow:function(o){r.push(o)}}}function Dn(i,e){let t=new WeakMap;return{get:function(n,r=0){let o;return t.has(n)===!1?(o=new Bd(i,e),t.set(n,[o])):r>=t.get(n).length?(o=new Bd(i,e),t.get(n).push(o)):o=t.get(n)[r],o},dispose:function(){t=new WeakMap}}}class $l extends ki{constructor(e){super(),this.type=\"MeshDepthMaterial\",this.depthPacking=uf,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}$l.prototype.isMeshDepthMaterial=!0;class Jl extends ki{constructor(e){super(),this.type=\"MeshDistanceMaterial\",this.referencePosition=new re,this.nearDistance=1,this.farDistance=1e3,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}Jl.prototype.isMeshDistanceMaterial=!0;function Zl(i,e,t){let n=new Ja;const r=new gt,o=new gt,s=new Un,a=[],l=[],u={},h=t.maxTextureSize,d={0:ne,1:X,2:Ve},p=new ir({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new gt},radius:{value:4}},vertexShader:`void main() {\n\tgl_Position = vec4( position, 1.0 );\n}`,fragmentShader:`uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}`}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const g=new Vt;g.setAttribute(\"position\",new mn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new Xn(g,p),y=this;function w(V,G){const W=e.update(_);p.uniforms.shadow_pass.value=V.map.texture,p.uniforms.resolution.value=V.mapSize,p.uniforms.radius.value=V.radius,i.setRenderTarget(V.mapPass),i.clear(),i.renderBufferDirect(G,null,W,p,_,null),m.uniforms.shadow_pass.value=V.mapPass.texture,m.uniforms.resolution.value=V.mapSize,m.uniforms.radius.value=V.radius,i.setRenderTarget(V.map),i.clear(),i.renderBufferDirect(G,null,W,m,_,null)}function R(V){const G=V<<0;let W=a[G];return W===void 0&&(W=new $l({depthPacking:vs,morphTargets:V}),a[G]=W),W}function F(V){const G=V<<0;let W=l[G];return W===void 0&&(W=new Jl({morphTargets:V}),l[G]=W),W}function U(V,G,W,ge,he,se,de){let ue=null,xe=R,We=V.customDepthMaterial;if(ge.isPointLight===!0&&(xe=F,We=V.customDistanceMaterial),We===void 0){let Ge=!1;W.morphTargets===!0&&(Ge=G.morphAttributes&&G.morphAttributes.position&&G.morphAttributes.position.length>0),ue=xe(Ge)}else ue=We;if(i.localClippingEnabled&&W.clipShadows===!0&&W.clippingPlanes.length!==0){const Ge=ue.uuid,Ae=W.uuid;let Re=u[Ge];Re===void 0&&(Re={},u[Ge]=Re);let Ze=Re[Ae];Ze===void 0&&(Ze=ue.clone(),Re[Ae]=Ze),ue=Ze}return ue.visible=W.visible,ue.wireframe=W.wireframe,ue.side=de===z?W.shadowSide!==null?W.shadowSide:W.side:W.shadowSide!==null?W.shadowSide:d[W.side],ue.clipShadows=W.clipShadows,ue.clippingPlanes=W.clippingPlanes,ue.clipIntersection=W.clipIntersection,ue.wireframeLinewidth=W.wireframeLinewidth,ue.linewidth=W.linewidth,ge.isPointLight===!0&&ue.isMeshDistanceMaterial===!0&&(ue.referencePosition.setFromMatrixPosition(ge.matrixWorld),ue.nearDistance=he,ue.farDistance=se),ue}function B(V,G,W,ge,he){if(V.visible===!1)return;if(V.layers.test(G.layers)&&(V.isMesh||V.isLine||V.isPoints)&&(V.castShadow||V.receiveShadow&&he===z)&&(!V.frustumCulled||n.intersectsObject(V))){V.modelViewMatrix.multiplyMatrices(W.matrixWorldInverse,V.matrixWorld);const de=e.update(V),ue=V.material;if(Array.isArray(ue)){const xe=de.groups;for(let We=0,Ge=xe.length;We<Ge;We++){const Ae=xe[We],Re=ue[Ae.materialIndex];if(Re&&Re.visible){const Ze=U(V,de,Re,ge,W.near,W.far,he);i.renderBufferDirect(W,null,de,Ze,V,Ae)}}}else if(ue.visible){const xe=U(V,de,ue,ge,W.near,W.far,he);i.renderBufferDirect(W,null,de,xe,V,null)}}const se=V.children;for(let de=0,ue=se.length;de<ue;de++)B(se[de],G,W,ge,he)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ee,this.render=function(V,G,W){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||V.length===0)return;const ge=i.getRenderTarget(),he=i.getActiveCubeFace(),se=i.getActiveMipmapLevel(),de=i.state;de.setBlending(ae),de.buffers.color.setClear(1,1,1,1),de.buffers.depth.setTest(!0),de.setScissorTest(!1);for(let ue=0,xe=V.length;ue<xe;ue++){const We=V[ue],Ge=We.shadow;if(Ge===void 0){console.warn(\"THREE.WebGLShadowMap:\",We,\"has no shadow.\");continue}if(Ge.autoUpdate===!1&&Ge.needsUpdate===!1)continue;r.copy(Ge.mapSize);const Ae=Ge.getFrameExtents();if(r.multiply(Ae),o.copy(Ge.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(o.x=Math.floor(h/Ae.x),r.x=o.x*Ae.x,Ge.mapSize.x=o.x),r.y>h&&(o.y=Math.floor(h/Ae.y),r.y=o.y*Ae.y,Ge.mapSize.y=o.y)),Ge.map===null&&!Ge.isPointLightShadow&&this.type===z){const Ze={minFilter:Kn,magFilter:Kn,format:Tr};Ge.map=new pr(r.x,r.y,Ze),Ge.map.texture.name=We.name+\".shadowMap\",Ge.mapPass=new pr(r.x,r.y,Ze),Ge.camera.updateProjectionMatrix()}if(Ge.map===null){const Ze={minFilter:wn,magFilter:wn,format:Tr};Ge.map=new pr(r.x,r.y,Ze),Ge.map.texture.name=We.name+\".shadowMap\",Ge.camera.updateProjectionMatrix()}i.setRenderTarget(Ge.map),i.clear();const Re=Ge.getViewportCount();for(let Ze=0;Ze<Re;Ze++){const lt=Ge.getViewport(Ze);s.set(o.x*lt.x,o.y*lt.y,o.x*lt.z,o.y*lt.w),de.viewport(s),Ge.updateMatrices(We,Ze),n=Ge.getFrustum(),B(G,W,Ge.camera,We,this.type)}Ge.isPointLightShadow||this.type!==z||w(Ge,W),Ge.needsUpdate=!1}y.needsUpdate=!1,i.setRenderTarget(ge,he,se)}}function gv(i,e,t){const n=t.isWebGL2,r=new function(){let oe=!1;const Ee=new Un;let He=null;const ze=new Un(0,0,0,0);return{setMask:function(Pe){He===Pe||oe||(i.colorMask(Pe,Pe,Pe,Pe),He=Pe)},setLocked:function(Pe){oe=Pe},setClear:function(Pe,tt,It,Nt,Ot){Ot===!0&&(Pe*=Nt,tt*=Nt,It*=Nt),Ee.set(Pe,tt,It,Nt),ze.equals(Ee)===!1&&(i.clearColor(Pe,tt,It,Nt),ze.copy(Ee))},reset:function(){oe=!1,He=null,ze.set(-1,0,0,0)}}},o=new function(){let oe=!1,Ee=null,He=null,ze=null;return{setTest:function(Pe){Pe?dt(2929):ce(2929)},setMask:function(Pe){Ee===Pe||oe||(i.depthMask(Pe),Ee=Pe)},setFunc:function(Pe){if(He!==Pe){if(Pe)switch(Pe){case An:i.depthFunc(512);break;case In:i.depthFunc(519);break;case Ai:i.depthFunc(513);break;case Rn:i.depthFunc(515);break;case Ni:i.depthFunc(514);break;case mi:i.depthFunc(518);break;case co:i.depthFunc(516);break;case ka:i.depthFunc(517);break;default:i.depthFunc(515)}else i.depthFunc(515);He=Pe}},setLocked:function(Pe){oe=Pe},setClear:function(Pe){ze!==Pe&&(i.clearDepth(Pe),ze=Pe)},reset:function(){oe=!1,Ee=null,He=null,ze=null}}},s=new function(){let oe=!1,Ee=null,He=null,ze=null,Pe=null,tt=null,It=null,Nt=null,Ot=null;return{setTest:function(pn){oe||(pn?dt(2960):ce(2960))},setMask:function(pn){Ee===pn||oe||(i.stencilMask(pn),Ee=pn)},setFunc:function(pn,Mi,zn){He===pn&&ze===Mi&&Pe===zn||(i.stencilFunc(pn,Mi,zn),He=pn,ze=Mi,Pe=zn)},setOp:function(pn,Mi,zn){tt===pn&&It===Mi&&Nt===zn||(i.stencilOp(pn,Mi,zn),tt=pn,It=Mi,Nt=zn)},setLocked:function(pn){oe=pn},setClear:function(pn){Ot!==pn&&(i.clearStencil(pn),Ot=pn)},reset:function(){oe=!1,Ee=null,He=null,ze=null,Pe=null,tt=null,It=null,Nt=null,Ot=null}}};let a={},l=null,u={},h=null,d=!1,p=null,m=null,g=null,_=null,y=null,w=null,R=null,F=!1,U=null,B=null,V=null,G=null,W=null;const ge=i.getParameter(35661);let he=!1,se=0;const de=i.getParameter(7938);de.indexOf(\"WebGL\")!==-1?(se=parseFloat(/^WebGL (\\d)/.exec(de)[1]),he=se>=1):de.indexOf(\"OpenGL ES\")!==-1&&(se=parseFloat(/^OpenGL ES (\\d)/.exec(de)[1]),he=se>=2);let ue=null,xe={};const We=i.getParameter(3088),Ge=i.getParameter(2978),Ae=new Un().fromArray(We),Re=new Un().fromArray(Ge);function Ze(oe,Ee,He){const ze=new Uint8Array(4),Pe=i.createTexture();i.bindTexture(oe,Pe),i.texParameteri(oe,10241,9728),i.texParameteri(oe,10240,9728);for(let tt=0;tt<He;tt++)i.texImage2D(Ee+tt,0,6408,1,1,0,6408,5121,ze);return Pe}const lt={};function dt(oe){a[oe]!==!0&&(i.enable(oe),a[oe]=!0)}function ce(oe){a[oe]!==!1&&(i.disable(oe),a[oe]=!1)}lt[3553]=Ze(3553,3553,1),lt[34067]=Ze(34067,34069,6),r.setClear(0,0,0,1),o.setClear(1),s.setClear(0),dt(2929),o.setFunc(Rn),je(!1),ft(Ie),dt(2884),Xe(ae);const fe={[Le]:32774,[De]:32778,[Je]:32779};if(n)fe[et]=32775,fe[bt]=32776;else{const oe=e.get(\"EXT_blend_minmax\");oe!==null&&(fe[et]=oe.MIN_EXT,fe[bt]=oe.MAX_EXT)}const Qe={[_t]:0,[ln]:1,[wt]:768,[qt]:770,[qn]:776,[Bn]:774,[Bt]:772,[Xt]:769,[en]:771,[Mn]:775,[Fn]:773};function Xe(oe,Ee,He,ze,Pe,tt,It,Nt){if(oe!==ae){if(d===!1&&(dt(3042),d=!0),oe===Oe)Pe=Pe||Ee,tt=tt||He,It=It||ze,Ee===m&&Pe===y||(i.blendEquationSeparate(fe[Ee],fe[Pe]),m=Ee,y=Pe),He===g&&ze===_&&tt===w&&It===R||(i.blendFuncSeparate(Qe[He],Qe[ze],Qe[tt],Qe[It]),g=He,_=ze,w=tt,R=It),p=oe,F=null;else if(oe!==p||Nt!==F){if(m===Le&&y===Le||(i.blendEquation(32774),m=Le,y=Le),Nt)switch(oe){case Me:i.blendFuncSeparate(1,771,1,771);break;case Fe:i.blendFunc(1,1);break;case j:i.blendFuncSeparate(0,0,769,771);break;case ye:i.blendFuncSeparate(0,768,0,770);break;default:console.error(\"THREE.WebGLState: Invalid blending: \",oe)}else switch(oe){case Me:i.blendFuncSeparate(770,771,1,771);break;case Fe:i.blendFunc(770,1);break;case j:i.blendFunc(0,769);break;case ye:i.blendFunc(0,768);break;default:console.error(\"THREE.WebGLState: Invalid blending: \",oe)}g=null,_=null,w=null,R=null,p=oe,F=Nt}}else d===!0&&(ce(3042),d=!1)}function je(oe){U!==oe&&(oe?i.frontFace(2304):i.frontFace(2305),U=oe)}function ft(oe){oe!==Ce?(dt(2884),oe!==B&&(oe===Ie?i.cullFace(1029):oe===E?i.cullFace(1028):i.cullFace(1032))):ce(2884),B=oe}function mt(oe,Ee,He){oe?(dt(32823),G===Ee&&W===He||(i.polygonOffset(Ee,He),G=Ee,W=He)):ce(32823)}function Ke(oe){oe===void 0&&(oe=33984+ge-1),ue!==oe&&(i.activeTexture(oe),ue=oe)}return{buffers:{color:r,depth:o,stencil:s},enable:dt,disable:ce,bindFramebuffer:function(oe,Ee){return Ee===null&&l!==null&&(Ee=l),u[oe]!==Ee&&(i.bindFramebuffer(oe,Ee),u[oe]=Ee,n&&(oe===36009&&(u[36160]=Ee),oe===36160&&(u[36009]=Ee)),!0)},bindXRFramebuffer:function(oe){oe!==l&&(i.bindFramebuffer(36160,oe),l=oe)},useProgram:function(oe){return h!==oe&&(i.useProgram(oe),h=oe,!0)},setBlending:Xe,setMaterial:function(oe,Ee){oe.side===Ve?ce(2884):dt(2884);let He=oe.side===ne;Ee&&(He=!He),je(He),oe.blending===Me&&oe.transparent===!1?Xe(ae):Xe(oe.blending,oe.blendEquation,oe.blendSrc,oe.blendDst,oe.blendEquationAlpha,oe.blendSrcAlpha,oe.blendDstAlpha,oe.premultipliedAlpha),o.setFunc(oe.depthFunc),o.setTest(oe.depthTest),o.setMask(oe.depthWrite),r.setMask(oe.colorWrite);const ze=oe.stencilWrite;s.setTest(ze),ze&&(s.setMask(oe.stencilWriteMask),s.setFunc(oe.stencilFunc,oe.stencilRef,oe.stencilFuncMask),s.setOp(oe.stencilFail,oe.stencilZFail,oe.stencilZPass)),mt(oe.polygonOffset,oe.polygonOffsetFactor,oe.polygonOffsetUnits),oe.alphaToCoverage===!0?dt(32926):ce(32926)},setFlipSided:je,setCullFace:ft,setLineWidth:function(oe){oe!==V&&(he&&i.lineWidth(oe),V=oe)},setPolygonOffset:mt,setScissorTest:function(oe){oe?dt(3089):ce(3089)},activeTexture:Ke,bindTexture:function(oe,Ee){ue===null&&Ke();let He=xe[ue];He===void 0&&(He={type:void 0,texture:void 0},xe[ue]=He),He.type===oe&&He.texture===Ee||(i.bindTexture(oe,Ee||lt[oe]),He.type=oe,He.texture=Ee)},unbindTexture:function(){const oe=xe[ue];oe!==void 0&&oe.type!==void 0&&(i.bindTexture(oe.type,null),oe.type=void 0,oe.texture=void 0)},compressedTexImage2D:function(){try{i.compressedTexImage2D.apply(i,arguments)}catch(oe){console.error(\"THREE.WebGLState:\",oe)}},texImage2D:function(){try{i.texImage2D.apply(i,arguments)}catch(oe){console.error(\"THREE.WebGLState:\",oe)}},texImage3D:function(){try{i.texImage3D.apply(i,arguments)}catch(oe){console.error(\"THREE.WebGLState:\",oe)}},scissor:function(oe){Ae.equals(oe)===!1&&(i.scissor(oe.x,oe.y,oe.z,oe.w),Ae.copy(oe))},viewport:function(oe){Re.equals(oe)===!1&&(i.viewport(oe.x,oe.y,oe.z,oe.w),Re.copy(oe))},reset:function(){i.disable(3042),i.disable(2884),i.disable(2929),i.disable(32823),i.disable(3089),i.disable(2960),i.disable(32926),i.blendEquation(32774),i.blendFunc(1,0),i.blendFuncSeparate(1,0,1,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(513),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(519,0,4294967295),i.stencilOp(7680,7680,7680),i.clearStencil(0),i.cullFace(1029),i.frontFace(2305),i.polygonOffset(0,0),i.activeTexture(33984),i.bindFramebuffer(36160,null),n===!0&&(i.bindFramebuffer(36009,null),i.bindFramebuffer(36008,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),a={},ue=null,xe={},l=null,u={},h=null,d=!1,p=null,m=null,g=null,_=null,y=null,w=null,R=null,F=!1,U=null,B=null,V=null,G=null,W=null,Ae.set(0,0,i.canvas.width,i.canvas.height),Re.set(0,0,i.canvas.width,i.canvas.height),r.reset(),o.reset(),s.reset()}}}function vv(i,e,t,n,r,o,s){const a=r.isWebGL2,l=r.maxTextures,u=r.maxCubemapSize,h=r.maxTextureSize,d=r.maxSamples,p=new WeakMap;let m,g=!1;try{g=typeof OffscreenCanvas!=\"undefined\"&&new OffscreenCanvas(1,1).getContext(\"2d\")!==null}catch{}function _(ce,fe){return g?new OffscreenCanvas(ce,fe):document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\")}function y(ce,fe,Qe,Xe){let je=1;if((ce.width>Xe||ce.height>Xe)&&(je=Xe/Math.max(ce.width,ce.height)),je<1||fe===!0){if(typeof HTMLImageElement!=\"undefined\"&&ce instanceof HTMLImageElement||typeof HTMLCanvasElement!=\"undefined\"&&ce instanceof HTMLCanvasElement||typeof ImageBitmap!=\"undefined\"&&ce instanceof ImageBitmap){const ft=fe?Qs:Math.floor,mt=ft(je*ce.width),Ke=ft(je*ce.height);m===void 0&&(m=_(mt,Ke));const oe=Qe?_(mt,Ke):m;return oe.width=mt,oe.height=Ke,oe.getContext(\"2d\").drawImage(ce,0,0,mt,Ke),console.warn(\"THREE.WebGLRenderer: Texture has been resized from (\"+ce.width+\"x\"+ce.height+\") to (\"+mt+\"x\"+Ke+\").\"),oe}return\"data\"in ce&&console.warn(\"THREE.WebGLRenderer: Image in DataTexture is too big (\"+ce.width+\"x\"+ce.height+\").\"),ce}return ce}function w(ce){return Ks(ce.width)&&Ks(ce.height)}function R(ce,fe){return ce.generateMipmaps&&fe&&ce.minFilter!==wn&&ce.minFilter!==Kn}function F(ce,fe,Qe,Xe,je=1){i.generateMipmap(ce),n.get(fe).__maxMipLevel=Math.log2(Math.max(Qe,Xe,je))}function U(ce,fe,Qe){if(a===!1)return fe;if(ce!==null){if(i[ce]!==void 0)return i[ce];console.warn(\"THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '\"+ce+\"'\")}let Xe=fe;return fe===6403&&(Qe===5126&&(Xe=33326),Qe===5131&&(Xe=33325),Qe===5121&&(Xe=33321)),fe===6407&&(Qe===5126&&(Xe=34837),Qe===5131&&(Xe=34843),Qe===5121&&(Xe=32849)),fe===6408&&(Qe===5126&&(Xe=34836),Qe===5131&&(Xe=34842),Qe===5121&&(Xe=32856)),Xe!==33325&&Xe!==33326&&Xe!==34842&&Xe!==34836||e.get(\"EXT_color_buffer_float\"),Xe}function B(ce){return ce===wn||ce===Di||ce===fo?9728:9729}function V(ce){const fe=ce.target;fe.removeEventListener(\"dispose\",V),function(Qe){const Xe=n.get(Qe);Xe.__webglInit!==void 0&&(i.deleteTexture(Xe.__webglTexture),n.remove(Qe))}(fe),fe.isVideoTexture&&p.delete(fe),s.memory.textures--}function G(ce){const fe=ce.target;fe.removeEventListener(\"dispose\",G),function(Qe){const Xe=Qe.texture,je=n.get(Qe),ft=n.get(Xe);if(!!Qe){if(ft.__webglTexture!==void 0&&(i.deleteTexture(ft.__webglTexture),s.memory.textures--),Qe.depthTexture&&Qe.depthTexture.dispose(),Qe.isWebGLCubeRenderTarget)for(let mt=0;mt<6;mt++)i.deleteFramebuffer(je.__webglFramebuffer[mt]),je.__webglDepthbuffer&&i.deleteRenderbuffer(je.__webglDepthbuffer[mt]);else i.deleteFramebuffer(je.__webglFramebuffer),je.__webglDepthbuffer&&i.deleteRenderbuffer(je.__webglDepthbuffer),je.__webglMultisampledFramebuffer&&i.deleteFramebuffer(je.__webglMultisampledFramebuffer),je.__webglColorRenderbuffer&&i.deleteRenderbuffer(je.__webglColorRenderbuffer),je.__webglDepthRenderbuffer&&i.deleteRenderbuffer(je.__webglDepthRenderbuffer);if(Qe.isWebGLMultipleRenderTargets)for(let mt=0,Ke=Xe.length;mt<Ke;mt++){const oe=n.get(Xe[mt]);oe.__webglTexture&&(i.deleteTexture(oe.__webglTexture),s.memory.textures--),n.remove(Xe[mt])}n.remove(Xe),n.remove(Qe)}}(fe)}let W=0;function ge(ce,fe){const Qe=n.get(ce);if(ce.isVideoTexture&&function(Xe){const je=s.render.frame;p.get(Xe)!==je&&(p.set(Xe,je),Xe.update())}(ce),ce.version>0&&Qe.__version!==ce.version){const Xe=ce.image;if(Xe===void 0)console.warn(\"THREE.WebGLRenderer: Texture marked for update but image is undefined\");else{if(Xe.complete!==!1)return void We(Qe,ce,fe);console.warn(\"THREE.WebGLRenderer: Texture marked for update but image is incomplete\")}}t.activeTexture(33984+fe),t.bindTexture(3553,Qe.__webglTexture)}function he(ce,fe){const Qe=n.get(ce);ce.version>0&&Qe.__version!==ce.version?function(Xe,je,ft){if(je.image.length!==6)return;xe(Xe,je),t.activeTexture(33984+ft),t.bindTexture(34067,Xe.__webglTexture),i.pixelStorei(37440,je.flipY),i.pixelStorei(37441,je.premultiplyAlpha),i.pixelStorei(3317,je.unpackAlignment),i.pixelStorei(37443,0);const mt=je&&(je.isCompressedTexture||je.image[0].isCompressedTexture),Ke=je.image[0]&&je.image[0].isDataTexture,oe=[];for(let Nt=0;Nt<6;Nt++)oe[Nt]=mt||Ke?Ke?je.image[Nt].image:je.image[Nt]:y(je.image[Nt],!1,!0,u);const Ee=oe[0],He=w(Ee)||a,ze=o.convert(je.format),Pe=o.convert(je.type),tt=U(je.internalFormat,ze,Pe);let It;if(ue(34067,je,He),mt){for(let Nt=0;Nt<6;Nt++){It=oe[Nt].mipmaps;for(let Ot=0;Ot<It.length;Ot++){const pn=It[Ot];je.format!==Tr&&je.format!==Lo?ze!==null?t.compressedTexImage2D(34069+Nt,Ot,tt,pn.width,pn.height,0,pn.data):console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()\"):t.texImage2D(34069+Nt,Ot,tt,pn.width,pn.height,0,ze,Pe,pn.data)}}Xe.__maxMipLevel=It.length-1}else{It=je.mipmaps;for(let Nt=0;Nt<6;Nt++)if(Ke){t.texImage2D(34069+Nt,0,tt,oe[Nt].width,oe[Nt].height,0,ze,Pe,oe[Nt].data);for(let Ot=0;Ot<It.length;Ot++){const pn=It[Ot].image[Nt].image;t.texImage2D(34069+Nt,Ot+1,tt,pn.width,pn.height,0,ze,Pe,pn.data)}}else{t.texImage2D(34069+Nt,0,tt,ze,Pe,oe[Nt]);for(let Ot=0;Ot<It.length;Ot++){const pn=It[Ot];t.texImage2D(34069+Nt,Ot+1,tt,ze,Pe,pn.image[Nt])}}Xe.__maxMipLevel=It.length}R(je,He)&&F(34067,je,Ee.width,Ee.height),Xe.__version=je.version,je.onUpdate&&je.onUpdate(je)}(Qe,ce,fe):(t.activeTexture(33984+fe),t.bindTexture(34067,Qe.__webglTexture))}const se={[Pt]:10497,[Tt]:33071,[un]:33648},de={[wn]:9728,[Di]:9984,[fo]:9986,[Kn]:9729,[Gu]:9985,[ps]:9987};function ue(ce,fe,Qe){if(Qe?(i.texParameteri(ce,10242,se[fe.wrapS]),i.texParameteri(ce,10243,se[fe.wrapT]),ce!==32879&&ce!==35866||i.texParameteri(ce,32882,se[fe.wrapR]),i.texParameteri(ce,10240,de[fe.magFilter]),i.texParameteri(ce,10241,de[fe.minFilter])):(i.texParameteri(ce,10242,33071),i.texParameteri(ce,10243,33071),ce!==32879&&ce!==35866||i.texParameteri(ce,32882,33071),fe.wrapS===Tt&&fe.wrapT===Tt||console.warn(\"THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.\"),i.texParameteri(ce,10240,B(fe.magFilter)),i.texParameteri(ce,10241,B(fe.minFilter)),fe.minFilter!==wn&&fe.minFilter!==Kn&&console.warn(\"THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.\")),e.has(\"EXT_texture_filter_anisotropic\")===!0){const Xe=e.get(\"EXT_texture_filter_anisotropic\");if(fe.type===Oo&&e.has(\"OES_texture_float_linear\")===!1||a===!1&&fe.type===qs&&e.has(\"OES_texture_half_float_linear\")===!1)return;(fe.anisotropy>1||n.get(fe).__currentAnisotropy)&&(i.texParameterf(ce,Xe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(fe.anisotropy,r.getMaxAnisotropy())),n.get(fe).__currentAnisotropy=fe.anisotropy)}}function xe(ce,fe){ce.__webglInit===void 0&&(ce.__webglInit=!0,fe.addEventListener(\"dispose\",V),ce.__webglTexture=i.createTexture(),s.memory.textures++)}function We(ce,fe,Qe){let Xe=3553;fe.isDataTexture2DArray&&(Xe=35866),fe.isDataTexture3D&&(Xe=32879),xe(ce,fe),t.activeTexture(33984+Qe),t.bindTexture(Xe,ce.__webglTexture),i.pixelStorei(37440,fe.flipY),i.pixelStorei(37441,fe.premultiplyAlpha),i.pixelStorei(3317,fe.unpackAlignment),i.pixelStorei(37443,0);const je=function(Pe){return!a&&(Pe.wrapS!==Tt||Pe.wrapT!==Tt||Pe.minFilter!==wn&&Pe.minFilter!==Kn)}(fe)&&w(fe.image)===!1,ft=y(fe.image,je,!1,h),mt=w(ft)||a,Ke=o.convert(fe.format);let oe,Ee=o.convert(fe.type),He=U(fe.internalFormat,Ke,Ee);ue(Xe,fe,mt);const ze=fe.mipmaps;if(fe.isDepthTexture)He=6402,a?He=fe.type===Oo?36012:fe.type===Sl?33190:fe.type===On?35056:33189:fe.type===Oo&&console.error(\"WebGLRenderer: Floating point depth texture requires WebGL2.\"),fe.format===fs&&He===6402&&fe.type!==wl&&fe.type!==Sl&&(console.warn(\"THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.\"),fe.type=wl,Ee=o.convert(fe.type)),fe.format===mo&&He===6402&&(He=34041,fe.type!==On&&(console.warn(\"THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.\"),fe.type=On,Ee=o.convert(fe.type))),t.texImage2D(3553,0,He,ft.width,ft.height,0,Ke,Ee,null);else if(fe.isDataTexture)if(ze.length>0&&mt){for(let Pe=0,tt=ze.length;Pe<tt;Pe++)oe=ze[Pe],t.texImage2D(3553,Pe,He,oe.width,oe.height,0,Ke,Ee,oe.data);fe.generateMipmaps=!1,ce.__maxMipLevel=ze.length-1}else t.texImage2D(3553,0,He,ft.width,ft.height,0,Ke,Ee,ft.data),ce.__maxMipLevel=0;else if(fe.isCompressedTexture){for(let Pe=0,tt=ze.length;Pe<tt;Pe++)oe=ze[Pe],fe.format!==Tr&&fe.format!==Lo?Ke!==null?t.compressedTexImage2D(3553,Pe,He,oe.width,oe.height,0,oe.data):console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()\"):t.texImage2D(3553,Pe,He,oe.width,oe.height,0,Ke,Ee,oe.data);ce.__maxMipLevel=ze.length-1}else if(fe.isDataTexture2DArray)t.texImage3D(35866,0,He,ft.width,ft.height,ft.depth,0,Ke,Ee,ft.data),ce.__maxMipLevel=0;else if(fe.isDataTexture3D)t.texImage3D(32879,0,He,ft.width,ft.height,ft.depth,0,Ke,Ee,ft.data),ce.__maxMipLevel=0;else if(ze.length>0&&mt){for(let Pe=0,tt=ze.length;Pe<tt;Pe++)oe=ze[Pe],t.texImage2D(3553,Pe,He,Ke,Ee,oe);fe.generateMipmaps=!1,ce.__maxMipLevel=ze.length-1}else t.texImage2D(3553,0,He,Ke,Ee,ft),ce.__maxMipLevel=0;R(fe,mt)&&F(Xe,fe,ft.width,ft.height),ce.__version=fe.version,fe.onUpdate&&fe.onUpdate(fe)}function Ge(ce,fe,Qe,Xe,je){const ft=o.convert(Qe.format),mt=o.convert(Qe.type),Ke=U(Qe.internalFormat,ft,mt);je===32879||je===35866?t.texImage3D(je,0,Ke,fe.width,fe.height,fe.depth,0,ft,mt,null):t.texImage2D(je,0,Ke,fe.width,fe.height,0,ft,mt,null),t.bindFramebuffer(36160,ce),i.framebufferTexture2D(36160,Xe,je,n.get(Qe).__webglTexture,0),t.bindFramebuffer(36160,null)}function Ae(ce,fe,Qe){if(i.bindRenderbuffer(36161,ce),fe.depthBuffer&&!fe.stencilBuffer){let Xe=33189;if(Qe){const je=fe.depthTexture;je&&je.isDepthTexture&&(je.type===Oo?Xe=36012:je.type===Sl&&(Xe=33190));const ft=Ze(fe);i.renderbufferStorageMultisample(36161,ft,Xe,fe.width,fe.height)}else i.renderbufferStorage(36161,Xe,fe.width,fe.height);i.framebufferRenderbuffer(36160,36096,36161,ce)}else if(fe.depthBuffer&&fe.stencilBuffer){if(Qe){const Xe=Ze(fe);i.renderbufferStorageMultisample(36161,Xe,35056,fe.width,fe.height)}else i.renderbufferStorage(36161,34041,fe.width,fe.height);i.framebufferRenderbuffer(36160,33306,36161,ce)}else{const Xe=fe.isWebGLMultipleRenderTargets===!0?fe.texture[0]:fe.texture,je=o.convert(Xe.format),ft=o.convert(Xe.type),mt=U(Xe.internalFormat,je,ft);if(Qe){const Ke=Ze(fe);i.renderbufferStorageMultisample(36161,Ke,mt,fe.width,fe.height)}else i.renderbufferStorage(36161,mt,fe.width,fe.height)}i.bindRenderbuffer(36161,null)}function Re(ce){const fe=n.get(ce),Qe=ce.isWebGLCubeRenderTarget===!0;if(ce.depthTexture){if(Qe)throw new Error(\"target.depthTexture not supported in Cube render targets\");(function(Xe,je){if(je&&je.isWebGLCubeRenderTarget)throw new Error(\"Depth Texture with cube render targets is not supported\");if(t.bindFramebuffer(36160,Xe),!je.depthTexture||!je.depthTexture.isDepthTexture)throw new Error(\"renderTarget.depthTexture must be an instance of THREE.DepthTexture\");n.get(je.depthTexture).__webglTexture&&je.depthTexture.image.width===je.width&&je.depthTexture.image.height===je.height||(je.depthTexture.image.width=je.width,je.depthTexture.image.height=je.height,je.depthTexture.needsUpdate=!0),ge(je.depthTexture,0);const ft=n.get(je.depthTexture).__webglTexture;if(je.depthTexture.format===fs)i.framebufferTexture2D(36160,36096,3553,ft,0);else{if(je.depthTexture.format!==mo)throw new Error(\"Unknown depthTexture format\");i.framebufferTexture2D(36160,33306,3553,ft,0)}})(fe.__webglFramebuffer,ce)}else if(Qe){fe.__webglDepthbuffer=[];for(let Xe=0;Xe<6;Xe++)t.bindFramebuffer(36160,fe.__webglFramebuffer[Xe]),fe.__webglDepthbuffer[Xe]=i.createRenderbuffer(),Ae(fe.__webglDepthbuffer[Xe],ce,!1)}else t.bindFramebuffer(36160,fe.__webglFramebuffer),fe.__webglDepthbuffer=i.createRenderbuffer(),Ae(fe.__webglDepthbuffer,ce,!1);t.bindFramebuffer(36160,null)}function Ze(ce){return a&&ce.isWebGLMultisampleRenderTarget?Math.min(d,ce.samples):0}let lt=!1,dt=!1;this.allocateTextureUnit=function(){const ce=W;return ce>=l&&console.warn(\"THREE.WebGLTextures: Trying to use \"+ce+\" texture units while this GPU supports only \"+l),W+=1,ce},this.resetTextureUnits=function(){W=0},this.setTexture2D=ge,this.setTexture2DArray=function(ce,fe){const Qe=n.get(ce);ce.version>0&&Qe.__version!==ce.version?We(Qe,ce,fe):(t.activeTexture(33984+fe),t.bindTexture(35866,Qe.__webglTexture))},this.setTexture3D=function(ce,fe){const Qe=n.get(ce);ce.version>0&&Qe.__version!==ce.version?We(Qe,ce,fe):(t.activeTexture(33984+fe),t.bindTexture(32879,Qe.__webglTexture))},this.setTextureCube=he,this.setupRenderTarget=function(ce){const fe=ce.texture,Qe=n.get(ce),Xe=n.get(fe);ce.addEventListener(\"dispose\",G),ce.isWebGLMultipleRenderTargets!==!0&&(Xe.__webglTexture=i.createTexture(),Xe.__version=fe.version,s.memory.textures++);const je=ce.isWebGLCubeRenderTarget===!0,ft=ce.isWebGLMultipleRenderTargets===!0,mt=ce.isWebGLMultisampleRenderTarget===!0,Ke=fe.isDataTexture3D||fe.isDataTexture2DArray,oe=w(ce)||a;if(!a||fe.format!==Lo||fe.type!==Oo&&fe.type!==qs||(fe.format=Tr,console.warn(\"THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.\")),je){Qe.__webglFramebuffer=[];for(let Ee=0;Ee<6;Ee++)Qe.__webglFramebuffer[Ee]=i.createFramebuffer()}else if(Qe.__webglFramebuffer=i.createFramebuffer(),ft)if(r.drawBuffers){const Ee=ce.texture;for(let He=0,ze=Ee.length;He<ze;He++){const Pe=n.get(Ee[He]);Pe.__webglTexture===void 0&&(Pe.__webglTexture=i.createTexture(),s.memory.textures++)}}else console.warn(\"THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.\");else if(mt)if(a){Qe.__webglMultisampledFramebuffer=i.createFramebuffer(),Qe.__webglColorRenderbuffer=i.createRenderbuffer(),i.bindRenderbuffer(36161,Qe.__webglColorRenderbuffer);const Ee=o.convert(fe.format),He=o.convert(fe.type),ze=U(fe.internalFormat,Ee,He),Pe=Ze(ce);i.renderbufferStorageMultisample(36161,Pe,ze,ce.width,ce.height),t.bindFramebuffer(36160,Qe.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064,36161,Qe.__webglColorRenderbuffer),i.bindRenderbuffer(36161,null),ce.depthBuffer&&(Qe.__webglDepthRenderbuffer=i.createRenderbuffer(),Ae(Qe.__webglDepthRenderbuffer,ce,!0)),t.bindFramebuffer(36160,null)}else console.warn(\"THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.\");if(je){t.bindTexture(34067,Xe.__webglTexture),ue(34067,fe,oe);for(let Ee=0;Ee<6;Ee++)Ge(Qe.__webglFramebuffer[Ee],ce,fe,36064,34069+Ee);R(fe,oe)&&F(34067,fe,ce.width,ce.height),t.bindTexture(34067,null)}else if(ft){const Ee=ce.texture;for(let He=0,ze=Ee.length;He<ze;He++){const Pe=Ee[He],tt=n.get(Pe);t.bindTexture(3553,tt.__webglTexture),ue(3553,Pe,oe),Ge(Qe.__webglFramebuffer,ce,Pe,36064+He,3553),R(Pe,oe)&&F(3553,Pe,ce.width,ce.height)}t.bindTexture(3553,null)}else{let Ee=3553;Ke&&(a?Ee=fe.isDataTexture3D?32879:35866:console.warn(\"THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.\")),t.bindTexture(Ee,Xe.__webglTexture),ue(Ee,fe,oe),Ge(Qe.__webglFramebuffer,ce,fe,36064,Ee),R(fe,oe)&&F(Ee,fe,ce.width,ce.height,ce.depth),t.bindTexture(Ee,null)}ce.depthBuffer&&Re(ce)},this.updateRenderTargetMipmap=function(ce){const fe=w(ce)||a,Qe=ce.isWebGLMultipleRenderTargets===!0?ce.texture:[ce.texture];for(let Xe=0,je=Qe.length;Xe<je;Xe++){const ft=Qe[Xe];if(R(ft,fe)){const mt=ce.isWebGLCubeRenderTarget?34067:3553,Ke=n.get(ft).__webglTexture;t.bindTexture(mt,Ke),F(mt,ft,ce.width,ce.height),t.bindTexture(mt,null)}}},this.updateMultisampleRenderTarget=function(ce){if(ce.isWebGLMultisampleRenderTarget)if(a){const fe=ce.width,Qe=ce.height;let Xe=16384;ce.depthBuffer&&(Xe|=256),ce.stencilBuffer&&(Xe|=1024);const je=n.get(ce);t.bindFramebuffer(36008,je.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,je.__webglFramebuffer),i.blitFramebuffer(0,0,fe,Qe,0,0,fe,Qe,Xe,9728),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,je.__webglMultisampledFramebuffer)}else console.warn(\"THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.\")},this.safeSetTexture2D=function(ce,fe){ce&&ce.isWebGLRenderTarget&&(lt===!1&&(console.warn(\"THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead.\"),lt=!0),ce=ce.texture),ge(ce,fe)},this.safeSetTextureCube=function(ce,fe){ce&&ce.isWebGLCubeRenderTarget&&(dt===!1&&(console.warn(\"THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead.\"),dt=!0),ce=ce.texture),he(ce,fe)}}function Yf(i,e,t){const n=t.isWebGL2;return{convert:function(r){let o;if(r===Xs)return 5121;if(r===Zp)return 32819;if(r===Kp)return 32820;if(r===Wn)return 33635;if(r===$p)return 5120;if(r===Jp)return 5122;if(r===wl)return 5123;if(r===Hu)return 5124;if(r===Sl)return 5125;if(r===Oo)return 5126;if(r===qs)return n?5131:(o=e.get(\"OES_texture_half_float\"),o!==null?o.HALF_FLOAT_OES:null);if(r===Qp)return 6406;if(r===Lo)return 6407;if(r===Tr)return 6408;if(r===Xc)return 6409;if(r===ef)return 6410;if(r===fs)return 6402;if(r===mo)return 34041;if(r===qc)return 6403;if(r===zu)return 36244;if(r===Er)return 33319;if(r===Yc)return 33320;if(r===$c)return 36248;if(r===Jc)return 36249;if(r===ju||r===Vu||r===Wu||r===er){if(o=e.get(\"WEBGL_compressed_texture_s3tc\"),o===null)return null;if(r===ju)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===Vu)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Wu)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===er)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(r===Zc||r===ur||r===Kc||r===Xu){if(o=e.get(\"WEBGL_compressed_texture_pvrtc\"),o===null)return null;if(r===Zc)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===ur)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===Kc)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===Xu)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(r===No)return o=e.get(\"WEBGL_compressed_texture_etc1\"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if((r===Ga||r===Tl)&&(o=e.get(\"WEBGL_compressed_texture_etc\"),o!==null)){if(r===Ga)return o.COMPRESSED_RGB8_ETC2;if(r===Tl)return o.COMPRESSED_RGBA8_ETC2_EAC}return r===Yn||r===Do||r===qu||r===tf||r===Yu||r===nf||r===Qc||r===El||r===Ys||r===rf||r===ed||r===td||r===$u||r===Ju||r===Zu||r===Ku||r===id||r===hr||r===Qu||r===Ha||r===rd||r===od||r===of||r===sf||r===af||r===lf||r===$s||r===eh?(o=e.get(\"WEBGL_compressed_texture_astc\"),o!==null?r:null):r===nd?(o=e.get(\"EXT_texture_compression_bptc\"),o!==null?r:null):r===On?n?34042:(o=e.get(\"WEBGL_depth_texture\"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}class kd extends ci{constructor(e=[]){super(),this.cameras=e}}kd.prototype.isArrayCamera=!0;class Ko extends yn{constructor(){super(),this.type=\"Group\"}}Ko.prototype.isGroup=!0;const Ud={type:\"move\"};class Gd{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ko,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ko,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new re,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new re),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ko,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new re,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new re),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:\"disconnected\",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,o=null,s=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!==\"visible-blurred\")if(a!==null&&(r=t.getPose(e.targetRaySpace,n),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Ud))),u&&e.hand){s=!0;for(const _ of e.hand.values()){const y=t.getJointPose(_,n);if(u.joints[_.jointName]===void 0){const R=new Ko;R.matrixAutoUpdate=!1,R.visible=!1,u.joints[_.jointName]=R,u.add(R)}const w=u.joints[_.jointName];y!==null&&(w.matrix.fromArray(y.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),w.jointRadius=y.radius),w.visible=y!==null}const h=u.joints[\"index-finger-tip\"],d=u.joints[\"thumb-tip\"],p=h.position.distanceTo(d.position),m=.02,g=.005;u.inputState.pinching&&p>m+g?(u.inputState.pinching=!1,this.dispatchEvent({type:\"pinchend\",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=m-g&&(u.inputState.pinching=!0,this.dispatchEvent({type:\"pinchstart\",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,n),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=o!==null),u!==null&&(u.visible=s!==null),this}}class _v extends ys{constructor(e,t){super();const n=this,r=e.state;let o=null,s=1,a=null,l=\"local-floor\",u=null,h=null,d=null,p=null;const m=[],g=new Map,_=new ci;_.layers.enable(1),_.viewport=new Un;const y=new ci;y.layers.enable(2),y.viewport=new Un;const w=[_,y],R=new kd;R.layers.enable(1),R.layers.enable(2);let F=null,U=null;function B(ue){const xe=g.get(ue.inputSource);xe&&xe.dispatchEvent({type:ue.type,data:ue.inputSource})}function V(){g.forEach(function(ue,xe){ue.disconnect(xe)}),g.clear(),F=null,U=null,r.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),de.stop(),n.isPresenting=!1,n.dispatchEvent({type:\"sessionend\"})}function G(ue){const xe=o.inputSources;for(let We=0;We<m.length;We++)g.set(xe[We],m[We]);for(let We=0;We<ue.removed.length;We++){const Ge=ue.removed[We],Ae=g.get(Ge);Ae&&(Ae.dispatchEvent({type:\"disconnected\",data:Ge}),g.delete(Ge))}for(let We=0;We<ue.added.length;We++){const Ge=ue.added[We],Ae=g.get(Ge);Ae&&Ae.dispatchEvent({type:\"connected\",data:Ge})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ue){let xe=m[ue];return xe===void 0&&(xe=new Gd,m[ue]=xe),xe.getTargetRaySpace()},this.getControllerGrip=function(ue){let xe=m[ue];return xe===void 0&&(xe=new Gd,m[ue]=xe),xe.getGripSpace()},this.getHand=function(ue){let xe=m[ue];return xe===void 0&&(xe=new Gd,m[ue]=xe),xe.getHandSpace()},this.setFramebufferScaleFactor=function(ue){s=ue,n.isPresenting===!0&&console.warn(\"THREE.WebXRManager: Cannot change framebuffer scale while presenting.\")},this.setReferenceSpaceType=function(ue){l=ue,n.isPresenting===!0&&console.warn(\"THREE.WebXRManager: Cannot change reference space type while presenting.\")},this.getReferenceSpace=function(){return a},this.getSession=function(){return o},this.setSession=async function(ue){if(o=ue,o!==null){o.addEventListener(\"select\",B),o.addEventListener(\"selectstart\",B),o.addEventListener(\"selectend\",B),o.addEventListener(\"squeeze\",B),o.addEventListener(\"squeezestart\",B),o.addEventListener(\"squeezeend\",B),o.addEventListener(\"end\",V),o.addEventListener(\"inputsourceschange\",G);const xe=t.getContextAttributes();if(xe.xrCompatible!==!0&&await t.makeXRCompatible(),o.renderState.layers===void 0){const We={antialias:xe.antialias,alpha:xe.alpha,depth:xe.depth,stencil:xe.stencil,framebufferScaleFactor:s},Ge=new XRWebGLLayer(o,t,We);o.updateRenderState({baseLayer:Ge})}else{let We=0;xe.depth&&(We=xe.stencil?34041:6402);const Ge={colorFormat:xe.alpha?6408:6407,depthFormat:We,scaleFactor:s};h=new XRWebGLBinding(o,t),p=h.createProjectionLayer(Ge),d=t.createFramebuffer(),o.updateRenderState({layers:[p]})}a=await o.requestReferenceSpace(l),de.setContext(o),de.start(),n.isPresenting=!0,n.dispatchEvent({type:\"sessionstart\"})}};const W=new re,ge=new re;function he(ue,xe){xe===null?ue.matrixWorld.copy(ue.matrix):ue.matrixWorld.multiplyMatrices(xe.matrixWorld,ue.matrix),ue.matrixWorldInverse.copy(ue.matrixWorld).invert()}this.updateCamera=function(ue){if(o===null)return;R.near=y.near=_.near=ue.near,R.far=y.far=_.far=ue.far,F===R.near&&U===R.far||(o.updateRenderState({depthNear:R.near,depthFar:R.far}),F=R.near,U=R.far);const xe=ue.parent,We=R.cameras;he(R,xe);for(let Ae=0;Ae<We.length;Ae++)he(We[Ae],xe);R.matrixWorld.decompose(R.position,R.quaternion,R.scale),ue.position.copy(R.position),ue.quaternion.copy(R.quaternion),ue.scale.copy(R.scale),ue.matrix.copy(R.matrix),ue.matrixWorld.copy(R.matrixWorld);const Ge=ue.children;for(let Ae=0,Re=Ge.length;Ae<Re;Ae++)Ge[Ae].updateMatrixWorld(!0);We.length===2?function(Ae,Re,Ze){W.setFromMatrixPosition(Re.matrixWorld),ge.setFromMatrixPosition(Ze.matrixWorld);const lt=W.distanceTo(ge),dt=Re.projectionMatrix.elements,ce=Ze.projectionMatrix.elements,fe=dt[14]/(dt[10]-1),Qe=dt[14]/(dt[10]+1),Xe=(dt[9]+1)/dt[5],je=(dt[9]-1)/dt[5],ft=(dt[8]-1)/dt[0],mt=(ce[8]+1)/ce[0],Ke=fe*ft,oe=fe*mt,Ee=lt/(-ft+mt),He=Ee*-ft;Re.matrixWorld.decompose(Ae.position,Ae.quaternion,Ae.scale),Ae.translateX(He),Ae.translateZ(Ee),Ae.matrixWorld.compose(Ae.position,Ae.quaternion,Ae.scale),Ae.matrixWorldInverse.copy(Ae.matrixWorld).invert();const ze=fe+Ee,Pe=Qe+Ee,tt=Ke-He,It=oe+(lt-He),Nt=Xe*Qe/Pe*ze,Ot=je*Qe/Pe*ze;Ae.projectionMatrix.makePerspective(tt,It,Nt,Ot,ze,Pe)}(R,_,y):R.projectionMatrix.copy(_.projectionMatrix)},this.getCamera=function(){return R};let se=null;const de=new _f;de.setAnimationLoop(function(ue,xe){if(u=xe.getViewerPose(a),u!==null){const Ge=u.views,Ae=o.renderState.baseLayer;o.renderState.layers===void 0&&r.bindXRFramebuffer(Ae.framebuffer);let Re=!1;Ge.length!==R.cameras.length&&(R.cameras.length=0,Re=!0);for(let Ze=0;Ze<Ge.length;Ze++){const lt=Ge[Ze];let dt=null;if(o.renderState.layers===void 0)dt=Ae.getViewport(lt);else{const fe=h.getViewSubImage(p,lt);r.bindXRFramebuffer(d),t.framebufferTexture2D(36160,36064,3553,fe.colorTexture,0),fe.depthStencilTexture!==void 0&&t.framebufferTexture2D(36160,36096,3553,fe.depthStencilTexture,0),dt=fe.viewport}const ce=w[Ze];ce.matrix.fromArray(lt.transform.matrix),ce.projectionMatrix.fromArray(lt.projectionMatrix),ce.viewport.set(dt.x,dt.y,dt.width,dt.height),Ze===0&&R.matrix.copy(ce.matrix),Re===!0&&R.cameras.push(ce)}}const We=o.inputSources;for(let Ge=0;Ge<m.length;Ge++){const Ae=m[Ge],Re=We[Ge];Ae.update(Re,xe,a)}se&&se(ue,xe)}),this.setAnimationLoop=function(ue){se=ue},this.dispose=function(){}}}function yv(i){function e(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.specularMap&&(n.specularMap.value=r.specularMap);const o=i.get(r).envMap;if(o){n.envMap.value=o,n.flipEnvMap.value=o.isCubeTexture&&o._needsFlipEnvMap?-1:1,n.reflectivity.value=r.reflectivity,n.refractionRatio.value=r.refractionRatio;const l=i.get(o).__maxMipLevel;l!==void 0&&(n.maxMipLevel.value=l)}let s,a;r.lightMap&&(n.lightMap.value=r.lightMap,n.lightMapIntensity.value=r.lightMapIntensity),r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity),r.map?s=r.map:r.specularMap?s=r.specularMap:r.displacementMap?s=r.displacementMap:r.normalMap?s=r.normalMap:r.bumpMap?s=r.bumpMap:r.roughnessMap?s=r.roughnessMap:r.metalnessMap?s=r.metalnessMap:r.alphaMap?s=r.alphaMap:r.emissiveMap?s=r.emissiveMap:r.clearcoatMap?s=r.clearcoatMap:r.clearcoatNormalMap?s=r.clearcoatNormalMap:r.clearcoatRoughnessMap&&(s=r.clearcoatRoughnessMap),s!==void 0&&(s.isWebGLRenderTarget&&(s=s.texture),s.matrixAutoUpdate===!0&&s.updateMatrix(),n.uvTransform.value.copy(s.matrix)),r.aoMap?a=r.aoMap:r.lightMap&&(a=r.lightMap),a!==void 0&&(a.isWebGLRenderTarget&&(a=a.texture),a.matrixAutoUpdate===!0&&a.updateMatrix(),n.uv2Transform.value.copy(a.matrix))}function t(n,r){n.roughness.value=r.roughness,n.metalness.value=r.metalness,r.roughnessMap&&(n.roughnessMap.value=r.roughnessMap),r.metalnessMap&&(n.metalnessMap.value=r.metalnessMap),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap),r.bumpMap&&(n.bumpMap.value=r.bumpMap,n.bumpScale.value=r.bumpScale,r.side===ne&&(n.bumpScale.value*=-1)),r.normalMap&&(n.normalMap.value=r.normalMap,n.normalScale.value.copy(r.normalScale),r.side===ne&&n.normalScale.value.negate()),r.displacementMap&&(n.displacementMap.value=r.displacementMap,n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),i.get(r).envMap&&(n.envMapIntensity.value=r.envMapIntensity)}return{refreshFogUniforms:function(n,r){n.fogColor.value.copy(r.color),r.isFog?(n.fogNear.value=r.near,n.fogFar.value=r.far):r.isFogExp2&&(n.fogDensity.value=r.density)},refreshMaterialUniforms:function(n,r,o,s,a){r.isMeshBasicMaterial?e(n,r):r.isMeshLambertMaterial?(e(n,r),function(l,u){u.emissiveMap&&(l.emissiveMap.value=u.emissiveMap)}(n,r)):r.isMeshToonMaterial?(e(n,r),function(l,u){u.gradientMap&&(l.gradientMap.value=u.gradientMap),u.emissiveMap&&(l.emissiveMap.value=u.emissiveMap),u.bumpMap&&(l.bumpMap.value=u.bumpMap,l.bumpScale.value=u.bumpScale,u.side===ne&&(l.bumpScale.value*=-1)),u.normalMap&&(l.normalMap.value=u.normalMap,l.normalScale.value.copy(u.normalScale),u.side===ne&&l.normalScale.value.negate()),u.displacementMap&&(l.displacementMap.value=u.displacementMap,l.displacementScale.value=u.displacementScale,l.displacementBias.value=u.displacementBias)}(n,r)):r.isMeshPhongMaterial?(e(n,r),function(l,u){l.specular.value.copy(u.specular),l.shininess.value=Math.max(u.shininess,1e-4),u.emissiveMap&&(l.emissiveMap.value=u.emissiveMap),u.bumpMap&&(l.bumpMap.value=u.bumpMap,l.bumpScale.value=u.bumpScale,u.side===ne&&(l.bumpScale.value*=-1)),u.normalMap&&(l.normalMap.value=u.normalMap,l.normalScale.value.copy(u.normalScale),u.side===ne&&l.normalScale.value.negate()),u.displacementMap&&(l.displacementMap.value=u.displacementMap,l.displacementScale.value=u.displacementScale,l.displacementBias.value=u.displacementBias)}(n,r)):r.isMeshStandardMaterial?(e(n,r),r.isMeshPhysicalMaterial?function(l,u,h){t(l,u),l.reflectivity.value=u.reflectivity,l.clearcoat.value=u.clearcoat,l.clearcoatRoughness.value=u.clearcoatRoughness,u.sheen&&l.sheen.value.copy(u.sheen),u.clearcoatMap&&(l.clearcoatMap.value=u.clearcoatMap),u.clearcoatRoughnessMap&&(l.clearcoatRoughnessMap.value=u.clearcoatRoughnessMap),u.clearcoatNormalMap&&(l.clearcoatNormalScale.value.copy(u.clearcoatNormalScale),l.clearcoatNormalMap.value=u.clearcoatNormalMap,u.side===ne&&l.clearcoatNormalScale.value.negate()),l.transmission.value=u.transmission,u.transmissionMap&&(l.transmissionMap.value=u.transmissionMap),u.transmission>0&&(l.transmissionSamplerMap.value=h.texture,l.transmissionSamplerSize.value.set(h.width,h.height)),l.thickness.value=u.thickness,u.thicknessMap&&(l.thicknessMap.value=u.thicknessMap),l.attenuationDistance.value=u.attenuationDistance,l.attenuationColor.value.copy(u.attenuationColor)}(n,r,a):t(n,r)):r.isMeshMatcapMaterial?(e(n,r),function(l,u){u.matcap&&(l.matcap.value=u.matcap),u.bumpMap&&(l.bumpMap.value=u.bumpMap,l.bumpScale.value=u.bumpScale,u.side===ne&&(l.bumpScale.value*=-1)),u.normalMap&&(l.normalMap.value=u.normalMap,l.normalScale.value.copy(u.normalScale),u.side===ne&&l.normalScale.value.negate()),u.displacementMap&&(l.displacementMap.value=u.displacementMap,l.displacementScale.value=u.displacementScale,l.displacementBias.value=u.displacementBias)}(n,r)):r.isMeshDepthMaterial?(e(n,r),function(l,u){u.displacementMap&&(l.displacementMap.value=u.displacementMap,l.displacementScale.value=u.displacementScale,l.displacementBias.value=u.displacementBias)}(n,r)):r.isMeshDistanceMaterial?(e(n,r),function(l,u){u.displacementMap&&(l.displacementMap.value=u.displacementMap,l.displacementScale.value=u.displacementScale,l.displacementBias.value=u.displacementBias),l.referencePosition.value.copy(u.referencePosition),l.nearDistance.value=u.nearDistance,l.farDistance.value=u.farDistance}(n,r)):r.isMeshNormalMaterial?(e(n,r),function(l,u){u.bumpMap&&(l.bumpMap.value=u.bumpMap,l.bumpScale.value=u.bumpScale,u.side===ne&&(l.bumpScale.value*=-1)),u.normalMap&&(l.normalMap.value=u.normalMap,l.normalScale.value.copy(u.normalScale),u.side===ne&&l.normalScale.value.negate()),u.displacementMap&&(l.displacementMap.value=u.displacementMap,l.displacementScale.value=u.displacementScale,l.displacementBias.value=u.displacementBias)}(n,r)):r.isLineBasicMaterial?(function(l,u){l.diffuse.value.copy(u.color),l.opacity.value=u.opacity}(n,r),r.isLineDashedMaterial&&function(l,u){l.dashSize.value=u.dashSize,l.totalSize.value=u.dashSize+u.gapSize,l.scale.value=u.scale}(n,r)):r.isPointsMaterial?function(l,u,h,d){l.diffuse.value.copy(u.color),l.opacity.value=u.opacity,l.size.value=u.size*h,l.scale.value=.5*d,u.map&&(l.map.value=u.map),u.alphaMap&&(l.alphaMap.value=u.alphaMap);let p;u.map?p=u.map:u.alphaMap&&(p=u.alphaMap),p!==void 0&&(p.matrixAutoUpdate===!0&&p.updateMatrix(),l.uvTransform.value.copy(p.matrix))}(n,r,o,s):r.isSpriteMaterial?function(l,u){l.diffuse.value.copy(u.color),l.opacity.value=u.opacity,l.rotation.value=u.rotation,u.map&&(l.map.value=u.map),u.alphaMap&&(l.alphaMap.value=u.alphaMap);let h;u.map?h=u.map:u.alphaMap&&(h=u.alphaMap),h!==void 0&&(h.matrixAutoUpdate===!0&&h.updateMatrix(),l.uvTransform.value.copy(h.matrix))}(n,r):r.isShadowMaterial?(n.color.value.copy(r.color),n.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function on(i={}){const e=i.canvas!==void 0?i.canvas:function(){const _e=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\");return _e.style.display=\"block\",_e}(),t=i.context!==void 0?i.context:null,n=i.alpha!==void 0&&i.alpha,r=i.depth===void 0||i.depth,o=i.stencil===void 0||i.stencil,s=i.antialias!==void 0&&i.antialias,a=i.premultipliedAlpha===void 0||i.premultipliedAlpha,l=i.preserveDrawingBuffer!==void 0&&i.preserveDrawingBuffer,u=i.powerPreference!==void 0?i.powerPreference:\"default\",h=i.failIfMajorPerformanceCaveat!==void 0&&i.failIfMajorPerformanceCaveat;let d=null,p=null;const m=[],g=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=tn,this.physicallyCorrectLights=!1,this.toneMapping=T,this.toneMappingExposure=1;const _=this;let y=!1,w=0,R=0,F=null,U=-1,B=null;const V=new Un,G=new Un;let W=null,ge=e.width,he=e.height,se=1,de=null,ue=null;const xe=new Un(0,0,ge,he),We=new Un(0,0,ge,he);let Ge=!1;const Ae=[],Re=new Ja;let Ze=!1,lt=!1,dt=null;const ce=new Ut,fe=new re,Qe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Xe(){return F===null?se:1}let je,ft,mt,Ke,oe,Ee,He,ze,Pe,tt,It,Nt,Ot,pn,Mi,zn,qr,Dp,Fp,Bp,Br,Yr,yt=t;function FS(_e,ot){for(let Ye=0;Ye<_e.length;Ye++){const st=_e[Ye],St=e.getContext(st,ot);if(St!==null)return St}return null}try{const _e={alpha:n,depth:r,stencil:o,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:h};if(e.addEventListener(\"webglcontextlost\",kS,!1),e.addEventListener(\"webglcontextrestored\",US,!1),yt===null){const ot=[\"webgl2\",\"webgl\",\"experimental-webgl\"];if(_.isWebGL1Renderer===!0&&ot.shift(),yt=FS(ot,_e),yt===null)throw FS(ot)?new Error(\"Error creating WebGL context with your selected attributes.\"):new Error(\"Error creating WebGL context.\")}yt.getShaderPrecisionFormat===void 0&&(yt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(_e){throw console.error(\"THREE.WebGLRenderer: \"+_e.message),_e}function BS(){je=new Ed(yt),ft=new bf(yt,je,i),je.init(ft),Br=new Yf(yt,je,ft),mt=new gv(yt,je,ft),Ae[0]=1029,Ke=new Md(yt),oe=new Or,Ee=new vv(yt,je,mt,oe,ft,Br,Ke),He=new Vg(_),ze=new Yo(yt,ft),Yr=new yf(yt,je,ze,ft),Pe=new Sf(yt,ze,Ke,Yr),tt=new Mf(yt,Pe,ze,Ke),Dp=new Ph(yt),Mi=new wf(oe),It=new Uh(_,He,je,ft,Yr,Mi),Nt=new yv(oe),Ot=new Xf(oe),pn=new Dn(je,ft),qr=new Vl(_,He,mt,tt,a),zn=new Zl(_,tt,ft),Fp=new xf(yt,je,Ke,ft),Bp=new Wl(yt,je,Ke,ft),Ke.programs=It.programs,_.capabilities=ft,_.extensions=je,_.properties=oe,_.renderLists=Ot,_.shadowMap=zn,_.state=mt,_.info=Ke}BS();const lo=new _v(_,yt);function kS(_e){_e.preventDefault(),console.log(\"THREE.WebGLRenderer: Context Lost.\"),y=!0}function US(){console.log(\"THREE.WebGLRenderer: Context Restored.\"),y=!1;const _e=Ke.autoReset,ot=zn.enabled,Ye=zn.autoUpdate,st=zn.needsUpdate,St=zn.type;BS(),Ke.autoReset=_e,zn.enabled=ot,zn.autoUpdate=Ye,zn.needsUpdate=st,zn.type=St}function GS(_e){const ot=_e.target;ot.removeEventListener(\"dispose\",GS),function(Ye){(function(st){const St=oe.get(st).programs;St!==void 0&&St.forEach(function(Pn){It.releaseProgram(Pn)})})(Ye),oe.remove(Ye)}(ot)}this.xr=lo,this.getContext=function(){return yt},this.getContextAttributes=function(){return yt.getContextAttributes()},this.forceContextLoss=function(){const _e=je.get(\"WEBGL_lose_context\");_e&&_e.loseContext()},this.forceContextRestore=function(){const _e=je.get(\"WEBGL_lose_context\");_e&&_e.restoreContext()},this.getPixelRatio=function(){return se},this.setPixelRatio=function(_e){_e!==void 0&&(se=_e,this.setSize(ge,he,!1))},this.getSize=function(_e){return _e.set(ge,he)},this.setSize=function(_e,ot,Ye){lo.isPresenting?console.warn(\"THREE.WebGLRenderer: Can't change size while VR device is presenting.\"):(ge=_e,he=ot,e.width=Math.floor(_e*se),e.height=Math.floor(ot*se),Ye!==!1&&(e.style.width=_e+\"px\",e.style.height=ot+\"px\"),this.setViewport(0,0,_e,ot))},this.getDrawingBufferSize=function(_e){return _e.set(ge*se,he*se).floor()},this.setDrawingBufferSize=function(_e,ot,Ye){ge=_e,he=ot,se=Ye,e.width=Math.floor(_e*Ye),e.height=Math.floor(ot*Ye),this.setViewport(0,0,_e,ot)},this.getCurrentViewport=function(_e){return _e.copy(V)},this.getViewport=function(_e){return _e.copy(xe)},this.setViewport=function(_e,ot,Ye,st){_e.isVector4?xe.set(_e.x,_e.y,_e.z,_e.w):xe.set(_e,ot,Ye,st),mt.viewport(V.copy(xe).multiplyScalar(se).floor())},this.getScissor=function(_e){return _e.copy(We)},this.setScissor=function(_e,ot,Ye,st){_e.isVector4?We.set(_e.x,_e.y,_e.z,_e.w):We.set(_e,ot,Ye,st),mt.scissor(G.copy(We).multiplyScalar(se).floor())},this.getScissorTest=function(){return Ge},this.setScissorTest=function(_e){mt.setScissorTest(Ge=_e)},this.setOpaqueSort=function(_e){de=_e},this.setTransparentSort=function(_e){ue=_e},this.getClearColor=function(_e){return _e.copy(qr.getClearColor())},this.setClearColor=function(){qr.setClearColor.apply(qr,arguments)},this.getClearAlpha=function(){return qr.getClearAlpha()},this.setClearAlpha=function(){qr.setClearAlpha.apply(qr,arguments)},this.clear=function(_e,ot,Ye){let st=0;(_e===void 0||_e)&&(st|=16384),(ot===void 0||ot)&&(st|=256),(Ye===void 0||Ye)&&(st|=1024),yt.clear(st)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener(\"webglcontextlost\",kS,!1),e.removeEventListener(\"webglcontextrestored\",US,!1),Ot.dispose(),pn.dispose(),oe.dispose(),He.dispose(),tt.dispose(),Yr.dispose(),lo.dispose(),lo.removeEventListener(\"sessionstart\",HS),lo.removeEventListener(\"sessionend\",zS),dt&&(dt.dispose(),dt=null),Bu.stop()},this.renderBufferImmediate=function(_e,ot){Yr.initAttributes();const Ye=oe.get(_e);_e.hasPositions&&!Ye.position&&(Ye.position=yt.createBuffer()),_e.hasNormals&&!Ye.normal&&(Ye.normal=yt.createBuffer()),_e.hasUvs&&!Ye.uv&&(Ye.uv=yt.createBuffer()),_e.hasColors&&!Ye.color&&(Ye.color=yt.createBuffer());const st=ot.getAttributes();_e.hasPositions&&(yt.bindBuffer(34962,Ye.position),yt.bufferData(34962,_e.positionArray,35048),Yr.enableAttribute(st.position),yt.vertexAttribPointer(st.position,3,5126,!1,0,0)),_e.hasNormals&&(yt.bindBuffer(34962,Ye.normal),yt.bufferData(34962,_e.normalArray,35048),Yr.enableAttribute(st.normal),yt.vertexAttribPointer(st.normal,3,5126,!1,0,0)),_e.hasUvs&&(yt.bindBuffer(34962,Ye.uv),yt.bufferData(34962,_e.uvArray,35048),Yr.enableAttribute(st.uv),yt.vertexAttribPointer(st.uv,2,5126,!1,0,0)),_e.hasColors&&(yt.bindBuffer(34962,Ye.color),yt.bufferData(34962,_e.colorArray,35048),Yr.enableAttribute(st.color),yt.vertexAttribPointer(st.color,3,5126,!1,0,0)),Yr.disableUnusedAttributes(),yt.drawArrays(4,0,_e.count),_e.count=0},this.renderBufferDirect=function(_e,ot,Ye,st,St,Pn){ot===null&&(ot=Qe);const fn=St.isMesh&&St.matrixWorld.determinant()<0,At=WS(_e,ot,st,St);mt.setMaterial(st,fn);let bn=Ye.index;const Zt=Ye.attributes.position;if(bn===null){if(Zt===void 0||Zt.count===0)return}else if(bn.count===0)return;let En,an=1;st.wireframe===!0&&(bn=Pe.getWireframeAttribute(Ye),an=2),(st.morphTargets||st.morphNormals)&&Dp.update(St,Ye,st,At),Yr.setup(St,st,At,Ye,bn);let Sn=Fp;bn!==null&&(En=ze.get(bn),Sn=Bp,Sn.setIndex(En));const ji=bn!==null?bn.count:Zt.count,ri=Ye.drawRange.start*an,ds=Ye.drawRange.count*an,Zn=Pn!==null?Pn.start*an:0,js=Pn!==null?Pn.count*an:1/0,Xi=Math.max(ri,Zn),uo=Math.min(ji,ri+ds,Zn+js)-1,Sr=Math.max(0,uo-Xi+1);if(Sr!==0){if(St.isMesh)st.wireframe===!0?(mt.setLineWidth(st.wireframeLinewidth*Xe()),Sn.setMode(1)):Sn.setMode(4);else if(St.isLine){let kp=st.linewidth;kp===void 0&&(kp=1),mt.setLineWidth(kp*Xe()),St.isLineSegments?Sn.setMode(1):St.isLineLoop?Sn.setMode(2):Sn.setMode(3)}else St.isPoints?Sn.setMode(0):St.isSprite&&Sn.setMode(4);if(St.isInstancedMesh)Sn.renderInstances(Xi,Sr,St.count);else if(Ye.isInstancedBufferGeometry){const kp=Math.min(Ye.instanceCount,Ye._maxInstanceCount);Sn.renderInstances(Xi,Sr,kp)}else Sn.render(Xi,Sr)}},this.compile=function(_e,ot){p=pn.get(_e),p.init(),_e.traverseVisible(function(Ye){Ye.isLight&&Ye.layers.test(ot.layers)&&(p.pushLight(Ye),Ye.castShadow&&p.pushShadow(Ye))}),p.setupLights(),_e.traverse(function(Ye){const st=Ye.material;if(st)if(Array.isArray(st))for(let St=0;St<st.length;St++)G_(st[St],_e,Ye);else G_(st,_e,Ye)})};let U_=null;function HS(){Bu.stop()}function zS(){Bu.start()}const Bu=new _f;function Tg(_e,ot,Ye){const st=ot.isScene===!0?ot.overrideMaterial:null;for(let St=0,Pn=_e.length;St<Pn;St++){const fn=_e[St],At=fn.object,bn=fn.geometry,Zt=st===null?fn.material:st,En=fn.group;if(Ye.isArrayCamera){const an=Ye.cameras;for(let Sn=0,ji=an.length;Sn<ji;Sn++){const ri=an[Sn];At.layers.test(ri.layers)&&(mt.viewport(V.copy(ri.viewport)),p.setupLightsView(ri),jS(At,ot,ri,bn,Zt,En))}}else jS(At,ot,Ye,bn,Zt,En)}}function jS(_e,ot,Ye,st,St,Pn){if(_e.onBeforeRender(_,ot,Ye,st,St,Pn),_e.modelViewMatrix.multiplyMatrices(Ye.matrixWorldInverse,_e.matrixWorld),_e.normalMatrix.getNormalMatrix(_e.modelViewMatrix),_e.isImmediateRenderObject){const fn=WS(Ye,ot,St,_e);mt.setMaterial(St),Yr.reset(),function(At,bn){At.render(function(Zt){_.renderBufferImmediate(Zt,bn)})}(_e,fn)}else St.transparent===!0&&St.side===Ve?(St.side=ne,St.needsUpdate=!0,_.renderBufferDirect(Ye,ot,st,St,_e,Pn),St.side=X,St.needsUpdate=!0,_.renderBufferDirect(Ye,ot,st,St,_e,Pn),St.side=Ve):_.renderBufferDirect(Ye,ot,st,St,_e,Pn);_e.onAfterRender(_,ot,Ye,st,St,Pn)}function G_(_e,ot,Ye){ot.isScene!==!0&&(ot=Qe);const st=oe.get(_e),St=p.state.lights,Pn=p.state.shadowsArray,fn=St.state.version,At=It.getParameters(_e,St.state,Pn,ot,Ye),bn=It.getProgramCacheKey(At);let Zt=st.programs;st.environment=_e.isMeshStandardMaterial?ot.environment:null,st.fog=ot.fog,st.envMap=He.get(_e.envMap||st.environment),Zt===void 0&&(_e.addEventListener(\"dispose\",GS),Zt=new Map,st.programs=Zt);let En=Zt.get(bn);if(En!==void 0){if(st.currentProgram===En&&st.lightsStateVersion===fn)return VS(_e,At),En}else At.uniforms=It.getUniforms(_e),_e.onBuild(At,_),_e.onBeforeCompile(At,_),En=It.acquireProgram(At,bn),Zt.set(bn,En),st.uniforms=At.uniforms;const an=st.uniforms;(_e.isShaderMaterial||_e.isRawShaderMaterial)&&_e.clipping!==!0||(an.clippingPlanes=Mi.uniform),VS(_e,At),st.needsLights=function(ri){return ri.isMeshLambertMaterial||ri.isMeshToonMaterial||ri.isMeshPhongMaterial||ri.isMeshStandardMaterial||ri.isShadowMaterial||ri.isShaderMaterial&&ri.lights===!0}(_e),st.lightsStateVersion=fn,st.needsLights&&(an.ambientLightColor.value=St.state.ambient,an.lightProbe.value=St.state.probe,an.directionalLights.value=St.state.directional,an.directionalLightShadows.value=St.state.directionalShadow,an.spotLights.value=St.state.spot,an.spotLightShadows.value=St.state.spotShadow,an.rectAreaLights.value=St.state.rectArea,an.ltc_1.value=St.state.rectAreaLTC1,an.ltc_2.value=St.state.rectAreaLTC2,an.pointLights.value=St.state.point,an.pointLightShadows.value=St.state.pointShadow,an.hemisphereLights.value=St.state.hemi,an.directionalShadowMap.value=St.state.directionalShadowMap,an.directionalShadowMatrix.value=St.state.directionalShadowMatrix,an.spotShadowMap.value=St.state.spotShadowMap,an.spotShadowMatrix.value=St.state.spotShadowMatrix,an.pointShadowMap.value=St.state.pointShadowMap,an.pointShadowMatrix.value=St.state.pointShadowMatrix);const Sn=En.getUniforms(),ji=Ui.seqWithValue(Sn.seq,an);return st.currentProgram=En,st.uniformsList=ji,En}function VS(_e,ot){const Ye=oe.get(_e);Ye.outputEncoding=ot.outputEncoding,Ye.instancing=ot.instancing,Ye.skinning=ot.skinning,Ye.numClippingPlanes=ot.numClippingPlanes,Ye.numIntersection=ot.numClipIntersection,Ye.vertexAlphas=ot.vertexAlphas}function WS(_e,ot,Ye,st){ot.isScene!==!0&&(ot=Qe),Ee.resetTextureUnits();const St=ot.fog,Pn=Ye.isMeshStandardMaterial?ot.environment:null,fn=F===null?_.outputEncoding:F.texture.encoding,At=He.get(Ye.envMap||Pn),bn=Ye.vertexColors===!0&&st.geometry&&st.geometry.attributes.color&&st.geometry.attributes.color.itemSize===4,Zt=oe.get(Ye),En=p.state.lights;if(Ze===!0&&(lt===!0||_e!==B)){const Sr=_e===B&&Ye.id===U;Mi.setState(Ye,_e,Sr)}let an=!1;Ye.version===Zt.__version?Zt.needsLights&&Zt.lightsStateVersion!==En.state.version||Zt.outputEncoding!==fn||st.isInstancedMesh&&Zt.instancing===!1?an=!0:st.isInstancedMesh||Zt.instancing!==!0?st.isSkinnedMesh&&Zt.skinning===!1?an=!0:st.isSkinnedMesh||Zt.skinning!==!0?Zt.envMap!==At||Ye.fog&&Zt.fog!==St?an=!0:Zt.numClippingPlanes===void 0||Zt.numClippingPlanes===Mi.numPlanes&&Zt.numIntersection===Mi.numIntersection?Zt.vertexAlphas!==bn&&(an=!0):an=!0:an=!0:an=!0:(an=!0,Zt.__version=Ye.version);let Sn=Zt.currentProgram;an===!0&&(Sn=G_(Ye,ot,st));let ji=!1,ri=!1,ds=!1;const Zn=Sn.getUniforms(),js=Zt.uniforms;if(mt.useProgram(Sn.program)&&(ji=!0,ri=!0,ds=!0),Ye.id!==U&&(U=Ye.id,ri=!0),ji||B!==_e){if(Zn.setValue(yt,\"projectionMatrix\",_e.projectionMatrix),ft.logarithmicDepthBuffer&&Zn.setValue(yt,\"logDepthBufFC\",2/(Math.log(_e.far+1)/Math.LN2)),B!==_e&&(B=_e,ri=!0,ds=!0),Ye.isShaderMaterial||Ye.isMeshPhongMaterial||Ye.isMeshToonMaterial||Ye.isMeshStandardMaterial||Ye.envMap){const Sr=Zn.map.cameraPosition;Sr!==void 0&&Sr.setValue(yt,fe.setFromMatrixPosition(_e.matrixWorld))}(Ye.isMeshPhongMaterial||Ye.isMeshToonMaterial||Ye.isMeshLambertMaterial||Ye.isMeshBasicMaterial||Ye.isMeshStandardMaterial||Ye.isShaderMaterial)&&Zn.setValue(yt,\"isOrthographic\",_e.isOrthographicCamera===!0),(Ye.isMeshPhongMaterial||Ye.isMeshToonMaterial||Ye.isMeshLambertMaterial||Ye.isMeshBasicMaterial||Ye.isMeshStandardMaterial||Ye.isShaderMaterial||Ye.isShadowMaterial||st.isSkinnedMesh)&&Zn.setValue(yt,\"viewMatrix\",_e.matrixWorldInverse)}if(st.isSkinnedMesh){Zn.setOptional(yt,st,\"bindMatrix\"),Zn.setOptional(yt,st,\"bindMatrixInverse\");const Sr=st.skeleton;Sr&&(ft.floatVertexTextures?(Sr.boneTexture===null&&Sr.computeBoneTexture(),Zn.setValue(yt,\"boneTexture\",Sr.boneTexture,Ee),Zn.setValue(yt,\"boneTextureSize\",Sr.boneTextureSize)):Zn.setOptional(yt,Sr,\"boneMatrices\"))}var Xi,uo;return(ri||Zt.receiveShadow!==st.receiveShadow)&&(Zt.receiveShadow=st.receiveShadow,Zn.setValue(yt,\"receiveShadow\",st.receiveShadow)),ri&&(Zn.setValue(yt,\"toneMappingExposure\",_.toneMappingExposure),Zt.needsLights&&(uo=ds,(Xi=js).ambientLightColor.needsUpdate=uo,Xi.lightProbe.needsUpdate=uo,Xi.directionalLights.needsUpdate=uo,Xi.directionalLightShadows.needsUpdate=uo,Xi.pointLights.needsUpdate=uo,Xi.pointLightShadows.needsUpdate=uo,Xi.spotLights.needsUpdate=uo,Xi.spotLightShadows.needsUpdate=uo,Xi.rectAreaLights.needsUpdate=uo,Xi.hemisphereLights.needsUpdate=uo),St&&Ye.fog&&Nt.refreshFogUniforms(js,St),Nt.refreshMaterialUniforms(js,Ye,se,he,dt),Ui.upload(yt,Zt.uniformsList,js,Ee)),Ye.isShaderMaterial&&Ye.uniformsNeedUpdate===!0&&(Ui.upload(yt,Zt.uniformsList,js,Ee),Ye.uniformsNeedUpdate=!1),Ye.isSpriteMaterial&&Zn.setValue(yt,\"center\",st.center),Zn.setValue(yt,\"modelViewMatrix\",st.modelViewMatrix),Zn.setValue(yt,\"normalMatrix\",st.normalMatrix),Zn.setValue(yt,\"modelMatrix\",st.matrixWorld),Sn}Bu.setAnimationLoop(function(_e){U_&&U_(_e)}),typeof window!=\"undefined\"&&Bu.setContext(window),this.setAnimationLoop=function(_e){U_=_e,lo.setAnimationLoop(_e),_e===null?Bu.stop():Bu.start()},lo.addEventListener(\"sessionstart\",HS),lo.addEventListener(\"sessionend\",zS),this.render=function(_e,ot){if(ot!==void 0&&ot.isCamera!==!0)return void console.error(\"THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.\");if(y===!0)return;_e.autoUpdate===!0&&_e.updateMatrixWorld(),ot.parent===null&&ot.updateMatrixWorld(),lo.enabled===!0&&lo.isPresenting===!0&&(lo.cameraAutoUpdate===!0&&lo.updateCamera(ot),ot=lo.getCamera()),_e.isScene===!0&&_e.onBeforeRender(_,_e,ot,F),p=pn.get(_e,g.length),p.init(),g.push(p),ce.multiplyMatrices(ot.projectionMatrix,ot.matrixWorldInverse),Re.setFromProjectionMatrix(ce),lt=this.localClippingEnabled,Ze=Mi.init(this.clippingPlanes,lt,ot),d=Ot.get(_e,m.length),d.init(),m.push(d),function fn(At,bn,Zt,En){if(At.visible===!1)return;if(At.layers.test(bn.layers)){if(At.isGroup)Zt=At.renderOrder;else if(At.isLOD)At.autoUpdate===!0&&At.update(bn);else if(At.isLight)p.pushLight(At),At.castShadow&&p.pushShadow(At);else if(At.isSprite){if(!At.frustumCulled||Re.intersectsSprite(At)){En&&fe.setFromMatrixPosition(At.matrixWorld).applyMatrix4(ce);const Sn=tt.update(At),ji=At.material;ji.visible&&d.push(At,Sn,ji,Zt,fe.z,null)}}else if(At.isImmediateRenderObject)En&&fe.setFromMatrixPosition(At.matrixWorld).applyMatrix4(ce),d.push(At,null,At.material,Zt,fe.z,null);else if((At.isMesh||At.isLine||At.isPoints)&&(At.isSkinnedMesh&&At.skeleton.frame!==Ke.render.frame&&(At.skeleton.update(),At.skeleton.frame=Ke.render.frame),!At.frustumCulled||Re.intersectsObject(At))){En&&fe.setFromMatrixPosition(At.matrixWorld).applyMatrix4(ce);const Sn=tt.update(At),ji=At.material;if(Array.isArray(ji)){const ri=Sn.groups;for(let ds=0,Zn=ri.length;ds<Zn;ds++){const js=ri[ds],Xi=ji[js.materialIndex];Xi&&Xi.visible&&d.push(At,Sn,Xi,Zt,fe.z,js)}}else ji.visible&&d.push(At,Sn,ji,Zt,fe.z,null)}}const an=At.children;for(let Sn=0,ji=an.length;Sn<ji;Sn++)fn(an[Sn],bn,Zt,En)}(_e,ot,0,_.sortObjects),d.finish(),_.sortObjects===!0&&d.sort(de,ue),Ze===!0&&Mi.beginShadows();const Ye=p.state.shadowsArray;zn.render(Ye,_e,ot),p.setupLights(),p.setupLightsView(ot),Ze===!0&&Mi.endShadows(),this.info.autoReset===!0&&this.info.reset(),qr.render(d,_e);const st=d.opaque,St=d.transmissive,Pn=d.transparent;st.length>0&&Tg(st,_e,ot),St.length>0&&function(fn,At,bn,Zt){if(dt===null){const Sn=s===!0&&ft.isWebGL2===!0;dt=new(Sn?ph:pr)(1024,1024,{generateMipmaps:!0,type:Br.convert(qs)!==null?qs:Xs,minFilter:ps,magFilter:wn,wrapS:Tt,wrapT:Tt})}const En=_.getRenderTarget();_.setRenderTarget(dt),_.clear();const an=_.toneMapping;_.toneMapping=T,Tg(fn,bn,Zt),_.toneMapping=an,Ee.updateMultisampleRenderTarget(dt),Ee.updateRenderTargetMipmap(dt),_.setRenderTarget(En),Tg(At,bn,Zt)}(st,St,_e,ot),Pn.length>0&&Tg(Pn,_e,ot),F!==null&&(Ee.updateMultisampleRenderTarget(F),Ee.updateRenderTargetMipmap(F)),_e.isScene===!0&&_e.onAfterRender(_,_e,ot),mt.buffers.depth.setTest(!0),mt.buffers.depth.setMask(!0),mt.buffers.color.setMask(!0),mt.setPolygonOffset(!1),Yr.resetDefaultState(),U=-1,B=null,g.pop(),p=g.length>0?g[g.length-1]:null,m.pop(),d=m.length>0?m[m.length-1]:null},this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return R},this.getRenderTarget=function(){return F},this.setRenderTarget=function(_e,ot=0,Ye=0){F=_e,w=ot,R=Ye,_e&&oe.get(_e).__webglFramebuffer===void 0&&Ee.setupRenderTarget(_e);let st=null,St=!1,Pn=!1;if(_e){const fn=_e.texture;(fn.isDataTexture3D||fn.isDataTexture2DArray)&&(Pn=!0);const At=oe.get(_e).__webglFramebuffer;_e.isWebGLCubeRenderTarget?(st=At[ot],St=!0):st=_e.isWebGLMultisampleRenderTarget?oe.get(_e).__webglMultisampledFramebuffer:At,V.copy(_e.viewport),G.copy(_e.scissor),W=_e.scissorTest}else V.copy(xe).multiplyScalar(se).floor(),G.copy(We).multiplyScalar(se).floor(),W=Ge;if(mt.bindFramebuffer(36160,st)&&ft.drawBuffers){let fn=!1;if(_e)if(_e.isWebGLMultipleRenderTargets){const At=_e.texture;if(Ae.length!==At.length||Ae[0]!==36064){for(let bn=0,Zt=At.length;bn<Zt;bn++)Ae[bn]=36064+bn;Ae.length=At.length,fn=!0}}else Ae.length===1&&Ae[0]===36064||(Ae[0]=36064,Ae.length=1,fn=!0);else Ae.length===1&&Ae[0]===1029||(Ae[0]=1029,Ae.length=1,fn=!0);fn&&(ft.isWebGL2?yt.drawBuffers(Ae):je.get(\"WEBGL_draw_buffers\").drawBuffersWEBGL(Ae))}if(mt.viewport(V),mt.scissor(G),mt.setScissorTest(W),St){const fn=oe.get(_e.texture);yt.framebufferTexture2D(36160,36064,34069+ot,fn.__webglTexture,Ye)}else if(Pn){const fn=oe.get(_e.texture),At=ot||0;yt.framebufferTextureLayer(36160,36064,fn.__webglTexture,Ye||0,At)}},this.readRenderTargetPixels=function(_e,ot,Ye,st,St,Pn,fn){if(!_e||!_e.isWebGLRenderTarget)return void console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.\");let At=oe.get(_e).__webglFramebuffer;if(_e.isWebGLCubeRenderTarget&&fn!==void 0&&(At=At[fn]),At){mt.bindFramebuffer(36160,At);try{const bn=_e.texture,Zt=bn.format,En=bn.type;if(Zt!==Tr&&Br.convert(Zt)!==yt.getParameter(35739))return void console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.\");const an=En===qs&&(je.has(\"EXT_color_buffer_half_float\")||ft.isWebGL2&&je.has(\"EXT_color_buffer_float\"));if(!(En===Xs||Br.convert(En)===yt.getParameter(35738)||En===Oo&&(ft.isWebGL2||je.has(\"OES_texture_float\")||je.has(\"WEBGL_color_buffer_float\"))||an))return void console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.\");yt.checkFramebufferStatus(36160)===36053?ot>=0&&ot<=_e.width-st&&Ye>=0&&Ye<=_e.height-St&&yt.readPixels(ot,Ye,st,St,Br.convert(Zt),Br.convert(En),Pn):console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.\")}finally{const bn=F!==null?oe.get(F).__webglFramebuffer:null;mt.bindFramebuffer(36160,bn)}}},this.copyFramebufferToTexture=function(_e,ot,Ye=0){const st=Math.pow(2,-Ye),St=Math.floor(ot.image.width*st),Pn=Math.floor(ot.image.height*st);let fn=Br.convert(ot.format);ft.isWebGL2&&(fn===6407&&(fn=32849),fn===6408&&(fn=32856)),Ee.setTexture2D(ot,0),yt.copyTexImage2D(3553,Ye,fn,_e.x,_e.y,St,Pn,0),mt.unbindTexture()},this.copyTextureToTexture=function(_e,ot,Ye,st=0){const St=ot.image.width,Pn=ot.image.height,fn=Br.convert(Ye.format),At=Br.convert(Ye.type);Ee.setTexture2D(Ye,0),yt.pixelStorei(37440,Ye.flipY),yt.pixelStorei(37441,Ye.premultiplyAlpha),yt.pixelStorei(3317,Ye.unpackAlignment),ot.isDataTexture?yt.texSubImage2D(3553,st,_e.x,_e.y,St,Pn,fn,At,ot.image.data):ot.isCompressedTexture?yt.compressedTexSubImage2D(3553,st,_e.x,_e.y,ot.mipmaps[0].width,ot.mipmaps[0].height,fn,ot.mipmaps[0].data):yt.texSubImage2D(3553,st,_e.x,_e.y,fn,At,ot.image),st===0&&Ye.generateMipmaps&&yt.generateMipmap(3553),mt.unbindTexture()},this.copyTextureToTexture3D=function(_e,ot,Ye,st,St=0){if(_.isWebGL1Renderer)return void console.warn(\"THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.\");const Pn=_e.max.x-_e.min.x+1,fn=_e.max.y-_e.min.y+1,At=_e.max.z-_e.min.z+1,bn=Br.convert(st.format),Zt=Br.convert(st.type);let En;if(st.isDataTexture3D)Ee.setTexture3D(st,0),En=32879;else{if(!st.isDataTexture2DArray)return void console.warn(\"THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.\");Ee.setTexture2DArray(st,0),En=35866}yt.pixelStorei(37440,st.flipY),yt.pixelStorei(37441,st.premultiplyAlpha),yt.pixelStorei(3317,st.unpackAlignment);const an=yt.getParameter(3314),Sn=yt.getParameter(32878),ji=yt.getParameter(3316),ri=yt.getParameter(3315),ds=yt.getParameter(32877),Zn=Ye.isCompressedTexture?Ye.mipmaps[0]:Ye.image;yt.pixelStorei(3314,Zn.width),yt.pixelStorei(32878,Zn.height),yt.pixelStorei(3316,_e.min.x),yt.pixelStorei(3315,_e.min.y),yt.pixelStorei(32877,_e.min.z),Ye.isDataTexture||Ye.isDataTexture3D?yt.texSubImage3D(En,St,ot.x,ot.y,ot.z,Pn,fn,At,bn,Zt,Zn.data):Ye.isCompressedTexture?(console.warn(\"THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture.\"),yt.compressedTexSubImage3D(En,St,ot.x,ot.y,ot.z,Pn,fn,At,bn,Zn.data)):yt.texSubImage3D(En,St,ot.x,ot.y,ot.z,Pn,fn,At,bn,Zt,Zn),yt.pixelStorei(3314,an),yt.pixelStorei(32878,Sn),yt.pixelStorei(3316,ji),yt.pixelStorei(3315,ri),yt.pixelStorei(32877,ds),St===0&&st.generateMipmaps&&yt.generateMipmap(En),mt.unbindTexture()},this.initTexture=function(_e){Ee.setTexture2D(_e,0),mt.unbindTexture()},this.resetState=function(){w=0,R=0,F=null,mt.reset(),Yr.reset()},typeof __THREE_DEVTOOLS__!=\"undefined\"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(\"observe\",{detail:this}))}class or extends on{}or.prototype.isWebGL1Renderer=!0;class Kl{constructor(e,t=25e-5){this.name=\"\",this.color=new Et(e),this.density=t}clone(){return new Kl(this.color,this.density)}toJSON(){return{type:\"FogExp2\",color:this.color.getHex(),density:this.density}}}Kl.prototype.isFogExp2=!0;class el{constructor(e,t=1,n=1e3){this.name=\"\",this.color=new Et(e),this.near=t,this.far=n}clone(){return new el(this.color,this.near,this.far)}toJSON(){return{type:\"Fog\",color:this.color.getHex(),near:this.near,far:this.far}}}el.prototype.isFog=!0;class Ql extends yn{constructor(){super(),this.type=\"Scene\",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!=\"undefined\"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(\"observe\",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}}Ql.prototype.isScene=!0;class xa{constructor(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=_o,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ar()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,o=this.stride;r<o;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ar()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ar()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}xa.prototype.isInterleavedBuffer=!0;const fi=new re;class Qo{constructor(e,t,n,r=!1){this.name=\"\",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)fi.x=this.getX(t),fi.y=this.getY(t),fi.z=this.getZ(t),fi.applyMatrix4(e),this.setXYZ(t,fi.x,fi.y,fi.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)fi.x=this.getX(t),fi.y=this.getY(t),fi.z=this.getZ(t),fi.applyNormalMatrix(e),this.setXYZ(t,fi.x,fi.y,fi.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)fi.x=this.getX(t),fi.y=this.getY(t),fi.z=this.getZ(t),fi.transformDirection(e),this.setXYZ(t,fi.x,fi.y,fi.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,o){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log(\"THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.\");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return new mn(new this.array.constructor(t),this.itemSize,this.normalized)}return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Qo(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log(\"THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.\");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Qo.prototype.isInterleavedBufferAttribute=!0;class eu extends ki{constructor(e){super(),this.type=\"SpriteMaterial\",this.color=new Et(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let oo;eu.prototype.isSpriteMaterial=!0;const tu=new re,ba=new re,wa=new re,tl=new gt,nu=new gt,$f=new Ut,Gh=new re,iu=new re,Hh=new re,zh=new gt,jh=new gt,Hd=new gt;class Vh extends yn{constructor(e){if(super(),this.type=\"Sprite\",oo===void 0){oo=new Vt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new xa(t,5);oo.setIndex([0,1,2,0,2,3]),oo.setAttribute(\"position\",new Qo(n,3,0,!1)),oo.setAttribute(\"uv\",new Qo(n,2,3,!1))}this.geometry=oo,this.material=e!==void 0?e:new eu,this.center=new gt(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: \"Raycaster.camera\" needs to be set in order to raycast against sprites.'),ba.setFromMatrixScale(this.matrixWorld),$f.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),wa.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&ba.multiplyScalar(-wa.z);const n=this.material.rotation;let r,o;n!==0&&(o=Math.cos(n),r=Math.sin(n));const s=this.center;nl(Gh.set(-.5,-.5,0),wa,s,ba,r,o),nl(iu.set(.5,-.5,0),wa,s,ba,r,o),nl(Hh.set(.5,.5,0),wa,s,ba,r,o),zh.set(0,0),jh.set(1,0),Hd.set(1,1);let a=e.ray.intersectTriangle(Gh,iu,Hh,!1,tu);if(a===null&&(nl(iu.set(-.5,.5,0),wa,s,ba,r,o),jh.set(0,1),a=e.ray.intersectTriangle(Gh,Hh,iu,!1,tu),a===null))return;const l=e.ray.origin.distanceTo(tu);l<e.near||l>e.far||t.push({distance:l,point:tu.clone(),uv:hi.getUV(tu,Gh,iu,Hh,zh,jh,Hd,new gt),face:null,object:this})}copy(e){return super.copy(e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function nl(i,e,t,n,r,o){tl.subVectors(i,t).addScalar(.5).multiply(n),r!==void 0?(nu.x=o*tl.x-r*tl.y,nu.y=r*tl.x+o*tl.y):nu.copy(tl),i.copy(e),i.x+=nu.x,i.y+=nu.y,i.applyMatrix4($f)}Vh.prototype.isSprite=!0;const Wh=new re,Jf=new re;class sr extends yn{constructor(){super(),this._currentLevel=0,this.type=\"LOD\",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const o=t[n];this.addLevel(o.object.clone(),o.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const n=this.levels;let r;for(r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Wh.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(Wh);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Wh.setFromMatrixPosition(e.matrixWorld),Jf.setFromMatrixPosition(this.matrixWorld);const n=Wh.distanceTo(Jf)/e.zoom;let r,o;for(t[0].object.visible=!0,r=1,o=t.length;r<o&&n>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(this._currentLevel=r-1;r<o;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,o=n.length;r<o;r++){const s=n[r];t.object.levels.push({object:s.object.uuid,distance:s.distance})}return t}}const Xh=new re,Zf=new Un,Kf=new Un,zd=new re,qh=new Ut;class Yh extends Xn{constructor(e,t){super(e,t),this.type=\"SkinnedMesh\",this.bindMode=\"attached\",this.bindMatrix=new Ut,this.bindMatrixInverse=new Ut}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Un,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===\"attached\"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===\"detached\"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn(\"THREE.SkinnedMesh: Unrecognized bindMode: \"+this.bindMode)}boneTransform(e,t){const n=this.skeleton,r=this.geometry;Zf.fromBufferAttribute(r.attributes.skinIndex,e),Kf.fromBufferAttribute(r.attributes.skinWeight,e),Xh.fromBufferAttribute(r.attributes.position,e).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const s=Kf.getComponent(o);if(s!==0){const a=Zf.getComponent(o);qh.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),t.addScaledVector(zd.copy(Xh).applyMatrix4(qh),s)}}return t.applyMatrix4(this.bindMatrixInverse)}}Yh.prototype.isSkinnedMesh=!0;class $h extends yn{constructor(){super(),this.type=\"Bone\"}}$h.prototype.isBone=!0;class Es extends gi{constructor(e=null,t=1,n=1,r,o,s,a,l,u=wn,h=wn,d,p){super(null,s,a,l,u,h,r,o,d,p),this.image={data:e,width:t,height:n},this.magFilter=u,this.minFilter=h,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Es.prototype.isDataTexture=!0;const jd=new Ut,xv=new Ut;class Jh{constructor(e=[],t=[]){this.uuid=Ar(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn(\"THREE.Skeleton: Number of inverse bone matrices does not match amount of bones.\"),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Ut)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Ut;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let o=0,s=e.length;o<s;o++){const a=e[o]?e[o].matrixWorld:xv;jd.multiplyMatrices(a,t[o]),jd.toArray(n,16*o)}r!==null&&(r.needsUpdate=!0)}clone(){return new Jh(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=dh(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Es(t,e,e,Tr,Oo);return this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const o=e.bones[n];let s=t[o];s===void 0&&(console.warn(\"THREE.Skeleton: No bone found with UUID:\",o),s=new $h),this.bones.push(s),this.boneInverses.push(new Ut().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:\"Skeleton\",generator:\"Skeleton.toJSON\"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,o=t.length;r<o;r++){const s=t[r];e.bones.push(s.uuid);const a=n[r];e.boneInverses.push(a.toArray())}return e}}const Zh=new Ut,Kh=new Ut,Qh=[],ru=new Xn;class Vd extends Xn{constructor(e,t,n){super(e,t),this.instanceMatrix=new mn(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(ru.geometry=this.geometry,ru.material=this.material,ru.material!==void 0)for(let o=0;o<r;o++){this.getMatrixAt(o,Zh),Kh.multiplyMatrices(n,Zh),ru.matrixWorld=Kh,ru.raycast(e,Qh);for(let s=0,a=Qh.length;s<a;s++){const l=Qh[s];l.instanceId=o,l.object=this,t.push(l)}Qh.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new mn(new Float32Array(3*this.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:\"dispose\"})}}Vd.prototype.isInstancedMesh=!0;class Gi extends ki{constructor(e){super(),this.type=\"LineBasicMaterial\",this.color=new Et(16777215),this.linewidth=1,this.linecap=\"round\",this.linejoin=\"round\",this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this}}Gi.prototype.isLineBasicMaterial=!0;const ec=new re,Qf=new re,em=new Ut,Wd=new ei,c=new Go;class f extends yn{constructor(e=new Vt,t=new Gi){super(),this.type=\"Line\",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,o=t.count;r<o;r++)ec.fromBufferAttribute(t,r-1),Qf.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=ec.distanceTo(Qf);e.setAttribute(\"lineDistance\",new Mt(n,1))}else console.warn(\"THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.\");else e.isGeometry&&console.error(\"THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.\");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,o=e.params.Line.threshold,s=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),c.copy(n.boundingSphere),c.applyMatrix4(r),c.radius+=o,e.ray.intersectsSphere(c)===!1)return;em.copy(r).invert(),Wd.copy(e.ray).applyMatrix4(em);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=new re,h=new re,d=new re,p=new re,m=this.isLineSegments?2:1;if(n.isBufferGeometry){const g=n.index,_=n.attributes.position;if(g!==null)for(let y=Math.max(0,s.start),w=Math.min(g.count,s.start+s.count)-1;y<w;y+=m){const R=g.getX(y),F=g.getX(y+1);if(u.fromBufferAttribute(_,R),h.fromBufferAttribute(_,F),Wd.distanceSqToSegment(u,h,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const U=e.ray.origin.distanceTo(p);U<e.near||U>e.far||t.push({distance:U,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}else for(let y=Math.max(0,s.start),w=Math.min(_.count,s.start+s.count)-1;y<w;y+=m){if(u.fromBufferAttribute(_,y),h.fromBufferAttribute(_,y+1),Wd.distanceSqToSegment(u,h,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const R=e.ray.origin.distanceTo(p);R<e.near||R>e.far||t.push({distance:R,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else n.isGeometry&&console.error(\"THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.\")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){const a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error(\"THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.\")}}}f.prototype.isLine=!0;const x=new re,A=new re;class k extends f{constructor(e,t){super(e,t),this.type=\"LineSegments\"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,o=t.count;r<o;r+=2)x.fromBufferAttribute(t,r),A.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+x.distanceTo(A);e.setAttribute(\"lineDistance\",new Mt(n,1))}else console.warn(\"THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.\");else e.isGeometry&&console.error(\"THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.\");return this}}k.prototype.isLineSegments=!0;class ie extends f{constructor(e,t){super(e,t),this.type=\"LineLoop\"}}ie.prototype.isLineLoop=!0;class pe extends ki{constructor(e){super(),this.type=\"PointsMaterial\",this.color=new Et(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this}}pe.prototype.isPointsMaterial=!0;const Te=new Ut,Be=new ei,nt=new Go,rt=new re;class vt extends yn{constructor(e=new Vt,t=new pe){super(),this.type=\"Points\",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,o=e.params.Points.threshold,s=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),nt.copy(n.boundingSphere),nt.applyMatrix4(r),nt.radius+=o,e.ray.intersectsSphere(nt)===!1)return;Te.copy(r).invert(),Be.copy(e.ray).applyMatrix4(Te);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a;if(n.isBufferGeometry){const u=n.index,h=n.attributes.position;if(u!==null)for(let d=Math.max(0,s.start),p=Math.min(u.count,s.start+s.count);d<p;d++){const m=u.getX(d);rt.fromBufferAttribute(h,m),Ft(rt,m,l,r,e,t,this)}else for(let d=Math.max(0,s.start),p=Math.min(h.count,s.start+s.count);d<p;d++)rt.fromBufferAttribute(h,d),Ft(rt,d,l,r,e,t,this)}else console.error(\"THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.\")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){const a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error(\"THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.\")}}}function Ft(i,e,t,n,r,o,s){const a=Be.distanceSqToPoint(i);if(a<t){const l=new re;Be.closestPointToPoint(i,l),l.applyMatrix4(n);const u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;o.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:s})}}vt.prototype.isPoints=!0;class Gt extends gi{constructor(e,t,n,r,o,s,a,l,u){super(e,t,n,r,o,s,a,l,u),this.format=a!==void 0?a:Lo,this.minFilter=s!==void 0?s:Kn,this.magFilter=o!==void 0?o:Kn,this.generateMipmaps=!1;const h=this;\"requestVideoFrameCallback\"in e&&e.requestVideoFrameCallback(function d(){h.needsUpdate=!0,e.requestVideoFrameCallback(d)})}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!(\"requestVideoFrameCallback\"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}Gt.prototype.isVideoTexture=!0;class Wt extends gi{constructor(e,t,n,r,o,s,a,l,u,h,d,p){super(null,s,a,l,u,h,r,o,d,p),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}Wt.prototype.isCompressedTexture=!0;class ut extends gi{constructor(e,t,n,r,o,s,a,l,u){super(e,t,n,r,o,s,a,l,u),this.needsUpdate=!0}}ut.prototype.isCanvasTexture=!0;class xt extends gi{constructor(e,t,n,r,o,s,a,l,u,h){if((h=h!==void 0?h:fs)!==fs&&h!==mo)throw new Error(\"DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat\");n===void 0&&h===fs&&(n=wl),n===void 0&&h===mo&&(n=On),super(null,r,o,s,a,l,h,n,u),this.image={width:e,height:t},this.magFilter=a!==void 0?a:wn,this.minFilter=l!==void 0?l:wn,this.flipY=!1,this.generateMipmaps=!1}}xt.prototype.isDepthTexture=!0;class Yt extends Vt{constructor(e=1,t=8,n=0,r=2*Math.PI){super(),this.type=\"CircleGeometry\",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const o=[],s=[],a=[],l=[],u=new re,h=new gt;s.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,p=3;d<=t;d++,p+=3){const m=n+d/t*r;u.x=e*Math.cos(m),u.y=e*Math.sin(m),s.push(u.x,u.y,u.z),a.push(0,0,1),h.x=(s[p]/e+1)/2,h.y=(s[p+1]/e+1)/2,l.push(h.x,h.y)}for(let d=1;d<=t;d++)o.push(d,d+1,0);this.setIndex(o),this.setAttribute(\"position\",new Mt(s,3)),this.setAttribute(\"normal\",new Mt(a,3)),this.setAttribute(\"uv\",new Mt(l,2))}static fromJSON(e){return new Yt(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Lt extends Vt{constructor(e=1,t=1,n=1,r=8,o=1,s=!1,a=0,l=2*Math.PI){super(),this.type=\"CylinderGeometry\",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:l};const u=this;r=Math.floor(r),o=Math.floor(o);const h=[],d=[],p=[],m=[];let g=0;const _=[],y=n/2;let w=0;function R(F){const U=g,B=new gt,V=new re;let G=0;const W=F===!0?e:t,ge=F===!0?1:-1;for(let se=1;se<=r;se++)d.push(0,y*ge,0),p.push(0,ge,0),m.push(.5,.5),g++;const he=g;for(let se=0;se<=r;se++){const de=se/r*l+a,ue=Math.cos(de),xe=Math.sin(de);V.x=W*xe,V.y=y*ge,V.z=W*ue,d.push(V.x,V.y,V.z),p.push(0,ge,0),B.x=.5*ue+.5,B.y=.5*xe*ge+.5,m.push(B.x,B.y),g++}for(let se=0;se<r;se++){const de=U+se,ue=he+se;F===!0?h.push(ue,ue+1,de):h.push(ue+1,ue,de),G+=3}u.addGroup(w,G,F===!0?1:2),w+=G}(function(){const F=new re,U=new re;let B=0;const V=(t-e)/n;for(let G=0;G<=o;G++){const W=[],ge=G/o,he=ge*(t-e)+e;for(let se=0;se<=r;se++){const de=se/r,ue=de*l+a,xe=Math.sin(ue),We=Math.cos(ue);U.x=he*xe,U.y=-ge*n+y,U.z=he*We,d.push(U.x,U.y,U.z),F.set(xe,V,We).normalize(),p.push(F.x,F.y,F.z),m.push(de,1-ge),W.push(g++)}_.push(W)}for(let G=0;G<r;G++)for(let W=0;W<o;W++){const ge=_[W][G],he=_[W+1][G],se=_[W+1][G+1],de=_[W][G+1];h.push(ge,he,de),h.push(he,se,de),B+=6}u.addGroup(w,B,0),w+=B})(),s===!1&&(e>0&&R(!0),t>0&&R(!1)),this.setIndex(h),this.setAttribute(\"position\",new Mt(d,3)),this.setAttribute(\"normal\",new Mt(p,3)),this.setAttribute(\"uv\",new Mt(m,2))}static fromJSON(e){return new Lt(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class $t extends Lt{constructor(e=1,t=1,n=8,r=1,o=!1,s=0,a=2*Math.PI){super(0,e,t,n,r,o,s,a),this.type=\"ConeGeometry\",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a}}static fromJSON(e){return new $t(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class zt extends Vt{constructor(e,t,n=1,r=0){super(),this.type=\"PolyhedronGeometry\",this.parameters={vertices:e,indices:t,radius:n,detail:r};const o=[],s=[];function a(p,m,g,_){const y=_+1,w=[];for(let R=0;R<=y;R++){w[R]=[];const F=p.clone().lerp(g,R/y),U=m.clone().lerp(g,R/y),B=y-R;for(let V=0;V<=B;V++)w[R][V]=V===0&&R===y?F:F.clone().lerp(U,V/B)}for(let R=0;R<y;R++)for(let F=0;F<2*(y-R)-1;F++){const U=Math.floor(F/2);F%2==0?(l(w[R][U+1]),l(w[R+1][U]),l(w[R][U])):(l(w[R][U+1]),l(w[R+1][U+1]),l(w[R+1][U]))}}function l(p){o.push(p.x,p.y,p.z)}function u(p,m){const g=3*p;m.x=e[g+0],m.y=e[g+1],m.z=e[g+2]}function h(p,m,g,_){_<0&&p.x===1&&(s[m]=p.x-1),g.x===0&&g.z===0&&(s[m]=_/2/Math.PI+.5)}function d(p){return Math.atan2(p.z,-p.x)}(function(p){const m=new re,g=new re,_=new re;for(let y=0;y<t.length;y+=3)u(t[y+0],m),u(t[y+1],g),u(t[y+2],_),a(m,g,_,p)})(r),function(p){const m=new re;for(let g=0;g<o.length;g+=3)m.x=o[g+0],m.y=o[g+1],m.z=o[g+2],m.normalize().multiplyScalar(p),o[g+0]=m.x,o[g+1]=m.y,o[g+2]=m.z}(n),function(){const p=new re;for(let g=0;g<o.length;g+=3){p.x=o[g+0],p.y=o[g+1],p.z=o[g+2];const _=d(p)/2/Math.PI+.5,y=(m=p,Math.atan2(-m.y,Math.sqrt(m.x*m.x+m.z*m.z))/Math.PI+.5);s.push(_,1-y)}var m;(function(){const g=new re,_=new re,y=new re,w=new re,R=new gt,F=new gt,U=new gt;for(let B=0,V=0;B<o.length;B+=9,V+=6){g.set(o[B+0],o[B+1],o[B+2]),_.set(o[B+3],o[B+4],o[B+5]),y.set(o[B+6],o[B+7],o[B+8]),R.set(s[V+0],s[V+1]),F.set(s[V+2],s[V+3]),U.set(s[V+4],s[V+5]),w.copy(g).add(_).add(y).divideScalar(3);const G=d(w);h(R,V+0,g,G),h(F,V+2,_,G),h(U,V+4,y,G)}})(),function(){for(let g=0;g<s.length;g+=6){const _=s[g+0],y=s[g+2],w=s[g+4],R=Math.max(_,y,w),F=Math.min(_,y,w);R>.9&&F<.1&&(_<.2&&(s[g+0]+=1),y<.2&&(s[g+2]+=1),w<.2&&(s[g+4]+=1))}}()}(),this.setAttribute(\"position\",new Mt(o,3)),this.setAttribute(\"normal\",new Mt(o.slice(),3)),this.setAttribute(\"uv\",new Mt(s,2)),r===0?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(e){return new zt(e.vertices,e.indices,e.radius,e.details)}}class dn extends zt{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type=\"DodecahedronGeometry\",this.parameters={radius:e,detail:t}}static fromJSON(e){return new dn(e.radius,e.detail)}}const Ht=new re,Kt=new re,yi=new re,Hi=new hi;class Wr extends Vt{constructor(e,t){if(super(),this.type=\"EdgesGeometry\",this.parameters={thresholdAngle:t},t=t!==void 0?t:1,e.isGeometry===!0)return void console.error(\"THREE.EdgesGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.\");const n=Math.pow(10,4),r=Math.cos(ui*t),o=e.getIndex(),s=e.getAttribute(\"position\"),a=o?o.count:s.count,l=[0,0,0],u=[\"a\",\"b\",\"c\"],h=new Array(3),d={},p=[];for(let m=0;m<a;m+=3){o?(l[0]=o.getX(m),l[1]=o.getX(m+1),l[2]=o.getX(m+2)):(l[0]=m,l[1]=m+1,l[2]=m+2);const{a:g,b:_,c:y}=Hi;if(g.fromBufferAttribute(s,l[0]),_.fromBufferAttribute(s,l[1]),y.fromBufferAttribute(s,l[2]),Hi.getNormal(yi),h[0]=`${Math.round(g.x*n)},${Math.round(g.y*n)},${Math.round(g.z*n)}`,h[1]=`${Math.round(_.x*n)},${Math.round(_.y*n)},${Math.round(_.z*n)}`,h[2]=`${Math.round(y.x*n)},${Math.round(y.y*n)},${Math.round(y.z*n)}`,h[0]!==h[1]&&h[1]!==h[2]&&h[2]!==h[0])for(let w=0;w<3;w++){const R=(w+1)%3,F=h[w],U=h[R],B=Hi[u[w]],V=Hi[u[R]],G=`${F}_${U}`,W=`${U}_${F}`;W in d&&d[W]?(yi.dot(d[W].normal)<=r&&(p.push(B.x,B.y,B.z),p.push(V.x,V.y,V.z)),d[W]=null):G in d||(d[G]={index0:l[w],index1:l[R],normal:yi.clone()})}}for(const m in d)if(d[m]){const{index0:g,index1:_}=d[m];Ht.fromBufferAttribute(s,g),Kt.fromBufferAttribute(s,_),p.push(Ht.x,Ht.y,Ht.z),p.push(Kt.x,Kt.y,Kt.z)}this.setAttribute(\"position\",new Mt(p,3))}}class Ln{constructor(){this.type=\"Curve\",this.arcLengthDivisions=200}getPoint(){return console.warn(\"THREE.Curve: .getPoint() not implemented.\"),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),o=0;t.push(0);for(let s=1;s<=e;s++)n=this.getPoint(s/e),o+=n.distanceTo(r),t.push(o),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const o=n.length;let s;s=t||e*n[o-1];let a,l=0,u=o-1;for(;l<=u;)if(r=Math.floor(l+(u-l)/2),a=n[r]-s,a<0)l=r+1;else{if(!(a>0)){u=r;break}u=r-1}if(r=u,n[r]===s)return r/(o-1);const h=n[r];return(r+(s-h)/(n[r+1]-h))/(o-1)}getTangent(e,t){let n=e-1e-4,r=e+1e-4;n<0&&(n=0),r>1&&(r=1);const o=this.getPoint(n),s=this.getPoint(r),a=t||(o.isVector2?new gt:new re);return a.copy(s).sub(o).normalize(),a}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new re,r=[],o=[],s=[],a=new re,l=new Ut;for(let m=0;m<=e;m++){const g=m/e;r[m]=this.getTangentAt(g,new re),r[m].normalize()}o[0]=new re,s[0]=new re;let u=Number.MAX_VALUE;const h=Math.abs(r[0].x),d=Math.abs(r[0].y),p=Math.abs(r[0].z);h<=u&&(u=h,n.set(1,0,0)),d<=u&&(u=d,n.set(0,1,0)),p<=u&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),o[0].crossVectors(r[0],a),s[0].crossVectors(r[0],o[0]);for(let m=1;m<=e;m++){if(o[m]=o[m-1].clone(),s[m]=s[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(Bi(r[m-1].dot(r[m]),-1,1));o[m].applyMatrix4(l.makeRotationAxis(a,g))}s[m].crossVectors(r[m],o[m])}if(t===!0){let m=Math.acos(Bi(o[0].dot(o[e]),-1,1));m/=e,r[0].dot(a.crossVectors(o[0],o[e]))>0&&(m=-m);for(let g=1;g<=e;g++)o[g].applyMatrix4(l.makeRotationAxis(r[g],m*g)),s[g].crossVectors(r[g],o[g])}return{tangents:r,normals:o,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:\"Curve\",generator:\"Curve.toJSON\"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Lr extends Ln{constructor(e=0,t=0,n=1,r=1,o=0,s=2*Math.PI,a=!1,l=0){super(),this.type=\"EllipseCurve\",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const n=t||new gt,r=2*Math.PI;let o=this.aEndAngle-this.aStartAngle;const s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=r;for(;o>r;)o-=r;o<Number.EPSILON&&(o=s?0:r),this.aClockwise!==!0||s||(o===r?o=-r:o-=r);const a=this.aStartAngle+e*o;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=l-this.aX,m=u-this.aY;l=p*h-m*d+this.aX,u=p*d+m*h+this.aY}return n.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}Lr.prototype.isEllipseCurve=!0;class To extends Lr{constructor(e,t,n,r,o,s){super(e,t,n,n,r,o,s),this.type=\"ArcCurve\"}}function Sa(){let i=0,e=0,t=0,n=0;function r(o,s,a,l){i=o,e=a,t=-3*o+3*s-2*a-l,n=2*o-2*s+a+l}return{initCatmullRom:function(o,s,a,l,u){r(s,a,u*(a-o),u*(l-s))},initNonuniformCatmullRom:function(o,s,a,l,u,h,d){let p=(s-o)/u-(a-o)/(u+h)+(a-s)/h,m=(a-s)/h-(l-s)/(h+d)+(l-a)/d;p*=h,m*=h,r(s,a,p,m)},calc:function(o){const s=o*o;return i+e*o+t*s+n*(s*o)}}}To.prototype.isArcCurve=!0;const Ta=new re,Ms=new Sa,Eo=new Sa,tc=new Sa;class nc extends Ln{constructor(e=[],t=!1,n=\"centripetal\",r=.5){super(),this.type=\"CatmullRomCurve3\",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new re){const n=t,r=this.points,o=r.length,s=(o-(this.closed?0:1))*e;let a,l,u=Math.floor(s),h=s-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/o)+1)*o:h===0&&u===o-1&&(u=o-2,h=1),this.closed||u>0?a=r[(u-1)%o]:(Ta.subVectors(r[0],r[1]).add(r[0]),a=Ta);const d=r[u%o],p=r[(u+1)%o];if(this.closed||u+2<o?l=r[(u+2)%o]:(Ta.subVectors(r[o-1],r[o-2]).add(r[o-1]),l=Ta),this.curveType===\"centripetal\"||this.curveType===\"chordal\"){const m=this.curveType===\"chordal\"?.5:.25;let g=Math.pow(a.distanceToSquared(d),m),_=Math.pow(d.distanceToSquared(p),m),y=Math.pow(p.distanceToSquared(l),m);_<1e-4&&(_=1),g<1e-4&&(g=_),y<1e-4&&(y=_),Ms.initNonuniformCatmullRom(a.x,d.x,p.x,l.x,g,_,y),Eo.initNonuniformCatmullRom(a.y,d.y,p.y,l.y,g,_,y),tc.initNonuniformCatmullRom(a.z,d.z,p.z,l.z,g,_,y)}else this.curveType===\"catmullrom\"&&(Ms.initCatmullRom(a.x,d.x,p.x,l.x,this.tension),Eo.initCatmullRom(a.y,d.y,p.y,l.y,this.tension),tc.initCatmullRom(a.z,d.z,p.z,l.z,this.tension));return n.set(Ms.calc(h),Eo.calc(h),tc.calc(h)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new re().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function ou(i,e,t,n,r){const o=.5*(n-e),s=.5*(r-t),a=i*i;return(2*t-2*n+o+s)*(i*a)+(-3*t+3*n-2*o-s)*a+o*i+t}function Ea(i,e,t,n){return function(r,o){const s=1-r;return s*s*o}(i,e)+function(r,o){return 2*(1-r)*r*o}(i,t)+function(r,o){return r*r*o}(i,n)}function As(i,e,t,n,r){return function(o,s){const a=1-o;return a*a*a*s}(i,e)+function(o,s){const a=1-o;return 3*a*a*o*s}(i,t)+function(o,s){return 3*(1-o)*o*o*s}(i,n)+function(o,s){return o*o*o*s}(i,r)}nc.prototype.isCatmullRomCurve3=!0;class Ma extends Ln{constructor(e=new gt,t=new gt,n=new gt,r=new gt){super(),this.type=\"CubicBezierCurve\",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new gt){const n=t,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return n.set(As(e,r.x,o.x,s.x,a.x),As(e,r.y,o.y,s.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Ma.prototype.isCubicBezierCurve=!0;class ic extends Ln{constructor(e=new re,t=new re,n=new re,r=new re){super(),this.type=\"CubicBezierCurve3\",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new re){const n=t,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return n.set(As(e,r.x,o.x,s.x,a.x),As(e,r.y,o.y,s.y,a.y),As(e,r.z,o.z,s.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}ic.prototype.isCubicBezierCurve3=!0;class Rs extends Ln{constructor(e=new gt,t=new gt){super(),this.type=\"LineCurve\",this.v1=e,this.v2=t}getPoint(e,t=new gt){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new gt;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Rs.prototype.isLineCurve=!0;class su extends Ln{constructor(e=new re,t=new re){super(),this.type=\"LineCurve3\",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new re){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class tm extends Ln{constructor(e=new gt,t=new gt,n=new gt){super(),this.type=\"QuadraticBezierCurve\",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new gt){const n=t,r=this.v0,o=this.v1,s=this.v2;return n.set(Ea(e,r.x,o.x,s.x),Ea(e,r.y,o.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}tm.prototype.isQuadraticBezierCurve=!0;class bv extends Ln{constructor(e=new re,t=new re,n=new re){super(),this.type=\"QuadraticBezierCurve3\",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new re){const n=t,r=this.v0,o=this.v1,s=this.v2;return n.set(Ea(e,r.x,o.x,s.x),Ea(e,r.y,o.y,s.y),Ea(e,r.z,o.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}bv.prototype.isQuadraticBezierCurve3=!0;class nm extends Ln{constructor(e=[]){super(),this.type=\"SplineCurve\",this.points=e}getPoint(e,t=new gt){const n=t,r=this.points,o=(r.length-1)*e,s=Math.floor(o),a=o-s,l=r[s===0?s:s-1],u=r[s],h=r[s>r.length-2?r.length-1:s+1],d=r[s>r.length-3?r.length-1:s+2];return n.set(ou(a,l.x,u.x,h.x,d.x),ou(a,l.y,u.y,h.y,d.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new gt().fromArray(r))}return this}}nm.prototype.isSplineCurve=!0;var wv=Object.freeze({__proto__:null,ArcCurve:To,CatmullRomCurve3:nc,CubicBezierCurve:Ma,CubicBezierCurve3:ic,EllipseCurve:Lr,LineCurve:Rs,LineCurve3:su,QuadraticBezierCurve:tm,QuadraticBezierCurve3:bv,SplineCurve:nm});const VT=function(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let o=sy(i,0,r,t,!0);const s=[];if(!o||o.next===o.prev)return s;let a,l,u,h,d,p,m;if(n&&(o=function(g,_,y,w){const R=[];let F,U,B,V,G;for(F=0,U=_.length;F<U;F++)B=_[F]*w,V=F<U-1?_[F+1]*w:g.length,G=sy(g,B,V,w,!1),G===G.next&&(G.steiner=!0),R.push(KT(G));for(R.sort($T),F=0;F<R.length;F++)JT(R[F],y),y=il(y,y.next);return y}(i,e,o,t)),i.length>80*t){a=u=i[0],l=h=i[1];for(let g=t;g<r;g+=t)d=i[g],p=i[g+1],d<a&&(a=d),p<l&&(l=p),d>u&&(u=d),p>h&&(h=p);m=Math.max(u-a,h-l),m=m!==0?1/m:0}return Xd(o,s,t,a,l,m),s};function sy(i,e,t,n,r){let o,s;if(r===function(a,l,u,h){let d=0;for(let p=l,m=u-h;p<u;p+=h)d+=(a[m]-a[p])*(a[p+1]+a[m+1]),m=p;return d}(i,e,t,n)>0)for(o=e;o<t;o+=n)s=uy(o,i[o],i[o+1],s);else for(o=t-n;o>=e;o-=n)s=uy(o,i[o],i[o+1],s);return s&&im(s,s.next)&&(Yd(s),s=s.next),s}function il(i,e){if(!i)return i;e||(e=i);let t,n=i;do if(t=!1,n.steiner||!im(n,n.next)&&xi(n.prev,n,n.next)!==0)n=n.next;else{if(Yd(n),n=e=n.prev,n===n.next)break;t=!0}while(t||n!==e);return e}function Xd(i,e,t,n,r,o,s){if(!i)return;!s&&o&&function(h,d,p,m){let g=h;do g.z===null&&(g.z=Sv(g.x,g.y,d,p,m)),g.prevZ=g.prev,g.nextZ=g.next,g=g.next;while(g!==h);g.prevZ.nextZ=null,g.prevZ=null,function(_){let y,w,R,F,U,B,V,G,W=1;do{for(w=_,_=null,U=null,B=0;w;){for(B++,R=w,V=0,y=0;y<W&&(V++,R=R.nextZ,R);y++);for(G=W;V>0||G>0&&R;)V!==0&&(G===0||!R||w.z<=R.z)?(F=w,w=w.nextZ,V--):(F=R,R=R.nextZ,G--),U?U.nextZ=F:_=F,F.prevZ=U,U=F;w=R}U.nextZ=null,W*=2}while(B>1)}(g)}(i,n,r,o);let a,l,u=i;for(;i.prev!==i.next;)if(a=i.prev,l=i.next,o?XT(i,n,r,o):WT(i))e.push(a.i/t),e.push(i.i/t),e.push(l.i/t),Yd(i),i=l.next,u=l.next;else if((i=l)===u){s?s===1?Xd(i=qT(il(i),e,t),e,t,n,r,o,2):s===2&&YT(i,e,t,n,r,o):Xd(il(i),e,t,n,r,o,1);break}}function WT(i){const e=i.prev,t=i,n=i.next;if(xi(e,t,n)>=0)return!1;let r=i.next.next;for(;r!==i.prev;){if(rc(e.x,e.y,t.x,t.y,n.x,n.y,r.x,r.y)&&xi(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function XT(i,e,t,n){const r=i.prev,o=i,s=i.next;if(xi(r,o,s)>=0)return!1;const a=r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,l=r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,u=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,h=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,d=Sv(a,l,e,t,n),p=Sv(u,h,e,t,n);let m=i.prevZ,g=i.nextZ;for(;m&&m.z>=d&&g&&g.z<=p;){if(m!==i.prev&&m!==i.next&&rc(r.x,r.y,o.x,o.y,s.x,s.y,m.x,m.y)&&xi(m.prev,m,m.next)>=0||(m=m.prevZ,g!==i.prev&&g!==i.next&&rc(r.x,r.y,o.x,o.y,s.x,s.y,g.x,g.y)&&xi(g.prev,g,g.next)>=0))return!1;g=g.nextZ}for(;m&&m.z>=d;){if(m!==i.prev&&m!==i.next&&rc(r.x,r.y,o.x,o.y,s.x,s.y,m.x,m.y)&&xi(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;g&&g.z<=p;){if(g!==i.prev&&g!==i.next&&rc(r.x,r.y,o.x,o.y,s.x,s.y,g.x,g.y)&&xi(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function qT(i,e,t){let n=i;do{const r=n.prev,o=n.next.next;!im(r,o)&&ay(r,n,n.next,o)&&qd(r,o)&&qd(o,r)&&(e.push(r.i/t),e.push(n.i/t),e.push(o.i/t),Yd(n),Yd(n.next),n=i=o),n=n.next}while(n!==i);return il(n)}function YT(i,e,t,n,r,o){let s=i;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&QT(s,a)){let l=ly(s,a);return s=il(s,s.next),l=il(l,l.next),Xd(s,e,t,n,r,o),void Xd(l,e,t,n,r,o)}a=a.next}s=s.next}while(s!==i)}function $T(i,e){return i.x-e.x}function JT(i,e){if(e=function(t,n){let r=n;const o=t.x,s=t.y;let a,l=-1/0;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){const g=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(g<=o&&g>l){if(l=g,g===o){if(s===r.y)return r;if(s===r.next.y)return r.next}a=r.x<r.next.x?r:r.next}}r=r.next}while(r!==n);if(!a)return null;if(o===l)return a;const u=a,h=a.x,d=a.y;let p,m=1/0;r=a;do o>=r.x&&r.x>=h&&o!==r.x&&rc(s<d?o:l,s,h,d,s<d?l:o,s,r.x,r.y)&&(p=Math.abs(s-r.y)/(o-r.x),qd(r,t)&&(p<m||p===m&&(r.x>a.x||r.x===a.x&&ZT(a,r)))&&(a=r,m=p)),r=r.next;while(r!==u);return a}(i,e)){const t=ly(e,i);il(e,e.next),il(t,t.next)}}function ZT(i,e){return xi(i.prev,i,e.prev)<0&&xi(e.next,i,i.next)<0}function Sv(i,e,t,n,r){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-t)*r)|i<<8))|i<<4))|i<<2))|i<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function KT(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function rc(i,e,t,n,r,o,s,a){return(r-s)*(e-a)-(i-s)*(o-a)>=0&&(i-s)*(n-a)-(t-s)*(e-a)>=0&&(t-s)*(o-a)-(r-s)*(n-a)>=0}function QT(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!function(t,n){let r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==n.i&&r.next.i!==n.i&&ay(r,r.next,t,n))return!0;r=r.next}while(r!==t);return!1}(i,e)&&(qd(i,e)&&qd(e,i)&&function(t,n){let r=t,o=!1;const s=(t.x+n.x)/2,a=(t.y+n.y)/2;do r.y>a!=r.next.y>a&&r.next.y!==r.y&&s<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(o=!o),r=r.next;while(r!==t);return o}(i,e)&&(xi(i.prev,i,e.prev)||xi(i,e.prev,e))||im(i,e)&&xi(i.prev,i,i.next)>0&&xi(e.prev,e,e.next)>0)}function xi(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function im(i,e){return i.x===e.x&&i.y===e.y}function ay(i,e,t,n){const r=om(xi(i,e,t)),o=om(xi(i,e,n)),s=om(xi(t,n,i)),a=om(xi(t,n,e));return r!==o&&s!==a||!(r!==0||!rm(i,t,e))||!(o!==0||!rm(i,n,e))||!(s!==0||!rm(t,i,n))||!(a!==0||!rm(t,e,n))}function rm(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function om(i){return i>0?1:i<0?-1:0}function qd(i,e){return xi(i.prev,i,i.next)<0?xi(i,e,i.next)>=0&&xi(i,i.prev,e)>=0:xi(i,e,i.prev)<0||xi(i,i.next,e)<0}function ly(i,e){const t=new Tv(i.i,i.x,i.y),n=new Tv(e.i,e.x,e.y),r=i.next,o=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,o.next=n,n.prev=o,n}function uy(i,e,t,n){const r=new Tv(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function Yd(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Tv(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Cs{static area(e){const t=e.length;let n=0;for(let r=t-1,o=0;o<t;r=o++)n+=e[r].x*e[o].y-e[o].x*e[r].y;return .5*n}static isClockWise(e){return Cs.area(e)<0}static triangulateShape(e,t){const n=[],r=[],o=[];hy(e),cy(n,e);let s=e.length;t.forEach(hy);for(let l=0;l<t.length;l++)r.push(s),s+=t[l].length,cy(n,t[l]);const a=VT(n,r);for(let l=0;l<a.length;l+=3)o.push(a.slice(l,l+3));return o}}function hy(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function cy(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class es extends Vt{constructor(e,t){super(),this.type=\"ExtrudeGeometry\",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],o=[];for(let a=0,l=e.length;a<l;a++)s(e[a]);function s(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1;let d=t.depth!==void 0?t.depth:100,p=t.bevelEnabled===void 0||t.bevelEnabled,m=t.bevelThickness!==void 0?t.bevelThickness:6,g=t.bevelSize!==void 0?t.bevelSize:m-2,_=t.bevelOffset!==void 0?t.bevelOffset:0,y=t.bevelSegments!==void 0?t.bevelSegments:3;const w=t.extrudePath,R=t.UVGenerator!==void 0?t.UVGenerator:eE;t.amount!==void 0&&(console.warn(\"THREE.ExtrudeBufferGeometry: amount has been renamed to depth.\"),d=t.amount);let F,U,B,V,G,W=!1;w&&(F=w.getSpacedPoints(h),W=!0,p=!1,U=w.computeFrenetFrames(h,!1),B=new re,V=new re,G=new re),p||(y=0,m=0,g=0,_=0);const ge=a.extractPoints(u);let he=ge.shape;const se=ge.holes;if(!Cs.isClockWise(he)){he=he.reverse();for(let Ke=0,oe=se.length;Ke<oe;Ke++){const Ee=se[Ke];Cs.isClockWise(Ee)&&(se[Ke]=Ee.reverse())}}const de=Cs.triangulateShape(he,se),ue=he;for(let Ke=0,oe=se.length;Ke<oe;Ke++){const Ee=se[Ke];he=he.concat(Ee)}function xe(Ke,oe,Ee){return oe||console.error(\"THREE.ExtrudeGeometry: vec does not exist\"),oe.clone().multiplyScalar(Ee).add(Ke)}const We=he.length,Ge=de.length;function Ae(Ke,oe,Ee){let He,ze,Pe;const tt=Ke.x-oe.x,It=Ke.y-oe.y,Nt=Ee.x-Ke.x,Ot=Ee.y-Ke.y,pn=tt*tt+It*It,Mi=tt*Ot-It*Nt;if(Math.abs(Mi)>Number.EPSILON){const zn=Math.sqrt(pn),qr=Math.sqrt(Nt*Nt+Ot*Ot),Dp=oe.x-It/zn,Fp=oe.y+tt/zn,Bp=((Ee.x-Ot/qr-Dp)*Ot-(Ee.y+Nt/qr-Fp)*Nt)/(tt*Ot-It*Nt);He=Dp+tt*Bp-Ke.x,ze=Fp+It*Bp-Ke.y;const Br=He*He+ze*ze;if(Br<=2)return new gt(He,ze);Pe=Math.sqrt(Br/2)}else{let zn=!1;tt>Number.EPSILON?Nt>Number.EPSILON&&(zn=!0):tt<-Number.EPSILON?Nt<-Number.EPSILON&&(zn=!0):Math.sign(It)===Math.sign(Ot)&&(zn=!0),zn?(He=-It,ze=tt,Pe=Math.sqrt(pn)):(He=tt,ze=It,Pe=Math.sqrt(pn/2))}return new gt(He/Pe,ze/Pe)}const Re=[];for(let Ke=0,oe=ue.length,Ee=oe-1,He=Ke+1;Ke<oe;Ke++,Ee++,He++)Ee===oe&&(Ee=0),He===oe&&(He=0),Re[Ke]=Ae(ue[Ke],ue[Ee],ue[He]);const Ze=[];let lt,dt=Re.concat();for(let Ke=0,oe=se.length;Ke<oe;Ke++){const Ee=se[Ke];lt=[];for(let He=0,ze=Ee.length,Pe=ze-1,tt=He+1;He<ze;He++,Pe++,tt++)Pe===ze&&(Pe=0),tt===ze&&(tt=0),lt[He]=Ae(Ee[He],Ee[Pe],Ee[tt]);Ze.push(lt),dt=dt.concat(lt)}for(let Ke=0;Ke<y;Ke++){const oe=Ke/y,Ee=m*Math.cos(oe*Math.PI/2),He=g*Math.sin(oe*Math.PI/2)+_;for(let ze=0,Pe=ue.length;ze<Pe;ze++){const tt=xe(ue[ze],Re[ze],He);Qe(tt.x,tt.y,-Ee)}for(let ze=0,Pe=se.length;ze<Pe;ze++){const tt=se[ze];lt=Ze[ze];for(let It=0,Nt=tt.length;It<Nt;It++){const Ot=xe(tt[It],lt[It],He);Qe(Ot.x,Ot.y,-Ee)}}}const ce=g+_;for(let Ke=0;Ke<We;Ke++){const oe=p?xe(he[Ke],dt[Ke],ce):he[Ke];W?(V.copy(U.normals[0]).multiplyScalar(oe.x),B.copy(U.binormals[0]).multiplyScalar(oe.y),G.copy(F[0]).add(V).add(B),Qe(G.x,G.y,G.z)):Qe(oe.x,oe.y,0)}for(let Ke=1;Ke<=h;Ke++)for(let oe=0;oe<We;oe++){const Ee=p?xe(he[oe],dt[oe],ce):he[oe];W?(V.copy(U.normals[Ke]).multiplyScalar(Ee.x),B.copy(U.binormals[Ke]).multiplyScalar(Ee.y),G.copy(F[Ke]).add(V).add(B),Qe(G.x,G.y,G.z)):Qe(Ee.x,Ee.y,d/h*Ke)}for(let Ke=y-1;Ke>=0;Ke--){const oe=Ke/y,Ee=m*Math.cos(oe*Math.PI/2),He=g*Math.sin(oe*Math.PI/2)+_;for(let ze=0,Pe=ue.length;ze<Pe;ze++){const tt=xe(ue[ze],Re[ze],He);Qe(tt.x,tt.y,d+Ee)}for(let ze=0,Pe=se.length;ze<Pe;ze++){const tt=se[ze];lt=Ze[ze];for(let It=0,Nt=tt.length;It<Nt;It++){const Ot=xe(tt[It],lt[It],He);W?Qe(Ot.x,Ot.y+F[h-1].y,F[h-1].x+Ee):Qe(Ot.x,Ot.y,d+Ee)}}}function fe(Ke,oe){let Ee=Ke.length;for(;--Ee>=0;){const He=Ee;let ze=Ee-1;ze<0&&(ze=Ke.length-1);for(let Pe=0,tt=h+2*y;Pe<tt;Pe++){const It=We*Pe,Nt=We*(Pe+1);je(oe+He+It,oe+ze+It,oe+ze+Nt,oe+He+Nt)}}}function Qe(Ke,oe,Ee){l.push(Ke),l.push(oe),l.push(Ee)}function Xe(Ke,oe,Ee){ft(Ke),ft(oe),ft(Ee);const He=r.length/3,ze=R.generateTopUV(n,r,He-3,He-2,He-1);mt(ze[0]),mt(ze[1]),mt(ze[2])}function je(Ke,oe,Ee,He){ft(Ke),ft(oe),ft(He),ft(oe),ft(Ee),ft(He);const ze=r.length/3,Pe=R.generateSideWallUV(n,r,ze-6,ze-3,ze-2,ze-1);mt(Pe[0]),mt(Pe[1]),mt(Pe[3]),mt(Pe[1]),mt(Pe[2]),mt(Pe[3])}function ft(Ke){r.push(l[3*Ke+0]),r.push(l[3*Ke+1]),r.push(l[3*Ke+2])}function mt(Ke){o.push(Ke.x),o.push(Ke.y)}(function(){const Ke=r.length/3;if(p){let oe=0,Ee=We*oe;for(let He=0;He<Ge;He++){const ze=de[He];Xe(ze[2]+Ee,ze[1]+Ee,ze[0]+Ee)}oe=h+2*y,Ee=We*oe;for(let He=0;He<Ge;He++){const ze=de[He];Xe(ze[0]+Ee,ze[1]+Ee,ze[2]+Ee)}}else{for(let oe=0;oe<Ge;oe++){const Ee=de[oe];Xe(Ee[2],Ee[1],Ee[0])}for(let oe=0;oe<Ge;oe++){const Ee=de[oe];Xe(Ee[0]+We*h,Ee[1]+We*h,Ee[2]+We*h)}}n.addGroup(Ke,r.length/3-Ke,0)})(),function(){const Ke=r.length/3;let oe=0;fe(ue,oe),oe+=ue.length;for(let Ee=0,He=se.length;Ee<He;Ee++){const ze=se[Ee];fe(ze,oe),oe+=ze.length}n.addGroup(Ke,r.length/3-Ke,1)}()}this.setAttribute(\"position\",new Mt(r,3)),this.setAttribute(\"uv\",new Mt(o,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function(t,n,r){if(r.shapes=[],Array.isArray(t))for(let o=0,s=t.length;o<s;o++){const a=t[o];r.shapes.push(a.uuid)}else r.shapes.push(t.uuid);return n.extrudePath!==void 0&&(r.options.extrudePath=n.extrudePath.toJSON()),r}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let o=0,s=e.shapes.length;o<s;o++){const a=t[e.shapes[o]];n.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new wv[r.type]().fromJSON(r)),new es(n,e.options)}}const eE={generateTopUV:function(i,e,t,n,r){const o=e[3*t],s=e[3*t+1],a=e[3*n],l=e[3*n+1],u=e[3*r],h=e[3*r+1];return[new gt(o,s),new gt(a,l),new gt(u,h)]},generateSideWallUV:function(i,e,t,n,r,o){const s=e[3*t],a=e[3*t+1],l=e[3*t+2],u=e[3*n],h=e[3*n+1],d=e[3*n+2],p=e[3*r],m=e[3*r+1],g=e[3*r+2],_=e[3*o],y=e[3*o+1],w=e[3*o+2];return Math.abs(a-h)<Math.abs(s-u)?[new gt(s,1-l),new gt(u,1-d),new gt(p,1-g),new gt(_,1-w)]:[new gt(a,1-l),new gt(h,1-d),new gt(m,1-g),new gt(y,1-w)]}};class oc extends zt{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type=\"IcosahedronGeometry\",this.parameters={radius:e,detail:t}}static fromJSON(e){return new oc(e.radius,e.detail)}}class sc extends Vt{constructor(e,t=12,n=0,r=2*Math.PI){super(),this.type=\"LatheGeometry\",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=Bi(r,0,2*Math.PI);const o=[],s=[],a=[],l=1/t,u=new re,h=new gt;for(let d=0;d<=t;d++){const p=n+d*l*r,m=Math.sin(p),g=Math.cos(p);for(let _=0;_<=e.length-1;_++)u.x=e[_].x*m,u.y=e[_].y,u.z=e[_].x*g,s.push(u.x,u.y,u.z),h.x=d/t,h.y=_/(e.length-1),a.push(h.x,h.y)}for(let d=0;d<t;d++)for(let p=0;p<e.length-1;p++){const m=p+d*e.length,g=m,_=m+e.length,y=m+e.length+1,w=m+1;o.push(g,_,w),o.push(_,y,w)}if(this.setIndex(o),this.setAttribute(\"position\",new Mt(s,3)),this.setAttribute(\"uv\",new Mt(a,2)),this.computeVertexNormals(),r===2*Math.PI){const d=this.attributes.normal.array,p=new re,m=new re,g=new re,_=t*e.length*3;for(let y=0,w=0;y<e.length;y++,w+=3)p.x=d[w+0],p.y=d[w+1],p.z=d[w+2],m.x=d[_+w+0],m.y=d[_+w+1],m.z=d[_+w+2],g.addVectors(p,m).normalize(),d[w+0]=d[_+w+0]=g.x,d[w+1]=d[_+w+1]=g.y,d[w+2]=d[_+w+2]=g.z}}static fromJSON(e){return new sc(e.points,e.segments,e.phiStart,e.phiLength)}}class au extends zt{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type=\"OctahedronGeometry\",this.parameters={radius:e,detail:t}}static fromJSON(e){return new au(e.radius,e.detail)}}class $d extends Vt{constructor(e,t,n){super(),this.type=\"ParametricGeometry\",this.parameters={func:e,slices:t,stacks:n};const r=[],o=[],s=[],a=[],l=1e-5,u=new re,h=new re,d=new re,p=new re,m=new re;e.length<3&&console.error(\"THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.\");const g=t+1;for(let _=0;_<=n;_++){const y=_/n;for(let w=0;w<=t;w++){const R=w/t;e(R,y,h),o.push(h.x,h.y,h.z),R-l>=0?(e(R-l,y,d),p.subVectors(h,d)):(e(R+l,y,d),p.subVectors(d,h)),y-l>=0?(e(R,y-l,d),m.subVectors(h,d)):(e(R,y+l,d),m.subVectors(d,h)),u.crossVectors(p,m).normalize(),s.push(u.x,u.y,u.z),a.push(R,y)}}for(let _=0;_<n;_++)for(let y=0;y<t;y++){const w=_*g+y,R=_*g+y+1,F=(_+1)*g+y+1,U=(_+1)*g+y;r.push(w,R,U),r.push(R,F,U)}this.setIndex(r),this.setAttribute(\"position\",new Mt(o,3)),this.setAttribute(\"normal\",new Mt(s,3)),this.setAttribute(\"uv\",new Mt(a,2))}}class ac extends Vt{constructor(e=.5,t=1,n=8,r=1,o=0,s=2*Math.PI){super(),this.type=\"RingGeometry\",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:o,thetaLength:s},n=Math.max(3,n);const a=[],l=[],u=[],h=[];let d=e;const p=(t-e)/(r=Math.max(1,r)),m=new re,g=new gt;for(let _=0;_<=r;_++){for(let y=0;y<=n;y++){const w=o+y/n*s;m.x=d*Math.cos(w),m.y=d*Math.sin(w),l.push(m.x,m.y,m.z),u.push(0,0,1),g.x=(m.x/t+1)/2,g.y=(m.y/t+1)/2,h.push(g.x,g.y)}d+=p}for(let _=0;_<r;_++){const y=_*(n+1);for(let w=0;w<n;w++){const R=w+y,F=R,U=R+n+1,B=R+n+2,V=R+1;a.push(F,U,V),a.push(U,B,V)}}this.setIndex(a),this.setAttribute(\"position\",new Mt(l,3)),this.setAttribute(\"normal\",new Mt(u,3)),this.setAttribute(\"uv\",new Mt(h,2))}static fromJSON(e){return new ac(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class lu extends Vt{constructor(e,t=12){super(),this.type=\"ShapeGeometry\",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],o=[],s=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let h=0;h<e.length;h++)u(e[h]),this.addGroup(a,l,h),a+=l,l=0;function u(h){const d=r.length/3,p=h.extractPoints(t);let m=p.shape;const g=p.holes;Cs.isClockWise(m)===!1&&(m=m.reverse());for(let y=0,w=g.length;y<w;y++){const R=g[y];Cs.isClockWise(R)===!0&&(g[y]=R.reverse())}const _=Cs.triangulateShape(m,g);for(let y=0,w=g.length;y<w;y++){const R=g[y];m=m.concat(R)}for(let y=0,w=m.length;y<w;y++){const R=m[y];r.push(R.x,R.y,0),o.push(0,0,1),s.push(R.x,R.y)}for(let y=0,w=_.length;y<w;y++){const R=_[y],F=R[0]+d,U=R[1]+d,B=R[2]+d;n.push(F,U,B),l+=3}}this.setIndex(n),this.setAttribute(\"position\",new Mt(r,3)),this.setAttribute(\"normal\",new Mt(o,3)),this.setAttribute(\"uv\",new Mt(s,2))}toJSON(){const e=super.toJSON();return function(t,n){if(n.shapes=[],Array.isArray(t))for(let r=0,o=t.length;r<o;r++){const s=t[r];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let r=0,o=e.shapes.length;r<o;r++){const s=t[e.shapes[r]];n.push(s)}return new lu(n,e.curveSegments)}}class uu extends Vt{constructor(e=1,t=8,n=6,r=0,o=2*Math.PI,s=0,a=Math.PI){super(),this.type=\"SphereGeometry\",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:o,thetaStart:s,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(s+a,Math.PI);let u=0;const h=[],d=new re,p=new re,m=[],g=[],_=[],y=[];for(let w=0;w<=n;w++){const R=[],F=w/n;let U=0;w==0&&s==0?U=.5/t:w==n&&l==Math.PI&&(U=-.5/t);for(let B=0;B<=t;B++){const V=B/t;d.x=-e*Math.cos(r+V*o)*Math.sin(s+F*a),d.y=e*Math.cos(s+F*a),d.z=e*Math.sin(r+V*o)*Math.sin(s+F*a),g.push(d.x,d.y,d.z),p.copy(d).normalize(),_.push(p.x,p.y,p.z),y.push(V+U,1-F),R.push(u++)}h.push(R)}for(let w=0;w<n;w++)for(let R=0;R<t;R++){const F=h[w][R+1],U=h[w][R],B=h[w+1][R],V=h[w+1][R+1];(w!==0||s>0)&&m.push(F,U,V),(w!==n-1||l<Math.PI)&&m.push(U,B,V)}this.setIndex(m),this.setAttribute(\"position\",new Mt(g,3)),this.setAttribute(\"normal\",new Mt(_,3)),this.setAttribute(\"uv\",new Mt(y,2))}static fromJSON(e){return new uu(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class lc extends zt{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type=\"TetrahedronGeometry\",this.parameters={radius:e,detail:t}}static fromJSON(e){return new lc(e.radius,e.detail)}}class sm extends es{constructor(e,t={}){const n=t.font;if(!n||!n.isFont)return console.error(\"THREE.TextGeometry: font parameter is not an instance of THREE.Font.\"),new Vt;const r=n.generateShapes(e,t.size);t.depth=t.height!==void 0?t.height:50,t.bevelThickness===void 0&&(t.bevelThickness=10),t.bevelSize===void 0&&(t.bevelSize=8),t.bevelEnabled===void 0&&(t.bevelEnabled=!1),super(r,t),this.type=\"TextGeometry\"}}class uc extends Vt{constructor(e=1,t=.4,n=8,r=6,o=2*Math.PI){super(),this.type=\"TorusGeometry\",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:o},n=Math.floor(n),r=Math.floor(r);const s=[],a=[],l=[],u=[],h=new re,d=new re,p=new re;for(let m=0;m<=n;m++)for(let g=0;g<=r;g++){const _=g/r*o,y=m/n*Math.PI*2;d.x=(e+t*Math.cos(y))*Math.cos(_),d.y=(e+t*Math.cos(y))*Math.sin(_),d.z=t*Math.sin(y),a.push(d.x,d.y,d.z),h.x=e*Math.cos(_),h.y=e*Math.sin(_),p.subVectors(d,h).normalize(),l.push(p.x,p.y,p.z),u.push(g/r),u.push(m/n)}for(let m=1;m<=n;m++)for(let g=1;g<=r;g++){const _=(r+1)*m+g-1,y=(r+1)*(m-1)+g-1,w=(r+1)*(m-1)+g,R=(r+1)*m+g;s.push(_,y,R),s.push(y,w,R)}this.setIndex(s),this.setAttribute(\"position\",new Mt(a,3)),this.setAttribute(\"normal\",new Mt(l,3)),this.setAttribute(\"uv\",new Mt(u,2))}static fromJSON(e){return new uc(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class hc extends Vt{constructor(e=1,t=.4,n=64,r=8,o=2,s=3){super(),this.type=\"TorusKnotGeometry\",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:o,q:s},n=Math.floor(n),r=Math.floor(r);const a=[],l=[],u=[],h=[],d=new re,p=new re,m=new re,g=new re,_=new re,y=new re,w=new re;for(let F=0;F<=n;++F){const U=F/n*o*Math.PI*2;R(U,o,s,e,m),R(U+.01,o,s,e,g),y.subVectors(g,m),w.addVectors(g,m),_.crossVectors(y,w),w.crossVectors(_,y),_.normalize(),w.normalize();for(let B=0;B<=r;++B){const V=B/r*Math.PI*2,G=-t*Math.cos(V),W=t*Math.sin(V);d.x=m.x+(G*w.x+W*_.x),d.y=m.y+(G*w.y+W*_.y),d.z=m.z+(G*w.z+W*_.z),l.push(d.x,d.y,d.z),p.subVectors(d,m).normalize(),u.push(p.x,p.y,p.z),h.push(F/n),h.push(B/r)}}for(let F=1;F<=n;F++)for(let U=1;U<=r;U++){const B=(r+1)*(F-1)+(U-1),V=(r+1)*F+(U-1),G=(r+1)*F+U,W=(r+1)*(F-1)+U;a.push(B,V,W),a.push(V,G,W)}function R(F,U,B,V,G){const W=Math.cos(F),ge=Math.sin(F),he=B/U*F,se=Math.cos(he);G.x=V*(2+se)*.5*W,G.y=V*(2+se)*ge*.5,G.z=V*Math.sin(he)*.5}this.setIndex(a),this.setAttribute(\"position\",new Mt(l,3)),this.setAttribute(\"normal\",new Mt(u,3)),this.setAttribute(\"uv\",new Mt(h,2))}static fromJSON(e){return new hc(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class cc extends Vt{constructor(e,t=64,n=1,r=8,o=!1){super(),this.type=\"TubeGeometry\",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:o};const s=e.computeFrenetFrames(t,o);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const a=new re,l=new re,u=new gt;let h=new re;const d=[],p=[],m=[],g=[];function _(y){h=e.getPointAt(y/t,h);const w=s.normals[y],R=s.binormals[y];for(let F=0;F<=r;F++){const U=F/r*Math.PI*2,B=Math.sin(U),V=-Math.cos(U);l.x=V*w.x+B*R.x,l.y=V*w.y+B*R.y,l.z=V*w.z+B*R.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=h.x+n*l.x,a.y=h.y+n*l.y,a.z=h.z+n*l.z,d.push(a.x,a.y,a.z)}}(function(){for(let y=0;y<t;y++)_(y);_(o===!1?t:0),function(){for(let y=0;y<=t;y++)for(let w=0;w<=r;w++)u.x=y/t,u.y=w/r,m.push(u.x,u.y)}(),function(){for(let y=1;y<=t;y++)for(let w=1;w<=r;w++){const R=(r+1)*(y-1)+(w-1),F=(r+1)*y+(w-1),U=(r+1)*y+w,B=(r+1)*(y-1)+w;g.push(R,F,B),g.push(F,U,B)}}()})(),this.setIndex(g),this.setAttribute(\"position\",new Mt(d,3)),this.setAttribute(\"normal\",new Mt(p,3)),this.setAttribute(\"uv\",new Mt(m,2))}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new cc(new wv[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Ev extends Vt{constructor(e){if(super(),this.type=\"WireframeGeometry\",e.isGeometry===!0)return void console.error(\"THREE.WireframeGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.\");const t=[],n=[0,0],r={},o=new re;if(e.index!==null){const s=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,h=l.length;u<h;++u){const d=l[u],p=d.start;for(let m=p,g=p+d.count;m<g;m+=3)for(let _=0;_<3;_++){const y=a.getX(m+_),w=a.getX(m+(_+1)%3);n[0]=Math.min(y,w),n[1]=Math.max(y,w);const R=n[0]+\",\"+n[1];r[R]===void 0&&(r[R]={index1:n[0],index2:n[1]})}}for(const u in r){const h=r[u];o.fromBufferAttribute(s,h.index1),t.push(o.x,o.y,o.z),o.fromBufferAttribute(s,h.index2),t.push(o.x,o.y,o.z)}}else{const s=e.attributes.position;for(let a=0,l=s.count/3;a<l;a++)for(let u=0;u<3;u++){const h=3*a+u;o.fromBufferAttribute(s,h),t.push(o.x,o.y,o.z);const d=3*a+(u+1)%3;o.fromBufferAttribute(s,d),t.push(o.x,o.y,o.z)}}this.setAttribute(\"position\",new Mt(t,3))}}var dy=Object.freeze({__proto__:null,BoxGeometry:Xo,BoxBufferGeometry:Xo,CircleGeometry:Yt,CircleBufferGeometry:Yt,ConeGeometry:$t,ConeBufferGeometry:$t,CylinderGeometry:Lt,CylinderBufferGeometry:Lt,DodecahedronGeometry:dn,DodecahedronBufferGeometry:dn,EdgesGeometry:Wr,ExtrudeGeometry:es,ExtrudeBufferGeometry:es,IcosahedronGeometry:oc,IcosahedronBufferGeometry:oc,LatheGeometry:sc,LatheBufferGeometry:sc,OctahedronGeometry:au,OctahedronBufferGeometry:au,ParametricGeometry:$d,ParametricBufferGeometry:$d,PlaneGeometry:di,PlaneBufferGeometry:di,PolyhedronGeometry:zt,PolyhedronBufferGeometry:zt,RingGeometry:ac,RingBufferGeometry:ac,ShapeGeometry:lu,ShapeBufferGeometry:lu,SphereGeometry:uu,SphereBufferGeometry:uu,TetrahedronGeometry:lc,TetrahedronBufferGeometry:lc,TextGeometry:sm,TextBufferGeometry:sm,TorusGeometry:uc,TorusBufferGeometry:uc,TorusKnotGeometry:hc,TorusKnotBufferGeometry:hc,TubeGeometry:cc,TubeBufferGeometry:cc,WireframeGeometry:Ev});class Mv extends ki{constructor(e){super(),this.type=\"ShadowMaterial\",this.color=new Et(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}Mv.prototype.isShadowMaterial=!0;class dc extends ir{constructor(e){super(e),this.type=\"RawShaderMaterial\"}}dc.prototype.isRawShaderMaterial=!0;class am extends ki{constructor(e){super(),this.defines={STANDARD:\"\"},this.type=\"MeshStandardMaterial\",this.color=new Et(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vo,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=\"round\",this.wireframeLinejoin=\"round\",this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.vertexTangents=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:\"\"},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this.vertexTangents=e.vertexTangents,this}}am.prototype.isMeshStandardMaterial=!0;class Av extends am{constructor(e){super(),this.defines={STANDARD:\"\",PHYSICAL:\"\"},this.type=\"MeshPhysicalMaterial\",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new gt(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,\"ior\",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(t){this.reflectivity=Bi(2.5*(t-1)/(t+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Et(1,1,1),this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:\"\",PHYSICAL:\"\"},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new Et).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this}}Av.prototype.isMeshPhysicalMaterial=!0;class lm extends ki{constructor(e){super(),this.type=\"MeshPhongMaterial\",this.color=new Et(16777215),this.specular=new Et(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vo,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Po,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=\"round\",this.wireframeLinejoin=\"round\",this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}lm.prototype.isMeshPhongMaterial=!0;class Rv extends ki{constructor(e){super(),this.defines={TOON:\"\"},this.type=\"MeshToonMaterial\",this.color=new Et(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vo,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=\"round\",this.wireframeLinejoin=\"round\",this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}}Rv.prototype.isMeshToonMaterial=!0;class Cv extends ki{constructor(e){super(),this.type=\"MeshNormalMaterial\",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vo,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}Cv.prototype.isMeshNormalMaterial=!0;class um extends ki{constructor(e){super(),this.type=\"MeshLambertMaterial\",this.color=new Et(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Po,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=\"round\",this.wireframeLinejoin=\"round\",this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}}um.prototype.isMeshLambertMaterial=!0;class Pv extends ki{constructor(e){super(),this.defines={MATCAP:\"\"},this.type=\"MeshMatcapMaterial\",this.color=new Et(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vo,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:\"\"},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}Pv.prototype.isMeshMatcapMaterial=!0;class Iv extends Gi{constructor(e){super(),this.type=\"LineDashedMaterial\",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}Iv.prototype.isLineDashedMaterial=!0;var tE=Object.freeze({__proto__:null,ShadowMaterial:Mv,SpriteMaterial:eu,RawShaderMaterial:dc,ShaderMaterial:ir,PointsMaterial:pe,MeshPhysicalMaterial:Av,MeshStandardMaterial:am,MeshPhongMaterial:lm,MeshToonMaterial:Rv,MeshNormalMaterial:Cv,MeshLambertMaterial:um,MeshDepthMaterial:$l,MeshDistanceMaterial:Jl,MeshBasicMaterial:$i,MeshMatcapMaterial:Pv,LineDashedMaterial:Iv,LineBasicMaterial:Gi,Material:ki});const ai={arraySlice:function(i,e,t){return ai.isTypedArray(i)?new i.constructor(i.subarray(e,t!==void 0?t:i.length)):i.slice(e,t)},convertArray:function(i,e,t){return!i||!t&&i.constructor===e?i:typeof e.BYTES_PER_ELEMENT==\"number\"?new e(i):Array.prototype.slice.call(i)},isTypedArray:function(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)},getKeyframeOrder:function(i){const e=i.length,t=new Array(e);for(let n=0;n!==e;++n)t[n]=n;return t.sort(function(n,r){return i[n]-i[r]}),t},sortedArray:function(i,e,t){const n=i.length,r=new i.constructor(n);for(let o=0,s=0;s!==n;++o){const a=t[o]*e;for(let l=0;l!==e;++l)r[s++]=i[a+l]}return r},flattenJSON:function(i,e,t,n){let r=1,o=i[0];for(;o!==void 0&&o[n]===void 0;)o=i[r++];if(o===void 0)return;let s=o[n];if(s!==void 0)if(Array.isArray(s))do s=o[n],s!==void 0&&(e.push(o.time),t.push.apply(t,s)),o=i[r++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[n],s!==void 0&&(e.push(o.time),s.toArray(t,t.length)),o=i[r++];while(o!==void 0);else do s=o[n],s!==void 0&&(e.push(o.time),t.push(s)),o=i[r++];while(o!==void 0)},subclip:function(i,e,t,n,r=30){const o=i.clone();o.name=e;const s=[];for(let l=0;l<o.tracks.length;++l){const u=o.tracks[l],h=u.getValueSize(),d=[],p=[];for(let m=0;m<u.times.length;++m){const g=u.times[m]*r;if(!(g<t||g>=n)){d.push(u.times[m]);for(let _=0;_<h;++_)p.push(u.values[m*h+_])}}d.length!==0&&(u.times=ai.convertArray(d,u.times.constructor),u.values=ai.convertArray(p,u.values.constructor),s.push(u))}o.tracks=s;let a=1/0;for(let l=0;l<o.tracks.length;++l)a>o.tracks[l].times[0]&&(a=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*a);return o.resetDuration(),o},makeClipAdditive:function(i,e=0,t=i,n=30){n<=0&&(n=30);const r=t.tracks.length,o=e/n;for(let s=0;s<r;++s){const a=t.tracks[s],l=a.ValueTypeName;if(l===\"bool\"||l===\"string\")continue;const u=i.tracks.find(function(w){return w.name===a.name&&w.ValueTypeName===l});if(u===void 0)continue;let h=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=d/3);let p=0;const m=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const g=a.times.length-1;let _;if(o<=a.times[0]){const w=h,R=d-h;_=ai.arraySlice(a.values,w,R)}else if(o>=a.times[g]){const w=g*d+h,R=w+d-h;_=ai.arraySlice(a.values,w,R)}else{const w=a.createInterpolant(),R=h,F=d-h;w.evaluate(o),_=ai.arraySlice(w.resultBuffer,R,F)}l===\"quaternion\"&&new Y().fromArray(_).normalize().conjugate().toArray(_);const y=u.times.length;for(let w=0;w<y;++w){const R=w*m+p;if(l===\"quaternion\")Y.multiplyQuaternionsFlat(u.values,R,_,0,u.values,R);else{const F=m-2*p;for(let U=0;U<F;++U)u.values[R+U]-=_[U]}}}return i.blendMode=it,i}};class Aa{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],o=t[n-1];e:{t:{let s;n:{i:if(!(e<r)){for(let a=n+2;;){if(r===void 0){if(e<o)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,o)}if(n===a)break;if(o=r,r=t[++n],e<r)break t}s=t.length;break n}if(e>=o)break e;{const a=t[1];e<a&&(n=2,o=a);for(let l=n-2;;){if(o===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===l)break;if(r=o,o=t[--n-1],e>=o)break t}s=n,n=0}}for(;n<s;){const a=n+s>>>1;e<t[a]?s=a:n=a+1}if(r=t[n],o=t[n-1],o===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(r===void 0)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,o,e)}this._cachedIndex=n,this.intervalChanged_(n,o,r)}return this.interpolate_(n,o,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,o=e*r;for(let s=0;s!==r;++s)t[s]=n[o+s];return t}interpolate_(){throw new Error(\"call to abstract method\")}intervalChanged_(){}}Aa.prototype.beforeStart_=Aa.prototype.copySampleValue_,Aa.prototype.afterEnd_=Aa.prototype.copySampleValue_;class py extends Aa{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ms,endingEnd:ms}}intervalChanged_(e,t,n){const r=this.parameterPositions;let o=e-2,s=e+1,a=r[o],l=r[s];if(a===void 0)switch(this.getSettings_().endingStart){case Js:o=e,a=2*t-n;break;case gs:o=r.length-2,a=t+r[o]-r[o+1];break;default:o=e,a=n}if(l===void 0)switch(this.getSettings_().endingEnd){case Js:s=e,l=2*n-t;break;case gs:s=1,l=n+r[1]-r[0];break;default:s=e-1,l=t}const u=.5*(n-t),h=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-n),this._offsetPrev=o*h,this._offsetNext=s*h}interpolate_(e,t,n,r){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,h=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,m=this._weightNext,g=(n-t)/(r-t),_=g*g,y=_*g,w=-p*y+2*p*_-p*g,R=(1+p)*y+(-1.5-2*p)*_+(-.5+p)*g+1,F=(-1-m)*y+(1.5+m)*_+.5*g,U=m*y-m*_;for(let B=0;B!==a;++B)o[B]=w*s[h+B]+R*s[u+B]+F*s[l+B]+U*s[d+B];return o}}class Ov extends Aa{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,h=(n-t)/(r-t),d=1-h;for(let p=0;p!==a;++p)o[p]=s[u+p]*d+s[l+p]*h;return o}}class fy extends Aa{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class ts{constructor(e,t,n,r){if(e===void 0)throw new Error(\"THREE.KeyframeTrack: track name is undefined\");if(t===void 0||t.length===0)throw new Error(\"THREE.KeyframeTrack: no keyframes in track named \"+e);this.name=e,this.times=ai.convertArray(t,this.TimeBufferType),this.values=ai.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:ai.convertArray(e.times,Array),values:ai.convertArray(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new fy(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Ov(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new py(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Al:t=this.InterpolantFactoryMethodDiscrete;break;case go:t=this.InterpolantFactoryMethodLinear;break;case cr:t=this.InterpolantFactoryMethodSmooth}if(t===void 0){const n=\"unsupported interpolation for \"+this.ValueTypeName+\" keyframe track named \"+this.name;if(this.createInterpolant===void 0){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn(\"THREE.KeyframeTrack:\",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Al;case this.InterpolantFactoryMethodLinear:return go;case this.InterpolantFactoryMethodSmooth:return cr}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let o=0,s=r-1;for(;o!==r&&n[o]<e;)++o;for(;s!==-1&&n[s]>t;)--s;if(++s,o!==0||s!==r){o>=s&&(s=Math.max(s,1),o=s-1);const a=this.getValueSize();this.times=ai.arraySlice(n,o,s),this.values=ai.arraySlice(this.values,o*a,s*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error(\"THREE.KeyframeTrack: Invalid value size in track.\",this),e=!1);const n=this.times,r=this.values,o=n.length;o===0&&(console.error(\"THREE.KeyframeTrack: Track is empty.\",this),e=!1);let s=null;for(let a=0;a!==o;a++){const l=n[a];if(typeof l==\"number\"&&isNaN(l)){console.error(\"THREE.KeyframeTrack: Time is not a valid number.\",this,a,l),e=!1;break}if(s!==null&&s>l){console.error(\"THREE.KeyframeTrack: Out of order keys.\",this,a,l,s),e=!1;break}s=l}if(r!==void 0&&ai.isTypedArray(r))for(let a=0,l=r.length;a!==l;++a){const u=r[a];if(isNaN(u)){console.error(\"THREE.KeyframeTrack: Value is not a valid number.\",this,a,u),e=!1;break}}return e}optimize(){const e=ai.arraySlice(this.times),t=ai.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===cr,o=e.length-1;let s=1;for(let a=1;a<o;++a){let l=!1;const u=e[a];if(u!==e[a+1]&&(a!==1||u!==e[0]))if(r)l=!0;else{const h=a*n,d=h-n,p=h+n;for(let m=0;m!==n;++m){const g=t[h+m];if(g!==t[d+m]||g!==t[p+m]){l=!0;break}}}if(l){if(a!==s){e[s]=e[a];const h=a*n,d=s*n;for(let p=0;p!==n;++p)t[d+p]=t[h+p]}++s}}if(o>0){e[s]=e[o];for(let a=o*n,l=s*n,u=0;u!==n;++u)t[l+u]=t[a+u];++s}return s!==e.length?(this.times=ai.arraySlice(e,0,s),this.values=ai.arraySlice(t,0,s*n)):(this.times=e,this.values=t),this}clone(){const e=ai.arraySlice(this.times,0),t=ai.arraySlice(this.values,0),n=new this.constructor(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}ts.prototype.TimeBufferType=Float32Array,ts.prototype.ValueBufferType=Float32Array,ts.prototype.DefaultInterpolation=go;class hu extends ts{}hu.prototype.ValueTypeName=\"bool\",hu.prototype.ValueBufferType=Array,hu.prototype.DefaultInterpolation=Al,hu.prototype.InterpolantFactoryMethodLinear=void 0,hu.prototype.InterpolantFactoryMethodSmooth=void 0;class Lv extends ts{}Lv.prototype.ValueTypeName=\"color\";class Jd extends ts{}Jd.prototype.ValueTypeName=\"number\";class my extends Aa{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=(n-t)/(r-t);let u=e*a;for(let h=u+a;u!==h;u+=4)Y.slerpFlat(o,0,s,u-a,s,u,l);return o}}class pc extends ts{InterpolantFactoryMethodLinear(e){return new my(this.times,this.values,this.getValueSize(),e)}}pc.prototype.ValueTypeName=\"quaternion\",pc.prototype.DefaultInterpolation=go,pc.prototype.InterpolantFactoryMethodSmooth=void 0;class cu extends ts{}cu.prototype.ValueTypeName=\"string\",cu.prototype.ValueBufferType=Array,cu.prototype.DefaultInterpolation=Al,cu.prototype.InterpolantFactoryMethodLinear=void 0,cu.prototype.InterpolantFactoryMethodSmooth=void 0;class Zd extends ts{}Zd.prototype.ValueTypeName=\"vector\";class Kd{constructor(e,t=-1,n,r=Ue){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Ar(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let s=0,a=n.length;s!==a;++s)t.push(nE(n[s]).scale(r));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,s=n.length;o!==s;++o)t.push(ts.toJSON(n[o]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const o=t.length,s=[];for(let a=0;a<o;a++){let l=[],u=[];l.push((a+o-1)%o,a,(a+1)%o),u.push(0,1,0);const h=ai.getKeyframeOrder(l);l=ai.sortedArray(l,1,h),u=ai.sortedArray(u,1,h),r||l[0]!==0||(l.push(o),u.push(u[0])),s.push(new Jd(\".morphTargetInfluences[\"+t[a].name+\"]\",l,u).scale(1/n))}return new this(e,-1,s)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},o=/^([\\w-]*?)([\\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],h=u.name.match(o);if(h&&h.length>1){const d=h[1];let p=r[d];p||(r[d]=p=[]),p.push(u)}}const s=[];for(const a in r)s.push(this.CreateFromMorphTargetSequence(a,r[a],t,n));return s}static parseAnimation(e,t){if(!e)return console.error(\"THREE.AnimationClip: No animation in JSONLoader data.\"),null;const n=function(h,d,p,m,g){if(p.length!==0){const _=[],y=[];ai.flattenJSON(p,_,y,m),_.length!==0&&g.push(new h(d,_,y))}},r=[],o=e.name||\"default\",s=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let h=0;h<u.length;h++){const d=u[h].keys;if(d&&d.length!==0)if(d[0].morphTargets){const p={};let m;for(m=0;m<d.length;m++)if(d[m].morphTargets)for(let g=0;g<d[m].morphTargets.length;g++)p[d[m].morphTargets[g]]=-1;for(const g in p){const _=[],y=[];for(let w=0;w!==d[m].morphTargets.length;++w){const R=d[m];_.push(R.time),y.push(R.morphTarget===g?1:0)}r.push(new Jd(\".morphTargetInfluence[\"+g+\"]\",_,y))}l=p.length*(s||1)}else{const p=\".bones[\"+t[h].name+\"]\";n(Zd,p+\".position\",d,\"pos\",r),n(pc,p+\".quaternion\",d,\"rot\",r),n(Zd,p+\".scale\",d,\"scl\",r)}}return r.length===0?null:new this(o,l,r,a)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function nE(i){if(i.type===void 0)throw new Error(\"THREE.KeyframeTrack: track type undefined, can not parse\");const e=function(t){switch(t.toLowerCase()){case\"scalar\":case\"double\":case\"float\":case\"number\":case\"integer\":return Jd;case\"vector\":case\"vector2\":case\"vector3\":case\"vector4\":return Zd;case\"color\":return Lv;case\"quaternion\":return pc;case\"bool\":case\"boolean\":return hu;case\"string\":return cu}throw new Error(\"THREE.KeyframeTrack: Unsupported typeName: \"+t)}(i.type);if(i.times===void 0){const t=[],n=[];ai.flattenJSON(i.keys,t,n,\"value\"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const du={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class Nv{constructor(e,t,n){const r=this;let o=!1,s=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(h){a++,o===!1&&r.onStart!==void 0&&r.onStart(h,s,a),o=!0},this.itemEnd=function(h){s++,r.onProgress!==void 0&&r.onProgress(h,s,a),s===a&&(o=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,d){return u.push(h,d),this},this.removeHandler=function(h){const d=u.indexOf(h);return d!==-1&&u.splice(d,2),this},this.getHandler=function(h){for(let d=0,p=u.length;d<p;d+=2){const m=u[d],g=u[d+1];if(m.global&&(m.lastIndex=0),m.test(h))return g}return null}}}const gy=new Nv;class vr{constructor(e){this.manager=e!==void 0?e:gy,this.crossOrigin=\"anonymous\",this.withCredentials=!1,this.path=\"\",this.resourcePath=\"\",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,o){n.load(e,r,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const ns={};class is extends vr{constructor(e){super(e)}load(e,t,n,r){e===void 0&&(e=\"\"),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=du.get(e);if(s!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s;if(ns[e]!==void 0)return void ns[e].push({onLoad:t,onProgress:n,onError:r});const a=e.match(/^data:(.*?)(;base64)?,(.*)$/);let l;if(a){const u=a[1],h=!!a[2];let d=a[3];d=decodeURIComponent(d),h&&(d=atob(d));try{let p;const m=(this.responseType||\"\").toLowerCase();switch(m){case\"arraybuffer\":case\"blob\":const g=new Uint8Array(d.length);for(let y=0;y<d.length;y++)g[y]=d.charCodeAt(y);p=m===\"blob\"?new Blob([g.buffer],{type:u}):g.buffer;break;case\"document\":p=new DOMParser().parseFromString(d,u);break;case\"json\":p=JSON.parse(d);break;default:p=d}setTimeout(function(){t&&t(p),o.manager.itemEnd(e)},0)}catch(p){setTimeout(function(){r&&r(p),o.manager.itemError(e),o.manager.itemEnd(e)},0)}}else{ns[e]=[],ns[e].push({onLoad:t,onProgress:n,onError:r}),l=new XMLHttpRequest,l.open(\"GET\",e,!0),l.addEventListener(\"load\",function(u){const h=this.response,d=ns[e];if(delete ns[e],this.status===200||this.status===0){this.status===0&&console.warn(\"THREE.FileLoader: HTTP Status 0 received.\"),du.add(e,h);for(let p=0,m=d.length;p<m;p++){const g=d[p];g.onLoad&&g.onLoad(h)}o.manager.itemEnd(e)}else{for(let p=0,m=d.length;p<m;p++){const g=d[p];g.onError&&g.onError(u)}o.manager.itemError(e),o.manager.itemEnd(e)}},!1),l.addEventListener(\"progress\",function(u){const h=ns[e];for(let d=0,p=h.length;d<p;d++){const m=h[d];m.onProgress&&m.onProgress(u)}},!1),l.addEventListener(\"error\",function(u){const h=ns[e];delete ns[e];for(let d=0,p=h.length;d<p;d++){const m=h[d];m.onError&&m.onError(u)}o.manager.itemError(e),o.manager.itemEnd(e)},!1),l.addEventListener(\"abort\",function(u){const h=ns[e];delete ns[e];for(let d=0,p=h.length;d<p;d++){const m=h[d];m.onError&&m.onError(u)}o.manager.itemError(e),o.manager.itemEnd(e)},!1),this.responseType!==void 0&&(l.responseType=this.responseType),this.withCredentials!==void 0&&(l.withCredentials=this.withCredentials),l.overrideMimeType&&l.overrideMimeType(this.mimeType!==void 0?this.mimeType:\"text/plain\");for(const u in this.requestHeader)l.setRequestHeader(u,this.requestHeader[u]);l.send(null)}return o.manager.itemStart(e),l}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class iE extends vr{constructor(e){super(e)}load(e,t,n,r){const o=this,s=new is(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){try{t(o.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),o.manager.itemError(e)}},n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=Kd.parse(e[n]);t.push(r)}return t}}class rE extends vr{constructor(e){super(e)}load(e,t,n,r){const o=this,s=[],a=new Wt,l=new is(this.manager);l.setPath(this.path),l.setResponseType(\"arraybuffer\"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(o.withCredentials);let u=0;function h(d){l.load(e[d],function(p){const m=o.parse(p,!0);s[d]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},u+=1,u===6&&(m.mipmapCount===1&&(a.minFilter=Kn),a.image=s,a.format=m.format,a.needsUpdate=!0,t&&t(a))},n,r)}if(Array.isArray(e))for(let d=0,p=e.length;d<p;++d)h(d);else l.load(e,function(d){const p=o.parse(d,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let g=0;g<m;g++){s[g]={mipmaps:[]};for(let _=0;_<p.mipmapCount;_++)s[g].mipmaps.push(p.mipmaps[g*p.mipmapCount+_]),s[g].format=p.format,s[g].width=p.width,s[g].height=p.height}a.image=s}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=Kn),a.format=p.format,a.needsUpdate=!0,t&&t(a)},n,r);return a}}class Qd extends vr{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=du.get(e);if(s!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s;const a=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"img\");function l(){a.removeEventListener(\"load\",l,!1),a.removeEventListener(\"error\",u,!1),du.add(e,this),t&&t(this),o.manager.itemEnd(e)}function u(h){a.removeEventListener(\"load\",l,!1),a.removeEventListener(\"error\",u,!1),r&&r(h),o.manager.itemError(e),o.manager.itemEnd(e)}return a.addEventListener(\"load\",l,!1),a.addEventListener(\"error\",u,!1),e.substr(0,5)!==\"data:\"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(e),a.src=e,a}}class vy extends vr{constructor(e){super(e)}load(e,t,n,r){const o=new jt,s=new Qd(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function l(u){s.load(e[u],function(h){o.images[u]=h,a++,a===6&&(o.needsUpdate=!0,t&&t(o))},void 0,r)}for(let u=0;u<e.length;++u)l(u);return o}}class _y extends vr{constructor(e){super(e)}load(e,t,n,r){const o=this,s=new Es,a=new is(this.manager);return a.setResponseType(\"arraybuffer\"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(o.withCredentials),a.load(e,function(l){const u=o.parse(l);u&&(u.image!==void 0?s.image=u.image:u.data!==void 0&&(s.image.width=u.width,s.image.height=u.height,s.image.data=u.data),s.wrapS=u.wrapS!==void 0?u.wrapS:Tt,s.wrapT=u.wrapT!==void 0?u.wrapT:Tt,s.magFilter=u.magFilter!==void 0?u.magFilter:Kn,s.minFilter=u.minFilter!==void 0?u.minFilter:Kn,s.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.encoding!==void 0&&(s.encoding=u.encoding),u.flipY!==void 0&&(s.flipY=u.flipY),u.format!==void 0&&(s.format=u.format),u.type!==void 0&&(s.type=u.type),u.mipmaps!==void 0&&(s.mipmaps=u.mipmaps,s.minFilter=ps),u.mipmapCount===1&&(s.minFilter=Kn),u.generateMipmaps!==void 0&&(s.generateMipmaps=u.generateMipmaps),s.needsUpdate=!0,t&&t(s,u))},n,r),s}}class Dv extends vr{constructor(e){super(e)}load(e,t,n,r){const o=new gi,s=new Qd(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){o.image=a;const l=e.search(/\\.jpe?g($|\\?)/i)>0||e.search(/^data\\:image\\/jpeg/)===0;o.format=l?Lo:Tr,o.needsUpdate=!0,t!==void 0&&t(o)},n,r),o}}class yy extends Ln{constructor(){super(),this.type=\"CurvePath\",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Rs(t,e))}getPoint(e){const t=e*this.getLength(),n=this.getCurveLengths();let r=0;for(;r<n.length;){if(n[r]>=t){const o=n[r]-t,s=this.curves[r],a=s.getLength(),l=a===0?0:1-o/a;return s.getPointAt(l)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,o=this.curves;r<o.length;r++){const s=o[r],a=s&&s.isEllipseCurve?2*e:s&&(s.isLineCurve||s.isLineCurve3)?1:s&&s.isSplineCurve?e*s.points.length:e,l=s.getPoints(a);for(let u=0;u<l.length;u++){const h=l[u];n&&n.equals(h)||(t.push(h),n=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(new wv[r.type]().fromJSON(r))}return this}}class pu extends yy{constructor(e){super(),this.type=\"Path\",this.currentPoint=new gt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Rs(this.currentPoint.clone(),new gt(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const o=new tm(this.currentPoint.clone(),new gt(e,t),new gt(n,r));return this.curves.push(o),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,o,s){const a=new Ma(this.currentPoint.clone(),new gt(e,t),new gt(n,r),new gt(o,s));return this.curves.push(a),this.currentPoint.set(o,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new nm(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,o,s){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,n,r,o,s),this}absarc(e,t,n,r,o,s){return this.absellipse(e,t,n,n,r,o,s),this}ellipse(e,t,n,r,o,s,a,l){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+u,t+h,n,r,o,s,a,l),this}absellipse(e,t,n,r,o,s,a,l){const u=new Lr(e,t,n,r,o,s,a,l);if(this.curves.length>0){const d=u.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(u);const h=u.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class rl extends pu{constructor(e){super(e),this.uuid=Ar(),this.type=\"Shape\",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(new pu().fromJSON(r))}return this}}class rs extends yn{constructor(e,t=1){super(),this.type=\"Light\",this.color=new Et(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}rs.prototype.isLight=!0;class Fv extends rs{constructor(e,t,n){super(e,n),this.type=\"HemisphereLight\",this.position.copy(yn.DefaultUp),this.updateMatrix(),this.groundColor=new Et(t)}copy(e){return rs.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}Fv.prototype.isHemisphereLight=!0;const xy=new Ut,by=new re,wy=new re;class Bv{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new gt(512,512),this.map=null,this.mapPass=null,this.matrix=new Ut,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ja,this._frameExtents=new gt(1,1),this._viewportCount=1,this._viewports=[new Un(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;by.setFromMatrixPosition(e.matrixWorld),t.position.copy(by),wy.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(wy),t.updateMatrixWorld(),xy.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(xy),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),this.mapSize.x===512&&this.mapSize.y===512||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Sy extends Bv{constructor(){super(new ci(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,n=2*Cl*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;n===t.fov&&r===t.aspect&&o===t.far||(t.fov=n,t.aspect=r,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}Sy.prototype.isSpotLightShadow=!0;class kv extends rs{constructor(e,t,n=0,r=Math.PI/3,o=0,s=1){super(e,t),this.type=\"SpotLight\",this.position.copy(yn.DefaultUp),this.updateMatrix(),this.target=new yn,this.distance=n,this.angle=r,this.penumbra=o,this.decay=s,this.shadow=new Sy}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}kv.prototype.isSpotLight=!0;const Ty=new Ut,ep=new re,Uv=new re;class Ey extends Bv{constructor(){super(new ci(90,1,.5,500)),this._frameExtents=new gt(4,2),this._viewportCount=6,this._viewports=[new Un(2,1,1,1),new Un(0,1,1,1),new Un(3,1,1,1),new Un(1,1,1,1),new Un(3,0,1,1),new Un(1,0,1,1)],this._cubeDirections=[new re(1,0,0),new re(-1,0,0),new re(0,0,1),new re(0,0,-1),new re(0,1,0),new re(0,-1,0)],this._cubeUps=[new re(0,1,0),new re(0,1,0),new re(0,1,0),new re(0,1,0),new re(0,0,1),new re(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,o=e.distance||n.far;o!==n.far&&(n.far=o,n.updateProjectionMatrix()),ep.setFromMatrixPosition(e.matrixWorld),n.position.copy(ep),Uv.copy(n.position),Uv.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Uv),n.updateMatrixWorld(),r.makeTranslation(-ep.x,-ep.y,-ep.z),Ty.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ty)}}Ey.prototype.isPointLightShadow=!0;class Gv extends rs{constructor(e,t,n=0,r=1){super(e,t),this.type=\"PointLight\",this.distance=n,this.decay=r,this.shadow=new Ey}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}Gv.prototype.isPointLight=!0;class fc extends va{constructor(e=-1,t=1,n=1,r=-1,o=.1,s=2e3){super(),this.type=\"OrthographicCamera\",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let o=n-e,s=n+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=u*this.view.offsetX,s=o+u*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}fc.prototype.isOrthographicCamera=!0;class My extends Bv{constructor(){super(new fc(-5,5,5,-5,.5,500))}}My.prototype.isDirectionalLightShadow=!0;class hm extends rs{constructor(e,t){super(e,t),this.type=\"DirectionalLight\",this.position.copy(yn.DefaultUp),this.updateMatrix(),this.target=new yn,this.shadow=new My}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}hm.prototype.isDirectionalLight=!0;class cm extends rs{constructor(e,t){super(e,t),this.type=\"AmbientLight\"}}cm.prototype.isAmbientLight=!0;class Hv extends rs{constructor(e,t,n=10,r=10){super(e,t),this.type=\"RectAreaLight\",this.width=n,this.height=r}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}Hv.prototype.isRectAreaLight=!0;class zv{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new re)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,o=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*r),t.addScaledVector(s[2],.488603*o),t.addScaledVector(s[3],.488603*n),t.addScaledVector(s[4],n*r*1.092548),t.addScaledVector(s[5],r*o*1.092548),t.addScaledVector(s[6],.315392*(3*o*o-1)),t.addScaledVector(s[7],n*o*1.092548),t.addScaledVector(s[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,o=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],1.023328*r),t.addScaledVector(s[2],1.023328*o),t.addScaledVector(s[3],1.023328*n),t.addScaledVector(s[4],.858086*n*r),t.addScaledVector(s[5],.858086*r*o),t.addScaledVector(s[6],.743125*o*o-.247708),t.addScaledVector(s[7],.858086*n*o),t.addScaledVector(s[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,o=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*o,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*o,t[6]=.315392*(3*o*o-1),t[7]=1.092548*n*o,t[8]=.546274*(n*n-r*r)}}zv.prototype.isSphericalHarmonics3=!0;class tp extends rs{constructor(e=new zv,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}tp.prototype.isLightProbe=!0;class Ay extends vr{constructor(e){super(e),this.textures={}}load(e,t,n,r){const o=this,s=new is(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(a){try{t(o.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),o.manager.itemError(e)}},n,r)}parse(e){const t=this.textures;function n(o){return t[o]===void 0&&console.warn(\"THREE.MaterialLoader: Undefined texture\",o),t[o]}const r=new tE[e.type];if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=new Et().setHex(e.sheen)),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.morphTargets!==void 0&&(r.morphTargets=e.morphTargets),e.morphNormals!==void 0&&(r.morphNormals=e.morphNormals),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.vertexTangents!==void 0&&(r.vertexTangents=e.vertexTangents),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors==\"number\"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const o in e.uniforms){const s=e.uniforms[o];switch(r.uniforms[o]={},s.type){case\"t\":r.uniforms[o].value=n(s.value);break;case\"c\":r.uniforms[o].value=new Et().setHex(s.value);break;case\"v2\":r.uniforms[o].value=new gt().fromArray(s.value);break;case\"v3\":r.uniforms[o].value=new re().fromArray(s.value);break;case\"v4\":r.uniforms[o].value=new Un().fromArray(s.value);break;case\"m3\":r.uniforms[o].value=new Qn().fromArray(s.value);break;case\"m4\":r.uniforms[o].value=new Ut().fromArray(s.value);break;default:r.uniforms[o].value=s.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const o in e.extensions)r.extensions[o]=e.extensions[o];if(e.shading!==void 0&&(r.flatShading=e.shading===1),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=n(e.map)),e.matcap!==void 0&&(r.matcap=n(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),r.normalScale=new gt().fromArray(o)}return e.displacementMap!==void 0&&(r.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=n(e.specularMap)),e.envMap!==void 0&&(r.envMap=n(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new gt().fromArray(e.clearcoatNormalScale)),e.transmissionMap!==void 0&&(r.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=n(e.thicknessMap)),r}setTextures(e){return this.textures=e,this}}class dm{static decodeText(e){if(typeof TextDecoder!=\"undefined\")return new TextDecoder().decode(e);let t=\"\";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf(\"/\");return t===-1?\"./\":e.substr(0,t+1)}}class jv extends Vt{constructor(){super(),this.type=\"InstancedBufferGeometry\",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}jv.prototype.isInstancedBufferGeometry=!0;class Vv extends mn{constructor(e,t,n,r=1){typeof n==\"number\"&&(r=n,n=!1,console.error(\"THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.\")),super(e,t,n),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}Vv.prototype.isInstancedBufferAttribute=!0;class Ry extends vr{constructor(e){super(e)}load(e,t,n,r){const o=this,s=new is(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(a){try{t(o.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),o.manager.itemError(e)}},n,r)}parse(e){const t={},n={};function r(d,p){if(t[p]!==void 0)return t[p];const m=d.interleavedBuffers[p],g=function(w,R){if(n[R]!==void 0)return n[R];const F=w.arrayBuffers[R],U=new Uint32Array(F).buffer;return n[R]=U,U}(d,m.buffer),_=da(m.type,g),y=new xa(_,m.stride);return y.uuid=m.uuid,t[p]=y,y}const o=e.isInstancedBufferGeometry?new jv:new Vt,s=e.data.index;if(s!==void 0){const d=da(s.type,s.array);o.setIndex(new mn(d,1))}const a=e.data.attributes;for(const d in a){const p=a[d];let m;if(p.isInterleavedBufferAttribute){const g=r(e.data,p.data);m=new Qo(g,p.itemSize,p.offset,p.normalized)}else{const g=da(p.type,p.array);m=new(p.isInstancedBufferAttribute?Vv:mn)(g,p.itemSize,p.normalized)}p.name!==void 0&&(m.name=p.name),p.usage!==void 0&&m.setUsage(p.usage),p.updateRange!==void 0&&(m.updateRange.offset=p.updateRange.offset,m.updateRange.count=p.updateRange.count),o.setAttribute(d,m)}const l=e.data.morphAttributes;if(l)for(const d in l){const p=l[d],m=[];for(let g=0,_=p.length;g<_;g++){const y=p[g];let w;if(y.isInterleavedBufferAttribute){const R=r(e.data,y.data);w=new Qo(R,y.itemSize,y.offset,y.normalized)}else{const R=da(y.type,y.array);w=new mn(R,y.itemSize,y.normalized)}y.name!==void 0&&(w.name=y.name),m.push(w)}o.morphAttributes[d]=m}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const u=e.data.groups||e.data.drawcalls||e.data.offsets;if(u!==void 0)for(let d=0,p=u.length;d!==p;++d){const m=u[d];o.addGroup(m.start,m.count,m.materialIndex)}const h=e.data.boundingSphere;if(h!==void 0){const d=new re;h.center!==void 0&&d.fromArray(h.center),o.boundingSphere=new Go(d,h.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class oE extends vr{constructor(e){super(e)}load(e,t,n,r){const o=this,s=this.path===\"\"?dm.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const a=new is(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(d){return r!==void 0&&r(d),void console.error(\"THREE:ObjectLoader: Can't parse \"+e+\".\",d.message)}const h=u.metadata;h!==void 0&&h.type!==void 0&&h.type.toLowerCase()!==\"geometry\"?o.parse(u,t):console.error(\"THREE.ObjectLoader: Can't load \"+e)},n,r)}async loadAsync(e,t){const n=this.path===\"\"?dm.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const r=new is(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const o=await r.loadAsync(e,t),s=JSON.parse(o),a=s.metadata;if(a===void 0||a.type===void 0||a.type.toLowerCase()===\"geometry\")throw new Error(\"THREE.ObjectLoader: Can't load \"+e);return await this.parseAsync(s)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,r),s=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,o,l,a,n),h=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,h),t!==void 0){let d=!1;for(const p in s)if(s[p]instanceof HTMLImageElement){d=!0;break}d===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),o=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,o),a=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,r,a,s,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const t={};if(e!==void 0)for(let n=0,r=e.length;n<r;n++){const o=new rl().fromJSON(e[n]);t[o.uuid]=o}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse(function(o){o.isBone&&(r[o.uuid]=o)}),e!==void 0)for(let o=0,s=e.length;o<s;o++){const a=new Jh().fromJSON(e[o],r);n[a.uuid]=a}return n}parseGeometries(e,t){const n={};if(e!==void 0){const r=new Ry;for(let o=0,s=e.length;o<s;o++){let a;const l=e[o];switch(l.type){case\"BufferGeometry\":case\"InstancedBufferGeometry\":a=r.parse(l);break;case\"Geometry\":console.error(\"THREE.ObjectLoader: The legacy Geometry type is no longer supported.\");break;default:l.type in dy?a=dy[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type \"${l.type}\"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),a.isBufferGeometry===!0&&l.userData!==void 0&&(a.userData=l.userData),n[l.uuid]=a}}return n}parseMaterials(e,t){const n={},r={};if(e!==void 0){const o=new Ay;o.setTextures(t);for(let s=0,a=e.length;s<a;s++){const l=e[s];if(l.type===\"MultiMaterial\"){const u=[];for(let h=0;h<l.materials.length;h++){const d=l.materials[h];n[d.uuid]===void 0&&(n[d.uuid]=o.parse(d)),u.push(n[d.uuid])}r[l.uuid]=u}else n[l.uuid]===void 0&&(n[l.uuid]=o.parse(l)),r[l.uuid]=n[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const r=e[n],o=Kd.parse(r);t[o.uuid]=o}return t}parseImages(e,t){const n=this,r={};let o;function s(a){if(typeof a==\"string\"){const l=a;return function(u){return n.manager.itemStart(u),o.load(u,function(){n.manager.itemEnd(u)},void 0,function(){n.manager.itemError(u),n.manager.itemEnd(u)})}(/^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test(l)?l:n.resourcePath+l)}return a.data?{data:da(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){const a=new Nv(t);o=new Qd(a),o.setCrossOrigin(this.crossOrigin);for(let l=0,u=e.length;l<u;l++){const h=e[l],d=h.url;if(Array.isArray(d)){r[h.uuid]=[];for(let p=0,m=d.length;p<m;p++){const g=s(d[p]);g!==null&&(g instanceof HTMLImageElement?r[h.uuid].push(g):r[h.uuid].push(new Es(g.data,g.width,g.height)))}}else{const p=s(h.url);p!==null&&(r[h.uuid]=p)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function o(s){if(typeof s==\"string\"){const a=s,l=/^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}return s.data?{data:da(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){r=new Qd(this.manager),r.setCrossOrigin(this.crossOrigin);for(let s=0,a=e.length;s<a;s++){const l=e[s],u=l.url;if(Array.isArray(u)){n[l.uuid]=[];for(let h=0,d=u.length;h<d;h++){const p=u[h],m=await o(p);m!==null&&(m instanceof HTMLImageElement?n[l.uuid].push(m):n[l.uuid].push(new Es(m.data,m.width,m.height)))}}else{const h=await o(l.url);h!==null&&(n[l.uuid]=h)}}}return n}parseTextures(e,t){function n(o,s){return typeof o==\"number\"?o:(console.warn(\"THREE.ObjectLoader.parseTexture: Constant should be in numeric form.\",o),s[o])}const r={};if(e!==void 0)for(let o=0,s=e.length;o<s;o++){const a=e[o];let l;a.image===void 0&&console.warn('THREE.ObjectLoader: No \"image\" specified for',a.uuid),t[a.image]===void 0&&console.warn(\"THREE.ObjectLoader: Undefined image\",a.image);const u=t[a.image];Array.isArray(u)?(l=new jt(u),u.length===6&&(l.needsUpdate=!0)):(l=u&&u.data?new Es(u.data,u.width,u.height):new gi(u),u&&(l.needsUpdate=!0)),l.uuid=a.uuid,a.name!==void 0&&(l.name=a.name),a.mapping!==void 0&&(l.mapping=n(a.mapping,sE)),a.offset!==void 0&&l.offset.fromArray(a.offset),a.repeat!==void 0&&l.repeat.fromArray(a.repeat),a.center!==void 0&&l.center.fromArray(a.center),a.rotation!==void 0&&(l.rotation=a.rotation),a.wrap!==void 0&&(l.wrapS=n(a.wrap[0],Cy),l.wrapT=n(a.wrap[1],Cy)),a.format!==void 0&&(l.format=a.format),a.type!==void 0&&(l.type=a.type),a.encoding!==void 0&&(l.encoding=a.encoding),a.minFilter!==void 0&&(l.minFilter=n(a.minFilter,Py)),a.magFilter!==void 0&&(l.magFilter=n(a.magFilter,Py)),a.anisotropy!==void 0&&(l.anisotropy=a.anisotropy),a.flipY!==void 0&&(l.flipY=a.flipY),a.premultiplyAlpha!==void 0&&(l.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(l.unpackAlignment=a.unpackAlignment),r[a.uuid]=l}return r}parseObject(e,t,n,r,o){let s,a,l;function u(p){return t[p]===void 0&&console.warn(\"THREE.ObjectLoader: Undefined geometry\",p),t[p]}function h(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let g=0,_=p.length;g<_;g++){const y=p[g];n[y]===void 0&&console.warn(\"THREE.ObjectLoader: Undefined material\",y),m.push(n[y])}return m}return n[p]===void 0&&console.warn(\"THREE.ObjectLoader: Undefined material\",p),n[p]}}function d(p){return r[p]===void 0&&console.warn(\"THREE.ObjectLoader: Undefined texture\",p),r[p]}switch(e.type){case\"Scene\":s=new Ql,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new Et(e.background):s.background=d(e.background)),e.environment!==void 0&&(s.environment=d(e.environment)),e.fog!==void 0&&(e.fog.type===\"Fog\"?s.fog=new el(e.fog.color,e.fog.near,e.fog.far):e.fog.type===\"FogExp2\"&&(s.fog=new Kl(e.fog.color,e.fog.density)));break;case\"PerspectiveCamera\":s=new ci(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case\"OrthographicCamera\":s=new fc(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case\"AmbientLight\":s=new cm(e.color,e.intensity);break;case\"DirectionalLight\":s=new hm(e.color,e.intensity);break;case\"PointLight\":s=new Gv(e.color,e.intensity,e.distance,e.decay);break;case\"RectAreaLight\":s=new Hv(e.color,e.intensity,e.width,e.height);break;case\"SpotLight\":s=new kv(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case\"HemisphereLight\":s=new Fv(e.color,e.groundColor,e.intensity);break;case\"LightProbe\":s=new tp().fromJSON(e);break;case\"SkinnedMesh\":a=u(e.geometry),l=h(e.material),s=new Yh(a,l),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case\"Mesh\":a=u(e.geometry),l=h(e.material),s=new Xn(a,l);break;case\"InstancedMesh\":a=u(e.geometry),l=h(e.material);const p=e.count,m=e.instanceMatrix,g=e.instanceColor;s=new Vd(a,l,p),s.instanceMatrix=new mn(new Float32Array(m.array),16),g!==void 0&&(s.instanceColor=new mn(new Float32Array(g.array),g.itemSize));break;case\"LOD\":s=new sr;break;case\"Line\":s=new f(u(e.geometry),h(e.material));break;case\"LineLoop\":s=new ie(u(e.geometry),h(e.material));break;case\"LineSegments\":s=new k(u(e.geometry),h(e.material));break;case\"PointCloud\":case\"Points\":s=new vt(u(e.geometry),h(e.material));break;case\"Sprite\":s=new Vh(h(e.material));break;case\"Group\":s=new Ko;break;case\"Bone\":s=new $h;break;default:s=new yn}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)s.add(this.parseObject(p[m],t,n,r,o))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const g=p[m];s.animations.push(o[g])}}if(e.type===\"LOD\"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const g=p[m],_=s.getObjectByProperty(\"uuid\",g.object);_!==void 0&&s.addLevel(_,g.distance)}}return s}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const r=t[n.skeleton];r===void 0?console.warn(\"THREE.ObjectLoader: No skeleton found with UUID:\",n.skeleton):n.bind(r,n.bindMatrix)}})}setTexturePath(e){return console.warn(\"THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath().\"),this.setResourcePath(e)}}const sE={UVMapping:le,CubeReflectionMapping:ve,CubeRefractionMapping:we,EquirectangularReflectionMapping:Se,EquirectangularRefractionMapping:ke,CubeUVReflectionMapping:$e,CubeUVRefractionMapping:ct},Cy={RepeatWrapping:Pt,ClampToEdgeWrapping:Tt,MirroredRepeatWrapping:un},Py={NearestFilter:wn,NearestMipmapNearestFilter:Di,NearestMipmapLinearFilter:fo,LinearFilter:Kn,LinearMipmapNearestFilter:Gu,LinearMipmapLinearFilter:ps};class Iy extends vr{constructor(e){super(e),typeof createImageBitmap==\"undefined\"&&console.warn(\"THREE.ImageBitmapLoader: createImageBitmap() not supported.\"),typeof fetch==\"undefined\"&&console.warn(\"THREE.ImageBitmapLoader: fetch() not supported.\"),this.options={premultiplyAlpha:\"none\"}}setOptions(e){return this.options=e,this}load(e,t,n,r){e===void 0&&(e=\"\"),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=du.get(e);if(s!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s;const a={};a.credentials=this.crossOrigin===\"anonymous\"?\"same-origin\":\"include\",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(o.options,{colorSpaceConversion:\"none\"}))}).then(function(l){du.add(e,l),t&&t(l),o.manager.itemEnd(e)}).catch(function(l){r&&r(l),o.manager.itemError(e),o.manager.itemEnd(e)}),o.manager.itemStart(e)}}Iy.prototype.isImageBitmapLoader=!0;class Oy{constructor(){this.type=\"ShapePath\",this.color=new Et,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new pu,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,o,s){return this.currentPath.bezierCurveTo(e,t,n,r,o,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function n(R){const F=[];for(let U=0,B=R.length;U<B;U++){const V=R[U],G=new rl;G.curves=V.curves,F.push(G)}return F}function r(R,F){const U=F.length;let B=!1;for(let V=U-1,G=0;G<U;V=G++){let W=F[V],ge=F[G],he=ge.x-W.x,se=ge.y-W.y;if(Math.abs(se)>Number.EPSILON){if(se<0&&(W=F[G],he=-he,ge=F[V],se=-se),R.y<W.y||R.y>ge.y)continue;if(R.y===W.y){if(R.x===W.x)return!0}else{const de=se*(R.x-W.x)-he*(R.y-W.y);if(de===0)return!0;if(de<0)continue;B=!B}}else{if(R.y!==W.y)continue;if(ge.x<=R.x&&R.x<=W.x||W.x<=R.x&&R.x<=ge.x)return!0}}return B}const o=Cs.isClockWise,s=this.subPaths;if(s.length===0)return[];if(t===!0)return n(s);let a,l,u;const h=[];if(s.length===1)return l=s[0],u=new rl,u.curves=l.curves,h.push(u),h;let d=!o(s[0].getPoints());d=e?!d:d;const p=[],m=[];let g,_,y=[],w=0;m[w]=void 0,y[w]=[];for(let R=0,F=s.length;R<F;R++)l=s[R],g=l.getPoints(),a=o(g),a=e?!a:a,a?(!d&&m[w]&&w++,m[w]={s:new rl,p:g},m[w].s.curves=l.curves,d&&w++,y[w]=[]):y[w].push({h:l,p:g[0]});if(!m[0])return n(s);if(m.length>1){let R=!1;const F=[];for(let U=0,B=m.length;U<B;U++)p[U]=[];for(let U=0,B=m.length;U<B;U++){const V=y[U];for(let G=0;G<V.length;G++){const W=V[G];let ge=!0;for(let he=0;he<m.length;he++)r(W.p,m[he].p)&&(U!==he&&F.push({froms:U,tos:he,hole:G}),ge?(ge=!1,p[he].push(W)):R=!0);ge&&p[U].push(W)}}F.length>0&&(R||(y=p))}for(let R=0,F=m.length;R<F;R++){u=m[R].s,h.push(u),_=y[R];for(let U=0,B=_.length;U<B;U++)u.holes.push(_[U].h)}return h}}class Wv{constructor(e){this.type=\"Font\",this.data=e}generateShapes(e,t=100){const n=[],r=function(o,s,a){const l=Array.from(o),u=s/a.resolution,h=(a.boundingBox.yMax-a.boundingBox.yMin+a.underlineThickness)*u,d=[];let p=0,m=0;for(let g=0;g<l.length;g++){const _=l[g];if(_===`\n`)p=0,m-=h;else{const y=aE(_,u,p,m,a);p+=y.offsetX,d.push(y.path)}}return d}(e,t,this.data);for(let o=0,s=r.length;o<s;o++)Array.prototype.push.apply(n,r[o].toShapes());return n}}function aE(i,e,t,n,r){const o=r.glyphs[i]||r.glyphs[\"?\"];if(!o)return void console.error('THREE.Font: character \"'+i+'\" does not exists in font family '+r.familyName+\".\");const s=new Oy;let a,l,u,h,d,p,m,g;if(o.o){const _=o._cachedOutline||(o._cachedOutline=o.o.split(\" \"));for(let y=0,w=_.length;y<w;)switch(_[y++]){case\"m\":a=_[y++]*e+t,l=_[y++]*e+n,s.moveTo(a,l);break;case\"l\":a=_[y++]*e+t,l=_[y++]*e+n,s.lineTo(a,l);break;case\"q\":u=_[y++]*e+t,h=_[y++]*e+n,d=_[y++]*e+t,p=_[y++]*e+n,s.quadraticCurveTo(d,p,u,h);break;case\"b\":u=_[y++]*e+t,h=_[y++]*e+n,d=_[y++]*e+t,p=_[y++]*e+n,m=_[y++]*e+t,g=_[y++]*e+n,s.bezierCurveTo(d,p,m,g,u,h)}}return{offsetX:o.ha*e,path:s}}Wv.prototype.isFont=!0;class lE extends vr{constructor(e){super(e)}load(e,t,n,r){const o=this,s=new is(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(a){let l;try{l=JSON.parse(a)}catch{console.warn(\"THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.\"),l=JSON.parse(a.substring(65,a.length-2))}const u=o.parse(l);t&&t(u)},n,r)}parse(e){return new Wv(e)}}let pm;const Xv={getContext:function(){return pm===void 0&&(pm=new(window.AudioContext||window.webkitAudioContext)),pm},setContext:function(i){pm=i}};class Ly extends vr{constructor(e){super(e)}load(e,t,n,r){const o=this,s=new is(this.manager);s.setResponseType(\"arraybuffer\"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){try{const l=a.slice(0);Xv.getContext().decodeAudioData(l,function(u){t(u)})}catch(l){r?r(l):console.error(l),o.manager.itemError(e)}},n,r)}}class Ny extends tp{constructor(e,t,n=1){super(void 0,n);const r=new Et().set(e),o=new Et().set(t),s=new re(r.r,r.g,r.b),a=new re(o.r,o.g,o.b),l=Math.sqrt(Math.PI),u=l*Math.sqrt(.75);this.sh.coefficients[0].copy(s).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(s).sub(a).multiplyScalar(u)}}Ny.prototype.isHemisphereLightProbe=!0;class Dy extends tp{constructor(e,t=1){super(void 0,t);const n=new Et().set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}Dy.prototype.isAmbientLightProbe=!0;const Fy=new Ut,By=new Ut;class uE{constructor(){this.type=\"StereoCamera\",this.aspect=1,this.eyeSep=.064,this.cameraL=new ci,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ci,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;const n=e.projectionMatrix.clone(),r=t.eyeSep/2,o=r*t.near/t.focus,s=t.near*Math.tan(ui*t.fov*.5)/t.zoom;let a,l;By.elements[12]=-r,Fy.elements[12]=r,a=-s*t.aspect+o,l=s*t.aspect+o,n.elements[0]=2*t.near/(l-a),n.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(n),a=-s*t.aspect-o,l=s*t.aspect-o,n.elements[0]=2*t.near/(l-a),n.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(By),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Fy)}}class ky{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Uy(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Uy();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Uy(){return(typeof performance==\"undefined\"?Date:performance).now()}const fu=new re,Gy=new Y,hE=new re,mu=new re;class cE extends yn{constructor(){super(),this.type=\"AudioListener\",this.context=Xv.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new ky}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(fu,Gy,hE),mu.set(0,0,-1).applyQuaternion(Gy),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(fu.x,r),t.positionY.linearRampToValueAtTime(fu.y,r),t.positionZ.linearRampToValueAtTime(fu.z,r),t.forwardX.linearRampToValueAtTime(mu.x,r),t.forwardY.linearRampToValueAtTime(mu.y,r),t.forwardZ.linearRampToValueAtTime(mu.z,r),t.upX.linearRampToValueAtTime(n.x,r),t.upY.linearRampToValueAtTime(n.y,r),t.upZ.linearRampToValueAtTime(n.z,r)}else t.setPosition(fu.x,fu.y,fu.z),t.setOrientation(mu.x,mu.y,mu.z,n.x,n.y,n.z)}}class qv extends yn{constructor(e){super(),this.type=\"Audio\",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType=\"empty\",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType=\"audioNode\",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType=\"mediaNode\",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType=\"mediaStreamNode\",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType=\"buffer\",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0)return void console.warn(\"THREE.Audio: Audio is already playing.\");if(this.hasPlaybackControl===!1)return void console.warn(\"THREE.Audio: this Audio has no playback control.\");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl!==!1)return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn(\"THREE.Audio: this Audio has no playback control.\")}stop(){if(this.hasPlaybackControl!==!1)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn(\"THREE.Audio: this Audio has no playback control.\")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl!==!1)return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn(\"THREE.Audio: this Audio has no playback control.\")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn(\"THREE.Audio: this Audio has no playback control.\"),!1):this.loop}setLoop(e){if(this.hasPlaybackControl!==!1)return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this;console.warn(\"THREE.Audio: this Audio has no playback control.\")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const gu=new re,Hy=new Y,dE=new re,vu=new re;class pE extends qv{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel=\"HRTF\",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(gu,Hy,dE),vu.set(0,0,1).applyQuaternion(Hy);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(gu.x,n),t.positionY.linearRampToValueAtTime(gu.y,n),t.positionZ.linearRampToValueAtTime(gu.z,n),t.orientationX.linearRampToValueAtTime(vu.x,n),t.orientationY.linearRampToValueAtTime(vu.y,n),t.orientationZ.linearRampToValueAtTime(vu.z,n)}else t.setPosition(gu.x,gu.y,gu.z),t.setOrientation(vu.x,vu.y,vu.z)}}class zy{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class jy{constructor(e,t,n){let r,o,s;switch(this.binding=e,this.valueSize=n,t){case\"quaternion\":r=this._slerp,o=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case\"string\":case\"bool\":r=this._select,o=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,o=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=o,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,o=e*r+r;let s=this.cumulativeWeight;if(s===0){for(let a=0;a!==r;++a)n[o+a]=n[a];s=t}else{s+=t;const a=t/s;this._mixBufferRegion(n,o,0,a,r)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,o=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const l=t*this._origIndex;this._mixBufferRegion(n,r,l,1-o,t)}s>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(n[l]!==n[l+t]){a.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let o=n,s=r;o!==s;++o)t[o]=t[r+o%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,o){if(r>=.5)for(let s=0;s!==o;++s)e[t+s]=e[n+s]}_slerp(e,t,n,r){Y.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,o){const s=this._workIndex*o;Y.multiplyQuaternionsFlat(e,s,e,t,e,n),Y.slerpFlat(e,t,e,t,e,s,r)}_lerp(e,t,n,r,o){const s=1-r;for(let a=0;a!==o;++a){const l=t+a;e[l]=e[l]*s+e[n+a]*r}}_lerpAdditive(e,t,n,r,o){for(let s=0;s!==o;++s){const a=t+s;e[a]=e[a]+e[n+s]*r}}}const fE=new RegExp(\"[\\\\[\\\\]\\\\.:\\\\/]\",\"g\"),mE=\"[^\"+\"\\\\[\\\\]\\\\.:\\\\/\".replace(\"\\\\.\",\"\")+\"]\",gE=/((?:WC+[\\/:])*)/.source.replace(\"WC\",\"[^\\\\[\\\\]\\\\.:\\\\/]\"),vE=/(WCOD+)?/.source.replace(\"WCOD\",mE),_E=/(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace(\"WC\",\"[^\\\\[\\\\]\\\\.:\\\\/]\"),yE=/\\.(WC+)(?:\\[(.+)\\])?/.source.replace(\"WC\",\"[^\\\\[\\\\]\\\\.:\\\\/]\"),xE=new RegExp(\"^\"+gE+vE+_E+yE+\"$\"),bE=[\"material\",\"materials\",\"bones\"];class Nn{constructor(e,t,n){this.path=t,this.parsedPath=n||Nn.parseTrackName(t),this.node=Nn.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Nn.Composite(e,t,n):new Nn(e,t,n)}static sanitizeNodeName(e){return e.replace(/\\s/g,\"_\").replace(fE,\"\")}static parseTrackName(e){const t=xE.exec(e);if(!t)throw new Error(\"PropertyBinding: Cannot parse trackName: \"+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(\".\");if(r!==void 0&&r!==-1){const o=n.nodeName.substring(r+1);bE.indexOf(o)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=o)}if(n.propertyName===null||n.propertyName.length===0)throw new Error(\"PropertyBinding: can not parse propertyName from trackName: \"+e);return n}static findNode(e,t){if(!t||t===\"\"||t===\".\"||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(o){for(let s=0;s<o.length;s++){const a=o[s];if(a.name===t||a.uuid===t)return a;const l=n(a.children);if(l)return l}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.node[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,o=n.length;r!==o;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,o=n.length;r!==o;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,o=n.length;r!==o;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,o=n.length;r!==o;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let o=t.propertyIndex;if(e||(e=Nn.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error(\"THREE.PropertyBinding: Trying to update node for track: \"+this.path+\" but it wasn't found.\");if(n){let u=t.objectIndex;switch(n){case\"materials\":if(!e.material)return void console.error(\"THREE.PropertyBinding: Can not bind to material as node does not have a material.\",this);if(!e.material.materials)return void console.error(\"THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.\",this);e=e.material.materials;break;case\"bones\":if(!e.skeleton)return void console.error(\"THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.\",this);e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===u){u=h;break}break;default:if(e[n]===void 0)return void console.error(\"THREE.PropertyBinding: Can not bind to objectName of node undefined.\",this);e=e[n]}if(u!==void 0){if(e[u]===void 0)return void console.error(\"THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.\",this,e);e=e[u]}}const s=e[r];if(s===void 0){const u=t.nodeName;return void console.error(\"THREE.PropertyBinding: Trying to update property for track: \"+u+\".\"+r+\" but it wasn't found.\",e)}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(o!==void 0){if(r===\"morphTargetInfluences\"){if(!e.geometry)return void console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.\",this);if(!e.geometry.isBufferGeometry)return void console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.\",this);if(!e.geometry.morphAttributes)return void console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.\",this);e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=o}else s.fromArray!==void 0&&s.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Nn.Composite=class{constructor(i,e,t){const n=t||Nn.parseTrackName(e);this._targetGroup=i,this._bindings=i.subscribe_(e,n)}getValue(i,e){this.bind();const t=this._targetGroup.nCachedObjects_,n=this._bindings[t];n!==void 0&&n.getValue(i,e)}setValue(i,e){const t=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=t.length;n!==r;++n)t[n].setValue(i,e)}bind(){const i=this._bindings;for(let e=this._targetGroup.nCachedObjects_,t=i.length;e!==t;++e)i[e].bind()}unbind(){const i=this._bindings;for(let e=this._targetGroup.nCachedObjects_,t=i.length;e!==t;++e)i[e].unbind()}},Nn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Nn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Nn.prototype.GetterByBindingType=[Nn.prototype._getValue_direct,Nn.prototype._getValue_array,Nn.prototype._getValue_arrayElement,Nn.prototype._getValue_toArray],Nn.prototype.SetterByBindingTypeAndVersioning=[[Nn.prototype._setValue_direct,Nn.prototype._setValue_direct_setNeedsUpdate,Nn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Nn.prototype._setValue_array,Nn.prototype._setValue_array_setNeedsUpdate,Nn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Nn.prototype._setValue_arrayElement,Nn.prototype._setValue_arrayElement_setNeedsUpdate,Nn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Nn.prototype._setValue_fromArray,Nn.prototype._setValue_fromArray_setNeedsUpdate,Nn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Vy{constructor(){this.uuid=Ar(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,o=this._bindings,s=o.length;let a,l=e.length,u=this.nCachedObjects_;for(let h=0,d=arguments.length;h!==d;++h){const p=arguments[h],m=p.uuid;let g=t[m];if(g===void 0){g=l++,t[m]=g,e.push(p);for(let _=0,y=s;_!==y;++_)o[_].push(new Nn(p,n[_],r[_]))}else if(g<u){a=e[g];const _=--u,y=e[_];t[y.uuid]=g,e[g]=y,t[m]=_,e[_]=p;for(let w=0,R=s;w!==R;++w){const F=o[w],U=F[_];let B=F[g];F[g]=U,B===void 0&&(B=new Nn(p,n[w],r[w])),F[_]=B}}else e[g]!==a&&console.error(\"THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.\")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let o=this.nCachedObjects_;for(let s=0,a=arguments.length;s!==a;++s){const l=arguments[s],u=l.uuid,h=t[u];if(h!==void 0&&h>=o){const d=o++,p=e[d];t[p.uuid]=h,e[h]=p,t[u]=d,e[d]=l;for(let m=0,g=r;m!==g;++m){const _=n[m],y=_[d],w=_[h];_[h]=y,_[d]=w}}}this.nCachedObjects_=o}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let o=this.nCachedObjects_,s=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a].uuid,h=t[u];if(h!==void 0)if(delete t[u],h<o){const d=--o,p=e[d],m=--s,g=e[m];t[p.uuid]=h,e[h]=p,t[g.uuid]=d,e[d]=g,e.pop();for(let _=0,y=r;_!==y;++_){const w=n[_],R=w[d],F=w[m];w[h]=R,w[d]=F,w.pop()}}else{const d=--s,p=e[d];d>0&&(t[p.uuid]=h),e[h]=p,e.pop();for(let m=0,g=r;m!==g;++m){const _=n[m];_[h]=_[d],_.pop()}}}this.nCachedObjects_=o}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const o=this._bindings;if(r!==void 0)return o[r];const s=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,h=this.nCachedObjects_,d=new Array(u);r=o.length,n[e]=r,s.push(e),a.push(t),o.push(d);for(let p=h,m=l.length;p!==m;++p){const g=l[p];d[p]=new Nn(g,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const r=this._paths,o=this._parsedPaths,s=this._bindings,a=s.length-1,l=s[a];t[e[a]]=n,s[n]=l,s.pop(),o[n]=o[a],o.pop(),r[n]=r[a],r.pop()}}}Vy.prototype.isAnimationObjectGroup=!0;class wE{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const o=t.tracks,s=o.length,a=new Array(s),l={endingStart:ms,endingEnd:ms};for(let u=0;u!==s;++u){const h=o[u].createInterpolant(null);a[u]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Fo,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const r=this._clip.duration,o=e._clip.duration,s=o/r,a=r/o;e.warp(1,s,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,o=r.time,s=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=o,l[1]=o+n,u[0]=e/s,u[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const o=this._startTime;if(o!==null){const l=(e-o)*n;if(l<0||n===0)return;this._startTime=null,t=n*l}t*=this._updateTimeScale(e);const s=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case it:for(let h=0,d=l.length;h!==d;++h)l[h].evaluate(s),u[h].accumulateAdditive(a);break;case Ue:default:for(let h=0,d=l.length;h!==d;++h)l[h].evaluate(s),u[h].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;n!==null&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,o=this._loopCount;const s=n===Ml;if(e===0)return o===-1?r:s&&(1&o)==1?t-r:r;if(n===sd){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:\"finished\",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,o+=Math.abs(a);const l=this.repetitions-o;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:\"finished\",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,s)}else this._setEndings(!1,!1,s);this._loopCount=o,this.time=r,this._mixer.dispatchEvent({type:\"loop\",action:this,loopDelta:a})}}else this.time=r;if(s&&(1&o)==1)return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=Js,r.endingEnd=Js):(r.endingStart=e?this.zeroSlopeAtStart?Js:ms:gs,r.endingEnd=t?this.zeroSlopeAtEnd?Js:ms:gs)}_scheduleFading(e,t,n){const r=this._mixer,o=r.time;let s=this._weightInterpolant;s===null&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);const a=s.parameterPositions,l=s.sampleValues;return a[0]=o,l[0]=t,a[1]=o+e,l[1]=n,this}}class Wy extends ys{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,o=r.length,s=e._propertyBindings,a=e._interpolants,l=n.uuid,u=this._bindingsByRootAndName;let h=u[l];h===void 0&&(h={},u[l]=h);for(let d=0;d!==o;++d){const p=r[d],m=p.name;let g=h[m];if(g!==void 0)s[d]=g;else{if(g=s[d],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,m));continue}const _=t&&t._propertyBindings[d].binding.parsedPath;g=new jy(Nn.create(n,m,_),p.ValueTypeName,p.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,m),s[d]=g}a[d].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,r=e._clip.uuid,o=this._actionsByClip[r];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,r,n)}const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const o=t[n];o.useCount++==0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const o=t[n];--o.useCount==0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,o=this._actionsByClip;let s=o[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[t]=s;else{const a=s.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const o=e._clip.uuid,s=this._actionsByClip,a=s[o],l=a.knownActions,u=l[l.length-1],h=e._byClipCacheIndex;u._byClipCacheIndex=h,l[h]=u,l.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],l.length===0&&delete s[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const o=t[n];--o.referenceCount==0&&this._removeInactiveBinding(o)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,o=t[r];e._cacheIndex=r,t[r]=e,o._cacheIndex=n,t[n]=o}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,o=t[r];e._cacheIndex=r,t[r]=e,o._cacheIndex=n,t[n]=o}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,o=this._bindings;let s=r[t];s===void 0&&(s={},r[t]=s),s[n]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,o=n.path,s=this._bindingsByRootAndName,a=s[r],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[o],Object.keys(a).length===0&&delete s[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,o=t[r];e._cacheIndex=r,t[r]=e,o._cacheIndex=n,t[n]=o}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,o=t[r];e._cacheIndex=r,t[r]=e,o._cacheIndex=n,t[n]=o}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new Ov(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,o=t[r];e.__cacheIndex=r,t[r]=e,o.__cacheIndex=n,t[n]=o}clipAction(e,t,n){const r=t||this._root,o=r.uuid;let s=typeof e==\"string\"?Kd.findByName(r,e):e;const a=s!==null?s.uuid:e,l=this._actionsByClip[a];let u=null;if(n===void 0&&(n=s!==null?s.blendMode:Ue),l!==void 0){const d=l.actionByRoot[o];if(d!==void 0&&d.blendMode===n)return d;u=l.knownActions[0],s===null&&(s=u._clip)}if(s===null)return null;const h=new wE(this,s,t,n);return this._bindAction(h,u),this._addInactiveAction(h,a,o),h}existingAction(e,t){const n=t||this._root,r=n.uuid,o=typeof e==\"string\"?Kd.findByName(n,e):e,s=o?o.uuid:e,a=this._actionsByClip[s];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,o=Math.sign(e),s=this._accuIndex^=1;for(let u=0;u!==n;++u)t[u]._update(r,e,o,s);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,o=r[n];if(o!==void 0){const s=o.knownActions;for(let a=0,l=s.length;a!==l;++a){const u=s[a];this._deactivateAction(u);const h=u._cacheIndex,d=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,d._cacheIndex=h,t[h]=d,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const s=n[o].actionByRoot[t];s!==void 0&&(this._deactivateAction(s),this._removeInactiveAction(s))}const r=this._bindingsByRootAndName[t];if(r!==void 0)for(const o in r){const s=r[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}Wy.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class fm{constructor(e){typeof e==\"string\"&&(console.warn(\"THREE.Uniform: Type parameter is no longer needed.\"),e=arguments[1]),this.value=e}clone(){return new fm(this.value.clone===void 0?this.value:this.value.clone())}}class Xy extends xa{constructor(e,t,n=1){super(e,t),this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}Xy.prototype.isInstancedInterleavedBuffer=!0;class qy{constructor(e,t,n,r,o){this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}qy.prototype.isGLBufferAttribute=!0;class SE{constructor(e,t,n=0,r=1/0){this.ray=new ei(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new Il,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error(\"THREE.Raycaster: Unsupported camera type: \"+t.type)}intersectObject(e,t=!1,n=[]){return Yv(e,this,n,t),n.sort(Yy),n}intersectObjects(e,t=!1,n=[]){for(let r=0,o=e.length;r<o;r++)Yv(e[r],this,n,t);return n.sort(Yy),n}}function Yy(i,e){return i.distance-e.distance}function Yv(i,e,t,n){if(i.layers.test(e.layers)&&i.raycast(e,t),n===!0){const r=i.children;for(let o=0,s=r.length;o<s;o++)Yv(r[o],e,t,!0)}}class TE{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Bi(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class EE{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}const $y=new gt;class mc{constructor(e=new gt(1/0,1/0),t=new gt(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=$y.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return $y.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}mc.prototype.isBox2=!0;const Jy=new re,mm=new re;class Zy{constructor(e=new re,t=new re){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Jy.subVectors(e,this.start),mm.subVectors(this.end,this.start);const n=mm.dot(mm);let r=mm.dot(Jy)/n;return t&&(r=Bi(r,0,1)),r}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}class Ky extends yn{constructor(e){super(),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}}Ky.prototype.isImmediateRenderObject=!0;const Qy=new re;class ME extends yn{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const n=new Vt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,a=1,l=32;s<l;s++,a++){const u=s/l*Math.PI*2,h=a/l*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(h),Math.sin(h),1)}n.setAttribute(\"position\",new Mt(r,3));const o=new Gi({fog:!1,toneMapped:!1});this.cone=new k(n,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Qy.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Qy),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const ol=new re,gm=new Ut,$v=new Ut;class ex extends k{constructor(e){const t=function l(u){const h=[];u&&u.isBone&&h.push(u);for(let d=0;d<u.children.length;d++)h.push.apply(h,l(u.children[d]));return h}(e),n=new Vt,r=[],o=[],s=new Et(0,0,1),a=new Et(0,1,0);for(let l=0;l<t.length;l++){const u=t[l];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),o.push(s.r,s.g,s.b),o.push(a.r,a.g,a.b))}n.setAttribute(\"position\",new Mt(r,3)),n.setAttribute(\"color\",new Mt(o,3)),super(n,new Gi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type=\"SkeletonHelper\",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute(\"position\");$v.copy(this.root.matrixWorld).invert();for(let o=0,s=0;o<t.length;o++){const a=t[o];a.parent&&a.parent.isBone&&(gm.multiplyMatrices($v,a.matrixWorld),ol.setFromMatrixPosition(gm),r.setXYZ(s,ol.x,ol.y,ol.z),gm.multiplyMatrices($v,a.parent.matrixWorld),ol.setFromMatrixPosition(gm),r.setXYZ(s+1,ol.x,ol.y,ol.z),s+=2)}n.getAttribute(\"position\").needsUpdate=!0,super.updateMatrixWorld(e)}}class AE extends Xn{constructor(e,t,n){super(new uu(t,4,2),new $i({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.light.updateMatrixWorld(),this.color=n,this.type=\"PointLightHelper\",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const RE=new re,tx=new Et,nx=new Et;class CE extends yn{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const r=new au(t);r.rotateY(.5*Math.PI),this.material=new $i({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=r.getAttribute(\"position\"),s=new Float32Array(3*o.count);r.setAttribute(\"color\",new mn(s,3)),this.add(new Xn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute(\"color\");tx.copy(this.light.color),nx.copy(this.light.groundColor);for(let n=0,r=t.count;n<r;n++){const o=n<r/2?tx:nx;t.setXYZ(n,o.r,o.g,o.b)}t.needsUpdate=!0}e.lookAt(RE.setFromMatrixPosition(this.light.matrixWorld).negate())}}class ix extends k{constructor(e=10,t=10,n=4473924,r=8947848){n=new Et(n),r=new Et(r);const o=t/2,s=e/t,a=e/2,l=[],u=[];for(let d=0,p=0,m=-a;d<=t;d++,m+=s){l.push(-a,0,m,a,0,m),l.push(m,0,-a,m,0,a);const g=d===o?n:r;g.toArray(u,p),p+=3,g.toArray(u,p),p+=3,g.toArray(u,p),p+=3,g.toArray(u,p),p+=3}const h=new Vt;h.setAttribute(\"position\",new Mt(l,3)),h.setAttribute(\"color\",new Mt(u,3)),super(h,new Gi({vertexColors:!0,toneMapped:!1})),this.type=\"GridHelper\"}}class PE extends k{constructor(e=10,t=16,n=8,r=64,o=4473924,s=8947848){o=new Et(o),s=new Et(s);const a=[],l=[];for(let h=0;h<=t;h++){const d=h/t*(2*Math.PI),p=Math.sin(d)*e,m=Math.cos(d)*e;a.push(0,0,0),a.push(p,0,m);const g=1&h?o:s;l.push(g.r,g.g,g.b),l.push(g.r,g.g,g.b)}for(let h=0;h<=n;h++){const d=1&h?o:s,p=e-e/n*h;for(let m=0;m<r;m++){let g=m/r*(2*Math.PI),_=Math.sin(g)*p,y=Math.cos(g)*p;a.push(_,0,y),l.push(d.r,d.g,d.b),g=(m+1)/r*(2*Math.PI),_=Math.sin(g)*p,y=Math.cos(g)*p,a.push(_,0,y),l.push(d.r,d.g,d.b)}}const u=new Vt;u.setAttribute(\"position\",new Mt(a,3)),u.setAttribute(\"color\",new Mt(l,3)),super(u,new Gi({vertexColors:!0,toneMapped:!1})),this.type=\"PolarGridHelper\"}}const rx=new re,vm=new re,ox=new re;class IE extends yn{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,t===void 0&&(t=1);let r=new Vt;r.setAttribute(\"position\",new Mt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const o=new Gi({fog:!1,toneMapped:!1});this.lightPlane=new f(r,o),this.add(this.lightPlane),r=new Vt,r.setAttribute(\"position\",new Mt([0,0,0,0,0,1],3)),this.targetLine=new f(r,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){rx.setFromMatrixPosition(this.light.matrixWorld),vm.setFromMatrixPosition(this.light.target.matrixWorld),ox.subVectors(vm,rx),this.lightPlane.lookAt(vm),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(vm),this.targetLine.scale.z=ox.length()}}const _m=new re,Ti=new va;class OE extends k{constructor(e){const t=new Vt,n=new Gi({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],o=[],s={},a=new Et(16755200),l=new Et(16711680),u=new Et(43775),h=new Et(16777215),d=new Et(3355443);function p(g,_,y){m(g,y),m(_,y)}function m(g,_){r.push(0,0,0),o.push(_.r,_.g,_.b),s[g]===void 0&&(s[g]=[]),s[g].push(r.length/3-1)}p(\"n1\",\"n2\",a),p(\"n2\",\"n4\",a),p(\"n4\",\"n3\",a),p(\"n3\",\"n1\",a),p(\"f1\",\"f2\",a),p(\"f2\",\"f4\",a),p(\"f4\",\"f3\",a),p(\"f3\",\"f1\",a),p(\"n1\",\"f1\",a),p(\"n2\",\"f2\",a),p(\"n3\",\"f3\",a),p(\"n4\",\"f4\",a),p(\"p\",\"n1\",l),p(\"p\",\"n2\",l),p(\"p\",\"n3\",l),p(\"p\",\"n4\",l),p(\"u1\",\"u2\",u),p(\"u2\",\"u3\",u),p(\"u3\",\"u1\",u),p(\"c\",\"t\",h),p(\"p\",\"c\",d),p(\"cn1\",\"cn2\",d),p(\"cn3\",\"cn4\",d),p(\"cf1\",\"cf2\",d),p(\"cf3\",\"cf4\",d),t.setAttribute(\"position\",new Mt(r,3)),t.setAttribute(\"color\",new Mt(o,3)),super(t,n),this.type=\"CameraHelper\",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}update(){const e=this.geometry,t=this.pointMap;Ti.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Ci(\"c\",t,e,Ti,0,0,-1),Ci(\"t\",t,e,Ti,0,0,1),Ci(\"n1\",t,e,Ti,-1,-1,-1),Ci(\"n2\",t,e,Ti,1,-1,-1),Ci(\"n3\",t,e,Ti,-1,1,-1),Ci(\"n4\",t,e,Ti,1,1,-1),Ci(\"f1\",t,e,Ti,-1,-1,1),Ci(\"f2\",t,e,Ti,1,-1,1),Ci(\"f3\",t,e,Ti,-1,1,1),Ci(\"f4\",t,e,Ti,1,1,1),Ci(\"u1\",t,e,Ti,.7,1.1,-1),Ci(\"u2\",t,e,Ti,-.7,1.1,-1),Ci(\"u3\",t,e,Ti,0,2,-1),Ci(\"cf1\",t,e,Ti,-1,0,1),Ci(\"cf2\",t,e,Ti,1,0,1),Ci(\"cf3\",t,e,Ti,0,-1,1),Ci(\"cf4\",t,e,Ti,0,1,1),Ci(\"cn1\",t,e,Ti,-1,0,-1),Ci(\"cn2\",t,e,Ti,1,0,-1),Ci(\"cn3\",t,e,Ti,0,-1,-1),Ci(\"cn4\",t,e,Ti,0,1,-1),e.getAttribute(\"position\").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ci(i,e,t,n,r,o,s){_m.set(r,o,s).unproject(n);const a=e[i];if(a!==void 0){const l=t.getAttribute(\"position\");for(let u=0,h=a.length;u<h;u++)l.setXYZ(a[u],_m.x,_m.y,_m.z)}}const ym=new nn;class sx extends k{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),o=new Vt;o.setIndex(new mn(n,1)),o.setAttribute(\"position\",new mn(r,3)),super(o,new Gi({color:t,toneMapped:!1})),this.object=e,this.type=\"BoxHelper\",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn(\"THREE.BoxHelper: .update() has no longer arguments.\"),this.object!==void 0&&ym.setFromObject(this.object),ym.isEmpty())return;const t=ym.min,n=ym.max,r=this.geometry.attributes.position,o=r.array;o[0]=n.x,o[1]=n.y,o[2]=n.z,o[3]=t.x,o[4]=n.y,o[5]=n.z,o[6]=t.x,o[7]=t.y,o[8]=n.z,o[9]=n.x,o[10]=t.y,o[11]=n.z,o[12]=n.x,o[13]=n.y,o[14]=t.z,o[15]=t.x,o[16]=n.y,o[17]=t.z,o[18]=t.x,o[19]=t.y,o[20]=t.z,o[21]=n.x,o[22]=t.y,o[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e){return k.prototype.copy.call(this,e),this.object=e.object,this}}class LE extends k{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Vt;r.setIndex(new mn(n,1)),r.setAttribute(\"position\",new Mt([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new Gi({color:t,toneMapped:!1})),this.box=e,this.type=\"Box3Helper\",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class NE extends f{constructor(e,t=1,n=16776960){const r=n,o=new Vt;o.setAttribute(\"position\",new Mt([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),o.computeBoundingSphere(),super(o,new Gi({color:r,toneMapped:!1})),this.type=\"PlaneHelper\",this.plane=e,this.size=t;const s=new Vt;s.setAttribute(\"position\",new Mt([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),s.computeBoundingSphere(),this.add(new Xn(s,new $i({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){let t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?ne:X,this.lookAt(this.plane.normal),super.updateMatrixWorld(e)}}const ax=new re;let xm,Jv;class DE extends yn{constructor(e=new re(0,0,1),t=new re(0,0,0),n=1,r=16776960,o=.2*n,s=.2*o){super(),this.type=\"ArrowHelper\",xm===void 0&&(xm=new Vt,xm.setAttribute(\"position\",new Mt([0,0,0,0,1,0],3)),Jv=new Lt(0,.5,1,5,1),Jv.translate(0,-.5,0)),this.position.copy(t),this.line=new f(xm,new Gi({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Xn(Jv,new $i({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,o,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{ax.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(ax,t)}}setLength(e,t=.2*e,n=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class lx extends k{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Vt;n.setAttribute(\"position\",new Mt(t,3)),n.setAttribute(\"color\",new Mt([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(n,new Gi({vertexColors:!0,toneMapped:!1})),this.type=\"AxesHelper\"}setColors(e,t,n){const r=new Et,o=this.geometry.attributes.color.array;return r.set(e),r.toArray(o,0),r.toArray(o,3),r.set(t),r.toArray(o,6),r.toArray(o,9),r.set(n),r.toArray(o,12),r.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}const ux=new Float32Array(1),FE=new Int32Array(ux.buffer);class BE{static toHalfFloat(e){ux[0]=e;const t=FE[0];let n=t>>16&32768,r=t>>12&2047;const o=t>>23&255;return o<103?n:o>142?(n|=31744,n|=(o==255?0:1)&&8388607&t,n):o<113?(r|=2048,n|=(r>>114-o)+(r>>113-o&1),n):(n|=o-112<<10|r>>1,n+=1&r,n)}}const Ps=Math.pow(2,8),hx=[.125,.215,.35,.446,.526,.582],cx=5+hx.length,Is={[tn]:0,[oi]:1,[Gn]:2,[ad]:3,[dr]:4,[za]:5,[Mr]:6},_u=new $i({side:ne,depthWrite:!1,depthTest:!1}),kE=new Xn(new Xo,_u),Zv=new fc,{_lodPlanes:np,_sizeLods:dx,_sigmas:bm}=HE(),px=new Et;let Kv=null;const yu=(1+Math.sqrt(5))/2,gc=1/yu,fx=[new re(1,1,1),new re(-1,1,1),new re(1,1,-1),new re(-1,1,-1),new re(0,yu,gc),new re(0,yu,-gc),new re(gc,0,yu),new re(-gc,0,yu),new re(yu,gc,0),new re(-yu,gc,0)];function mx(i){const e=Math.max(i.r,i.g,i.b),t=Math.min(Math.max(Math.ceil(Math.log2(e)),-128),127);return i.multiplyScalar(Math.pow(2,-t)),(t+128)/255}class UE{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function(t){const n=new Float32Array(t),r=new re(0,1,0);return new dc({name:\"SphericalGaussianBlur\",defines:{n:t},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r},inputEncoding:{value:Is[tn]},outputEncoding:{value:Is[tn]}},vertexShader:Qv(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t${e0()}\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:ae,depthTest:!1,depthWrite:!1})}(20),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){Kv=this._renderer.getRenderTarget();const o=this._allocateTargets();return this._sceneToCubeUV(e,n,r,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){this._cubemapShader===null&&(this._cubemapShader=_x(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){this._equirectShader===null&&(this._equirectShader=vx(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let e=0;e<np.length;e++)np[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Kv),e.scissorTest=!1,wm(e,0,0,e.width,e.height)}_fromTexture(e){Kv=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:wn,minFilter:wn,generateMipmaps:!1,type:Xs,format:Fi,encoding:GE(e)?e.encoding:Gn,depthBuffer:!1},n=gx(t);return n.depthBuffer=!e,this._pingPongRenderTarget=gx(t),n}_compileMaterial(e){const t=new Xn(np[0],e);this._renderer.compile(t,Zv)}_sceneToCubeUV(e,t,n,r){const o=new ci(90,1,t,n),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],l=this._renderer,u=l.autoClear,h=l.outputEncoding,d=l.toneMapping;l.getClearColor(px),l.toneMapping=T,l.outputEncoding=tn,l.autoClear=!1;let p=!1;const m=e.background;if(m){if(m.isColor){_u.color.copy(m).convertSRGBToLinear(),e.background=null;const g=mx(_u.color);_u.opacity=g,p=!0}}else{_u.color.copy(px).convertSRGBToLinear();const g=mx(_u.color);_u.opacity=g,p=!0}for(let g=0;g<6;g++){const _=g%3;_==0?(o.up.set(0,s[g],0),o.lookAt(a[g],0,0)):_==1?(o.up.set(0,0,s[g]),o.lookAt(0,a[g],0)):(o.up.set(0,s[g],0),o.lookAt(0,0,a[g])),wm(r,_*Ps,g>2?Ps:0,Ps,Ps),l.setRenderTarget(r),p&&l.render(kE,o),l.render(e,o)}l.toneMapping=d,l.outputEncoding=h,l.autoClear=u}_textureToCubeUV(e,t){const n=this._renderer;e.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=_x()):this._equirectShader==null&&(this._equirectShader=vx());const r=e.isCubeTexture?this._cubemapShader:this._equirectShader,o=new Xn(np[0],r),s=r.uniforms;s.envMap.value=e,e.isCubeTexture||s.texelSize.value.set(1/e.image.width,1/e.image.height),s.inputEncoding.value=Is[e.encoding],s.outputEncoding.value=Is[t.texture.encoding],wm(t,0,0,3*Ps,2*Ps),n.setRenderTarget(t),n.render(o,Zv)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<cx;r++){const o=Math.sqrt(bm[r]*bm[r]-bm[r-1]*bm[r-1]),s=fx[(r-1)%fx.length];this._blur(e,r-1,r,o,s)}t.autoClear=n}_blur(e,t,n,r,o){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,n,r,\"latitudinal\",o),this._halfBlur(s,e,n,n,r,\"longitudinal\",o)}_halfBlur(e,t,n,r,o,s,a){const l=this._renderer,u=this._blurMaterial;s!==\"latitudinal\"&&s!==\"longitudinal\"&&console.error(\"blur direction must be either latitudinal or longitudinal!\");const h=new Xn(np[r],u),d=u.uniforms,p=dx[n]-1,m=isFinite(o)?Math.PI/(2*p):2*Math.PI/39,g=o/m,_=isFinite(o)?1+Math.floor(3*g):20;_>20&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${_} samples when the maximum is set to 20`);const y=[];let w=0;for(let F=0;F<20;++F){const U=F/g,B=Math.exp(-U*U/2);y.push(B),F==0?w+=B:F<_&&(w+=2*B)}for(let F=0;F<y.length;F++)y[F]=y[F]/w;d.envMap.value=e.texture,d.samples.value=_,d.weights.value=y,d.latitudinal.value=s===\"latitudinal\",a&&(d.poleAxis.value=a),d.dTheta.value=m,d.mipInt.value=8-n,d.inputEncoding.value=Is[e.texture.encoding],d.outputEncoding.value=Is[e.texture.encoding];const R=dx[r];wm(t,3*Math.max(0,Ps-2*R),(r===0?0:2*Ps)+2*R*(r>4?r-8+4:0),3*R,2*R),l.setRenderTarget(t),l.render(h,Zv)}}function GE(i){return i!==void 0&&i.type===Xs&&(i.encoding===tn||i.encoding===oi||i.encoding===Mr)}function HE(){const i=[],e=[],t=[];let n=8;for(let r=0;r<cx;r++){const o=Math.pow(2,n);e.push(o);let s=1/o;r>4?s=hx[r-8+4-1]:r==0&&(s=0),t.push(s);const a=1/(o-1),l=-a/2,u=1+a/2,h=[l,l,u,l,u,u,l,l,u,u,l,u],d=6,p=6,m=3,g=2,_=1,y=new Float32Array(m*p*d),w=new Float32Array(g*p*d),R=new Float32Array(_*p*d);for(let U=0;U<d;U++){const B=U%3*2/3-1,V=U>2?0:-1,G=[B,V,0,B+2/3,V,0,B+2/3,V+1,0,B,V,0,B+2/3,V+1,0,B,V+1,0];y.set(G,m*p*U),w.set(h,g*p*U);const W=[U,U,U,U,U,U];R.set(W,_*p*U)}const F=new Vt;F.setAttribute(\"position\",new mn(y,m)),F.setAttribute(\"uv\",new mn(w,g)),F.setAttribute(\"faceIndex\",new mn(R,_)),i.push(F),n>4&&n--}return{_lodPlanes:i,_sizeLods:e,_sigmas:t}}function gx(i){const e=new pr(3*Ps,3*Ps,i);return e.texture.mapping=$e,e.texture.name=\"PMREM.cubeUv\",e.scissorTest=!0,e}function wm(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function vx(){const i=new gt(1,1);return new dc({name:\"EquirectangularToCubeUV\",uniforms:{envMap:{value:null},texelSize:{value:i},inputEncoding:{value:Is[tn]},outputEncoding:{value:Is[tn]}},vertexShader:Qv(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t${e0()}\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:ae,depthTest:!1,depthWrite:!1})}function _x(){return new dc({name:\"CubemapToCubeUV\",uniforms:{envMap:{value:null},inputEncoding:{value:Is[tn]},outputEncoding:{value:Is[tn]}},vertexShader:Qv(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t${e0()}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:ae,depthTest:!1,depthWrite:!1})}function Qv(){return`\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t`}function e0(){return`\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t`}const zE=0,jE=1,VE=0,WE=1,XE=2;function qE(i){return console.warn(\"THREE.MeshFaceMaterial has been removed. Use an Array instead.\"),i}function YE(i=[]){return console.warn(\"THREE.MultiMaterial has been removed. Use an Array instead.\"),i.isMultiMaterial=!0,i.materials=i,i.clone=function(){return i.slice()},i}function $E(i,e){return console.warn(\"THREE.PointCloud has been renamed to THREE.Points.\"),new vt(i,e)}function JE(i){return console.warn(\"THREE.Particle has been renamed to THREE.Sprite.\"),new Vh(i)}function ZE(i,e){return console.warn(\"THREE.ParticleSystem has been renamed to THREE.Points.\"),new vt(i,e)}function KE(i){return console.warn(\"THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.\"),new pe(i)}function QE(i){return console.warn(\"THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.\"),new pe(i)}function eM(i){return console.warn(\"THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.\"),new pe(i)}function tM(i,e,t){return console.warn(\"THREE.Vertex has been removed. Use THREE.Vector3 instead.\"),new re(i,e,t)}function nM(i,e){return console.warn(\"THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead.\"),new mn(i,e).setUsage(kr)}function iM(i,e){return console.warn(\"THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.\"),new xd(i,e)}function rM(i,e){return console.warn(\"THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.\"),new wh(i,e)}function oM(i,e){return console.warn(\"THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.\"),new bd(i,e)}function sM(i,e){return console.warn(\"THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.\"),new Sh(i,e)}function aM(i,e){return console.warn(\"THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.\"),new qa(i,e)}function lM(i,e){return console.warn(\"THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.\"),new zo(i,e)}function uM(i,e){return console.warn(\"THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.\"),new Th(i,e)}function hM(i,e){return console.warn(\"THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.\"),new Mt(i,e)}function cM(i,e){return console.warn(\"THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.\"),new wd(i,e)}function dM(i){return console.warn(\"THREE.AxisHelper has been renamed to THREE.AxesHelper.\"),new lx(i)}function pM(i,e){return console.warn(\"THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.\"),new sx(i,e)}function fM(i,e){return console.warn(\"THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.\"),new k(new Wr(i.geometry),new Gi({color:e!==void 0?e:16777215}))}function mM(i,e){return console.warn(\"THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.\"),new k(new Ev(i.geometry),new Gi({color:e!==void 0?e:16777215}))}function gM(i){return console.warn(\"THREE.XHRLoader has been renamed to THREE.FileLoader.\"),new is(i)}function vM(i){return console.warn(\"THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.\"),new _y(i)}function _M(i,e,t){return console.warn(\"THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options ).\"),new _a(i,t)}function yM(){console.error(\"THREE.CanvasRenderer has been removed\")}function xM(){console.error(\"THREE.JSONLoader has been removed.\")}Ln.create=function(i,e){return console.log(\"THREE.Curve.create() has been deprecated\"),i.prototype=Object.create(Ln.prototype),i.prototype.constructor=i,i.prototype.getPoint=e,i},pu.prototype.fromPoints=function(i){return console.warn(\"THREE.Path: .fromPoints() has been renamed to .setFromPoints().\"),this.setFromPoints(i)},ix.prototype.setColors=function(){console.error(\"THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.\")},ex.prototype.update=function(){console.error(\"THREE.SkeletonHelper: update() no longer needs to be called.\")},vr.prototype.extractUrlBase=function(i){return console.warn(\"THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.\"),dm.extractUrlBase(i)},vr.Handlers={add:function(){console.error(\"THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.\")},get:function(){console.error(\"THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.\")}},mc.prototype.center=function(i){return console.warn(\"THREE.Box2: .center() has been renamed to .getCenter().\"),this.getCenter(i)},mc.prototype.empty=function(){return console.warn(\"THREE.Box2: .empty() has been renamed to .isEmpty().\"),this.isEmpty()},mc.prototype.isIntersectionBox=function(i){return console.warn(\"THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().\"),this.intersectsBox(i)},mc.prototype.size=function(i){return console.warn(\"THREE.Box2: .size() has been renamed to .getSize().\"),this.getSize(i)},nn.prototype.center=function(i){return console.warn(\"THREE.Box3: .center() has been renamed to .getCenter().\"),this.getCenter(i)},nn.prototype.empty=function(){return console.warn(\"THREE.Box3: .empty() has been renamed to .isEmpty().\"),this.isEmpty()},nn.prototype.isIntersectionBox=function(i){return console.warn(\"THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().\"),this.intersectsBox(i)},nn.prototype.isIntersectionSphere=function(i){return console.warn(\"THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().\"),this.intersectsSphere(i)},nn.prototype.size=function(i){return console.warn(\"THREE.Box3: .size() has been renamed to .getSize().\"),this.getSize(i)},Go.prototype.empty=function(){return console.warn(\"THREE.Sphere: .empty() has been renamed to .isEmpty().\"),this.isEmpty()},Ja.prototype.setFromMatrix=function(i){return console.warn(\"THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix().\"),this.setFromProjectionMatrix(i)},Zy.prototype.center=function(i){return console.warn(\"THREE.Line3: .center() has been renamed to .getCenter().\"),this.getCenter(i)},Qn.prototype.flattenToArrayOffset=function(i,e){return console.warn(\"THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\"),this.toArray(i,e)},Qn.prototype.multiplyVector3=function(i){return console.warn(\"THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.\"),i.applyMatrix3(this)},Qn.prototype.multiplyVector3Array=function(){console.error(\"THREE.Matrix3: .multiplyVector3Array() has been removed.\")},Qn.prototype.applyToBufferAttribute=function(i){return console.warn(\"THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead.\"),i.applyMatrix3(this)},Qn.prototype.applyToVector3Array=function(){console.error(\"THREE.Matrix3: .applyToVector3Array() has been removed.\")},Qn.prototype.getInverse=function(i){return console.warn(\"THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead.\"),this.copy(i).invert()},Ut.prototype.extractPosition=function(i){return console.warn(\"THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().\"),this.copyPosition(i)},Ut.prototype.flattenToArrayOffset=function(i,e){return console.warn(\"THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\"),this.toArray(i,e)},Ut.prototype.getPosition=function(){return console.warn(\"THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.\"),new re().setFromMatrixColumn(this,3)},Ut.prototype.setRotationFromQuaternion=function(i){return console.warn(\"THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().\"),this.makeRotationFromQuaternion(i)},Ut.prototype.multiplyToArray=function(){console.warn(\"THREE.Matrix4: .multiplyToArray() has been removed.\")},Ut.prototype.multiplyVector3=function(i){return console.warn(\"THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.\"),i.applyMatrix4(this)},Ut.prototype.multiplyVector4=function(i){return console.warn(\"THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.\"),i.applyMatrix4(this)},Ut.prototype.multiplyVector3Array=function(){console.error(\"THREE.Matrix4: .multiplyVector3Array() has been removed.\")},Ut.prototype.rotateAxis=function(i){console.warn(\"THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.\"),i.transformDirection(this)},Ut.prototype.crossVector=function(i){return console.warn(\"THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.\"),i.applyMatrix4(this)},Ut.prototype.translate=function(){console.error(\"THREE.Matrix4: .translate() has been removed.\")},Ut.prototype.rotateX=function(){console.error(\"THREE.Matrix4: .rotateX() has been removed.\")},Ut.prototype.rotateY=function(){console.error(\"THREE.Matrix4: .rotateY() has been removed.\")},Ut.prototype.rotateZ=function(){console.error(\"THREE.Matrix4: .rotateZ() has been removed.\")},Ut.prototype.rotateByAxis=function(){console.error(\"THREE.Matrix4: .rotateByAxis() has been removed.\")},Ut.prototype.applyToBufferAttribute=function(i){return console.warn(\"THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead.\"),i.applyMatrix4(this)},Ut.prototype.applyToVector3Array=function(){console.error(\"THREE.Matrix4: .applyToVector3Array() has been removed.\")},Ut.prototype.makeFrustum=function(i,e,t,n,r,o){return console.warn(\"THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.\"),this.makePerspective(i,e,n,t,r,o)},Ut.prototype.getInverse=function(i){return console.warn(\"THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead.\"),this.copy(i).invert()},io.prototype.isIntersectionLine=function(i){return console.warn(\"THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().\"),this.intersectsLine(i)},Y.prototype.multiplyVector3=function(i){return console.warn(\"THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.\"),i.applyQuaternion(this)},Y.prototype.inverse=function(){return console.warn(\"THREE.Quaternion: .inverse() has been renamed to invert().\"),this.invert()},ei.prototype.isIntersectionBox=function(i){return console.warn(\"THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().\"),this.intersectsBox(i)},ei.prototype.isIntersectionPlane=function(i){return console.warn(\"THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().\"),this.intersectsPlane(i)},ei.prototype.isIntersectionSphere=function(i){return console.warn(\"THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().\"),this.intersectsSphere(i)},hi.prototype.area=function(){return console.warn(\"THREE.Triangle: .area() has been renamed to .getArea().\"),this.getArea()},hi.prototype.barycoordFromPoint=function(i,e){return console.warn(\"THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().\"),this.getBarycoord(i,e)},hi.prototype.midpoint=function(i){return console.warn(\"THREE.Triangle: .midpoint() has been renamed to .getMidpoint().\"),this.getMidpoint(i)},hi.prototypenormal=function(i){return console.warn(\"THREE.Triangle: .normal() has been renamed to .getNormal().\"),this.getNormal(i)},hi.prototype.plane=function(i){return console.warn(\"THREE.Triangle: .plane() has been renamed to .getPlane().\"),this.getPlane(i)},hi.barycoordFromPoint=function(i,e,t,n,r){return console.warn(\"THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().\"),hi.getBarycoord(i,e,t,n,r)},hi.normal=function(i,e,t,n){return console.warn(\"THREE.Triangle: .normal() has been renamed to .getNormal().\"),hi.getNormal(i,e,t,n)},rl.prototype.extractAllPoints=function(i){return console.warn(\"THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.\"),this.extractPoints(i)},rl.prototype.extrude=function(i){return console.warn(\"THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.\"),new es(this,i)},rl.prototype.makeGeometry=function(i){return console.warn(\"THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.\"),new lu(this,i)},gt.prototype.fromAttribute=function(i,e,t){return console.warn(\"THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().\"),this.fromBufferAttribute(i,e,t)},gt.prototype.distanceToManhattan=function(i){return console.warn(\"THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().\"),this.manhattanDistanceTo(i)},gt.prototype.lengthManhattan=function(){return console.warn(\"THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().\"),this.manhattanLength()},re.prototype.setEulerFromRotationMatrix=function(){console.error(\"THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.\")},re.prototype.setEulerFromQuaternion=function(){console.error(\"THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.\")},re.prototype.getPositionFromMatrix=function(i){return console.warn(\"THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().\"),this.setFromMatrixPosition(i)},re.prototype.getScaleFromMatrix=function(i){return console.warn(\"THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().\"),this.setFromMatrixScale(i)},re.prototype.getColumnFromMatrix=function(i,e){return console.warn(\"THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().\"),this.setFromMatrixColumn(e,i)},re.prototype.applyProjection=function(i){return console.warn(\"THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.\"),this.applyMatrix4(i)},re.prototype.fromAttribute=function(i,e,t){return console.warn(\"THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().\"),this.fromBufferAttribute(i,e,t)},re.prototype.distanceToManhattan=function(i){return console.warn(\"THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().\"),this.manhattanDistanceTo(i)},re.prototype.lengthManhattan=function(){return console.warn(\"THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().\"),this.manhattanLength()},Un.prototype.fromAttribute=function(i,e,t){return console.warn(\"THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().\"),this.fromBufferAttribute(i,e,t)},Un.prototype.lengthManhattan=function(){return console.warn(\"THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().\"),this.manhattanLength()},yn.prototype.getChildByName=function(i){return console.warn(\"THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().\"),this.getObjectByName(i)},yn.prototype.renderDepth=function(){console.warn(\"THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.\")},yn.prototype.translate=function(i,e){return console.warn(\"THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.\"),this.translateOnAxis(e,i)},yn.prototype.getWorldRotation=function(){console.error(\"THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.\")},yn.prototype.applyMatrix=function(i){return console.warn(\"THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4().\"),this.applyMatrix4(i)},Object.defineProperties(yn.prototype,{eulerOrder:{get:function(){return console.warn(\"THREE.Object3D: .eulerOrder is now .rotation.order.\"),this.rotation.order},set:function(i){console.warn(\"THREE.Object3D: .eulerOrder is now .rotation.order.\"),this.rotation.order=i}},useQuaternion:{get:function(){console.warn(\"THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.\")},set:function(){console.warn(\"THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.\")}}}),Xn.prototype.setDrawMode=function(){console.error(\"THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.\")},Object.defineProperties(Xn.prototype,{drawMode:{get:function(){return console.error(\"THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode.\"),at},set:function(){console.error(\"THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.\")}}}),Yh.prototype.initBones=function(){console.error(\"THREE.SkinnedMesh: initBones() has been removed.\")},ci.prototype.setLens=function(i,e){console.warn(\"THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.\"),e!==void 0&&(this.filmGauge=e),this.setFocalLength(i)},Object.defineProperties(rs.prototype,{onlyShadow:{set:function(){console.warn(\"THREE.Light: .onlyShadow has been removed.\")}},shadowCameraFov:{set:function(i){console.warn(\"THREE.Light: .shadowCameraFov is now .shadow.camera.fov.\"),this.shadow.camera.fov=i}},shadowCameraLeft:{set:function(i){console.warn(\"THREE.Light: .shadowCameraLeft is now .shadow.camera.left.\"),this.shadow.camera.left=i}},shadowCameraRight:{set:function(i){console.warn(\"THREE.Light: .shadowCameraRight is now .shadow.camera.right.\"),this.shadow.camera.right=i}},shadowCameraTop:{set:function(i){console.warn(\"THREE.Light: .shadowCameraTop is now .shadow.camera.top.\"),this.shadow.camera.top=i}},shadowCameraBottom:{set:function(i){console.warn(\"THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.\"),this.shadow.camera.bottom=i}},shadowCameraNear:{set:function(i){console.warn(\"THREE.Light: .shadowCameraNear is now .shadow.camera.near.\"),this.shadow.camera.near=i}},shadowCameraFar:{set:function(i){console.warn(\"THREE.Light: .shadowCameraFar is now .shadow.camera.far.\"),this.shadow.camera.far=i}},shadowCameraVisible:{set:function(){console.warn(\"THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.\")}},shadowBias:{set:function(i){console.warn(\"THREE.Light: .shadowBias is now .shadow.bias.\"),this.shadow.bias=i}},shadowDarkness:{set:function(){console.warn(\"THREE.Light: .shadowDarkness has been removed.\")}},shadowMapWidth:{set:function(i){console.warn(\"THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.\"),this.shadow.mapSize.width=i}},shadowMapHeight:{set:function(i){console.warn(\"THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.\"),this.shadow.mapSize.height=i}}}),Object.defineProperties(mn.prototype,{length:{get:function(){return console.warn(\"THREE.BufferAttribute: .length has been deprecated. Use .count instead.\"),this.array.length}},dynamic:{get:function(){return console.warn(\"THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.\"),this.usage===kr},set:function(){console.warn(\"THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.\"),this.setUsage(kr)}}}),mn.prototype.setDynamic=function(i){return console.warn(\"THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead.\"),this.setUsage(i===!0?kr:_o),this},mn.prototype.copyIndicesArray=function(){console.error(\"THREE.BufferAttribute: .copyIndicesArray() has been removed.\")},mn.prototype.setArray=function(){console.error(\"THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers\")},Vt.prototype.addIndex=function(i){console.warn(\"THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().\"),this.setIndex(i)},Vt.prototype.addAttribute=function(i,e){return console.warn(\"THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute().\"),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?i===\"index\"?(console.warn(\"THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.\"),this.setIndex(e),this):this.setAttribute(i,e):(console.warn(\"THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).\"),this.setAttribute(i,new mn(arguments[1],arguments[2])))},Vt.prototype.addDrawCall=function(i,e,t){t!==void 0&&console.warn(\"THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.\"),console.warn(\"THREE.BufferGeometry: .addDrawCall() is now .addGroup().\"),this.addGroup(i,e)},Vt.prototype.clearDrawCalls=function(){console.warn(\"THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().\"),this.clearGroups()},Vt.prototype.computeOffsets=function(){console.warn(\"THREE.BufferGeometry: .computeOffsets() has been removed.\")},Vt.prototype.removeAttribute=function(i){return console.warn(\"THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute().\"),this.deleteAttribute(i)},Vt.prototype.applyMatrix=function(i){return console.warn(\"THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4().\"),this.applyMatrix4(i)},Object.defineProperties(Vt.prototype,{drawcalls:{get:function(){return console.error(\"THREE.BufferGeometry: .drawcalls has been renamed to .groups.\"),this.groups}},offsets:{get:function(){return console.warn(\"THREE.BufferGeometry: .offsets has been renamed to .groups.\"),this.groups}}}),xa.prototype.setDynamic=function(i){return console.warn(\"THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead.\"),this.setUsage(i===!0?kr:_o),this},xa.prototype.setArray=function(){console.error(\"THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers\")},es.prototype.getArrays=function(){console.error(\"THREE.ExtrudeGeometry: .getArrays() has been removed.\")},es.prototype.addShapeList=function(){console.error(\"THREE.ExtrudeGeometry: .addShapeList() has been removed.\")},es.prototype.addShape=function(){console.error(\"THREE.ExtrudeGeometry: .addShape() has been removed.\")},Ql.prototype.dispose=function(){console.error(\"THREE.Scene: .dispose() has been removed.\")},fm.prototype.onUpdate=function(){return console.warn(\"THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.\"),this},Object.defineProperties(ki.prototype,{wrapAround:{get:function(){console.warn(\"THREE.Material: .wrapAround has been removed.\")},set:function(){console.warn(\"THREE.Material: .wrapAround has been removed.\")}},overdraw:{get:function(){console.warn(\"THREE.Material: .overdraw has been removed.\")},set:function(){console.warn(\"THREE.Material: .overdraw has been removed.\")}},wrapRGB:{get:function(){return console.warn(\"THREE.Material: .wrapRGB has been removed.\"),new Et}},shading:{get:function(){console.error(\"THREE.\"+this.type+\": .shading has been removed. Use the boolean .flatShading instead.\")},set:function(i){console.warn(\"THREE.\"+this.type+\": .shading has been removed. Use the boolean .flatShading instead.\"),this.flatShading=i===pt}},stencilMask:{get:function(){return console.warn(\"THREE.\"+this.type+\": .stencilMask has been removed. Use .stencilFuncMask instead.\"),this.stencilFuncMask},set:function(i){console.warn(\"THREE.\"+this.type+\": .stencilMask has been removed. Use .stencilFuncMask instead.\"),this.stencilFuncMask=i}}}),Object.defineProperties(ir.prototype,{derivatives:{get:function(){return console.warn(\"THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.\"),this.extensions.derivatives},set:function(i){console.warn(\"THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.\"),this.extensions.derivatives=i}}}),on.prototype.clearTarget=function(i,e,t,n){console.warn(\"THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.\"),this.setRenderTarget(i),this.clear(e,t,n)},on.prototype.animate=function(i){console.warn(\"THREE.WebGLRenderer: .animate() is now .setAnimationLoop().\"),this.setAnimationLoop(i)},on.prototype.getCurrentRenderTarget=function(){return console.warn(\"THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().\"),this.getRenderTarget()},on.prototype.getMaxAnisotropy=function(){return console.warn(\"THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().\"),this.capabilities.getMaxAnisotropy()},on.prototype.getPrecision=function(){return console.warn(\"THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.\"),this.capabilities.precision},on.prototype.resetGLState=function(){return console.warn(\"THREE.WebGLRenderer: .resetGLState() is now .state.reset().\"),this.state.reset()},on.prototype.supportsFloatTextures=function(){return console.warn(\"THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).\"),this.extensions.get(\"OES_texture_float\")},on.prototype.supportsHalfFloatTextures=function(){return console.warn(\"THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).\"),this.extensions.get(\"OES_texture_half_float\")},on.prototype.supportsStandardDerivatives=function(){return console.warn(\"THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).\"),this.extensions.get(\"OES_standard_derivatives\")},on.prototype.supportsCompressedTextureS3TC=function(){return console.warn(\"THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).\"),this.extensions.get(\"WEBGL_compressed_texture_s3tc\")},on.prototype.supportsCompressedTexturePVRTC=function(){return console.warn(\"THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).\"),this.extensions.get(\"WEBGL_compressed_texture_pvrtc\")},on.prototype.supportsBlendMinMax=function(){return console.warn(\"THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).\"),this.extensions.get(\"EXT_blend_minmax\")},on.prototype.supportsVertexTextures=function(){return console.warn(\"THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.\"),this.capabilities.vertexTextures},on.prototype.supportsInstancedArrays=function(){return console.warn(\"THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).\"),this.extensions.get(\"ANGLE_instanced_arrays\")},on.prototype.enableScissorTest=function(i){console.warn(\"THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().\"),this.setScissorTest(i)},on.prototype.initMaterial=function(){console.warn(\"THREE.WebGLRenderer: .initMaterial() has been removed.\")},on.prototype.addPrePlugin=function(){console.warn(\"THREE.WebGLRenderer: .addPrePlugin() has been removed.\")},on.prototype.addPostPlugin=function(){console.warn(\"THREE.WebGLRenderer: .addPostPlugin() has been removed.\")},on.prototype.updateShadowMap=function(){console.warn(\"THREE.WebGLRenderer: .updateShadowMap() has been removed.\")},on.prototype.setFaceCulling=function(){console.warn(\"THREE.WebGLRenderer: .setFaceCulling() has been removed.\")},on.prototype.allocTextureUnit=function(){console.warn(\"THREE.WebGLRenderer: .allocTextureUnit() has been removed.\")},on.prototype.setTexture=function(){console.warn(\"THREE.WebGLRenderer: .setTexture() has been removed.\")},on.prototype.setTexture2D=function(){console.warn(\"THREE.WebGLRenderer: .setTexture2D() has been removed.\")},on.prototype.setTextureCube=function(){console.warn(\"THREE.WebGLRenderer: .setTextureCube() has been removed.\")},on.prototype.getActiveMipMapLevel=function(){return console.warn(\"THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel().\"),this.getActiveMipmapLevel()},Object.defineProperties(on.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(i){console.warn(\"THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.\"),this.shadowMap.enabled=i}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(i){console.warn(\"THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.\"),this.shadowMap.type=i}},shadowMapCullFace:{get:function(){console.warn(\"THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.\")},set:function(){console.warn(\"THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.\")}},context:{get:function(){return console.warn(\"THREE.WebGLRenderer: .context has been removed. Use .getContext() instead.\"),this.getContext()}},vr:{get:function(){return console.warn(\"THREE.WebGLRenderer: .vr has been renamed to .xr\"),this.xr}},gammaInput:{get:function(){return console.warn(\"THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.\"),!1},set:function(){console.warn(\"THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.\")}},gammaOutput:{get:function(){return console.warn(\"THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.\"),!1},set:function(i){console.warn(\"THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.\"),this.outputEncoding=i===!0?oi:tn}},toneMappingWhitePoint:{get:function(){return console.warn(\"THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.\"),1},set:function(){console.warn(\"THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.\")}}}),Object.defineProperties(Zl.prototype,{cullFace:{get:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.\")},set:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.\")}},renderReverseSided:{get:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.\")},set:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.\")}},renderSingleSided:{get:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.\")},set:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.\")}}}),Object.defineProperties(pr.prototype,{wrapS:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.\"),this.texture.wrapS},set:function(i){console.warn(\"THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.\"),this.texture.wrapS=i}},wrapT:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.\"),this.texture.wrapT},set:function(i){console.warn(\"THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.\"),this.texture.wrapT=i}},magFilter:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.\"),this.texture.magFilter},set:function(i){console.warn(\"THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.\"),this.texture.magFilter=i}},minFilter:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.\"),this.texture.minFilter},set:function(i){console.warn(\"THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.\"),this.texture.minFilter=i}},anisotropy:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.\"),this.texture.anisotropy},set:function(i){console.warn(\"THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.\"),this.texture.anisotropy=i}},offset:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .offset is now .texture.offset.\"),this.texture.offset},set:function(i){console.warn(\"THREE.WebGLRenderTarget: .offset is now .texture.offset.\"),this.texture.offset=i}},repeat:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .repeat is now .texture.repeat.\"),this.texture.repeat},set:function(i){console.warn(\"THREE.WebGLRenderTarget: .repeat is now .texture.repeat.\"),this.texture.repeat=i}},format:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .format is now .texture.format.\"),this.texture.format},set:function(i){console.warn(\"THREE.WebGLRenderTarget: .format is now .texture.format.\"),this.texture.format=i}},type:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .type is now .texture.type.\"),this.texture.type},set:function(i){console.warn(\"THREE.WebGLRenderTarget: .type is now .texture.type.\"),this.texture.type=i}},generateMipmaps:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.\"),this.texture.generateMipmaps},set:function(i){console.warn(\"THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.\"),this.texture.generateMipmaps=i}}}),qv.prototype.load=function(i){console.warn(\"THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.\");const e=this;return new Ly().load(i,function(t){e.setBuffer(t)}),this},zy.prototype.getData=function(){return console.warn(\"THREE.AudioAnalyser: .getData() is now .getFrequencyData().\"),this.getFrequencyData()},qo.prototype.updateCubeMap=function(i,e){return console.warn(\"THREE.CubeCamera: .updateCubeMap() is now .update().\"),this.update(i,e)},qo.prototype.clear=function(i,e,t,n){return console.warn(\"THREE.CubeCamera: .clear() is now .renderTarget.clear().\"),this.renderTarget.clear(i,e,t,n)},ea.crossOrigin=void 0,ea.loadTexture=function(i,e,t,n){console.warn(\"THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.\");const r=new Dv;r.setCrossOrigin(this.crossOrigin);const o=r.load(i,t,void 0,n);return e&&(o.mapping=e),o},ea.loadTextureCube=function(i,e,t,n){console.warn(\"THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.\");const r=new vy;r.setCrossOrigin(this.crossOrigin);const o=r.load(i,t,void 0,n);return e&&(o.mapping=e),o},ea.loadCompressedTexture=function(){console.error(\"THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.\")},ea.loadCompressedTextureCube=function(){console.error(\"THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.\")};const bM={createMultiMaterialObject:function(){console.error(\"THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js\")},detach:function(){console.error(\"THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js\")},attach:function(){console.error(\"THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js\")}};function wM(){console.error(\"THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js\")}typeof __THREE_DEVTOOLS__!=\"undefined\"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(\"register\",{detail:{revision:D}})),typeof window!=\"undefined\"&&(window.__THREE__?console.warn(\"WARNING: Multiple instances of Three.js being imported.\"):window.__THREE__=D);class SM{constructor(){this.camera=new fc(10,10,10,10),this.camera.position.z=100,this.camera.position.x=0,this.camera.position.y=0}focus(e,t){e.position.z=50}updateAspect(e,t){this.camera.left=-1*e/2,this.camera.right=e/2,this.camera.top=t/2,this.camera.bottom=-1*t/2,this.camera.updateProjectionMatrix()}}class _r{constructor(){this.camera=new SM,this.mesh=new Xn,this.material=null,this.geometry=null}addObjects(e){this.mesh.position.z=50,e.add(this.mesh)}setTexture(e,t,n,r){this.camera.updateAspect(n,r),this.geometry=new di(n,r,1,1),this.material=new ir({fragmentShader:this.fragmentShader,vertexShader:`\nvarying vec2 vUv;\nvoid main(){\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n`}),this.material.uniforms={width:{value:n},height:{value:r},texturePrev:{value:e},textureNext:{value:t},timePercent:{value:0}},this.mesh.geometry=this.geometry,this.mesh.material=this.material}updateAnimation(e){this.material.uniforms.timePercent.value=e}dispose(){var e,t;(e=this.geometry)===null||e===void 0||e.dispose(),(t=this.material)===null||t===void 0||t.dispose()}}var TM=v(11),EM=v.n(TM),MM=v(12),AM=v.n(MM),RM=v(13),CM=v.n(RM),PM=v(14),IM=v.n(PM),OM=v(15),LM=v.n(OM),NM=v(16),DM=v.n(NM),FM=v(17),BM=v.n(FM),kM=v(18),UM=v.n(kM),GM=v(19),HM=v.n(GM),zM=v(20),jM=v.n(zM),VM=v(21),WM=v.n(VM),XM=v(22),qM=v.n(XM),YM=v(23),$M=v.n(YM),JM=v(24),ZM=v.n(JM);class Sm{constructor(){this.camera=new ci(60,1,1,2e3),this.camera.position.z=1e3,this.camera.position.x=0,this.camera.position.y=0}updateAspect(e,t){this.camera.aspect=e/t,this.camera.updateProjectionMatrix()}focus(e,t){const n=.5*t/Math.tan(Math.PI/6);e.position.z=1e3-n}}class ip{constructor(){this.geometry=new Vt,this.material=null,this.camera=new Sm,this.mesh=new Xn,this.textureWidth=0,this.textureHeight=0,this.prevTexture=new gi,this.nextTexture=new gi}horizontalSegments(){return Math.ceil(this.verticalSegments*this.textureWidth/this.textureHeight)}initMesh(e,t){const n=[],r=[],o=[],s=this.verticalSegments,a=this.horizontalSegments(),l=e/2,u=t/2,h=e/a,d=t/s,p=this.extraAttributes(),m=Object.keys(p),g=m.reduce((_,y)=>(_[y]=[],_),{});for(let _=0;_<s;_++){const y=_*d-u;for(let w=0;w<a;w++){const R=w*h-l;r.push(R,-y,0),o.push(1*w/a,1-1*_/s),m.forEach(F=>g[F].push(...p[F].generator(_,w))),r.push(R+h,-y,0),o.push(1*(w+1)/a,1-1*_/s),m.forEach(F=>g[F].push(...p[F].generator(_,w))),r.push(R,-y-d,0),o.push(1*w/a,1-1*(_+1)/s),m.forEach(F=>g[F].push(...p[F].generator(_,w))),r.push(R+h,-y-d,0),o.push(1*(w+1)/a,1-1*(_+1)/s),m.forEach(F=>g[F].push(...p[F].generator(_,w)))}}for(let _=0;_<s*a;_++){const y=4*_,w=y+1,R=y+2,F=y+3;n.push(w,y,F),n.push(y,R,F)}return this.geometry.setIndex(n),this.geometry.setAttribute(\"position\",new Mt(r,3)),this.geometry.setAttribute(\"uv\",new Mt(new Float32Array(o),2)),m.forEach(_=>{this.geometry.setAttribute(_,new Mt(new Float32Array(g[_]),p[_].itemSize))}),{verticalSegments:s,horizontalSegments:a,segmentWidth:h,segmentHeight:d}}initObject(){this.material=new ir({fragmentShader:this.fragmentShader,vertexShader:this.vertexShader,side:Ve})}setTexture(e,t,n,r){this.textureHeight=r,this.textureWidth=n,this.prevTexture=e,this.nextTexture=t,this.initObject();const{verticalSegments:o,horizontalSegments:s,segmentWidth:a,segmentHeight:l}=this.initMesh(n,r);this.material.uniforms={segmentWidth:{value:a},segmentHeight:{value:l},verticalSegments:{value:o},horizontalSegments:{value:s},timePercent:{value:0},texturePrev:{value:e},textureNext:{value:t}},this.mesh.geometry=this.geometry,this.camera.updateAspect(n,r),this.camera.focus(this.mesh,r),this.material.transparent=!0,this.mesh.material=this.material}addObjects(e){e.add(this.mesh)}updateAnimation(e){this.material.uniforms.timePercent.value=e}dispose(){var e,t;(e=this.geometry)===null||e===void 0||e.dispose(),(t=this.material)===null||t===void 0||t.dispose()}}var KM=v(25),QM=v.n(KM),eA=v(26),tA=v.n(eA),nA=v(27),iA=v.n(nA),rA=v(28),oA=v.n(rA),sA=v(29),aA=v.n(sA),lA=v(30),uA=v.n(lA),hA=v(31),cA=v.n(hA),dA=v(32),pA=v.n(dA),fA=v(33),mA=v.n(fA),gA=v(34),vA=v.n(gA),_A=v(35),yA=v.n(_A),xA=v(36),bA=v.n(xA);class yx extends ip{constructor(){super(...arguments),this.duration=1250,this.fragmentShader=bA.a,this.vertexShader=yA.a,this.verticalSegments=100}addObjects(e){e.add(this.mesh),e.background=this.nextTexture}extraAttributes(){return{}}}var wA=v(37),SA=v.n(wA),TA=v(38),EA=v.n(TA),MA=v(39),AA=v.n(MA),RA=v(40),CA=v.n(RA),PA=v(41),IA=v.n(PA),OA=v(42),LA=v.n(OA),NA=v(43),DA=v.n(NA);const FA=new re(0,-0,0).multiplyScalar(.1);class BA{constructor(e,t,n,r,o){this.position=new re,this.previous=new re,this.original=new re,this.a=new re(0,0,0),this.mass=r,this.invMass=1/r,this.tmp=new re,this.tmp2=new re,o(e,t,this.position),o(e,t,this.previous),o(e,t,this.original)}addForce(e){this.a.add(this.tmp2.copy(e).multiplyScalar(this.invMass))}integrate(e,t,n){const r=.25*Math.PI,o=.25*-Math.PI,s=new Qn,a=new Qn;s.set(Math.cos(r),-Math.sin(r),0,Math.sin(r),Math.cos(r),0,0,0,1),a.set(Math.cos(o),-Math.sin(o),0,Math.sin(o),Math.cos(o),0,0,0,1);const l=this.tmp.subVectors(this.position,this.previous);l.multiplyScalar(.97).add(this.position),l.add(this.a.multiplyScalar(e)),this.tmp=this.previous,this.previous=this.position,this.position=l,this.a.set(0,0,0)}}class kA{constructor(e,t,n){this.width=e,this.height=t;const r=[],o=[];for(let a=0;a<=t;a++)for(let l=0;l<=e;l++)r.push(new BA(l/e,a/t,0,.1,n));for(let a=0;a<t;a++)for(let l=0;l<e;l++)o.push([r[s(l,a)],r[s(l,a+1)],25]),o.push([r[s(l,a)],r[s(l+1,a)],25]);for(let a=e,l=0;l<t;l++)o.push([r[s(a,l)],r[s(a,l+1)],25]);for(let a=t,l=0;l<e;l++)o.push([r[s(l,a)],r[s(l+1,a)],25]);function s(a,l){return a+l*(e+1)}this.particles=r,this.constraints=o,this.index=s}}const UA={RandomLines:class extends _r{constructor(){super(...arguments),this.duration=1e3,this.fragmentShader=AM.a}genRandomLines(){let i=[1];for(let t=20;t--;){let n=i.sort((l,u)=>u-l)[0],r=i.indexOf(n),o=Math.random(),s=n*o,a=n*(1-o);i.splice(r,1),i.push(s,a)}let e=i.length;for(;e;){let t=Math.floor(Math.random()*e--);[i[t],i[e]]=[i[e],i[t]]}return i}setTexture(i,e,t,n){super.setTexture(i,e,t,n),this.material.uniforms.lines={value:this.genRandomLines()},this.material.vertexShader=EM.a}},Shape:class extends _r{constructor(){super(...arguments),this.duration=800,this.fragmentShader=CM.a}},Ripples:class extends _r{constructor(){super(...arguments),this.duration=1400,this.fragmentShader=IM.a}},Erase:class extends _r{constructor(){super(...arguments),this.duration=1e3,this.fragmentShader=LM.a}},Dissolve:class extends _r{constructor(){super(...arguments),this.duration=1200,this.fragmentShader=DM.a,this.dissolveIndices={}}random40(){return Math.ceil(40*Math.random())}setTexture(i,e,t,n){super.setTexture(i,e,t,n);for(let r=0;r<1600;r++){let o=this.random40(),s=this.random40();for(;this.dissolveIndices[`${o}_${s}`]!==void 0;)o=this.random40(),s=this.random40();this.dissolveIndices[`${o}_${s}`]=0}this.material.uniforms.dissolveTexture={value:this.genDissolveToTexture()}}genDissolveToTexture(){var i=new Uint8Array(4800);for(let e=0;e<1600;e++){const t=e%40+1,n=Math.floor(e/40)+1,r=3*e;this.dissolveIndices[`${t}_${n}`]===0?(i[r]=0,i[r+1]=0,i[r+2]=0):(i[r]=255,i[r+1]=255,i[r+2]=255)}return new Es(i,40,40,Lo)}updateAnimation(i){const e=1600*i-Object.keys(this.dissolveIndices).filter(t=>this.dissolveIndices[t]===1).length;for(let t=0;t<e;t++){const n=Object.keys(this.dissolveIndices).filter(o=>this.dissolveIndices[o]===0),r=Math.ceil(Math.random()*n.length)-1;this.dissolveIndices[n[r]]=1}this.material.uniforms.dissolveTexture.value=this.genDissolveToTexture()}},Smooth:class extends _r{constructor(){super(...arguments),this.duration=2e3,this.fragmentShader=BM.a}},FadeInOut:class extends _r{constructor(){super(...arguments),this.duration=700,this.fragmentShader=UM.a}},Push:class extends _r{constructor(){super(...arguments),this.duration=1e3,this.fragmentShader=HM.a}},Separation:class extends _r{constructor(){super(...arguments),this.duration=1500,this.fragmentShader=jM.a}},Display:class extends _r{constructor(){super(...arguments),this.duration=3400,this.fragmentShader=WM.a}},Uncover:class extends _r{constructor(){super(...arguments),this.duration=750,this.fragmentShader=qM.a}},Cover:class extends _r{constructor(){super(...arguments),this.duration=1e3,this.fragmentShader=$M.a}},Flash:class extends _r{constructor(){super(...arguments),this.duration=1e3,this.fragmentShader=ZM.a}},Checkerboard:class extends ip{constructor(){super(...arguments),this.duration=2500,this.fragmentShader=tA.a,this.vertexShader=QM.a,this.vIndex=\"\",this.delay=0,this.verticalSegments=5}extraAttributes(){return{times:{itemSize:1,generator:(i,e)=>(this.vIndex!==`${i}${e}`&&(this.delay=.3*Math.random(),this.vIndex=`${i}${e}`),[this.delay])},segment:{itemSize:2,generator:(i,e)=>[e,i]}}}},Vortex:class{constructor(){this.duration=4e3,this.geometry=new Vt,this.material=new ir({fragmentShader:oA.a,vertexShader:iA.a,side:Ve}),this.camera=new Sm,this.mesh=new Xn}initData(i,e){const t=[],n=[],r=[],o=[],s=[],a=[],l=Math.ceil(124*i/e),u=i/2,h=e/2,d=i/l,p=e/124;for(let m=0;m<124;m++){const g=m*p-h;for(let _=0;_<l;_++){const y=_*d-u,w=Math.ceil((_+1)/((l+1)/12)),R=.4/w,F=(w-1)*R+Math.random()*R;n.push(y,-g,0),o.push(1*_/l,1-1*m/124),r.push(0,0,1),s.push(_,m),a.push(F),n.push(y+d,-g,0),o.push(1*(_+1)/l,1-1*m/124),r.push(0,0,1),s.push(_,m),a.push(F),n.push(y,-g-p,0),o.push(1*_/l,1-1*(m+1)/124),r.push(0,0,1),s.push(_,m),a.push(F),n.push(y+d,-g-p,0),o.push(1*(_+1)/l,1-1*(m+1)/124),r.push(0,0,1),s.push(_,m),a.push(F)}}for(let m=0;m<124*l;m++){const g=4*m,_=g+1,y=g+2,w=g+3;t.push(_,g,w),t.push(g,y,w)}return this.geometry.setIndex(t),this.geometry.setAttribute(\"position\",new Mt(n,3)),this.geometry.setAttribute(\"normal\",new Mt(r,3)),this.geometry.setAttribute(\"uv\",new Mt(new Float32Array(o),2)),this.geometry.setAttribute(\"segment\",new Mt(new Float32Array(s),2)),this.geometry.setAttribute(\"times\",new Mt(new Float32Array(a),1)),{verticalSegments:124,horizontalSegments:l,segmentWidth:d,segmentHeight:p}}setTexture(i,e){const{width:t,height:n}=i.image,{verticalSegments:r,horizontalSegments:o,segmentWidth:s,segmentHeight:a}=this.initData(t,n);this.material.uniforms={duration:{value:this.duration},segmentWidth:{value:s},segmentHeight:{value:a},verticalSegments:{value:r},horizontalSegments:{value:o},timePercent:{value:0},texturePrev:{value:i},textureNext:{value:e}},this.camera.updateAspect(t,n),this.camera.focus(this.mesh,n),this.mesh.geometry=this.geometry,new lm({side:Ve,vertexColors:!0}).wireframe=!0,this.material.transparent=!0,this.mesh.material=this.material,console.log(b)}addObjects(i){i.add(this.mesh)}updateAnimation(i){this.material.uniforms.timePercent.value=i}dispose(){var i,e;(i=this.geometry)===null||i===void 0||i.dispose(),(e=this.material)===null||e===void 0||e.dispose()}},WindowShades:class{constructor(){this.duration=1600,this.geometry=new Vt,this.material=new ir({fragmentShader:uA.a,vertexShader:aA.a,side:Ve}),this.horizontalSegments=16,this.meshToCameraDistance=0,this.camera=new Sm,this.mesh=new Xn}initData(i,e){const t=[],n=[],r=[],o=[],s=[],a=[],l=i/2,u=e/2,h=i/this.horizontalSegments;for(let d=0;d<this.horizontalSegments;d++){const p=Math.abs(d-Math.ceil(this.horizontalSegments/2))*(.3/Math.ceil(this.horizontalSegments/2)),m=d*h-l;n.push(m,u,0),r.push(0),o.push(d/this.horizontalSegments,1),s.push(d),a.push(p),n.push(m+h,u,0),r.push(0),o.push((d+1)/this.horizontalSegments,1),s.push(d),a.push(p),n.push(m,-1*u,0),r.push(0),o.push(d/this.horizontalSegments,0),s.push(d),a.push(p),n.push(m+h,-1*u,0),o.push((d+1)/this.horizontalSegments,0),r.push(0),s.push(d),a.push(p),n.push(m+h,u,0),r.push(1),o.push(d/this.horizontalSegments,1),s.push(d),a.push(p),n.push(m+h,u,-1*h),r.push(1),o.push((d+1)/this.horizontalSegments,1),s.push(d),a.push(p),n.push(m+h,-1*u,0),r.push(1),o.push(d/this.horizontalSegments,0),s.push(d),a.push(p),n.push(m+h,-1*u,-1*h),o.push((d+1)/this.horizontalSegments,0),r.push(1),s.push(d),a.push(p)}for(let d=0;d<this.horizontalSegments;d++){const p=8*d,m=p+1,g=p+2,_=p+3,y=p+4,w=p+5,R=p+6,F=p+7;t.push(m,p,_),t.push(p,g,_),t.push(w,y,F),t.push(y,R,F)}this.geometry.setIndex(t),this.geometry.setAttribute(\"position\",new Mt(n,3)),this.geometry.setAttribute(\"uv\",new Mt(new Float32Array(o),2)),this.geometry.setAttribute(\"index\",new Mt(new Float32Array(s),1)),this.geometry.setAttribute(\"type\",new Mt(new Float32Array(r),1)),this.geometry.setAttribute(\"delay\",new Mt(new Float32Array(a),1))}setTexture(i,e,t,n){this.initData(t,n),this.material.uniforms={segments:{value:this.horizontalSegments},segmentWidth:{value:t/this.horizontalSegments},timePercent:{value:0},texturePrev:{value:i},textureNext:{value:e}},this.meshToCameraDistance=.5*n/Math.tan(Math.PI/6),this.camera.updateAspect(t,n),this.camera.focus(this.mesh,n),this.mesh.geometry=this.geometry,this.material.transparent=!0,this.mesh.material=this.material}addObjects(i){i.add(this.mesh)}updateAnimation(i){this.material.uniforms.timePercent.value=i}dispose(){var i,e;(i=this.geometry)===null||i===void 0||i.dispose(),(e=this.material)===null||e===void 0||e.dispose()}},Curtain:class extends ip{constructor(){super(...arguments),this.duration=6e3,this.fragmentShader=pA.a,this.vertexShader=cA.a,this.verticalSegments=100}extraAttributes(){return{isLeft:{itemSize:1,generator:(i,e)=>[e<this.horizontalSegments()/2?1:0]}}}addObjects(i){super.addObjects(i),this.mesh.position.z+=20,i.background=this.nextTexture}},Fall:class extends ip{constructor(){super(...arguments),this.zCurveLimit=100,this.duration=2e3,this.verticalSegments=100,this.fragmentShader=vA.a,this.vertexShader=mA.a}extraAttributes(){return{}}setTexture(i,e,t,n){super.setTexture(i,e,t,n),this.material.uniforms.zCurveLimit={value:this.zCurveLimit},this.material.uniforms.aCoefficient={value:this.zCurveLimit/(this.textureHeight/2*(this.textureHeight/2))}}addObjects(i){i.add(this.mesh),i.background=this.nextTexture}updateAnimation(i){this.material.uniforms.timePercent.value=i}},Suspension:class extends yx{constructor(){super(...arguments),this.duration=2e3,this.fragmentShader=EA.a,this.vertexShader=SA.a}addObjects(i){i.add(this.mesh),i.background=this.prevTexture}},Clock:class extends _r{constructor(){super(...arguments),this.duration=1e3,this.fragmentShader=AA.a}},Combing:class extends _r{constructor(){super(...arguments),this.duration=1e3,this.fragmentShader=CA.a}},Scale:class extends _r{constructor(){super(...arguments),this.duration=900,this.fragmentShader=IA.a}},PeelOff:yx,Flip:class extends ip{constructor(){super(...arguments),this.duration=1250,this.fragmentShader=DA.a,this.vertexShader=LA.a,this.verticalSegments=1}extraAttributes(){return{}}},Wind:class{constructor(){this.duration=2e3,this.camera=new Sm,this.mesh=new Xn,this.geometry=null,this.material=new um({side:Ve,alphaTest:.5}),this.tmpForce=new re,this.windForce=new re(0,0,0),this.cloth=null,this.nextTexture=null,this.diff=new re,this.xSegs=10,this.ySegs=10,this.width=10,this.height=10,this.enablePins=!0,this.animate=i=>{this.simulate(i),this.render(),requestAnimationFrame(this.animate)}}setTexture(i,e,t,n){const r=t,o=n;this.xSegs=Math.ceil(r/25),this.ySegs=Math.ceil(o/25),this.width=25*this.xSegs,this.height=25*this.ySegs;const s=function(a,l){return function(u,h,d){const p=(u-.5)*a,m=(h+.5)*l;d.set(p,m,0)}}(25*this.xSegs,25*this.ySegs);this.cloth=new kA(this.xSegs,this.ySegs,s),this.nextTexture=e,this.camera.updateAspect(r,o),this.material.map=i,this.geometry=new $d(s,this.cloth.width,this.cloth.height),this.mesh.geometry=this.geometry,this.material.transparent=!0,this.mesh.material=this.material,this.mesh.castShadow=!0,this.mesh.position.y-=o,this.mesh.customDepthMaterial=new $l({depthPacking:vs,map:i,alphaTest:.5}),this.camera.focus(this.mesh,o)}addObjects(i){i.add(this.mesh),i.background=this.nextTexture,i.add(new cm(6710886));const e=new hm(14674943,1);e.position.set(0,0,100),e.position.multiplyScalar(1.3),e.castShadow=!0,e.shadow.mapSize.width=1024,e.shadow.mapSize.height=1024;const t=300;e.shadow.camera.left=-t,e.shadow.camera.right=t,e.shadow.camera.top=t,e.shadow.camera.bottom=-t,e.shadow.camera.far=1e3,i.add(e),this.animate(0)}satisfyConstraints(i,e,t){this.diff.subVectors(e.position,i.position);const n=this.diff.length();if(n===0)return;const r=this.diff.multiplyScalar(1-t/n).multiplyScalar(.5);i.position.add(r),e.position.sub(r)}simulate(i){const e=20*Math.abs(Math.cos(i/70));this.windForce.set(Math.abs(Math.sin(i/300)),Math.abs(Math.cos(i/200)),Math.sin(i/1e3)),this.windForce.normalize(),this.windForce.x*=50*e,this.windForce.y*=50*e,this.windForce.z*=.2*e;const t=this.cloth.particles;let n;const r=new re,o=this.geometry.index,s=this.geometry.attributes.normal;for(let u=0,h=o.count;u<h;u+=3)for(let d=0;d<3;d++)n=o.getX(u+d),r.fromBufferAttribute(s,n),this.tmpForce.copy(r).normalize().multiplyScalar(r.dot(this.windForce)),t[n].addForce(this.tmpForce);for(let u=0,h=t.length;u<h;u++){const d=t[u];d.addForce(FA),d.integrate(144e-6,this.width,this.height)}const a=this.cloth.constraints,l=a.length;for(let u=0;u<l;u++){const h=a[u];this.satisfyConstraints(h[0],h[1],h[2])}for(let u=0,h=t.length;u<h;u++){const d=t[u].position;d.y<-250&&(d.y=-250)}if(this.enablePins){let u=new Array(this.xSegs+1).fill(\"\").map((h,d)=>d);for(let h=0;h<this.ySegs+1;h++)u.push(h*(this.xSegs+1));for(let h=0,d=u.length;h<d;h++){const p=t[u[h]];p.position.copy(p.original),p.previous.copy(p.original)}}}render(){const i=this.cloth.particles;for(let e=0,t=i.length;e<t;e++){const n=i[e].position;this.geometry.attributes.position.setXYZ(e,n.x,n.y,n.z)}this.geometry.attributes.position.needsUpdate=!0,this.geometry.computeVertexNormals()}updateAnimation(i){i>.5&&(this.enablePins=!1),i>.9999&&(this.mesh.visible=!1)}dispose(){var i,e;(i=this.geometry)===null||i===void 0||i.dispose(),(e=this.material)===null||e===void 0||e.dispose()}}},xx={linear:(i,e,t,n)=>t*i/n+e,easeIn:(i,e,t,n)=>t*(i/=n)*i+e,strongEaseIn:(i,e,t,n)=>t*(i/=n)*i*i*i*i+e,strongEaseOut:(i,e,t,n)=>t*((i=i/n-1)*i*i*i*i+1)+e,sineaseIn:(i,e,t,n)=>t*(i/=n)*i*i+e,sineaseOut:(i,e,t,n)=>t*((i=i/n-1)*i*i+1)+e};class GA{constructor(){this.startTime=0,this.lastTime=0,this.lastFPSTime=0,this.renderingDuration=16,this.reverse=!1,this.scene=new Ql,this.delay=0,this.easeFn=xx.linear,this.preset=null,this.onTransactionEnd=()=>{},this.onTransactionStart=()=>{},this.isTransactionStartApplied=!1,this.textureLoader=new Dv,this.prevTexture=null,this.nextTexture=null,this.renderer=new on({alpha:!0,premultipliedAlpha:!0}),this.isPlaying=!1,this.animate=(e=-1)=>{var t,n,r;if(!this.fps(e))return void window.requestAnimationFrame(this.animate);this.renderer.clear(),e>this.delay&&this.lastTime===0&&(this.lastTime=e,this.startTime=e);let o=0;this.lastTime>0&&o<1&&(o=this.easeFn(e-this.startTime,0,1,(n=(t=this.preset)===null||t===void 0?void 0:t.duration)!==null&&n!==void 0?n:0)),o>1&&(o=1),(r=this.preset)===null||r===void 0||r.updateAnimation(this.reverse?1-o:o),this.rerender(),this.isTransactionStartApplied||(this.isTransactionStartApplied=!0,this.onTransactionStart()),o<1?window.requestAnimationFrame(this.animate):(this.dispose(),this.onTransactionEnd())}}play(e){var t,n,r;e.onTransactionEnd&&(this.onTransactionEnd=e.onTransactionEnd),e.onTransactionStart&&(this.onTransactionStart=e.onTransactionStart),this.init(e),this.isTransactionStartApplied=!1,this.renderer.setSize(e.stageWidth,e.stageHeight),this.preset=new UA[e.presetType],e.duration&&Number.isInteger(e.duration)&&(this.preset.duration=e.duration),this.prevTexture=this.textureLoader.load(e.prevTextureUrl),this.nextTexture=this.textureLoader.load(e.nextTextureUrl),this.reverse?(t=this.preset)===null||t===void 0||t.setTexture(this.nextTexture,this.prevTexture,e.textureWidth,e.textureHeight):(n=this.preset)===null||n===void 0||n.setTexture(this.prevTexture,this.nextTexture,e.textureWidth,e.textureHeight),(r=this.preset)===null||r===void 0||r.addObjects(this.scene),this.animate(),this.isPlaying=!0}init(e){this.reverse=e.reverse,e.delay&&Number.isInteger(e.delay)&&(this.delay=e.delay),e.easeFn&&(this.easeFn=xx[e.easeFn]),e.maxFPS&&Number.isInteger(e.maxFPS)&&e.maxFPS>0&&(this.renderingDuration=Math.ceil(1e3/e.maxFPS)),this.startTime=0,this.lastTime=0,this.scene.clear(),this.renderer.shadowMap.enabled=!0,this.renderer.autoClear=!1,this.renderer.setClearColor(e.clearColor||0)}rerender(){var e;this.renderer.clear(),!((e=this.preset)===null||e===void 0)&&e.camera.camera&&this.renderer.render(this.scene,this.preset.camera.camera)}fps(e){return e<=0?!0:this.lastFPSTime<0?(this.lastFPSTime=e,!0):e-this.lastFPSTime>=this.renderingDuration&&(this.lastFPSTime=e,!0)}skip(){var e;(e=this.preset)===null||e===void 0||e.updateAnimation(this.reverse?0:1),this.rerender(),this.dispose(),this.onTransactionEnd()}dispose(){var e,t,n;this.renderer.clear(),this.isPlaying=!1,(e=this.preset)===null||e===void 0||e.dispose(),(t=this.prevTexture)===null||t===void 0||t.dispose(),(n=this.nextTexture)===null||n===void 0||n.dispose();for(let r=this.scene.children.length-1;r>=0;r--){const o=this.scene.children[r];this.scene.remove(o)}this.scene.background=null}destroy(){this.dispose(),this.renderer.forceContextLoss(),this.renderer.dispose()}}var HA=v(44),zA=v(47),jA=v.n(zA);/*!\n * @pixi/polyfill - v6.2.0\n * Compiled Mon, 01 Nov 2021 16:52:10 UTC\n *\n * @pixi/polyfill is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */if(self.Promise||(self.Promise=HA.a),Object.assign||(Object.assign=jA.a),Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()}),!self.performance||!self.performance.now){var VA=Date.now();self.performance||(self.performance={}),self.performance.now=function(){return Date.now()-VA}}for(var t0=Date.now(),bx=[\"ms\",\"moz\",\"webkit\",\"o\"],n0=0;n0<bx.length&&!self.requestAnimationFrame;++n0){var i0=bx[n0];self.requestAnimationFrame=self[i0+\"RequestAnimationFrame\"],self.cancelAnimationFrame=self[i0+\"CancelAnimationFrame\"]||self[i0+\"CancelRequestAnimationFrame\"]}self.requestAnimationFrame||(self.requestAnimationFrame=function(i){if(typeof i!=\"function\")throw new TypeError(i+\"is not a function\");var e=Date.now(),t=16+t0-e;return t<0&&(t=0),t0=e,self.setTimeout(function(){t0=Date.now(),i(performance.now())},t)}),self.cancelAnimationFrame||(self.cancelAnimationFrame=function(i){return clearTimeout(i)}),Math.sign||(Math.sign=function(i){return(i=Number(i))===0||isNaN(i)?i:i>0?1:-1}),Number.isInteger||(Number.isInteger=function(i){return typeof i==\"number\"&&isFinite(i)&&Math.floor(i)===i}),self.ArrayBuffer||(self.ArrayBuffer=Array),self.Float32Array||(self.Float32Array=Array),self.Uint32Array||(self.Uint32Array=Array),self.Uint16Array||(self.Uint16Array=Array),self.Uint8Array||(self.Uint8Array=Array),self.Int32Array||(self.Int32Array=Array);var r0=/iPhone/i,wx=/iPod/i,Sx=/iPad/i,Tx=/\\biOS-universal(?:.+)Mac\\b/i,o0=/\\bAndroid(?:.+)Mobile\\b/i,Ex=/Android/i,vc=/(?:SD4930UR|\\bSilk(?:.+)Mobile\\b)/i,Tm=/Silk/i,Ra=/Windows Phone/i,Mx=/\\bWindows(?:.+)ARM\\b/i,Ax=/BlackBerry/i,Rx=/BB10/i,Cx=/Opera Mini/i,Px=/\\b(CriOS|Chrome)(?:.+)Mobile/i,Ix=/Mobile(?:.+)Firefox\\b/i,Ox=function(i){return i!==void 0&&i.platform===\"MacIntel\"&&typeof i.maxTouchPoints==\"number\"&&i.maxTouchPoints>1&&typeof MSStream==\"undefined\"};/*!\n * @pixi/settings - v6.2.0\n * Compiled Mon, 01 Nov 2021 16:52:10 UTC\n *\n * @pixi/settings is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */var Lx,Nx,Dx,Fx,Bx,kx,Ux,Gx,Hx,s0,a0,l0,zx,jx,u0,rp,Vx,h0,Wx,os=function(i){var e={userAgent:\"\",platform:\"\",maxTouchPoints:0};i||typeof navigator==\"undefined\"?typeof i==\"string\"?e.userAgent=i:i&&i.userAgent&&(e={userAgent:i.userAgent,platform:i.platform,maxTouchPoints:i.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var t=e.userAgent,n=t.split(\"[FBAN\");n[1]!==void 0&&(t=n[0]),(n=t.split(\"Twitter\"))[1]!==void 0&&(t=n[0]);var r=function(s){return function(a){return a.test(s)}}(t),o={apple:{phone:r(r0)&&!r(Ra),ipod:r(wx),tablet:!r(r0)&&(r(Sx)||Ox(e))&&!r(Ra),universal:r(Tx),device:(r(r0)||r(wx)||r(Sx)||r(Tx)||Ox(e))&&!r(Ra)},amazon:{phone:r(vc),tablet:!r(vc)&&r(Tm),device:r(vc)||r(Tm)},android:{phone:!r(Ra)&&r(vc)||!r(Ra)&&r(o0),tablet:!r(Ra)&&!r(vc)&&!r(o0)&&(r(Tm)||r(Ex)),device:!r(Ra)&&(r(vc)||r(Tm)||r(o0)||r(Ex))||r(/\\bokhttp\\b/i)},windows:{phone:r(Ra),tablet:r(Mx),device:r(Ra)||r(Mx)},other:{blackberry:r(Ax),blackberry10:r(Rx),opera:r(Cx),firefox:r(Ix),chrome:r(Px),device:r(Ax)||r(Rx)||r(Cx)||r(Ix)||r(Px)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}(self.navigator);(function(i){i[i.WEBGL_LEGACY=0]=\"WEBGL_LEGACY\",i[i.WEBGL=1]=\"WEBGL\",i[i.WEBGL2=2]=\"WEBGL2\"})(Lx||(Lx={})),function(i){i[i.UNKNOWN=0]=\"UNKNOWN\",i[i.WEBGL=1]=\"WEBGL\",i[i.CANVAS=2]=\"CANVAS\"}(Nx||(Nx={})),function(i){i[i.COLOR=16384]=\"COLOR\",i[i.DEPTH=256]=\"DEPTH\",i[i.STENCIL=1024]=\"STENCIL\"}(Dx||(Dx={})),function(i){i[i.NORMAL=0]=\"NORMAL\",i[i.ADD=1]=\"ADD\",i[i.MULTIPLY=2]=\"MULTIPLY\",i[i.SCREEN=3]=\"SCREEN\",i[i.OVERLAY=4]=\"OVERLAY\",i[i.DARKEN=5]=\"DARKEN\",i[i.LIGHTEN=6]=\"LIGHTEN\",i[i.COLOR_DODGE=7]=\"COLOR_DODGE\",i[i.COLOR_BURN=8]=\"COLOR_BURN\",i[i.HARD_LIGHT=9]=\"HARD_LIGHT\",i[i.SOFT_LIGHT=10]=\"SOFT_LIGHT\",i[i.DIFFERENCE=11]=\"DIFFERENCE\",i[i.EXCLUSION=12]=\"EXCLUSION\",i[i.HUE=13]=\"HUE\",i[i.SATURATION=14]=\"SATURATION\",i[i.COLOR=15]=\"COLOR\",i[i.LUMINOSITY=16]=\"LUMINOSITY\",i[i.NORMAL_NPM=17]=\"NORMAL_NPM\",i[i.ADD_NPM=18]=\"ADD_NPM\",i[i.SCREEN_NPM=19]=\"SCREEN_NPM\",i[i.NONE=20]=\"NONE\",i[i.SRC_OVER=0]=\"SRC_OVER\",i[i.SRC_IN=21]=\"SRC_IN\",i[i.SRC_OUT=22]=\"SRC_OUT\",i[i.SRC_ATOP=23]=\"SRC_ATOP\",i[i.DST_OVER=24]=\"DST_OVER\",i[i.DST_IN=25]=\"DST_IN\",i[i.DST_OUT=26]=\"DST_OUT\",i[i.DST_ATOP=27]=\"DST_ATOP\",i[i.ERASE=26]=\"ERASE\",i[i.SUBTRACT=28]=\"SUBTRACT\",i[i.XOR=29]=\"XOR\"}(Fx||(Fx={})),function(i){i[i.POINTS=0]=\"POINTS\",i[i.LINES=1]=\"LINES\",i[i.LINE_LOOP=2]=\"LINE_LOOP\",i[i.LINE_STRIP=3]=\"LINE_STRIP\",i[i.TRIANGLES=4]=\"TRIANGLES\",i[i.TRIANGLE_STRIP=5]=\"TRIANGLE_STRIP\",i[i.TRIANGLE_FAN=6]=\"TRIANGLE_FAN\"}(Bx||(Bx={})),function(i){i[i.RGBA=6408]=\"RGBA\",i[i.RGB=6407]=\"RGB\",i[i.RG=33319]=\"RG\",i[i.RED=6403]=\"RED\",i[i.RGBA_INTEGER=36249]=\"RGBA_INTEGER\",i[i.RGB_INTEGER=36248]=\"RGB_INTEGER\",i[i.RG_INTEGER=33320]=\"RG_INTEGER\",i[i.RED_INTEGER=36244]=\"RED_INTEGER\",i[i.ALPHA=6406]=\"ALPHA\",i[i.LUMINANCE=6409]=\"LUMINANCE\",i[i.LUMINANCE_ALPHA=6410]=\"LUMINANCE_ALPHA\",i[i.DEPTH_COMPONENT=6402]=\"DEPTH_COMPONENT\",i[i.DEPTH_STENCIL=34041]=\"DEPTH_STENCIL\"}(kx||(kx={})),function(i){i[i.TEXTURE_2D=3553]=\"TEXTURE_2D\",i[i.TEXTURE_CUBE_MAP=34067]=\"TEXTURE_CUBE_MAP\",i[i.TEXTURE_2D_ARRAY=35866]=\"TEXTURE_2D_ARRAY\",i[i.TEXTURE_CUBE_MAP_POSITIVE_X=34069]=\"TEXTURE_CUBE_MAP_POSITIVE_X\",i[i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]=\"TEXTURE_CUBE_MAP_NEGATIVE_X\",i[i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]=\"TEXTURE_CUBE_MAP_POSITIVE_Y\",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]=\"TEXTURE_CUBE_MAP_NEGATIVE_Y\",i[i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]=\"TEXTURE_CUBE_MAP_POSITIVE_Z\",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]=\"TEXTURE_CUBE_MAP_NEGATIVE_Z\"}(Ux||(Ux={})),function(i){i[i.UNSIGNED_BYTE=5121]=\"UNSIGNED_BYTE\",i[i.UNSIGNED_SHORT=5123]=\"UNSIGNED_SHORT\",i[i.UNSIGNED_SHORT_5_6_5=33635]=\"UNSIGNED_SHORT_5_6_5\",i[i.UNSIGNED_SHORT_4_4_4_4=32819]=\"UNSIGNED_SHORT_4_4_4_4\",i[i.UNSIGNED_SHORT_5_5_5_1=32820]=\"UNSIGNED_SHORT_5_5_5_1\",i[i.UNSIGNED_INT=5125]=\"UNSIGNED_INT\",i[i.UNSIGNED_INT_10F_11F_11F_REV=35899]=\"UNSIGNED_INT_10F_11F_11F_REV\",i[i.UNSIGNED_INT_2_10_10_10_REV=33640]=\"UNSIGNED_INT_2_10_10_10_REV\",i[i.UNSIGNED_INT_24_8=34042]=\"UNSIGNED_INT_24_8\",i[i.UNSIGNED_INT_5_9_9_9_REV=35902]=\"UNSIGNED_INT_5_9_9_9_REV\",i[i.BYTE=5120]=\"BYTE\",i[i.SHORT=5122]=\"SHORT\",i[i.INT=5124]=\"INT\",i[i.FLOAT=5126]=\"FLOAT\",i[i.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]=\"FLOAT_32_UNSIGNED_INT_24_8_REV\",i[i.HALF_FLOAT=36193]=\"HALF_FLOAT\"}(Gx||(Gx={})),function(i){i[i.FLOAT=0]=\"FLOAT\",i[i.INT=1]=\"INT\",i[i.UINT=2]=\"UINT\"}(Hx||(Hx={})),function(i){i[i.NEAREST=0]=\"NEAREST\",i[i.LINEAR=1]=\"LINEAR\"}(s0||(s0={})),function(i){i[i.CLAMP=33071]=\"CLAMP\",i[i.REPEAT=10497]=\"REPEAT\",i[i.MIRRORED_REPEAT=33648]=\"MIRRORED_REPEAT\"}(a0||(a0={})),function(i){i[i.OFF=0]=\"OFF\",i[i.POW2=1]=\"POW2\",i[i.ON=2]=\"ON\",i[i.ON_MANUAL=3]=\"ON_MANUAL\"}(l0||(l0={})),function(i){i[i.NPM=0]=\"NPM\",i[i.UNPACK=1]=\"UNPACK\",i[i.PMA=2]=\"PMA\",i[i.NO_PREMULTIPLIED_ALPHA=0]=\"NO_PREMULTIPLIED_ALPHA\",i[i.PREMULTIPLY_ON_UPLOAD=1]=\"PREMULTIPLY_ON_UPLOAD\",i[i.PREMULTIPLY_ALPHA=2]=\"PREMULTIPLY_ALPHA\",i[i.PREMULTIPLIED_ALPHA=2]=\"PREMULTIPLIED_ALPHA\"}(zx||(zx={})),function(i){i[i.NO=0]=\"NO\",i[i.YES=1]=\"YES\",i[i.AUTO=2]=\"AUTO\",i[i.BLEND=0]=\"BLEND\",i[i.CLEAR=1]=\"CLEAR\",i[i.BLIT=2]=\"BLIT\"}(jx||(jx={})),function(i){i[i.AUTO=0]=\"AUTO\",i[i.MANUAL=1]=\"MANUAL\"}(u0||(u0={})),function(i){i.LOW=\"lowp\",i.MEDIUM=\"mediump\",i.HIGH=\"highp\"}(rp||(rp={})),function(i){i[i.NONE=0]=\"NONE\",i[i.SCISSOR=1]=\"SCISSOR\",i[i.STENCIL=2]=\"STENCIL\",i[i.SPRITE=3]=\"SPRITE\"}(Vx||(Vx={})),function(i){i[i.NONE=0]=\"NONE\",i[i.LOW=2]=\"LOW\",i[i.MEDIUM=4]=\"MEDIUM\",i[i.HIGH=8]=\"HIGH\"}(h0||(h0={})),function(i){i[i.ELEMENT_ARRAY_BUFFER=34963]=\"ELEMENT_ARRAY_BUFFER\",i[i.ARRAY_BUFFER=34962]=\"ARRAY_BUFFER\",i[i.UNIFORM_BUFFER=35345]=\"UNIFORM_BUFFER\"}(Wx||(Wx={}));var Ca,op,Em,Qt,ss,Dt,xu,sn,Mm,Pa,Ia,sl,Os,al,c0,Ls,yr,zi,Ns,Jt={MIPMAP_TEXTURES:l0.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:h0.NONE,SPRITE_MAX_TEXTURES:function(i){var e=!0;if(os.tablet||os.phone){var t;os.apple.device&&(t=navigator.userAgent.match(/OS (\\d+)_(\\d+)?/))&&parseInt(t[1],10)<11&&(e=!1),os.android.device&&(t=navigator.userAgent.match(/Android\\s([0-9.]*)/))&&parseInt(t[1],10)<7&&(e=!1)}return e?i:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:u0.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:a0.CLAMP,SCALE_MODE:s0.LINEAR,PRECISION_VERTEX:rp.HIGH,PRECISION_FRAGMENT:os.apple.device?rp.HIGH:rp.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!os.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},WA=v(9),_c=v.n(WA),XA=v(10),d0=v.n(XA),p0=v(5);(function(i){i[i.WEBGL_LEGACY=0]=\"WEBGL_LEGACY\",i[i.WEBGL=1]=\"WEBGL\",i[i.WEBGL2=2]=\"WEBGL2\"})(Ca||(Ca={})),function(i){i[i.UNKNOWN=0]=\"UNKNOWN\",i[i.WEBGL=1]=\"WEBGL\",i[i.CANVAS=2]=\"CANVAS\"}(op||(op={})),function(i){i[i.COLOR=16384]=\"COLOR\",i[i.DEPTH=256]=\"DEPTH\",i[i.STENCIL=1024]=\"STENCIL\"}(Em||(Em={})),function(i){i[i.NORMAL=0]=\"NORMAL\",i[i.ADD=1]=\"ADD\",i[i.MULTIPLY=2]=\"MULTIPLY\",i[i.SCREEN=3]=\"SCREEN\",i[i.OVERLAY=4]=\"OVERLAY\",i[i.DARKEN=5]=\"DARKEN\",i[i.LIGHTEN=6]=\"LIGHTEN\",i[i.COLOR_DODGE=7]=\"COLOR_DODGE\",i[i.COLOR_BURN=8]=\"COLOR_BURN\",i[i.HARD_LIGHT=9]=\"HARD_LIGHT\",i[i.SOFT_LIGHT=10]=\"SOFT_LIGHT\",i[i.DIFFERENCE=11]=\"DIFFERENCE\",i[i.EXCLUSION=12]=\"EXCLUSION\",i[i.HUE=13]=\"HUE\",i[i.SATURATION=14]=\"SATURATION\",i[i.COLOR=15]=\"COLOR\",i[i.LUMINOSITY=16]=\"LUMINOSITY\",i[i.NORMAL_NPM=17]=\"NORMAL_NPM\",i[i.ADD_NPM=18]=\"ADD_NPM\",i[i.SCREEN_NPM=19]=\"SCREEN_NPM\",i[i.NONE=20]=\"NONE\",i[i.SRC_OVER=0]=\"SRC_OVER\",i[i.SRC_IN=21]=\"SRC_IN\",i[i.SRC_OUT=22]=\"SRC_OUT\",i[i.SRC_ATOP=23]=\"SRC_ATOP\",i[i.DST_OVER=24]=\"DST_OVER\",i[i.DST_IN=25]=\"DST_IN\",i[i.DST_OUT=26]=\"DST_OUT\",i[i.DST_ATOP=27]=\"DST_ATOP\",i[i.ERASE=26]=\"ERASE\",i[i.SUBTRACT=28]=\"SUBTRACT\",i[i.XOR=29]=\"XOR\"}(Qt||(Qt={})),function(i){i[i.POINTS=0]=\"POINTS\",i[i.LINES=1]=\"LINES\",i[i.LINE_LOOP=2]=\"LINE_LOOP\",i[i.LINE_STRIP=3]=\"LINE_STRIP\",i[i.TRIANGLES=4]=\"TRIANGLES\",i[i.TRIANGLE_STRIP=5]=\"TRIANGLE_STRIP\",i[i.TRIANGLE_FAN=6]=\"TRIANGLE_FAN\"}(ss||(ss={})),function(i){i[i.RGBA=6408]=\"RGBA\",i[i.RGB=6407]=\"RGB\",i[i.RG=33319]=\"RG\",i[i.RED=6403]=\"RED\",i[i.RGBA_INTEGER=36249]=\"RGBA_INTEGER\",i[i.RGB_INTEGER=36248]=\"RGB_INTEGER\",i[i.RG_INTEGER=33320]=\"RG_INTEGER\",i[i.RED_INTEGER=36244]=\"RED_INTEGER\",i[i.ALPHA=6406]=\"ALPHA\",i[i.LUMINANCE=6409]=\"LUMINANCE\",i[i.LUMINANCE_ALPHA=6410]=\"LUMINANCE_ALPHA\",i[i.DEPTH_COMPONENT=6402]=\"DEPTH_COMPONENT\",i[i.DEPTH_STENCIL=34041]=\"DEPTH_STENCIL\"}(Dt||(Dt={})),function(i){i[i.TEXTURE_2D=3553]=\"TEXTURE_2D\",i[i.TEXTURE_CUBE_MAP=34067]=\"TEXTURE_CUBE_MAP\",i[i.TEXTURE_2D_ARRAY=35866]=\"TEXTURE_2D_ARRAY\",i[i.TEXTURE_CUBE_MAP_POSITIVE_X=34069]=\"TEXTURE_CUBE_MAP_POSITIVE_X\",i[i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]=\"TEXTURE_CUBE_MAP_NEGATIVE_X\",i[i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]=\"TEXTURE_CUBE_MAP_POSITIVE_Y\",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]=\"TEXTURE_CUBE_MAP_NEGATIVE_Y\",i[i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]=\"TEXTURE_CUBE_MAP_POSITIVE_Z\",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]=\"TEXTURE_CUBE_MAP_NEGATIVE_Z\"}(xu||(xu={})),function(i){i[i.UNSIGNED_BYTE=5121]=\"UNSIGNED_BYTE\",i[i.UNSIGNED_SHORT=5123]=\"UNSIGNED_SHORT\",i[i.UNSIGNED_SHORT_5_6_5=33635]=\"UNSIGNED_SHORT_5_6_5\",i[i.UNSIGNED_SHORT_4_4_4_4=32819]=\"UNSIGNED_SHORT_4_4_4_4\",i[i.UNSIGNED_SHORT_5_5_5_1=32820]=\"UNSIGNED_SHORT_5_5_5_1\",i[i.UNSIGNED_INT=5125]=\"UNSIGNED_INT\",i[i.UNSIGNED_INT_10F_11F_11F_REV=35899]=\"UNSIGNED_INT_10F_11F_11F_REV\",i[i.UNSIGNED_INT_2_10_10_10_REV=33640]=\"UNSIGNED_INT_2_10_10_10_REV\",i[i.UNSIGNED_INT_24_8=34042]=\"UNSIGNED_INT_24_8\",i[i.UNSIGNED_INT_5_9_9_9_REV=35902]=\"UNSIGNED_INT_5_9_9_9_REV\",i[i.BYTE=5120]=\"BYTE\",i[i.SHORT=5122]=\"SHORT\",i[i.INT=5124]=\"INT\",i[i.FLOAT=5126]=\"FLOAT\",i[i.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]=\"FLOAT_32_UNSIGNED_INT_24_8_REV\",i[i.HALF_FLOAT=36193]=\"HALF_FLOAT\"}(sn||(sn={})),function(i){i[i.FLOAT=0]=\"FLOAT\",i[i.INT=1]=\"INT\",i[i.UINT=2]=\"UINT\"}(Mm||(Mm={})),function(i){i[i.NEAREST=0]=\"NEAREST\",i[i.LINEAR=1]=\"LINEAR\"}(Pa||(Pa={})),function(i){i[i.CLAMP=33071]=\"CLAMP\",i[i.REPEAT=10497]=\"REPEAT\",i[i.MIRRORED_REPEAT=33648]=\"MIRRORED_REPEAT\"}(Ia||(Ia={})),function(i){i[i.OFF=0]=\"OFF\",i[i.POW2=1]=\"POW2\",i[i.ON=2]=\"ON\",i[i.ON_MANUAL=3]=\"ON_MANUAL\"}(sl||(sl={})),function(i){i[i.NPM=0]=\"NPM\",i[i.UNPACK=1]=\"UNPACK\",i[i.PMA=2]=\"PMA\",i[i.NO_PREMULTIPLIED_ALPHA=0]=\"NO_PREMULTIPLIED_ALPHA\",i[i.PREMULTIPLY_ON_UPLOAD=1]=\"PREMULTIPLY_ON_UPLOAD\",i[i.PREMULTIPLY_ALPHA=2]=\"PREMULTIPLY_ALPHA\",i[i.PREMULTIPLIED_ALPHA=2]=\"PREMULTIPLIED_ALPHA\"}(Os||(Os={})),function(i){i[i.NO=0]=\"NO\",i[i.YES=1]=\"YES\",i[i.AUTO=2]=\"AUTO\",i[i.BLEND=0]=\"BLEND\",i[i.CLEAR=1]=\"CLEAR\",i[i.BLIT=2]=\"BLIT\"}(al||(al={})),function(i){i[i.AUTO=0]=\"AUTO\",i[i.MANUAL=1]=\"MANUAL\"}(c0||(c0={})),function(i){i.LOW=\"lowp\",i.MEDIUM=\"mediump\",i.HIGH=\"highp\"}(Ls||(Ls={})),function(i){i[i.NONE=0]=\"NONE\",i[i.SCISSOR=1]=\"SCISSOR\",i[i.STENCIL=2]=\"STENCIL\",i[i.SPRITE=3]=\"SPRITE\"}(yr||(yr={})),function(i){i[i.NONE=0]=\"NONE\",i[i.LOW=2]=\"LOW\",i[i.MEDIUM=4]=\"MEDIUM\",i[i.HIGH=8]=\"HIGH\"}(zi||(zi={})),function(i){i[i.ELEMENT_ARRAY_BUFFER=34963]=\"ELEMENT_ARRAY_BUFFER\",i[i.ARRAY_BUFFER=34962]=\"ARRAY_BUFFER\",i[i.UNIFORM_BUFFER=35345]=\"UNIFORM_BUFFER\"}(Ns||(Ns={}));/*!\n * @pixi/utils - v6.2.0\n * Compiled Mon, 01 Nov 2021 16:52:10 UTC\n *\n * @pixi/utils is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */var bu={parse:p0.parse,format:p0.format,resolve:p0.resolve};Jt.RETINA_PREFIX=/@([0-9\\.]+)x/,Jt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var f0,m0=!1;function qA(){m0=!0}function Xx(i){var e;if(!m0){if(navigator.userAgent.toLowerCase().indexOf(\"chrome\")>-1){var t=[`\n %c %c %c PixiJS 6.2.0 - \\u2730 `+i+` \\u2730  %c  %c  http://www.pixijs.com/  %c %c \\u2665%c\\u2665%c\\u2665 \n\n`,\"background: #ff66a5; padding:5px 0;\",\"background: #ff66a5; padding:5px 0;\",\"color: #ff66a5; background: #030307; padding:5px 0;\",\"background: #ff66a5; padding:5px 0;\",\"background: #ffc3dc; padding:5px 0;\",\"background: #ff66a5; padding:5px 0;\",\"color: #ff2424; background: #fff; padding:5px 0;\",\"color: #ff2424; background: #fff; padding:5px 0;\",\"color: #ff2424; background: #fff; padding:5px 0;\"];(e=self.console).log.apply(e,t)}else self.console&&self.console.log(\"PixiJS 6.2.0 - \"+i+\" - http://www.pixijs.com/\");m0=!0}}function qx(){return f0===void 0&&(f0=function(){var i={stencil:!0,failIfMajorPerformanceCaveat:Jt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e=document.createElement(\"canvas\"),t=e.getContext(\"webgl\",i)||e.getContext(\"experimental-webgl\",i),n=!(!t||!t.getContextAttributes().stencil);if(t){var r=t.getExtension(\"WEBGL_lose_context\");r&&r.loseContext()}return t=null,n}catch{return!1}}()),f0}var YA={aliceblue:\"#f0f8ff\",antiquewhite:\"#faebd7\",aqua:\"#00ffff\",aquamarine:\"#7fffd4\",azure:\"#f0ffff\",beige:\"#f5f5dc\",bisque:\"#ffe4c4\",black:\"#000000\",blanchedalmond:\"#ffebcd\",blue:\"#0000ff\",blueviolet:\"#8a2be2\",brown:\"#a52a2a\",burlywood:\"#deb887\",cadetblue:\"#5f9ea0\",chartreuse:\"#7fff00\",chocolate:\"#d2691e\",coral:\"#ff7f50\",cornflowerblue:\"#6495ed\",cornsilk:\"#fff8dc\",crimson:\"#dc143c\",cyan:\"#00ffff\",darkblue:\"#00008b\",darkcyan:\"#008b8b\",darkgoldenrod:\"#b8860b\",darkgray:\"#a9a9a9\",darkgreen:\"#006400\",darkgrey:\"#a9a9a9\",darkkhaki:\"#bdb76b\",darkmagenta:\"#8b008b\",darkolivegreen:\"#556b2f\",darkorange:\"#ff8c00\",darkorchid:\"#9932cc\",darkred:\"#8b0000\",darksalmon:\"#e9967a\",darkseagreen:\"#8fbc8f\",darkslateblue:\"#483d8b\",darkslategray:\"#2f4f4f\",darkslategrey:\"#2f4f4f\",darkturquoise:\"#00ced1\",darkviolet:\"#9400d3\",deeppink:\"#ff1493\",deepskyblue:\"#00bfff\",dimgray:\"#696969\",dimgrey:\"#696969\",dodgerblue:\"#1e90ff\",firebrick:\"#b22222\",floralwhite:\"#fffaf0\",forestgreen:\"#228b22\",fuchsia:\"#ff00ff\",gainsboro:\"#dcdcdc\",ghostwhite:\"#f8f8ff\",goldenrod:\"#daa520\",gold:\"#ffd700\",gray:\"#808080\",green:\"#008000\",greenyellow:\"#adff2f\",grey:\"#808080\",honeydew:\"#f0fff0\",hotpink:\"#ff69b4\",indianred:\"#cd5c5c\",indigo:\"#4b0082\",ivory:\"#fffff0\",khaki:\"#f0e68c\",lavenderblush:\"#fff0f5\",lavender:\"#e6e6fa\",lawngreen:\"#7cfc00\",lemonchiffon:\"#fffacd\",lightblue:\"#add8e6\",lightcoral:\"#f08080\",lightcyan:\"#e0ffff\",lightgoldenrodyellow:\"#fafad2\",lightgray:\"#d3d3d3\",lightgreen:\"#90ee90\",lightgrey:\"#d3d3d3\",lightpink:\"#ffb6c1\",lightsalmon:\"#ffa07a\",lightseagreen:\"#20b2aa\",lightskyblue:\"#87cefa\",lightslategray:\"#778899\",lightslategrey:\"#778899\",lightsteelblue:\"#b0c4de\",lightyellow:\"#ffffe0\",lime:\"#00ff00\",limegreen:\"#32cd32\",linen:\"#faf0e6\",magenta:\"#ff00ff\",maroon:\"#800000\",mediumaquamarine:\"#66cdaa\",mediumblue:\"#0000cd\",mediumorchid:\"#ba55d3\",mediumpurple:\"#9370db\",mediumseagreen:\"#3cb371\",mediumslateblue:\"#7b68ee\",mediumspringgreen:\"#00fa9a\",mediumturquoise:\"#48d1cc\",mediumvioletred:\"#c71585\",midnightblue:\"#191970\",mintcream:\"#f5fffa\",mistyrose:\"#ffe4e1\",moccasin:\"#ffe4b5\",navajowhite:\"#ffdead\",navy:\"#000080\",oldlace:\"#fdf5e6\",olive:\"#808000\",olivedrab:\"#6b8e23\",orange:\"#ffa500\",orangered:\"#ff4500\",orchid:\"#da70d6\",palegoldenrod:\"#eee8aa\",palegreen:\"#98fb98\",paleturquoise:\"#afeeee\",palevioletred:\"#db7093\",papayawhip:\"#ffefd5\",peachpuff:\"#ffdab9\",peru:\"#cd853f\",pink:\"#ffc0cb\",plum:\"#dda0dd\",powderblue:\"#b0e0e6\",purple:\"#800080\",rebeccapurple:\"#663399\",red:\"#ff0000\",rosybrown:\"#bc8f8f\",royalblue:\"#4169e1\",saddlebrown:\"#8b4513\",salmon:\"#fa8072\",sandybrown:\"#f4a460\",seagreen:\"#2e8b57\",seashell:\"#fff5ee\",sienna:\"#a0522d\",silver:\"#c0c0c0\",skyblue:\"#87ceeb\",slateblue:\"#6a5acd\",slategray:\"#708090\",slategrey:\"#708090\",snow:\"#fffafa\",springgreen:\"#00ff7f\",steelblue:\"#4682b4\",tan:\"#d2b48c\",teal:\"#008080\",thistle:\"#d8bfd8\",tomato:\"#ff6347\",turquoise:\"#40e0d0\",violet:\"#ee82ee\",wheat:\"#f5deb3\",white:\"#ffffff\",whitesmoke:\"#f5f5f5\",yellow:\"#ffff00\",yellowgreen:\"#9acd32\"};function wu(i,e){return e===void 0&&(e=[]),e[0]=(i>>16&255)/255,e[1]=(i>>8&255)/255,e[2]=(255&i)/255,e}function g0(i){var e=i.toString(16);return\"#\"+(e=\"000000\".substr(0,6-e.length)+e)}function v0(i){return typeof i==\"string\"&&(i=YA[i.toLowerCase()]||i)[0]===\"#\"&&(i=i.substr(1)),parseInt(i,16)}function $A(i){return(255*i[0]<<16)+(255*i[1]<<8)+(255*i[2]|0)}var _0=function(){for(var i=[],e=[],t=0;t<32;t++)i[t]=t,e[t]=t;i[Qt.NORMAL_NPM]=Qt.NORMAL,i[Qt.ADD_NPM]=Qt.ADD,i[Qt.SCREEN_NPM]=Qt.SCREEN,e[Qt.NORMAL]=Qt.NORMAL_NPM,e[Qt.ADD]=Qt.ADD_NPM,e[Qt.SCREEN]=Qt.SCREEN_NPM;var n=[];return n.push(e),n.push(i),n}();function y0(i,e){return _0[e?1:0][i]}function Yx(i,e,t,n){return t=t||new Float32Array(4),n||n===void 0?(t[0]=i[0]*e,t[1]=i[1]*e,t[2]=i[2]*e):(t[0]=i[0],t[1]=i[1],t[2]=i[2]),t[3]=e,t}function Am(i,e){if(e===1)return(255*e<<24)+i;if(e===0)return 0;var t=i>>16&255,n=i>>8&255,r=255&i;return(255*e<<24)+((t=t*e+.5|0)<<16)+((n=n*e+.5|0)<<8)+(r=r*e+.5|0)}function x0(i,e,t,n){return(t=t||new Float32Array(4))[0]=(i>>16&255)/255,t[1]=(i>>8&255)/255,t[2]=(255&i)/255,(n||n===void 0)&&(t[0]*=e,t[1]*=e,t[2]*=e),t[3]=e,t}function $x(i,e){e===void 0&&(e=null);var t=6*i;if((e=e||new Uint16Array(t)).length!==t)throw new Error(\"Out buffer length is incorrect, got \"+e.length+\" and expected \"+t);for(var n=0,r=0;n<t;n+=6,r+=4)e[n+0]=r+0,e[n+1]=r+1,e[n+2]=r+2,e[n+3]=r+0,e[n+4]=r+2,e[n+5]=r+3;return e}function Rm(i){if(i.BYTES_PER_ELEMENT===4)return i instanceof Float32Array?\"Float32Array\":i instanceof Uint32Array?\"Uint32Array\":\"Int32Array\";if(i.BYTES_PER_ELEMENT===2){if(i instanceof Uint16Array)return\"Uint16Array\"}else if(i.BYTES_PER_ELEMENT===1&&i instanceof Uint8Array)return\"Uint8Array\";return null}var JA={Float32Array,Uint32Array,Int32Array,Uint8Array};function ZA(i,e){for(var t=0,n=0,r={},o=0;o<i.length;o++)n+=e[o],t+=i[o].length;var s=new ArrayBuffer(4*t),a=null,l=0;for(o=0;o<i.length;o++){var u=e[o],h=i[o],d=Rm(h);r[d]||(r[d]=new JA[d](s)),a=r[d];for(var p=0;p<h.length;p++)a[(p/u|0)*n+l+p%u]=h[p];l+=u}return new Float32Array(s)}function sp(i){return i+=i===0?1:0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,(i|=i>>>16)+1}function b0(i){return!(i&i-1||!i)}function w0(i){var e=(i>65535?1:0)<<4,t=((i>>>=e)>255?1:0)<<3;return e|=t,e|=t=((i>>>=t)>15?1:0)<<2,(e|=t=((i>>>=t)>3?1:0)<<1)|(i>>>=t)>>1}function Su(i,e,t){var n,r=i.length;if(!(e>=r||t===0)){var o=r-(t=e+t>r?r-e:t);for(n=e;n<o;++n)i[n]=i[n+t];i.length=o}}function Tu(i){return i===0?0:i<0?-1:1}var KA=0;function ll(){return++KA}var Jx={};function yc(i,e,t){if(t===void 0&&(t=3),!Jx[e]){var n=new Error().stack;n===void 0?console.warn(\"PixiJS Deprecation Warning: \",e+`\nDeprecated since v`+i):(n=n.split(`\n`).splice(t).join(`\n`),console.groupCollapsed?(console.groupCollapsed(\"%cPixiJS Deprecation Warning: %c%s\",\"color:#614108;background:#fffbe6\",\"font-weight:normal;color:#614108;background:#fffbe6\",e+`\nDeprecated since v`+i),console.warn(n),console.groupEnd()):(console.warn(\"PixiJS Deprecation Warning: \",e+`\nDeprecated since v`+i),console.warn(n))),Jx[e]=!0}}var S0={},Xr=Object.create(null),Mo=Object.create(null);function QA(){var i;for(i in Xr)Xr[i].destroy();for(i in Mo)Mo[i].destroy()}function e2(){var i;for(i in Xr)delete Xr[i];for(i in Mo)delete Mo[i]}var T0=function(){function i(e,t,n){this.canvas=document.createElement(\"canvas\"),this.context=this.canvas.getContext(\"2d\"),this.resolution=n||Jt.RESOLUTION,this.resize(e,t)}return i.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},i.prototype.resize=function(e,t){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(t*this.resolution)},i.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(i.prototype,\"width\",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=Math.round(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"height\",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=Math.round(e)},enumerable:!1,configurable:!0}),i}();function Zx(i){var e,t,n,r=i.width,o=i.height,s=i.getContext(\"2d\"),a=s.getImageData(0,0,r,o).data,l=a.length,u={top:null,left:null,right:null,bottom:null},h=null;for(e=0;e<l;e+=4)a[e+3]!==0&&(t=e/4%r,n=~~(e/4/r),u.top===null&&(u.top=n),(u.left===null||t<u.left)&&(u.left=t),(u.right===null||u.right<t)&&(u.right=t+1),(u.bottom===null||u.bottom<n)&&(u.bottom=n));return u.top!==null&&(r=u.right-u.left,o=u.bottom-u.top+1,h=s.getImageData(u.left,u.top,r,o)),{height:o,width:r,data:h}}var Cm,Kx=/^\\s*data:(?:([\\w-]+)\\/([\\w+.-]+))?(?:;charset=([\\w-]+))?(?:;(base64))?,(.*)/i;function t2(i){var e=Kx.exec(i);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function Qx(i,e){if(e===void 0&&(e=self.location),i.indexOf(\"data:\")===0)return\"\";e=e||self.location,Cm||(Cm=document.createElement(\"a\")),Cm.href=i;var t=bu.parse(Cm.href),n=!t.port&&e.port===\"\"||t.port===e.port;return t.hostname===e.hostname&&n&&t.protocol===e.protocol?\"\":\"anonymous\"}function ap(i,e){var t=Jt.RETINA_PREFIX.exec(i);return t?parseFloat(t[1]):e!==void 0?e:1}/*!\n * @pixi/math - v6.2.0\n * Compiled Mon, 01 Nov 2021 16:52:10 UTC\n *\n * @pixi/math is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */var Pi,Pm=2*Math.PI,n2=180/Math.PI,i2=Math.PI/180;(function(i){i[i.POLY=0]=\"POLY\",i[i.RECT=1]=\"RECT\",i[i.CIRC=2]=\"CIRC\",i[i.ELIP=3]=\"ELIP\",i[i.RREC=4]=\"RREC\"})(Pi||(Pi={}));var Tn=function(){function i(e,t,n,r){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),this.x=Number(e),this.y=Number(t),this.width=Number(n),this.height=Number(r),this.type=Pi.RECT}return Object.defineProperty(i.prototype,\"left\",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"right\",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"top\",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"bottom\",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(i,\"EMPTY\",{get:function(){return new i(0,0,0,0)},enumerable:!1,configurable:!0}),i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},i.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},i.prototype.contains=function(e,t){return!(this.width<=0||this.height<=0)&&e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height},i.prototype.pad=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this},i.prototype.fit=function(e){var t=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),o=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(n-t,0),this.y=r,this.height=Math.max(o-r,0),this},i.prototype.ceil=function(e,t){e===void 0&&(e=1),t===void 0&&(t=.001);var n=Math.ceil((this.x+this.width-t)*e)/e,r=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=n-this.x,this.height=r-this.y,this},i.prototype.enlarge=function(e){var t=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),o=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=n-t,this.y=r,this.height=o-r,this},i.prototype.toString=function(){return\"[@pixi/math:Rectangle x=\"+this.x+\" y=\"+this.y+\" width=\"+this.width+\" height=\"+this.height+\"]\"},i}(),r2=function(){function i(e,t,n){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),this.x=e,this.y=t,this.radius=n,this.type=Pi.CIRC}return i.prototype.clone=function(){return new i(this.x,this.y,this.radius)},i.prototype.contains=function(e,t){if(this.radius<=0)return!1;var n=this.radius*this.radius,r=this.x-e,o=this.y-t;return(r*=r)+(o*=o)<=n},i.prototype.getBounds=function(){return new Tn(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},i.prototype.toString=function(){return\"[@pixi/math:Circle x=\"+this.x+\" y=\"+this.y+\" radius=\"+this.radius+\"]\"},i}(),o2=function(){function i(e,t,n,r){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),this.x=e,this.y=t,this.width=n,this.height=r,this.type=Pi.ELIP}return i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var n=(e-this.x)/this.width,r=(t-this.y)/this.height;return(n*=n)+(r*=r)<=1},i.prototype.getBounds=function(){return new Tn(this.x-this.width,this.y-this.height,this.width,this.height)},i.prototype.toString=function(){return\"[@pixi/math:Ellipse x=\"+this.x+\" y=\"+this.y+\" width=\"+this.width+\" height=\"+this.height+\"]\"},i}(),Im=function(){function i(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];var r=Array.isArray(t[0])?t[0]:t;if(typeof r[0]!=\"number\"){for(var o=[],s=0,a=r.length;s<a;s++)o.push(r[s].x,r[s].y);r=o}this.points=r,this.type=Pi.POLY,this.closeStroke=!0}return i.prototype.clone=function(){var e=new i(this.points.slice());return e.closeStroke=this.closeStroke,e},i.prototype.contains=function(e,t){for(var n=!1,r=this.points.length/2,o=0,s=r-1;o<r;s=o++){var a=this.points[2*o],l=this.points[2*o+1],u=this.points[2*s],h=this.points[2*s+1];l>t!=h>t&&e<(t-l)/(h-l)*(u-a)+a&&(n=!n)}return n},i.prototype.toString=function(){return\"[@pixi/math:PolygoncloseStroke=\"+this.closeStroke+\"points=\"+this.points.reduce(function(e,t){return e+\", \"+t},\"\")+\"]\"},i}(),E0=function(){function i(e,t,n,r,o){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),o===void 0&&(o=20),this.x=e,this.y=t,this.width=n,this.height=r,this.radius=o,this.type=Pi.RREC}return i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.radius)},i.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){if(t>=this.y+this.radius&&t<=this.y+this.height-this.radius||e>=this.x+this.radius&&e<=this.x+this.width-this.radius)return!0;var n=e-(this.x+this.radius),r=t-(this.y+this.radius),o=this.radius*this.radius;if(n*n+r*r<=o||(n=e-(this.x+this.width-this.radius))*n+r*r<=o||n*n+(r=t-(this.y+this.height-this.radius))*r<=o||(n=e-(this.x+this.radius))*n+r*r<=o)return!0}return!1},i.prototype.toString=function(){return\"[@pixi/math:RoundedRectangle x=\"+this.x+\" y=\"+this.y+\"width=\"+this.width+\" height=\"+this.height+\" radius=\"+this.radius+\"]\"},i}(),Ii=function(){function i(e,t){e===void 0&&(e=0),t===void 0&&(t=0),this.x=0,this.y=0,this.x=e,this.y=t}return i.prototype.clone=function(){return new i(this.x,this.y)},i.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},i.prototype.copyTo=function(e){return e.set(this.x,this.y),e},i.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},i.prototype.set=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.x=e,this.y=t,this},i.prototype.toString=function(){return\"[@pixi/math:Point x=\"+this.x+\" y=\"+this.y+\"]\"},i}(),xc=function(){function i(e,t,n,r){n===void 0&&(n=0),r===void 0&&(r=0),this._x=n,this._y=r,this.cb=e,this.scope=t}return i.prototype.clone=function(e,t){return e===void 0&&(e=this.cb),t===void 0&&(t=this.scope),new i(e,t,this._x,this._y)},i.prototype.set=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this._x===e&&this._y===t||(this._x=e,this._y=t,this.cb.call(this.scope)),this},i.prototype.copyFrom=function(e){return this._x===e.x&&this._y===e.y||(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},i.prototype.copyTo=function(e){return e.set(this._x,this._y),e},i.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},i.prototype.toString=function(){return\"[@pixi/math:ObservablePoint x=0 y=0 scope=\"+this.scope+\"]\"},Object.defineProperty(i.prototype,\"x\",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"y\",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),i}(),Oi=function(){function i(e,t,n,r,o,s){e===void 0&&(e=1),t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=1),o===void 0&&(o=0),s===void 0&&(s=0),this.array=null,this.a=e,this.b=t,this.c=n,this.d=r,this.tx=o,this.ty=s}return i.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},i.prototype.set=function(e,t,n,r,o,s){return this.a=e,this.b=t,this.c=n,this.d=r,this.tx=o,this.ty=s,this},i.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var n=t||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},i.prototype.apply=function(e,t){t=t||new Ii;var n=e.x,r=e.y;return t.x=this.a*n+this.c*r+this.tx,t.y=this.b*n+this.d*r+this.ty,t},i.prototype.applyInverse=function(e,t){t=t||new Ii;var n=1/(this.a*this.d+this.c*-this.b),r=e.x,o=e.y;return t.x=this.d*n*r+-this.c*n*o+(this.ty*this.c-this.tx*this.d)*n,t.y=this.a*n*o+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,t},i.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},i.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},i.prototype.rotate=function(e){var t=Math.cos(e),n=Math.sin(e),r=this.a,o=this.c,s=this.tx;return this.a=r*t-this.b*n,this.b=r*n+this.b*t,this.c=o*t-this.d*n,this.d=o*n+this.d*t,this.tx=s*t-this.ty*n,this.ty=s*n+this.ty*t,this},i.prototype.append=function(e){var t=this.a,n=this.b,r=this.c,o=this.d;return this.a=e.a*t+e.b*r,this.b=e.a*n+e.b*o,this.c=e.c*t+e.d*r,this.d=e.c*n+e.d*o,this.tx=e.tx*t+e.ty*r+this.tx,this.ty=e.tx*n+e.ty*o+this.ty,this},i.prototype.setTransform=function(e,t,n,r,o,s,a,l,u){return this.a=Math.cos(a+u)*o,this.b=Math.sin(a+u)*o,this.c=-Math.sin(a-l)*s,this.d=Math.cos(a-l)*s,this.tx=e-(n*this.a+r*this.c),this.ty=t-(n*this.b+r*this.d),this},i.prototype.prepend=function(e){var t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){var n=this.a,r=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},i.prototype.decompose=function(e){var t=this.a,n=this.b,r=this.c,o=this.d,s=e.pivot,a=-Math.atan2(-r,o),l=Math.atan2(n,t),u=Math.abs(a+l);return u<1e-5||Math.abs(Pm-u)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(t*t+n*n),e.scale.y=Math.sqrt(r*r+o*o),e.position.x=this.tx+(s.x*t+s.y*r),e.position.y=this.ty+(s.x*n+s.y*o),e},i.prototype.invert=function(){var e=this.a,t=this.b,n=this.c,r=this.d,o=this.tx,s=e*r-t*n;return this.a=r/s,this.b=-t/s,this.c=-n/s,this.d=e/s,this.tx=(n*this.ty-r*o)/s,this.ty=-(e*this.ty-t*o)/s,this},i.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},i.prototype.clone=function(){var e=new i;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},i.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},i.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},i.prototype.toString=function(){return\"[@pixi/math:Matrix a=\"+this.a+\" b=\"+this.b+\" c=\"+this.c+\" d=\"+this.d+\" tx=\"+this.tx+\" ty=\"+this.ty+\"]\"},Object.defineProperty(i,\"IDENTITY\",{get:function(){return new i},enumerable:!1,configurable:!0}),Object.defineProperty(i,\"TEMP_MATRIX\",{get:function(){return new i},enumerable:!1,configurable:!0}),i}(),Eu=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Mu=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Au=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ru=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],M0=[],eb=[],Om=Math.sign;(function(){for(var i=0;i<16;i++){var e=[];M0.push(e);for(var t=0;t<16;t++)for(var n=Om(Eu[i]*Eu[t]+Au[i]*Mu[t]),r=Om(Mu[i]*Eu[t]+Ru[i]*Mu[t]),o=Om(Eu[i]*Au[t]+Au[i]*Ru[t]),s=Om(Mu[i]*Au[t]+Ru[i]*Ru[t]),a=0;a<16;a++)if(Eu[a]===n&&Mu[a]===r&&Au[a]===o&&Ru[a]===s){e.push(a);break}}for(i=0;i<16;i++){var l=new Oi;l.set(Eu[i],Mu[i],Au[i],Ru[i],0,0),eb.push(l)}})();var bi={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(i){return Eu[i]},uY:function(i){return Mu[i]},vX:function(i){return Au[i]},vY:function(i){return Ru[i]},inv:function(i){return 8&i?15&i:7&-i},add:function(i,e){return M0[i][e]},sub:function(i,e){return M0[i][bi.inv(e)]},rotate180:function(i){return 4^i},isVertical:function(i){return(3&i)==2},byDirection:function(i,e){return 2*Math.abs(i)<=Math.abs(e)?e>=0?bi.S:bi.N:2*Math.abs(e)<=Math.abs(i)?i>0?bi.E:bi.W:e>0?i>0?bi.SE:bi.SW:i>0?bi.NE:bi.NW},matrixAppendRotationInv:function(i,e,t,n){t===void 0&&(t=0),n===void 0&&(n=0);var r=eb[bi.inv(e)];r.tx=t,r.ty=n,i.append(r)}},tb=function(){function i(){this.worldTransform=new Oi,this.localTransform=new Oi,this.position=new xc(this.onChange,this,0,0),this.scale=new xc(this.onChange,this,1,1),this.pivot=new xc(this.onChange,this,0,0),this.skew=new xc(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return i.prototype.onChange=function(){this._localID++},i.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},i.prototype.toString=function(){return\"[@pixi/math:Transform position=(\"+this.position.x+\", \"+this.position.y+\") rotation=\"+this.rotation+\" scale=(\"+this.scale.x+\", \"+this.scale.y+\") skew=(\"+this.skew.x+\", \"+this.skew.y+\") ]\"},i.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},i.prototype.updateTransform=function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var n=e.worldTransform,r=this.worldTransform;r.a=t.a*n.a+t.b*n.c,r.b=t.a*n.b+t.b*n.d,r.c=t.c*n.a+t.d*n.c,r.d=t.c*n.b+t.d*n.d,r.tx=t.tx*n.a+t.ty*n.c+n.tx,r.ty=t.tx*n.b+t.ty*n.d+n.ty,this._parentID=e._worldID,this._worldID++}},i.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},Object.defineProperty(i.prototype,\"rotation\",{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())},enumerable:!1,configurable:!0}),i.IDENTITY=new i,i}();/*!\n * @pixi/display - v6.2.0\n * Compiled Mon, 01 Nov 2021 16:52:10 UTC\n *\n * @pixi/display is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */Jt.SORTABLE_CHILDREN=!1;var Lm=function(){function i(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return i.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},i.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},i.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?Tn.EMPTY:((e=e||new Tn(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},i.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},i.prototype.addPointMatrix=function(e,t){var n=e.a,r=e.b,o=e.c,s=e.d,a=e.tx,l=e.ty,u=n*t.x+o*t.y+a,h=r*t.x+s*t.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,h),this.maxY=Math.max(this.maxY,h)},i.prototype.addQuad=function(e){var t=this.minX,n=this.minY,r=this.maxX,o=this.maxY,s=e[0],a=e[1];t=s<t?s:t,n=a<n?a:n,r=s>r?s:r,o=a>o?a:o,t=(s=e[2])<t?s:t,n=(a=e[3])<n?a:n,r=s>r?s:r,o=a>o?a:o,t=(s=e[4])<t?s:t,n=(a=e[5])<n?a:n,r=s>r?s:r,o=a>o?a:o,t=(s=e[6])<t?s:t,n=(a=e[7])<n?a:n,r=s>r?s:r,o=a>o?a:o,this.minX=t,this.minY=n,this.maxX=r,this.maxY=o},i.prototype.addFrame=function(e,t,n,r,o){this.addFrameMatrix(e.worldTransform,t,n,r,o)},i.prototype.addFrameMatrix=function(e,t,n,r,o){var s=e.a,a=e.b,l=e.c,u=e.d,h=e.tx,d=e.ty,p=this.minX,m=this.minY,g=this.maxX,_=this.maxY,y=s*t+l*n+h,w=a*t+u*n+d;p=y<p?y:p,m=w<m?w:m,g=y>g?y:g,_=w>_?w:_,p=(y=s*r+l*n+h)<p?y:p,m=(w=a*r+u*n+d)<m?w:m,g=y>g?y:g,_=w>_?w:_,p=(y=s*t+l*o+h)<p?y:p,m=(w=a*t+u*o+d)<m?w:m,g=y>g?y:g,_=w>_?w:_,p=(y=s*r+l*o+h)<p?y:p,m=(w=a*r+u*o+d)<m?w:m,g=y>g?y:g,_=w>_?w:_,this.minX=p,this.minY=m,this.maxX=g,this.maxY=_},i.prototype.addVertexData=function(e,t,n){for(var r=this.minX,o=this.minY,s=this.maxX,a=this.maxY,l=t;l<n;l+=2){var u=e[l],h=e[l+1];r=u<r?u:r,o=h<o?h:o,s=u>s?u:s,a=h>a?h:a}this.minX=r,this.minY=o,this.maxX=s,this.maxY=a},i.prototype.addVertices=function(e,t,n,r){this.addVerticesMatrix(e.worldTransform,t,n,r)},i.prototype.addVerticesMatrix=function(e,t,n,r,o,s){o===void 0&&(o=0),s===void 0&&(s=o);for(var a=e.a,l=e.b,u=e.c,h=e.d,d=e.tx,p=e.ty,m=this.minX,g=this.minY,_=this.maxX,y=this.maxY,w=n;w<r;w+=2){var R=t[w],F=t[w+1],U=a*R+u*F+d,B=h*F+l*R+p;m=Math.min(m,U-o),_=Math.max(_,U+o),g=Math.min(g,B-s),y=Math.max(y,B+s)}this.minX=m,this.minY=g,this.maxX=_,this.maxY=y},i.prototype.addBounds=function(e){var t=this.minX,n=this.minY,r=this.maxX,o=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>r?e.maxX:r,this.maxY=e.maxY>o?e.maxY:o},i.prototype.addBoundsMask=function(e,t){var n=e.minX>t.minX?e.minX:t.minX,r=e.minY>t.minY?e.minY:t.minY,o=e.maxX<t.maxX?e.maxX:t.maxX,s=e.maxY<t.maxY?e.maxY:t.maxY;if(n<=o&&r<=s){var a=this.minX,l=this.minY,u=this.maxX,h=this.maxY;this.minX=n<a?n:a,this.minY=r<l?r:l,this.maxX=o>u?o:u,this.maxY=s>h?s:h}},i.prototype.addBoundsMatrix=function(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)},i.prototype.addBoundsArea=function(e,t){var n=e.minX>t.x?e.minX:t.x,r=e.minY>t.y?e.minY:t.y,o=e.maxX<t.x+t.width?e.maxX:t.x+t.width,s=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(n<=o&&r<=s){var a=this.minX,l=this.minY,u=this.maxX,h=this.maxY;this.minX=n<a?n:a,this.minY=r<l?r:l,this.maxX=o>u?o:u,this.maxY=s>h?s:h}},i.prototype.pad=function(e,t){e===void 0&&(e=0),t===void 0&&(t=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)},i.prototype.addFramePad=function(e,t,n,r,o,s){e-=o,t-=s,n+=o,r+=s,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>r?this.maxY:r},i}(),nb=function(i,e){return(nb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(i,e)};/*! *****************************************************************************\nCopyright (c) Microsoft Corporation. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */function A0(i,e){function t(){this.constructor=i}nb(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ib,rb,ob,sb,ab,lb,ub,hb,cb,db,pb,fb,mb,gb,vb,_b,R0,yb,xb,Li=function(i){function e(){var t=i.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new tb,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new Lm,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._maskRefCount=0,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}return A0(e,i),e.mixin=function(t){for(var n=Object.keys(t),r=0;r<n.length;++r){var o=n[r];Object.defineProperty(e.prototype,o,Object.getOwnPropertyDescriptor(t,o))}},Object.defineProperty(e.prototype,\"destroyed\",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,n){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),n||(this._boundsRect||(this._boundsRect=new Tn),n=this._boundsRect),this._bounds.getRectangle(n)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new Tn),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Lm);var n=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var o=this._bounds,s=this._boundsID;this._bounds=this._localBounds;var a=this.getBounds(!1,t);return this.parent=r,this.transform=n,this._bounds=o,this._bounds.updateID+=this._boundsID-s,a},e.prototype.toGlobal=function(t,n,r){return r===void 0&&(r=!1),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,n)},e.prototype.toLocal=function(t,n,r,o){return n&&(t=n.toGlobal(t,r,o)),o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error(\"setParent: Argument must be a Container\");return t.addChild(this),t},e.prototype.setTransform=function(t,n,r,o,s,a,l,u,h){return t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=1),o===void 0&&(o=1),s===void 0&&(s=0),a===void 0&&(a=0),l===void 0&&(l=0),u===void 0&&(u=0),h===void 0&&(h=0),this.position.x=t,this.position.y=n,this.scale.x=r||1,this.scale.y=o||1,this.rotation=s,this.skew.x=a,this.skew.y=l,this.pivot.x=u,this.pivot.y=h,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.emit(\"destroyed\"),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(e.prototype,\"_tempDisplayObjectParent\",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new bb),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,\"x\",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"y\",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"worldTransform\",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"localTransform\",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"position\",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"scale\",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"pivot\",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"skew\",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"rotation\",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"angle\",{get:function(){return this.transform.rotation*n2},set:function(t){this.transform.rotation=t*i2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"zIndex\",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"worldVisible\",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"mask\",{get:function(){return this._mask},set:function(t){if(this._mask!==t){var n;this._mask&&((n=this._mask.maskObject||this._mask)._maskRefCount--,n._maskRefCount===0&&(n.renderable=!0,n.isMask=!1)),this._mask=t,this._mask&&((n=this._mask.maskObject||this._mask)._maskRefCount===0&&(n.renderable=!1,n.isMask=!0),n._maskRefCount++)}},enumerable:!1,configurable:!0}),e}(_c.a),bb=function(i){function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.sortDirty=null,t}return A0(e,i),e}(Li);function s2(i,e){return i.zIndex===e.zIndex?i._lastSortedIndex-e._lastSortedIndex:i.zIndex-e.zIndex}Li.prototype.displayObjectUpdateTransform=Li.prototype.updateTransform,function(i){i[i.WEBGL_LEGACY=0]=\"WEBGL_LEGACY\",i[i.WEBGL=1]=\"WEBGL\",i[i.WEBGL2=2]=\"WEBGL2\"}(ib||(ib={})),function(i){i[i.UNKNOWN=0]=\"UNKNOWN\",i[i.WEBGL=1]=\"WEBGL\",i[i.CANVAS=2]=\"CANVAS\"}(rb||(rb={})),function(i){i[i.COLOR=16384]=\"COLOR\",i[i.DEPTH=256]=\"DEPTH\",i[i.STENCIL=1024]=\"STENCIL\"}(ob||(ob={})),function(i){i[i.NORMAL=0]=\"NORMAL\",i[i.ADD=1]=\"ADD\",i[i.MULTIPLY=2]=\"MULTIPLY\",i[i.SCREEN=3]=\"SCREEN\",i[i.OVERLAY=4]=\"OVERLAY\",i[i.DARKEN=5]=\"DARKEN\",i[i.LIGHTEN=6]=\"LIGHTEN\",i[i.COLOR_DODGE=7]=\"COLOR_DODGE\",i[i.COLOR_BURN=8]=\"COLOR_BURN\",i[i.HARD_LIGHT=9]=\"HARD_LIGHT\",i[i.SOFT_LIGHT=10]=\"SOFT_LIGHT\",i[i.DIFFERENCE=11]=\"DIFFERENCE\",i[i.EXCLUSION=12]=\"EXCLUSION\",i[i.HUE=13]=\"HUE\",i[i.SATURATION=14]=\"SATURATION\",i[i.COLOR=15]=\"COLOR\",i[i.LUMINOSITY=16]=\"LUMINOSITY\",i[i.NORMAL_NPM=17]=\"NORMAL_NPM\",i[i.ADD_NPM=18]=\"ADD_NPM\",i[i.SCREEN_NPM=19]=\"SCREEN_NPM\",i[i.NONE=20]=\"NONE\",i[i.SRC_OVER=0]=\"SRC_OVER\",i[i.SRC_IN=21]=\"SRC_IN\",i[i.SRC_OUT=22]=\"SRC_OUT\",i[i.SRC_ATOP=23]=\"SRC_ATOP\",i[i.DST_OVER=24]=\"DST_OVER\",i[i.DST_IN=25]=\"DST_IN\",i[i.DST_OUT=26]=\"DST_OUT\",i[i.DST_ATOP=27]=\"DST_ATOP\",i[i.ERASE=26]=\"ERASE\",i[i.SUBTRACT=28]=\"SUBTRACT\",i[i.XOR=29]=\"XOR\"}(sb||(sb={})),function(i){i[i.POINTS=0]=\"POINTS\",i[i.LINES=1]=\"LINES\",i[i.LINE_LOOP=2]=\"LINE_LOOP\",i[i.LINE_STRIP=3]=\"LINE_STRIP\",i[i.TRIANGLES=4]=\"TRIANGLES\",i[i.TRIANGLE_STRIP=5]=\"TRIANGLE_STRIP\",i[i.TRIANGLE_FAN=6]=\"TRIANGLE_FAN\"}(ab||(ab={})),function(i){i[i.RGBA=6408]=\"RGBA\",i[i.RGB=6407]=\"RGB\",i[i.RG=33319]=\"RG\",i[i.RED=6403]=\"RED\",i[i.RGBA_INTEGER=36249]=\"RGBA_INTEGER\",i[i.RGB_INTEGER=36248]=\"RGB_INTEGER\",i[i.RG_INTEGER=33320]=\"RG_INTEGER\",i[i.RED_INTEGER=36244]=\"RED_INTEGER\",i[i.ALPHA=6406]=\"ALPHA\",i[i.LUMINANCE=6409]=\"LUMINANCE\",i[i.LUMINANCE_ALPHA=6410]=\"LUMINANCE_ALPHA\",i[i.DEPTH_COMPONENT=6402]=\"DEPTH_COMPONENT\",i[i.DEPTH_STENCIL=34041]=\"DEPTH_STENCIL\"}(lb||(lb={})),function(i){i[i.TEXTURE_2D=3553]=\"TEXTURE_2D\",i[i.TEXTURE_CUBE_MAP=34067]=\"TEXTURE_CUBE_MAP\",i[i.TEXTURE_2D_ARRAY=35866]=\"TEXTURE_2D_ARRAY\",i[i.TEXTURE_CUBE_MAP_POSITIVE_X=34069]=\"TEXTURE_CUBE_MAP_POSITIVE_X\",i[i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]=\"TEXTURE_CUBE_MAP_NEGATIVE_X\",i[i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]=\"TEXTURE_CUBE_MAP_POSITIVE_Y\",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]=\"TEXTURE_CUBE_MAP_NEGATIVE_Y\",i[i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]=\"TEXTURE_CUBE_MAP_POSITIVE_Z\",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]=\"TEXTURE_CUBE_MAP_NEGATIVE_Z\"}(ub||(ub={})),function(i){i[i.UNSIGNED_BYTE=5121]=\"UNSIGNED_BYTE\",i[i.UNSIGNED_SHORT=5123]=\"UNSIGNED_SHORT\",i[i.UNSIGNED_SHORT_5_6_5=33635]=\"UNSIGNED_SHORT_5_6_5\",i[i.UNSIGNED_SHORT_4_4_4_4=32819]=\"UNSIGNED_SHORT_4_4_4_4\",i[i.UNSIGNED_SHORT_5_5_5_1=32820]=\"UNSIGNED_SHORT_5_5_5_1\",i[i.UNSIGNED_INT=5125]=\"UNSIGNED_INT\",i[i.UNSIGNED_INT_10F_11F_11F_REV=35899]=\"UNSIGNED_INT_10F_11F_11F_REV\",i[i.UNSIGNED_INT_2_10_10_10_REV=33640]=\"UNSIGNED_INT_2_10_10_10_REV\",i[i.UNSIGNED_INT_24_8=34042]=\"UNSIGNED_INT_24_8\",i[i.UNSIGNED_INT_5_9_9_9_REV=35902]=\"UNSIGNED_INT_5_9_9_9_REV\",i[i.BYTE=5120]=\"BYTE\",i[i.SHORT=5122]=\"SHORT\",i[i.INT=5124]=\"INT\",i[i.FLOAT=5126]=\"FLOAT\",i[i.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]=\"FLOAT_32_UNSIGNED_INT_24_8_REV\",i[i.HALF_FLOAT=36193]=\"HALF_FLOAT\"}(hb||(hb={})),function(i){i[i.FLOAT=0]=\"FLOAT\",i[i.INT=1]=\"INT\",i[i.UINT=2]=\"UINT\"}(cb||(cb={})),function(i){i[i.NEAREST=0]=\"NEAREST\",i[i.LINEAR=1]=\"LINEAR\"}(db||(db={})),function(i){i[i.CLAMP=33071]=\"CLAMP\",i[i.REPEAT=10497]=\"REPEAT\",i[i.MIRRORED_REPEAT=33648]=\"MIRRORED_REPEAT\"}(pb||(pb={})),function(i){i[i.OFF=0]=\"OFF\",i[i.POW2=1]=\"POW2\",i[i.ON=2]=\"ON\",i[i.ON_MANUAL=3]=\"ON_MANUAL\"}(fb||(fb={})),function(i){i[i.NPM=0]=\"NPM\",i[i.UNPACK=1]=\"UNPACK\",i[i.PMA=2]=\"PMA\",i[i.NO_PREMULTIPLIED_ALPHA=0]=\"NO_PREMULTIPLIED_ALPHA\",i[i.PREMULTIPLY_ON_UPLOAD=1]=\"PREMULTIPLY_ON_UPLOAD\",i[i.PREMULTIPLY_ALPHA=2]=\"PREMULTIPLY_ALPHA\",i[i.PREMULTIPLIED_ALPHA=2]=\"PREMULTIPLIED_ALPHA\"}(mb||(mb={})),function(i){i[i.NO=0]=\"NO\",i[i.YES=1]=\"YES\",i[i.AUTO=2]=\"AUTO\",i[i.BLEND=0]=\"BLEND\",i[i.CLEAR=1]=\"CLEAR\",i[i.BLIT=2]=\"BLIT\"}(gb||(gb={})),function(i){i[i.AUTO=0]=\"AUTO\",i[i.MANUAL=1]=\"MANUAL\"}(vb||(vb={})),function(i){i.LOW=\"lowp\",i.MEDIUM=\"mediump\",i.HIGH=\"highp\"}(_b||(_b={})),function(i){i[i.NONE=0]=\"NONE\",i[i.SCISSOR=1]=\"SCISSOR\",i[i.STENCIL=2]=\"STENCIL\",i[i.SPRITE=3]=\"SPRITE\"}(R0||(R0={})),function(i){i[i.NONE=0]=\"NONE\",i[i.LOW=2]=\"LOW\",i[i.MEDIUM=4]=\"MEDIUM\",i[i.HIGH=8]=\"HIGH\"}(yb||(yb={})),function(i){i[i.ELEMENT_ARRAY_BUFFER=34963]=\"ELEMENT_ARRAY_BUFFER\",i[i.ARRAY_BUFFER=34962]=\"ARRAY_BUFFER\",i[i.UNIFORM_BUFFER=35345]=\"UNIFORM_BUFFER\"}(xb||(xb={}));var Ki=function(i){function e(){var t=i.call(this)||this;return t.children=[],t.sortableChildren=Jt.SORTABLE_CHILDREN,t.sortDirty=!1,t}return A0(e,i),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,n=[],r=0;r<arguments.length;r++)n[r]=t[r];if(n.length>1)for(var o=0;o<n.length;o++)this.addChild(n[o]);else{var s=n[0];s.parent&&s.parent.removeChild(s),s.parent=this,this.sortDirty=!0,s.transform._parentID=-1,this.children.push(s),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit(\"childAdded\",s,this,this.children.length-1),s.emit(\"added\",this)}return n[0]},e.prototype.addChildAt=function(t,n){if(n<0||n>this.children.length)throw new Error(t+\"addChildAt: The index \"+n+\" supplied is out of bounds \"+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(n,0,t),this._boundsID++,this.onChildrenChange(n),t.emit(\"added\",this),this.emit(\"childAdded\",t,this,n),t},e.prototype.swapChildren=function(t,n){if(t!==n){var r=this.getChildIndex(t),o=this.getChildIndex(n);this.children[r]=n,this.children[o]=t,this.onChildrenChange(r<o?r:o)}},e.prototype.getChildIndex=function(t){var n=this.children.indexOf(t);if(n===-1)throw new Error(\"The supplied DisplayObject must be a child of the caller\");return n},e.prototype.setChildIndex=function(t,n){if(n<0||n>=this.children.length)throw new Error(\"The index \"+n+\" supplied is out of bounds \"+this.children.length);var r=this.getChildIndex(t);Su(this.children,r,1),this.children.splice(n,0,t),this.onChildrenChange(n)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error(\"getChildAt: Index (\"+t+\") does not exist.\");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,n=[],r=0;r<arguments.length;r++)n[r]=t[r];if(n.length>1)for(var o=0;o<n.length;o++)this.removeChild(n[o]);else{var s=n[0],a=this.children.indexOf(s);if(a===-1)return null;s.parent=null,s.transform._parentID=-1,Su(this.children,a,1),this._boundsID++,this.onChildrenChange(a),s.emit(\"removed\",this),this.emit(\"childRemoved\",s,this,a)}return n[0]},e.prototype.removeChildAt=function(t){var n=this.getChildAt(t);return n.parent=null,n.transform._parentID=-1,Su(this.children,t,1),this._boundsID++,this.onChildrenChange(t),n.emit(\"removed\",this),this.emit(\"childRemoved\",n,this,t),n},e.prototype.removeChildren=function(t,n){t===void 0&&(t=0),n===void 0&&(n=this.children.length);var r,o=t,s=n-o;if(s>0&&s<=n){r=this.children.splice(o,s);for(var a=0;a<r.length;++a)r[a].parent=null,r[a].transform&&(r[a].transform._parentID=-1);for(this._boundsID++,this.onChildrenChange(t),a=0;a<r.length;++a)r[a].emit(\"removed\",this),this.emit(\"childRemoved\",r[a],this,a);return r}if(s===0&&this.children.length===0)return[];throw new RangeError(\"removeChildren: numeric values are outside the acceptable range.\")},e.prototype.sortChildren=function(){for(var t=!1,n=0,r=this.children.length;n<r;++n){var o=this.children[n];o._lastSortedIndex=n,t||o.zIndex===0||(t=!0)}t&&this.children.length>1&&this.children.sort(s2),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,n=this.children.length;t<n;++t){var r=this.children[t];r.visible&&r.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var n=this.children[t];if(n.visible&&n.renderable)if(n.calculateBounds(),n._mask){var r=n._mask.maskObject||n._mask;r.calculateBounds(),this._bounds.addBoundsMask(n._bounds,r._bounds)}else n.filterArea?this._bounds.addBoundsArea(n._bounds,n.filterArea):this._bounds.addBounds(n._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(t,n){n===void 0&&(n=!1);var r=i.prototype.getLocalBounds.call(this,t);if(!n)for(var o=0,s=this.children.length;o<s;++o){var a=this.children[o];a.visible&&a.updateTransform()}return r},e.prototype._calculateBounds=function(){},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var n=0,r=this.children.length;n<r;++n)this.children[n].render(t)}},e.prototype.renderAdvanced=function(t){var n=this.filters,r=this._mask;if(n){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var o=0;o<n.length;o++)n[o].enabled&&this._enabledFilters.push(n[o])}var s=n&&this._enabledFilters&&this._enabledFilters.length||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==R0.NONE));s&&t.batch.flush(),n&&this._enabledFilters&&this._enabledFilters.length&&t.filter.push(this,this._enabledFilters),r&&t.mask.push(this,this._mask),this._render(t),o=0;for(var a=this.children.length;o<a;o++)this.children[o].render(t);s&&t.batch.flush(),r&&t.mask.pop(this),n&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(t){i.prototype.destroy.call(this),this.sortDirty=!1;var n=typeof t==\"boolean\"?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(n)for(var o=0;o<r.length;++o)r[o].destroy(t)},Object.defineProperty(e.prototype,\"width\",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var n=this.getLocalBounds().width;this.scale.x=n!==0?t/n:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"height\",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var n=this.getLocalBounds().height;this.scale.y=n!==0?t/n:1,this._height=t},enumerable:!1,configurable:!0}),e}(Li);Ki.prototype.containerUpdateTransform=Ki.prototype.updateTransform,Li.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:\"button\",accessiblePointerEvents:\"auto\",accessibleChildren:!0,renderId:-1});var as,a2=function(){function i(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(os.tablet||os.phone)&&this.createTouchHook();var t=document.createElement(\"div\");t.style.width=\"100px\",t.style.height=\"100px\",t.style.position=\"absolute\",t.style.top=\"0px\",t.style.left=\"0px\",t.style.zIndex=2 .toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),self.addEventListener(\"keydown\",this._onKeyDown,!1)}return Object.defineProperty(i.prototype,\"isActive\",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"isMobileAccessibility\",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),i.prototype.createTouchHook=function(){var e=this,t=document.createElement(\"button\");t.style.width=\"1px\",t.style.height=\"1px\",t.style.position=\"absolute\",t.style.top=\"-1000px\",t.style.left=\"-1000px\",t.style.zIndex=2 .toString(),t.style.backgroundColor=\"#FF0000\",t.title=\"select to enable accessibility for this content\",t.addEventListener(\"focus\",function(){e._isMobileAccessibility=!0,e.activate(),e.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t},i.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},i.prototype.activate=function(){var e;this._isActive||(this._isActive=!0,self.document.addEventListener(\"mousemove\",this._onMouseMove,!0),self.removeEventListener(\"keydown\",this._onKeyDown,!1),this.renderer.on(\"postrender\",this.update,this),(e=this.renderer.view.parentNode)===null||e===void 0||e.appendChild(this.div))},i.prototype.deactivate=function(){var e;this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,self.document.removeEventListener(\"mousemove\",this._onMouseMove,!0),self.addEventListener(\"keydown\",this._onKeyDown,!1),this.renderer.off(\"postrender\",this.update),(e=this.div.parentNode)===null||e===void 0||e.removeChild(this.div))},i.prototype.updateAccessibleObjects=function(e){if(e.visible&&e.accessibleChildren){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);var t=e.children;if(t)for(var n=0;n<t.length;n++)this.updateAccessibleObjects(t[n])}},i.prototype.update=function(){var e=performance.now();if(!(os.android.device&&e<this.androidUpdateCount)&&(this.androidUpdateCount=e+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),n=t.left,r=t.top,o=t.width,s=t.height,a=this.renderer,l=a.width,u=a.height,h=a.resolution,d=o/l*h,p=s/u*h,m=this.div;m.style.left=n+\"px\",m.style.top=r+\"px\",m.style.width=l+\"px\",m.style.height=u+\"px\";for(var g=0;g<this.children.length;g++){var _=this.children[g];if(_.renderId!==this.renderId)_._accessibleActive=!1,Su(this.children,g,1),this.div.removeChild(_._accessibleDiv),this.pool.push(_._accessibleDiv),_._accessibleDiv=null,g--;else{m=_._accessibleDiv;var y=_.hitArea,w=_.worldTransform;_.hitArea?(m.style.left=(w.tx+y.x*w.a)*d+\"px\",m.style.top=(w.ty+y.y*w.d)*p+\"px\",m.style.width=y.width*w.a*d+\"px\",m.style.height=y.height*w.d*p+\"px\"):(y=_.getBounds(),this.capHitArea(y),m.style.left=y.x*d+\"px\",m.style.top=y.y*p+\"px\",m.style.width=y.width*d+\"px\",m.style.height=y.height*p+\"px\",m.title!==_.accessibleTitle&&_.accessibleTitle!==null&&(m.title=_.accessibleTitle),m.getAttribute(\"aria-label\")!==_.accessibleHint&&_.accessibleHint!==null&&m.setAttribute(\"aria-label\",_.accessibleHint)),_.accessibleTitle===m.title&&_.tabIndex===m.tabIndex||(m.title=_.accessibleTitle,m.tabIndex=_.tabIndex,this.debug&&this.updateDebugHTML(m))}}this.renderId++}},i.prototype.updateDebugHTML=function(e){e.innerHTML=\"type: \"+e.type+\"</br> title : \"+e.title+\"</br> tabIndex: \"+e.tabIndex},i.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);var t=this.renderer,n=t.width,r=t.height;e.x+e.width>n&&(e.width=n-e.x),e.y+e.height>r&&(e.height=r-e.y)},i.prototype.addChild=function(e){var t=this.pool.pop();t||((t=document.createElement(\"button\")).style.width=\"100px\",t.style.height=\"100px\",t.style.backgroundColor=this.debug?\"rgba(255,255,255,0.5)\":\"transparent\",t.style.position=\"absolute\",t.style.zIndex=2 .toString(),t.style.borderStyle=\"none\",navigator.userAgent.toLowerCase().indexOf(\"chrome\")>-1?t.setAttribute(\"aria-live\",\"off\"):t.setAttribute(\"aria-live\",\"polite\"),navigator.userAgent.match(/rv:.*Gecko\\//)?t.setAttribute(\"aria-relevant\",\"additions\"):t.setAttribute(\"aria-relevant\",\"text\"),t.addEventListener(\"click\",this._onClick.bind(this)),t.addEventListener(\"focus\",this._onFocus.bind(this)),t.addEventListener(\"focusout\",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:e.accessibleHint&&e.accessibleHint!==null||(t.title=\"displayObject \"+e.tabIndex),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute(\"aria-label\",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},i.prototype._onClick=function(e){var t=this.renderer.plugins.interaction,n=e.target.displayObject,r=t.eventData;t.dispatchEvent(n,\"click\",r),t.dispatchEvent(n,\"pointertap\",r),t.dispatchEvent(n,\"tap\",r)},i.prototype._onFocus=function(e){e.target.getAttribute(\"aria-live\")||e.target.setAttribute(\"aria-live\",\"assertive\");var t=this.renderer.plugins.interaction,n=e.target.displayObject,r=t.eventData;t.dispatchEvent(n,\"mouseover\",r)},i.prototype._onFocusOut=function(e){e.target.getAttribute(\"aria-live\")||e.target.setAttribute(\"aria-live\",\"polite\");var t=this.renderer.plugins.interaction,n=e.target.displayObject,r=t.eventData;t.dispatchEvent(n,\"mouseout\",r)},i.prototype._onKeyDown=function(e){e.keyCode===9&&this.activate()},i.prototype._onMouseMove=function(e){e.movementX===0&&e.movementY===0||this.deactivate()},i.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,self.document.removeEventListener(\"mousemove\",this._onMouseMove,!0),self.removeEventListener(\"keydown\",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},i}();/*!\n * @pixi/ticker - v6.2.0\n * Compiled Mon, 01 Nov 2021 16:52:10 UTC\n *\n * @pixi/ticker is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */Jt.TARGET_FPMS=.06,function(i){i[i.INTERACTION=50]=\"INTERACTION\",i[i.HIGH=25]=\"HIGH\",i[i.NORMAL=0]=\"NORMAL\",i[i.LOW=-25]=\"LOW\",i[i.UTILITY=-50]=\"UTILITY\"}(as||(as={}));var C0=function(){function i(e,t,n,r){t===void 0&&(t=null),n===void 0&&(n=0),r===void 0&&(r=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=n,this.once=r}return i.prototype.match=function(e,t){return t===void 0&&(t=null),this.fn===e&&this.context===t},i.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},i.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},i.prototype.destroy=function(e){e===void 0&&(e=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=e?null:t,this.previous=null,t},i}(),ar=function(){function i(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new C0(null,null,1/0),this.deltaMS=1/Jt.TARGET_FPMS,this.elapsedMS=1/Jt.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&e._requestId===null&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return i.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},i.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},i.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},i.prototype.add=function(e,t,n){return n===void 0&&(n=as.NORMAL),this._addListener(new C0(e,t,n))},i.prototype.addOnce=function(e,t,n){return n===void 0&&(n=as.NORMAL),this._addListener(new C0(e,t,n,!0))},i.prototype._addListener=function(e){var t=this._head.next,n=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(n);break}n=t,t=t.next}e.previous||e.connect(n)}else e.connect(n);return this._startIfPossible(),this},i.prototype.remove=function(e,t){for(var n=this._head.next;n;)n=n.match(e,t)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(i.prototype,\"count\",{get:function(){if(!this._head)return 0;for(var e=0,t=this._head;t=t.next;)e++;return e},enumerable:!1,configurable:!0}),i.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},i.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},i.prototype.destroy=function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},i.prototype.update=function(e){var t;if(e===void 0&&(e=performance.now()),e>this.lastTime){if((t=this.elapsedMS=e-this.lastTime)>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){var n=e-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=e-n%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Jt.TARGET_FPMS;for(var r=this._head,o=r.next;o;)o=o.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e},Object.defineProperty(i.prototype,\"FPS\",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"minFPS\",{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,t)/1e3,Jt.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"maxFPS\",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(e===0)this._minElapsedMS=0;else{var t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(i,\"shared\",{get:function(){if(!i._shared){var e=i._shared=new i;e.autoStart=!0,e._protected=!0}return i._shared},enumerable:!1,configurable:!0}),Object.defineProperty(i,\"system\",{get:function(){if(!i._system){var e=i._system=new i;e.autoStart=!0,e._protected=!0}return i._system},enumerable:!1,configurable:!0}),i}(),l2=function(){function i(){}return i.init=function(e){var t=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,\"ticker\",{set:function(n){this._ticker&&this._ticker.remove(this.render,this),this._ticker=n,n&&n.add(this.render,this,as.LOW)},get:function(){return this._ticker}}),this.stop=function(){t._ticker.stop()},this.start=function(){t._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?ar.shared:new ar,e.autoStart&&this.start()},i.destroy=function(){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}},i}(),wb=function(){function i(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Ii,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(i.prototype,\"pointerId\",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),i.prototype.getLocalPosition=function(e,t,n){return e.worldTransform.applyInverse(n||this.global,t)},i.prototype.copyEvent=function(e){\"isPrimary\"in e&&e.isPrimary&&(this.isPrimary=!0),this.button=\"button\"in e&&e.button;var t=\"buttons\"in e&&e.buttons;this.buttons=Number.isInteger(t)?t:\"which\"in e&&e.which,this.width=\"width\"in e&&e.width,this.height=\"height\"in e&&e.height,this.tiltX=\"tiltX\"in e&&e.tiltX,this.tiltY=\"tiltY\"in e&&e.tiltY,this.pointerType=\"pointerType\"in e&&e.pointerType,this.pressure=\"pressure\"in e&&e.pressure,this.rotationAngle=\"rotationAngle\"in e&&e.rotationAngle,this.twist=\"twist\"in e&&e.twist||0,this.tangentialPressure=\"tangentialPressure\"in e&&e.tangentialPressure||0},i.prototype.reset=function(){this.isPrimary=!1},i}(),Sb=function(i,e){return(Sb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(i,e)},u2=function(){function i(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return i.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},i.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},i}(),P0=function(){function i(e){this._pointerId=e,this._flags=i.FLAGS.NONE}return i.prototype._doSet=function(e,t){this._flags=t?this._flags|e:this._flags&~e},Object.defineProperty(i.prototype,\"pointerId\",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"flags\",{get:function(){return this._flags},set:function(e){this._flags=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"none\",{get:function(){return this._flags===i.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"over\",{get:function(){return(this._flags&i.FLAGS.OVER)!=0},set:function(e){this._doSet(i.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"rightDown\",{get:function(){return(this._flags&i.FLAGS.RIGHT_DOWN)!=0},set:function(e){this._doSet(i.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"leftDown\",{get:function(){return(this._flags&i.FLAGS.LEFT_DOWN)!=0},set:function(e){this._doSet(i.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),i.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),i}(),h2=function(){function i(){this._tempPoint=new Ii}return i.prototype.recursiveFindHit=function(e,t,n,r,o){if(!t||!t.visible)return!1;var s=e.data.global,a=!1,l=o=t.interactive||o,u=!0;if(t.hitArea?(r&&(t.worldTransform.applyInverse(s,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?a=!0:(r=!1,u=!1)),l=!1):t._mask&&r&&(t._mask.containsPoint&&t._mask.containsPoint(s)||(r=!1)),u&&t.interactiveChildren&&t.children)for(var h=t.children,d=h.length-1;d>=0;d--){var p=h[d],m=this.recursiveFindHit(e,p,n,r,l);if(m){if(!p.parent)continue;l=!1,m&&(e.target&&(r=!1),a=!0)}}return o&&(r&&!e.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(s)&&(a=!0),t.interactive&&(a&&!e.target&&(e.target=t),n&&n(e,t,!!a))),a},i.prototype.findHit=function(e,t,n,r){this.recursiveFindHit(e,t,n,r,!1)},i}(),c2={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor===\"pointer\"},set buttonMode(i){i?this.cursor=\"pointer\":this.cursor===\"pointer\"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Li.mixin(c2);var Nm={target:null,data:{global:null}},d2=function(i){function e(t,n){var r=i.call(this)||this;return n=n||{},r.renderer=t,r.autoPreventDefault=n.autoPreventDefault===void 0||n.autoPreventDefault,r.interactionFrequency=n.interactionFrequency||10,r.mouse=new wb,r.mouse.identifier=1,r.mouse.global.set(-999999),r.activeInteractionData={},r.activeInteractionData[1]=r.mouse,r.interactionDataPool=[],r.eventData=new u2,r.interactionDOMElement=null,r.moveWhenInside=!1,r.eventsAdded=!1,r.tickerAdded=!1,r.mouseOverRenderer=!(\"PointerEvent\"in self),r.supportsTouchEvents=\"ontouchstart\"in self,r.supportsPointerEvents=!!self.PointerEvent,r.onPointerUp=r.onPointerUp.bind(r),r.processPointerUp=r.processPointerUp.bind(r),r.onPointerCancel=r.onPointerCancel.bind(r),r.processPointerCancel=r.processPointerCancel.bind(r),r.onPointerDown=r.onPointerDown.bind(r),r.processPointerDown=r.processPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.processPointerMove=r.processPointerMove.bind(r),r.onPointerOut=r.onPointerOut.bind(r),r.processPointerOverOut=r.processPointerOverOut.bind(r),r.onPointerOver=r.onPointerOver.bind(r),r.cursorStyles={default:\"inherit\",pointer:\"pointer\"},r.currentCursorMode=null,r.cursor=null,r.resolution=1,r.delayedEvents=[],r.search=new h2,r._tempDisplayObject=new bb,r._eventListenerOptions={capture:!0,passive:!1},r._useSystemTicker=n.useSystemTicker===void 0||n.useSystemTicker,r.setTargetElement(r.renderer.view,r.renderer.resolution),r}return function(t,n){function r(){this.constructor=t}Sb(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}(e,i),Object.defineProperty(e.prototype,\"useSystemTicker\",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"lastObjectRendered\",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,n){return Nm.target=null,Nm.data.global=t,n||(n=this.lastObjectRendered),this.processInteractive(Nm,n,null,!0),Nm.target},e.prototype.setTargetElement=function(t,n){n===void 0&&(n=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=n,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(ar.system.add(this.tickerUpdate,this,as.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(ar.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;self.navigator.msPointerEnabled?(t.msContentZooming=\"none\",t.msTouchAction=\"none\"):this.supportsPointerEvents&&(t.touchAction=\"none\"),this.supportsPointerEvents?(self.document.addEventListener(\"pointermove\",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener(\"pointerdown\",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener(\"pointerleave\",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener(\"pointerover\",this.onPointerOver,this._eventListenerOptions),self.addEventListener(\"pointercancel\",this.onPointerCancel,this._eventListenerOptions),self.addEventListener(\"pointerup\",this.onPointerUp,this._eventListenerOptions)):(self.document.addEventListener(\"mousemove\",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener(\"mousedown\",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener(\"mouseout\",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener(\"mouseover\",this.onPointerOver,this._eventListenerOptions),self.addEventListener(\"mouseup\",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener(\"touchstart\",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener(\"touchcancel\",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener(\"touchend\",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener(\"touchmove\",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;self.navigator.msPointerEnabled?(t.msContentZooming=\"\",t.msTouchAction=\"\"):this.supportsPointerEvents&&(t.touchAction=\"\"),this.supportsPointerEvents?(self.document.removeEventListener(\"pointermove\",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener(\"pointerdown\",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener(\"pointerleave\",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener(\"pointerover\",this.onPointerOver,this._eventListenerOptions),self.removeEventListener(\"pointercancel\",this.onPointerCancel,this._eventListenerOptions),self.removeEventListener(\"pointerup\",this.onPointerUp,this._eventListenerOptions)):(self.document.removeEventListener(\"mousemove\",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener(\"mousedown\",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener(\"mouseout\",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener(\"mouseover\",this.onPointerOver,this._eventListenerOptions),self.removeEventListener(\"mouseup\",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener(\"touchstart\",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener(\"touchcancel\",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener(\"touchend\",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener(\"touchmove\",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var n=this.activeInteractionData[t];if(n.originalEvent&&n.pointerType!==\"touch\"){var r=this.configureInteractionEventForDOMEvent(this.eventData,n.originalEvent,n);this.processInteractive(r,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){t=t||\"default\";var n=!0;if(self.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(n=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var r=this.cursorStyles[t];if(r)switch(typeof r){case\"string\":n&&(this.interactionDOMElement.style.cursor=r);break;case\"function\":r(t);break;case\"object\":n&&Object.assign(this.interactionDOMElement.style,r)}else n&&typeof t==\"string\"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,n,r){r.stopPropagationHint&&t!==r.stopsPropagatingAt||(r.currentTarget=t,r.type=n,t.emit(n,r),t[n]&&t[n](r))},e.prototype.delayDispatchEvent=function(t,n,r){this.delayedEvents.push({displayObject:t,eventString:n,eventData:r})},e.prototype.mapPositionToPoint=function(t,n,r){var o;o=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var s=1/this.resolution;t.x=(n-o.left)*(this.interactionDOMElement.width/o.width)*s,t.y=(r-o.top)*(this.interactionDOMElement.height/o.height)*s},e.prototype.processInteractive=function(t,n,r,o){var s=this.search.findHit(t,n,r,o),a=this.delayedEvents;if(!a.length)return s;t.stopPropagationHint=!1;var l=a.length;this.delayedEvents=[];for(var u=0;u<l;u++){var h=a[u],d=h.displayObject,p=h.eventString,m=h.eventData;m.stopsPropagatingAt===d&&(m.stopPropagationHint=!0),this.dispatchEvent(d,p,m)}return s},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||t.pointerType!==\"touch\"){var n=this.normalizeToPointerData(t);this.autoPreventDefault&&n[0].isNormalized&&(t.cancelable||!(\"cancelable\"in t))&&t.preventDefault();for(var r=n.length,o=0;o<r;o++){var s=n[o],a=this.getInteractionDataForPointerId(s),l=this.configureInteractionEventForDOMEvent(this.eventData,s,a);if(l.data.originalEvent=t,this.processInteractive(l,this.lastObjectRendered,this.processPointerDown,!0),this.emit(\"pointerdown\",l),s.pointerType===\"touch\")this.emit(\"touchstart\",l);else if(s.pointerType===\"mouse\"||s.pointerType===\"pen\"){var u=s.button===2;this.emit(u?\"rightdown\":\"mousedown\",this.eventData)}}}},e.prototype.processPointerDown=function(t,n,r){var o=t.data,s=t.data.identifier;if(r){if(n.trackedPointers[s]||(n.trackedPointers[s]=new P0(s)),this.dispatchEvent(n,\"pointerdown\",t),o.pointerType===\"touch\")this.dispatchEvent(n,\"touchstart\",t);else if(o.pointerType===\"mouse\"||o.pointerType===\"pen\"){var a=o.button===2;a?n.trackedPointers[s].rightDown=!0:n.trackedPointers[s].leftDown=!0,this.dispatchEvent(n,a?\"rightdown\":\"mousedown\",t)}}},e.prototype.onPointerComplete=function(t,n,r){for(var o=this.normalizeToPointerData(t),s=o.length,a=t.target!==this.interactionDOMElement?\"outside\":\"\",l=0;l<s;l++){var u=o[l],h=this.getInteractionDataForPointerId(u),d=this.configureInteractionEventForDOMEvent(this.eventData,u,h);if(d.data.originalEvent=t,this.processInteractive(d,this.lastObjectRendered,r,n||!a),this.emit(n?\"pointercancel\":\"pointerup\"+a,d),u.pointerType===\"mouse\"||u.pointerType===\"pen\"){var p=u.button===2;this.emit(p?\"rightup\"+a:\"mouseup\"+a,d)}else u.pointerType===\"touch\"&&(this.emit(n?\"touchcancel\":\"touchend\"+a,d),this.releaseInteractionDataForPointerId(u.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&t.pointerType===\"touch\"||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,n){var r=t.data,o=t.data.identifier;n.trackedPointers[o]!==void 0&&(delete n.trackedPointers[o],this.dispatchEvent(n,\"pointercancel\",t),r.pointerType===\"touch\"&&this.dispatchEvent(n,\"touchcancel\",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&t.pointerType===\"touch\"||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,n,r){var o=t.data,s=t.data.identifier,a=n.trackedPointers[s],l=o.pointerType===\"touch\",u=o.pointerType===\"mouse\"||o.pointerType===\"pen\",h=!1;if(u){var d=o.button===2,p=P0.FLAGS,m=d?p.RIGHT_DOWN:p.LEFT_DOWN,g=a!==void 0&&a.flags&m;r?(this.dispatchEvent(n,d?\"rightup\":\"mouseup\",t),g&&(this.dispatchEvent(n,d?\"rightclick\":\"click\",t),h=!0)):g&&this.dispatchEvent(n,d?\"rightupoutside\":\"mouseupoutside\",t),a&&(d?a.rightDown=!1:a.leftDown=!1)}r?(this.dispatchEvent(n,\"pointerup\",t),l&&this.dispatchEvent(n,\"touchend\",t),a&&(u&&!h||this.dispatchEvent(n,\"pointertap\",t),l&&(this.dispatchEvent(n,\"tap\",t),a.over=!1))):a&&(this.dispatchEvent(n,\"pointerupoutside\",t),l&&this.dispatchEvent(n,\"touchendoutside\",t)),a&&a.none&&delete n.trackedPointers[s]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||t.pointerType!==\"touch\"){var n=this.normalizeToPointerData(t);n[0].pointerType!==\"mouse\"&&n[0].pointerType!==\"pen\"||(this._didMove=!0,this.cursor=null);for(var r=n.length,o=0;o<r;o++){var s=n[o],a=this.getInteractionDataForPointerId(s),l=this.configureInteractionEventForDOMEvent(this.eventData,s,a);l.data.originalEvent=t,this.processInteractive(l,this.lastObjectRendered,this.processPointerMove,!0),this.emit(\"pointermove\",l),s.pointerType===\"touch\"&&this.emit(\"touchmove\",l),s.pointerType!==\"mouse\"&&s.pointerType!==\"pen\"||this.emit(\"mousemove\",l)}n[0].pointerType===\"mouse\"&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,n,r){var o=t.data,s=o.pointerType===\"touch\",a=o.pointerType===\"mouse\"||o.pointerType===\"pen\";a&&this.processPointerOverOut(t,n,r),this.moveWhenInside&&!r||(this.dispatchEvent(n,\"pointermove\",t),s&&this.dispatchEvent(n,\"touchmove\",t),a&&this.dispatchEvent(n,\"mousemove\",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||t.pointerType!==\"touch\"){var n=this.normalizeToPointerData(t)[0];n.pointerType===\"mouse\"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var r=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,r);o.data.originalEvent=n,this.processInteractive(o,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit(\"pointerout\",o),n.pointerType===\"mouse\"||n.pointerType===\"pen\"?this.emit(\"mouseout\",o):this.releaseInteractionDataForPointerId(r.identifier)}},e.prototype.processPointerOverOut=function(t,n,r){var o=t.data,s=t.data.identifier,a=o.pointerType===\"mouse\"||o.pointerType===\"pen\",l=n.trackedPointers[s];r&&!l&&(l=n.trackedPointers[s]=new P0(s)),l!==void 0&&(r&&this.mouseOverRenderer?(l.over||(l.over=!0,this.delayDispatchEvent(n,\"pointerover\",t),a&&this.delayDispatchEvent(n,\"mouseover\",t)),a&&this.cursor===null&&(this.cursor=n.cursor)):l.over&&(l.over=!1,this.dispatchEvent(n,\"pointerout\",this.eventData),a&&this.dispatchEvent(n,\"mouseout\",t),l.none&&delete n.trackedPointers[s]))},e.prototype.onPointerOver=function(t){var n=this.normalizeToPointerData(t)[0],r=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,r);o.data.originalEvent=n,n.pointerType===\"mouse\"&&(this.mouseOverRenderer=!0),this.emit(\"pointerover\",o),n.pointerType!==\"mouse\"&&n.pointerType!==\"pen\"||this.emit(\"mouseover\",o)},e.prototype.getInteractionDataForPointerId=function(t){var n,r=t.pointerId;return r===1||t.pointerType===\"mouse\"?n=this.mouse:this.activeInteractionData[r]?n=this.activeInteractionData[r]:((n=this.interactionDataPool.pop()||new wb).identifier=r,this.activeInteractionData[r]=n),n.copyEvent(t),n},e.prototype.releaseInteractionDataForPointerId=function(t){var n=this.activeInteractionData[t];n&&(delete this.activeInteractionData[t],n.reset(),this.interactionDataPool.push(n))},e.prototype.configureInteractionEventForDOMEvent=function(t,n,r){return t.data=r,this.mapPositionToPoint(r.global,n.clientX,n.clientY),n.pointerType===\"touch\"&&(n.globalX=r.global.x,n.globalY=r.global.y),r.originalEvent=n,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var n=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var r=0,o=t.changedTouches.length;r<o;r++){var s=t.changedTouches[r];s.button===void 0&&(s.button=t.touches.length?1:0),s.buttons===void 0&&(s.buttons=t.touches.length?1:0),s.isPrimary===void 0&&(s.isPrimary=t.touches.length===1&&t.type===\"touchstart\"),s.width===void 0&&(s.width=s.radiusX||1),s.height===void 0&&(s.height=s.radiusY||1),s.tiltX===void 0&&(s.tiltX=0),s.tiltY===void 0&&(s.tiltY=0),s.pointerType===void 0&&(s.pointerType=\"touch\"),s.pointerId===void 0&&(s.pointerId=s.identifier||0),s.pressure===void 0&&(s.pressure=s.force||.5),s.twist===void 0&&(s.twist=0),s.tangentialPressure===void 0&&(s.tangentialPressure=0),s.layerX===void 0&&(s.layerX=s.offsetX=s.clientX),s.layerY===void 0&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,n.push(s)}else if(self.MouseEvent&&(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof self.PointerEvent))n.push(t);else{var a=t;a.isPrimary===void 0&&(a.isPrimary=!0),a.width===void 0&&(a.width=1),a.height===void 0&&(a.height=1),a.tiltX===void 0&&(a.tiltX=0),a.tiltY===void 0&&(a.tiltY=0),a.pointerType===void 0&&(a.pointerType=\"mouse\"),a.pointerId===void 0&&(a.pointerId=1),a.pressure===void 0&&(a.pressure=.5),a.twist===void 0&&(a.twist=0),a.tangentialPressure===void 0&&(a.tangentialPressure=0),a.isNormalized=!0,n.push(a)}return n},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e}(_c.a),xr=function(){function i(e){this.items=[],this._name=e,this._aliasCount=0}return i.prototype.emit=function(e,t,n,r,o,s,a,l){if(arguments.length>8)throw new Error(\"max arguments reached\");var u=this,h=u.name,d=u.items;this._aliasCount++;for(var p=0,m=d.length;p<m;p++)d[p][h](e,t,n,r,o,s,a,l);return d===this.items&&this._aliasCount--,this},i.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},i.prototype.add=function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this},i.prototype.remove=function(e){var t=this.items.indexOf(e);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},i.prototype.contains=function(e){return this.items.indexOf(e)!==-1},i.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},i.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(i.prototype,\"empty\",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"name\",{get:function(){return this._name},enumerable:!1,configurable:!0}),i}();Object.defineProperties(xr.prototype,{dispatch:{value:xr.prototype.emit},run:{value:xr.prototype.emit}}),Jt.PREFER_ENV=os.any?Ca.WEBGL:Ca.WEBGL2,Jt.STRICT_TEXTURE_CACHE=!1;var I0=[];function Tb(i,e){if(!i)return null;var t=\"\";if(typeof i==\"string\"){var n=/\\.(\\w{3,4})(?:$|\\?|#)/i.exec(i);n&&(t=n[1].toLowerCase())}for(var r=I0.length-1;r>=0;--r){var o=I0[r];if(o.test&&o.test(i,t))return new o(i,e)}throw new Error(\"Unrecognized source type to auto-detect Resource\")}/*! *****************************************************************************\nCopyright (c) Microsoft Corporation. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */var Eb=function(i,e){return(Eb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(i,e)};function ni(i,e){function t(){this.constructor=i}Eb(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Mb=function(){return(Mb=Object.assign||function(i){for(var e,t=arguments,n=1,r=arguments.length;n<r;n++)for(var o in e=t[n])Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=e[o]);return i}).apply(this,arguments)},lp=function(){function i(e,t){e===void 0&&(e=0),t===void 0&&(t=0),this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new xr(\"setRealSize\"),this.onUpdate=new xr(\"update\"),this.onError=new xr(\"onError\")}return i.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},i.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},i.prototype.resize=function(e,t){e===this._width&&t===this._height||(this._width=e,this._height=t,this.onResize.emit(e,t))},Object.defineProperty(i.prototype,\"valid\",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),i.prototype.update=function(){this.destroyed||this.onUpdate.emit()},i.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(i.prototype,\"width\",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"height\",{get:function(){return this._height},enumerable:!1,configurable:!0}),i.prototype.style=function(e,t,n){return!1},i.prototype.dispose=function(){},i.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},i.test=function(e,t){return!1},i}(),Dm=function(i){function e(t,n){var r=this,o=n||{},s=o.width,a=o.height;if(!s||!a)throw new Error(\"BufferResource width or height invalid\");return(r=i.call(this,s,a)||this).data=t,r}return ni(e,i),e.prototype.upload=function(t,n,r){var o=t.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===Os.UNPACK);var s=n.realWidth,a=n.realHeight;return r.width===s&&r.height===a?o.texSubImage2D(n.target,0,0,0,s,a,n.format,r.type,this.data):(r.width=s,r.height=a,o.texImage2D(n.target,0,r.internalFormat,s,a,0,n.format,r.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(lp),p2={scaleMode:Pa.NEAREST,format:Dt.RGBA,alphaMode:Os.NPM},Cn=function(i){function e(t,n){t===void 0&&(t=null),n===void 0&&(n=null);var r=i.call(this)||this,o=(n=n||{}).alphaMode,s=n.mipmap,a=n.anisotropicLevel,l=n.scaleMode,u=n.width,h=n.height,d=n.wrapMode,p=n.format,m=n.type,g=n.target,_=n.resolution,y=n.resourceOptions;return!t||t instanceof lp||((t=Tb(t,y)).internal=!0),r.resolution=_||Jt.RESOLUTION,r.width=Math.round((u||0)*r.resolution)/r.resolution,r.height=Math.round((h||0)*r.resolution)/r.resolution,r._mipmap=s!==void 0?s:Jt.MIPMAP_TEXTURES,r.anisotropicLevel=a!==void 0?a:Jt.ANISOTROPIC_LEVEL,r._wrapMode=d||Jt.WRAP_MODE,r._scaleMode=l!==void 0?l:Jt.SCALE_MODE,r.format=p||Dt.RGBA,r.type=m||sn.UNSIGNED_BYTE,r.target=g||xu.TEXTURE_2D,r.alphaMode=o!==void 0?o:Os.UNPACK,r.uid=ll(),r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=u>0&&h>0,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(t),r}return ni(e,i),Object.defineProperty(e.prototype,\"realWidth\",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"realHeight\",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"mipmap\",{get:function(){return this._mipmap},set:function(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"scaleMode\",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"wrapMode\",{get:function(){return this._wrapMode},set:function(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,n){var r;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),n!==void 0&&n!==this.mipmap&&(this.mipmap=n,r=!0),r&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,n,r){return r=r||this.resolution,this.setRealSize(t*r,n*r,r)},e.prototype.setRealSize=function(t,n,r){return this.resolution=r||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(n)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=b0(this.realWidth)&&b0(this.realHeight)},e.prototype.setResolution=function(t){var n=this.resolution;return n===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*n)/t,this.height=Math.round(this.height*n)/t,this.emit(\"update\",this)),this._refreshPOT()),this},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error(\"Resource can be set only once\");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit(\"update\",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit(\"loaded\",this),this.emit(\"update\",this))},e.prototype.onError=function(t){this.emit(\"error\",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Mo[this.cacheId],delete Xr[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit(\"dispose\",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,n,r){r===void 0&&(r=Jt.STRICT_TEXTURE_CACHE);var o=typeof t==\"string\",s=null;if(o)s=t;else{if(!t._pixiId){var a=n&&n.pixiIdPrefix||\"pixiid\";t._pixiId=a+\"_\"+ll()}s=t._pixiId}var l=Mo[s];if(o&&r&&!l)throw new Error('The cacheId \"'+s+'\" does not exist in BaseTextureCache.');return l||((l=new e(t,n)).cacheId=s,e.addToCache(l,s)),l},e.fromBuffer=function(t,n,r,o){t=t||new Float32Array(n*r*4);var s=new Dm(t,{width:n,height:r}),a=t instanceof Float32Array?sn.FLOAT:sn.UNSIGNED_BYTE;return new e(s,Object.assign(p2,o||{width:n,height:r,type:a}))},e.addToCache=function(t,n){n&&(t.textureCacheIds.indexOf(n)===-1&&t.textureCacheIds.push(n),Mo[n]&&console.warn(\"BaseTexture added to the cache with an id [\"+n+\"] that already had an entry\"),Mo[n]=t)},e.removeFromCache=function(t){if(typeof t==\"string\"){var n=Mo[t];if(n){var r=n.textureCacheIds.indexOf(t);return r>-1&&n.textureCacheIds.splice(r,1),delete Mo[t],n}}else if(t&&t.textureCacheIds){for(var o=0;o<t.textureCacheIds.length;++o)delete Mo[t.textureCacheIds[o]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(_c.a),Ab=function(i){function e(t,n){var r=this,o=n||{},s=o.width,a=o.height;(r=i.call(this,s,a)||this).items=[],r.itemDirtyIds=[];for(var l=0;l<t;l++){var u=new Cn;r.items.push(u),r.itemDirtyIds.push(-2)}return r.length=t,r._load=null,r.baseTexture=null,r}return ni(e,i),e.prototype.initFromArray=function(t,n){for(var r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof lp?this.addResourceAt(t[r],r):this.addResourceAt(Tb(t[r],n),r))},e.prototype.dispose=function(){for(var t=0,n=this.length;t<n;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,n){if(!this.items[n])throw new Error(\"Index \"+n+\" is out of bounds\");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[n].setResource(t),this},e.prototype.bind=function(t){if(this.baseTexture!==null)throw new Error(\"Only one base texture per TextureArray is allowed\");i.prototype.bind.call(this,t);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=t,this.items[n].on(\"update\",t.update,t)},e.prototype.unbind=function(t){i.prototype.unbind.call(this,t);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off(\"update\",t.update,t)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var n=this.items.map(function(r){return r.resource}).filter(function(r){return r}).map(function(r){return r.load()});return this._load=Promise.all(n).then(function(){var r=t.items[0],o=r.realWidth,s=r.realHeight;return t.resize(o,s),Promise.resolve(t)}),this._load},e}(lp),f2=function(i){function e(t,n){var r,o,s=this,a=n||{},l=a.width,u=a.height;return Array.isArray(t)?(r=t,o=t.length):o=t,s=i.call(this,o,{width:l,height:u})||this,r&&s.initFromArray(r,n),s}return ni(e,i),e.prototype.addBaseTextureAt=function(t,n){if(!t.resource)throw new Error(\"ArrayResource does not support RenderTexture\");return this.addResourceAt(t.resource,n),this},e.prototype.bind=function(t){i.prototype.bind.call(this,t),t.target=xu.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,n,r){var o=this.length,s=this.itemDirtyIds,a=this.items,l=t.gl;r.dirtyId<0&&l.texImage3D(l.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,o,0,n.format,r.type,null);for(var u=0;u<o;u++){var h=a[u];s[u]<h.dirtyId&&(s[u]=h.dirtyId,h.valid&&l.texSubImage3D(l.TEXTURE_2D_ARRAY,0,0,0,u,h.resource.width,h.resource.height,1,n.format,r.type,h.resource.source))}return!0},e}(Ab),ul=function(i){function e(t){var n=this,r=t,o=r.naturalWidth||r.videoWidth||r.width,s=r.naturalHeight||r.videoHeight||r.height;return(n=i.call(this,o,s)||this).source=t,n.noSubImage=!1,n}return ni(e,i),e.crossOrigin=function(t,n,r){r===void 0&&n.indexOf(\"data:\")!==0?t.crossOrigin=Qx(n):r!==!1&&(t.crossOrigin=typeof r==\"string\"?r:\"anonymous\")},e.prototype.upload=function(t,n,r,o){var s=t.gl,a=n.realWidth,l=n.realHeight;return o=o||this.source,s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===Os.UNPACK),this.noSubImage||n.target!==s.TEXTURE_2D||r.width!==a||r.height!==l?(r.width=a,r.height=l,s.texImage2D(n.target,0,r.internalFormat,n.format,r.type,o)):s.texSubImage2D(s.TEXTURE_2D,0,0,0,n.format,r.type,o),!0},e.prototype.update=function(){if(!this.destroyed){var t=this.source,n=t.naturalWidth||t.videoWidth||t.width,r=t.naturalHeight||t.videoHeight||t.height;this.resize(n,r),i.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(lp),Rb=function(i){function e(t){return i.call(this,t)||this}return ni(e,i),e.test=function(t){var n=self.OffscreenCanvas;return!!(n&&t instanceof n)||self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},e}(ul),m2=function(i){function e(t,n){var r=this,o=n||{},s=o.width,a=o.height,l=o.autoLoad,u=o.linkBaseTexture;if(t&&t.length!==e.SIDES)throw new Error(\"Invalid length. Got \"+t.length+\", expected 6\");r=i.call(this,6,{width:s,height:a})||this;for(var h=0;h<e.SIDES;h++)r.items[h].target=xu.TEXTURE_CUBE_MAP_POSITIVE_X+h;return r.linkBaseTexture=u!==!1,t&&r.initFromArray(t,n),l!==!1&&r.load(),r}return ni(e,i),e.prototype.bind=function(t){i.prototype.bind.call(this,t),t.target=xu.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,n,r){if(!this.items[n])throw new Error(\"Index \"+n+\" is out of bounds\");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error(\"CubeResource does not support copying of renderTexture.\");this.addResourceAt(t.resource,n)}else t.target=xu.TEXTURE_CUBE_MAP_POSITIVE_X+n,t.parentTextureArray=this.baseTexture,this.items[n]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[n]=t,this},e.prototype.upload=function(t,n,r){for(var o=this.itemDirtyIds,s=0;s<e.SIDES;s++){var a=this.items[s];o[s]<a.dirtyId&&(a.valid&&a.resource?(a.resource.upload(t,a,r),o[s]=a.dirtyId):o[s]<-1&&(t.gl.texImage2D(a.target,0,r.internalFormat,n.realWidth,n.realHeight,0,n.format,r.type,null),o[s]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(Ab),Cb=function(i){function e(t,n){var r=this;if(n=n||{},!(t instanceof HTMLImageElement)){var o=new Image;ul.crossOrigin(o,t,n.crossorigin),o.src=t,t=o}return r=i.call(this,t)||this,!t.complete&&r._width&&r._height&&(r._width=0,r._height=0),r.url=t.src,r._process=null,r.preserveBitmap=!1,r.createBitmap=(n.createBitmap!==void 0?n.createBitmap:Jt.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,r.alphaMode=typeof n.alphaMode==\"number\"?n.alphaMode:null,r.bitmap=null,r._load=null,n.autoLoad!==!1&&r.load(),r}return ni(e,i),e.prototype.load=function(t){var n=this;return this._load||(t!==void 0&&(this.createBitmap=t),this._load=new Promise(function(r,o){var s=n.source;n.url=s.src;var a=function(){n.destroyed||(s.onload=null,s.onerror=null,n.resize(s.width,s.height),n._load=null,n.createBitmap?r(n.process()):r(n))};s.complete&&s.src?a():(s.onload=a,s.onerror=function(l){o(l),n.onError.emit(l)})})),this._load},e.prototype.process=function(){var t=this,n=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!self.createImageBitmap)return Promise.resolve(this);var r=self.createImageBitmap,o=!n.crossOrigin||n.crossOrigin===\"anonymous\";return this._process=fetch(n.src,{mode:o?\"cors\":\"no-cors\"}).then(function(s){return s.blob()}).then(function(s){return r(s,0,0,n.width,n.height,{premultiplyAlpha:t.alphaMode===Os.UNPACK?\"premultiply\":\"none\"})}).then(function(s){return t.destroyed?Promise.reject():(t.bitmap=s,t.update(),t._process=null,Promise.resolve(t))}),this._process},e.prototype.upload=function(t,n,r){if(typeof this.alphaMode==\"number\"&&(n.alphaMode=this.alphaMode),!this.createBitmap)return i.prototype.upload.call(this,t,n,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(i.prototype.upload.call(this,t,n,r,this.bitmap),!this.preserveBitmap){var o=!0,s=n._glTextures;for(var a in s){var l=s[a];if(l!==r&&l.dirtyId!==n.dirtyId){o=!1;break}}o&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,i.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return typeof t==\"string\"||t instanceof HTMLImageElement},e}(ul),g2=function(i){function e(t,n){var r=this;return n=n||{},(r=i.call(this,document.createElement(\"canvas\"))||this)._width=0,r._height=0,r.svg=t,r.scale=n.scale||1,r._overrideWidth=n.width,r._overrideHeight=n.height,r._resolve=null,r._crossorigin=n.crossorigin,r._load=null,n.autoLoad!==!1&&r.load(),r}return ni(e,i),e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise(function(n){if(t._resolve=function(){t.resize(t.source.width,t.source.height),n(t)},e.SVG_XML.test(t.svg.trim())){if(!btoa)throw new Error(\"Your browser doesn't support base64 conversions.\");t.svg=\"data:image/svg+xml;base64,\"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()})),this._load},e.prototype._loadSvg=function(){var t=this,n=new Image;ul.crossOrigin(n,this.svg,this._crossorigin),n.src=this.svg,n.onerror=function(r){t._resolve&&(n.onerror=null,t.onError.emit(r))},n.onload=function(){if(t._resolve){var r=n.width,o=n.height;if(!r||!o)throw new Error(\"The SVG image must have width and height defined (in pixels), canvas API needs them.\");var s=r*t.scale,a=o*t.scale;(t._overrideWidth||t._overrideHeight)&&(s=t._overrideWidth||t._overrideHeight/o*r,a=t._overrideHeight||t._overrideWidth/r*o),s=Math.round(s),a=Math.round(a);var l=t.source;l.width=s,l.height=a,l._pixiId=\"canvas_\"+ll(),l.getContext(\"2d\").drawImage(n,0,0,r,o,0,0,s,a),t._resolve(),t._resolve=null}}},e.getSize=function(t){var n=e.SVG_SIZE.exec(t),r={};return n&&(r[n[1]]=Math.round(parseFloat(n[3])),r[n[5]]=Math.round(parseFloat(n[7]))),r},e.prototype.dispose=function(){i.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,n){return n===\"svg\"||typeof t==\"string\"&&/^data:image\\/svg\\+xml(;(charset=utf8|utf8))?;base64/.test(t)||typeof t==\"string\"&&e.SVG_XML.test(t)},e.SVG_XML=/^(<\\?xml[^?]+\\?>)?\\s*(<!--[^(-->)]*-->)?\\s*\\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\\s(width|height)=('|\")(\\d*(?:\\.\\d+)?)(?:px)?('|\"))[^>]*(?:\\s(width|height)=('|\")(\\d*(?:\\.\\d+)?)(?:px)?('|\"))[^>]*>/i,e}(ul),Pb=function(i){function e(t,n){var r=this;if(n=n||{},!(t instanceof HTMLVideoElement)){var o=document.createElement(\"video\");o.setAttribute(\"preload\",\"auto\"),o.setAttribute(\"webkit-playsinline\",\"\"),o.setAttribute(\"playsinline\",\"\"),typeof t==\"string\"&&(t=[t]);var s=t[0].src||t[0];ul.crossOrigin(o,s,n.crossorigin);for(var a=0;a<t.length;++a){var l=document.createElement(\"source\"),u=t[a],h=u.src,d=u.mime,p=(h=h||t[a]).split(\"?\").shift().toLowerCase(),m=p.substr(p.lastIndexOf(\".\")+1);d=d||e.MIME_TYPES[m]||\"video/\"+m,l.src=h,l.type=d,o.appendChild(l)}t=o}return(r=i.call(this,t)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=n.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=n.autoPlay!==!1,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),n.autoLoad!==!1&&r.load(),r}return ni(e,i),e.prototype.update=function(t){if(!this.destroyed){var n=ar.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n),(!this._updateFPS||this._msToNextUpdate<=0)&&(i.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var n=this.source;return(n.readyState===n.HAVE_ENOUGH_DATA||n.readyState===n.HAVE_FUTURE_DATA)&&n.width&&n.height&&(n.complete=!0),n.addEventListener(\"play\",this._onPlayStart.bind(this)),n.addEventListener(\"pause\",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(n.addEventListener(\"canplay\",this._onCanPlay),n.addEventListener(\"canplaythrough\",this._onCanPlay),n.addEventListener(\"error\",this._onError,!0)),this._load=new Promise(function(r){t.valid?r(t):(t._resolve=r,n.load())}),this._load},e.prototype._onError=function(t){this.source.removeEventListener(\"error\",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&t.paused===!1&&t.ended===!1&&t.readyState>2},e.prototype._isSourceReady=function(){var t=this.source;return t.readyState===3||t.readyState===4},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(ar.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(ar.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener(\"canplay\",this._onCanPlay),t.removeEventListener(\"canplaythrough\",this._onCanPlay);var n=this.valid;this.resize(t.videoWidth,t.videoHeight),!n&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(ar.shared.remove(this.update,this),this._isConnectedToTicker=!1);var t=this.source;t&&(t.removeEventListener(\"error\",this._onError,!0),t.pause(),t.src=\"\",t.load()),i.prototype.dispose.call(this)},Object.defineProperty(e.prototype,\"autoUpdate\",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(ar.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(ar.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"updateFPS\",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,n){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.indexOf(n)>-1},e.TYPES=[\"mp4\",\"m4v\",\"webm\",\"ogg\",\"ogv\",\"h264\",\"avi\",\"mov\"],e.MIME_TYPES={ogv:\"video/ogg\",mov:\"video/quicktime\",m4v:\"video/mp4\"},e}(ul),v2=function(i){function e(t){return i.call(this,t)||this}return ni(e,i),e.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},e}(ul);I0.push(Cb,v2,Rb,Pb,g2,Dm,m2,f2);var _2=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return ni(e,i),e.prototype.upload=function(t,n,r){var o=t.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===Os.UNPACK);var s=n.realWidth,a=n.realHeight;return r.width===s&&r.height===a?o.texSubImage2D(n.target,0,0,0,s,a,n.format,r.type,this.data):(r.width=s,r.height=a,o.texImage2D(n.target,0,r.internalFormat,s,a,0,n.format,r.type,this.data)),!0},e}(Dm),O0=function(){function i(e,t){this.width=Math.round(e||100),this.height=Math.round(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new xr(\"disposeFramebuffer\"),this.multisample=zi.NONE}return Object.defineProperty(i.prototype,\"colorTexture\",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),i.prototype.addColorTexture=function(e,t){return e===void 0&&(e=0),this.colorTextures[e]=t||new Cn(null,{scaleMode:Pa.NEAREST,resolution:1,mipmap:sl.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},i.prototype.addDepthTexture=function(e){return this.depthTexture=e||new Cn(new _2(null,{width:this.width,height:this.height}),{scaleMode:Pa.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:sl.OFF,format:Dt.DEPTH_COMPONENT,type:sn.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},i.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},i.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},i.prototype.resize=function(e,t){if(e=Math.round(e),t=Math.round(t),e!==this.width||t!==this.height){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var r=this.colorTextures[n],o=r.resolution;r.setSize(e/o,t/o)}this.depthTexture&&(o=this.depthTexture.resolution,this.depthTexture.setSize(e/o,t/o))}},i.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},i.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},i}(),Ib=function(i){function e(t){var n=this;if(typeof t==\"number\"){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];t={width:r,height:o,scaleMode:s,resolution:a}}return t.width=t.width||100,t.height=t.height||100,t.multisample=t.multisample!==void 0?t.multisample:zi.NONE,(n=i.call(this,null,t)||this).mipmap=sl.OFF,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new O0(n.realWidth,n.realHeight).addColorTexture(0,n),n.framebuffer.multisample=t.multisample,n.maskStack=[],n.filterStack=[{}],n}return ni(e,i),e.prototype.resize=function(t,n){this.framebuffer.resize(t*this.resolution,n*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),i.prototype.dispose.call(this)},e.prototype.destroy=function(){i.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(Cn),Ob=function(){function i(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return i.prototype.set=function(e,t,n){var r=t.width,o=t.height;if(n){var s=e.width/2/r,a=e.height/2/o,l=e.x/r+s,u=e.y/o+a;n=bi.add(n,bi.NW),this.x0=l+s*bi.uX(n),this.y0=u+a*bi.uY(n),n=bi.add(n,2),this.x1=l+s*bi.uX(n),this.y1=u+a*bi.uY(n),n=bi.add(n,2),this.x2=l+s*bi.uX(n),this.y2=u+a*bi.uY(n),n=bi.add(n,2),this.x3=l+s*bi.uX(n),this.y3=u+a*bi.uY(n)}else this.x0=e.x/r,this.y0=e.y/o,this.x1=(e.x+e.width)/r,this.y1=e.y/o,this.x2=(e.x+e.width)/r,this.y2=(e.y+e.height)/o,this.x3=e.x/r,this.y3=(e.y+e.height)/o;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},i.prototype.toString=function(){return\"[@pixi/core:TextureUvs x0=\"+this.x0+\" y0=\"+this.y0+\" x1=\"+this.x1+\" y1=\"+this.y1+\" x2=\"+this.x2+\" y2=\"+this.y2+\" x3=\"+this.x3+\" y3=\"+this.y3+\"]\"},i}(),Lb=new Ob,rn=function(i){function e(t,n,r,o,s,a){var l=i.call(this)||this;if(l.noFrame=!1,n||(l.noFrame=!0,n=new Tn(0,0,1,1)),t instanceof e&&(t=t.baseTexture),l.baseTexture=t,l._frame=n,l.trim=o,l.valid=!1,l._uvs=Lb,l.uvMatrix=null,l.orig=r||n,l._rotate=Number(s||0),s===!0)l._rotate=2;else if(l._rotate%2!=0)throw new Error(\"attempt to use diamond-shaped UVs. If you are sure, set rotation manually\");return l.defaultAnchor=a?new Ii(a.x,a.y):new Ii(0,0),l._updateID=0,l.textureCacheIds=[],t.valid?l.noFrame?t.valid&&l.onBaseTextureUpdated(t):l.frame=n:t.once(\"loaded\",l.onBaseTextureUpdated,l),l.noFrame&&t.on(\"update\",l.onBaseTextureUpdated,l),l}return ni(e,i),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit(\"update\",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var n=this.baseTexture.resource;n&&n.url&&Xr[n.url]&&e.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off(\"loaded\",this.onBaseTextureUpdated,this),this.baseTexture.off(\"update\",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var t=this._frame.clone(),n=this._frame===this.orig?t:this.orig.clone(),r=new e(this.baseTexture,!this.noFrame&&t,n,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(r._frame=t),r},e.prototype.updateUvs=function(){this._uvs===Lb&&(this._uvs=new Ob),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,n,r){n===void 0&&(n={}),r===void 0&&(r=Jt.STRICT_TEXTURE_CACHE);var o=typeof t==\"string\",s=null;if(o)s=t;else if(t instanceof Cn){if(!t.cacheId){var a=n&&n.pixiIdPrefix||\"pixiid\";t.cacheId=a+\"-\"+ll(),Cn.addToCache(t,t.cacheId)}s=t.cacheId}else t._pixiId||(a=n&&n.pixiIdPrefix||\"pixiid\",t._pixiId=a+\"_\"+ll()),s=t._pixiId;var l=Xr[s];if(o&&r&&!l)throw new Error('The cacheId \"'+s+'\" does not exist in TextureCache.');return l||t instanceof Cn?!l&&t instanceof Cn&&(l=new e(t),e.addToCache(l,s)):(n.resolution||(n.resolution=ap(t)),(l=new e(new Cn(t,n))).baseTexture.cacheId=s,Cn.addToCache(l.baseTexture,s),e.addToCache(l,s)),l},e.fromURL=function(t,n){var r=Object.assign({autoLoad:!1},n==null?void 0:n.resourceOptions),o=e.from(t,Object.assign({resourceOptions:r},n),!1),s=o.baseTexture.resource;return o.baseTexture.valid?Promise.resolve(o):s.load().then(function(){return Promise.resolve(o)})},e.fromBuffer=function(t,n,r,o){return new e(Cn.fromBuffer(t,n,r,o))},e.fromLoader=function(t,n,r,o){var s=new Cn(t,Object.assign({scaleMode:Jt.SCALE_MODE,resolution:ap(n)},o)),a=s.resource;a instanceof Cb&&(a.url=n);var l=new e(s);return r||(r=n),Cn.addToCache(l.baseTexture,r),e.addToCache(l,r),r!==n&&(Cn.addToCache(l.baseTexture,n),e.addToCache(l,n)),l.baseTexture.valid?Promise.resolve(l):new Promise(function(u){l.baseTexture.once(\"loaded\",function(){return u(l)})})},e.addToCache=function(t,n){n&&(t.textureCacheIds.indexOf(n)===-1&&t.textureCacheIds.push(n),Xr[n]&&console.warn(\"Texture added to the cache with an id [\"+n+\"] that already had an entry\"),Xr[n]=t)},e.removeFromCache=function(t){if(typeof t==\"string\"){var n=Xr[t];if(n){var r=n.textureCacheIds.indexOf(t);return r>-1&&n.textureCacheIds.splice(r,1),delete Xr[t],n}}else if(t&&t.textureCacheIds){for(var o=0;o<t.textureCacheIds.length;++o)Xr[t.textureCacheIds[o]]===t&&delete Xr[t.textureCacheIds[o]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,\"resolution\",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"frame\",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var n=t.x,r=t.y,o=t.width,s=t.height,a=n+o>this.baseTexture.width,l=r+s>this.baseTexture.height;if(a||l){var u=a&&l?\"and\":\"or\",h=\"X: \"+n+\" + \"+o+\" = \"+(n+o)+\" > \"+this.baseTexture.width,d=\"Y: \"+r+\" + \"+s+\" = \"+(r+s)+\" > \"+this.baseTexture.height;throw new Error(\"Texture Error: frame does not fit inside the base Texture dimensions: \"+h+\" \"+u+\" \"+d)}this.valid=o&&s&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"rotate\",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"width\",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"height\",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},e}(_c.a);function Fm(i){i.destroy=function(){},i.on=function(){},i.once=function(){},i.emit=function(){}}rn.EMPTY=new rn(new Cn),Fm(rn.EMPTY),Fm(rn.EMPTY.baseTexture),rn.WHITE=function(){var i=document.createElement(\"canvas\");i.width=16,i.height=16;var e=i.getContext(\"2d\");return e.fillStyle=\"white\",e.fillRect(0,0,16,16),new rn(new Cn(new Rb(i)))}(),Fm(rn.WHITE),Fm(rn.WHITE.baseTexture);var Ao=function(i){function e(t,n){var r=i.call(this,t,n)||this;return r.valid=!0,r.filterFrame=null,r.filterPoolKey=null,r.updateUvs(),r}return ni(e,i),Object.defineProperty(e.prototype,\"framebuffer\",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"multisample\",{get:function(){return this.framebuffer.multisample},set:function(t){this.framebuffer.multisample=t},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,n,r){r===void 0&&(r=!0);var o=this.baseTexture.resolution,s=Math.round(t*o)/o,a=Math.round(n*o)/o;this.valid=s>0&&a>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=a,r&&this.baseTexture.resize(s,a),this.updateUvs()},e.prototype.setResolution=function(t){var n=this.baseTexture;n.resolution!==t&&(n.setResolution(t),this.resize(n.width,n.height,!1))},e.create=function(t){for(var n=arguments,r=[],o=1;o<arguments.length;o++)r[o-1]=n[o];return typeof t==\"number\"&&(yc(\"6.0.0\",\"Arguments (width, height, scaleMode, resolution) have been deprecated.\"),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new e(new Ib(t))},e}(rn),y2=function(){function i(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return i.prototype.createTexture=function(e,t,n){n===void 0&&(n=zi.NONE);var r=new Ib(Object.assign({width:e,height:t,resolution:1,multisample:n},this.textureOptions));return new Ao(r)},i.prototype.getOptimalTexture=function(e,t,n,r){var o;n===void 0&&(n=1),r===void 0&&(r=zi.NONE),e=Math.ceil(e*n),t=Math.ceil(t*n),this.enableFullScreen&&e===this._pixelsWidth&&t===this._pixelsHeight?o=r>1?-r:-1:(o=((65535&(e=sp(e)))<<16|65535&(t=sp(t)))>>>0,r>1&&(o+=4294967296*r)),this.texturePool[o]||(this.texturePool[o]=[]);var s=this.texturePool[o].pop();return s||(s=this.createTexture(e,t,r)),s.filterPoolKey=o,s.setResolution(n),s},i.prototype.getFilterTexture=function(e,t,n){var r=this.getOptimalTexture(e.width,e.height,t||e.resolution,n||zi.NONE);return r.filterFrame=e.filterFrame,r},i.prototype.returnTexture=function(e){var t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)},i.prototype.returnFilterTexture=function(e){this.returnTexture(e)},i.prototype.clear=function(e){if(e=e!==!1)for(var t in this.texturePool){var n=this.texturePool[t];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0)}this.texturePool={}},i.prototype.setScreenSize=function(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){for(var t in this.enableFullScreen=e.width>0&&e.height>0,this.texturePool)if(Number(t)<0){var n=this.texturePool[t];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}},i.SCREEN_KEY=-1,i}(),Nb=function(){function i(e,t,n,r,o,s,a){t===void 0&&(t=0),n===void 0&&(n=!1),r===void 0&&(r=sn.FLOAT),this.buffer=e,this.size=t,this.normalized=n,this.type=r,this.stride=o,this.start=s,this.instance=a}return i.prototype.destroy=function(){this.buffer=null},i.from=function(e,t,n,r,o){return new i(e,t,n,r,o)},i}(),x2=0,Wi=function(){function i(e,t,n){t===void 0&&(t=!0),n===void 0&&(n=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=t,this.id=x2++,this.disposeRunner=new xr(\"disposeBuffer\")}return i.prototype.update=function(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++},i.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},i.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(i.prototype,\"index\",{get:function(){return this.type===Ns.ELEMENT_ARRAY_BUFFER},set:function(e){this.type=e?Ns.ELEMENT_ARRAY_BUFFER:Ns.ARRAY_BUFFER},enumerable:!1,configurable:!0}),i.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new i(e)},i}(),b2={Float32Array,Uint32Array,Int32Array,Uint8Array},Db={5126:4,5123:2,5121:1},w2=0,S2={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},bc=function(){function i(e,t){e===void 0&&(e=[]),t===void 0&&(t={}),this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=w2++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new xr(\"disposeGeometry\"),this.refCount=0}return i.prototype.addAttribute=function(e,t,n,r,o,s,a,l){if(n===void 0&&(n=0),r===void 0&&(r=!1),l===void 0&&(l=!1),!t)throw new Error(\"You must pass a buffer when creating an attribute\");t instanceof Wi||(t instanceof Array&&(t=new Float32Array(t)),t=new Wi(t));var u=e.split(\"|\");if(u.length>1){for(var h=0;h<u.length;h++)this.addAttribute(u[h],t,n,r,o);return this}var d=this.buffers.indexOf(t);return d===-1&&(this.buffers.push(t),d=this.buffers.length-1),this.attributes[e]=new Nb(d,n,r,o,s,a,l),this.instanced=this.instanced||l,this},i.prototype.getAttribute=function(e){return this.attributes[e]},i.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},i.prototype.addIndex=function(e){return e instanceof Wi||(e instanceof Array&&(e=new Uint16Array(e)),e=new Wi(e)),e.type=Ns.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.indexOf(e)===-1&&this.buffers.push(e),this},i.prototype.getIndex=function(){return this.indexBuffer},i.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var e,t=[],n=[],r=new Wi;for(e in this.attributes){var o=this.attributes[e],s=this.buffers[o.buffer];t.push(s.data),n.push(o.size*Db[o.type]/4),o.buffer=0}for(r.data=function(a,l){for(var u=0,h=0,d={},p=0;p<a.length;p++)h+=l[p],u+=a[p].length;var m=new ArrayBuffer(4*u),g=null,_=0;for(p=0;p<a.length;p++){var y=l[p],w=a[p],R=Rm(w);d[R]||(d[R]=new b2[R](m)),g=d[R];for(var F=0;F<w.length;F++)g[(F/y|0)*h+_+F%y]=w[F];_+=y}return new Float32Array(m)}(t,n),e=0;e<this.buffers.length;e++)this.buffers[e]!==this.indexBuffer&&this.buffers[e].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},i.prototype.getSize=function(){for(var e in this.attributes){var t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},i.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},i.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},i.prototype.clone=function(){for(var e=new i,t=0;t<this.buffers.length;t++)e.buffers[t]=new Wi(this.buffers[t].data.slice(0));for(var t in this.attributes){var n=this.attributes[t];e.attributes[t]=new Nb(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Ns.ELEMENT_ARRAY_BUFFER),e},i.merge=function(e){for(var t,n=new i,r=[],o=[],s=[],a=0;a<e.length;a++){t=e[a];for(var l=0;l<t.buffers.length;l++)o[l]=o[l]||0,o[l]+=t.buffers[l].data.length,s[l]=0}for(a=0;a<t.buffers.length;a++)r[a]=new S2[Rm(t.buffers[a].data)](o[a]),n.buffers[a]=new Wi(r[a]);for(a=0;a<e.length;a++)for(t=e[a],l=0;l<t.buffers.length;l++)r[l].set(t.buffers[l].data,s[l]),s[l]+=t.buffers[l].data.length;if(n.attributes=t.attributes,t.indexBuffer){n.indexBuffer=n.buffers[t.buffers.indexOf(t.indexBuffer)],n.indexBuffer.type=Ns.ELEMENT_ARRAY_BUFFER;var u=0,h=0,d=0,p=0;for(a=0;a<t.buffers.length;a++)if(t.buffers[a]!==t.indexBuffer){p=a;break}for(var a in t.attributes){var m=t.attributes[a];(0|m.buffer)===p&&(h+=m.size*Db[m.type]/4)}for(a=0;a<e.length;a++){var g=e[a].indexBuffer.data;for(l=0;l<g.length;l++)n.indexBuffer.data[l+d]+=u;u+=e[a].buffers[p].data.length/h,d+=g.length}}return n},i}(),T2=function(i){function e(){var t=i.call(this)||this;return t.addAttribute(\"aVertexPosition\",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}return ni(e,i),e}(bc),Fb=function(i){function e(){var t=i.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new Wi(t.vertices),t.uvBuffer=new Wi(t.uvs),t.addAttribute(\"aVertexPosition\",t.vertexBuffer).addAttribute(\"aTextureCoord\",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}return ni(e,i),e.prototype.map=function(t,n){var r=0,o=0;return this.uvs[0]=r,this.uvs[1]=o,this.uvs[2]=r+n.width/t.width,this.uvs[3]=o,this.uvs[4]=r+n.width/t.width,this.uvs[5]=o+n.height/t.height,this.uvs[6]=r,this.uvs[7]=o+n.height/t.height,r=n.x,o=n.y,this.vertices[0]=r,this.vertices[1]=o,this.vertices[2]=r+n.width,this.vertices[3]=o,this.vertices[4]=r+n.width,this.vertices[5]=o+n.height,this.vertices[6]=r,this.vertices[7]=o+n.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(bc),E2=0,Cu=function(){function i(e,t,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=E2++,this.static=!!t,this.ubo=!!n,e instanceof Wi?(this.buffer=e,this.buffer.type=Ns.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new Wi(new Float32Array(1)),this.buffer.type=Ns.UNIFORM_BUFFER,this.autoManage=!0))}return i.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},i.prototype.add=function(e,t,n){if(this.ubo)throw new Error(\"[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them\");this.uniforms[e]=new i(t,n)},i.from=function(e,t,n){return new i(e,t,n)},i.uboFrom=function(e,t){return new i(e,t==null||t,!0)},i}(),M2=function(){function i(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=zi.NONE,this.sourceFrame=new Tn,this.destinationFrame=new Tn,this.bindingSourceFrame=new Tn,this.bindingDestinationFrame=new Tn,this.filters=[],this.transform=null}return i.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},i}(),Bm=[new Ii,new Ii,new Ii,new Ii],L0=new Oi,A2=function(){function i(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new y2,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new T2,this.quadUv=new Fb,this.tempRect=new Tn,this.activeState={},this.globalUniforms=new Cu({outputFrame:new Tn,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return i.prototype.push=function(e,t){for(var n=this.renderer,r=this.defaultFilterStack,o=this.statePool.pop()||new M2,s=this.renderer.renderTexture,a=t[0].resolution,l=t[0].multisample,u=t[0].padding,h=t[0].autoFit,d=t[0].legacy,p=1;p<t.length;p++){var m=t[p];a=Math.min(a,m.resolution),l=Math.min(l,m.multisample),u=this.useMaxPadding?Math.max(u,m.padding):u+m.padding,h=h&&m.autoFit,d=d||m.legacy}if(r.length===1&&(this.defaultFilterStack[0].renderTexture=s.current),r.push(o),o.resolution=a,o.multisample=l,o.legacy=d,o.target=e,o.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),o.sourceFrame.pad(u),h){var g=this.tempRect.copyFrom(s.sourceFrame);n.projection.transform&&this.transformAABB(L0.copyFrom(n.projection.transform).invert(),g),o.sourceFrame.fit(g)}this.roundFrame(o.sourceFrame,s.current?s.current.resolution:n.resolution,s.sourceFrame,s.destinationFrame,n.projection.transform),o.renderTexture=this.getOptimalFilterTexture(o.sourceFrame.width,o.sourceFrame.height,a,l),o.filters=t,o.destinationFrame.width=o.renderTexture.width,o.destinationFrame.height=o.renderTexture.height;var _=this.tempRect;_.x=0,_.y=0,_.width=o.sourceFrame.width,_.height=o.sourceFrame.height,o.renderTexture.filterFrame=o.sourceFrame,o.bindingSourceFrame.copyFrom(s.sourceFrame),o.bindingDestinationFrame.copyFrom(s.destinationFrame),o.transform=n.projection.transform,n.projection.transform=null,s.bind(o.renderTexture,o.sourceFrame,_),n.framebuffer.clear(0,0,0,0)},i.prototype.pop=function(){var e=this.defaultFilterStack,t=e.pop(),n=t.filters;this.activeState=t;var r=this.globalUniforms.uniforms;r.outputFrame=t.sourceFrame,r.resolution=t.resolution;var o=r.inputSize,s=r.inputPixel,a=r.inputClamp;if(o[0]=t.destinationFrame.width,o[1]=t.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],s[0]=Math.round(o[0]*t.resolution),s[1]=Math.round(o[1]*t.resolution),s[2]=1/s[0],s[3]=1/s[1],a[0]=.5*s[2],a[1]=.5*s[3],a[2]=t.sourceFrame.width*o[2]-.5*s[2],a[3]=t.sourceFrame.height*o[3]-.5*s[3],t.legacy){var l=r.filterArea;l[0]=t.destinationFrame.width,l[1]=t.destinationFrame.height,l[2]=t.sourceFrame.x,l[3]=t.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();var u=e[e.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,t.renderTexture,u.renderTexture,al.BLEND,t),this.returnFilterTexture(t.renderTexture);else{var h=t.renderTexture,d=this.getOptimalFilterTexture(h.width,h.height,t.resolution);d.filterFrame=h.filterFrame;var p=0;for(p=0;p<n.length-1;++p){p===1&&t.multisample>1&&((d=this.getOptimalFilterTexture(h.width,h.height,t.resolution)).filterFrame=h.filterFrame),n[p].apply(this,h,d,al.CLEAR,t);var m=h;h=d,d=m}n[p].apply(this,h,u.renderTexture,al.BLEND,t),p>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(h),this.returnFilterTexture(d)}t.clear(),this.statePool.push(t)},i.prototype.bindAndClear=function(e,t){t===void 0&&(t=al.CLEAR);var n=this.renderer,r=n.renderTexture,o=n.state;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e&&e.filterFrame){var s=this.tempRect;s.x=0,s.y=0,s.width=e.filterFrame.width,s.height=e.filterFrame.height,r.bind(e,e.filterFrame,s)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var a=1&o.stateId||this.forceClear;(t===al.CLEAR||t===al.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)},i.prototype.applyFilter=function(e,t,n,r){var o=this.renderer;o.state.set(e.state),this.bindAndClear(n,r),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,o.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(ss.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(ss.TRIANGLE_STRIP))},i.prototype.calculateSpriteMatrix=function(e,t){var n=this.activeState,r=n.sourceFrame,o=n.destinationFrame,s=t._texture.orig,a=e.set(o.width,0,0,o.height,r.x,r.y),l=t.worldTransform.copyTo(Oi.TEMP_MATRIX);return l.invert(),a.prepend(l),a.scale(1/s.width,1/s.height),a.translate(t.anchor.x,t.anchor.y),a},i.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},i.prototype.getOptimalFilterTexture=function(e,t,n,r){return n===void 0&&(n=1),r===void 0&&(r=zi.NONE),this.texturePool.getOptimalTexture(e,t,n,r)},i.prototype.getFilterTexture=function(e,t,n){if(typeof e==\"number\"){var r=e;e=t,t=r}e=e||this.activeState.renderTexture;var o=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,n||zi.NONE);return o.filterFrame=e.filterFrame,o},i.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},i.prototype.emptyPool=function(){this.texturePool.clear(!0)},i.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},i.prototype.transformAABB=function(e,t){var n=Bm[0],r=Bm[1],o=Bm[2],s=Bm[3];n.set(t.left,t.top),r.set(t.left,t.bottom),o.set(t.right,t.top),s.set(t.right,t.bottom),e.apply(n,n),e.apply(r,r),e.apply(o,o),e.apply(s,s);var a=Math.min(n.x,r.x,o.x,s.x),l=Math.min(n.y,r.y,o.y,s.y),u=Math.max(n.x,r.x,o.x,s.x),h=Math.max(n.y,r.y,o.y,s.y);t.x=a,t.y=l,t.width=u-a,t.height=h-l},i.prototype.roundFrame=function(e,t,n,r,o){if(o){var s=o.a,a=o.b,l=o.c,u=o.d;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(s)>1e-4||Math.abs(u)>1e-4))return}(o=o?L0.copyFrom(o):L0.identity()).translate(-n.x,-n.y).scale(r.width/n.width,r.height/n.height).translate(r.x,r.y),this.transformAABB(o,e),e.ceil(t),this.transformAABB(o.invert(),e)},i}(),km=function(){function i(e){this.renderer=e}return i.prototype.flush=function(){},i.prototype.destroy=function(){this.renderer=null},i.prototype.start=function(){},i.prototype.stop=function(){this.flush()},i.prototype.render=function(e){},i}(),R2=function(){function i(e){this.renderer=e,this.emptyRenderer=new km(e),this.currentRenderer=this.emptyRenderer}return i.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},i.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},i.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},i.prototype.copyBoundTextures=function(e,t){for(var n=this.renderer.texture.boundTextures,r=t-1;r>=0;--r)e[r]=n[r]||null,e[r]&&(e[r]._batchLocation=r)},i.prototype.boundArray=function(e,t,n,r){for(var o=e.elements,s=e.ids,a=e.count,l=0,u=0;u<a;u++){var h=o[u],d=h._batchLocation;if(d>=0&&d<r&&t[d]===h)s[u]=d;else for(;l<r;){var p=t[l];if(!p||p._batchEnabled!==n||p._batchLocation!==l){s[u]=l,h._batchLocation=l,t[l]=h;break}l++}}},i.prototype.destroy=function(){this.renderer=null},i}(),Bb=0,C2=function(){function i(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener(\"webglcontextlost\",this.handleContextLost,!1),e.view.addEventListener(\"webglcontextrestored\",this.handleContextRestored,!1)}return Object.defineProperty(i.prototype,\"isLost\",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),i.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=Bb++,e.isContextLost()&&e.getExtension(\"WEBGL_lose_context\")&&e.getExtension(\"WEBGL_lose_context\").restoreContext()},i.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=Bb++,this.renderer.runners.contextChange.emit(e)},i.prototype.initFromOptions=function(e){var t=this.createContext(this.renderer.view,e);this.initFromContext(t)},i.prototype.createContext=function(e,t){var n;if(Jt.PREFER_ENV>=Ca.WEBGL2&&(n=e.getContext(\"webgl2\",t)),n)this.webGLVersion=2;else if(this.webGLVersion=1,!(n=e.getContext(\"webgl\",t)||e.getContext(\"experimental-webgl\",t)))throw new Error(\"This browser does not support WebGL. Try using the canvas renderer\");return this.gl=n,this.getExtensions(),this.gl},i.prototype.getExtensions=function(){var e=this.gl,t={anisotropicFiltering:e.getExtension(\"EXT_texture_filter_anisotropic\"),floatTextureLinear:e.getExtension(\"OES_texture_float_linear\"),s3tc:e.getExtension(\"WEBGL_compressed_texture_s3tc\"),s3tc_sRGB:e.getExtension(\"WEBGL_compressed_texture_s3tc_srgb\"),etc:e.getExtension(\"WEBGL_compressed_texture_etc\"),etc1:e.getExtension(\"WEBGL_compressed_texture_etc1\"),pvrtc:e.getExtension(\"WEBGL_compressed_texture_pvrtc\")||e.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\"),atc:e.getExtension(\"WEBGL_compressed_texture_atc\"),astc:e.getExtension(\"WEBGL_compressed_texture_astc\")};this.webGLVersion===1?Object.assign(this.extensions,t,{drawBuffers:e.getExtension(\"WEBGL_draw_buffers\"),depthTexture:e.getExtension(\"WEBGL_depth_texture\"),loseContext:e.getExtension(\"WEBGL_lose_context\"),vertexArrayObject:e.getExtension(\"OES_vertex_array_object\")||e.getExtension(\"MOZ_OES_vertex_array_object\")||e.getExtension(\"WEBKIT_OES_vertex_array_object\"),uint32ElementIndex:e.getExtension(\"OES_element_index_uint\"),floatTexture:e.getExtension(\"OES_texture_float\"),floatTextureLinear:e.getExtension(\"OES_texture_float_linear\"),textureHalfFloat:e.getExtension(\"OES_texture_half_float\"),textureHalfFloatLinear:e.getExtension(\"OES_texture_half_float_linear\")}):this.webGLVersion===2&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension(\"EXT_color_buffer_float\")})},i.prototype.handleContextLost=function(e){e.preventDefault()},i.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},i.prototype.destroy=function(){var e=this.renderer.view;this.renderer=null,e.removeEventListener(\"webglcontextlost\",this.handleContextLost),e.removeEventListener(\"webglcontextrestored\",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},i.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},i.prototype.validateContext=function(e){var t=e.getContextAttributes(),n=\"WebGL2RenderingContext\"in self&&e instanceof self.WebGL2RenderingContext;n&&(this.webGLVersion=2),t.stencil||console.warn(\"Provided WebGL context does not have a stencil buffer, masks may not render correctly\");var r=n||!!e.getExtension(\"OES_element_index_uint\");this.supports.uint32Indices=r,r||console.warn(\"Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly\")},i}(),P2=function(i){this.framebuffer=i,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=zi.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},I2=new Tn,O2=function(){function i(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new O0(10,10),this.msaaSamples=null}return i.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Tn,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var t=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;Jt.PREFER_ENV===Ca.WEBGL_LEGACY&&(t=null,n=null),t?e.drawBuffers=function(r){return t.drawBuffersWEBGL(r)}:(this.hasMRT=!1,e.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},i.prototype.bind=function(e,t,n){n===void 0&&(n=0);var r=this.gl;if(e){var o=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,r.bindFramebuffer(r.FRAMEBUFFER,o.framebuffer)),o.mipLevel!==n&&(e.dirtyId++,e.dirtyFormat++,o.mipLevel=n),o.dirtyId!==e.dirtyId&&(o.dirtyId=e.dirtyId,o.dirtyFormat!==e.dirtyFormat?(o.dirtyFormat=e.dirtyFormat,o.dirtySize=e.dirtySize,this.updateFramebuffer(e,n)):o.dirtySize!==e.dirtySize&&(o.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var s=0;s<e.colorTextures.length;s++){var a=e.colorTextures[s];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){var l=t.width>>n,u=t.height>>n,h=l/t.width;this.setViewport(t.x*h,t.y*h,l,u)}else l=e.width>>n,u=e.height>>n,this.setViewport(0,0,l,u)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},i.prototype.setViewport=function(e,t,n,r){var o=this.viewport;e=Math.round(e),t=Math.round(t),n=Math.round(n),r=Math.round(r),o.width===n&&o.height===r&&o.x===e&&o.y===t||(o.x=e,o.y=t,o.width=n,o.height=r,this.gl.viewport(e,t,n,r))},Object.defineProperty(i.prototype,\"size\",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),i.prototype.clear=function(e,t,n,r,o){o===void 0&&(o=Em.COLOR|Em.DEPTH);var s=this.gl;s.clearColor(e,t,n,r),s.clear(o)},i.prototype.initFramebuffer=function(e){var t=this.gl,n=new P2(t.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n},i.prototype.resizeFramebuffer=function(e){var t=this.gl,n=e.glFramebuffers[this.CONTEXT_UID];n.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,n.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,t.RGBA8,e.width,e.height)),n.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,n.stencil),n.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,t.DEPTH24_STENCIL8,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height));var r=e.colorTextures,o=r.length;t.drawBuffers||(o=Math.min(o,1));for(var s=0;s<o;s++){var a=r[s],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0)}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)},i.prototype.updateFramebuffer=function(e,t){var n=this.gl,r=e.glFramebuffers[this.CONTEXT_UID],o=e.colorTextures,s=o.length;n.drawBuffers||(s=Math.min(s,1)),r.multisample>1&&this.canMultisampleFramebuffer(e)?(r.msaaBuffer=r.msaaBuffer||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,r.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.RGBA8,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,r.msaaBuffer)):r.msaaBuffer&&(n.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));for(var a=[],l=0;l<s;l++){var u=o[l],h=u.parentTextureArray||u;this.renderer.texture.bind(h,0),l===0&&r.msaaBuffer||(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+l,u.target,h._glTextures[this.CONTEXT_UID].texture,t),a.push(n.COLOR_ATTACHMENT0+l))}if(a.length>1&&n.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){var d=e.depthTexture;this.renderer.texture.bind(d,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,d._glTextures[this.CONTEXT_UID].texture,t)}!e.stencil&&!e.depth||e.depthTexture&&this.writeDepthTexture?r.stencil&&(n.deleteRenderbuffer(r.stencil),r.stencil=null):(r.stencil=r.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,r.stencil),r.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.DEPTH24_STENCIL8,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r.stencil))},i.prototype.canMultisampleFramebuffer=function(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture},i.prototype.detectSamples=function(e){var t=this.msaaSamples,n=zi.NONE;if(e<=1||t===null)return n;for(var r=0;r<t.length;r++)if(t[r]<=e){n=t[r];break}return n===1&&(n=zi.NONE),n},i.prototype.blit=function(e,t,n){var r=this.current,o=this.renderer,s=this.gl,a=this.CONTEXT_UID;if(o.context.webGLVersion===2&&r){var l=r.glFramebuffers[a];if(l){if(!e){if(!l.msaaBuffer)return;var u=r.colorTextures[0];if(!u)return;l.blitFramebuffer||(l.blitFramebuffer=new O0(r.width,r.height),l.blitFramebuffer.addColorTexture(0,u)),(e=l.blitFramebuffer).colorTextures[0]!==u&&(e.colorTextures[0]=u,e.dirtyId++,e.dirtyFormat++),e.width===r.width&&e.height===r.height||(e.width=r.width,e.height=r.height,e.dirtyId++,e.dirtySize++)}t||((t=I2).width=r.width,t.height=r.height),n||(n=t);var h=t.width===n.width&&t.height===n.height;this.bind(e),s.bindFramebuffer(s.READ_FRAMEBUFFER,l.framebuffer),s.blitFramebuffer(t.x,t.y,t.width,t.height,n.x,n.y,n.width,n.height,s.COLOR_BUFFER_BIT,h?s.NEAREST:s.LINEAR)}}},i.prototype.disposeFramebuffer=function(e,t){var n=e.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(n){delete e.glFramebuffers[this.CONTEXT_UID];var o=this.managedFramebuffers.indexOf(e);o>=0&&this.managedFramebuffers.splice(o,1),e.disposeRunner.remove(this),t||(r.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&r.deleteRenderbuffer(n.msaaBuffer),n.stencil&&r.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&n.blitFramebuffer.dispose()}},i.prototype.disposeAll=function(e){var t=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<t.length;n++)this.disposeFramebuffer(t[n],e)},i.prototype.forceStencil=function(){var e=this.current;if(e){var t=e.glFramebuffers[this.CONTEXT_UID];if(t&&!t.stencil){e.stencil=!0;var n=e.width,r=e.height,o=this.gl,s=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,s),t.msaaBuffer?o.renderbufferStorageMultisample(o.RENDERBUFFER,t.multisample,o.DEPTH24_STENCIL8,n,r):o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,n,r),t.stencil=s,o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,s)}}},i.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Tn},i.prototype.destroy=function(){this.renderer=null},i}(),N0={5126:4,5123:2,5121:1},L2=function(){function i(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return i.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.webGLVersion!==2){var n=this.renderer.context.extensions.vertexArrayObject;Jt.PREFER_ENV===Ca.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=function(){return n.createVertexArrayOES()},e.bindVertexArray=function(o){return n.bindVertexArrayOES(o)},e.deleteVertexArray=function(o){return n.deleteVertexArrayOES(o)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(t.webGLVersion!==2){var r=e.getExtension(\"ANGLE_instanced_arrays\");r?(e.vertexAttribDivisor=function(o,s){return r.vertexAttribDivisorANGLE(o,s)},e.drawElementsInstanced=function(o,s,a,l,u){return r.drawElementsInstancedANGLE(o,s,a,l,u)},e.drawArraysInstanced=function(o,s,a,l){return r.drawArraysInstancedANGLE(o,s,a,l)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=t.webGLVersion===2||!!t.extensions.uint32ElementIndex},i.prototype.bind=function(e,t){t=t||this.renderer.shader.shader;var n=this.gl,r=e.glVertexArrayObjects[this.CONTEXT_UID],o=!1;r||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=r={},o=!0);var s=r[t.program.id]||this.initGeometryVao(e,t,o);this._activeGeometry=e,this._activeVao!==s&&(this._activeVao=s,this.hasVao?n.bindVertexArray(s):this.activateVao(e,t.program)),this.updateBuffers()},i.prototype.reset=function(){this.unbind()},i.prototype.updateBuffers=function(){for(var e=this._activeGeometry,t=this.renderer.buffer,n=0;n<e.buffers.length;n++){var r=e.buffers[n];t.update(r)}},i.prototype.checkCompatibility=function(e,t){var n=e.attributes,r=t.attributeData;for(var o in r)if(!n[o])throw new Error('shader and geometry incompatible, geometry missing the \"'+o+'\" attribute')},i.prototype.getSignature=function(e,t){var n=e.attributes,r=t.attributeData,o=[\"g\",e.id];for(var s in n)r[s]&&o.push(s);return o.join(\"-\")},i.prototype.initGeometryVao=function(e,t,n){n===void 0&&(n=!0);var r=this.gl,o=this.CONTEXT_UID,s=this.renderer.buffer,a=t.program;a.glPrograms[o]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,a);var l=this.getSignature(e,a),u=e.glVertexArrayObjects[this.CONTEXT_UID],h=u[l];if(h)return u[a.id]=h,h;var d=e.buffers,p=e.attributes,m={},g={};for(var _ in d)m[_]=0,g[_]=0;for(var _ in p)!p[_].size&&a.attributeData[_]?p[_].size=a.attributeData[_].size:p[_].size||console.warn(\"PIXI Geometry attribute '\"+_+\"' size cannot be determined (likely the bound shader does not have the attribute)\"),m[p[_].buffer]+=p[_].size*N0[p[_].type];for(var _ in p){var y=p[_],w=y.size;y.stride===void 0&&(m[y.buffer]===w*N0[y.type]?y.stride=0:y.stride=m[y.buffer]),y.start===void 0&&(y.start=g[y.buffer],g[y.buffer]+=w*N0[y.type])}h=r.createVertexArray(),r.bindVertexArray(h);for(var R=0;R<d.length;R++){var F=d[R];s.bind(F),n&&F._glBuffers[o].refCount++}return this.activateVao(e,a),this._activeVao=h,u[a.id]=h,u[l]=h,h},i.prototype.disposeGeometry=function(e,t){var n;if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var r=e.glVertexArrayObjects[this.CONTEXT_UID],o=this.gl,s=e.buffers,a=(n=this.renderer)===null||n===void 0?void 0:n.buffer;if(e.disposeRunner.remove(this),r){if(a)for(var l=0;l<s.length;l++){var u=s[l]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount!==0||t||a.dispose(s[l],t))}if(!t){for(var h in r)if(h[0]===\"g\"){var d=r[h];this._activeVao===d&&this.unbind(),o.deleteVertexArray(d)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},i.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedGeometries),n=0;n<t.length;n++)this.disposeGeometry(this.managedGeometries[t[n]],e)},i.prototype.activateVao=function(e,t){var n=this.gl,r=this.CONTEXT_UID,o=this.renderer.buffer,s=e.buffers,a=e.attributes;e.indexBuffer&&o.bind(e.indexBuffer);var l=null;for(var u in a){var h=a[u],d=s[h.buffer],p=d._glBuffers[r];if(t.attributeData[u]){l!==p&&(o.bind(d),l=p);var m=t.attributeData[u].location;if(n.enableVertexAttribArray(m),n.vertexAttribPointer(m,h.size,h.type||n.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error(\"geometry error, GPU Instancing is not supported on this device\");n.vertexAttribDivisor(m,1)}}}},i.prototype.draw=function(e,t,n,r){var o=this.gl,s=this._activeGeometry;if(s.indexBuffer){var a=s.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?o.UNSIGNED_SHORT:o.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?s.instanced?o.drawElementsInstanced(e,t||s.indexBuffer.data.length,l,(n||0)*a,r||1):o.drawElements(e,t||s.indexBuffer.data.length,l,(n||0)*a):console.warn(\"unsupported index buffer type: uint32\")}else s.instanced?o.drawArraysInstanced(e,n,t||s.getSize(),r||1):o.drawArrays(e,n,t||s.getSize());return this},i.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},i.prototype.destroy=function(){this.renderer=null},i}(),N2=function(){function i(e){e===void 0&&(e=null),this.type=yr.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Jt.FILTER_MULTISAMPLE,this.enabled=!0,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._target=null}return Object.defineProperty(i.prototype,\"filter\",{get:function(){return this._filters?this._filters[0]:null},set:function(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null},enumerable:!1,configurable:!0}),i.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=yr.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},i.prototype.copyCountersOrReset=function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},i}();function kb(i,e,t){var n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}function Ub(i,e){var t=i.getShaderSource(e).split(`\n`).map(function(u,h){return h+\": \"+u}),n=i.getShaderInfoLog(e),r=n.split(`\n`),o={},s=r.map(function(u){return parseFloat(u.replace(/^ERROR\\: 0\\:([\\d]+)\\:.*$/,\"$1\"))}).filter(function(u){return!(!u||o[u])&&(o[u]=!0,!0)}),a=[\"\"];s.forEach(function(u){t[u-1]=\"%c\"+t[u-1]+\"%c\",a.push(\"background: #FF0000; color:#FFFFFF; font-size: 10px\",\"font-size: 10px\")});var l=t.join(`\n`);a[0]=l,console.error(n),console.groupCollapsed(\"click to view full shader code\"),console.warn.apply(console,a),console.groupEnd()}function D0(i){for(var e=new Array(i),t=0;t<e.length;t++)e[t]=!1;return e}function Gb(i,e){switch(i){case\"float\":return 0;case\"vec2\":return new Float32Array(2*e);case\"vec3\":return new Float32Array(3*e);case\"vec4\":return new Float32Array(4*e);case\"int\":case\"uint\":case\"sampler2D\":case\"sampler2DArray\":return 0;case\"ivec2\":return new Int32Array(2*e);case\"ivec3\":return new Int32Array(3*e);case\"ivec4\":return new Int32Array(4*e);case\"uvec2\":return new Uint32Array(2*e);case\"uvec3\":return new Uint32Array(3*e);case\"uvec4\":return new Uint32Array(4*e);case\"bool\":return!1;case\"bvec2\":return D0(2*e);case\"bvec3\":return D0(3*e);case\"bvec4\":return D0(4*e);case\"mat2\":return new Float32Array([1,0,0,1]);case\"mat3\":return new Float32Array([1,0,0,0,1,0,0,0,1]);case\"mat4\":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var Um,Hb={},up=Hb;function D2(){if(!Um){Um=Ls.MEDIUM;var i=function(){if(up===Hb||up&&up.isContextLost()){var t=document.createElement(\"canvas\"),n=void 0;Jt.PREFER_ENV>=Ca.WEBGL2&&(n=t.getContext(\"webgl2\",{})),n||((n=t.getContext(\"webgl\",{})||t.getContext(\"experimental-webgl\",{}))?n.getExtension(\"WEBGL_draw_buffers\"):n=null),up=n}return up}();if(i&&i.getShaderPrecisionFormat){var e=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);Um=e.precision?Ls.HIGH:Ls.MEDIUM}}return Um}function zb(i,e,t){if(i.substring(0,9)!==\"precision\"){var n=e;return e===Ls.HIGH&&t!==Ls.HIGH&&(n=Ls.MEDIUM),\"precision \"+n+` float;\n`+i}return t!==Ls.HIGH&&i.substring(0,15)===\"precision highp\"?i.replace(\"precision highp\",\"precision mediump\"):i}var F2={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function jb(i){return F2[i]}var Gm=null,Vb={FLOAT:\"float\",FLOAT_VEC2:\"vec2\",FLOAT_VEC3:\"vec3\",FLOAT_VEC4:\"vec4\",INT:\"int\",INT_VEC2:\"ivec2\",INT_VEC3:\"ivec3\",INT_VEC4:\"ivec4\",UNSIGNED_INT:\"uint\",UNSIGNED_INT_VEC2:\"uvec2\",UNSIGNED_INT_VEC3:\"uvec3\",UNSIGNED_INT_VEC4:\"uvec4\",BOOL:\"bool\",BOOL_VEC2:\"bvec2\",BOOL_VEC3:\"bvec3\",BOOL_VEC4:\"bvec4\",FLOAT_MAT2:\"mat2\",FLOAT_MAT3:\"mat3\",FLOAT_MAT4:\"mat4\",SAMPLER_2D:\"sampler2D\",INT_SAMPLER_2D:\"sampler2D\",UNSIGNED_INT_SAMPLER_2D:\"sampler2D\",SAMPLER_CUBE:\"samplerCube\",INT_SAMPLER_CUBE:\"samplerCube\",UNSIGNED_INT_SAMPLER_CUBE:\"samplerCube\",SAMPLER_2D_ARRAY:\"sampler2DArray\",INT_SAMPLER_2D_ARRAY:\"sampler2DArray\",UNSIGNED_INT_SAMPLER_2D_ARRAY:\"sampler2DArray\"};function Wb(i,e){if(!Gm){var t=Object.keys(Vb);Gm={};for(var n=0;n<t.length;++n){var r=t[n];Gm[i[r]]=Vb[r]}}return Gm[e]}var wc=[{test:function(i){return i.type===\"float\"&&i.size===1},code:function(i){return`\n            if(uv[\"`+i+'\"] !== ud[\"'+i+`\"].value)\n            {\n                ud[\"`+i+'\"].value = uv[\"'+i+`\"]\n                gl.uniform1f(ud[\"`+i+'\"].location, uv[\"'+i+`\"])\n            }\n            `}},{test:function(i){return(i.type===\"sampler2D\"||i.type===\"samplerCube\"||i.type===\"sampler2DArray\")&&i.size===1&&!i.isArray},code:function(i){return`t = syncData.textureCount++;\n\n            renderer.texture.bind(uv[\"`+i+`\"], t);\n\n            if(ud[\"`+i+`\"].value !== t)\n            {\n                ud[\"`+i+`\"].value = t;\n                gl.uniform1i(ud[\"`+i+`\"].location, t);\n; // eslint-disable-line max-len\n            }`}},{test:function(i,e){return i.type===\"mat3\"&&i.size===1&&e.a!==void 0},code:function(i){return`\n            gl.uniformMatrix3fv(ud[\"`+i+'\"].location, false, uv[\"'+i+`\"].toArray(true));\n            `},codeUbo:function(i){return`\n                var `+i+\"_matrix = uv.\"+i+`.toArray(true);\n\n                data[offset] = `+i+`_matrix[0];\n                data[offset+1] = `+i+`_matrix[1];\n                data[offset+2] = `+i+`_matrix[2];\n        \n                data[offset + 4] = `+i+`_matrix[3];\n                data[offset + 5] = `+i+`_matrix[4];\n                data[offset + 6] = `+i+`_matrix[5];\n        \n                data[offset + 8] = `+i+`_matrix[6];\n                data[offset + 9] = `+i+`_matrix[7];\n                data[offset + 10] = `+i+`_matrix[8];\n            `}},{test:function(i,e){return i.type===\"vec2\"&&i.size===1&&e.x!==void 0},code:function(i){return`\n                cv = ud[\"`+i+`\"].value;\n                v = uv[\"`+i+`\"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud[\"`+i+`\"].location, v.x, v.y);\n                }`},codeUbo:function(i){return`\n                v = uv.`+i+`;\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            `}},{test:function(i){return i.type===\"vec2\"&&i.size===1},code:function(i){return`\n                cv = ud[\"`+i+`\"].value;\n                v = uv[\"`+i+`\"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud[\"`+i+`\"].location, v[0], v[1]);\n                }\n            `}},{test:function(i,e){return i.type===\"vec4\"&&i.size===1&&e.width!==void 0},code:function(i){return`\n                cv = ud[\"`+i+`\"].value;\n                v = uv[\"`+i+`\"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud[\"`+i+`\"].location, v.x, v.y, v.width, v.height)\n                }`},codeUbo:function(i){return`\n                    v = uv.`+i+`;\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                `}},{test:function(i){return i.type===\"vec4\"&&i.size===1},code:function(i){return`\n                cv = ud[\"`+i+`\"].value;\n                v = uv[\"`+i+`\"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud[\"`+i+`\"].location, v[0], v[1], v[2], v[3])\n                }`}}],B2={float:`\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }`,vec2:`\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }`,vec3:`\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }`,vec4:`\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }`,int:`\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }`,ivec2:`\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }`,ivec3:`\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }`,ivec4:`\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }`,uint:`\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }`,uvec2:`\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }`,uvec3:`\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }`,uvec4:`\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }`,bool:`\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }`,bvec2:`\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }`,bvec3:`\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }`,bvec4:`\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }`,mat2:\"gl.uniformMatrix2fv(location, false, v)\",mat3:\"gl.uniformMatrix3fv(location, false, v)\",mat4:\"gl.uniformMatrix4fv(location, false, v)\",sampler2D:\"gl.uniform1i(location, v)\",samplerCube:\"gl.uniform1i(location, v)\",sampler2DArray:\"gl.uniform1i(location, v)\"},k2={float:\"gl.uniform1fv(location, v)\",vec2:\"gl.uniform2fv(location, v)\",vec3:\"gl.uniform3fv(location, v)\",vec4:\"gl.uniform4fv(location, v)\",mat4:\"gl.uniformMatrix4fv(location, false, v)\",mat3:\"gl.uniformMatrix3fv(location, false, v)\",mat2:\"gl.uniformMatrix2fv(location, false, v)\",int:\"gl.uniform1iv(location, v)\",ivec2:\"gl.uniform2iv(location, v)\",ivec3:\"gl.uniform3iv(location, v)\",ivec4:\"gl.uniform4iv(location, v)\",uint:\"gl.uniform1uiv(location, v)\",uvec2:\"gl.uniform2uiv(location, v)\",uvec3:\"gl.uniform3uiv(location, v)\",uvec4:\"gl.uniform4uiv(location, v)\",bool:\"gl.uniform1iv(location, v)\",bvec2:\"gl.uniform2iv(location, v)\",bvec3:\"gl.uniform3iv(location, v)\",bvec4:\"gl.uniform4iv(location, v)\",sampler2D:\"gl.uniform1iv(location, v)\",samplerCube:\"gl.uniform1iv(location, v)\",sampler2DArray:\"gl.uniform1iv(location, v)\"},hp,U2=[\"precision mediump float;\",\"void main(void){\",\"float test = 0.1;\",\"%forloop%\",\"gl_FragColor = vec4(0.0);\",\"}\"].join(`\n`);function G2(i){for(var e=\"\",t=0;t<i;++t)t>0&&(e+=`\nelse `),t<i-1&&(e+=\"if(test == \"+t+\".0){}\");return e}var H2=0,Hm={},cp=function(){function i(e,t,n){n===void 0&&(n=\"pixi-shader\"),this.id=H2++,this.vertexSrc=e||i.defaultVertexSrc,this.fragmentSrc=t||i.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!==\"#version\"&&(n=n.replace(/\\s+/g,\"-\"),Hm[n]?(Hm[n]++,n+=\"-\"+Hm[n]):Hm[n]=1,this.vertexSrc=\"#define SHADER_NAME \"+n+`\n`+this.vertexSrc,this.fragmentSrc=\"#define SHADER_NAME \"+n+`\n`+this.fragmentSrc,this.vertexSrc=zb(this.vertexSrc,Jt.PRECISION_VERTEX,Ls.HIGH),this.fragmentSrc=zb(this.fragmentSrc,Jt.PRECISION_FRAGMENT,D2())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(i,\"defaultVertexSrc\",{get:function(){return`attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n`},enumerable:!1,configurable:!0}),Object.defineProperty(i,\"defaultFragmentSrc\",{get:function(){return`varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}`},enumerable:!1,configurable:!0}),i.from=function(e,t,n){var r=e+t,o=S0[r];return o||(S0[r]=o=new i(e,t,n)),o},i}(),Oa=function(){function i(e,t){this.uniformBindCount=0,this.program=e,this.uniformGroup=t?t instanceof Cu?t:new Cu(t):new Cu({})}return i.prototype.checkUniformExists=function(e,t){if(t.uniforms[e])return!0;for(var n in t.uniforms){var r=t.uniforms[n];if(r.group&&this.checkUniformExists(e,r))return!0}return!1},i.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(i.prototype,\"uniforms\",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),i.from=function(e,t,n){return new i(cp.from(e,t),n)},i}(),Pu=function(){function i(){this.data=0,this.blendMode=Qt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(i.prototype,\"blend\",{get:function(){return!!(1&this.data)},set:function(e){!!(1&this.data)!==e&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"offsets\",{get:function(){return!!(2&this.data)},set:function(e){!!(2&this.data)!==e&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"culling\",{get:function(){return!!(4&this.data)},set:function(e){!!(4&this.data)!==e&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"depthTest\",{get:function(){return!!(8&this.data)},set:function(e){!!(8&this.data)!==e&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"depthMask\",{get:function(){return!!(32&this.data)},set:function(e){!!(32&this.data)!==e&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"clockwiseFrontFace\",{get:function(){return!!(16&this.data)},set:function(e){!!(16&this.data)!==e&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"blendMode\",{get:function(){return this._blendMode},set:function(e){this.blend=e!==Qt.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"polygonOffset\",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e},enumerable:!1,configurable:!0}),i.prototype.toString=function(){return\"[@pixi/core:State blendMode=\"+this.blendMode+\" clockwiseFrontFace=\"+this.clockwiseFrontFace+\" culling=\"+this.culling+\" depthMask=\"+this.depthMask+\" polygonOffset=\"+this.polygonOffset+\"]\"},i.for2d=function(){var e=new i;return e.depthTest=!1,e.blend=!0,e},i}(),Nr=function(i){function e(t,n,r){var o=this,s=cp.from(t||e.defaultVertexSrc,n||e.defaultFragmentSrc);return(o=i.call(this,s,r)||this).padding=0,o.resolution=Jt.FILTER_RESOLUTION,o.multisample=Jt.FILTER_MULTISAMPLE,o.enabled=!0,o.autoFit=!0,o.state=new Pu,o}return ni(e,i),e.prototype.apply=function(t,n,r,o,s){t.applyFilter(this,n,r,o)},Object.defineProperty(e.prototype,\"blendMode\",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"resolution\",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,\"defaultVertexSrc\",{get:function(){return`attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n`},enumerable:!1,configurable:!0}),Object.defineProperty(e,\"defaultFragmentSrc\",{get:function(){return`varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n`},enumerable:!1,configurable:!0}),e}(Oa),Xb=new Oi,F0=function(){function i(e,t){this._texture=e,this.mapCoord=new Oi,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=t===void 0?.5:t,this.isSimple=!1}return Object.defineProperty(i.prototype,\"texture\",{get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1},enumerable:!1,configurable:!0}),i.prototype.multiplyUvs=function(e,t){t===void 0&&(t=e);for(var n=this.mapCoord,r=0;r<e.length;r+=2){var o=e[r],s=e[r+1];t[r]=o*n.a+s*n.c+n.tx,t[r+1]=o*n.b+s*n.d+n.ty}return t},i.prototype.update=function(e){var t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;var n=t._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var r=t.orig,o=t.trim;o&&(Xb.set(r.width/o.width,0,0,r.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(Xb));var s=t.baseTexture,a=this.uClampFrame,l=this.clampMargin/s.resolution,u=this.clampOffset;return a[0]=(t._frame.x+l+u)/s.width,a[1]=(t._frame.y+l+u)/s.height,a[2]=(t._frame.x+t._frame.width-l+u)/s.width,a[3]=(t._frame.y+t._frame.height-l+u)/s.height,this.uClampOffset[0]=u/s.realWidth,this.uClampOffset[1]=u/s.realHeight,this.isSimple=t._frame.width===s.width&&t._frame.height===s.height&&t.rotate===0,!0},i}(),z2=function(i){function e(t,n,r){var o=this,s=null;return typeof t!=\"string\"&&n===void 0&&r===void 0&&(s=t,t=void 0,n=void 0,r=void 0),(o=i.call(this,t||`attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n`,n||`varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n`,r)||this).maskSprite=s,o.maskMatrix=new Oi,o}return ni(e,i),Object.defineProperty(e.prototype,\"maskSprite\",{get:function(){return this._maskSprite},set:function(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(t,n,r,o){var s=this._maskSprite,a=s._texture;a.valid&&(a.uvMatrix||(a.uvMatrix=new F0(a,0)),a.uvMatrix.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,s).prepend(a.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=a.uvMatrix.uClampFrame,t.applyFilter(this,n,r,o))},e}(Nr),j2=function(){function i(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return i.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},i.prototype.push=function(e,t){var n=t;if(!n.isMaskData){var r=this.maskDataPool.pop()||new N2;r.pooled=!0,r.maskObject=t,n=r}var o=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(o),n.autoDetect&&this.detect(n),n._target=e,n.type!==yr.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case yr.SCISSOR:this.renderer.scissor.push(n);break;case yr.STENCIL:this.renderer.stencil.push(n);break;case yr.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n)}n.type===yr.SPRITE&&this.maskStack.push(n)},i.prototype.pop=function(e){var t=this.maskStack.pop();if(t&&t._target===e){if(t.enabled)switch(t.type){case yr.SCISSOR:this.renderer.scissor.pop();break;case yr.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case yr.SPRITE:this.popSpriteMask(t)}if(t.reset(),t.pooled&&this.maskDataPool.push(t),this.maskStack.length!==0){var n=this.maskStack[this.maskStack.length-1];n.type===yr.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}},i.prototype.detect=function(e){e.maskObject.isSprite?e.type=yr.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=yr.SCISSOR:e.type=yr.STENCIL},i.prototype.pushSpriteMask=function(e){var t,n,r=e.maskObject,o=e._target,s=e._filters;s||(s=this.alphaMaskPool[this.alphaMaskIndex])||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new z2]);var a,l,u=this.renderer,h=u.renderTexture;if(h.current){var d=h.current;a=e.resolution||d.resolution,l=(t=e.multisample)!==null&&t!==void 0?t:d.multisample}else a=e.resolution||u.resolution,l=(n=e.multisample)!==null&&n!==void 0?n:u.multisample;s[0].resolution=a,s[0].multisample=l,s[0].maskSprite=r;var p=o.filterArea;o.filterArea=r.getBounds(!0),u.filter.push(o,s),o.filterArea=p,e._filters||this.alphaMaskIndex++},i.prototype.popSpriteMask=function(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},i.prototype.destroy=function(){this.renderer=null},i}(),qb=function(){function i(e){this.renderer=e,this.maskStack=[],this.glConst=0}return i.prototype.getStackLength=function(){return this.maskStack.length},i.prototype.setMaskStack=function(e){var t=this.renderer.gl,n=this.getStackLength();this.maskStack=e;var r=this.getStackLength();r!==n&&(r===0?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))},i.prototype._useCurrent=function(){},i.prototype.destroy=function(){this.renderer=null,this.maskStack=null},i}(),Yb=new Oi,V2=function(i){function e(t){var n=i.call(this,t)||this;return n.glConst=WebGLRenderingContext.SCISSOR_TEST,n}return ni(e,i),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.calcScissorRect=function(t){if(!t._scissorRectLocal){var n=t._scissorRect,r=t.maskObject,o=this.renderer,s=o.renderTexture;r.renderable=!0;var a=r.getBounds();this.roundFrameToPixels(a,s.current?s.current.resolution:o.resolution,s.sourceFrame,s.destinationFrame,o.projection.transform),r.renderable=!1,n&&a.fit(n),t._scissorRectLocal=a}},e.isMatrixRotated=function(t){if(!t)return!1;var n=t.a,r=t.b,o=t.c,s=t.d;return(Math.abs(r)>1e-4||Math.abs(o)>1e-4)&&(Math.abs(n)>1e-4||Math.abs(s)>1e-4)},e.prototype.testScissor=function(t){var n=t.maskObject;if(!n.isFastRect||!n.isFastRect()||e.isMatrixRotated(n.worldTransform)||e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);var r=t._scissorRectLocal;return r.width>0&&r.height>0},e.prototype.roundFrameToPixels=function(t,n,r,o,s){e.isMatrixRotated(s)||((s=s?Yb.copyFrom(s):Yb.identity()).translate(-r.x,-r.y).scale(o.width/r.width,o.height/r.height).translate(o.x,o.y),this.renderer.filter.transformAABB(s,t),t.fit(o),t.x=Math.round(t.x*n),t.y=Math.round(t.y*n),t.width=Math.round(t.width*n),t.height=Math.round(t.height*n))},e.prototype.push=function(t){t._scissorRectLocal||this.calcScissorRect(t);var n=this.renderer.gl;t._scissorRect||n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t,n=this.maskStack[this.maskStack.length-1]._scissorRect;t=this.renderer.renderTexture.current?n.y:this.renderer.height-n.height-n.y,this.renderer.gl.scissor(n.x,t,n.width,n.height)},e}(qb),W2=function(i){function e(t){var n=i.call(this,t)||this;return n.glConst=WebGLRenderingContext.STENCIL_TEST,n}return ni(e,i),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var n=t.maskObject,r=this.renderer.gl,o=t._stencilCounter;o===0&&(this.renderer.framebuffer.forceStencil(),r.enable(r.STENCIL_TEST)),t._stencilCounter++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,o,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),n.renderable=!0,n.render(this.renderer),this.renderer.batch.flush(),n.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var n=this.renderer.gl;this.getStackLength()===0?(n.disable(n.STENCIL_TEST),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT)):(n.colorMask(!1,!1,!1,!1),n.stencilOp(n.KEEP,n.KEEP,n.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e}(qb),X2=function(){function i(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Oi,this.transform=null}return i.prototype.update=function(e,t,n,r){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,r),this.transform&&this.projectionMatrix.append(this.transform);var o=this.renderer;o.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,o.globalUniforms.update(),o.shader.shader&&o.shader.syncUniformGroup(o.shader.shader.uniforms.globals)},i.prototype.calculateProjection=function(e,t,n,r){var o=this.projectionMatrix,s=r?-1:1;o.identity(),o.a=1/t.width*2,o.d=s*(1/t.height*2),o.tx=-1-t.x*o.a,o.ty=-s-t.y*o.d},i.prototype.setTransform=function(e){},i.prototype.destroy=function(){this.renderer=null},i}(),Iu=new Tn,dp=new Tn,q2=function(){function i(e){this.renderer=e,this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Tn,this.destinationFrame=new Tn,this.viewportFrame=new Tn}return i.prototype.bind=function(e,t,n){e===void 0&&(e=null);var r,o,s,a=this.renderer;this.current=e,e?(s=(r=e.baseTexture).resolution,t||(Iu.width=e.frame.width,Iu.height=e.frame.height,t=Iu),n||(dp.x=e.frame.x,dp.y=e.frame.y,dp.width=t.width,dp.height=t.height,n=dp),o=r.framebuffer):(s=a.resolution,t||(Iu.width=a.screen.width,Iu.height=a.screen.height,t=Iu),n||((n=Iu).width=t.width,n.height=t.height));var l=this.viewportFrame;l.x=n.x*s,l.y=n.y*s,l.width=n.width*s,l.height=n.height*s,e||(l.y=a.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(n,t,s,!o),e?this.renderer.mask.setMaskStack(r.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(n)},i.prototype.clear=function(e,t){e=this.current?e||this.current.baseTexture.clearColor:e||this.clearColor;var n=this.destinationFrame,r=this.current?this.current.baseTexture:this.renderer.screen,o=n.width!==r.width||n.height!==r.height;if(o){var s=this.viewportFrame,a=s.x,l=s.y,u=s.width,h=s.height;a=Math.round(a),l=Math.round(l),u=Math.round(u),h=Math.round(h),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(a,l,u,h)}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],t),o&&this.renderer.scissor.pop()},i.prototype.resize=function(){this.bind(null)},i.prototype.reset=function(){this.bind(null)},i.prototype.destroy=function(){this.renderer=null},i}();function Y2(i,e,t,n,r){t.buffer.update(r)}var $2={float:`\n        data[offset] = v;\n    `,vec2:`\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    `,vec3:`\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    `,vec4:`\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    `,mat2:`\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    `,mat3:`\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    `,mat4:`\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    `},$b={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function J2(i,e){if(!i.autoManage)return{size:0,syncFunc:Y2};for(var t=function(R){for(var F=R.map(function(he){return{data:he,offset:0,dataLen:0,dirty:0}}),U=0,B=0,V=0,G=0;G<F.length;G++){var W=F[G];if(U=$b[W.data.type],W.data.size>1&&(U=Math.max(U,16)*W.data.size),W.dataLen=U,B%U!=0&&B<16){var ge=B%U%16;B+=ge,V+=ge}B+U>16?(V=16*Math.ceil(V/16),W.offset=V,V+=U,B=U):(W.offset=V,B+=U,V+=U)}return{uboElements:F,size:V=16*Math.ceil(V/16)}}(function(R,F){var U=[];for(var B in R)F[B]&&U.push(F[B]);return U.sort(function(V,G){return V.index-G.index}),U}(i.uniforms,e)),n=t.uboElements,r=t.size,o=[`\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    `],s=0;s<n.length;s++){for(var a=n[s],l=i.uniforms[a.data.name],u=a.data.name,h=!1,d=0;d<wc.length;d++){var p=wc[d];if(p.codeUbo&&p.test(a.data,l)){o.push(\"offset = \"+a.offset/4+\";\",wc[d].codeUbo(a.data.name,l)),h=!0;break}}if(!h)if(a.data.size>1){var m=jb(a.data.type),g=Math.max($b[a.data.type]/16,1),_=m/g,y=(4-_%4)%4;o.push(`\n                cv = ud.`+u+`.value;\n                v = uv.`+u+`;\n                offset = `+a.offset/4+`;\n\n                t = 0;\n\n                for(var i=0; i < `+a.data.size*g+`; i++)\n                {\n                    for(var j = 0; j < `+_+`; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += `+y+`;\n                }\n\n                `)}else{var w=$2[a.data.type];o.push(`\n                cv = ud.`+u+`.value;\n                v = uv.`+u+`;\n                offset = `+a.offset/4+`;\n                `+w+`;\n                `)}}return o.push(`\n       renderer.buffer.update(buffer);\n    `),{size:r,syncFunc:new Function(\"ud\",\"uv\",\"renderer\",\"syncData\",\"buffer\",o.join(`\n`))}}var Z2=function(){function i(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return i.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},i}();function K2(i,e){var t=kb(i,i.VERTEX_SHADER,e.vertexSrc),n=kb(i,i.FRAGMENT_SHADER,e.fragmentSrc),r=i.createProgram();if(i.attachShader(r,t),i.attachShader(r,n),i.linkProgram(r),i.getProgramParameter(r,i.LINK_STATUS)||function(u,h,d,p){u.getProgramParameter(h,u.LINK_STATUS)||(u.getShaderParameter(d,u.COMPILE_STATUS)||Ub(u,d),u.getShaderParameter(p,u.COMPILE_STATUS)||Ub(u,p),console.error(\"PixiJS Error: Could not initialize shader.\"),u.getProgramInfoLog(h)!==\"\"&&console.warn(\"PixiJS Warning: gl.getProgramInfoLog()\",u.getProgramInfoLog(h)))}(i,r,t,n),e.attributeData=function(u,h){for(var d={},p=h.getProgramParameter(u,h.ACTIVE_ATTRIBUTES),m=0;m<p;m++){var g=h.getActiveAttrib(u,m);if(g.name.indexOf(\"gl_\")!==0){var _=Wb(h,g.type),y={type:_,name:g.name,size:jb(_),location:h.getAttribLocation(u,g.name)};d[g.name]=y}}return d}(r,i),e.uniformData=function(u,h){for(var d={},p=h.getProgramParameter(u,h.ACTIVE_UNIFORMS),m=0;m<p;m++){var g=h.getActiveUniform(u,m),_=g.name.replace(/\\[.*?\\]$/,\"\"),y=!!g.name.match(/\\[.*?\\]$/),w=Wb(h,g.type);d[_]={name:_,index:m,type:w,size:g.size,isArray:y,value:Gb(w,g.size)}}return d}(r,i),!/^[ \\t]*#[ \\t]*version[ \\t]+300[ \\t]+es[ \\t]*$/m.test(e.vertexSrc)){var o=Object.keys(e.attributeData);o.sort(function(u,h){return u>h?1:-1});for(var s=0;s<o.length;s++)e.attributeData[o[s]].location=s,i.bindAttribLocation(r,s,o[s]);i.linkProgram(r)}i.deleteShader(t),i.deleteShader(n);var a={};for(var s in e.uniformData){var l=e.uniformData[s];a[s]={location:i.getUniformLocation(r,s),value:Gb(l.type,l.size)}}return new Z2(r,a)}var Q2=0,zm={textureCount:0,uboCount:0},eR=function(){function i(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Q2++}return i.prototype.systemCheck=function(){if(!function(){if(typeof hp==\"boolean\")return hp;try{var e=new Function(\"param1\",\"param2\",\"param3\",\"return param1[param2] === param3;\");hp=e({a:\"b\"},\"a\",\"b\")===!0}catch{hp=!1}return hp}())throw new Error(\"Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.\")},i.prototype.contextChange=function(e){this.gl=e,this.reset()},i.prototype.bind=function(e,t){e.uniforms.globals=this.renderer.globalUniforms;var n=e.program,r=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(r.program)),t||(zm.textureCount=0,zm.uboCount=0,this.syncUniformGroup(e.uniformGroup,zm)),r},i.prototype.setUniforms=function(e){var t=this.shader.program,n=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(n.uniformData,e,this.renderer)},i.prototype.syncUniformGroup=function(e,t){var n=this.getGlProgram();e.static&&e.dirtyId===n.uniformDirtyGroups[e.id]||(n.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,t))},i.prototype.syncUniforms=function(e,t,n){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,n)},i.prototype.createSyncGroups=function(e){var t=this.getSignature(e,this.shader.program.uniformData,\"u\");return this.cache[t]||(this.cache[t]=function(n,r){var o,s=[`\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    `];for(var a in n.uniforms){var l=r[a];if(l){for(var u=n.uniforms[a],h=!1,d=0;d<wc.length;d++)if(wc[d].test(l,u)){s.push(wc[d].code(a,u)),h=!0;break}if(!h){var p=(l.size===1?B2:k2)[l.type].replace(\"location\",'ud[\"'+a+'\"].location');s.push(`\n            cu = ud[\"`+a+`\"];\n            cv = cu.value;\n            v = uv[\"`+a+`\"];\n            `+p+\";\")}}else!((o=n.uniforms[a])===null||o===void 0)&&o.group&&(n.uniforms[a].ubo?s.push(`\n                        renderer.shader.syncUniformBufferGroup(uv.`+a+\", '\"+a+`');\n                    `):s.push(`\n                        renderer.shader.syncUniformGroup(uv.`+a+`, syncData);\n                    `))}return new Function(\"ud\",\"uv\",\"renderer\",\"syncData\",s.join(`\n`))}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]},i.prototype.syncUniformBufferGroup=function(e,t){var n=this.getGlProgram();if(!e.static||e.dirtyId!==0||!n.uniformGroups[e.id]){e.dirtyId=0;var r=n.uniformGroups[e.id]||this.createSyncBufferGroup(e,n,t);e.buffer.update(),r(n.uniformData,e.uniforms,this.renderer,zm,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,n.uniformBufferBindings[t])},i.prototype.createSyncBufferGroup=function(e,t,n){var r=this.renderer.gl;this.renderer.buffer.bind(e.buffer);var o=this.gl.getUniformBlockIndex(t.program,n);t.uniformBufferBindings[n]=this.shader.uniformBindCount,r.uniformBlockBinding(t.program,o,this.shader.uniformBindCount),this.shader.uniformBindCount++;var s=this.getSignature(e,this.shader.program.uniformData,\"ubo\"),a=this._uboCache[s];if(a||(a=this._uboCache[s]=J2(e,this.shader.program.uniformData)),e.autoManage){var l=new Float32Array(a.size/4);e.buffer.update(l)}return t.uniformGroups[e.id]=a.syncFunc,t.uniformGroups[e.id]},i.prototype.getSignature=function(e,t,n){var r=e.uniforms,o=[n+\"-\"];for(var s in r)o.push(s),t[s]&&o.push(t[s].type);return o.join(\"-\")},i.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},i.prototype.generateProgram=function(e){var t=this.gl,n=e.program,r=K2(t,n);return n.glPrograms[this.renderer.CONTEXT_UID]=r,r},i.prototype.reset=function(){this.program=null,this.shader=null},i.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},i}(),tR=function(){function i(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Qt.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new Pu,this.defaultState.blend=!0}return i.prototype.contextChange=function(e){this.gl=e,this.blendModes=function(t,n){return n===void 0&&(n=[]),n[Qt.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n[Qt.ADD]=[t.ONE,t.ONE],n[Qt.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],n[Qt.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],n[Qt.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n[Qt.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n[Qt.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n[Qt.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n[Qt.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n[Qt.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n[Qt.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n[Qt.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n[Qt.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n[Qt.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n[Qt.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n[Qt.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n[Qt.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n[Qt.NONE]=[0,0],n[Qt.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],n[Qt.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],n[Qt.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],n[Qt.SRC_IN]=[t.DST_ALPHA,t.ZERO],n[Qt.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],n[Qt.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],n[Qt.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],n[Qt.DST_IN]=[t.ZERO,t.SRC_ALPHA],n[Qt.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],n[Qt.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],n[Qt.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],n[Qt.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],n}(e),this.set(this.defaultState),this.reset()},i.prototype.set=function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var t=this.stateId^e.data,n=0;t;)1&t&&this.map[n].call(this,!!(e.data&1<<n)),t>>=1,n++;this.stateId=e.data}for(n=0;n<this.checks.length;n++)this.checks[n](this,e)},i.prototype.forceState=function(e){e=e||this.defaultState;for(var t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data},i.prototype.setBlend=function(e){this.updateCheck(i.checkBlendMode,e),this.gl[e?\"enable\":\"disable\"](this.gl.BLEND)},i.prototype.setOffset=function(e){this.updateCheck(i.checkPolygonOffset,e),this.gl[e?\"enable\":\"disable\"](this.gl.POLYGON_OFFSET_FILL)},i.prototype.setDepthTest=function(e){this.gl[e?\"enable\":\"disable\"](this.gl.DEPTH_TEST)},i.prototype.setDepthMask=function(e){this.gl.depthMask(e)},i.prototype.setCullFace=function(e){this.gl[e?\"enable\":\"disable\"](this.gl.CULL_FACE)},i.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?\"CW\":\"CCW\"])},i.prototype.setBlendMode=function(e){if(e!==this.blendMode){this.blendMode=e;var t=this.blendModes[e],n=this.gl;t.length===2?n.blendFunc(t[0],t[1]):n.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,n.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},i.prototype.setPolygonOffset=function(e,t){this.gl.polygonOffset(e,t)},i.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},i.prototype.updateCheck=function(e,t){var n=this.checks.indexOf(e);t&&n===-1?this.checks.push(e):t||n===-1||this.checks.splice(n,1)},i.checkBlendMode=function(e,t){e.setBlendMode(t.blendMode)},i.checkPolygonOffset=function(e,t){e.setPolygonOffset(1,t.polygonOffset)},i.prototype.destroy=function(){this.gl=null},i}(),nR=function(){function i(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=Jt.GC_MAX_IDLE,this.checkCountMax=Jt.GC_MAX_CHECK_COUNT,this.mode=Jt.GC_MODE}return i.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==c0.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},i.prototype.run=function(){for(var e=this.renderer.texture,t=e.managedTextures,n=!1,r=0;r<t.length;r++){var o=t[r];!o.framebuffer&&this.count-o.touched>this.maxIdle&&(e.destroyTexture(o,!0),t[r]=null,n=!0)}if(n){var s=0;for(r=0;r<t.length;r++)t[r]!==null&&(t[s++]=t[r]);t.length=s}},i.prototype.unload=function(e){var t=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&t.destroyTexture(n);for(var r=e.children.length-1;r>=0;r--)this.unload(e.children[r])},i.prototype.destroy=function(){this.renderer=null},i}(),B0=function(i){this.texture=i,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=sn.UNSIGNED_BYTE,this.internalFormat=Dt.RGBA,this.samplerType=0},iR=function(){function i(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Cn,this.hasIntegerTextures=!1}return i.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(o){var s,a,l,u,h,d,p,m,g,_,y,w,R,F,U,B,V,G,W,ge,he,se,de;return\"WebGL2RenderingContext\"in self&&o instanceof self.WebGL2RenderingContext?((s={})[sn.UNSIGNED_BYTE]=((a={})[Dt.RGBA]=o.RGBA8,a[Dt.RGB]=o.RGB8,a[Dt.RG]=o.RG8,a[Dt.RED]=o.R8,a[Dt.RGBA_INTEGER]=o.RGBA8UI,a[Dt.RGB_INTEGER]=o.RGB8UI,a[Dt.RG_INTEGER]=o.RG8UI,a[Dt.RED_INTEGER]=o.R8UI,a[Dt.ALPHA]=o.ALPHA,a[Dt.LUMINANCE]=o.LUMINANCE,a[Dt.LUMINANCE_ALPHA]=o.LUMINANCE_ALPHA,a),s[sn.BYTE]=((l={})[Dt.RGBA]=o.RGBA8_SNORM,l[Dt.RGB]=o.RGB8_SNORM,l[Dt.RG]=o.RG8_SNORM,l[Dt.RED]=o.R8_SNORM,l[Dt.RGBA_INTEGER]=o.RGBA8I,l[Dt.RGB_INTEGER]=o.RGB8I,l[Dt.RG_INTEGER]=o.RG8I,l[Dt.RED_INTEGER]=o.R8I,l),s[sn.UNSIGNED_SHORT]=((u={})[Dt.RGBA_INTEGER]=o.RGBA16UI,u[Dt.RGB_INTEGER]=o.RGB16UI,u[Dt.RG_INTEGER]=o.RG16UI,u[Dt.RED_INTEGER]=o.R16UI,u[Dt.DEPTH_COMPONENT]=o.DEPTH_COMPONENT16,u),s[sn.SHORT]=((h={})[Dt.RGBA_INTEGER]=o.RGBA16I,h[Dt.RGB_INTEGER]=o.RGB16I,h[Dt.RG_INTEGER]=o.RG16I,h[Dt.RED_INTEGER]=o.R16I,h),s[sn.UNSIGNED_INT]=((d={})[Dt.RGBA_INTEGER]=o.RGBA32UI,d[Dt.RGB_INTEGER]=o.RGB32UI,d[Dt.RG_INTEGER]=o.RG32UI,d[Dt.RED_INTEGER]=o.R32UI,d[Dt.DEPTH_COMPONENT]=o.DEPTH_COMPONENT24,d),s[sn.INT]=((p={})[Dt.RGBA_INTEGER]=o.RGBA32I,p[Dt.RGB_INTEGER]=o.RGB32I,p[Dt.RG_INTEGER]=o.RG32I,p[Dt.RED_INTEGER]=o.R32I,p),s[sn.FLOAT]=((m={})[Dt.RGBA]=o.RGBA32F,m[Dt.RGB]=o.RGB32F,m[Dt.RG]=o.RG32F,m[Dt.RED]=o.R32F,m[Dt.DEPTH_COMPONENT]=o.DEPTH_COMPONENT32F,m),s[sn.HALF_FLOAT]=((g={})[Dt.RGBA]=o.RGBA16F,g[Dt.RGB]=o.RGB16F,g[Dt.RG]=o.RG16F,g[Dt.RED]=o.R16F,g),s[sn.UNSIGNED_SHORT_5_6_5]=((_={})[Dt.RGB]=o.RGB565,_),s[sn.UNSIGNED_SHORT_4_4_4_4]=((y={})[Dt.RGBA]=o.RGBA4,y),s[sn.UNSIGNED_SHORT_5_5_5_1]=((w={})[Dt.RGBA]=o.RGB5_A1,w),s[sn.UNSIGNED_INT_2_10_10_10_REV]=((R={})[Dt.RGBA]=o.RGB10_A2,R[Dt.RGBA_INTEGER]=o.RGB10_A2UI,R),s[sn.UNSIGNED_INT_10F_11F_11F_REV]=((F={})[Dt.RGB]=o.R11F_G11F_B10F,F),s[sn.UNSIGNED_INT_5_9_9_9_REV]=((U={})[Dt.RGB]=o.RGB9_E5,U),s[sn.UNSIGNED_INT_24_8]=((B={})[Dt.DEPTH_STENCIL]=o.DEPTH24_STENCIL8,B),s[sn.FLOAT_32_UNSIGNED_INT_24_8_REV]=((V={})[Dt.DEPTH_STENCIL]=o.DEPTH32F_STENCIL8,V),de=s):((G={})[sn.UNSIGNED_BYTE]=((W={})[Dt.RGBA]=o.RGBA,W[Dt.RGB]=o.RGB,W[Dt.ALPHA]=o.ALPHA,W[Dt.LUMINANCE]=o.LUMINANCE,W[Dt.LUMINANCE_ALPHA]=o.LUMINANCE_ALPHA,W),G[sn.UNSIGNED_SHORT_5_6_5]=((ge={})[Dt.RGB]=o.RGB,ge),G[sn.UNSIGNED_SHORT_4_4_4_4]=((he={})[Dt.RGBA]=o.RGBA,he),G[sn.UNSIGNED_SHORT_5_5_5_1]=((se={})[Dt.RGBA]=o.RGBA,se),de=G),de}(e);var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(var n=0;n<t;n++)this.boundTextures[n]=null;this.emptyTextures={};var r=new B0(e.createTexture());for(e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new B0(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture),n=0;n<6;n++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);for(e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR),n=0;n<this.boundTextures.length;n++)this.bind(null,n)},i.prototype.bind=function(e,t){t===void 0&&(t=0);var n=this.gl;if((e=e==null?void 0:e.castToBaseTexture())&&e.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;var r=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(e.target,r.texture)),r.dirtyId!==e.dirtyId&&(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),this.updateTexture(e)),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[t]=null},i.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},i.prototype.unbind=function(e){var t=this.gl,n=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<n.length;r++)n[r]===this.unknownTexture&&this.bind(null,r)}for(r=0;r<n.length;r++)n[r]===e&&(this.currentLocation!==r&&(t.activeTexture(t.TEXTURE0+r),this.currentLocation=r),t.bindTexture(e.target,this.emptyTextures[e.target].texture),n[r]=null)},i.prototype.ensureSamplerType=function(e){var t=this.boundTextures,n=this.hasIntegerTextures,r=this.CONTEXT_UID;if(n)for(var o=e-1;o>=0;--o){var s=t[o];s&&s._glTextures[r].samplerType!==Mm.FLOAT&&this.renderer.texture.unbind(s)}},i.prototype.initTexture=function(e){var t=new B0(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on(\"dispose\",this.destroyTexture,this),t},i.prototype.initTextureType=function(e,t){var n,r;t.internalFormat=(r=(n=this.internalFormats[e.type])===null||n===void 0?void 0:n[e.format])!==null&&r!==void 0?r:e.format,this.webGLVersion===2&&e.type===sn.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type},i.prototype.updateTexture=function(e){var t=e._glTextures[this.CONTEXT_UID];if(t){var n=this.renderer;if(this.initTextureType(e,t),e.resource&&e.resource.upload(n,e,t))t.samplerType!==Mm.FLOAT&&(this.hasIntegerTextures=!0);else{var r=e.realWidth,o=e.realHeight,s=n.gl;(t.width!==r||t.height!==o||t.dirtyId<0)&&(t.width=r,t.height=o,s.texImage2D(e.target,0,t.internalFormat,r,o,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}},i.prototype.destroyTexture=function(e,t){var n=this.gl;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off(\"dispose\",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){var r=this.managedTextures.indexOf(e);r!==-1&&Su(this.managedTextures,r,1)}},i.prototype.updateTextureStyle=function(e){var t=e._glTextures[this.CONTEXT_UID];t&&(e.mipmap!==sl.POW2&&this.webGLVersion===2||e.isPowerOfTwo?t.mipmap=e.mipmap>=1:t.mipmap=!1,this.webGLVersion===2||e.isPowerOfTwo?t.wrapMode=e.wrapMode:t.wrapMode=Ia.CLAMP,e.resource&&e.resource.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)},i.prototype.setStyle=function(e,t){var n=this.gl;if(t.mipmap&&e.mipmap!==sl.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,t.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Pa.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var r=this.renderer.context.extensions.anisotropicFiltering;if(r&&e.anisotropicLevel>0&&e.scaleMode===Pa.LINEAR){var o=Math.min(e.anisotropicLevel,n.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,r.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Pa.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===Pa.LINEAR?n.LINEAR:n.NEAREST)},i.prototype.destroy=function(){this.renderer=null},i}(),k0=new Oi,rR=function(i){function e(t,n){t===void 0&&(t=op.UNKNOWN);var r=i.call(this)||this;return n=Object.assign({},Jt.RENDER_OPTIONS,n),r.options=n,r.type=t,r.screen=new Tn(0,0,n.width,n.height),r.view=n.view||document.createElement(\"canvas\"),r.resolution=n.resolution||Jt.RESOLUTION,r.useContextAlpha=n.useContextAlpha,r.autoDensity=!!n.autoDensity,r.preserveDrawingBuffer=n.preserveDrawingBuffer,r.clearBeforeRender=n.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,1],r._backgroundColorString=\"#000000\",r.backgroundColor=n.backgroundColor||r._backgroundColor,r.backgroundAlpha=n.backgroundAlpha,n.transparent!==void 0&&(yc(\"6.0.0\",\"Option transparent is deprecated, please use backgroundAlpha instead.\"),r.useContextAlpha=n.transparent,r.backgroundAlpha=n.transparent?0:1),r._lastObjectRendered=null,r.plugins={},r}return ni(e,i),e.prototype.initPlugins=function(t){for(var n in t)this.plugins[n]=new t[n](this)},Object.defineProperty(e.prototype,\"width\",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"height\",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,n){this.view.width=Math.round(t*this.resolution),this.view.height=Math.round(n*this.resolution);var r=this.view.width/this.resolution,o=this.view.height/this.resolution;this.screen.width=r,this.screen.height=o,this.autoDensity&&(this.view.style.width=r+\"px\",this.view.style.height=o+\"px\"),this.emit(\"resize\",r,o)},e.prototype.generateTexture=function(t,n,r,o){n===void 0&&(n={}),typeof n==\"number\"&&(yc(\"6.1.0\",\"generateTexture options (scaleMode, resolution, region) are now object options.\"),n={scaleMode:n,resolution:r,region:o});var s=n.region,a=function(u,h){var d={};for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&h.indexOf(p)<0&&(d[p]=u[p]);if(u!=null&&typeof Object.getOwnPropertySymbols==\"function\"){var m=0;for(p=Object.getOwnPropertySymbols(u);m<p.length;m++)h.indexOf(p[m])<0&&(d[p[m]]=u[p[m]])}return d}(n,[\"region\"]);(o=s||t.getLocalBounds(null,!0)).width===0&&(o.width=1),o.height===0&&(o.height=1);var l=Ao.create(Mb({width:o.width,height:o.height},a));return k0.tx=-o.x,k0.ty=-o.y,this.render(t,{renderTexture:l,clear:!1,transform:k0,skipUpdateTransform:!!t.parent}),l},e.prototype.destroy=function(t){for(var n in this.plugins)this.plugins[n].destroy(),this.plugins[n]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.plugins=null,this.type=op.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,\"backgroundColor\",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=g0(t),wu(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"backgroundAlpha\",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),e}(_c.a),oR=function(i){this.buffer=i||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},sR=function(){function i(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}return i.prototype.destroy=function(){this.renderer=null},i.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},i.prototype.bind=function(e){var t=this.gl,n=this.CONTEXT_UID,r=e._glBuffers[n]||this.createGLBuffer(e);t.bindBuffer(e.type,r.buffer)},i.prototype.bindBufferBase=function(e,t){var n=this.gl,r=this.CONTEXT_UID;if(this.boundBufferBases[t]!==e){var o=e._glBuffers[r]||this.createGLBuffer(e);this.boundBufferBases[t]=e,n.bindBufferBase(n.UNIFORM_BUFFER,t,o.buffer)}},i.prototype.bindBufferRange=function(e,t,n){var r=this.gl,o=this.CONTEXT_UID;n=n||0;var s=e._glBuffers[o]||this.createGLBuffer(e);r.bindBufferRange(r.UNIFORM_BUFFER,t||0,s.buffer,256*n,256)},i.prototype.update=function(e){var t=this.gl,n=this.CONTEXT_UID,r=e._glBuffers[n];if(e._updateID!==r.updateID)if(r.updateID=e._updateID,t.bindBuffer(e.type,r.buffer),r.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{var o=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;r.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,o)}},i.prototype.dispose=function(e,t){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var n=e._glBuffers[this.CONTEXT_UID],r=this.gl;e.disposeRunner.remove(this),n&&(t||r.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}},i.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedBuffers),n=0;n<t.length;n++)this.dispose(this.managedBuffers[t[n]],e)},i.prototype.createGLBuffer=function(e){var t=this.CONTEXT_UID,n=this.gl;return e._glBuffers[t]=new oR(n.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]},i}(),hl=function(i){function e(t){var n=i.call(this,op.WEBGL,t)||this;return t=n.options,n.gl=null,n.CONTEXT_UID=0,n.runners={destroy:new xr(\"destroy\"),contextChange:new xr(\"contextChange\"),reset:new xr(\"reset\"),update:new xr(\"update\"),postrender:new xr(\"postrender\"),prerender:new xr(\"prerender\"),resize:new xr(\"resize\")},n.runners.contextChange.add(n),n.globalUniforms=new Cu({projectionMatrix:new Oi},!0),n.addSystem(j2,\"mask\").addSystem(C2,\"context\").addSystem(tR,\"state\").addSystem(eR,\"shader\").addSystem(iR,\"texture\").addSystem(sR,\"buffer\").addSystem(L2,\"geometry\").addSystem(O2,\"framebuffer\").addSystem(V2,\"scissor\").addSystem(W2,\"stencil\").addSystem(X2,\"projection\").addSystem(nR,\"textureGC\").addSystem(A2,\"filter\").addSystem(q2,\"renderTexture\").addSystem(R2,\"batch\"),n.initPlugins(e.__plugins),n.multisample=void 0,t.context?n.context.initFromContext(t.context):n.context.initFromOptions({alpha:!!n.useContextAlpha,antialias:t.antialias,premultipliedAlpha:n.useContextAlpha&&n.useContextAlpha!==\"notMultiplied\",stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:n.options.powerPreference}),n.renderingToScreen=!0,Xx(n.context.webGLVersion===2?\"WebGL 2\":\"WebGL 1\"),n.resize(n.options.width,n.options.height),n}return ni(e,i),e.create=function(t){if(qx())return new e(t);throw new Error('WebGL unsupported in this browser, use \"pixi.js-legacy\" for fallback canvas2d support.')},e.prototype.contextChange=function(){var t,n=this.gl;if(this.context.webGLVersion===1){var r=n.getParameter(n.FRAMEBUFFER_BINDING);n.bindFramebuffer(n.FRAMEBUFFER,null),t=n.getParameter(n.SAMPLES),n.bindFramebuffer(n.FRAMEBUFFER,r)}else r=n.getParameter(n.DRAW_FRAMEBUFFER_BINDING),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),t=n.getParameter(n.SAMPLES),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,r);t>=zi.HIGH?this.multisample=zi.HIGH:t>=zi.MEDIUM?this.multisample=zi.MEDIUM:t>=zi.LOW?this.multisample=zi.LOW:this.multisample=zi.NONE},e.prototype.addSystem=function(t,n){var r=new t(this);if(this[n])throw new Error('Whoops! The name \"'+n+'\" is already in use');for(var o in this[n]=r,this.runners)this.runners[o].add(r);return this},e.prototype.render=function(t,n){var r,o,s,a;if(n&&(n instanceof Ao?(yc(\"6.0.0\",\"Renderer#render arguments changed, use options instead.\"),r=n,o=arguments[2],s=arguments[3],a=arguments[4]):(r=n.renderTexture,o=n.clear,s=n.transform,a=n.skipUpdateTransform)),this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit(\"prerender\"),this.projection.transform=s,!this.context.isLost){if(r||(this._lastObjectRendered=t),!a){var l=t.enableTempParent();t.updateTransform(),t.disableTempParent(l)}this.renderTexture.bind(r),this.batch.currentRenderer.start(),(o!==void 0?o:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit(\"postrender\")}},e.prototype.generateTexture=function(t,n,r,o){n===void 0&&(n={});var s=i.prototype.generateTexture.call(this,t,n,r,o);return this.framebuffer.blit(),s},e.prototype.resize=function(t,n){i.prototype.resize.call(this,t,n),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(t){for(var n in this.runners.destroy.emit(),this.runners)this.runners[n].destroy();i.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(e.prototype,\"extract\",{get:function(){return yc(\"6.0.0\",\"Renderer#extract has been deprecated, please use Renderer#plugins.extract instead.\"),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(t,n){e.__plugins=e.__plugins||{},e.__plugins[t]=n},e}(rR),Jb=`attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n`,U0=function(){this.texArray=null,this.blend=0,this.type=ss.TRIANGLES,this.start=0,this.size=0,this.data=null},G0=function(){function i(){this.elements=[],this.ids=[],this.count=0}return i.prototype.clear=function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0},i}(),H0=function(){function i(e){typeof e==\"number\"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(i.prototype,\"int8View\",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"uint8View\",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"int16View\",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"uint16View\",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"int32View\",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),i.prototype.view=function(e){return this[e+\"View\"]},i.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},i.sizeOf=function(e){switch(e){case\"int8\":case\"uint8\":return 1;case\"int16\":case\"uint16\":return 2;case\"int32\":case\"uint32\":case\"float32\":return 4;default:throw new Error(e+\" isn't a valid view type\")}},i}(),aR=function(i){function e(t){var n=i.call(this,t)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=Pu.for2d(),n.size=4*Jt.SPRITE_BATCH_SIZE,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on(\"prerender\",n.onPrerender,n),t.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return ni(e,i),e.prototype.contextChange=function(){var t=this.renderer.gl;Jt.PREFER_ENV===Ca.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),Jt.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function(r,o){if(r===0)throw new Error(\"Invalid value of `0` passed to `checkMaxIfStatementsInShader`\");for(var s=o.createShader(o.FRAGMENT_SHADER);;){var a=U2.replace(/%forloop%/gi,G2(r));if(o.shaderSource(s,a),o.compileShader(s),o.getShaderParameter(s,o.COMPILE_STATUS))break;r=r/2|0}return r}(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var n=0;n<this._packedGeometryPoolSize;n++)this._packedGeometries[n]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,n=e._textureArrayPool,r=this.size/4,o=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new U0);for(;n.length<o;)n.push(new G0);for(var s=0;s<this.MAX_TEXTURES;s++)this._tempBoundTextures[s]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,n=this.MAX_TEXTURES,r=e._textureArrayPool,o=this.renderer.batch,s=this._tempBoundTextures,a=this.renderer.textureGC.count,l=++Cn._globalBatch,u=0,h=r[0],d=0;o.copyBoundTextures(s,n);for(var p=0;p<this._bufferSize;++p){var m=t[p];t[p]=null,m._batchEnabled!==l&&(h.count>=n&&(o.boundArray(h,s,l,n),this.buildDrawCalls(h,d,p),d=p,h=r[++u],++l),m._batchEnabled=l,m.touched=a,h.elements[h.count++]=m)}for(h.count>0&&(o.boundArray(h,s,l,n),this.buildDrawCalls(h,d,this._bufferSize),++u,++l),p=0;p<s.length;p++)s[p]=null;Cn._globalBatch=l},e.prototype.buildDrawCalls=function(t,n,r){var o=this._bufferedElements,s=this._attributeBuffer,a=this._indexBuffer,l=this.vertexSize,u=e._drawCallPool,h=this._dcIndex,d=this._aIndex,p=this._iIndex,m=u[h];m.start=this._iIndex,m.texArray=t;for(var g=n;g<r;++g){var _=o[g],y=_._texture.baseTexture,w=_0[y.alphaMode?1:0][_.blendMode];o[g]=null,n<g&&m.blend!==w&&(m.size=p-m.start,n=g,(m=u[++h]).texArray=t,m.start=p),this.packInterleavedGeometry(_,s,a,d,p),d+=_.vertexData.length/2*l,p+=_.indices.length,m.blend=w}n<r&&(m.size=p-m.start,++h),this._dcIndex=h,this._aIndex=d,this._iIndex=p},e.prototype.bindAndClearTexArray=function(t){for(var n=this.renderer.texture,r=0;r<t.count;r++)n.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this._packedGeometries,n=this._attributeBuffer,r=this._indexBuffer;Jt.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(n.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(n.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,n=this.renderer,r=n.gl,o=n.state,s=e._drawCallPool,a=null,l=0;l<t;l++){var u=s[l],h=u.texArray,d=u.type,p=u.size,m=u.start,g=u.blend;a!==h&&(a=h,this.bindAndClearTexArray(h)),this.state.blendMode=g,o.set(this.state),r.drawElements(d,p,r.UNSIGNED_SHORT,2*m)}},e.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),Jt.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off(\"prerender\",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),i.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var n=sp(Math.ceil(t/8)),r=w0(n),o=8*n;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);var s=this._aBuffers[o];return s||(this._aBuffers[o]=s=new H0(o*this.vertexSize*4)),s},e.prototype.getIndexBuffer=function(t){var n=sp(Math.ceil(t/12)),r=w0(n),o=12*n;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);var s=this._iBuffers[r];return s||(this._iBuffers[r]=s=new Uint16Array(o)),s},e.prototype.packInterleavedGeometry=function(t,n,r,o,s){for(var a=n.uint32View,l=n.float32View,u=o/this.vertexSize,h=t.uvs,d=t.indices,p=t.vertexData,m=t._texture.baseTexture._batchLocation,g=Math.min(t.worldAlpha,1),_=g<1&&t._texture.baseTexture.alphaMode?Am(t._tintRGB,g):t._tintRGB+(255*g<<24),y=0;y<p.length;y+=2)l[o++]=p[y],l[o++]=p[y+1],l[o++]=h[y],l[o++]=h[y+1],a[o++]=_,l[o++]=m;for(y=0;y<d.length;y++)r[s++]=u+d[y]},e._drawCallPool=[],e._textureArrayPool=[],e}(km),lR=function(){function i(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},t.indexOf(\"%count%\")<0)throw new Error('Fragment template must contain \"%count%\".');if(t.indexOf(\"%forloop%\")<0)throw new Error('Fragment template must contain \"%forloop%\".')}return i.prototype.generateShader=function(e){if(!this.programCache[e]){for(var t=new Int32Array(e),n=0;n<e;n++)t[n]=n;this.defaultGroupCache[e]=Cu.from({uSamplers:t},!0);var r=this.fragTemplate;r=(r=r.replace(/%count%/gi,\"\"+e)).replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new cp(this.vertexSrc,r)}var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new Oi,default:this.defaultGroupCache[e]};return new Oa(this.programCache[e],o)},i.prototype.generateSampleSrc=function(e){var t=\"\";t+=`\n`,t+=`\n`;for(var n=0;n<e;n++)n>0&&(t+=`\nelse `),n<e-1&&(t+=\"if(vTextureId < \"+n+\".5)\"),t+=`\n{`,t+=`\n\tcolor = texture2D(uSamplers[`+n+\"], vTextureCoord);\",t+=`\n}`;return t+=`\n`,t+=`\n`},i}(),Zb=function(i){function e(t){t===void 0&&(t=!1);var n=i.call(this)||this;return n._buffer=new Wi(null,t,!1),n._indexBuffer=new Wi(null,t,!0),n.addAttribute(\"aVertexPosition\",n._buffer,2,!1,sn.FLOAT).addAttribute(\"aTextureCoord\",n._buffer,2,!1,sn.FLOAT).addAttribute(\"aColor\",n._buffer,4,!0,sn.UNSIGNED_BYTE).addAttribute(\"aTextureId\",n._buffer,1,!0,sn.FLOAT).addIndex(n._indexBuffer),n}return ni(e,i),e}(bc),Kb=`precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n`,Qb=`varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n`,uR=function(){function i(){}return i.create=function(e){var t=Object.assign({vertex:Kb,fragment:Qb,geometryClass:Zb,vertexSize:6},e),n=t.vertex,r=t.fragment,o=t.vertexSize,s=t.geometryClass;return function(a){function l(u){var h=a.call(this,u)||this;return h.shaderGenerator=new lR(n,r),h.geometryClass=s,h.vertexSize=o,h}return ni(l,a),l}(aR)},Object.defineProperty(i,\"defaultVertexSrc\",{get:function(){return Kb},enumerable:!1,configurable:!0}),Object.defineProperty(i,\"defaultFragmentTemplate\",{get:function(){return Qb},enumerable:!1,configurable:!0}),i}().create();/*!\n* @pixi/app - v6.2.0\n* Compiled Mon, 01 Nov 2021 16:52:10 UTC\n*\n* @pixi/app is licensed under the MIT License.\n* http://www.opensource.org/licenses/mit-license\n*/var jm=function(){function i(e){var t=this;this.stage=new Ki,e=Object.assign({forceCanvas:!1},e),this.renderer=function(n){return hl.create(n)}(e),i._plugins.forEach(function(n){n.init.call(t,e)})}return i.registerPlugin=function(e){i._plugins.push(e)},i.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(i.prototype,\"view\",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"screen\",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),i.prototype.destroy=function(e,t){var n=this,r=i._plugins.slice(0);r.reverse(),r.forEach(function(o){o.destroy.call(n)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null},i._plugins=[],i}(),hR=function(){function i(){}return i.init=function(e){var t=this;Object.defineProperty(this,\"resizeTo\",{set:function(n){self.removeEventListener(\"resize\",this.queueResize),this._resizeTo=n,n&&(self.addEventListener(\"resize\",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){t._resizeTo&&(t.cancelResize(),t._resizeId=requestAnimationFrame(function(){return t.resize()}))},this.cancelResize=function(){t._resizeId&&(cancelAnimationFrame(t._resizeId),t._resizeId=null)},this.resize=function(){if(t._resizeTo){var n,r;if(t.cancelResize(),t._resizeTo===self)n=self.innerWidth,r=self.innerHeight;else{var o=t._resizeTo;n=o.clientWidth,r=o.clientHeight}t.renderer.resize(n,r)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null},i.destroy=function(){self.removeEventListener(\"resize\",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},i}();jm.registerPlugin(hR);/*!\n * @pixi/extract - v6.2.0\n * Compiled Mon, 01 Nov 2021 16:52:10 UTC\n *\n * @pixi/extract is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */var e1=new Tn,cR=function(){function i(e){this.renderer=e}return i.prototype.image=function(e,t,n){var r=new Image;return r.src=this.base64(e,t,n),r},i.prototype.base64=function(e,t,n){return this.canvas(e).toDataURL(t,n)},i.prototype.canvas=function(e){var t,n,r,o=this.renderer,s=!1,a=!1;e&&(e instanceof Ao?r=e:(r=this.renderer.generateTexture(e),a=!0)),r?(t=r.baseTexture.resolution,n=r.frame,s=!1,o.renderTexture.bind(r)):(t=this.renderer.resolution,s=!0,(n=e1).width=this.renderer.width,n.height=this.renderer.height,o.renderTexture.bind(null));var l=Math.floor(n.width*t+1e-4),u=Math.floor(n.height*t+1e-4),h=new T0(l,u,1),d=new Uint8Array(4*l*u),p=o.gl;p.readPixels(n.x*t,n.y*t,l,u,p.RGBA,p.UNSIGNED_BYTE,d);var m=h.context.getImageData(0,0,l,u);if(i.arrayPostDivide(d,m.data),h.context.putImageData(m,0,0),s){var g=new T0(h.width,h.height,1);g.context.scale(1,-1),g.context.drawImage(h.canvas,0,-u),h.destroy(),h=g}return a&&r.destroy(!0),h.canvas},i.prototype.pixels=function(e){var t,n,r,o=this.renderer,s=!1;e&&(e instanceof Ao?r=e:(r=this.renderer.generateTexture(e),s=!0)),r?(t=r.baseTexture.resolution,n=r.frame,o.renderTexture.bind(r)):(t=o.resolution,(n=e1).width=o.width,n.height=o.height,o.renderTexture.bind(null));var a=n.width*t,l=n.height*t,u=new Uint8Array(4*a*l),h=o.gl;return h.readPixels(n.x*t,n.y*t,a,l,h.RGBA,h.UNSIGNED_BYTE,u),s&&r.destroy(!0),i.arrayPostDivide(u,u),u},i.prototype.destroy=function(){this.renderer=null},i.arrayPostDivide=function(e,t){for(var n=0;n<e.length;n+=4){var r=t[n+3]=e[n+3];r!==0?(t[n]=Math.round(Math.min(255*e[n]/r,255)),t[n+1]=Math.round(Math.min(255*e[n+1]/r,255)),t[n+2]=Math.round(Math.min(255*e[n+2]/r,255))):(t[n]=e[n],t[n+1]=e[n+1],t[n+2]=e[n+2])}},i}(),Vm=function(){function i(e,t,n){t===void 0&&(t=!1),this._fn=e,this._once=t,this._thisArg=n,this._next=this._prev=this._owner=null}return i.prototype.detach=function(){return this._owner!==null&&(this._owner.detach(this),!0)},i}();function t1(i,e){return i._head?(i._tail._next=e,e._prev=i._tail,i._tail=e):(i._head=e,i._tail=e),e._owner=i,e}var La=function(){function i(){this._head=this._tail=void 0}return i.prototype.handlers=function(e){e===void 0&&(e=!1);var t=this._head;if(e)return!!t;for(var n=[];t;)n.push(t),t=t._next;return n},i.prototype.has=function(e){if(!(e instanceof Vm))throw new Error(\"MiniSignal#has(): First arg must be a SignalBinding object.\");return e._owner===this},i.prototype.dispatch=function(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];var r=this._head;if(!r)return!1;for(;r;)r._once&&this.detach(r),r._fn.apply(r._thisArg,t),r=r._next;return!0},i.prototype.add=function(e,t){if(t===void 0&&(t=null),typeof e!=\"function\")throw new Error(\"MiniSignal#add(): First arg must be a Function.\");return t1(this,new Vm(e,!1,t))},i.prototype.once=function(e,t){if(t===void 0&&(t=null),typeof e!=\"function\")throw new Error(\"MiniSignal#once(): First arg must be a Function.\");return t1(this,new Vm(e,!0,t))},i.prototype.detach=function(e){if(!(e instanceof Vm))throw new Error(\"MiniSignal#detach(): First arg must be a SignalBinding object.\");return e._owner!==this||(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,e._next===null&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null),this},i.prototype.detachAll=function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this},i}();function n1(i,e){e=e||{};for(var t={key:[\"source\",\"protocol\",\"authority\",\"userInfo\",\"user\",\"password\",\"host\",\"port\",\"relative\",\"path\",\"directory\",\"file\",\"query\",\"anchor\"],q:{name:\"queryKey\",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/}},n=t.parser[e.strictMode?\"strict\":\"loose\"].exec(i),r={},o=14;o--;)r[t.key[o]]=n[o]||\"\";return r[t.q.name]={},r[t.key[12]].replace(t.q.parser,function(s,a,l){a&&(r[t.q.name][a]=l)}),r}var dR=!(!self.XDomainRequest||\"withCredentials\"in new XMLHttpRequest),Wm=null;function i1(){}function r1(i,e,t){e&&e.indexOf(\".\")===0&&(e=e.substring(1)),e&&(i[e]=t)}function z0(i){return i.toString().replace(\"object \",\"\")}var Ei=function(){function i(e,t,n){if(this._dequeue=i1,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof e!=\"string\"||typeof t!=\"string\")throw new Error(\"Both name and url are required for constructing a resource.\");n=n||{},this._flags=0,this._setFlag(i.STATUS_FLAGS.DATA_URL,t.indexOf(\"data:\")===0),this.name=e,this.url=t,this.extension=this._getExtension(),this.data=null,this.crossOrigin=n.crossOrigin===!0?\"anonymous\":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=i.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=i1,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new La,this.onProgress=new La,this.onComplete=new La,this.onAfterMiddleware=new La}return i.setExtensionLoadType=function(e,t){r1(i._loadTypeMap,e,t)},i.setExtensionXhrType=function(e,t){r1(i._xhrTypeMap,e,t)},Object.defineProperty(i.prototype,\"isDataUrl\",{get:function(){return this._hasFlag(i.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"isComplete\",{get:function(){return this._hasFlag(i.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"isLoading\",{get:function(){return this._hasFlag(i.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),i.prototype.complete=function(){this._clearEvents(),this._finish()},i.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=i.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},i.prototype.load=function(e){var t=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout(function(){return e(t)},1);else switch(e&&this.onComplete.once(e),this._setFlag(i.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),this.crossOrigin!==!1&&typeof this.crossOrigin==\"string\"||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case i.LOAD_TYPE.IMAGE:this.type=i.TYPE.IMAGE,this._loadElement(\"image\");break;case i.LOAD_TYPE.AUDIO:this.type=i.TYPE.AUDIO,this._loadSourceElement(\"audio\");break;case i.LOAD_TYPE.VIDEO:this.type=i.TYPE.VIDEO,this._loadSourceElement(\"video\");break;case i.LOAD_TYPE.XHR:default:dR&&this.crossOrigin?this._loadXdr():this._loadXhr()}},i.prototype._hasFlag=function(e){return(this._flags&e)!=0},i.prototype._setFlag=function(e,t){this._flags=t?this._flags|e:this._flags&~e},i.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener(\"error\",this._boundOnError,!1),this.data.removeEventListener(\"load\",this._boundComplete,!1),this.data.removeEventListener(\"progress\",this._boundOnProgress,!1),this.data.removeEventListener(\"canplaythrough\",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener(\"error\",this._boundXhrOnError,!1),this.xhr.removeEventListener(\"timeout\",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener(\"abort\",this._boundXhrOnAbort,!1),this.xhr.removeEventListener(\"progress\",this._boundOnProgress,!1),this.xhr.removeEventListener(\"load\",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},i.prototype._finish=function(){if(this.isComplete)throw new Error(\"Complete called again for an already completed resource.\");this._setFlag(i.STATUS_FLAGS.COMPLETE,!0),this._setFlag(i.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},i.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:e===\"image\"&&self.Image!==void 0?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener(\"error\",this._boundOnError,!1),this.data.addEventListener(\"load\",this._boundComplete,!1),this.data.addEventListener(\"progress\",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},i.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:e===\"audio\"&&self.Audio!==void 0?this.data=new Audio:this.data=document.createElement(e),this.data!==null){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(e,this.url[n],Array.isArray(t)?t[n]:t));else t=this.metadata.mimeType,this.data.appendChild(this._createSource(e,this.url,Array.isArray(t)?t[0]:t));this.data.addEventListener(\"error\",this._boundOnError,!1),this.data.addEventListener(\"load\",this._boundComplete,!1),this.data.addEventListener(\"progress\",this._boundOnProgress,!1),this.data.addEventListener(\"canplaythrough\",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort(\"Unsupported element: \"+e)},i.prototype._loadXhr=function(){typeof this.xhrType!=\"string\"&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open(\"GET\",this.url,!0),e.timeout=this.timeout,this.xhrType===i.XHR_RESPONSE_TYPE.JSON||this.xhrType===i.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=i.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener(\"error\",this._boundXhrOnError,!1),e.addEventListener(\"timeout\",this._boundXhrOnTimeout,!1),e.addEventListener(\"abort\",this._boundXhrOnAbort,!1),e.addEventListener(\"progress\",this._boundOnProgress,!1),e.addEventListener(\"load\",this._boundXhrOnLoad,!1),e.send()},i.prototype._loadXdr=function(){typeof this.xhrType!=\"string\"&&(this.xhrType=this._determineXhrType());var e=this.xhr=new self.XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open(\"GET\",this.url,!0),setTimeout(function(){return e.send()},1)},i.prototype._createSource=function(e,t,n){n||(n=e+\"/\"+this._getExtension(t));var r=document.createElement(\"source\");return r.src=t,r.type=n,r},i.prototype._onError=function(e){this.abort(\"Failed to load element using: \"+e.target.nodeName)},i.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},i.prototype._onTimeout=function(){this.abort(\"Load timed out.\")},i.prototype._xhrOnError=function(){var e=this.xhr;this.abort(z0(e)+\" Request failed. Status: \"+e.status+', text: \"'+e.statusText+'\"')},i.prototype._xhrOnTimeout=function(){var e=this.xhr;this.abort(z0(e)+\" Request timed out.\")},i.prototype._xhrOnAbort=function(){var e=this.xhr;this.abort(z0(e)+\" Request was aborted by the user.\")},i.prototype._xhrOnLoad=function(){var e=this.xhr,t=\"\",n=e.status===void 0?200:e.status;if(e.responseType!==\"\"&&e.responseType!==\"text\"&&e.responseType!==void 0||(t=e.responseText),n===0&&(t.length>0||e.responseType===i.XHR_RESPONSE_TYPE.BUFFER)?n=200:n===1223&&(n=204),(n/100|0)===2){if(this.xhrType===i.XHR_RESPONSE_TYPE.TEXT)this.data=t,this.type=i.TYPE.TEXT;else if(this.xhrType===i.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t),this.type=i.TYPE.JSON}catch(s){return void this.abort(\"Error trying to parse loaded json: \"+s)}else if(this.xhrType===i.XHR_RESPONSE_TYPE.DOCUMENT)try{if(self.DOMParser){var r=new DOMParser;this.data=r.parseFromString(t,\"text/xml\")}else{var o=document.createElement(\"div\");o.innerHTML=t,this.data=o}this.type=i.TYPE.XML}catch(s){return void this.abort(\"Error trying to parse loaded xml: \"+s)}else this.data=e.response||t;this.complete()}else this.abort(\"[\"+e.status+\"] \"+e.statusText+\": \"+e.responseURL)},i.prototype._determineCrossOrigin=function(e,t){if(e.indexOf(\"data:\")===0)return\"\";if(self.origin!==self.location.origin)return\"anonymous\";t=t||self.location,Wm||(Wm=document.createElement(\"a\")),Wm.href=e;var n=n1(Wm.href,{strictMode:!0}),r=!n.port&&t.port===\"\"||n.port===t.port,o=n.protocol?n.protocol+\":\":\"\";return n.host===t.hostname&&r&&o===t.protocol?\"\":\"anonymous\"},i.prototype._determineXhrType=function(){return i._xhrTypeMap[this.extension]||i.XHR_RESPONSE_TYPE.TEXT},i.prototype._determineLoadType=function(){return i._loadTypeMap[this.extension]||i.LOAD_TYPE.XHR},i.prototype._getExtension=function(e){e===void 0&&(e=this.url);var t=\"\";if(this.isDataUrl){var n=e.indexOf(\"/\");t=e.substring(n+1,e.indexOf(\";\",n))}else{var r=e.indexOf(\"?\"),o=e.indexOf(\"#\"),s=Math.min(r>-1?r:e.length,o>-1?o:e.length);t=(e=e.substring(0,s)).substring(e.lastIndexOf(\".\")+1)}return t.toLowerCase()},i.prototype._getMimeFromXhrType=function(e){switch(e){case i.XHR_RESPONSE_TYPE.BUFFER:return\"application/octet-binary\";case i.XHR_RESPONSE_TYPE.BLOB:return\"application/blob\";case i.XHR_RESPONSE_TYPE.DOCUMENT:return\"application/xml\";case i.XHR_RESPONSE_TYPE.JSON:return\"application/json\";case i.XHR_RESPONSE_TYPE.DEFAULT:case i.XHR_RESPONSE_TYPE.TEXT:default:return\"text/plain\"}},i}();function Ou(){}function pR(i){return function(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];if(i===null)throw new Error(\"Callback was already called.\");var r=i;i=null,r.apply(this,t)}}(function(i){(function(e){e[e.NONE=0]=\"NONE\",e[e.DATA_URL=1]=\"DATA_URL\",e[e.COMPLETE=2]=\"COMPLETE\",e[e.LOADING=4]=\"LOADING\"})(i.STATUS_FLAGS||(i.STATUS_FLAGS={})),function(e){e[e.UNKNOWN=0]=\"UNKNOWN\",e[e.JSON=1]=\"JSON\",e[e.XML=2]=\"XML\",e[e.IMAGE=3]=\"IMAGE\",e[e.AUDIO=4]=\"AUDIO\",e[e.VIDEO=5]=\"VIDEO\",e[e.TEXT=6]=\"TEXT\"}(i.TYPE||(i.TYPE={})),function(e){e[e.XHR=1]=\"XHR\",e[e.IMAGE=2]=\"IMAGE\",e[e.AUDIO=3]=\"AUDIO\",e[e.VIDEO=4]=\"VIDEO\"}(i.LOAD_TYPE||(i.LOAD_TYPE={})),function(e){e.DEFAULT=\"text\",e.BUFFER=\"arraybuffer\",e.BLOB=\"blob\",e.DOCUMENT=\"document\",e.JSON=\"json\",e.TEXT=\"text\"}(i.XHR_RESPONSE_TYPE||(i.XHR_RESPONSE_TYPE={})),i._loadTypeMap={gif:i.LOAD_TYPE.IMAGE,png:i.LOAD_TYPE.IMAGE,bmp:i.LOAD_TYPE.IMAGE,jpg:i.LOAD_TYPE.IMAGE,jpeg:i.LOAD_TYPE.IMAGE,tif:i.LOAD_TYPE.IMAGE,tiff:i.LOAD_TYPE.IMAGE,webp:i.LOAD_TYPE.IMAGE,tga:i.LOAD_TYPE.IMAGE,svg:i.LOAD_TYPE.IMAGE,\"svg+xml\":i.LOAD_TYPE.IMAGE,mp3:i.LOAD_TYPE.AUDIO,ogg:i.LOAD_TYPE.AUDIO,wav:i.LOAD_TYPE.AUDIO,mp4:i.LOAD_TYPE.VIDEO,webm:i.LOAD_TYPE.VIDEO},i._xhrTypeMap={xhtml:i.XHR_RESPONSE_TYPE.DOCUMENT,html:i.XHR_RESPONSE_TYPE.DOCUMENT,htm:i.XHR_RESPONSE_TYPE.DOCUMENT,xml:i.XHR_RESPONSE_TYPE.DOCUMENT,tmx:i.XHR_RESPONSE_TYPE.DOCUMENT,svg:i.XHR_RESPONSE_TYPE.DOCUMENT,tsx:i.XHR_RESPONSE_TYPE.DOCUMENT,gif:i.XHR_RESPONSE_TYPE.BLOB,png:i.XHR_RESPONSE_TYPE.BLOB,bmp:i.XHR_RESPONSE_TYPE.BLOB,jpg:i.XHR_RESPONSE_TYPE.BLOB,jpeg:i.XHR_RESPONSE_TYPE.BLOB,tif:i.XHR_RESPONSE_TYPE.BLOB,tiff:i.XHR_RESPONSE_TYPE.BLOB,webp:i.XHR_RESPONSE_TYPE.BLOB,tga:i.XHR_RESPONSE_TYPE.BLOB,json:i.XHR_RESPONSE_TYPE.JSON,text:i.XHR_RESPONSE_TYPE.TEXT,txt:i.XHR_RESPONSE_TYPE.TEXT,ttf:i.XHR_RESPONSE_TYPE.BUFFER,otf:i.XHR_RESPONSE_TYPE.BUFFER},i.EMPTY_GIF=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\"})(Ei||(Ei={}));var fR=function(i,e){this.data=i,this.callback=e},j0=function(){function i(e,t){var n=this;if(t===void 0&&(t=1),this.workers=0,this.saturated=Ou,this.unsaturated=Ou,this.empty=Ou,this.drain=Ou,this.error=Ou,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(r,o,s){if(s&&typeof s!=\"function\")throw new Error(\"task callback must be a function\");if(n.started=!0,r==null&&n.idle())setTimeout(function(){return n.drain()},1);else{var a=new fR(r,typeof s==\"function\"?s:Ou);o?n._tasks.unshift(a):n._tasks.push(a),setTimeout(n.process,1)}},this.process=function(){for(;!n.paused&&n.workers<n.concurrency&&n._tasks.length;){var r=n._tasks.shift();n._tasks.length===0&&n.empty(),n.workers+=1,n.workers===n.concurrency&&n.saturated(),n._worker(r.data,pR(n._next(r)))}},this._worker=e,t===0)throw new Error(\"Concurrency must not be zero\");this.concurrency=t,this.buffer=t/4}return i.prototype._next=function(e){var t=this;return function(){for(var n=arguments,r=[],o=0;o<arguments.length;o++)r[o]=n[o];t.workers-=1,e.callback.apply(e,r),r[0]!=null&&t.error(r[0],e.data),t.workers<=t.concurrency-t.buffer&&t.unsaturated(),t.idle()&&t.drain(),t.process()}},i.prototype.push=function(e,t){this._insert(e,!1,t)},i.prototype.kill=function(){this.workers=0,this.drain=Ou,this.started=!1,this._tasks=[]},i.prototype.unshift=function(e,t){this._insert(e,!0,t)},i.prototype.length=function(){return this._tasks.length},i.prototype.running=function(){return this.workers},i.prototype.idle=function(){return this._tasks.length+this.workers===0},i.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},i.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var e=1;e<=this.concurrency;e++)this.process()}},i.eachSeries=function(e,t,n,r){var o=0,s=e.length;(function a(l){l||o===s?n&&n(l):r?setTimeout(function(){t(e[o++],a)},1):t(e[o++],a)})()},i.queue=function(e,t){return new i(e,t)},i}(),mR=/(#[\\w-]+)?$/,Ds=function(){function i(e,t){var n=this;e===void 0&&(e=\"\"),t===void 0&&(t=10),this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(l,u){return n._loadResource(l,u)},this.resources={},this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString=\"\",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(l,u){return n._loadResource(l,u)},this._queue=j0.queue(this._boundLoadResource,t),this._queue.pause(),this.resources={},this.onProgress=new La,this.onError=new La,this.onLoad=new La,this.onStart=new La,this.onComplete=new La;for(var r=0;r<i._plugins.length;++r){var o=i._plugins[r],s=o.pre,a=o.use;s&&this.pre(s),a&&this.use(a)}this._protected=!1}return i.prototype._add=function(e,t,n,r){if(this.loading&&(!n||!n.parentResource))throw new Error(\"Cannot add resources while the loader is running.\");if(this.resources[e])throw new Error('Resource named \"'+e+'\" already exists.');if(t=this._prepareUrl(t),this.resources[e]=new Ei(e,t,n),typeof r==\"function\"&&this.resources[e].onAfterMiddleware.once(r),this.loading){for(var o=n.parentResource,s=[],a=0;a<o.children.length;++a)o.children[a].isComplete||s.push(o.children[a]);var l=o.progressChunk*(s.length+1)/(s.length+2);for(o.children.push(this.resources[e]),o.progressChunk=l,a=0;a<s.length;++a)s[a].progressChunk=l;this.resources[e].progressChunk=l}return this._queue.push(this.resources[e]),this},i.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},i.prototype.use=function(e){return this._afterMiddleware.push(e),this},i.prototype.reset=function(){for(var e in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var t=this.resources[e];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort(\"loader reset\")}return this.resources={},this},i.prototype.load=function(e){if(typeof e==\"function\"&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var t=100/this._queue._tasks.length,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=t;this._onStart(),this._queue.resume()}return this},Object.defineProperty(i.prototype,\"concurrency\",{get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e},enumerable:!1,configurable:!0}),i.prototype._prepareUrl=function(e){var t,n=n1(e,{strictMode:!0});if(t=n.protocol||!n.path||e.indexOf(\"//\")===0?e:this.baseUrl.length&&this.baseUrl.lastIndexOf(\"/\")!==this.baseUrl.length-1&&e.charAt(0)!==\"/\"?this.baseUrl+\"/\"+e:this.baseUrl+e,this.defaultQueryString){var r=mR.exec(t)[0];(t=t.substr(0,t.length-r.length)).indexOf(\"?\")!==-1?t+=\"&\"+this.defaultQueryString:t+=\"?\"+this.defaultQueryString,t+=r}return t},i.prototype._loadResource=function(e,t){var n=this;e._dequeue=t,j0.eachSeries(this._beforeMiddleware,function(r,o){r.call(n,e,function(){o(e.isComplete?{}:null)})},function(){e.isComplete?n._onLoad(e):(e._onLoadBinding=e.onComplete.once(n._onLoad,n),e.load())},!0)},i.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},i.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},i.prototype._onLoad=function(e){var t=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),j0.eachSeries(this._afterMiddleware,function(n,r){n.call(t,e,r)},function(){e.onAfterMiddleware.dispatch(e),t.progress=Math.min(100,t.progress+e.progressChunk),t.onProgress.dispatch(t,e),e.error?t.onError.dispatch(e.error,t,e):t.onLoad.dispatch(t,e),t._resourcesParsing.splice(t._resourcesParsing.indexOf(e),1),t._queue.idle()&&t._resourcesParsing.length===0&&t._onComplete()},!0)},i.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(i,\"shared\",{get:function(){var e=i._shared;return e||((e=new i)._protected=!0,i._shared=e),e},enumerable:!1,configurable:!0}),i.registerPlugin=function(e){return i._plugins.push(e),e.add&&e.add(),i},i._plugins=[],i}();Ds.prototype.add=function(i,e,t,n){if(Array.isArray(i)){for(var r=0;r<i.length;++r)this.add(i[r]);return this}if(typeof i==\"object\"&&(t=i,n=e||t.callback||t.onComplete,e=t.url,i=t.name||t.key||t.url),typeof e!=\"string\"&&(n=t,t=e,e=i),typeof e!=\"string\")throw new Error(\"No url passed to add resource to loader.\");return typeof t==\"function\"&&(n=t,t=null),this._add(i,e,t,n)};var gR=function(){function i(){}return i.init=function(e){e=Object.assign({sharedLoader:!1},e),this.loader=e.sharedLoader?Ds.shared:new Ds},i.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},i}(),vR=function(){function i(){}return i.add=function(){Ei.setExtensionLoadType(\"svg\",Ei.LOAD_TYPE.XHR),Ei.setExtensionXhrType(\"svg\",Ei.XHR_RESPONSE_TYPE.TEXT)},i.use=function(e,t){if(!e.data||e.type!==Ei.TYPE.IMAGE&&e.extension!==\"svg\")t();else{var n=e.data,r=e.url,o=e.name,s=e.metadata;rn.fromLoader(n,r,o,s).then(function(a){e.texture=a,t()}).catch(t)}},i}(),$n,xn,o1=self.URL||self.webkitURL;Ds.registerPlugin({use:function(i,e){if(i.data){if(i.xhr&&i.xhrType===Ei.XHR_RESPONSE_TYPE.BLOB)if(self.Blob&&typeof i.data!=\"string\"){if(i.data.type.indexOf(\"image\")===0){var t=o1.createObjectURL(i.data);return i.blob=i.data,i.data=new Image,i.data.src=t,i.type=Ei.TYPE.IMAGE,void(i.data.onload=function(){o1.revokeObjectURL(t),i.data.onload=null,e()})}}else{var n=i.xhr.getResponseHeader(\"content-type\");if(n&&n.indexOf(\"image\")===0)return i.data=new Image,i.data.src=\"data:\"+n+\";base64,\"+function(r){for(var o=\"\",s=0;s<r.length;){for(var a=[0,0,0],l=[0,0,0,0],u=0;u<a.length;++u)s<r.length?a[u]=255&r.charCodeAt(s++):a[u]=0;switch(l[0]=a[0]>>2,l[1]=(3&a[0])<<4|a[1]>>4,l[2]=(15&a[1])<<2|a[2]>>6,l[3]=63&a[2],s-(r.length-1)){case 2:l[3]=64,l[2]=64;break;case 1:l[3]=64}for(u=0;u<l.length;++u)o+=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\".charAt(l[u])}return o}(i.xhr.responseText),i.type=Ei.TYPE.IMAGE,void(i.data.onload=function(){i.data.onload=null,e()})}e()}else e()}}),Ds.registerPlugin(vR),function(i){i[i.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]=\"COMPRESSED_RGB_S3TC_DXT1_EXT\",i[i.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]=\"COMPRESSED_RGBA_S3TC_DXT1_EXT\",i[i.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]=\"COMPRESSED_RGBA_S3TC_DXT3_EXT\",i[i.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]=\"COMPRESSED_RGBA_S3TC_DXT5_EXT\",i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]=\"COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT\",i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]=\"COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT\",i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]=\"COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT\",i[i.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]=\"COMPRESSED_SRGB_S3TC_DXT1_EXT\",i[i.COMPRESSED_R11_EAC=37488]=\"COMPRESSED_R11_EAC\",i[i.COMPRESSED_SIGNED_R11_EAC=37489]=\"COMPRESSED_SIGNED_R11_EAC\",i[i.COMPRESSED_RG11_EAC=37490]=\"COMPRESSED_RG11_EAC\",i[i.COMPRESSED_SIGNED_RG11_EAC=37491]=\"COMPRESSED_SIGNED_RG11_EAC\",i[i.COMPRESSED_RGB8_ETC2=37492]=\"COMPRESSED_RGB8_ETC2\",i[i.COMPRESSED_RGBA8_ETC2_EAC=37496]=\"COMPRESSED_RGBA8_ETC2_EAC\",i[i.COMPRESSED_SRGB8_ETC2=37493]=\"COMPRESSED_SRGB8_ETC2\",i[i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]=\"COMPRESSED_SRGB8_ALPHA8_ETC2_EAC\",i[i.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]=\"COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2\",i[i.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]=\"COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2\",i[i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]=\"COMPRESSED_RGB_PVRTC_4BPPV1_IMG\",i[i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]=\"COMPRESSED_RGBA_PVRTC_4BPPV1_IMG\",i[i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]=\"COMPRESSED_RGB_PVRTC_2BPPV1_IMG\",i[i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]=\"COMPRESSED_RGBA_PVRTC_2BPPV1_IMG\",i[i.COMPRESSED_RGB_ETC1_WEBGL=36196]=\"COMPRESSED_RGB_ETC1_WEBGL\",i[i.COMPRESSED_RGB_ATC_WEBGL=35986]=\"COMPRESSED_RGB_ATC_WEBGL\",i[i.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]=\"COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL\",i[i.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]=\"COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL\"}(xn||(xn={}));var Xm=(($n={})[xn.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,$n[xn.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,$n[xn.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,$n[xn.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,$n[xn.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,$n[xn.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,$n[xn.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,$n[xn.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,$n[xn.COMPRESSED_R11_EAC]=.5,$n[xn.COMPRESSED_SIGNED_R11_EAC]=.5,$n[xn.COMPRESSED_RG11_EAC]=1,$n[xn.COMPRESSED_SIGNED_RG11_EAC]=1,$n[xn.COMPRESSED_RGB8_ETC2]=.5,$n[xn.COMPRESSED_RGBA8_ETC2_EAC]=1,$n[xn.COMPRESSED_SRGB8_ETC2]=.5,$n[xn.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,$n[xn.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,$n[xn.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,$n[xn.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,$n[xn.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,$n[xn.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,$n[xn.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,$n[xn.COMPRESSED_RGB_ETC1_WEBGL]=.5,$n[xn.COMPRESSED_RGB_ATC_WEBGL]=.5,$n[xn.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,$n[xn.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,$n),s1=function(i,e){return(s1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(i,e)};/*! *****************************************************************************\nCopyright (c) Microsoft Corporation. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */function a1(i,e){function t(){this.constructor=i}s1(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function _R(i,e){var t,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol==\"function\"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return function(h){if(t)throw new TypeError(\"Generator is already executing.\");for(;s;)try{if(t=1,n&&(r=2&h[0]?n.return:h[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,h[1])).done)return r;switch(n=0,r&&(h=[2&h[0],r.value]),h[0]){case 0:case 1:r=h;break;case 4:return s.label++,{value:h[1],done:!1};case 5:s.label++,n=h[1],h=[0];continue;case 7:h=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!((r=r.length>0&&r[r.length-1])||h[0]!==6&&h[0]!==2)){s=0;continue}if(h[0]===3&&(!r||h[1]>r[0]&&h[1]<r[3])){s.label=h[1];break}if(h[0]===6&&s.label<r[1]){s.label=r[1],r=h;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(h);break}r[2]&&s.ops.pop(),s.trys.pop();continue}h=e.call(i,s)}catch(d){h=[6,d],n=0}finally{t=r=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([l,u])}}}var qm,Fs,V0=function(i){function e(t,n){var r=i.call(this,t,n)||this;return r.format=n.format,r.levels=n.levels||1,r._width=n.width,r._height=n.height,r._extension=e._formatToExtension(r.format),(n.levelBuffers||r.buffer)&&(r._levelBuffers=n.levelBuffers||e._createLevelBuffers(t instanceof Uint8Array?t:r.buffer.uint8View,r.format,r.levels,4,4,r.width,r.height)),r}return a1(e,i),e.prototype.upload=function(t,n,r){var o=t.gl;if(!t.context.extensions[this._extension])throw new Error(this._extension+\" textures are not supported on the current machine\");if(!this._levelBuffers)return!1;for(var s=0,a=this.levels;s<a;s++){var l=this._levelBuffers[s],u=l.levelID,h=l.levelWidth,d=l.levelHeight,p=l.levelBuffer;o.compressedTexImage2D(o.TEXTURE_2D,u,this.format,h,d,0,p)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(t){if(t>=33776&&t<=33779)return\"s3tc\";if(t>=37488&&t<=37497)return\"etc\";if(t>=35840&&t<=35843)return\"pvrtc\";if(t>=36196)return\"etc1\";if(t>=35986&&t<=34798)return\"atc\";throw new Error(\"Invalid (compressed) texture format given!\")},e._createLevelBuffers=function(t,n,r,o,s,a,l){for(var u=new Array(r),h=t.byteOffset,d=a,p=l,m=d+o-1&~(o-1),g=p+s-1&~(s-1),_=m*g*Xm[n],y=0;y<r;y++)u[y]={levelID:y,levelWidth:r>1?d:m,levelHeight:r>1?p:g,levelBuffer:new Uint8Array(t.buffer,h,_)},h+=_,_=(m=(d=d>>1||1)+o-1&~(o-1))*(g=(p=p>>1||1)+s-1&~(s-1))*Xm[n];return u},e}(function(i){function e(t,n){n===void 0&&(n={width:1,height:1,autoLoad:!0});var r,o,s=this;return typeof t==\"string\"?(r=t,o=new Uint8Array):(r=null,o=t),(s=i.call(this,o,n)||this).origin=r,s.buffer=o?new H0(o):null,s.origin&&n.autoLoad!==!1&&s.load(),o&&o.length&&(s.loaded=!0,s.onBlobLoaded(s.buffer.rawBinaryData)),s}return a1(e,i),e.prototype.onBlobLoaded=function(t){},e.prototype.load=function(){return t=this,n=void 0,o=function(){var s;return _R(this,function(a){switch(a.label){case 0:return[4,fetch(this.origin)];case 1:return[4,a.sent().blob()];case 2:return[4,a.sent().arrayBuffer()];case 3:return s=a.sent(),this.data=new Uint32Array(s),this.buffer=new H0(s),this.loaded=!0,this.onBlobLoaded(s),this.update(),[2,this]}})},new((r=Promise)||(r=Promise))(function(s,a){function l(d){try{h(o.next(d))}catch(p){a(p)}}function u(d){try{h(o.throw(d))}catch(p){a(p)}}function h(d){d.done?s(d.value):new r(function(p){p(d.value)}).then(l,u)}h((o=o.apply(t,n||[])).next())});var t,n,r,o},e}(Dm)),yR=function(){function i(){}return i.use=function(e,t){var n=e.data;if(e.type===Ei.TYPE.JSON&&n&&n.cacheID&&n.textures){for(var r=n.textures,o=void 0,s=void 0,a=0,l=r.length;a<l;a++){var u=r[a],h=u.src,d=u.format;if(d||(s=h),i.textureFormats[d]){o=h;break}}if(!(o=o||s))return void t(new Error(\"Cannot load compressed-textures in \"+e.url+\", make sure you provide a fallback\"));if(o===e.url)return void t(new Error(\"URL of compressed texture cannot be the same as the manifest's URL\"));var p={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},m=bu.resolve(e.url.replace(this.baseUrl,\"\"),o),g=n.cacheID;this.add(g,m,p,function(_){if(_.error)t(_.error);else{var y=_.texture,w=y===void 0?null:y,R=_.textures,F=R===void 0?{}:R;Object.assign(e,{texture:w,textures:F}),t()}})}else t()},i.add=function(){var e=document.createElement(\"canvas\").getContext(\"webgl\");if(e){var t={s3tc:e.getExtension(\"WEBGL_compressed_texture_s3tc\"),s3tc_sRGB:e.getExtension(\"WEBGL_compressed_texture_s3tc_srgb\"),etc:e.getExtension(\"WEBGL_compressed_texture_etc\"),etc1:e.getExtension(\"WEBGL_compressed_texture_etc1\"),pvrtc:e.getExtension(\"WEBGL_compressed_texture_pvrtc\")||e.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\"),atc:e.getExtension(\"WEBGL_compressed_texture_atc\"),astc:e.getExtension(\"WEBGL_compressed_texture_astc\")};for(var n in i.textureExtensions=t,i.textureFormats={},t){var r=t[n];r&&Object.assign(i.textureFormats,Object.getPrototypeOf(r))}}else console.warn(\"WebGL not available for compressed textures. Silently failing.\")},i}();function l1(i,e,t){var n={textures:{},texture:null};return e&&e.map(function(r){return new rn(new Cn(r,Object.assign({mipmap:sl.OFF,alphaMode:Os.NO_PREMULTIPLIED_ALPHA},t)))}).forEach(function(r,o){var s=r.baseTexture,a=i+\"-\"+(o+1);Cn.addToCache(s,a),rn.addToCache(r,a),o===0&&(Cn.addToCache(s,i),rn.addToCache(r,i),n.texture=r),n.textures[a]=r}),n}Ei.setExtensionXhrType(\"dds\",Ei.XHR_RESPONSE_TYPE.BUFFER);var ls,W0,xR=3,bR=4,wR=7,SR=19,TR=2,ER=0,MR=1,AR=2,RR=3;(function(i){i[i.DXGI_FORMAT_UNKNOWN=0]=\"DXGI_FORMAT_UNKNOWN\",i[i.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]=\"DXGI_FORMAT_R32G32B32A32_TYPELESS\",i[i.DXGI_FORMAT_R32G32B32A32_FLOAT=2]=\"DXGI_FORMAT_R32G32B32A32_FLOAT\",i[i.DXGI_FORMAT_R32G32B32A32_UINT=3]=\"DXGI_FORMAT_R32G32B32A32_UINT\",i[i.DXGI_FORMAT_R32G32B32A32_SINT=4]=\"DXGI_FORMAT_R32G32B32A32_SINT\",i[i.DXGI_FORMAT_R32G32B32_TYPELESS=5]=\"DXGI_FORMAT_R32G32B32_TYPELESS\",i[i.DXGI_FORMAT_R32G32B32_FLOAT=6]=\"DXGI_FORMAT_R32G32B32_FLOAT\",i[i.DXGI_FORMAT_R32G32B32_UINT=7]=\"DXGI_FORMAT_R32G32B32_UINT\",i[i.DXGI_FORMAT_R32G32B32_SINT=8]=\"DXGI_FORMAT_R32G32B32_SINT\",i[i.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]=\"DXGI_FORMAT_R16G16B16A16_TYPELESS\",i[i.DXGI_FORMAT_R16G16B16A16_FLOAT=10]=\"DXGI_FORMAT_R16G16B16A16_FLOAT\",i[i.DXGI_FORMAT_R16G16B16A16_UNORM=11]=\"DXGI_FORMAT_R16G16B16A16_UNORM\",i[i.DXGI_FORMAT_R16G16B16A16_UINT=12]=\"DXGI_FORMAT_R16G16B16A16_UINT\",i[i.DXGI_FORMAT_R16G16B16A16_SNORM=13]=\"DXGI_FORMAT_R16G16B16A16_SNORM\",i[i.DXGI_FORMAT_R16G16B16A16_SINT=14]=\"DXGI_FORMAT_R16G16B16A16_SINT\",i[i.DXGI_FORMAT_R32G32_TYPELESS=15]=\"DXGI_FORMAT_R32G32_TYPELESS\",i[i.DXGI_FORMAT_R32G32_FLOAT=16]=\"DXGI_FORMAT_R32G32_FLOAT\",i[i.DXGI_FORMAT_R32G32_UINT=17]=\"DXGI_FORMAT_R32G32_UINT\",i[i.DXGI_FORMAT_R32G32_SINT=18]=\"DXGI_FORMAT_R32G32_SINT\",i[i.DXGI_FORMAT_R32G8X24_TYPELESS=19]=\"DXGI_FORMAT_R32G8X24_TYPELESS\",i[i.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]=\"DXGI_FORMAT_D32_FLOAT_S8X24_UINT\",i[i.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]=\"DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS\",i[i.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]=\"DXGI_FORMAT_X32_TYPELESS_G8X24_UINT\",i[i.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]=\"DXGI_FORMAT_R10G10B10A2_TYPELESS\",i[i.DXGI_FORMAT_R10G10B10A2_UNORM=24]=\"DXGI_FORMAT_R10G10B10A2_UNORM\",i[i.DXGI_FORMAT_R10G10B10A2_UINT=25]=\"DXGI_FORMAT_R10G10B10A2_UINT\",i[i.DXGI_FORMAT_R11G11B10_FLOAT=26]=\"DXGI_FORMAT_R11G11B10_FLOAT\",i[i.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]=\"DXGI_FORMAT_R8G8B8A8_TYPELESS\",i[i.DXGI_FORMAT_R8G8B8A8_UNORM=28]=\"DXGI_FORMAT_R8G8B8A8_UNORM\",i[i.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]=\"DXGI_FORMAT_R8G8B8A8_UNORM_SRGB\",i[i.DXGI_FORMAT_R8G8B8A8_UINT=30]=\"DXGI_FORMAT_R8G8B8A8_UINT\",i[i.DXGI_FORMAT_R8G8B8A8_SNORM=31]=\"DXGI_FORMAT_R8G8B8A8_SNORM\",i[i.DXGI_FORMAT_R8G8B8A8_SINT=32]=\"DXGI_FORMAT_R8G8B8A8_SINT\",i[i.DXGI_FORMAT_R16G16_TYPELESS=33]=\"DXGI_FORMAT_R16G16_TYPELESS\",i[i.DXGI_FORMAT_R16G16_FLOAT=34]=\"DXGI_FORMAT_R16G16_FLOAT\",i[i.DXGI_FORMAT_R16G16_UNORM=35]=\"DXGI_FORMAT_R16G16_UNORM\",i[i.DXGI_FORMAT_R16G16_UINT=36]=\"DXGI_FORMAT_R16G16_UINT\",i[i.DXGI_FORMAT_R16G16_SNORM=37]=\"DXGI_FORMAT_R16G16_SNORM\",i[i.DXGI_FORMAT_R16G16_SINT=38]=\"DXGI_FORMAT_R16G16_SINT\",i[i.DXGI_FORMAT_R32_TYPELESS=39]=\"DXGI_FORMAT_R32_TYPELESS\",i[i.DXGI_FORMAT_D32_FLOAT=40]=\"DXGI_FORMAT_D32_FLOAT\",i[i.DXGI_FORMAT_R32_FLOAT=41]=\"DXGI_FORMAT_R32_FLOAT\",i[i.DXGI_FORMAT_R32_UINT=42]=\"DXGI_FORMAT_R32_UINT\",i[i.DXGI_FORMAT_R32_SINT=43]=\"DXGI_FORMAT_R32_SINT\",i[i.DXGI_FORMAT_R24G8_TYPELESS=44]=\"DXGI_FORMAT_R24G8_TYPELESS\",i[i.DXGI_FORMAT_D24_UNORM_S8_UINT=45]=\"DXGI_FORMAT_D24_UNORM_S8_UINT\",i[i.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]=\"DXGI_FORMAT_R24_UNORM_X8_TYPELESS\",i[i.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]=\"DXGI_FORMAT_X24_TYPELESS_G8_UINT\",i[i.DXGI_FORMAT_R8G8_TYPELESS=48]=\"DXGI_FORMAT_R8G8_TYPELESS\",i[i.DXGI_FORMAT_R8G8_UNORM=49]=\"DXGI_FORMAT_R8G8_UNORM\",i[i.DXGI_FORMAT_R8G8_UINT=50]=\"DXGI_FORMAT_R8G8_UINT\",i[i.DXGI_FORMAT_R8G8_SNORM=51]=\"DXGI_FORMAT_R8G8_SNORM\",i[i.DXGI_FORMAT_R8G8_SINT=52]=\"DXGI_FORMAT_R8G8_SINT\",i[i.DXGI_FORMAT_R16_TYPELESS=53]=\"DXGI_FORMAT_R16_TYPELESS\",i[i.DXGI_FORMAT_R16_FLOAT=54]=\"DXGI_FORMAT_R16_FLOAT\",i[i.DXGI_FORMAT_D16_UNORM=55]=\"DXGI_FORMAT_D16_UNORM\",i[i.DXGI_FORMAT_R16_UNORM=56]=\"DXGI_FORMAT_R16_UNORM\",i[i.DXGI_FORMAT_R16_UINT=57]=\"DXGI_FORMAT_R16_UINT\",i[i.DXGI_FORMAT_R16_SNORM=58]=\"DXGI_FORMAT_R16_SNORM\",i[i.DXGI_FORMAT_R16_SINT=59]=\"DXGI_FORMAT_R16_SINT\",i[i.DXGI_FORMAT_R8_TYPELESS=60]=\"DXGI_FORMAT_R8_TYPELESS\",i[i.DXGI_FORMAT_R8_UNORM=61]=\"DXGI_FORMAT_R8_UNORM\",i[i.DXGI_FORMAT_R8_UINT=62]=\"DXGI_FORMAT_R8_UINT\",i[i.DXGI_FORMAT_R8_SNORM=63]=\"DXGI_FORMAT_R8_SNORM\",i[i.DXGI_FORMAT_R8_SINT=64]=\"DXGI_FORMAT_R8_SINT\",i[i.DXGI_FORMAT_A8_UNORM=65]=\"DXGI_FORMAT_A8_UNORM\",i[i.DXGI_FORMAT_R1_UNORM=66]=\"DXGI_FORMAT_R1_UNORM\",i[i.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]=\"DXGI_FORMAT_R9G9B9E5_SHAREDEXP\",i[i.DXGI_FORMAT_R8G8_B8G8_UNORM=68]=\"DXGI_FORMAT_R8G8_B8G8_UNORM\",i[i.DXGI_FORMAT_G8R8_G8B8_UNORM=69]=\"DXGI_FORMAT_G8R8_G8B8_UNORM\",i[i.DXGI_FORMAT_BC1_TYPELESS=70]=\"DXGI_FORMAT_BC1_TYPELESS\",i[i.DXGI_FORMAT_BC1_UNORM=71]=\"DXGI_FORMAT_BC1_UNORM\",i[i.DXGI_FORMAT_BC1_UNORM_SRGB=72]=\"DXGI_FORMAT_BC1_UNORM_SRGB\",i[i.DXGI_FORMAT_BC2_TYPELESS=73]=\"DXGI_FORMAT_BC2_TYPELESS\",i[i.DXGI_FORMAT_BC2_UNORM=74]=\"DXGI_FORMAT_BC2_UNORM\",i[i.DXGI_FORMAT_BC2_UNORM_SRGB=75]=\"DXGI_FORMAT_BC2_UNORM_SRGB\",i[i.DXGI_FORMAT_BC3_TYPELESS=76]=\"DXGI_FORMAT_BC3_TYPELESS\",i[i.DXGI_FORMAT_BC3_UNORM=77]=\"DXGI_FORMAT_BC3_UNORM\",i[i.DXGI_FORMAT_BC3_UNORM_SRGB=78]=\"DXGI_FORMAT_BC3_UNORM_SRGB\",i[i.DXGI_FORMAT_BC4_TYPELESS=79]=\"DXGI_FORMAT_BC4_TYPELESS\",i[i.DXGI_FORMAT_BC4_UNORM=80]=\"DXGI_FORMAT_BC4_UNORM\",i[i.DXGI_FORMAT_BC4_SNORM=81]=\"DXGI_FORMAT_BC4_SNORM\",i[i.DXGI_FORMAT_BC5_TYPELESS=82]=\"DXGI_FORMAT_BC5_TYPELESS\",i[i.DXGI_FORMAT_BC5_UNORM=83]=\"DXGI_FORMAT_BC5_UNORM\",i[i.DXGI_FORMAT_BC5_SNORM=84]=\"DXGI_FORMAT_BC5_SNORM\",i[i.DXGI_FORMAT_B5G6R5_UNORM=85]=\"DXGI_FORMAT_B5G6R5_UNORM\",i[i.DXGI_FORMAT_B5G5R5A1_UNORM=86]=\"DXGI_FORMAT_B5G5R5A1_UNORM\",i[i.DXGI_FORMAT_B8G8R8A8_UNORM=87]=\"DXGI_FORMAT_B8G8R8A8_UNORM\",i[i.DXGI_FORMAT_B8G8R8X8_UNORM=88]=\"DXGI_FORMAT_B8G8R8X8_UNORM\",i[i.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]=\"DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM\",i[i.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]=\"DXGI_FORMAT_B8G8R8A8_TYPELESS\",i[i.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]=\"DXGI_FORMAT_B8G8R8A8_UNORM_SRGB\",i[i.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]=\"DXGI_FORMAT_B8G8R8X8_TYPELESS\",i[i.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]=\"DXGI_FORMAT_B8G8R8X8_UNORM_SRGB\",i[i.DXGI_FORMAT_BC6H_TYPELESS=94]=\"DXGI_FORMAT_BC6H_TYPELESS\",i[i.DXGI_FORMAT_BC6H_UF16=95]=\"DXGI_FORMAT_BC6H_UF16\",i[i.DXGI_FORMAT_BC6H_SF16=96]=\"DXGI_FORMAT_BC6H_SF16\",i[i.DXGI_FORMAT_BC7_TYPELESS=97]=\"DXGI_FORMAT_BC7_TYPELESS\",i[i.DXGI_FORMAT_BC7_UNORM=98]=\"DXGI_FORMAT_BC7_UNORM\",i[i.DXGI_FORMAT_BC7_UNORM_SRGB=99]=\"DXGI_FORMAT_BC7_UNORM_SRGB\",i[i.DXGI_FORMAT_AYUV=100]=\"DXGI_FORMAT_AYUV\",i[i.DXGI_FORMAT_Y410=101]=\"DXGI_FORMAT_Y410\",i[i.DXGI_FORMAT_Y416=102]=\"DXGI_FORMAT_Y416\",i[i.DXGI_FORMAT_NV12=103]=\"DXGI_FORMAT_NV12\",i[i.DXGI_FORMAT_P010=104]=\"DXGI_FORMAT_P010\",i[i.DXGI_FORMAT_P016=105]=\"DXGI_FORMAT_P016\",i[i.DXGI_FORMAT_420_OPAQUE=106]=\"DXGI_FORMAT_420_OPAQUE\",i[i.DXGI_FORMAT_YUY2=107]=\"DXGI_FORMAT_YUY2\",i[i.DXGI_FORMAT_Y210=108]=\"DXGI_FORMAT_Y210\",i[i.DXGI_FORMAT_Y216=109]=\"DXGI_FORMAT_Y216\",i[i.DXGI_FORMAT_NV11=110]=\"DXGI_FORMAT_NV11\",i[i.DXGI_FORMAT_AI44=111]=\"DXGI_FORMAT_AI44\",i[i.DXGI_FORMAT_IA44=112]=\"DXGI_FORMAT_IA44\",i[i.DXGI_FORMAT_P8=113]=\"DXGI_FORMAT_P8\",i[i.DXGI_FORMAT_A8P8=114]=\"DXGI_FORMAT_A8P8\",i[i.DXGI_FORMAT_B4G4R4A4_UNORM=115]=\"DXGI_FORMAT_B4G4R4A4_UNORM\",i[i.DXGI_FORMAT_P208=116]=\"DXGI_FORMAT_P208\",i[i.DXGI_FORMAT_V208=117]=\"DXGI_FORMAT_V208\",i[i.DXGI_FORMAT_V408=118]=\"DXGI_FORMAT_V408\",i[i.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]=\"DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE\",i[i.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]=\"DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE\",i[i.DXGI_FORMAT_FORCE_UINT=121]=\"DXGI_FORMAT_FORCE_UINT\"})(ls||(ls={})),function(i){i[i.DDS_DIMENSION_TEXTURE1D=2]=\"DDS_DIMENSION_TEXTURE1D\",i[i.DDS_DIMENSION_TEXTURE2D=3]=\"DDS_DIMENSION_TEXTURE2D\",i[i.DDS_DIMENSION_TEXTURE3D=6]=\"DDS_DIMENSION_TEXTURE3D\"}(W0||(W0={}));var pp,Sc,Ym,CR=((qm={})[827611204]=xn.COMPRESSED_RGBA_S3TC_DXT1_EXT,qm[861165636]=xn.COMPRESSED_RGBA_S3TC_DXT3_EXT,qm[894720068]=xn.COMPRESSED_RGBA_S3TC_DXT5_EXT,qm),PR=((Fs={})[ls.DXGI_FORMAT_BC1_TYPELESS]=xn.COMPRESSED_RGBA_S3TC_DXT1_EXT,Fs[ls.DXGI_FORMAT_BC1_UNORM]=xn.COMPRESSED_RGBA_S3TC_DXT1_EXT,Fs[ls.DXGI_FORMAT_BC2_TYPELESS]=xn.COMPRESSED_RGBA_S3TC_DXT3_EXT,Fs[ls.DXGI_FORMAT_BC2_UNORM]=xn.COMPRESSED_RGBA_S3TC_DXT3_EXT,Fs[ls.DXGI_FORMAT_BC3_TYPELESS]=xn.COMPRESSED_RGBA_S3TC_DXT5_EXT,Fs[ls.DXGI_FORMAT_BC3_UNORM]=xn.COMPRESSED_RGBA_S3TC_DXT5_EXT,Fs[ls.DXGI_FORMAT_BC1_UNORM_SRGB]=xn.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,Fs[ls.DXGI_FORMAT_BC2_UNORM_SRGB]=xn.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,Fs[ls.DXGI_FORMAT_BC3_UNORM_SRGB]=xn.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,Fs),IR=function(){function i(){}return i.use=function(e,t){if(e.extension===\"dds\"&&e.data)try{Object.assign(e,l1(e.name||e.url,i.parse(e.data),e.metadata))}catch(n){return void t(n)}t()},i.parse=function(e){var t=new Uint32Array(e);if(t[0]!==542327876)throw new Error(\"Invalid DDS file magic word\");var n=new Uint32Array(e,0,124/Uint32Array.BYTES_PER_ELEMENT),r=n[xR],o=n[bR],s=n[wR],a=new Uint32Array(e,SR*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),l=a[1];if(4&l){var u=a[TR];if(u!==808540228){var h=CR[u],d=new Uint8Array(e,128);return[new V0(d,{format:h,width:o,height:r,levels:s})]}var p=new Uint32Array(t.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),m=p[ER],g=p[MR],_=p[AR],y=p[RR],w=PR[m];if(w===void 0)throw new Error(\"DDSLoader cannot parse texture data with DXGI format \"+m);if(_===4)throw new Error(\"DDSLoader does not support cubemap textures\");if(g===W0.DDS_DIMENSION_TEXTURE3D)throw new Error(\"DDSLoader does not supported 3D texture data\");var R=new Array;if(y===1)R.push(new Uint8Array(e,148));else{for(var F=Xm[w],U=0,B=o,V=r,G=0;G<s;G++)U+=Math.max(1,B+3&-4)*Math.max(1,V+3&-4)*F,B>>>=1,V>>>=1;var W=148;for(G=0;G<y;G++)R.push(new Uint8Array(e,W,U)),W+=U}return R.map(function(ge){return new V0(ge,{format:w,width:o,height:r,levels:s})})}throw 64&l?new Error(\"DDSLoader does not support uncompressed texture data.\"):512&l?new Error(\"DDSLoader does not supported YUV uncompressed texture data.\"):131072&l?new Error(\"DDSLoader does not support single-channel (lumninance) texture data!\"):2&l?new Error(\"DDSLoader does not support single-channel (alpha) texture data!\"):new Error(\"DDSLoader failed to load a texture file due to an unknown reason!\")},i}();Ei.setExtensionXhrType(\"ktx\",Ei.XHR_RESPONSE_TYPE.BUFFER);var u1=[171,75,84,88,32,49,49,187,13,10,26,10],OR=12,LR=16,NR=24,DR=28,FR=36,BR=40,kR=44,UR=48,GR=52,HR=56,zR=60,h1=((pp={})[sn.UNSIGNED_BYTE]=1,pp[sn.UNSIGNED_SHORT]=2,pp[sn.FLOAT]=4,pp[sn.HALF_FLOAT]=8,pp),jR=((Sc={})[Dt.RGBA]=4,Sc[Dt.RGB]=3,Sc[Dt.LUMINANCE]=1,Sc[Dt.LUMINANCE_ALPHA]=2,Sc[Dt.ALPHA]=1,Sc),VR=((Ym={})[sn.UNSIGNED_SHORT_4_4_4_4]=2,Ym[sn.UNSIGNED_SHORT_5_5_5_1]=2,Ym[sn.UNSIGNED_SHORT_5_6_5]=2,Ym),WR=function(){function i(){}return i.use=function(e,t){if(e.extension===\"ktx\"&&e.data)try{var n=e.name||e.url;Object.assign(e,l1(n,i.parse(n,e.data),e.metadata))}catch(r){return void t(r)}t()},i.parse=function(e,t){var n=new DataView(t);if(!i.validate(e,n))return null;var r=n.getUint32(OR,!0)===67305985,o=n.getUint32(LR,r),s=n.getUint32(NR,r),a=n.getUint32(DR,r),l=n.getUint32(FR,r),u=n.getUint32(BR,r)||1,h=n.getUint32(kR,r)||1,d=n.getUint32(UR,r)||1,p=n.getUint32(GR,r),m=n.getUint32(HR,r),g=n.getUint32(zR,r);if(u===0||h!==1)throw new Error(\"Only 2D textures are supported\");if(p!==1)throw new Error(\"CubeTextures are not supported by KTXLoader yet!\");if(d!==1)throw new Error(\"WebGL does not support array textures\");var _,y=l+3&-4,w=u+3&-4,R=new Array(d),F=l*u;if(o===0&&(F=y*w),(_=o!==0?h1[o]?h1[o]*jR[s]:VR[o]:Xm[a])===void 0)throw new Error(\"Unable to resolve the pixel format stored in the *.ktx file!\");for(var U=F*_,B=l,V=u,G=y,W=w,ge=64+g,he=0;he<m;he++){for(var se=n.getUint32(ge,r),de=ge+4,ue=0;ue<d;ue++){var xe=R[ue];xe||(xe=R[ue]=new Array(m)),xe[he]={levelID:he,levelWidth:m>1?B:G,levelHeight:m>1?V:W,levelBuffer:new Uint8Array(t,de,U)},de+=U}ge=(ge+=se+4)%4!=0?ge+4-ge%4:ge,U=(G=(B=B>>1||1)+4-1&-4)*(W=(V=V>>1||1)+4-1&-4)*_}if(o!==0)throw new Error(\"TODO: Uncompressed\");return R.map(function(We){return new V0(null,{format:a,width:l,height:u,levels:m,levelBuffers:We})})},i.validate=function(e,t){for(var n=0;n<u1.length;n++)if(t.getUint8(n)!==u1[n])return console.error(e+\" is not a valid *.ktx file!\"),!1;return!0},i}(),c1=function(i,e){return(c1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(i,e)};function d1(i,e){function t(){this.constructor=i}c1(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}(function(i){function e(t,n,r,o){t===void 0&&(t=1500),r===void 0&&(r=16384),o===void 0&&(o=!1);var s=i.call(this)||this;return r>16384&&(r=16384),s._properties=[!1,!0,!1,!1,!1],s._maxSize=t,s._batchSize=r,s._buffers=null,s._bufferUpdateIDs=[],s._updateID=0,s.interactiveChildren=!1,s.blendMode=Qt.NORMAL,s.autoResize=o,s.roundPixels=!0,s.baseTexture=null,s.setProperties(n),s._tint=0,s.tintRgb=new Float32Array(4),s.tint=16777215,s}d1(e,i),e.prototype.setProperties=function(t){t&&(this._properties[0]=\"vertices\"in t||\"scale\"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]=\"position\"in t?!!t.position:this._properties[1],this._properties[2]=\"rotation\"in t?!!t.rotation:this._properties[2],this._properties[3]=\"uvs\"in t?!!t.uvs:this._properties[3],this._properties[4]=\"tint\"in t||\"alpha\"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,\"tint\",{get:function(){return this._tint},set:function(t){this._tint=t,wu(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var n=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once(\"update\",function(){return n.onChildrenChange(0)})),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var n=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<n;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[n]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(t){i.prototype.destroy.call(this,t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}})(Ki);var cl,dl,p1=function(){function i(e,t,n){this.geometry=new bc,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var r=0;r<e.length;++r){var o=e[r];o={attributeName:o.attributeName,size:o.size,uploadFunction:o.uploadFunction,type:o.type||sn.FLOAT,offset:o.offset},t[r]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return i.prototype.initBuffers=function(){var e=this.geometry,t=0;this.indexBuffer=new Wi($x(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n)(a=this.dynamicProperties[n]).offset=t,t+=a.size,this.dynamicStride+=a.size;var r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new Wi(this.dynamicData,!1,!1);var o=0;for(this.staticStride=0,n=0;n<this.staticProperties.length;++n)(a=this.staticProperties[n]).offset=o,o+=a.size,this.staticStride+=a.size;var s=new ArrayBuffer(this.size*this.staticStride*4*4);for(this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new Wi(this.staticData,!0,!1),n=0;n<this.dynamicProperties.length;++n){var a=this.dynamicProperties[n];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===sn.UNSIGNED_BYTE,a.type,4*this.dynamicStride,4*a.offset)}for(n=0;n<this.staticProperties.length;++n)a=this.staticProperties[n],e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===sn.UNSIGNED_BYTE,a.type,4*this.staticStride,4*a.offset)},i.prototype.uploadDynamic=function(e,t,n){for(var r=0;r<this.dynamicProperties.length;r++){var o=this.dynamicProperties[r];o.uploadFunction(e,t,n,o.type===sn.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset)}this.dynamicBuffer._updateID++},i.prototype.uploadStatic=function(e,t,n){for(var r=0;r<this.staticProperties.length;r++){var o=this.staticProperties[r];o.uploadFunction(e,t,n,o.type===sn.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,o.offset)}this.staticBuffer._updateID++},i.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},i}(),XR=function(i){function e(t){var n=i.call(this,t)||this;return n.shader=null,n.properties=null,n.tempMatrix=new Oi,n.properties=[{attributeName:\"aVertexPosition\",size:2,uploadFunction:n.uploadVertices,offset:0},{attributeName:\"aPositionCoord\",size:2,uploadFunction:n.uploadPosition,offset:0},{attributeName:\"aRotation\",size:1,uploadFunction:n.uploadRotation,offset:0},{attributeName:\"aTextureCoord\",size:2,uploadFunction:n.uploadUvs,offset:0},{attributeName:\"aColor\",size:1,type:sn.UNSIGNED_BYTE,uploadFunction:n.uploadTint,offset:0}],n.shader=Oa.from(`attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n`,`varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}`,{}),n.state=Pu.for2d(),n}return d1(e,i),e.prototype.render=function(t){var n=t.children,r=t._maxSize,o=t._batchSize,s=this.renderer,a=n.length;if(a!==0){a>r&&!t.autoResize&&(a=r);var l=t._buffers;l||(l=t._buffers=this.generateBuffers(t));var u=n[0]._texture.baseTexture;this.state.blendMode=y0(t.blendMode,u.alphaMode),s.state.set(this.state);var h=s.gl,d=t.worldTransform.copyTo(this.tempMatrix);d.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=d.toArray(!0),this.shader.uniforms.uColor=Yx(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,u.alphaMode),this.shader.uniforms.uSampler=u,this.renderer.shader.bind(this.shader);for(var p=!1,m=0,g=0;m<a;m+=o,g+=1){var _=a-m;_>o&&(_=o),g>=l.length&&l.push(this._generateOneMoreBuffer(t));var y=l[g];y.uploadDynamic(n,m,_);var w=t._bufferUpdateIDs[g]||0;(p=p||y._updateID<w)&&(y._updateID=t._updateID,y.uploadStatic(n,m,_)),s.geometry.bind(y.geometry),h.drawElements(h.TRIANGLES,6*_,h.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var n=[],r=t._maxSize,o=t._batchSize,s=t._properties,a=0;a<r;a+=o)n.push(new p1(this.properties,s,o));return n},e.prototype._generateOneMoreBuffer=function(t){var n=t._batchSize,r=t._properties;return new p1(this.properties,r,n)},e.prototype.uploadVertices=function(t,n,r,o,s,a){for(var l=0,u=0,h=0,d=0,p=0;p<r;++p){var m=t[n+p],g=m._texture,_=m.scale.x,y=m.scale.y,w=g.trim,R=g.orig;w?(l=(u=w.x-m.anchor.x*R.width)+w.width,h=(d=w.y-m.anchor.y*R.height)+w.height):(l=R.width*(1-m.anchor.x),u=R.width*-m.anchor.x,h=R.height*(1-m.anchor.y),d=R.height*-m.anchor.y),o[a]=u*_,o[a+1]=d*y,o[a+s]=l*_,o[a+s+1]=d*y,o[a+2*s]=l*_,o[a+2*s+1]=h*y,o[a+3*s]=u*_,o[a+3*s+1]=h*y,a+=4*s}},e.prototype.uploadPosition=function(t,n,r,o,s,a){for(var l=0;l<r;l++){var u=t[n+l].position;o[a]=u.x,o[a+1]=u.y,o[a+s]=u.x,o[a+s+1]=u.y,o[a+2*s]=u.x,o[a+2*s+1]=u.y,o[a+3*s]=u.x,o[a+3*s+1]=u.y,a+=4*s}},e.prototype.uploadRotation=function(t,n,r,o,s,a){for(var l=0;l<r;l++){var u=t[n+l].rotation;o[a]=u,o[a+s]=u,o[a+2*s]=u,o[a+3*s]=u,a+=4*s}},e.prototype.uploadUvs=function(t,n,r,o,s,a){for(var l=0;l<r;++l){var u=t[n+l]._texture._uvs;u?(o[a]=u.x0,o[a+1]=u.y0,o[a+s]=u.x1,o[a+s+1]=u.y1,o[a+2*s]=u.x2,o[a+2*s+1]=u.y2,o[a+3*s]=u.x3,o[a+3*s+1]=u.y3,a+=4*s):(o[a]=0,o[a+1]=0,o[a+s]=0,o[a+s+1]=0,o[a+2*s]=0,o[a+2*s+1]=0,o[a+3*s]=0,o[a+3*s+1]=0,a+=4*s)}},e.prototype.uploadTint=function(t,n,r,o,s,a){for(var l=0;l<r;++l){var u=t[n+l],h=u._texture.baseTexture.alphaMode>0,d=u.alpha,p=d<1&&h?Am(u._tintRGB,d):u._tintRGB+(255*d<<24);o[a]=p,o[a+s]=p,o[a+2*s]=p,o[a+3*s]=p,a+=4*s}},e.prototype.destroy=function(){i.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e}(km);(function(i){i.MITER=\"miter\",i.BEVEL=\"bevel\",i.ROUND=\"round\"})(cl||(cl={})),function(i){i.BUTT=\"butt\",i.ROUND=\"round\",i.SQUARE=\"square\"}(dl||(dl={}));var fp={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(i,e){if(e===void 0&&(e=20),!this.adaptive||!i||isNaN(i))return e;var t=Math.ceil(i/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}},f1=function(){function i(){this.color=16777215,this.alpha=1,this.texture=rn.WHITE,this.matrix=null,this.visible=!1,this.reset()}return i.prototype.clone=function(){var e=new i;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},i.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=rn.WHITE,this.matrix=null,this.visible=!1},i.prototype.destroy=function(){this.texture=null,this.matrix=null},i}(),m1=function(i,e){return(m1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(i,e)};function X0(i,e){function t(){this.constructor=i}m1(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var g1={build:function(i){i.points=i.shape.points.slice()},triangulate:function(i,e){var t=i.points,n=i.holes,r=e.points,o=e.indices;if(t.length>=6){for(var s=[],a=0;a<n.length;a++){var l=n[a];s.push(t.length/2),t=t.concat(l.points)}var u=d0()(t,s,2);if(!u)return;var h=r.length/2;for(a=0;a<u.length;a+=3)o.push(u[a]+h),o.push(u[a+1]+h),o.push(u[a+2]+h);for(a=0;a<t.length;a++)r.push(t[a])}}},v1={build:function(i){var e,t,n=i.shape,r=i.points,o=n.x,s=n.y;if(r.length=0,i.type===Pi.CIRC)e=n.radius,t=n.radius;else{var a=i.shape;e=a.width,t=a.height}if(e!==0&&t!==0){var l=Math.floor(30*Math.sqrt(n.radius))||Math.floor(15*Math.sqrt(e+t));l/=2.3;for(var u=2*Math.PI/l,h=0;h<l-.5;h++)r.push(o+Math.sin(-u*h)*e,s+Math.cos(-u*h)*t);r.push(r[0],r[1])}},triangulate:function(i,e){var t=i.points,n=e.points,r=e.indices,o=n.length/2,s=o,a=i.shape,l=i.matrix,u=a.x,h=a.y;n.push(i.matrix?l.a*u+l.c*h+l.tx:u,i.matrix?l.b*u+l.d*h+l.ty:h);for(var d=0;d<t.length;d+=2)n.push(t[d],t[d+1]),r.push(o++,s,o)}},qR={build:function(i){var e=i.shape,t=e.x,n=e.y,r=e.width,o=e.height,s=i.points;s.length=0,s.push(t,n,t+r,n,t+r,n+o,t,n+o)},triangulate:function(i,e){var t=i.points,n=e.points,r=n.length/2;n.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),e.indices.push(r,r+1,r+2,r+1,r+2,r+3)}};function Tc(i,e,t){return i+(e-i)*t}function $m(i,e,t,n,r,o,s){s===void 0&&(s=[]);for(var a=s,l=0,u=0,h=0,d=0,p=0,m=0,g=0,_=0;g<=20;++g)l=Tc(i,t,_=g/20),u=Tc(e,n,_),h=Tc(t,r,_),d=Tc(n,o,_),p=Tc(l,h,_),m=Tc(u,d,_),g===0&&a[a.length-2]===p&&a[a.length-1]===m||a.push(p,m);return a}var YR={build:function(i){var e=i.shape,t=i.points,n=e.x,r=e.y,o=e.width,s=e.height,a=Math.max(0,Math.min(e.radius,Math.min(o,s)/2));t.length=0,a?($m(n,r+a,n,r,n+a,r,t),$m(n+o-a,r,n+o,r,n+o,r+a,t),$m(n+o,r+s-a,n+o,r+s,n+o-a,r+s,t),$m(n+a,r+s,n,r+s,n,r+s-a,t)):t.push(n,r,n+o,r,n+o,r+s,n,r+s)},triangulate:function(i,e){for(var t=i.points,n=e.points,r=e.indices,o=n.length/2,s=d0()(t,null,2),a=0,l=s.length;a<l;a+=3)r.push(s[a]+o),r.push(s[a+1]+o),r.push(s[a+2]+o);for(a=0,l=t.length;a<l;a++)n.push(t[a],t[++a])}};function _1(i,e,t,n,r,o,s,a){var l,u;s?(l=n,u=-t):(l=-n,u=t);var h=i-t*r+l,d=e-n*r+u,p=i+t*o+l,m=e+n*o+u;return a.push(h,d),a.push(p,m),2}function Ec(i,e,t,n,r,o,s,a){var l=t-i,u=n-e,h=Math.atan2(l,u),d=Math.atan2(r-i,o-e);a&&h<d?h+=2*Math.PI:!a&&h>d&&(d+=2*Math.PI);var p=h,m=d-h,g=Math.abs(m),_=Math.sqrt(l*l+u*u),y=1+(15*g*Math.sqrt(_)/Math.PI>>0),w=m/y;if(p+=w,a){s.push(i,e),s.push(t,n);for(var R=1,F=p;R<y;R++,F+=w)s.push(i,e),s.push(i+Math.sin(F)*_,e+Math.cos(F)*_);s.push(i,e),s.push(r,o)}else{for(s.push(t,n),s.push(i,e),R=1,F=p;R<y;R++,F+=w)s.push(i+Math.sin(F)*_,e+Math.cos(F)*_),s.push(i,e);s.push(r,o),s.push(i,e)}return 2*y}function y1(i,e){i.lineStyle.native?function(t,n){var r=0,o=t.shape,s=t.points||o.points,a=o.type!==Pi.POLY||o.closeStroke;if(s.length!==0){var l=n.points,u=n.indices,h=s.length/2,d=l.length/2,p=d;for(l.push(s[0],s[1]),r=1;r<h;r++)l.push(s[2*r],s[2*r+1]),u.push(p,p+1),p++;a&&u.push(p,d)}}(i,e):function(t,n){var r=t.shape,o=t.points||r.points.slice(),s=n.closePointEps;if(o.length!==0){var a=t.lineStyle,l=new Ii(o[0],o[1]),u=new Ii(o[o.length-2],o[o.length-1]),h=r.type!==Pi.POLY||r.closeStroke,d=Math.abs(l.x-u.x)<s&&Math.abs(l.y-u.y)<s;if(h){o=o.slice(),d&&(o.pop(),o.pop(),u.set(o[o.length-2],o[o.length-1]));var p=.5*(l.x+u.x),m=.5*(u.y+l.y);o.unshift(p,m),o.push(p,m)}var g=n.points,_=o.length/2,y=o.length,w=g.length/2,R=a.width/2,F=R*R,U=a.miterLimit*a.miterLimit,B=o[0],V=o[1],G=o[2],W=o[3],ge=0,he=0,se=-(V-W),de=B-G,ue=0,xe=0,We=Math.sqrt(se*se+de*de);se/=We,de/=We,se*=R,de*=R;var Ge=a.alignment,Ae=2*(1-Ge),Re=2*Ge;h||(a.cap===dl.ROUND?y+=Ec(B-se*(Ae-Re)*.5,V-de*(Ae-Re)*.5,B-se*Ae,V-de*Ae,B+se*Re,V+de*Re,g,!0)+2:a.cap===dl.SQUARE&&(y+=_1(B,V,se,de,Ae,Re,!0,g))),g.push(B-se*Ae,V-de*Ae),g.push(B+se*Re,V+de*Re);for(var Ze=1;Ze<_-1;++Ze){B=o[2*(Ze-1)],V=o[2*(Ze-1)+1],G=o[2*Ze],W=o[2*Ze+1],ge=o[2*(Ze+1)],he=o[2*(Ze+1)+1],se=-(V-W),de=B-G,se/=We=Math.sqrt(se*se+de*de),de/=We,se*=R,de*=R,ue=-(W-he),xe=G-ge,ue/=We=Math.sqrt(ue*ue+xe*xe),xe/=We,ue*=R,xe*=R;var lt=G-B,dt=V-W,ce=G-ge,fe=he-W,Qe=dt*ce-fe*lt,Xe=Qe<0;if(Math.abs(Qe)<.1)g.push(G-se*Ae,W-de*Ae),g.push(G+se*Re,W+de*Re);else{var je=(-se+B)*(-de+W)-(-se+G)*(-de+V),ft=(-ue+ge)*(-xe+W)-(-ue+G)*(-xe+he),mt=(lt*ft-ce*je)/Qe,Ke=(fe*je-dt*ft)/Qe,oe=(mt-G)*(mt-G)+(Ke-W)*(Ke-W),Ee=G+(mt-G)*Ae,He=W+(Ke-W)*Ae,ze=G-(mt-G)*Re,Pe=W-(Ke-W)*Re,tt=Xe?Ae:Re;oe<=Math.min(lt*lt+dt*dt,ce*ce+fe*fe)+tt*tt*F?a.join===cl.BEVEL||oe/F>U?(Xe?(g.push(Ee,He),g.push(G+se*Re,W+de*Re),g.push(Ee,He),g.push(G+ue*Re,W+xe*Re)):(g.push(G-se*Ae,W-de*Ae),g.push(ze,Pe),g.push(G-ue*Ae,W-xe*Ae),g.push(ze,Pe)),y+=2):a.join===cl.ROUND?Xe?(g.push(Ee,He),g.push(G+se*Re,W+de*Re),y+=Ec(G,W,G+se*Re,W+de*Re,G+ue*Re,W+xe*Re,g,!0)+4,g.push(Ee,He),g.push(G+ue*Re,W+xe*Re)):(g.push(G-se*Ae,W-de*Ae),g.push(ze,Pe),y+=Ec(G,W,G-se*Ae,W-de*Ae,G-ue*Ae,W-xe*Ae,g,!1)+4,g.push(G-ue*Ae,W-xe*Ae),g.push(ze,Pe)):(g.push(Ee,He),g.push(ze,Pe)):(g.push(G-se*Ae,W-de*Ae),g.push(G+se*Re,W+de*Re),a.join===cl.BEVEL||oe/F>U||(a.join===cl.ROUND?y+=Xe?Ec(G,W,G+se*Re,W+de*Re,G+ue*Re,W+xe*Re,g,!0)+2:Ec(G,W,G-se*Ae,W-de*Ae,G-ue*Ae,W-xe*Ae,g,!1)+2:(Xe?(g.push(ze,Pe),g.push(ze,Pe)):(g.push(Ee,He),g.push(Ee,He)),y+=2)),g.push(G-ue*Ae,W-xe*Ae),g.push(G+ue*Re,W+xe*Re),y+=2)}}B=o[2*(_-2)],V=o[2*(_-2)+1],G=o[2*(_-1)],se=-(V-(W=o[2*(_-1)+1])),de=B-G,se/=We=Math.sqrt(se*se+de*de),de/=We,se*=R,de*=R,g.push(G-se*Ae,W-de*Ae),g.push(G+se*Re,W+de*Re),h||(a.cap===dl.ROUND?y+=Ec(G-se*(Ae-Re)*.5,W-de*(Ae-Re)*.5,G-se*Ae,W-de*Ae,G+se*Re,W+de*Re,g,!1)+2:a.cap===dl.SQUARE&&(y+=_1(G,W,se,de,Ae,Re,!1,g)));var It=n.indices,Nt=fp.epsilon*fp.epsilon;for(Ze=w;Ze<y+w-2;++Ze)B=g[2*Ze],V=g[2*Ze+1],G=g[2*(Ze+1)],W=g[2*(Ze+1)+1],ge=g[2*(Ze+2)],he=g[2*(Ze+2)+1],Math.abs(B*(W-he)+G*(he-V)+ge*(V-W))<Nt||It.push(Ze,Ze+1,Ze+2)}}(i,e)}var Mc,x1=function(){function i(){}return i.curveTo=function(e,t,n,r,o,s){var a=s[s.length-2],l=s[s.length-1]-t,u=a-e,h=r-t,d=n-e,p=Math.abs(l*d-u*h);if(p<1e-8||o===0)return s[s.length-2]===e&&s[s.length-1]===t||s.push(e,t),null;var m=l*l+u*u,g=h*h+d*d,_=l*h+u*d,y=o*Math.sqrt(m)/p,w=o*Math.sqrt(g)/p,R=y*_/m,F=w*_/g,U=y*d+w*u,B=y*h+w*l,V=u*(w+R),G=l*(w+R),W=d*(y+F),ge=h*(y+F);return{cx:U+e,cy:B+t,radius:o,startAngle:Math.atan2(G-B,V-U),endAngle:Math.atan2(ge-B,W-U),anticlockwise:u*h>d*l}},i.arc=function(e,t,n,r,o,s,a,l,u){for(var h=a-s,d=fp._segmentsCount(Math.abs(h)*o,40*Math.ceil(Math.abs(h)/Pm)),p=h/(2*d),m=2*p,g=Math.cos(p),_=Math.sin(p),y=d-1,w=y%1/y,R=0;R<=y;++R){var F=p+s+m*(R+w*R),U=Math.cos(F),B=-Math.sin(F);u.push((g*U+_*B)*o+n,(g*-B+_*U)*o+r)}},i}(),$R=function(){function i(){}return i.curveLength=function(e,t,n,r,o,s,a,l){for(var u=0,h=0,d=0,p=0,m=0,g=0,_=0,y=0,w=0,R=0,F=0,U=e,B=t,V=1;V<=10;++V)R=U-(y=(_=(g=(m=1-(h=V/10))*m)*m)*e+3*g*h*n+3*m*(d=h*h)*o+(p=d*h)*a),F=B-(w=_*t+3*g*h*r+3*m*d*s+p*l),U=y,B=w,u+=Math.sqrt(R*R+F*F);return u},i.curveTo=function(e,t,n,r,o,s,a){var l=a[a.length-2],u=a[a.length-1];a.length-=2;var h=fp._segmentsCount(i.curveLength(l,u,e,t,n,r,o,s)),d=0,p=0,m=0,g=0,_=0;a.push(l,u);for(var y=1,w=0;y<=h;++y)m=(p=(d=1-(w=y/h))*d)*d,_=(g=w*w)*w,a.push(m*l+3*p*w*e+3*d*g*n+_*o,m*u+3*p*w*t+3*d*g*r+_*s)},i}(),JR=function(){function i(){}return i.curveLength=function(e,t,n,r,o,s){var a=e-2*n+o,l=t-2*r+s,u=2*n-2*e,h=2*r-2*t,d=4*(a*a+l*l),p=4*(a*u+l*h),m=u*u+h*h,g=2*Math.sqrt(d+p+m),_=Math.sqrt(d),y=2*d*_,w=2*Math.sqrt(m),R=p/_;return(y*g+_*p*(g-w)+(4*m*d-p*p)*Math.log((2*_+R+g)/(R+w)))/(4*y)},i.curveTo=function(e,t,n,r,o){for(var s=o[o.length-2],a=o[o.length-1],l=fp._segmentsCount(i.curveLength(s,a,e,t,n,r)),u=0,h=0,d=1;d<=l;++d){var p=d/l;u=s+(e-s)*p,h=a+(t-a)*p,o.push(u+(e+(n-e)*p-u)*p,h+(t+(r-t)*p-h)*p)}},i}(),ZR=function(){function i(){this.reset()}return i.prototype.begin=function(e,t,n){this.reset(),this.style=e,this.start=t,this.attribStart=n},i.prototype.end=function(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start},i.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},i}(),q0=((Mc={})[Pi.POLY]=g1,Mc[Pi.CIRC]=v1,Mc[Pi.ELIP]=v1,Mc[Pi.RECT]=qR,Mc[Pi.RREC]=YR,Mc),b1=[],Jm=[];function KR(i){for(var e=i.points,t=0,n=0;n<e.length-2;n+=2)t+=(e[n+2]-e[n])*(e[n+3]+e[n+1]);return t>0}var w1=function(){function i(e,t,n,r){t===void 0&&(t=null),n===void 0&&(n=null),r===void 0&&(r=null),this.points=[],this.holes=[],this.shape=e,this.lineStyle=n,this.fillStyle=t,this.matrix=r,this.type=e.type}return i.prototype.clone=function(){return new i(this.shape,this.fillStyle,this.lineStyle,this.matrix)},i.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},i}(),Ac=new Ii,QR=new Lm,eC=function(i){function e(){var t=i.call(this)||this;return t.closePointEps=1e-4,t.boundsPadding=0,t.uvsFloat32=null,t.indicesUint16=null,t.batchable=!1,t.points=[],t.colors=[],t.uvs=[],t.indices=[],t.textureIds=[],t.graphicsData=[],t.drawCalls=[],t.batchDirty=-1,t.batches=[],t.dirty=0,t.cacheDirty=-1,t.clearDirty=0,t.shapeIndex=0,t._bounds=new Lm,t.boundsDirty=-1,t}return X0(e,i),Object.defineProperty(e.prototype,\"bounds\",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Jm.push(this.drawCalls[t]);for(this.drawCalls.length=0,t=0;t<this.batches.length;t++){var n=this.batches[t];n.reset(),b1.push(n)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,n,r,o){n===void 0&&(n=null),r===void 0&&(r=null),o===void 0&&(o=null);var s=new w1(t,n,r,o);return this.graphicsData.push(s),this.dirty++,this},e.prototype.drawHole=function(t,n){if(n===void 0&&(n=null),!this.graphicsData.length)return null;var r=new w1(t,null,null,n),o=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=o.lineStyle,o.holes.push(r),this.dirty++,this},e.prototype.destroy=function(){i.prototype.destroy.call(this);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var n=this.graphicsData,r=0;r<n.length;++r){var o=n[r];if(o.fillStyle.visible&&o.shape&&(o.matrix?o.matrix.applyInverse(t,Ac):Ac.copyFrom(t),o.shape.contains(Ac.x,Ac.y))){var s=!1;if(o.holes){for(var a=0;a<o.holes.length;a++)if(o.holes[a].shape.contains(Ac.x,Ac.y)){s=!0;break}}if(!s)return!0}}return!1},e.prototype.updateBatches=function(t){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var n=this.uvs,r=this.graphicsData,o=null,s=null;this.batches.length>0&&(s=(o=this.batches[this.batches.length-1]).style);for(var a=this.shapeIndex;a<r.length;a++){this.shapeIndex++;var l=r[a],u=l.fillStyle,h=l.lineStyle;q0[l.type].build(l),l.matrix&&this.transformPoints(l.points,l.matrix);for(var d=0;d<2;d++){var p=d===0?u:h;if(p.visible){var m=p.texture.baseTexture,g=this.indices.length,_=this.points.length/2;m.wrapMode=Ia.REPEAT,d===0?this.processFill(l):this.processLine(l);var y=this.points.length/2-_;y!==0&&(o&&!this._compareStyles(s,p)&&(o.end(g,_),o=null),o||((o=b1.pop()||new ZR).begin(p,g,_),this.batches.push(o),s=p),this.addUvs(this.points,n,p.texture,_,y,p.matrix))}}}var w=this.indices.length,R=this.points.length/2;if(o&&o.end(w,R),this.batches.length!==0){if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var F=R>65535&&t;this.indicesUint16=F?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},e.prototype._compareStyles=function(t,n){return!(!t||!n)&&t.texture.baseTexture===n.texture.baseTexture&&t.color+t.alpha===n.color+n.alpha&&!!t.native==!!n.native},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,n=this.graphicsData.length;t<n;t++){var r=this.graphicsData[t],o=r.fillStyle,s=r.lineStyle;if(o&&!o.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,n=0,r=t.length;n<r;n++)for(var o=t[n],s=0;s<o.size;s++){var a=o.start+s;this.indicesUint16[a]=this.indicesUint16[a]-o.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var t=this.batches,n=0;n<t.length;n++)if(t[n].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++Cn._globalBatch,n=0;n<this.drawCalls.length;n++)this.drawCalls[n].texArray.clear(),Jm.push(this.drawCalls[n]);this.drawCalls.length=0;var r=this.colors,o=this.textureIds,s=Jm.pop();s||((s=new U0).texArray=new G0),s.texArray.count=0,s.start=0,s.size=0,s.type=ss.TRIANGLES;var a=0,l=null,u=0,h=!1,d=ss.TRIANGLES,p=0;for(this.drawCalls.push(s),n=0;n<this.batches.length;n++){var m=this.batches[n],g=m.style,_=g.texture.baseTexture;h!==!!g.native&&(d=(h=!!g.native)?ss.LINES:ss.TRIANGLES,l=null,a=8,t++),l!==_&&(l=_,_._batchEnabled!==t&&(a===8&&(t++,a=0,s.size>0&&((s=Jm.pop())||((s=new U0).texArray=new G0),this.drawCalls.push(s)),s.start=p,s.size=0,s.texArray.count=0,s.type=d),_.touched=1,_._batchEnabled=t,_._batchLocation=a,_.wrapMode=Ia.REPEAT,s.texArray.elements[s.texArray.count++]=_,a++)),s.size+=m.size,p+=m.size,u=_._batchLocation,this.addColors(r,g.color,g.alpha,m.attribSize,m.attribStart),this.addTextureIds(o,u,m.attribSize,m.attribStart)}Cn._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,n=this.uvs,r=this.colors,o=this.textureIds,s=new ArrayBuffer(3*t.length*4),a=new Float32Array(s),l=new Uint32Array(s),u=0,h=0;h<t.length/2;h++)a[u++]=t[2*h],a[u++]=t[2*h+1],a[u++]=n[2*h],a[u++]=n[2*h+1],l[u++]=r[h],a[u++]=o[h];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?(this.processHoles(t.holes),g1.triangulate(t,this)):q0[t.type].triangulate(t,this)},e.prototype.processLine=function(t){y1(t,this);for(var n=0;n<t.holes.length;n++)y1(t.holes[n],this)},e.prototype.processHoles=function(t){for(var n=0;n<t.length;n++){var r=t[n];q0[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds,n=QR,r=Oi.IDENTITY;this._bounds.clear(),n.clear();for(var o=0;o<this.graphicsData.length;o++){var s=this.graphicsData[o],a=s.shape,l=s.type,u=s.lineStyle,h=s.matrix||Oi.IDENTITY,d=0;if(u&&u.visible){var p=u.alignment;d=u.width,l===Pi.POLY?KR(a)?d*=1-p:d*=p:d*=Math.max(0,p)}if(r!==h&&(n.isEmpty()||(t.addBoundsMatrix(n,r),n.clear()),r=h),l===Pi.RECT||l===Pi.RREC){var m=a;n.addFramePad(m.x,m.y,m.x+m.width,m.y+m.height,d,d)}else if(l===Pi.CIRC){var g=a;n.addFramePad(g.x,g.y,g.x,g.y,g.radius+d,g.radius+d)}else if(l===Pi.ELIP){var _=a;n.addFramePad(_.x,_.y,_.x,_.y,_.width+d,_.height+d)}else{var y=a;t.addVerticesMatrix(r,y.points,0,y.points.length,d,d)}}n.isEmpty()||t.addBoundsMatrix(n,r),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,n){for(var r=0;r<t.length/2;r++){var o=t[2*r],s=t[2*r+1];t[2*r]=n.a*o+n.c*s+n.tx,t[2*r+1]=n.b*o+n.d*s+n.ty}},e.prototype.addColors=function(t,n,r,o,s){s===void 0&&(s=0);var a=Am((n>>16)+(65280&n)+((255&n)<<16),r);t.length=Math.max(t.length,s+o);for(var l=0;l<o;l++)t[s+l]=a},e.prototype.addTextureIds=function(t,n,r,o){o===void 0&&(o=0),t.length=Math.max(t.length,o+r);for(var s=0;s<r;s++)t[o+s]=n},e.prototype.addUvs=function(t,n,r,o,s,a){a===void 0&&(a=null);for(var l=0,u=n.length,h=r.frame;l<s;){var d=t[2*(o+l)],p=t[2*(o+l)+1];if(a){var m=a.a*d+a.c*p+a.tx;p=a.b*d+a.d*p+a.ty,d=m}l++,n.push(d/h.width,p/h.height)}var g=r.baseTexture;(h.width<g.width||h.height<g.height)&&this.adjustUvs(n,r,u,s)},e.prototype.adjustUvs=function(t,n,r,o){for(var s=n.baseTexture,a=1e-6,l=r+2*o,u=n.frame,h=u.width/s.width,d=u.height/s.height,p=u.x/u.width,m=u.y/u.height,g=Math.floor(t[r]+a),_=Math.floor(t[r+1]+a),y=r+2;y<l;y+=2)g=Math.min(g,Math.floor(t[y]+a)),_=Math.min(_,Math.floor(t[y+1]+a));for(p-=g,m-=_,y=r;y<l;y+=2)t[y]=(t[y]+p)*h,t[y+1]=(t[y+1]+m)*d},e.BATCHABLE_SIZE=100,e}(Zb),tC=function(i){function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.width=0,t.alignment=.5,t.native=!1,t.cap=dl.BUTT,t.join=cl.MITER,t.miterLimit=10,t}return X0(e,i),e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},e.prototype.reset=function(){i.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(f1),nC=new Float32Array(3),Y0={},Na=function(i){function e(t){t===void 0&&(t=null);var n=i.call(this)||this;return n.shader=null,n.pluginName=\"batch\",n.currentPath=null,n.batches=[],n.batchTint=-1,n.batchDirty=-1,n.vertexData=null,n._fillStyle=new f1,n._lineStyle=new tC,n._matrix=null,n._holeMode=!1,n.state=Pu.for2d(),n._geometry=t||new eC,n._geometry.refCount++,n._transformID=-1,n.tint=16777215,n.blendMode=Qt.NORMAL,n}return X0(e,i),Object.defineProperty(e.prototype,\"geometry\",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,\"blendMode\",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"tint\",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"fill\",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"line\",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(t,n,r,o,s){return t===void 0&&(t=null),n===void 0&&(n=0),r===void 0&&(r=1),o===void 0&&(o=.5),s===void 0&&(s=!1),typeof t==\"number\"&&(t={width:t,color:n,alpha:r,alignment:o,native:s}),this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){t=Object.assign({width:0,texture:rn.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:dl.BUTT,join:cl.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var n=t.width>0&&t.alpha>0;return n?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:n},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,n=this.currentPath.points.length;n>2&&(this.drawShape(this.currentPath),this.currentPath=new Im,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[n-2],t[n-1]))}else this.currentPath=new Im,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,n){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=n,this},e.prototype.lineTo=function(t,n){this.currentPath||this.moveTo(0,0);var r=this.currentPath.points,o=r[r.length-2],s=r[r.length-1];return o===t&&s===n||r.push(t,n),this},e.prototype._initCurve=function(t,n){t===void 0&&(t=0),n===void 0&&(n=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,n]):this.moveTo(t,n)},e.prototype.quadraticCurveTo=function(t,n,r,o){this._initCurve();var s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),JR.curveTo(t,n,r,o,s),this},e.prototype.bezierCurveTo=function(t,n,r,o,s,a){return this._initCurve(),$R.curveTo(t,n,r,o,s,a,this.currentPath.points),this},e.prototype.arcTo=function(t,n,r,o,s){this._initCurve(t,n);var a=this.currentPath.points,l=x1.curveTo(t,n,r,o,s,a);if(l){var u=l.cx,h=l.cy,d=l.radius,p=l.startAngle,m=l.endAngle,g=l.anticlockwise;this.arc(u,h,d,p,m,g)}return this},e.prototype.arc=function(t,n,r,o,s,a){if(a===void 0&&(a=!1),o===s)return this;if(!a&&s<=o?s+=Pm:a&&o<=s&&(o+=Pm),s-o===0)return this;var l=t+Math.cos(o)*r,u=n+Math.sin(o)*r,h=this._geometry.closePointEps,d=this.currentPath?this.currentPath.points:null;if(d){var p=Math.abs(d[d.length-2]-l),m=Math.abs(d[d.length-1]-u);p<h&&m<h||d.push(l,u)}else this.moveTo(l,u),d=this.currentPath.points;return x1.arc(l,u,t,n,r,o,s,a,d),this},e.prototype.beginFill=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=1),this.beginTextureFill({texture:rn.WHITE,color:t,alpha:n})},e.prototype.beginTextureFill=function(t){t=Object.assign({texture:rn.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var n=t.alpha>0;return n?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:n},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,n,r,o){return this.drawShape(new Tn(t,n,r,o))},e.prototype.drawRoundedRect=function(t,n,r,o,s){return this.drawShape(new E0(t,n,r,o,s))},e.prototype.drawCircle=function(t,n,r){return this.drawShape(new r2(t,n,r))},e.prototype.drawEllipse=function(t,n,r,o){return this.drawShape(new o2(t,n,r,o))},e.prototype.drawPolygon=function(){for(var t,n=arguments,r=[],o=0;o<arguments.length;o++)r[o]=n[o];var s=!0,a=r[0];a.points?(s=a.closeStroke,t=a.points):t=Array.isArray(r[0])?r[0]:r;var l=new Im(t);return l.closeStroke=s,this.drawShape(l),this},e.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return!(t.length!==1||t[0].shape.type!==Pi.RECT||t[0].holes.length||t[0].lineStyle.visible&&t[0].lineStyle.width)},e.prototype._render=function(t){this.finishPoly();var n=this._geometry,r=t.context.supports.uint32Indices;n.updateBatches(r),n.batchable?(this.batchDirty!==n.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this._geometry,n=this.blendMode,r=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(t.points);for(var o=0;o<r;o++){var s=t.batches[o],a=s.style.color,l=new Float32Array(this.vertexData.buffer,4*s.attribStart*2,2*s.attribSize),u=new Float32Array(t.uvsFloat32.buffer,4*s.attribStart*2,2*s.attribSize),h={vertexData:l,blendMode:n,indices:new Uint16Array(t.indicesUint16.buffer,2*s.start,s.size),uvs:u,_batchRGB:wu(a),_tintRGB:a,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[o]=h}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var n=0,r=this.batches.length;n<r;n++){var o=this.batches[n];o.worldAlpha=this.worldAlpha*o.alpha,t.plugins[this.pluginName].render(o)}}},e.prototype._renderDirect=function(t){var n=this._resolveDirectShader(t),r=this._geometry,o=this.tint,s=this.worldAlpha,a=n.uniforms,l=r.drawCalls;a.translationMatrix=this.transform.worldTransform,a.tint[0]=(o>>16&255)/255*s,a.tint[1]=(o>>8&255)/255*s,a.tint[2]=(255&o)/255*s,a.tint[3]=s,t.shader.bind(n),t.geometry.bind(r,n),t.state.set(this.state);for(var u=0,h=l.length;u<h;u++)this._renderDrawCallDirect(t,r.drawCalls[u])},e.prototype._renderDrawCallDirect=function(t,n){for(var r=n.texArray,o=n.type,s=n.size,a=n.start,l=r.count,u=0;u<l;u++)t.texture.bind(r.elements[u],u);t.geometry.draw(o,s,a)},e.prototype._resolveDirectShader=function(t){var n=this.shader,r=this.pluginName;if(!n){if(!Y0[r]){for(var o=t.plugins.batch.MAX_TEXTURES,s=new Int32Array(o),a=0;a<o;a++)s[a]=a;var l={tint:new Float32Array([1,1,1,1]),translationMatrix:new Oi,default:Cu.from({uSamplers:s},!0)},u=t.plugins[r]._shader.program;Y0[r]=new Oa(u,l)}n=Y0[r]}return n},e.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var n=t.bounds,r=n.minX,o=n.minY,s=n.maxX,a=n.maxY;this._bounds.addFrame(this.transform,r,o,s,a)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=wu(this.tint,nC),n=0;n<this.batches.length;n++){var r=this.batches[n],o=r._batchRGB,s=(t[0]*o[0]*255<<16)+(t[1]*o[1]*255<<8)+(0|t[2]*o[2]*255);r._tintRGB=(s>>16)+(65280&s)+((255&s)<<16)}}},e.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var n=this.transform.worldTransform,r=n.a,o=n.b,s=n.c,a=n.d,l=n.tx,u=n.ty,h=this._geometry.points,d=this.vertexData,p=0,m=0;m<h.length;m+=2){var g=h[m],_=h[m+1];d[p++]=r*g+s*_+l,d[p++]=a*_+o*g+u}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,i.prototype.destroy.call(this,t)},e._TEMP_POINT=new Ii,e}(Ki),S1=function(i,e){return(S1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(i,e)},mp,gp=new Ii,iC=new Uint16Array([0,1,2,0,2,3]),lr=function(i){function e(t){var n=i.call(this)||this;return n._anchor=new xc(n._onAnchorUpdate,n,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=Qt.NORMAL,n._cachedTint=16777215,n.uvs=null,n.texture=t||rn.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.indices=iC,n.pluginName=\"batch\",n.isSprite=!0,n._roundPixels=Jt.ROUND_PIXELS,n}return function(t,n){function r(){this.constructor=t}S1(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}(e,i),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Tu(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Tu(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var n=this.transform.worldTransform,r=n.a,o=n.b,s=n.c,a=n.d,l=n.tx,u=n.ty,h=this.vertexData,d=t.trim,p=t.orig,m=this._anchor,g=0,_=0,y=0,w=0;if(d?(g=(_=d.x-m._x*p.width)+d.width,y=(w=d.y-m._y*p.height)+d.height):(g=(_=-m._x*p.width)+p.width,y=(w=-m._y*p.height)+p.height),h[0]=r*_+s*w+l,h[1]=a*w+o*_+u,h[2]=r*g+s*w+l,h[3]=a*w+o*g+u,h[4]=r*g+s*y+l,h[5]=a*y+o*g+u,h[6]=r*_+s*y+l,h[7]=a*y+o*_+u,this._roundPixels)for(var R=Jt.RESOLUTION,F=0;F<h.length;++F)h[F]=Math.round((h[F]*R|0)/R)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,n=this.vertexTrimmedData,r=t.orig,o=this._anchor,s=this.transform.worldTransform,a=s.a,l=s.b,u=s.c,h=s.d,d=s.tx,p=s.ty,m=-o._x*r.width,g=m+r.width,_=-o._y*r.height,y=_+r.height;n[0]=a*m+u*_+d,n[1]=h*_+l*m+p,n[2]=a*g+u*_+d,n[3]=h*_+l*g+p,n[4]=a*g+u*y+d,n[5]=h*y+l*g+p,n[6]=a*m+u*y+d,n[7]=h*y+l*m+p},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,n=this._texture.orig;!t||t.width===n.width&&t.height===n.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(t){return this.children.length===0?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Tn),t=this._localBoundsRect),this._bounds.getRectangle(t)):i.prototype.getLocalBounds.call(this,t)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,gp);var n=this._texture.orig.width,r=this._texture.orig.height,o=-n*this.anchor.x,s=0;return gp.x>=o&&gp.x<o+n&&(s=-r*this.anchor.y,gp.y>=s&&gp.y<s+r)},e.prototype.destroy=function(t){if(i.prototype.destroy.call(this,t),this._texture.off(\"update\",this._onTextureUpdate,this),this._anchor=null,typeof t==\"boolean\"?t:t&&t.texture){var n=typeof t==\"boolean\"?t:t&&t.baseTexture;this._texture.destroy(!!n)}this._texture=null},e.from=function(t,n){return new e(t instanceof rn?t:rn.from(t,n))},Object.defineProperty(e.prototype,\"roundPixels\",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"width\",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var n=Tu(this.scale.x)||1;this.scale.x=n*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"height\",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var n=Tu(this.scale.y)||1;this.scale.y=n*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"anchor\",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"tint\",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"texture\",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off(\"update\",this._onTextureUpdate,this),this._texture=t||rn.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once(\"update\",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(Ki),T1=function(i,e){return(T1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(i,e)};(function(i){i[i.LINEAR_VERTICAL=0]=\"LINEAR_VERTICAL\",i[i.LINEAR_HORIZONTAL=1]=\"LINEAR_HORIZONTAL\"})(mp||(mp={}));var $0={align:\"left\",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:\"black\",dropShadowDistance:5,fill:\"black\",fillGradientType:mp.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:\"Arial\",fontSize:26,fontStyle:\"normal\",fontVariant:\"normal\",fontWeight:\"normal\",letterSpacing:0,lineHeight:0,lineJoin:\"miter\",miterLimit:10,padding:0,stroke:\"black\",strokeThickness:0,textBaseline:\"alphabetic\",trim:!1,whiteSpace:\"pre\",wordWrap:!1,wordWrapWidth:100,leading:0},rC=[\"serif\",\"sans-serif\",\"monospace\",\"cursive\",\"fantasy\",\"system-ui\"],Rc=function(){function i(e){this.styleID=0,this.reset(),Z0(this,e,e)}return i.prototype.clone=function(){var e={};return Z0(e,this,$0),new i(e)},i.prototype.reset=function(){Z0(this,$0,$0)},Object.defineProperty(i.prototype,\"align\",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"breakWords\",{get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"dropShadow\",{get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"dropShadowAlpha\",{get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"dropShadowAngle\",{get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"dropShadowBlur\",{get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"dropShadowColor\",{get:function(){return this._dropShadowColor},set:function(e){var t=J0(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"dropShadowDistance\",{get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"fill\",{get:function(){return this._fill},set:function(e){var t=J0(e);this._fill!==t&&(this._fill=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"fillGradientType\",{get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"fillGradientStops\",{get:function(){return this._fillGradientStops},set:function(e){(function(t,n){if(!Array.isArray(t)||!Array.isArray(n)||t.length!==n.length)return!1;for(var r=0;r<t.length;++r)if(t[r]!==n[r])return!1;return!0})(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"fontFamily\",{get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"fontSize\",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"fontStyle\",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"fontVariant\",{get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"fontWeight\",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"letterSpacing\",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"lineHeight\",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"leading\",{get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"lineJoin\",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"miterLimit\",{get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"padding\",{get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"stroke\",{get:function(){return this._stroke},set:function(e){var t=J0(e);this._stroke!==t&&(this._stroke=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"strokeThickness\",{get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"textBaseline\",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"trim\",{get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"whiteSpace\",{get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"wordWrap\",{get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"wordWrapWidth\",{get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)},enumerable:!1,configurable:!0}),i.prototype.toFontString=function(){var e=typeof this.fontSize==\"number\"?this.fontSize+\"px\":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(\",\"));for(var n=t.length-1;n>=0;n--){var r=t[n].trim();!/([\\\"\\'])[^\\'\\\"]+\\1/.test(r)&&rC.indexOf(r)<0&&(r='\"'+r+'\"'),t[n]=r}return this.fontStyle+\" \"+this.fontVariant+\" \"+this.fontWeight+\" \"+e+\" \"+t.join(\",\")},i}();function E1(i){return typeof i==\"number\"?g0(i):(typeof i==\"string\"&&i.indexOf(\"0x\")===0&&(i=i.replace(\"0x\",\"#\")),i)}function J0(i){if(Array.isArray(i)){for(var e=0;e<i.length;++e)i[e]=E1(i[e]);return i}return E1(i)}function Z0(i,e,t){for(var n in t)Array.isArray(e[n])?i[n]=e[n].slice():i[n]=e[n]}var Ro=function(){function i(e,t,n,r,o,s,a,l,u){this.text=e,this.style=t,this.width=n,this.height=r,this.lines=o,this.lineWidths=s,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=u}return i.measureText=function(e,t,n,r){r===void 0&&(r=i._canvas),n=n==null?t.wordWrap:n;var o=t.toFontString(),s=i.measureFont(o);s.fontSize===0&&(s.fontSize=t.fontSize,s.ascent=t.fontSize);var a=r.getContext(\"2d\");a.font=o;for(var l=(n?i.wordWrap(e,t,r):e).split(/(?:\\r\\n|\\r|\\n)/),u=new Array(l.length),h=0,d=0;d<l.length;d++){var p=a.measureText(l[d]).width+(l[d].length-1)*t.letterSpacing;u[d]=p,h=Math.max(h,p)}var m=h+t.strokeThickness;t.dropShadow&&(m+=t.dropShadowDistance);var g=t.lineHeight||s.fontSize+t.strokeThickness,_=Math.max(g,s.fontSize+t.strokeThickness)+(l.length-1)*(g+t.leading);return t.dropShadow&&(_+=t.dropShadowDistance),new i(e,t,m,_,l,u,g+t.leading,h,s)},i.wordWrap=function(e,t,n){n===void 0&&(n=i._canvas);for(var r=n.getContext(\"2d\"),o=0,s=\"\",a=\"\",l=Object.create(null),u=t.letterSpacing,h=t.whiteSpace,d=i.collapseSpaces(h),p=i.collapseNewlines(h),m=!d,g=t.wordWrapWidth+u,_=i.tokenize(e),y=0;y<_.length;y++){var w=_[y];if(i.isNewline(w)){if(!p){a+=i.addLine(s),m=!d,s=\"\",o=0;continue}w=\" \"}if(d){var R=i.isBreakingSpace(w),F=i.isBreakingSpace(s[s.length-1]);if(R&&F)continue}var U=i.getFromCache(w,u,l,r);if(U>g)if(s!==\"\"&&(a+=i.addLine(s),s=\"\",o=0),i.canBreakWords(w,t.breakWords))for(var B=i.wordWrapSplit(w),V=0;V<B.length;V++){for(var G=B[V],W=1;B[V+W];){var ge=B[V+W],he=G[G.length-1];if(i.canBreakChars(he,ge,w,V,t.breakWords))break;G+=ge,W++}V+=G.length-1;var se=i.getFromCache(G,u,l,r);se+o>g&&(a+=i.addLine(s),m=!1,s=\"\",o=0),s+=G,o+=se}else{s.length>0&&(a+=i.addLine(s),s=\"\",o=0);var de=y===_.length-1;a+=i.addLine(w,!de),m=!1,s=\"\",o=0}else U+o>g&&(m=!1,a+=i.addLine(s),s=\"\",o=0),(s.length>0||!i.isBreakingSpace(w)||m)&&(s+=w,o+=U)}return a+=i.addLine(s,!1)},i.addLine=function(e,t){return t===void 0&&(t=!0),e=i.trimRight(e),e=t?e+`\n`:e},i.getFromCache=function(e,t,n,r){var o=n[e];if(typeof o!=\"number\"){var s=e.length*t;o=r.measureText(e).width+s,n[e]=o}return o},i.collapseSpaces=function(e){return e===\"normal\"||e===\"pre-line\"},i.collapseNewlines=function(e){return e===\"normal\"},i.trimRight=function(e){if(typeof e!=\"string\")return\"\";for(var t=e.length-1;t>=0;t--){var n=e[t];if(!i.isBreakingSpace(n))break;e=e.slice(0,-1)}return e},i.isNewline=function(e){return typeof e==\"string\"&&i._newlines.indexOf(e.charCodeAt(0))>=0},i.isBreakingSpace=function(e,t){return typeof e==\"string\"&&i._breakingSpaces.indexOf(e.charCodeAt(0))>=0},i.tokenize=function(e){var t=[],n=\"\";if(typeof e!=\"string\")return t;for(var r=0;r<e.length;r++){var o=e[r],s=e[r+1];i.isBreakingSpace(o,s)||i.isNewline(o)?(n!==\"\"&&(t.push(n),n=\"\"),t.push(o)):n+=o}return n!==\"\"&&t.push(n),t},i.canBreakWords=function(e,t){return t},i.canBreakChars=function(e,t,n,r,o){return!0},i.wordWrapSplit=function(e){return e.split(\"\")},i.measureFont=function(e){if(i._fonts[e])return i._fonts[e];var t={ascent:0,descent:0,fontSize:0},n=i._canvas,r=i._context;r.font=e;var o=i.METRICS_STRING+i.BASELINE_SYMBOL,s=Math.ceil(r.measureText(o).width),a=Math.ceil(r.measureText(i.BASELINE_SYMBOL).width),l=Math.ceil(i.HEIGHT_MULTIPLIER*a);a=a*i.BASELINE_MULTIPLIER|0,n.width=s,n.height=l,r.fillStyle=\"#f00\",r.fillRect(0,0,s,l),r.font=e,r.textBaseline=\"alphabetic\",r.fillStyle=\"#000\",r.fillText(o,0,a);var u=r.getImageData(0,0,s,l).data,h=u.length,d=4*s,p=0,m=0,g=!1;for(p=0;p<a;++p){for(var _=0;_<d;_+=4)if(u[m+_]!==255){g=!0;break}if(g)break;m+=d}for(t.ascent=a-p,m=h-d,g=!1,p=l;p>a;--p){for(_=0;_<d;_+=4)if(u[m+_]!==255){g=!0;break}if(g)break;m-=d}return t.descent=p-a,t.fontSize=t.ascent+t.descent,i._fonts[e]=t,t},i.clearMetrics=function(e){e===void 0&&(e=\"\"),e?delete i._fonts[e]:i._fonts={}},i}(),Zm=function(){try{var i=new OffscreenCanvas(0,0),e=i.getContext(\"2d\");return e&&e.measureText?i:document.createElement(\"canvas\")}catch{return document.createElement(\"canvas\")}}();Zm.width=Zm.height=10,Ro._canvas=Zm,Ro._context=Zm.getContext(\"2d\"),Ro._fonts={},Ro.METRICS_STRING=\"|\\xC9q\\xC5\",Ro.BASELINE_SYMBOL=\"M\",Ro.BASELINE_MULTIPLIER=1.4,Ro.HEIGHT_MULTIPLIER=2,Ro._newlines=[10,13],Ro._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var oC={texture:!0,children:!1,baseTexture:!0},M1=\"letterSpacing\"in CanvasRenderingContext2D.prototype||\"textLetterSpacing\"in CanvasRenderingContext2D.prototype,A1=function(i){function e(t,n,r){var o=this,s=!1;r||(r=document.createElement(\"canvas\"),s=!0),r.width=3,r.height=3;var a=rn.from(r);return a.orig=new Tn,a.trim=new Tn,(o=i.call(this,a)||this)._ownCanvas=s,o.canvas=r,o.context=o.canvas.getContext(\"2d\"),o._resolution=Jt.RESOLUTION,o._autoResolution=!0,o._text=null,o._style=null,o._styleListener=null,o._font=\"\",o.text=t,o.style=n,o.localStyleID=-1,o}return function(t,n){function r(){this.constructor=t}T1(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}(e,i),e.prototype.updateText=function(t){var n=this._style;if(this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),this.dirty||!t){this._font=this._style.toFontString();var r,o,s=this.context,a=Ro.measureText(this._text||\" \",this._style,this._style.wordWrap,this.canvas),l=a.width,u=a.height,h=a.lines,d=a.lineHeight,p=a.lineWidths,m=a.maxLineWidth,g=a.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,l)+2*n.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,u)+2*n.padding)*this._resolution),s.scale(this._resolution,this._resolution),s.clearRect(0,0,this.canvas.width,this.canvas.height),s.font=this._font,s.lineWidth=n.strokeThickness,s.textBaseline=n.textBaseline,s.lineJoin=n.lineJoin,s.miterLimit=n.miterLimit;for(var _=n.dropShadow?2:1,y=0;y<_;++y){var w=n.dropShadow&&y===0,R=w?Math.ceil(Math.max(1,u)+2*n.padding):0,F=R*this._resolution;if(w){s.fillStyle=\"black\",s.strokeStyle=\"black\";var U=n.dropShadowColor,B=wu(typeof U==\"number\"?U:v0(U));s.shadowColor=\"rgba(\"+255*B[0]+\",\"+255*B[1]+\",\"+255*B[2]+\",\"+n.dropShadowAlpha+\")\",s.shadowBlur=n.dropShadowBlur,s.shadowOffsetX=Math.cos(n.dropShadowAngle)*n.dropShadowDistance,s.shadowOffsetY=Math.sin(n.dropShadowAngle)*n.dropShadowDistance+F}else s.fillStyle=this._generateFillStyle(n,h,a),s.strokeStyle=n.stroke,s.shadowColor=\"black\",s.shadowBlur=0,s.shadowOffsetX=0,s.shadowOffsetY=0;var V=(d-g.fontSize)/2;(!e.nextLineHeightBehavior||d-g.fontSize<0)&&(V=0);for(var G=0;G<h.length;G++)r=n.strokeThickness/2,o=n.strokeThickness/2+G*d+g.ascent+V,n.align===\"right\"?r+=m-p[G]:n.align===\"center\"&&(r+=(m-p[G])/2),n.stroke&&n.strokeThickness&&this.drawLetterSpacing(h[G],r+n.padding,o+n.padding-R,!0),n.fill&&this.drawLetterSpacing(h[G],r+n.padding,o+n.padding-R)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,n,r,o){o===void 0&&(o=!1);var s=this._style.letterSpacing;if(s===0||M1)return M1&&(this.context.letterSpacing=s,this.context.textLetterSpacing=s),void(o?this.context.strokeText(t,n,r):this.context.fillText(t,n,r));for(var a=n,l=Array.from?Array.from(t):t.split(\"\"),u=this.context.measureText(t).width,h=0,d=0;d<l.length;++d){var p=l[d];o?this.context.strokeText(p,a,r):this.context.fillText(p,a,r),a+=u-(h=this.context.measureText(t.substring(d+1)).width)+s,u=h}},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var n=Zx(t);n.data&&(t.width=n.width,t.height=n.height,this.context.putImageData(n.data,0,0))}var r=this._texture,o=this._style,s=o.trim?0:o.padding,a=r.baseTexture;r.trim.width=r._frame.width=t.width/this._resolution,r.trim.height=r._frame.height=t.height/this._resolution,r.trim.x=-s,r.trim.y=-s,r.orig.width=r._frame.width-2*s,r.orig.height=r._frame.height-2*s,this._onTextureUpdate(),a.setRealSize(t.width,t.height,this._resolution),r.updateUvs(),this._recursivePostUpdateTransform(),this.dirty=!1},e.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),i.prototype._render.call(this,t)},e.prototype.getLocalBounds=function(t){return this.updateText(!0),i.prototype.getLocalBounds.call(this,t)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(t,n,r){var o,s=t.fill;if(!Array.isArray(s))return s;if(s.length===1)return s[0];var a=t.dropShadow?t.dropShadowDistance:0,l=t.padding||0,u=this.canvas.width/this._resolution-a-2*l,h=this.canvas.height/this._resolution-a-2*l,d=s.slice(),p=t.fillGradientStops.slice();if(!p.length)for(var m=d.length+1,g=1;g<m;++g)p.push(g/m);if(d.unshift(s[0]),p.unshift(0),d.push(s[s.length-1]),p.push(1),t.fillGradientType===mp.LINEAR_VERTICAL){o=this.context.createLinearGradient(u/2,l,u/2,h+l);var _=r.fontProperties.fontSize+t.strokeThickness;for(g=0;g<n.length;g++){var y=r.lineHeight*(g-1)+_,w=r.lineHeight*g,R=w;g>0&&y>w&&(R=(w+y)/2);var F=w+_,U=r.lineHeight*(g+1),B=F;g+1<n.length&&U<F&&(B=(F+U)/2);for(var V=(B-R)/h,G=0;G<d.length;G++){var W=0;W=typeof p[G]==\"number\"?p[G]:G/d.length;var ge=Math.min(1,Math.max(0,R/h+W*V));ge=Number(ge.toFixed(5)),o.addColorStop(ge,d[G])}}}else{o=this.context.createLinearGradient(l,h/2,u+l,h/2);var he=d.length+1,se=1;for(g=0;g<d.length;g++){var de=void 0;de=typeof p[g]==\"number\"?p[g]:se/he,o.addColorStop(de,d[g]),se++}}return o},e.prototype.destroy=function(t){typeof t==\"boolean\"&&(t={children:t}),t=Object.assign({},oC,t),i.prototype.destroy.call(this,t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,\"width\",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var n=Tu(this.scale.x)||1;this.scale.x=n*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"height\",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var n=Tu(this.scale.y)||1;this.scale.y=n*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"style\",{get:function(){return this._style},set:function(t){t=t||{},this._style=t instanceof Rc?t:new Rc(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"text\",{get:function(){return this._text},set:function(t){t=String(t==null?\"\":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"resolution\",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.nextLineHeightBehavior=!1,e}(lr);/*!\n * @pixi/prepare - v6.2.0\n * Compiled Mon, 01 Nov 2021 16:52:10 UTC\n *\n * @pixi/prepare is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */Jt.UPLOADS_PER_FRAME=4;/*! *****************************************************************************\nCopyright (c) Microsoft Corporation. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */var R1=function(i,e){return(R1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(i,e)},sC=function(){function i(e){this.maxItemsPerFrame=e,this.itemsLeft=0}return i.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},i.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},i}();function aC(i,e){var t=!1;if(i&&i._textures&&i._textures.length){for(var n=0;n<i._textures.length;n++)if(i._textures[n]instanceof rn){var r=i._textures[n].baseTexture;e.indexOf(r)===-1&&(e.push(r),t=!0)}}return t}function lC(i,e){if(i.baseTexture instanceof Cn){var t=i.baseTexture;return e.indexOf(t)===-1&&e.push(t),!0}return!1}function uC(i,e){if(i._texture&&i._texture instanceof rn){var t=i._texture.baseTexture;return e.indexOf(t)===-1&&e.push(t),!0}return!1}function hC(i,e){return e instanceof A1&&(e.updateText(!0),!0)}function cC(i,e){if(e instanceof Rc){var t=e.toFontString();return Ro.measureFont(t),!0}return!1}function dC(i,e){if(i instanceof A1){e.indexOf(i.style)===-1&&e.push(i.style),e.indexOf(i)===-1&&e.push(i);var t=i._texture.baseTexture;return e.indexOf(t)===-1&&e.push(t),!0}return!1}function pC(i,e){return i instanceof Rc&&(e.indexOf(i)===-1&&e.push(i),!0)}function C1(i,e){return e instanceof Cn&&(e._glTextures[i.CONTEXT_UID]||i.texture.bind(e),!0)}function fC(i,e){if(!(e instanceof Na))return!1;var t=e.geometry;e.finishPoly(),t.updateBatches();for(var n=t.batches,r=0;r<n.length;r++){var o=n[r].style.texture;o&&C1(i,o.baseTexture)}return t.batchable||i.geometry.bind(t,e._resolveDirectShader(i)),!0}function mC(i,e){return i instanceof Na&&(e.push(i),!0)}var gC=function(i){function e(t){var n=i.call(this,t)||this;return n.uploadHookHelper=n.renderer,n.registerFindHook(mC),n.registerUploadHook(C1),n.registerUploadHook(fC),n}return function(t,n){function r(){this.constructor=t}R1(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}(e,i),e}(function(){function i(e){var t=this;this.limiter=new sC(Jt.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){t.queue&&t.prepareItems()},this.registerFindHook(dC),this.registerFindHook(pC),this.registerFindHook(aC),this.registerFindHook(lC),this.registerFindHook(uC),this.registerUploadHook(hC),this.registerUploadHook(cC)}return i.prototype.upload=function(e,t){typeof e==\"function\"&&(t=e,e=null),e&&this.add(e),this.queue.length?(t&&this.completes.push(t),this.ticking||(this.ticking=!0,ar.system.addOnce(this.tick,this,as.UTILITY))):t&&t()},i.prototype.tick=function(){setTimeout(this.delayedTick,0)},i.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed){for(var n=0,r=this.uploadHooks.length;n<r;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)ar.system.addOnce(this.tick,this,as.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);for(this.completes.length=0,n=0,r=o.length;n<r;n++)o[n]()}},i.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},i.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},i.prototype.add=function(e){for(var t=0,n=this.addHooks.length;t<n&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Ki)for(t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this},i.prototype.destroy=function(){this.ticking&&ar.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},i}()),P1=function(){function i(e,t,n){n===void 0&&(n=null),this._texture=e instanceof rn?e:null,this.baseTexture=e instanceof Cn?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;var r=this.baseTexture.resource;this.resolution=this._updateResolution(n||(r?r.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return i.prototype._updateResolution=function(e){e===void 0&&(e=null);var t=this.data.meta.scale,n=ap(e,null);return n===null&&(n=t!==void 0?parseFloat(t):1),n!==1&&this.baseTexture.setResolution(n),n},i.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=i.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},i.prototype._processFrames=function(e){for(var t=e,n=i.BATCH_SIZE;t-e<n&&t<this._frameKeys.length;){var r=this._frameKeys[t],o=this._frames[r],s=o.frame;if(s){var a=null,l=null,u=o.trimmed!==!1&&o.sourceSize?o.sourceSize:o.frame,h=new Tn(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);a=o.rotated?new Tn(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):new Tn(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),o.trimmed!==!1&&o.spriteSourceSize&&(l=new Tn(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[r]=new rn(this.baseTexture,a,h,l,o.rotated?2:0,o.anchor),rn.addToCache(this.textures[r],r)}t++}},i.prototype._processAnimations=function(){var e=this.data.animations||{};for(var t in e){this.animations[t]=[];for(var n=0;n<e[t].length;n++){var r=e[t][n];this.animations[t].push(this.textures[r])}}},i.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},i.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*i.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*i.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},i.prototype.destroy=function(e){var t;for(var n in e===void 0&&(e=!1),this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)===null||t===void 0||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},i.BATCH_SIZE=1e3,i}(),vC=function(){function i(){}return i.use=function(e,t){var n,r,o=this,s=e.name+\"_image\";if(e.data&&e.type===Ei.TYPE.JSON&&e.data.frames&&!o.resources[s]){var a=(r=(n=e.data)===null||n===void 0?void 0:n.meta)===null||r===void 0?void 0:r.related_multi_packs;if(Array.isArray(a))for(var l=function(m){if(typeof m!=\"string\")return\"continue\";var g=m.replace(\".json\",\"\"),_=bu.resolve(e.url.replace(o.baseUrl,\"\"),m);if(o.resources[g]||Object.values(o.resources).some(function(w){return bu.format(bu.parse(w.url))===_}))return\"continue\";var y={crossOrigin:e.crossOrigin,loadType:Ei.LOAD_TYPE.XHR,xhrType:Ei.XHR_RESPONSE_TYPE.JSON,parentResource:e,metadata:e.metadata};o.add(g,_,y)},u=0,h=a;u<h.length;u++)l(h[u]);var d={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},p=i.getResourcePath(e,o.baseUrl);o.add(s,p,d,function(m){if(m.error)t(m.error);else{var g=new P1(m.texture,e.data,e.url);g.parse(function(){e.spritesheet=g,e.textures=g.textures,t()})}})}else t()},i.getResourcePath=function(e,t){return e.isDataUrl?e.data.meta.image:bu.resolve(e.url.replace(t,\"\"),e.data.meta.image)},i}(),I1=function(i,e){return(I1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(i,e)};function O1(i,e){function t(){this.constructor=i}I1(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var vp=new Ii,L1=(function(i){function e(t,n,r){n===void 0&&(n=100),r===void 0&&(r=100);var o=i.call(this,t)||this;return o.tileTransform=new tb,o._width=n,o._height=r,o.uvMatrix=o.texture.uvMatrix||new F0(t),o.pluginName=\"tilingSprite\",o.uvRespectAnchor=!1,o}O1(e,i),Object.defineProperty(e.prototype,\"clampMargin\",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"tileScale\",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"tilePosition\",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var n=this._texture;n&&n.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,n=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),o=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,n,r,o)},e.prototype.getLocalBounds=function(t){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Tn),t=this._localBoundsRect),this._bounds.getRectangle(t)):i.prototype.getLocalBounds.call(this,t)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,vp);var n=this._width,r=this._height,o=-n*this.anchor._x;if(vp.x>=o&&vp.x<o+n){var s=-r*this.anchor._y;if(vp.y>=s&&vp.y<s+r)return!0}return!1},e.prototype.destroy=function(t){i.prototype.destroy.call(this,t),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,n){return new e(t instanceof rn?t:rn.from(t,n),n.width,n.height)},Object.defineProperty(e.prototype,\"width\",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"height\",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0})}(lr),`#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n`),Km=new Oi,_C=function(i){function e(t){var n=i.call(this,t)||this;return t.runners.contextChange.add(n),n.quad=new Fb,n.state=Pu.for2d(),n}return O1(e,i),e.prototype.contextChange=function(){var t=this.renderer,n={globals:t.globalUniforms};this.simpleShader=Oa.from(L1,`#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n`,n),this.shader=t.context.webGLVersion>1?Oa.from(`#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n`,`#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n`,n):Oa.from(L1,`#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n`,n)},e.prototype.render=function(t){var n=this.renderer,r=this.quad,o=r.vertices;o[0]=o[6]=t._width*-t.anchor.x,o[1]=o[3]=t._height*-t.anchor.y,o[2]=o[4]=t._width*(1-t.anchor.x),o[5]=o[7]=t._height*(1-t.anchor.y);var s=t.uvRespectAnchor?t.anchor.x:0,a=t.uvRespectAnchor?t.anchor.y:0;(o=r.uvs)[0]=o[6]=-s,o[1]=o[3]=-a,o[2]=o[4]=1-s,o[5]=o[7]=1-a,r.invalidate();var l=t._texture,u=l.baseTexture,h=t.tileTransform.localTransform,d=t.uvMatrix,p=u.isPowerOfTwo&&l.frame.width===u.width&&l.frame.height===u.height;p&&(u._glTextures[n.CONTEXT_UID]?p=u.wrapMode!==Ia.CLAMP:u.wrapMode===Ia.CLAMP&&(u.wrapMode=Ia.REPEAT));var m=p?this.simpleShader:this.shader,g=l.width,_=l.height,y=t._width,w=t._height;Km.set(h.a*g/y,h.b*g/w,h.c*_/y,h.d*_/w,h.tx/y,h.ty/w),Km.invert(),p?Km.prepend(d.mapCoord):(m.uniforms.uMapCoord=d.mapCoord.toArray(!0),m.uniforms.uClampFrame=d.uClampFrame,m.uniforms.uClampOffset=d.uClampOffset),m.uniforms.uTransform=Km.toArray(!0),m.uniforms.uColor=x0(t.tint,t.worldAlpha,m.uniforms.uColor,u.alphaMode),m.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),m.uniforms.uSampler=l,n.shader.bind(m),n.geometry.bind(r),this.state.blendMode=y0(t.blendMode,u.alphaMode),n.state.set(this.state),n.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e}(km),N1=function(i,e){return(N1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(i,e)};function K0(i,e){function t(){this.constructor=i}N1(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var yC=function(){function i(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return i.prototype.update=function(e){if(e||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var t=this.uvBuffer.data;this.data&&this.data.length===t.length||(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}},i}(),Q0=new Ii,D1=new Im,Cc=function(i){function e(t,n,r,o){o===void 0&&(o=ss.TRIANGLES);var s=i.call(this)||this;return s.geometry=t,s.shader=n,s.state=r||Pu.for2d(),s.drawMode=o,s.start=0,s.size=0,s.uvs=null,s.indices=null,s.vertexData=new Float32Array(1),s.vertexDirty=-1,s._transformID=-1,s._roundPixels=Jt.ROUND_PIXELS,s.batchUvs=null,s}return K0(e,i),Object.defineProperty(e.prototype,\"geometry\",{get:function(){return this._geometry},set:function(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"uvBuffer\",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"verticesBuffer\",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"material\",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"blendMode\",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"roundPixels\",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"tint\",{get:function(){return\"tint\"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"texture\",{get:function(){return\"texture\"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){var n=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===ss.TRIANGLES&&n.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var n=this.shader;n.alpha=this.worldAlpha,n.update&&n.update(),t.batch.flush(),n.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(n),t.state.set(this.state),t.geometry.bind(this.geometry,n),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var n=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=n.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;var o=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[o]),t.plugins[o].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry.buffers[0],n=t.data,r=t._updateID;if(r!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==n.length&&(this.vertexData=new Float32Array(n.length));for(var o=this.transform.worldTransform,s=o.a,a=o.b,l=o.c,u=o.d,h=o.tx,d=o.ty,p=this.vertexData,m=0;m<p.length/2;m++){var g=n[2*m],_=n[2*m+1];p[2*m]=s*g+l*_+h,p[2*m+1]=a*g+u*_+d}if(this._roundPixels){var y=Jt.RESOLUTION;for(m=0;m<p.length;++m)p[m]=Math.round((p[m]*y|0)/y)}this.vertexDirty=r}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],n=this.shader;n.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new yC(t,n.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,Q0);for(var n=this.geometry.getBuffer(\"aVertexPosition\").data,r=D1.points,o=this.geometry.getIndex().data,s=o.length,a=this.drawMode===4?3:1,l=0;l+2<s;l+=a){var u=2*o[l],h=2*o[l+1],d=2*o[l+2];if(r[0]=n[u],r[1]=n[u+1],r[2]=n[h],r[3]=n[h+1],r[4]=n[d],r[5]=n[d+1],D1.contains(Q0.x,Q0.y))return!0}return!1},e.prototype.destroy=function(t){i.prototype.destroy.call(this,t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(Ki),_p=function(i){function e(t,n){var r=this,o={uSampler:t,alpha:1,uTextureMatrix:Oi.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(n=Object.assign({tint:16777215,alpha:1,pluginName:\"batch\"},n)).uniforms&&Object.assign(o,n.uniforms),(r=i.call(this,n.program||cp.from(`attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n`,`varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n`),o)||this)._colorDirty=!1,r.uvMatrix=new F0(t),r.batchable=n.program===void 0,r.pluginName=n.pluginName,r.tint=n.tint,r.alpha=n.alpha,r}return K0(e,i),Object.defineProperty(e.prototype,\"texture\",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"alpha\",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"tint\",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;x0(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(Oa),Qm=function(i){function e(t,n,r){var o=i.call(this)||this,s=new Wi(t),a=new Wi(n,!0),l=new Wi(r,!0,!0);return o.addAttribute(\"aVertexPosition\",s,2,!1,sn.FLOAT).addAttribute(\"aTextureCoord\",a,2,!1,sn.FLOAT).addIndex(l),o._updateId=-1,o}return K0(e,i),Object.defineProperty(e.prototype,\"vertexDirtyId\",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(bc),F1=function(i,e){return(F1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(i,e)},eg=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]},xC=function(){function i(){}return i.test=function(e){return typeof e==\"string\"&&e.indexOf(\"info face=\")===0},i.parse=function(e){var t=e.match(/^[a-z]+\\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var r in t){var o=t[r].match(/^[a-z]+/gm)[0],s=t[r].match(/[a-zA-Z]+=([^\\s\"']+|\"([^\"]*)\")/gm),a={};for(var l in s){var u=s[l].split(\"=\"),h=u[0],d=u[1].replace(/\"/gm,\"\"),p=parseFloat(d),m=isNaN(p)?d:p;a[h]=m}n[o].push(a)}var g=new eg;return n.info.forEach(function(_){return g.info.push({face:_.face,size:parseInt(_.size,10)})}),n.common.forEach(function(_){return g.common.push({lineHeight:parseInt(_.lineHeight,10)})}),n.page.forEach(function(_){return g.page.push({id:parseInt(_.id,10),file:_.file})}),n.char.forEach(function(_){return g.char.push({id:parseInt(_.id,10),page:parseInt(_.page,10),x:parseInt(_.x,10),y:parseInt(_.y,10),width:parseInt(_.width,10),height:parseInt(_.height,10),xoffset:parseInt(_.xoffset,10),yoffset:parseInt(_.yoffset,10),xadvance:parseInt(_.xadvance,10)})}),n.kerning.forEach(function(_){return g.kerning.push({first:parseInt(_.first,10),second:parseInt(_.second,10),amount:parseInt(_.amount,10)})}),n.distanceField.forEach(function(_){return g.distanceField.push({distanceRange:parseInt(_.distanceRange,10),fieldType:_.fieldType})}),g},i}(),e_=function(){function i(){}return i.test=function(e){return e instanceof XMLDocument&&e.getElementsByTagName(\"page\").length&&e.getElementsByTagName(\"info\")[0].getAttribute(\"face\")!==null},i.parse=function(e){for(var t=new eg,n=e.getElementsByTagName(\"info\"),r=e.getElementsByTagName(\"common\"),o=e.getElementsByTagName(\"page\"),s=e.getElementsByTagName(\"char\"),a=e.getElementsByTagName(\"kerning\"),l=e.getElementsByTagName(\"distanceField\"),u=0;u<n.length;u++)t.info.push({face:n[u].getAttribute(\"face\"),size:parseInt(n[u].getAttribute(\"size\"),10)});for(u=0;u<r.length;u++)t.common.push({lineHeight:parseInt(r[u].getAttribute(\"lineHeight\"),10)});for(u=0;u<o.length;u++)t.page.push({id:parseInt(o[u].getAttribute(\"id\"),10)||0,file:o[u].getAttribute(\"file\")});for(u=0;u<s.length;u++){var h=s[u];t.char.push({id:parseInt(h.getAttribute(\"id\"),10),page:parseInt(h.getAttribute(\"page\"),10)||0,x:parseInt(h.getAttribute(\"x\"),10),y:parseInt(h.getAttribute(\"y\"),10),width:parseInt(h.getAttribute(\"width\"),10),height:parseInt(h.getAttribute(\"height\"),10),xoffset:parseInt(h.getAttribute(\"xoffset\"),10),yoffset:parseInt(h.getAttribute(\"yoffset\"),10),xadvance:parseInt(h.getAttribute(\"xadvance\"),10)})}for(u=0;u<a.length;u++)t.kerning.push({first:parseInt(a[u].getAttribute(\"first\"),10),second:parseInt(a[u].getAttribute(\"second\"),10),amount:parseInt(a[u].getAttribute(\"amount\"),10)});for(u=0;u<l.length;u++)t.distanceField.push({fieldType:l[u].getAttribute(\"fieldType\"),distanceRange:parseInt(l[u].getAttribute(\"distanceRange\"),10)});return t},i}(),bC=function(){function i(){}return i.test=function(e){if(typeof e==\"string\"&&e.indexOf(\"<font>\")>-1){var t=new self.DOMParser().parseFromString(e,\"text/xml\");return e_.test(t)}return!1},i.parse=function(e){var t=new self.DOMParser().parseFromString(e,\"text/xml\");return e_.parse(t)},i}(),t_=[xC,e_,bC];function B1(i){for(var e=0;e<t_.length;e++)if(t_[e].test(i))return t_[e];return null}function wC(i,e,t,n,r,o,s){var a=t.text,l=t.fontProperties;e.translate(n,r),e.scale(o,o);var u=s.strokeThickness/2,h=-s.strokeThickness/2;e.font=s.toFontString(),e.lineWidth=s.strokeThickness,e.textBaseline=s.textBaseline,e.lineJoin=s.lineJoin,e.miterLimit=s.miterLimit,e.fillStyle=function(m,g,_,y,w,R){var F,U=_.fill;if(!Array.isArray(U))return U;if(U.length===1)return U[0];var B=_.dropShadow?_.dropShadowDistance:0,V=_.padding||0,G=m.width/y-B-2*V,W=m.height/y-B-2*V,ge=U.slice(),he=_.fillGradientStops.slice();if(!he.length)for(var se=ge.length+1,de=1;de<se;++de)he.push(de/se);if(ge.unshift(U[0]),he.unshift(0),ge.push(U[U.length-1]),he.push(1),_.fillGradientType===mp.LINEAR_VERTICAL){F=g.createLinearGradient(G/2,V,G/2,W+V);var ue=0,xe=(R.fontProperties.fontSize+_.strokeThickness)/W;for(de=0;de<w.length;de++)for(var We=R.lineHeight*de,Ge=0;Ge<ge.length;Ge++){var Ae=We/W+(typeof he[Ge]==\"number\"?he[Ge]:Ge/ge.length)*xe,Re=Math.max(ue,Ae);Re=Math.min(Re,1),F.addColorStop(Re,ge[Ge]),ue=Re}}else{F=g.createLinearGradient(V,W/2,G+V,W/2);var Ze=ge.length+1,lt=1;for(de=0;de<ge.length;de++){var dt=void 0;dt=typeof he[de]==\"number\"?he[de]:lt/Ze,F.addColorStop(dt,ge[de]),lt++}}return F}(i,e,s,o,[a],t),e.strokeStyle=s.stroke;var d=s.dropShadowColor,p=wu(typeof d==\"number\"?d:v0(d));s.dropShadow?(e.shadowColor=\"rgba(\"+255*p[0]+\",\"+255*p[1]+\",\"+255*p[2]+\",\"+s.dropShadowAlpha+\")\",e.shadowBlur=s.dropShadowBlur,e.shadowOffsetX=Math.cos(s.dropShadowAngle)*s.dropShadowDistance,e.shadowOffsetY=Math.sin(s.dropShadowAngle)*s.dropShadowDistance):(e.shadowColor=\"black\",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),s.stroke&&s.strokeThickness&&e.strokeText(a,u,h+t.lineHeight-l.descent),s.fill&&e.fillText(a,u,h+t.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle=\"rgba(0, 0, 0, 0)\"}function k1(i){return Array.from?Array.from(i):i.split(\"\")}function tg(i){return i.codePointAt?i.codePointAt(0):i.charCodeAt(0)}var Pc=function(){function i(e,t,n){var r,o,s=e.info[0],a=e.common[0],l=e.page[0],u=e.distanceField[0],h=ap(l.file),d={};this._ownsTextures=n,this.font=s.face,this.size=s.size,this.lineHeight=a.lineHeight/h,this.chars={},this.pageTextures=d;for(var p=0;p<e.page.length;p++){var m=e.page[p],g=m.id,_=m.file;d[g]=t instanceof Array?t[p]:t[_],(u==null?void 0:u.fieldType)&&u.fieldType!==\"none\"&&(d[g].baseTexture.alphaMode=Os.NO_PREMULTIPLIED_ALPHA)}for(p=0;p<e.char.length;p++){var y=e.char[p],w=(g=y.id,y.page),R=e.char[p],F=R.x,U=R.y,B=R.width,V=R.height,G=R.xoffset,W=R.yoffset,ge=R.xadvance;U/=h,B/=h,V/=h,G/=h,W/=h,ge/=h;var he=new Tn((F/=h)+d[w].frame.x/h,U+d[w].frame.y/h,B,V);this.chars[g]={xOffset:G,yOffset:W,xAdvance:ge,kerning:{},texture:new rn(d[w].baseTexture,he),page:w}}for(p=0;p<e.kerning.length;p++){var se=e.kerning[p],de=se.first,ue=se.second,xe=se.amount;de/=h,ue/=h,xe/=h,this.chars[ue]&&(this.chars[ue].kerning[de]=xe)}this.distanceFieldRange=u==null?void 0:u.distanceRange,this.distanceFieldType=(o=(r=u==null?void 0:u.fieldType)===null||r===void 0?void 0:r.toLowerCase())!==null&&o!==void 0?o:\"none\"}return i.prototype.destroy=function(){for(var e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(var e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null},i.install=function(e,t,n){var r;if(e instanceof eg)r=e;else{var o=B1(e);if(!o)throw new Error(\"Unrecognized data format for font.\");r=o.parse(e)}t instanceof rn&&(t=[t]);var s=new i(r,t,n);return i.available[s.font]=s,s},i.uninstall=function(e){var t=i.available[e];if(!t)throw new Error(\"No font found named '\"+e+\"'\");t.destroy(),delete i.available[e]},i.from=function(e,t,n){if(!e)throw new Error(\"[BitmapFont] Property `name` is required.\");var r=Object.assign({},i.defaultOptions,n),o=r.chars,s=r.padding,a=r.resolution,l=r.textureWidth,u=r.textureHeight,h=function(Ze){typeof Ze==\"string\"&&(Ze=[Ze]);for(var lt=[],dt=0,ce=Ze.length;dt<ce;dt++){var fe=Ze[dt];if(Array.isArray(fe)){if(fe.length!==2)throw new Error(\"[BitmapFont]: Invalid character range length, expecting 2 got \"+fe.length+\".\");var Qe=fe[0].charCodeAt(0),Xe=fe[1].charCodeAt(0);if(Xe<Qe)throw new Error(\"[BitmapFont]: Invalid character range.\");for(var je=Qe,ft=Xe;je<=ft;je++)lt.push(String.fromCharCode(je))}else lt.push.apply(lt,k1(fe))}if(lt.length===0)throw new Error(\"[BitmapFont]: Empty set when resolving characters.\");return lt}(o),d=t instanceof Rc?t:new Rc(t),p=l,m=new eg;m.info[0]={face:d.fontFamily,size:d.fontSize},m.common[0]={lineHeight:d.fontSize};for(var g,_,y,w=0,R=0,F=0,U=[],B=0;B<h.length;B++){g||((g=document.createElement(\"canvas\")).width=l,g.height=u,_=g.getContext(\"2d\"),y=new Cn(g,{resolution:a}),U.push(new rn(y)),m.page.push({id:U.length-1,file:\"\"}));var V=Ro.measureText(h[B],d,!1,g),G=V.width,W=Math.ceil(V.height),ge=Math.ceil((d.fontStyle===\"italic\"?2:1)*G);if(R>=u-W*a){if(R===0)throw new Error(\"[BitmapFont] textureHeight \"+u+\"px is too small for \"+d.fontSize+\"px fonts\");--B,g=null,_=null,y=null,R=0,w=0,F=0}else if(F=Math.max(W+V.fontProperties.descent,F),ge*a+w>=p)--B,R+=F*a,R=Math.ceil(R),w=0,F=0;else{wC(g,_,V,w,R,a,d);var he=tg(V.text);m.char.push({id:he,page:U.length-1,x:w/a,y:R/a,width:ge,height:W,xoffset:0,yoffset:0,xadvance:Math.ceil(G-(d.dropShadow?d.dropShadowDistance:0)-(d.stroke?d.strokeThickness:0))}),w+=(ge+2*s)*a,w=Math.ceil(w)}}B=0;for(var se=h.length;B<se;B++)for(var de=h[B],ue=0;ue<se;ue++){var xe=h[ue],We=_.measureText(de).width,Ge=_.measureText(xe).width,Ae=_.measureText(de+xe).width-(We+Ge);Ae&&m.kerning.push({first:tg(de),second:tg(xe),amount:Ae})}var Re=new i(m,U,!0);return i.available[e]!==void 0&&i.uninstall(e),i.available[e]=Re,Re},i.ALPHA=[[\"a\",\"z\"],[\"A\",\"Z\"],\" \"],i.NUMERIC=[[\"0\",\"9\"]],i.ALPHANUMERIC=[[\"a\",\"z\"],[\"A\",\"Z\"],[\"0\",\"9\"],\" \"],i.ASCII=[[\" \",\"~\"]],i.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:i.ALPHANUMERIC},i.available={},i}(),SC=[],TC=[],U1=[],EC=(function(i){function e(t,n){n===void 0&&(n={});var r=i.call(this)||this;r._tint=16777215;var o=Object.assign({},e.styleDefaults,n),s=o.align,a=o.tint,l=o.maxWidth,u=o.letterSpacing,h=o.fontName,d=o.fontSize;if(!Pc.available[h])throw new Error('Missing BitmapFont \"'+h+'\"');return r._activePagesMeshData=[],r._textWidth=0,r._textHeight=0,r._align=s,r._tint=a,r._fontName=h,r._fontSize=d||Pc.available[h].size,r._text=t,r._maxWidth=l,r._maxLineHeight=0,r._letterSpacing=u,r._anchor=new xc(function(){r.dirty=!0},r,0,0),r._roundPixels=Jt.ROUND_PIXELS,r.dirty=!0,r._textureCache={},r}(function(t,n){function r(){this.constructor=t}F1(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)})(e,i),e.prototype.updateText=function(){for(var t,n=Pc.available[this._fontName],r=this._fontSize/n.size,o=new Ii,s=[],a=[],l=[],u=k1(this._text.replace(/(?:\\r\\n|\\r)/g,`\n`)||\" \"),h=this._maxWidth*n.size/this._fontSize,d=n.distanceFieldType===\"none\"?SC:TC,p=null,m=0,g=0,_=0,y=-1,w=0,R=0,F=0,U=0,B=0;B<u.length;B++){var V=tg(je=u[B]);if(/(?:\\s)/.test(je)&&(y=B,w=m,U++),je!==\"\\r\"&&je!==`\n`){var G=n.chars[V];if(G){p&&G.kerning[p]&&(o.x+=G.kerning[p]);var W=U1.pop()||{texture:rn.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Ii};W.texture=G.texture,W.line=_,W.charCode=V,W.position.x=o.x+G.xOffset+this._letterSpacing/2,W.position.y=o.y+G.yOffset,W.prevSpaces=U,s.push(W),m=W.position.x+G.texture.orig.width,o.x+=G.xAdvance+this._letterSpacing,F=Math.max(F,G.yOffset+G.texture.height),p=V,y!==-1&&h>0&&o.x>h&&(Su(s,1+y-++R,1+B-y),B=y,y=-1,a.push(w),l.push(s.length>0?s[s.length-1].prevSpaces:0),g=Math.max(g,w),_++,o.x=0,o.y+=n.lineHeight,p=null,U=0)}}else a.push(m),l.push(-1),g=Math.max(g,m),++_,++R,o.x=0,o.y+=n.lineHeight,p=null,U=0}var ge=u[u.length-1];ge!==\"\\r\"&&ge!==`\n`&&(/(?:\\s)/.test(ge)&&(m=w),a.push(m),g=Math.max(g,m),l.push(-1));var he=[];for(B=0;B<=_;B++){var se=0;this._align===\"right\"?se=g-a[B]:this._align===\"center\"?se=(g-a[B])/2:this._align===\"justify\"&&(se=l[B]<0?0:(g-a[B])/l[B]),he.push(se)}var de=s.length,ue={},xe=[],We=this._activePagesMeshData;for(B=0;B<We.length;B++)d.push(We[B]);for(B=0;B<de;B++){var Ge=(mt=s[B].texture).baseTexture.uid;if(!ue[Ge]){if(!(tt=d.pop())){var Ae=new Qm,Re=void 0,Ze=void 0;n.distanceFieldType===\"none\"?(Re=new _p(rn.EMPTY),Ze=Qt.NORMAL):(Re=new _p(rn.EMPTY,{program:cp.from(`// Mesh material default fragment\\r\nattribute vec2 aVertexPosition;\\r\nattribute vec2 aTextureCoord;\\r\n\\r\nuniform mat3 projectionMatrix;\\r\nuniform mat3 translationMatrix;\\r\nuniform mat3 uTextureMatrix;\\r\n\\r\nvarying vec2 vTextureCoord;\\r\n\\r\nvoid main(void)\\r\n{\\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\r\n\\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\\r\n}\\r\n`,`// Pixi texture info\\r\nvarying vec2 vTextureCoord;\\r\nuniform sampler2D uSampler;\\r\n\\r\n// Tint\\r\nuniform vec4 uColor;\\r\n\\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\\r\nuniform float uFWidth;\\r\n\\r\nvoid main(void) {\\r\n\\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\\r\n\\r\n  // MSDF\\r\n  float median = texColor.r + texColor.g + texColor.b -\\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\\r\n                  max(texColor.r, max(texColor.g, texColor.b));\\r\n  // SDF\\r\n  median = min(median, texColor.a);\\r\n\\r\n  float screenPxDistance = uFWidth * (median - 0.5);\\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\\r\n\\r\n  // NPM Textures, NPM outputs\\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\\r\n\\r\n}\\r\n`),uniforms:{uFWidth:0}}),Ze=Qt.NORMAL_NPM);var lt=new Cc(Ae,Re);lt.blendMode=Ze,tt={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:lt,vertices:null,uvs:null,indices:null}}tt.index=0,tt.indexCount=0,tt.vertexCount=0,tt.uvsCount=0,tt.total=0;var dt=this._textureCache;dt[Ge]=dt[Ge]||new rn(mt.baseTexture),tt.mesh.texture=dt[Ge],tt.mesh.tint=this._tint,xe.push(tt),ue[Ge]=tt}ue[Ge].total++}for(B=0;B<We.length;B++)xe.indexOf(We[B])===-1&&this.removeChild(We[B].mesh);for(B=0;B<xe.length;B++)xe[B].mesh.parent!==this&&this.addChild(xe[B].mesh);for(var B in this._activePagesMeshData=xe,ue){var ce=(tt=ue[B]).total;if(!(((t=tt.indices)===null||t===void 0?void 0:t.length)>6*ce)||tt.vertices.length<2*Cc.BATCHABLE_SIZE)tt.vertices=new Float32Array(8*ce),tt.uvs=new Float32Array(8*ce),tt.indices=new Uint16Array(6*ce);else for(var fe=tt.total,Qe=tt.vertices,Xe=4*fe*2;Xe<Qe.length;Xe++)Qe[Xe]=0;tt.mesh.size=6*ce}for(B=0;B<de;B++){var je,ft=(je=s[B]).position.x+he[je.line]*(this._align===\"justify\"?je.prevSpaces:1);this._roundPixels&&(ft=Math.round(ft));var mt,Ke=ft*r,oe=je.position.y*r,Ee=ue[(mt=je.texture).baseTexture.uid],He=mt.frame,ze=mt._uvs,Pe=Ee.index++;Ee.indices[6*Pe+0]=0+4*Pe,Ee.indices[6*Pe+1]=1+4*Pe,Ee.indices[6*Pe+2]=2+4*Pe,Ee.indices[6*Pe+3]=0+4*Pe,Ee.indices[6*Pe+4]=2+4*Pe,Ee.indices[6*Pe+5]=3+4*Pe,Ee.vertices[8*Pe+0]=Ke,Ee.vertices[8*Pe+1]=oe,Ee.vertices[8*Pe+2]=Ke+He.width*r,Ee.vertices[8*Pe+3]=oe,Ee.vertices[8*Pe+4]=Ke+He.width*r,Ee.vertices[8*Pe+5]=oe+He.height*r,Ee.vertices[8*Pe+6]=Ke,Ee.vertices[8*Pe+7]=oe+He.height*r,Ee.uvs[8*Pe+0]=ze.x0,Ee.uvs[8*Pe+1]=ze.y0,Ee.uvs[8*Pe+2]=ze.x1,Ee.uvs[8*Pe+3]=ze.y1,Ee.uvs[8*Pe+4]=ze.x2,Ee.uvs[8*Pe+5]=ze.y2,Ee.uvs[8*Pe+6]=ze.x3,Ee.uvs[8*Pe+7]=ze.y3}for(var B in this._textWidth=g*r,this._textHeight=(o.y+n.lineHeight)*r,ue){var tt=ue[B];if(this.anchor.x!==0||this.anchor.y!==0)for(var It=0,Nt=this._textWidth*this.anchor.x,Ot=this._textHeight*this.anchor.y,pn=0;pn<tt.total;pn++)tt.vertices[It++]-=Nt,tt.vertices[It++]-=Ot,tt.vertices[It++]-=Nt,tt.vertices[It++]-=Ot,tt.vertices[It++]-=Nt,tt.vertices[It++]-=Ot,tt.vertices[It++]-=Nt,tt.vertices[It++]-=Ot;this._maxLineHeight=F*r;var Mi=tt.mesh.geometry.getBuffer(\"aVertexPosition\"),zn=tt.mesh.geometry.getBuffer(\"aTextureCoord\"),qr=tt.mesh.geometry.getIndex();Mi.data=tt.vertices,zn.data=tt.uvs,qr.data=tt.indices,Mi.update(),zn.update(),qr.update()}for(B=0;B<s.length;B++)U1.push(s[B])},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype._render=function(t){var n=Pc.available[this._fontName],r=n.distanceFieldRange,o=n.distanceFieldType,s=n.size;if(o!==\"none\")for(var a=this.worldTransform,l=a.a,u=a.b,h=a.c,d=a.d,p=Math.sqrt(l*l+u*u),m=Math.sqrt(h*h+d*d),g=(Math.abs(p)+Math.abs(m))/2,_=this._fontSize/s,y=0,w=this._activePagesMeshData;y<w.length;y++)w[y].mesh.shader.uniforms.uFWidth=g*r*_*t.resolution;i.prototype._render.call(this,t)},e.prototype.getLocalBounds=function(){return this.validate(),i.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(e.prototype,\"tint\",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var n=0;n<this._activePagesMeshData.length;n++)this._activePagesMeshData[n].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"align\",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"fontName\",{get:function(){return this._fontName},set:function(t){if(!Pc.available[t])throw new Error('Missing BitmapFont \"'+t+'\"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"fontSize\",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"anchor\",{get:function(){return this._anchor},set:function(t){typeof t==\"number\"?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"text\",{get:function(){return this._text},set:function(t){t=String(t==null?\"\":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"maxWidth\",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"maxLineHeight\",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"textWidth\",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"letterSpacing\",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"roundPixels\",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"textHeight\",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),e.prototype.destroy=function(t){var n=this._textureCache;for(var r in n)n[r].destroy(),delete n[r];this._textureCache=null,i.prototype.destroy.call(this,t)},e.styleDefaults={align:\"left\",tint:16777215,maxWidth:0,letterSpacing:0}}(Ki),function(){function i(){}return i.add=function(){Ei.setExtensionXhrType(\"fnt\",Ei.XHR_RESPONSE_TYPE.TEXT)},i.use=function(e,t){var n=B1(e.data);if(n)for(var r=i.getBaseUrl(this,e),o=n.parse(e.data),s={},a=function(_){s[_.metadata.pageFile]=_.texture,Object.keys(s).length===o.page.length&&(e.bitmapFont=Pc.install(o,s,!0),t())},l=0;l<o.page.length;++l){var u=o.page[l].file,h=r+u,d=!1;for(var p in this.resources){var m=this.resources[p];if(m.url===h){m.metadata.pageFile=u,m.texture?a(m):m.onAfterMiddleware.add(a),d=!0;break}}if(!d){var g={crossOrigin:e.crossOrigin,loadType:Ei.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:u},e.metadata.imageMetadata),parentResource:e};this.add(h,g,a)}}else t()},i.getBaseUrl=function(e,t){var n=t.isDataUrl?\"\":i.dirname(t.url);return t.isDataUrl&&(n===\".\"&&(n=\"\"),e.baseUrl&&n&&e.baseUrl.charAt(e.baseUrl.length-1)===\"/\"&&(n+=\"/\")),(n=n.replace(e.baseUrl,\"\"))&&n.charAt(n.length-1)!==\"/\"&&(n+=\"/\"),n},i.dirname=function(e){var t=e.replace(/\\\\/g,\"/\").replace(/\\/$/,\"\").replace(/\\/[^\\/]*$/,\"\");return t===e?\".\":t===\"\"?\"/\":t},i}()),G1=function(i,e){return(G1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(i,e)},MC=function(i){function e(t){t===void 0&&(t=1);var n=i.call(this,`attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}`,`varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n`,{uAlpha:1})||this;return n.alpha=t,n}return function(t,n){function r(){this.constructor=t}G1(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}(e,i),Object.defineProperty(e.prototype,\"alpha\",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(Nr),H1=function(i,e){return(H1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(i,e)};function z1(i,e){function t(){this.constructor=i}H1(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var j1,V1,W1,X1,q1,Y1,$1,J1,Z1,K1,Q1,ew,tw,yp,nw,iw,rw,ow,sw,AC={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},RC=[\"varying vec2 vBlurTexCoords[%size%];\",\"uniform sampler2D uSampler;\",\"void main(void)\",\"{\",\"    gl_FragColor = vec4(0.0);\",\"    %blur%\",\"}\"].join(`\n`);(function(i){i[i.WEBGL_LEGACY=0]=\"WEBGL_LEGACY\",i[i.WEBGL=1]=\"WEBGL\",i[i.WEBGL2=2]=\"WEBGL2\"})(j1||(j1={})),function(i){i[i.UNKNOWN=0]=\"UNKNOWN\",i[i.WEBGL=1]=\"WEBGL\",i[i.CANVAS=2]=\"CANVAS\"}(V1||(V1={})),function(i){i[i.COLOR=16384]=\"COLOR\",i[i.DEPTH=256]=\"DEPTH\",i[i.STENCIL=1024]=\"STENCIL\"}(W1||(W1={})),function(i){i[i.NORMAL=0]=\"NORMAL\",i[i.ADD=1]=\"ADD\",i[i.MULTIPLY=2]=\"MULTIPLY\",i[i.SCREEN=3]=\"SCREEN\",i[i.OVERLAY=4]=\"OVERLAY\",i[i.DARKEN=5]=\"DARKEN\",i[i.LIGHTEN=6]=\"LIGHTEN\",i[i.COLOR_DODGE=7]=\"COLOR_DODGE\",i[i.COLOR_BURN=8]=\"COLOR_BURN\",i[i.HARD_LIGHT=9]=\"HARD_LIGHT\",i[i.SOFT_LIGHT=10]=\"SOFT_LIGHT\",i[i.DIFFERENCE=11]=\"DIFFERENCE\",i[i.EXCLUSION=12]=\"EXCLUSION\",i[i.HUE=13]=\"HUE\",i[i.SATURATION=14]=\"SATURATION\",i[i.COLOR=15]=\"COLOR\",i[i.LUMINOSITY=16]=\"LUMINOSITY\",i[i.NORMAL_NPM=17]=\"NORMAL_NPM\",i[i.ADD_NPM=18]=\"ADD_NPM\",i[i.SCREEN_NPM=19]=\"SCREEN_NPM\",i[i.NONE=20]=\"NONE\",i[i.SRC_OVER=0]=\"SRC_OVER\",i[i.SRC_IN=21]=\"SRC_IN\",i[i.SRC_OUT=22]=\"SRC_OUT\",i[i.SRC_ATOP=23]=\"SRC_ATOP\",i[i.DST_OVER=24]=\"DST_OVER\",i[i.DST_IN=25]=\"DST_IN\",i[i.DST_OUT=26]=\"DST_OUT\",i[i.DST_ATOP=27]=\"DST_ATOP\",i[i.ERASE=26]=\"ERASE\",i[i.SUBTRACT=28]=\"SUBTRACT\",i[i.XOR=29]=\"XOR\"}(X1||(X1={})),function(i){i[i.POINTS=0]=\"POINTS\",i[i.LINES=1]=\"LINES\",i[i.LINE_LOOP=2]=\"LINE_LOOP\",i[i.LINE_STRIP=3]=\"LINE_STRIP\",i[i.TRIANGLES=4]=\"TRIANGLES\",i[i.TRIANGLE_STRIP=5]=\"TRIANGLE_STRIP\",i[i.TRIANGLE_FAN=6]=\"TRIANGLE_FAN\"}(q1||(q1={})),function(i){i[i.RGBA=6408]=\"RGBA\",i[i.RGB=6407]=\"RGB\",i[i.RG=33319]=\"RG\",i[i.RED=6403]=\"RED\",i[i.RGBA_INTEGER=36249]=\"RGBA_INTEGER\",i[i.RGB_INTEGER=36248]=\"RGB_INTEGER\",i[i.RG_INTEGER=33320]=\"RG_INTEGER\",i[i.RED_INTEGER=36244]=\"RED_INTEGER\",i[i.ALPHA=6406]=\"ALPHA\",i[i.LUMINANCE=6409]=\"LUMINANCE\",i[i.LUMINANCE_ALPHA=6410]=\"LUMINANCE_ALPHA\",i[i.DEPTH_COMPONENT=6402]=\"DEPTH_COMPONENT\",i[i.DEPTH_STENCIL=34041]=\"DEPTH_STENCIL\"}(Y1||(Y1={})),function(i){i[i.TEXTURE_2D=3553]=\"TEXTURE_2D\",i[i.TEXTURE_CUBE_MAP=34067]=\"TEXTURE_CUBE_MAP\",i[i.TEXTURE_2D_ARRAY=35866]=\"TEXTURE_2D_ARRAY\",i[i.TEXTURE_CUBE_MAP_POSITIVE_X=34069]=\"TEXTURE_CUBE_MAP_POSITIVE_X\",i[i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]=\"TEXTURE_CUBE_MAP_NEGATIVE_X\",i[i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]=\"TEXTURE_CUBE_MAP_POSITIVE_Y\",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]=\"TEXTURE_CUBE_MAP_NEGATIVE_Y\",i[i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]=\"TEXTURE_CUBE_MAP_POSITIVE_Z\",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]=\"TEXTURE_CUBE_MAP_NEGATIVE_Z\"}($1||($1={})),function(i){i[i.UNSIGNED_BYTE=5121]=\"UNSIGNED_BYTE\",i[i.UNSIGNED_SHORT=5123]=\"UNSIGNED_SHORT\",i[i.UNSIGNED_SHORT_5_6_5=33635]=\"UNSIGNED_SHORT_5_6_5\",i[i.UNSIGNED_SHORT_4_4_4_4=32819]=\"UNSIGNED_SHORT_4_4_4_4\",i[i.UNSIGNED_SHORT_5_5_5_1=32820]=\"UNSIGNED_SHORT_5_5_5_1\",i[i.UNSIGNED_INT=5125]=\"UNSIGNED_INT\",i[i.UNSIGNED_INT_10F_11F_11F_REV=35899]=\"UNSIGNED_INT_10F_11F_11F_REV\",i[i.UNSIGNED_INT_2_10_10_10_REV=33640]=\"UNSIGNED_INT_2_10_10_10_REV\",i[i.UNSIGNED_INT_24_8=34042]=\"UNSIGNED_INT_24_8\",i[i.UNSIGNED_INT_5_9_9_9_REV=35902]=\"UNSIGNED_INT_5_9_9_9_REV\",i[i.BYTE=5120]=\"BYTE\",i[i.SHORT=5122]=\"SHORT\",i[i.INT=5124]=\"INT\",i[i.FLOAT=5126]=\"FLOAT\",i[i.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]=\"FLOAT_32_UNSIGNED_INT_24_8_REV\",i[i.HALF_FLOAT=36193]=\"HALF_FLOAT\"}(J1||(J1={})),function(i){i[i.FLOAT=0]=\"FLOAT\",i[i.INT=1]=\"INT\",i[i.UINT=2]=\"UINT\"}(Z1||(Z1={})),function(i){i[i.NEAREST=0]=\"NEAREST\",i[i.LINEAR=1]=\"LINEAR\"}(K1||(K1={})),function(i){i[i.CLAMP=33071]=\"CLAMP\",i[i.REPEAT=10497]=\"REPEAT\",i[i.MIRRORED_REPEAT=33648]=\"MIRRORED_REPEAT\"}(Q1||(Q1={})),function(i){i[i.OFF=0]=\"OFF\",i[i.POW2=1]=\"POW2\",i[i.ON=2]=\"ON\",i[i.ON_MANUAL=3]=\"ON_MANUAL\"}(ew||(ew={})),function(i){i[i.NPM=0]=\"NPM\",i[i.UNPACK=1]=\"UNPACK\",i[i.PMA=2]=\"PMA\",i[i.NO_PREMULTIPLIED_ALPHA=0]=\"NO_PREMULTIPLIED_ALPHA\",i[i.PREMULTIPLY_ON_UPLOAD=1]=\"PREMULTIPLY_ON_UPLOAD\",i[i.PREMULTIPLY_ALPHA=2]=\"PREMULTIPLY_ALPHA\",i[i.PREMULTIPLIED_ALPHA=2]=\"PREMULTIPLIED_ALPHA\"}(tw||(tw={})),function(i){i[i.NO=0]=\"NO\",i[i.YES=1]=\"YES\",i[i.AUTO=2]=\"AUTO\",i[i.BLEND=0]=\"BLEND\",i[i.CLEAR=1]=\"CLEAR\",i[i.BLIT=2]=\"BLIT\"}(yp||(yp={})),function(i){i[i.AUTO=0]=\"AUTO\",i[i.MANUAL=1]=\"MANUAL\"}(nw||(nw={})),function(i){i.LOW=\"lowp\",i.MEDIUM=\"mediump\",i.HIGH=\"highp\"}(iw||(iw={})),function(i){i[i.NONE=0]=\"NONE\",i[i.SCISSOR=1]=\"SCISSOR\",i[i.STENCIL=2]=\"STENCIL\",i[i.SPRITE=3]=\"SPRITE\"}(rw||(rw={})),function(i){i[i.NONE=0]=\"NONE\",i[i.LOW=2]=\"LOW\",i[i.MEDIUM=4]=\"MEDIUM\",i[i.HIGH=8]=\"HIGH\"}(ow||(ow={})),function(i){i[i.ELEMENT_ARRAY_BUFFER=34963]=\"ELEMENT_ARRAY_BUFFER\",i[i.ARRAY_BUFFER=34962]=\"ARRAY_BUFFER\",i[i.UNIFORM_BUFFER=35345]=\"UNIFORM_BUFFER\"}(sw||(sw={}));var n_=function(i){function e(t,n,r,o,s){n===void 0&&(n=8),r===void 0&&(r=4),o===void 0&&(o=Jt.FILTER_RESOLUTION),s===void 0&&(s=5);var a=this,l=function(h,d){var p,m=Math.ceil(h/2),g=`\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }`,_=\"\";p=d?\"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);\":\"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);\";for(var y=0;y<h;y++){var w=p.replace(\"%index%\",y.toString());_+=w=w.replace(\"%sampleIndex%\",y-(m-1)+\".0\"),_+=`\n`}return g=(g=g.replace(\"%blur%\",_)).replace(\"%size%\",h.toString())}(s,t),u=function(h){for(var d,p=AC[h],m=p.length,g=RC,_=\"\",y=0;y<h;y++){var w=\"gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;\".replace(\"%index%\",y.toString());d=y,y>=m&&(d=h-y-1),_+=w=w.replace(\"%value%\",p[d].toString()),_+=`\n`}return g=(g=g.replace(\"%blur%\",_)).replace(\"%size%\",h.toString())}(s);return(a=i.call(this,l,u)||this).horizontal=t,a.resolution=o,a._quality=0,a.quality=r,a.blur=n,a}return z1(e,i),e.prototype.apply=function(t,n,r,o){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/n.width):this.uniforms.strength=1/r.height*(r.height/n.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/n.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/n.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,n,r,o);else{var s=t.getFilterTexture(),a=t.renderer,l=n,u=s;this.state.blend=!1,t.applyFilter(this,l,u,yp.CLEAR);for(var h=1;h<this.passes-1;h++){t.bindAndClear(l,yp.BLIT),this.uniforms.uSampler=u;var d=u;u=l,l=d,a.shader.bind(this),a.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,u,r,o),t.returnFilterTexture(s)}},Object.defineProperty(e.prototype,\"blur\",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"quality\",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e}(Nr),CC=function(i){function e(t,n,r,o){t===void 0&&(t=8),n===void 0&&(n=4),r===void 0&&(r=Jt.FILTER_RESOLUTION),o===void 0&&(o=5);var s=i.call(this)||this;return s.blurXFilter=new n_(!0,t,n,r,o),s.blurYFilter=new n_(!1,t,n,r,o),s.resolution=r,s.quality=n,s.blur=t,s.repeatEdgePixels=!1,s}return z1(e,i),e.prototype.apply=function(t,n,r,o){var s=Math.abs(this.blurXFilter.strength),a=Math.abs(this.blurYFilter.strength);if(s&&a){var l=t.getFilterTexture();this.blurXFilter.apply(t,n,l,yp.CLEAR),this.blurYFilter.apply(t,l,r,o),t.returnFilterTexture(l)}else a?this.blurYFilter.apply(t,n,r,o):this.blurXFilter.apply(t,n,r,o)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(e.prototype,\"blur\",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"quality\",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"blurX\",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"blurY\",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"blendMode\",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"repeatEdgePixels\",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),e}(Nr),aw=function(i,e){return(aw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(i,e)},i_=function(i){function e(){var t=this,n={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(t=i.call(this,Jb,`varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n`,n)||this).alpha=1,t}return function(t,n){function r(){this.constructor=t}aw(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}(e,i),e.prototype._loadMatrix=function(t,n){n===void 0&&(n=!1);var r=t;n&&(this._multiply(r,this.uniforms.m,t),r=this._colorMatrix(r)),this.uniforms.m=r},e.prototype._multiply=function(t,n,r){return t[0]=n[0]*r[0]+n[1]*r[5]+n[2]*r[10]+n[3]*r[15],t[1]=n[0]*r[1]+n[1]*r[6]+n[2]*r[11]+n[3]*r[16],t[2]=n[0]*r[2]+n[1]*r[7]+n[2]*r[12]+n[3]*r[17],t[3]=n[0]*r[3]+n[1]*r[8]+n[2]*r[13]+n[3]*r[18],t[4]=n[0]*r[4]+n[1]*r[9]+n[2]*r[14]+n[3]*r[19]+n[4],t[5]=n[5]*r[0]+n[6]*r[5]+n[7]*r[10]+n[8]*r[15],t[6]=n[5]*r[1]+n[6]*r[6]+n[7]*r[11]+n[8]*r[16],t[7]=n[5]*r[2]+n[6]*r[7]+n[7]*r[12]+n[8]*r[17],t[8]=n[5]*r[3]+n[6]*r[8]+n[7]*r[13]+n[8]*r[18],t[9]=n[5]*r[4]+n[6]*r[9]+n[7]*r[14]+n[8]*r[19]+n[9],t[10]=n[10]*r[0]+n[11]*r[5]+n[12]*r[10]+n[13]*r[15],t[11]=n[10]*r[1]+n[11]*r[6]+n[12]*r[11]+n[13]*r[16],t[12]=n[10]*r[2]+n[11]*r[7]+n[12]*r[12]+n[13]*r[17],t[13]=n[10]*r[3]+n[11]*r[8]+n[12]*r[13]+n[13]*r[18],t[14]=n[10]*r[4]+n[11]*r[9]+n[12]*r[14]+n[13]*r[19]+n[14],t[15]=n[15]*r[0]+n[16]*r[5]+n[17]*r[10]+n[18]*r[15],t[16]=n[15]*r[1]+n[16]*r[6]+n[17]*r[11]+n[18]*r[16],t[17]=n[15]*r[2]+n[16]*r[7]+n[17]*r[12]+n[18]*r[17],t[18]=n[15]*r[3]+n[16]*r[8]+n[17]*r[13]+n[18]*r[18],t[19]=n[15]*r[4]+n[16]*r[9]+n[17]*r[14]+n[18]*r[19]+n[19],t},e.prototype._colorMatrix=function(t){var n=new Float32Array(t);return n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,n},e.prototype.brightness=function(t,n){var r=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(r,n)},e.prototype.tint=function(t,n){var r=[(t>>16&255)/255,0,0,0,0,0,(t>>8&255)/255,0,0,0,0,0,(255&t)/255,0,0,0,0,0,1,0];this._loadMatrix(r,n)},e.prototype.greyscale=function(t,n){var r=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(r,n)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,n){t=(t||0)/180*Math.PI;var r=Math.cos(t),o=Math.sin(t),s=1/3,a=(0,Math.sqrt)(s),l=[r+(1-r)*s,s*(1-r)-a*o,s*(1-r)+a*o,0,0,s*(1-r)+a*o,r+s*(1-r),s*(1-r)-a*o,0,0,s*(1-r)-a*o,s*(1-r)+a*o,r+s*(1-r),0,0,0,0,0,1,0];this._loadMatrix(l,n)},e.prototype.contrast=function(t,n){var r=(t||0)+1,o=-.5*(r-1),s=[r,0,0,0,o,0,r,0,0,o,0,0,r,0,o,0,0,0,1,0];this._loadMatrix(s,n)},e.prototype.saturate=function(t,n){t===void 0&&(t=0);var r=2*t/3+1,o=-.5*(r-1),s=[r,o,o,0,0,o,r,o,0,0,o,o,r,0,0,0,0,0,1,0];this._loadMatrix(s,n)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,n,r,o,s){var a=((r=r||16770432)>>16&255)/255,l=(r>>8&255)/255,u=(255&r)/255,h=((o=o||3375104)>>16&255)/255,d=(o>>8&255)/255,p=(255&o)/255,m=[.3,.59,.11,0,0,a,l,u,t=t||.2,0,h,d,p,n=n||.15,0,a-h,l-d,u-p,0,0];this._loadMatrix(m,s)},e.prototype.night=function(t,n){var r=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(r,n)},e.prototype.predator=function(t,n){var r=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(r,n)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(e.prototype,\"matrix\",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"alpha\",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(Nr);i_.prototype.grayscale=i_.prototype.greyscale;/*!\n * @pixi/filter-displacement - v6.2.0\n * Compiled Mon, 01 Nov 2021 16:52:10 UTC\n *\n * @pixi/filter-displacement is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n *//*! *****************************************************************************\nCopyright (c) Microsoft Corporation. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */var lw=function(i,e){return(lw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(i,e)},PC=function(i){function e(t,n){var r=this,o=new Oi;return t.renderable=!1,(r=i.call(this,`attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n`,`varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n`,{mapSampler:t._texture,filterMatrix:o,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=t,r.maskMatrix=o,n==null&&(n=20),r.scale=new Ii(n,n),r}return function(t,n){function r(){this.constructor=t}lw(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}(e,i),e.prototype.apply=function(t,n,r,o){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var s=this.maskSprite.worldTransform,a=Math.sqrt(s.a*s.a+s.b*s.b),l=Math.sqrt(s.c*s.c+s.d*s.d);a!==0&&l!==0&&(this.uniforms.rotation[0]=s.a/a,this.uniforms.rotation[1]=s.b/a,this.uniforms.rotation[2]=s.c/l,this.uniforms.rotation[3]=s.d/l),t.applyFilter(this,n,r,o)},Object.defineProperty(e.prototype,\"map\",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),e}(Nr),uw=function(i,e){return(uw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(i,e)},IC=function(i){function e(){return i.call(this,`\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n`,`varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it's\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n`)||this}return function(t,n){function r(){this.constructor=t}uw(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}(e,i),e}(Nr),hw=function(i,e){return(hw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(i,e)},cw,dw,pw,fw,mw,gw,vw,_w,yw,xw,bw,ww,Sw,Tw,Ew,Mw,Aw,r_,Rw,OC=function(i){function e(t,n){t===void 0&&(t=.5),n===void 0&&(n=Math.random());var r=i.call(this,Jb,`precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n`,{uNoise:0,uSeed:0})||this;return r.noise=t,r.seed=n,r}return function(t,n){function r(){this.constructor=t}hw(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}(e,i),Object.defineProperty(e.prototype,\"noise\",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"seed\",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),e}(Nr);(function(i){i[i.WEBGL_LEGACY=0]=\"WEBGL_LEGACY\",i[i.WEBGL=1]=\"WEBGL\",i[i.WEBGL2=2]=\"WEBGL2\"})(cw||(cw={})),function(i){i[i.UNKNOWN=0]=\"UNKNOWN\",i[i.WEBGL=1]=\"WEBGL\",i[i.CANVAS=2]=\"CANVAS\"}(dw||(dw={})),function(i){i[i.COLOR=16384]=\"COLOR\",i[i.DEPTH=256]=\"DEPTH\",i[i.STENCIL=1024]=\"STENCIL\"}(pw||(pw={})),function(i){i[i.NORMAL=0]=\"NORMAL\",i[i.ADD=1]=\"ADD\",i[i.MULTIPLY=2]=\"MULTIPLY\",i[i.SCREEN=3]=\"SCREEN\",i[i.OVERLAY=4]=\"OVERLAY\",i[i.DARKEN=5]=\"DARKEN\",i[i.LIGHTEN=6]=\"LIGHTEN\",i[i.COLOR_DODGE=7]=\"COLOR_DODGE\",i[i.COLOR_BURN=8]=\"COLOR_BURN\",i[i.HARD_LIGHT=9]=\"HARD_LIGHT\",i[i.SOFT_LIGHT=10]=\"SOFT_LIGHT\",i[i.DIFFERENCE=11]=\"DIFFERENCE\",i[i.EXCLUSION=12]=\"EXCLUSION\",i[i.HUE=13]=\"HUE\",i[i.SATURATION=14]=\"SATURATION\",i[i.COLOR=15]=\"COLOR\",i[i.LUMINOSITY=16]=\"LUMINOSITY\",i[i.NORMAL_NPM=17]=\"NORMAL_NPM\",i[i.ADD_NPM=18]=\"ADD_NPM\",i[i.SCREEN_NPM=19]=\"SCREEN_NPM\",i[i.NONE=20]=\"NONE\",i[i.SRC_OVER=0]=\"SRC_OVER\",i[i.SRC_IN=21]=\"SRC_IN\",i[i.SRC_OUT=22]=\"SRC_OUT\",i[i.SRC_ATOP=23]=\"SRC_ATOP\",i[i.DST_OVER=24]=\"DST_OVER\",i[i.DST_IN=25]=\"DST_IN\",i[i.DST_OUT=26]=\"DST_OUT\",i[i.DST_ATOP=27]=\"DST_ATOP\",i[i.ERASE=26]=\"ERASE\",i[i.SUBTRACT=28]=\"SUBTRACT\",i[i.XOR=29]=\"XOR\"}(fw||(fw={})),function(i){i[i.POINTS=0]=\"POINTS\",i[i.LINES=1]=\"LINES\",i[i.LINE_LOOP=2]=\"LINE_LOOP\",i[i.LINE_STRIP=3]=\"LINE_STRIP\",i[i.TRIANGLES=4]=\"TRIANGLES\",i[i.TRIANGLE_STRIP=5]=\"TRIANGLE_STRIP\",i[i.TRIANGLE_FAN=6]=\"TRIANGLE_FAN\"}(mw||(mw={})),function(i){i[i.RGBA=6408]=\"RGBA\",i[i.RGB=6407]=\"RGB\",i[i.RG=33319]=\"RG\",i[i.RED=6403]=\"RED\",i[i.RGBA_INTEGER=36249]=\"RGBA_INTEGER\",i[i.RGB_INTEGER=36248]=\"RGB_INTEGER\",i[i.RG_INTEGER=33320]=\"RG_INTEGER\",i[i.RED_INTEGER=36244]=\"RED_INTEGER\",i[i.ALPHA=6406]=\"ALPHA\",i[i.LUMINANCE=6409]=\"LUMINANCE\",i[i.LUMINANCE_ALPHA=6410]=\"LUMINANCE_ALPHA\",i[i.DEPTH_COMPONENT=6402]=\"DEPTH_COMPONENT\",i[i.DEPTH_STENCIL=34041]=\"DEPTH_STENCIL\"}(gw||(gw={})),function(i){i[i.TEXTURE_2D=3553]=\"TEXTURE_2D\",i[i.TEXTURE_CUBE_MAP=34067]=\"TEXTURE_CUBE_MAP\",i[i.TEXTURE_2D_ARRAY=35866]=\"TEXTURE_2D_ARRAY\",i[i.TEXTURE_CUBE_MAP_POSITIVE_X=34069]=\"TEXTURE_CUBE_MAP_POSITIVE_X\",i[i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]=\"TEXTURE_CUBE_MAP_NEGATIVE_X\",i[i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]=\"TEXTURE_CUBE_MAP_POSITIVE_Y\",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]=\"TEXTURE_CUBE_MAP_NEGATIVE_Y\",i[i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]=\"TEXTURE_CUBE_MAP_POSITIVE_Z\",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]=\"TEXTURE_CUBE_MAP_NEGATIVE_Z\"}(vw||(vw={})),function(i){i[i.UNSIGNED_BYTE=5121]=\"UNSIGNED_BYTE\",i[i.UNSIGNED_SHORT=5123]=\"UNSIGNED_SHORT\",i[i.UNSIGNED_SHORT_5_6_5=33635]=\"UNSIGNED_SHORT_5_6_5\",i[i.UNSIGNED_SHORT_4_4_4_4=32819]=\"UNSIGNED_SHORT_4_4_4_4\",i[i.UNSIGNED_SHORT_5_5_5_1=32820]=\"UNSIGNED_SHORT_5_5_5_1\",i[i.UNSIGNED_INT=5125]=\"UNSIGNED_INT\",i[i.UNSIGNED_INT_10F_11F_11F_REV=35899]=\"UNSIGNED_INT_10F_11F_11F_REV\",i[i.UNSIGNED_INT_2_10_10_10_REV=33640]=\"UNSIGNED_INT_2_10_10_10_REV\",i[i.UNSIGNED_INT_24_8=34042]=\"UNSIGNED_INT_24_8\",i[i.UNSIGNED_INT_5_9_9_9_REV=35902]=\"UNSIGNED_INT_5_9_9_9_REV\",i[i.BYTE=5120]=\"BYTE\",i[i.SHORT=5122]=\"SHORT\",i[i.INT=5124]=\"INT\",i[i.FLOAT=5126]=\"FLOAT\",i[i.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]=\"FLOAT_32_UNSIGNED_INT_24_8_REV\",i[i.HALF_FLOAT=36193]=\"HALF_FLOAT\"}(_w||(_w={})),function(i){i[i.FLOAT=0]=\"FLOAT\",i[i.INT=1]=\"INT\",i[i.UINT=2]=\"UINT\"}(yw||(yw={})),function(i){i[i.NEAREST=0]=\"NEAREST\",i[i.LINEAR=1]=\"LINEAR\"}(xw||(xw={})),function(i){i[i.CLAMP=33071]=\"CLAMP\",i[i.REPEAT=10497]=\"REPEAT\",i[i.MIRRORED_REPEAT=33648]=\"MIRRORED_REPEAT\"}(bw||(bw={})),function(i){i[i.OFF=0]=\"OFF\",i[i.POW2=1]=\"POW2\",i[i.ON=2]=\"ON\",i[i.ON_MANUAL=3]=\"ON_MANUAL\"}(ww||(ww={})),function(i){i[i.NPM=0]=\"NPM\",i[i.UNPACK=1]=\"UNPACK\",i[i.PMA=2]=\"PMA\",i[i.NO_PREMULTIPLIED_ALPHA=0]=\"NO_PREMULTIPLIED_ALPHA\",i[i.PREMULTIPLY_ON_UPLOAD=1]=\"PREMULTIPLY_ON_UPLOAD\",i[i.PREMULTIPLY_ALPHA=2]=\"PREMULTIPLY_ALPHA\",i[i.PREMULTIPLIED_ALPHA=2]=\"PREMULTIPLIED_ALPHA\"}(Sw||(Sw={})),function(i){i[i.NO=0]=\"NO\",i[i.YES=1]=\"YES\",i[i.AUTO=2]=\"AUTO\",i[i.BLEND=0]=\"BLEND\",i[i.CLEAR=1]=\"CLEAR\",i[i.BLIT=2]=\"BLIT\"}(Tw||(Tw={})),function(i){i[i.AUTO=0]=\"AUTO\",i[i.MANUAL=1]=\"MANUAL\"}(Ew||(Ew={})),function(i){i.LOW=\"lowp\",i.MEDIUM=\"mediump\",i.HIGH=\"highp\"}(Mw||(Mw={})),function(i){i[i.NONE=0]=\"NONE\",i[i.SCISSOR=1]=\"SCISSOR\",i[i.STENCIL=2]=\"STENCIL\",i[i.SPRITE=3]=\"SPRITE\"}(Aw||(Aw={})),function(i){i[i.NONE=0]=\"NONE\",i[i.LOW=2]=\"LOW\",i[i.MEDIUM=4]=\"MEDIUM\",i[i.HIGH=8]=\"HIGH\"}(r_||(r_={})),function(i){i[i.ELEMENT_ARRAY_BUFFER=34963]=\"ELEMENT_ARRAY_BUFFER\",i[i.ARRAY_BUFFER=34962]=\"ARRAY_BUFFER\",i[i.UNIFORM_BUFFER=35345]=\"UNIFORM_BUFFER\"}(Rw||(Rw={}));var Cw=new Oi;Li.prototype._cacheAsBitmap=!1,Li.prototype._cacheData=null,Li.prototype._cacheAsBitmapResolution=null,Li.prototype._cacheAsBitmapMultisample=r_.NONE;var LC=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(Li.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(i){i!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=i,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(i){i!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=i,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(i){var e;this._cacheAsBitmap!==i&&(this._cacheAsBitmap=i,i?(this._cacheData||(this._cacheData=new LC),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),Li.prototype._renderCached=function(i){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(i),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(i))},Li.prototype._initCachedDisplayObject=function(i){var e;if(!this._cacheData||!this._cacheData.sprite){var t=this.alpha;this.alpha=1,i.batch.flush();var n=this.getLocalBounds(null,!0).clone();if(this.filters){var r=this.filters[0].padding;n.pad(r)}n.ceil(Jt.RESOLUTION);var o=i.renderTexture.current,s=i.renderTexture.sourceFrame.clone(),a=i.renderTexture.destinationFrame.clone(),l=i.projection.transform,u=Ao.create({width:n.width,height:n.height,resolution:this.cacheAsBitmapResolution||i.resolution,multisample:(e=this.cacheAsBitmapMultisample)!==null&&e!==void 0?e:i.multisample}),h=\"cacheAsBitmap_\"+ll();this._cacheData.textureCacheId=h,Cn.addToCache(u.baseTexture,h),rn.addToCache(u,h);var d=this.transform.localTransform.copyTo(Cw).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,i.render(this,{renderTexture:u,clear:!0,transform:d,skipUpdateTransform:!1}),i.framebuffer.blit(),i.projection.transform=l,i.renderTexture.bind(o,s,a),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;var p=new lr(u);p.transform.worldTransform=this.transform.worldTransform,p.anchor.x=-n.x/n.width,p.anchor.y=-n.y/n.height,p.alpha=t,p._bounds=this._bounds,this._cacheData.sprite=p,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=p.containsPoint.bind(p)}},Li.prototype._renderCachedCanvas=function(i){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(i),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(i))},Li.prototype._initCachedDisplayObjectCanvas=function(i){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(null,!0),t=this.alpha;this.alpha=1;var n=i.context,r=i._projTransform;e.ceil(Jt.RESOLUTION);var o=Ao.create({width:e.width,height:e.height}),s=\"cacheAsBitmap_\"+ll();this._cacheData.textureCacheId=s,Cn.addToCache(o.baseTexture,s),rn.addToCache(o,s);var a=Cw;this.transform.localTransform.copyTo(a),a.invert(),a.tx-=e.x,a.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,i.render(this,{renderTexture:o,clear:!0,transform:a,skipUpdateTransform:!1}),i.context=n,i._projTransform=r,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;var l=new lr(o);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-e.x/e.width,l.anchor.y=-e.y/e.height,l.alpha=t,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=i._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)}},Li.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},Li.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},Li.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Cn.removeFromCache(this._cacheData.textureCacheId),rn.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},Li.prototype._cacheAsBitmapDestroy=function(i){this.cacheAsBitmap=!1,this.destroy(i)},Li.prototype.name=null,Ki.prototype.getChildByName=function(i,e){for(var t=0,n=this.children.length;t<n;t++)if(this.children[t].name===i)return this.children[t];if(e){for(t=0,n=this.children.length;t<n;t++)if(this.children[t].getChildByName){var r=this.children[t].getChildByName(i,!0);if(r)return r}}return null},Li.prototype.getGlobalPosition=function(i,e){return i===void 0&&(i=new Ii),e===void 0&&(e=!1),this.parent?this.parent.toGlobal(this.position,i,e):(i.x=this.position.x,i.y=this.position.y),i};/*!\n * @pixi/mesh-extras - v6.2.0\n * Compiled Mon, 01 Nov 2021 16:52:10 UTC\n *\n * @pixi/mesh-extras is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n *//*! *****************************************************************************\nCopyright (c) Microsoft Corporation. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */var Pw=function(i,e){return(Pw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(i,e)};function Ic(i,e){function t(){this.constructor=i}Pw(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var NC=function(i){function e(t,n,r,o){t===void 0&&(t=100),n===void 0&&(n=100),r===void 0&&(r=10),o===void 0&&(o=10);var s=i.call(this)||this;return s.segWidth=r,s.segHeight=o,s.width=t,s.height=n,s.build(),s}return Ic(e,i),e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,n=[],r=[],o=[],s=this.segWidth-1,a=this.segHeight-1,l=this.width/s,u=this.height/a,h=0;h<t;h++){var d=h%this.segWidth,p=h/this.segWidth|0;n.push(d*l,p*u),r.push(d/s,p/a)}var m=s*a;for(h=0;h<m;h++){var g=h%s,_=h/s|0,y=_*this.segWidth+g,w=_*this.segWidth+g+1,R=(_+1)*this.segWidth+g,F=(_+1)*this.segWidth+g+1;o.push(y,w,R,w,F,R)}this.buffers[0].data=new Float32Array(n),this.buffers[1].data=new Float32Array(r),this.indexBuffer.data=new Uint16Array(o),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(Qm),DC=function(i){function e(t,n,r){t===void 0&&(t=200),r===void 0&&(r=0);var o=i.call(this,new Float32Array(4*n.length),new Float32Array(4*n.length),new Uint16Array(6*(n.length-1)))||this;return o.points=n,o._width=t,o.textureScale=r,o.build(),o}return Ic(e,i),Object.defineProperty(e.prototype,\"width\",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var n=this.getBuffer(\"aVertexPosition\"),r=this.getBuffer(\"aTextureCoord\"),o=this.getIndex();if(!(t.length<1)){n.data.length/4!==t.length&&(n.data=new Float32Array(4*t.length),r.data=new Float32Array(4*t.length),o.data=new Uint16Array(6*(t.length-1)));var s=r.data,a=o.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;for(var l=0,u=t[0],h=this._width*this.textureScale,d=t.length,p=0;p<d;p++){var m=4*p;if(this.textureScale>0){var g=u.x-t[p].x,_=u.y-t[p].y,y=Math.sqrt(g*g+_*_);u=t[p],l+=y/h}else l=p/(d-1);s[m]=l,s[m+1]=0,s[m+2]=l,s[m+3]=1}var w=0;for(p=0;p<d-1;p++)m=2*p,a[w++]=m,a[w++]=m+1,a[w++]=m+2,a[w++]=m+2,a[w++]=m+1,a[w++]=m+3;r.update(),o.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var n,r=t[0],o=0,s=0,a=this.buffers[0].data,l=t.length,u=0;u<l;u++){var h=t[u],d=4*u;s=-((n=u<t.length-1?t[u+1]:h).x-r.x),o=n.y-r.y;var p=Math.sqrt(o*o+s*s),m=this.textureScale>0?this.textureScale*this._width/2:this._width/2;o/=p,s/=p,o*=m,s*=m,a[d]=h.x+o,a[d+1]=h.y+s,a[d+2]=h.x-o,a[d+3]=h.y-s,r=h}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(Qm),FC=(function(i){function e(t,n,r){r===void 0&&(r=0);var o=this,s=new DC(t.height,n,r),a=new _p(t);return r>0&&(t.baseTexture.wrapMode=Ia.REPEAT),(o=i.call(this,s,a)||this).autoUpdate=!0,o}Ic(e,i),e.prototype._render=function(t){var n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),i.prototype._render.call(this,t)}}(Cc),function(i){function e(t,n,r){var o=this,s=new NC(t.width,t.height,n,r),a=new _p(rn.WHITE);return(o=i.call(this,s,a)||this).texture=t,o.autoResize=!0,o}return Ic(e,i),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry,n=this.shader.texture,r=n.width,o=n.height;!this.autoResize||t.width===r&&t.height===o||(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())},Object.defineProperty(e.prototype,\"texture\",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once(\"update\",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),i.prototype._render.call(this,t)},e.prototype.destroy=function(t){this.shader.texture.off(\"update\",this.textureUpdated,this),i.prototype.destroy.call(this,t)},e}(Cc)),Iw=(function(i){function e(t,n,r,o,s){t===void 0&&(t=rn.EMPTY);var a=this,l=new Qm(n,r,o);l.getBuffer(\"aVertexPosition\").static=!1;var u=new _p(t);return(a=i.call(this,l,u,null,s)||this).autoUpdate=!0,a}Ic(e,i),Object.defineProperty(e.prototype,\"vertices\",{get:function(){return this.geometry.getBuffer(\"aVertexPosition\").data},set:function(t){this.geometry.getBuffer(\"aVertexPosition\").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){this.autoUpdate&&this.geometry.getBuffer(\"aVertexPosition\").update(),i.prototype._render.call(this,t)}}(Cc),function(i){function e(t,n,r,o,s){n===void 0&&(n=10),r===void 0&&(r=10),o===void 0&&(o=10),s===void 0&&(s=10);var a=i.call(this,rn.WHITE,4,4)||this;return a._origWidth=t.orig.width,a._origHeight=t.orig.height,a._width=a._origWidth,a._height=a._origHeight,a._leftWidth=n,a._rightWidth=o,a._topHeight=r,a._bottomHeight=s,a.texture=t,a}Ic(e,i),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,\"vertices\",{get:function(){return this.geometry.getBuffer(\"aVertexPosition\").data},set:function(t){this.geometry.getBuffer(\"aVertexPosition\").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,n=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*n,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*n,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,n=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*n,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*n,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,n=this._width>t?1:this._width/t,r=this._topHeight+this._bottomHeight,o=this._height>r?1:this._height/r;return Math.min(n,o)},Object.defineProperty(e.prototype,\"width\",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"height\",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"leftWidth\",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"rightWidth\",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"topHeight\",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"bottomHeight\",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,n=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var r=1/this._origWidth,o=1/this._origHeight;n[0]=n[8]=n[16]=n[24]=0,n[1]=n[3]=n[5]=n[7]=0,n[6]=n[14]=n[22]=n[30]=1,n[25]=n[27]=n[29]=n[31]=1,n[2]=n[10]=n[18]=n[26]=r*this._leftWidth,n[4]=n[12]=n[20]=n[28]=1-r*this._rightWidth,n[9]=n[11]=n[13]=n[15]=o*this._topHeight,n[17]=n[19]=n[21]=n[23]=1-o*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}(FC),function(i,e){return(Iw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(i,e)}),o_=function(i){function e(t,n){n===void 0&&(n=!0);var r=i.call(this,t[0]instanceof rn?t[0]:t[0].texture)||this;return r._textures=null,r._durations=null,r._autoUpdate=n,r._isConnectedToTicker=!1,r.animationSpeed=1,r.loop=!0,r.updateAnchor=!1,r.onComplete=null,r.onFrameChange=null,r.onLoop=null,r._currentTime=0,r._playing=!1,r._previousFrame=null,r.textures=t,r}return function(t,n){function r(){this.constructor=t}Iw(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}(e,i),e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(ar.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(ar.shared.add(this.update,this,as.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var n=this.currentFrame;this._currentTime=t,n!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var n=this.currentFrame;this._currentTime=t,n!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){if(this._playing){var n=this.animationSpeed*t,r=this.currentFrame;if(this._durations!==null){var o=this._currentTime%1*this._durations[this.currentFrame];for(o+=n/60*1e3;o<0;)this._currentTime--,o+=this._durations[this.currentFrame];var s=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);o>=this._durations[this.currentFrame];)o-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=o/this._durations[this.currentFrame]}else this._currentTime+=n;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this.updateTexture())}},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(t){this.stop(),i.prototype.destroy.call(this,t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var n=[],r=0;r<t.length;++r)n.push(rn.from(t[r]));return new e(n)},e.fromImages=function(t){for(var n=[],r=0;r<t.length;++r)n.push(rn.from(t[r]));return new e(n)},Object.defineProperty(e.prototype,\"totalFrames\",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"textures\",{get:function(){return this._textures},set:function(t){if(t[0]instanceof rn)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var n=0;n<t.length;n++)this._textures.push(t[n].texture),this._durations.push(t[n].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"currentFrame\",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"playing\",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"autoUpdate\",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(ar.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(ar.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),e}(lr);/*!\n * pixi.js - v6.2.0\n * Compiled Mon, 01 Nov 2021 16:52:10 UTC\n *\n * pixi.js is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */hl.registerPlugin(\"accessibility\",a2),hl.registerPlugin(\"extract\",cR),hl.registerPlugin(\"interaction\",d2),hl.registerPlugin(\"particle\",XR),hl.registerPlugin(\"prepare\",gC),hl.registerPlugin(\"batch\",uR),hl.registerPlugin(\"tilingSprite\",_C),Ds.registerPlugin(EC),Ds.registerPlugin(yR),Ds.registerPlugin(IR),Ds.registerPlugin(WR),Ds.registerPlugin(vC),jm.registerPlugin(l2),jm.registerPlugin(gR);var us,ng={AlphaFilter:MC,BlurFilter:CC,BlurFilterPass:n_,ColorMatrixFilter:i_,DisplacementFilter:PC,FXAAFilter:IC,NoiseFilter:OC};class BC extends O.a{constructor(){super(),this.prevTime=-1,this.times=0,this.valueTotal=0,this.destroyed=!1,this.value=0,this.calcFps()}calcFps(){requestAnimationFrame(e=>{const t=e-this.prevTime;this.valueTotal+=t,this.times+=1,this.times>20&&(this.value=Math.floor(1e3*this.times/this.valueTotal),this.valueTotal=0,this.times=0,this.destroyed||this.emit(\"update\",this.value)),this.prevTime=e,this.destroyed||this.calcFps()})}destroy(){this.destroyed=!0}}(function(i){i.ResourceError=\"RESOURCE_ERROR\",i.RuntimeError=\"RUNTIME_ERROR\",i.RuntimeWarn=\"RUNTIME_WARN\",i.CanvasCrash=\"CANVAS_CRASH\"})(us||(us={}));class br extends Error{constructor(e,t){var n,r;super(t),n=this,r=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(n,r):n.__proto__&&(n.__proto__=r),this.errorType=e,this.errorMsg=t}static transform(e){return e instanceof br?e:new br(us.RuntimeError,e.message)}}function ig(){return function(i,e,t){const n=t.value;t.value=function(...r){try{return n.apply(this,r)}catch(o){throw new br(us.RuntimeWarn,o.message)}}}}const Oc=new class{constructor(){this.info=[],this.warn=[],this.error=[]}attach(i,e){this[i]&&this[i].push(e)}createLogger(i){return(e,t)=>{this[i].forEach(n=>{n(`[taskId:${t}] ${e}`)})}}},Jn={warn:Oc.createLogger(\"warn\"),error:Oc.createLogger(\"error\"),info:Oc.createLogger(\"info\")};var s_=function(i,e,t,n){return new(t||(t=Promise))(function(r,o){function s(u){try{l(n.next(u))}catch(h){o(h)}}function a(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof t?h:new t(function(d){d(h)})).then(s,a)}l((n=n.apply(i,e||[])).next())})};function Ow(i){return s_(this,void 0,void 0,function*(){const e=yield fetch(i);if(!e.ok)throw new br(us.ResourceError,`\"${e.url}\" loaded failed with status \"${e.status}\"`);return e})}class kC{constructor(e,t){this.useCache=!1,this.taskId=\"\",this.useCache=t,this.localStorage=e}attachTaskId(e){this.taskId=e}fetchJson(e){return s_(this,void 0,void 0,function*(){let t;return this.useCache&&(Jn.info(\"load resource from cache. \"+e,this.taskId||\"\"),t=yield this.localStorage.getItem(e)),t?(Jn.info(\"cache hit. \"+e,this.taskId||\"\"),t):(Jn.info(\"load resource from server. \"+e,this.taskId||\"\"),t=yield(yield Ow(\"\"+e)).json(),Jn.info(\"load end. \"+e,this.taskId||\"\"),this.useCache&&this.localStorage.setItem(e,t).catch(()=>{}),t)})}fetchPng(e){return s_(this,void 0,void 0,function*(){let t;if(this.useCache&&(Jn.info(\"load resource from cache. \"+e,this.taskId||\"\"),t=yield this.localStorage.getItem(e)),t)return Jn.info(\"cache hit. \"+e,this.taskId||\"\"),t;{Jn.info(\"load resource from server. \"+e,this.taskId||\"\");const n=yield Ow(e),r=yield n.blob();return t=yield function(o){return new Promise((s,a)=>{const l=new FileReader;l.onload=()=>{s(l.result)},l.onerror=()=>{a(new br(us.ResourceError,\"Failed parse blob data.\"))},l.readAsDataURL(o)})}(r),Jn.info(\"load end. \"+e,this.taskId||\"\"),this.useCache&&this.localStorage.setItem(e,t).catch(()=>{}),t}})}destroy(){}}var UC=v(7),Lw=v.n(UC);function so(i,e,t=5){return Math.abs(i-e)<=Math.pow(10,-t)}function Lc(i){return Math.floor(1e6*i)/1e6}class pl{constructor(){this.point={x:0,y:0},this.slope=Math.PI/4}static fromPointSlope(e,t){const n=new pl;return n.point=e,n.slope=t,n}resolveY(e){return Math.tan(this.slope)*(e-this.point.x)+this.point.y}distanceToLinearEquation(e){return so(this.slope,e.slope)?this.distanceToPoint(e.point):-1}distanceToPoint(e){let t=0;if(Math.tan(this.slope)*(e.x-this.point.x)+this.point.y===e.y)return 0;t=this.slope>=Math.PI/2?this.slope-Math.PI/2:Math.PI/2+this.slope;const n=pl.fromPointSlope(e,t),r=this.crossPoint(n);return r?Math.ceil(Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))):0}crossPoint(e){if(so(e.slope,this.slope))return null;let t=0,n=0;const r=Math.tan(e.slope),o=Math.tan(this.slope),{x:s,y:a}=this.point,{x:l,y:u}=e.point;return so(this.slope,Math.PI/2)?(t=this.point.x,n=r*(t-l)+u):so(e.slope,Math.PI/2)?(t=e.point.x,n=o*(t-s)+a):so(this.slope,Math.PI)||so(this.slope,0)?(n=this.point.y,t=(n-u)/r+l):so(e.slope,Math.PI)||so(e.slope,0)?(n=e.point.y,t=(n-a)/o+s):(t=(r*l-u+a-o*s)/(r-o),n=o*(t-s)+a),{x:t,y:n}}}var GC=function(i,e,t,n){return new(t||(t=Promise))(function(r,o){function s(u){try{l(n.next(u))}catch(h){o(h)}}function a(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof t?h:new t(function(d){d(h)})).then(s,a)}l((n=n.apply(i,e||[])).next())})};function xp(){return Date.now().toString(32)+Math.random().toString(32).substring(2)}const Nc=\"__delay_resolve_result__\";function a_(i,e){return GC(this,void 0,void 0,function*(){const t=yield Promise.race([i(),(n=e,new Promise(r=>{setTimeout(()=>{r(Nc)},n)}))]);var n;return t===Nc?Nc:t})}var HC=function(i,e,t,n){return new(t||(t=Promise))(function(r,o){function s(u){try{l(n.next(u))}catch(h){o(h)}}function a(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof t?h:new t(function(d){d(h)})).then(s,a)}l((n=n.apply(i,e||[])).next())})};class zC{constructor(e){this.isPaused=!1,this.timestamp=0,this.callbackList=[],this.onTimeUpdate=t=>{const n=t/(Jt.TARGET_FPMS||.06);if(!this.isPaused){this.timestamp+=n,this.callbackList=this.callbackList.filter(o=>o&&!o.applied);let{length:r}=this.callbackList;for(let o=0;o<r;o++){const s=this.callbackList[o];if(s&&!s.applied){if(!(s.triggerTime<=this.timestamp))break;s.running=!0,s.fn(),s.applied=!0,r=this.callbackList.length}}}},this.ticker=e,this.ticker.add(this.onTimeUpdate)}setTimeout(e,t){const n=xp(),r=this.timestamp+Math.max(t||16,16);return this.callbackList.push({fn:e,triggerTime:r,id:n,applied:!1,running:!1}),this.callbackList.sort((o,s)=>o.triggerTime-s.triggerTime),n}clearTimeout(e){const t=this.callbackList.findIndex(n=>n.id===e);t>=0&&!this.callbackList[t].running&&this.callbackList.splice(t,1)}delay(e){return new Promise(t=>{this.setTimeout(t,e)})}waitUntil(e,t){return HC(this,void 0,void 0,function*(){const n=this.timestamp;for(;!e()&&this.timestamp-n<t;)yield this.delay(50)})}pause(){this.isPaused=!0}resume(){this.isPaused=!1}}var jC=function(i,e,t,n){return new(t||(t=Promise))(function(r,o){function s(u){try{l(n.next(u))}catch(h){o(h)}}function a(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof t?h:new t(function(d){d(h)})).then(s,a)}l((n=n.apply(i,e||[])).next())})};class VC{constructor(e){this.gifs=Object.create(null),this.textures=Object.create(null),this.frames=Object.create(null),this.spriteSheets=[],this.loader=e}getTexture(e){return this.textures[e]||null}getFrameData(e){return this.frames[e]}getGifFrames(e){return this.gifs[e]?this.gifs[e].filter(t=>!!t):[]}loadSpriteSheetItem(e,t,n){return jC(this,void 0,void 0,function*(){const r=yield this.loader.fetchJson(`${e}/${t}/jsonOutput/${n}.json`),o=yield this.loader.fetchPng(`${e}/${t}/jsonOutput/${n}.png`),s=document.createElement(\"img\");s.src=o,yield new Promise((u,h)=>{s.onload=()=>u(\"\"),s.onerror=()=>h()});const a=new Cn(s),l=new P1(a,r);yield new Promise(u=>{l.parse(()=>u(\"\"))}),this.spriteSheets.push(l),Object.keys(l.textures).forEach(u=>{const h=u.match(/^(.+)_gif_(\\d+)$/);if(h&&h[1]&&h[2]){const d=h[1];this.gifs[d]||(this.gifs[d]=[]);const p=parseInt(h[2],10);this.gifs[d][p]=l.textures[u]}else this.frames[u]=r.frames[u],this.textures[u]=l.textures[u]})})}destroy(){this.spriteSheets.forEach(e=>e.destroy(!0)),this.spriteSheets=[],this.gifs=Object.create(null),this.textures=Object.create(null),this.frames=Object.create(null)}}var WC=v(3),rg=v.n(WC);function Nw(i,e,t){let n,r;const o=Math.round(i)%360;if(o%180==0)n=Math.cos(o*(Math.PI/180))*e,r=0;else if(o%90==0)n=0,r=Math.sin(o*(Math.PI/180))*t;else{const s=function(a){const l=a*Math.PI/180;return Math.tan(l)}(o);n=e*t/Math.sqrt(Math.pow(t,2)+Math.pow(e*s,2)),(o>90&&o<270||o<-90&&o>-270)&&(n=-n),r=s*n}return{x:n,y:r}}function XC(i,e,t,n,r,o){const s=i,a=e;let l,u,h,d,p;if(Math.round(n)===0)l=r,u=o,p=0;else if(Math.round(n)>=360)l=r,u=o,h=r+2*i*Math.abs(Math.cos(-t/180*Math.PI)),d=o+2*e*Math.sin(-t/180*Math.PI),p=1;else{const m=-t,g=-(t+n),{x:_,y}=Nw(m,s,a),w=r-_,R=o+y,{x:F,y:U}=Nw(g,s,a);l=F+w,u=R-U,p=n>=-360&&n<-180?1:n>=-180&&n<0||n>0&&n<180?0:1}return{radiusX:s,radiusY:a,xAxisRotation:0,largeArcFlag:p,sweepFlag:n>0?1:0,endX:l,endY:u,middleX:h,middleY:d}}class Dw{constructor(){this.pool=[]}getObject(e){const t=this.pool.find(n=>!n.isUsed);if(t)return t.isUsed=!0,t.obj;{const n={obj:this.createObject(),isUsed:!0,group:e};return this.pool.push(n),n.obj}}collectObject(e){const t=this.pool.find(n=>n.obj===e);t&&(t.isUsed=!1,this.resetObject(t.obj))}collectObjectByGroup(e){this.pool.filter(t=>t.group===e).forEach(t=>this.collectObject(t.obj))}}const l_=new class extends Dw{createObject(){const i=document.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\");return i.setAttribute(\"xmlns\",\"http://www.w3.org/2000/svg\"),i.setAttribute(\"version\",\"1.1\"),i}resetObject(i){i.removeAttribute(\"viewBox\"),i.removeAttribute(\"width\"),i.removeAttribute(\"height\"),i.innerHTML=\"\"}},u_=new class extends Dw{createObject(){return document.createElement(\"img\")}resetObject(i){i.removeAttribute(\"src\")}};var qC=function(i,e,t,n){return new(t||(t=Promise))(function(r,o){function s(u){try{l(n.next(u))}catch(h){o(h)}}function a(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof t?h:new t(function(d){d(h)})).then(s,a)}l((n=n.apply(i,e||[])).next())})};class YC{constructor(){this.imgElements=[],this.svgElements=[],this.idToHashMap=Object.create(null),this.textures=Object.create(null),this.graphics=[],this.hashToIdMap=Object.create(null)}render(e,t,n){return qC(this,void 0,void 0,function*(){const{items:r,width:o,height:s}=e,a=u_.getObject(n),l=new Cn(a,{width:o,height:s,resolution:1}),u=l_.getObject(n);this.imgElements.push(a),this.svgElements.push(u),u.setAttribute(\"viewBox\",`0 0 ${o} ${s}`),u.setAttribute(\"width\",\"\"+o),u.setAttribute(\"height\",\"\"+s);const h={},d={};r.forEach(g=>{const{item:_,x:y,y:w}=g,R=y+2,F=w+2;_.pathsData.forEach(V=>{let G=\"\";V.cmds.forEach(([W,ge])=>{G+=W+\" \",G+=ge.map(he=>(Object(H.isNumber)(he)||(he.x=he.x+V.offset.x+R,he.y=he.y+V.offset.y+F),he)).reduce((he,se)=>(Object(H.isNumber)(se)?he+=se+\" \":he+=`${se.x} ${se.y} `,he),\"\"),G+=\" \"}),V.pathElement.setAttribute(\"d\",G),u.appendChild(V.pathElement)});const U=_.width-4-2*_.padding,B=_.height-4-2*_.padding;this.textures[_.hash]={texture:new rn(l,new Tn(R+2,F+2,U,B)),pivot:_.pivot},h[_.hash]={x:R+2,y:F+2,w:U,h:B,pivot:_.pivot},d[_.hash]=this.hashToIdMap[_.hash]});const p=(m='<?xml version=\"1.0\" encoding=\"utf-8\"?>'+u.outerHTML,\"data:image/svg+xml,\"+encodeURIComponent(m).replace(/'/g,\"%27\").replace(/\"/g,\"%22\"));var m;a.src=p,yield new Promise((g,_)=>{a.onload=()=>g(\"\"),a.onerror=()=>_()})})}getGraphicsData(e){const t=this.idToHashMap[e]||\"\";return this.textures[t]||null}addGraphics(e,t,n,r,o,s,a,l,u,h,d){var p,m;if(!a&&!u)return e;const g=rg()(n+((m=(p=a==null?void 0:a.width)===null||p===void 0?void 0:p.toString())!==null&&m!==void 0?m:0)+u+h+d);if(this.hashToIdMap[g]||(this.hashToIdMap[g]=[]),this.hashToIdMap[g].push(e),this.idToHashMap[e]=g,this.graphics.findIndex(_=>_.hash===g)<0){const{graphicsWidth:_,graphicsHeight:y,pathsData:w,pivot:R,padding:F}=function(U,B,V,G,W,ge,he,se,de){var ue;const xe=[],We={x:Math.abs(W.x),y:Math.abs(W.y)};let Ge=0,Ae=0,Re=0,Ze=0,lt=0,dt=\"none\";const ce=(ue=G==null?void 0:G.width)!==null&&ue!==void 0?ue:0;return he?(Ge=B,Ae=V,lt=0):(dt=de||\"#ff0000\",lt=ce,Re=.5*ce,Ze=.5*ce,Ge=B+ce,Ae=V+ce,We.x+=.5*ce,We.y+=.5*ce),Ge+=Math.abs(W.x),Ae+=Math.abs(W.y),Re+=Math.abs(W.x),Ze+=Math.abs(W.y),Ge+=4,Ae+=4,Re+=2,Ze+=2,Ge=Math.ceil(Ge),Ae=Math.ceil(Ae),U.forEach(fe=>{const Qe=document.createElementNS(\"http://www.w3.org/2000/svg\",\"path\");fe.fill!==\"none\"&&he?Qe.setAttribute(\"fill\",se||\"#ff0000\"):Qe.setAttribute(\"fill\",\"none\"),fe.hasStroke&&!he&&(Qe.setAttribute(\"stroke-linecap\",(G==null?void 0:G.cap)||\"butt\"),Qe.setAttribute(\"stroke-linejoin\",(G==null?void 0:G.join)||\"miter\"),Qe.setAttribute(\"stroke-width\",lt.toString()),Qe.setAttribute(\"stroke\",dt),G!=null&&G.dash&&Qe.setAttribute(\"stroke-dasharray\",G.dash));const{scale:Xe}=fe,je=fe.path.trim().split(\" \");let ft={x:0,y:0};const mt={offset:{x:Re,y:Ze},cmds:[],pathElement:Qe};for(let Ke=0;Ke<je.length;Ke+=2){const oe=je[Ke],Ee=je[Ke+1];if(oe===\"M\"){let[He,ze]=Ee.split(\",\").map(Pe=>Number(Pe));ft={x:He,y:ze},He=He/9525*Xe.x,ze=ze/9525*Xe.y,mt.cmds.push([\"M\",[{x:He,y:ze}]])}else if(oe===\"A\"){const[He,ze,Pe,tt]=Ee.split(\",\").map(pn=>Number(pn)),It=Pe/Math.PI*180,Nt=tt/Math.PI*180,Ot=XC(He,ze,It,Nt,ft.x,ft.y);Math.round(Nt)>=360?(ft={x:Ot.endX,y:Ot.endY},mt.cmds.push([\"A\",[Ot.radiusX/9525*Xe.x,Ot.radiusY/9525*Xe.y,Ot.xAxisRotation,Ot.largeArcFlag,Ot.sweepFlag,{x:Ot.middleX/9525*Xe.x,y:Ot.middleY/9525*Xe.y}]]),mt.cmds.push([\"A\",[Ot.radiusX/9525*Xe.x,Ot.radiusY/9525*Xe.y,Ot.xAxisRotation,Ot.largeArcFlag,Ot.sweepFlag,{x:Ot.endX/9525*Xe.x,y:Ot.endY/9525*Xe.y}]])):(ft={x:Ot.endX,y:Ot.endY},mt.cmds.push([\"A\",[Ot.radiusX/9525*Xe.x,Ot.radiusY/9525*Xe.y,Ot.xAxisRotation,Ot.largeArcFlag,Ot.sweepFlag,{x:Ot.endX/9525*Xe.x,y:Ot.endY/9525*Xe.y}]]))}else if(oe===\"L\"){let[He,ze]=Ee.split(\",\").map(Pe=>Number(Pe));ft={x:He,y:ze},He=He/9525*Xe.x,ze=ze/9525*Xe.y,mt.cmds.push([\"L\",[{x:He,y:ze}]])}else if(oe===\"QB\"){let[He,ze,Pe,tt]=Ee.split(\",\").map(It=>Number(It));ft={x:Pe,y:tt},He=He/9525*Xe.x,ze=ze/9525*Xe.y,Pe=Pe/9525*Xe.x,tt=tt/9525*Xe.y,mt.cmds.push([\"Q\",[{x:He,y:ze},{x:Pe,y:tt}]])}else if(oe===\"CB\"){let[He,ze,Pe,tt,It,Nt]=Ee.split(\",\").map(Ot=>Number(Ot));ft={x:It,y:Nt},He=He/9525*Xe.x,ze=ze/9525*Xe.y,Pe=Pe/9525*Xe.x,tt=tt/9525*Xe.y,It=It/9525*Xe.x,Nt=Nt/9525*Xe.y,mt.cmds.push([\"C\",[{x:He,y:ze},{x:Pe,y:tt},{x:It,y:Nt}]])}else oe===\"C\"&&mt.cmds.push([\"Z\",[]])}xe.push(mt)}),{graphicsWidth:Ge,graphicsHeight:Ae,pivot:We,padding:2,pathsData:xe}}(t,o,s,a,r,0,u,h,d);this.graphics.push({hash:g,pathsData:w,pivot:R,width:_,height:y,padding:F})}return e}pack(){return this.graphics.forEach(e=>{e.width+=4,e.height+=4}),function e(t){const n=[],r=t.filter(h=>{const d=h.width<2048&&h.height<2048;return d||n.push(h),d}).sort((h,d)=>h.width*h.height-d.width*d.height);let o=r.length+1,s=2050,a=2050;const l=[];let u=null;for(;(s>2048||a>2048)&&r.length>0;)o-=1,u=Lw()(r.slice(0,o)),s=u.width,a=u.height;return u&&l.push(u),n.forEach(h=>{const d=Lw()([h]);l.push(d)}),o<r.length?l.concat(e(r.slice(o))):l}(this.graphics)}destroy(){Object.keys(this.textures).forEach(e=>{var t;(t=this.textures[e])===null||t===void 0||t.texture.destroy(!0)}),this.textures=Object.create(null),this.imgElements.forEach(e=>u_.collectObject(e)),this.svgElements.forEach(e=>l_.collectObject(e)),this.graphics=[]}}class $C{constructor(){this.runningTimeNodes={}}addRunningTimeNode(e,t,n){const r=`${t}_${e}`;if(this.runningTimeNodes[r])try{this.runningTimeNodes[r].dispose(!0)}catch{}this.runningTimeNodes[r]=n}}class JC{constructor(e){this.eventHub=e,this.targets=Object.create(null)}getTargets(){return Object.keys(this.targets).map(e=>this.targets[e])}addTarget(e,t){this.targets[e]=t}getTargetById(e){return this.targets[e]}getTarget(e,t,n={type:\"el\",index:0,id:\"\"}){var r,o;let s=this.targets[e.id];return e.type!==\"shape\"?s:(e.type===\"shape\"&&e.txEl&&(s=(r=s==null?void 0:s.getTextElement(e.txEl.type,e.txEl.range))!==null&&r!==void 0?r:null),e.type===\"shape\"&&e.bg&&n.index===0&&(t=!1,s=(o=s==null?void 0:s.getBgElement())!==null&&o!==void 0?o:null,this.eventHub.emit(\"IterateTimeNodeEnd\",n.id)),t&&s?s.getIterateEntry(n.type,n.index,n.id):(s||this.eventHub.emit(\"IterateTimeNodeEnd\",n.id),s))}clearTargets(){this.targets=Object.create(null)}}class ZC{constructor(e){this.target=e}get color(){return this.target.strokeColorFilter.currentColor}set color(e){this.target.strokeColorFilter.color=e}get on(){return this.target.strokeActive?\"true\":\"false\"}set on(e){this.target.strokeActive=e===\"true\"}}class KC{constructor(e){this.target=e}applyCommand(e,t){this.target.applyCommand(e,t)}}class Fw{constructor(e){this.target=e}get color(){return this.target.fillColorFilter.currentColor}set color(e){this.target.fillActive&&(this.target.fillColorFilter.color=e)}get on(){return this.target.fillActive?\"true\":\"false\"}set on(e){this.target.fillActive=e===\"true\"}get designColor(){return this.target.fillColorFilter.designColor}}class QC{constructor(e,t){this.hardHidden=!1,this.target=e,t===!0&&(this.hardHidden=!0)}get opacity(){return this.target.alpha}set opacity(e){this.target.alpha=e}get rotation(){return this.target.rotation/Math.PI*180}set rotation(e){this.target.rotation=e/180*Math.PI}get visibility(){return this.target.visible?\"visible\":\"hidden\"}set visibility(e){this.visibility===e||this.hardHidden||(this.target.visible=e===\"visible\")}}class eP{constructor(e,t){this.actions=[],this.ctx=t,this.object=e,this.object.interactive=!0}reset(e){this.object.interactive=!1,this.object.removeAllListeners(),this.object=e,this.object.interactive=!0}addAction(e,t){this.actions.push([e,t]),t===\"click\"?(this.object.addListener(\"click\",()=>this.handleAction(e)),this.object.cursor=\"pointer\"):t===\"hover\"&&this.object.addListener(\"mouseover\",()=>this.handleAction(e))}addProxy(e){this.proxy=e,this.hitArea=this.getOriginHitArea(),this.proxy.interactive=!0,this.actions.forEach(([t,n])=>{var r,o;n===\"click\"?(r=this.proxy)===null||r===void 0||r.addListener(\"click\",s=>this.handleProxyAction(s,t)):n===\"hover\"&&((o=this.proxy)===null||o===void 0||o.addListener(\"mouseover\",s=>this.handleProxyAction(s,t)))})}handleProxyAction(e,t){var n;const r=e.data.global,o=this.object.getGlobalPosition(),s=r.x-o.x+this.object.pivot.x,a=r.y-o.y+this.object.pivot.y;((n=this.hitArea)===null||n===void 0?void 0:n.contains(s,a))&&this.object.visible&&this.handleAction(t,!0)}getOriginHitArea(){return this.object.hitArea?this.object.hitArea:new E0(0,0,this.object.width,this.object.height)}handleAction(e,t=!1){this.proxy&&!t||(this.ctx.eventHub.emit(kt.hyperlinkTrigger,e),this.execAction(e))}execAction(e){var t;if(this.ctx.eventHub.emit(kt.userInput),e.action===\"ppaction://hlinksldjump\"){const n=((t=e==null?void 0:e.target)!==null&&t!==void 0?t:\"\").match(/slide(\\d+)\\.xml/);n&&n[1]&&this.ctx.eventHub.emit(kt.requestGotoSlide,Number(n[1]))}else if(e.action===\"ppaction://hlinkshowjump?jump=nextslide\")this.ctx.eventHub.emit(kt.requestNextSlide);else if(e.action===\"ppaction://hlinkshowjump?jump=previousslide\")this.ctx.eventHub.emit(kt.requestPrevSlide);else if(e.action===\"ppaction://hlinkshowjump?jump=firstslide\")this.ctx.eventHub.emit(kt.requestGotoSlide,1);else if(e.action===\"ppaction://hlinkshowjump?jump=lastslide\")this.ctx.eventHub.emit(kt.requestGotoSlide,-1);else if(e.action===\"ppaction://hlinkshowjump?jump=lastslideviewed\"){const n=this.ctx.lastViewedIndex;this.ctx.eventHub.emit(kt.requestGotoSlide,n)}else e.action===\"ppaction://hlinkshowjump?jump=endshow\"&&this.ctx.eventHub.emit(kt.requestGotoSlide,-1)}}class h_{constructor(e,t,n){var r,o,s,a,l,u;this.scaleExt={x:1,y:1},this.scaleOrigin={x:1,y:1},this.designScale={x:1,y:1},this.bound=new Tn(0,0,1,1),this.pptX=0,this.pptY=0,this.presetSubType=0,this.designWidth=0,this.designHeight=0,this.designX=0,this.designY=0,this.hasPreset=!1,this.container=new Ki,this.ctx=t,this.style=new QC(this.container,e.hardHidden),this.designGlobalPosition={x:n.x+((o=(r=e.position)===null||r===void 0?void 0:r.x)!==null&&o!==void 0?o:0),y:n.y+((a=(s=e.position)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0)},(e.hlinkClick||e.hlinkHover)&&(this.hyperlink=new eP(this.container,this.ctx),e.hlinkHover&&((l=this.hyperlink)===null||l===void 0||l.addAction(e.hlinkHover,\"hover\")),e.hlinkClick&&((u=this.hyperlink)===null||u===void 0||u.addAction(e.hlinkClick,\"click\"))),this.ctx.clock.waitUntil(()=>{try{return!!this.container.width}catch{return!1}},3e3).then(()=>{try{this.designWidth=this.designWidth||this.container.width}catch{}}),this.ctx.clock.waitUntil(()=>{try{return!!this.container.height}catch{return!1}},3e3).then(()=>{try{this.designHeight=this.designHeight||this.container.height}catch{}})}updateScale(){this.container&&(this.container.scale.x=this.designScale.x*this.scaleExt.x*this.scaleOrigin.x,this.container.scale.y=this.designScale.y*this.scaleExt.y*this.scaleOrigin.y)}updateTransform(e){var t,n,r,o,s,a,l,u;this.designWidth=e.width,this.designHeight=e.height,this.designX=(n=(t=e.position)===null||t===void 0?void 0:t.x)!==null&&n!==void 0?n:0,this.designY=(o=(r=e.position)===null||r===void 0?void 0:r.y)!==null&&o!==void 0?o:0;const h=this.designWidth/2,d=this.designHeight/2;this.container.width=this.designWidth,this.container.height=this.designHeight,this.container.pivot.x=h,this.container.pivot.y=d;const p=(a=(s=e.position)===null||s===void 0?void 0:s.x)!==null&&a!==void 0?a:0,m=(u=(l=e.position)===null||l===void 0?void 0:l.y)!==null&&u!==void 0?u:0;this.container.x=p+h,this.container.y=m+d,e.scale&&(this.designScale={x:e.scale.x,y:e.scale.y},this.container.scale.x=e.scale.x,this.container.scale.y=e.scale.y),e.rotation&&(this.container.rotation=e.rotation);const g=new Na;g.drawRect(0,0,this.designWidth,this.designHeight),this.container.addChild(g),this.json.hardHidden&&(this.container.visible=!1),this.bound.x=p,this.bound.y=m,this.bound.width=this.designWidth,this.bound.height=this.designHeight}get scale(){return this.scaleOrigin}set scale(e){this.scaleOrigin.x=e.x,this.scaleOrigin.y=e.y,this.updateScale()}get design_ppt_w(){return Lc(this.designWidth/this.ctx.stageWidth)}get design_ppt_h(){return Lc((this.designHeight||this.container.height)/this.ctx.stageHeight)}get design_ppt_x(){return Lc(this.designX/this.ctx.stageWidth)}get design_ppt_y(){return Lc(this.designY/this.ctx.stageHeight)}get ppt_w(){return this.scaleExt.x*this.scaleOrigin.x*this.designWidth/this.ctx.stageWidth}set ppt_w(e){this.designWidth&&(this.scaleExt.x=e*this.ctx.stageWidth/this.designWidth,this.updateScale())}get ppt_h(){const e=this.designHeight||this.container.height;return this.scaleExt.y*this.scaleOrigin.y*e/this.ctx.stageHeight}set ppt_h(e){this.designHeight&&(this.scaleExt.y=e*this.ctx.stageHeight/this.designHeight,this.updateScale())}get ppt_x(){return(this.container.position.x-this.container.pivot.x)/this.ctx.stageWidth}set ppt_x(e){this.pptX=e;const t=this.presetSubType===544?this.scaleExt.x:1;this.container.position.x=e*this.ctx.stageWidth+this.container.pivot.x*t}get ppt_y(){return(this.container.position.y-this.container.pivot.y)/this.ctx.stageHeight}set ppt_y(e){this.pptY=e;const t=this.presetSubType===544?this.scaleExt.y:1;this.container.position.y=e*this.ctx.stageHeight+this.container.pivot.y*t}get r(){return this.container.rotation}set r(e){this.container.rotation=e}set xshear(e){this.container.skew.x=e}get xshear(){return this.container.skew.x}set yshear(e){this.container.skew.y=e}get yshear(){return this.container.skew.y}}class og{constructor(e){if(this._isInit=!1,this.h=0,this.s=0,this.l=0,this.a=1,e){this._isInit=!0;const t=e.match(/-?[0-9]+/g);t&&(this.h=parseInt(t[0],10),this.s=parseInt(t[1],10)/100,this.l=parseInt(t[2],10)/100)}}isInit(){return this._isInit}by(e,t){t.h=Math.max(Math.min(this.h+e.h,359),0),t.s=Math.max(Math.min(this.s+e.s,1),0),t.l=Math.max(Math.min(this.l+e.l,1),0),t.a=Math.max(Math.min(this.a+e.a,1),0)}fromHexString(e){const[t,n,r,o]=Bs(e);let s=0,a=0,l=0;const u=Math.max(t,n,r),h=Math.min(t,n,r),d=u-h;l=(u+h)/2,d===0?s=0:u===t?s=(n-r)/d%6*60:u===n?s=60*((r-t)/d+2):u===r&&(s=60*((t-n)/d+4)),a=d===0?0:d/(1-Math.abs(2*l-1)),this.h=s,this.s=a,this.l=l,this.a=o}interpolationFrom(e,t,n){const r=e.h+(this.h-e.h)*t,o=e.s+(this.s-e.s)*t,s=e.l+(this.l-e.l)*t,a=e.a+(this.a-e.a)*t;n.h=Math.max(Math.min(r,359),0),n.s=Math.max(Math.min(o,1),0),n.l=Math.max(Math.min(s,1),0),n.a=Math.max(Math.min(a,1),0)}toHexString(){let e=[0,0,0,0];const{h:t,s:n,l:r}=this;if(t<360&&t>=0&&n<=1&&n>=0&&r<=1&&r>=0){let o,s,a;const l=(1-Math.abs(2*r-1))*n,u=l*(1-Math.abs(t/60%2-1)),h=r-l/2;[o,s,a]=t>=0&&t<60?[l,u,0]:t>=60&&t<120?[u,l,0]:t>=120&&t<180?[0,l,u]:t>=180&&t<240?[0,u,l]:t>=240&&t<300?[u,0,l]:[l,0,u],e=[o+h,s+h,a+h,this.a]}return kw(e)}}class sg{constructor(e){this._isInit=!1,this.r=0,this.g=0,this.b=0,this.a=0,e&&(this._isInit=!0,this.fromHexString(e))}fromHexString(e){const[t,n,r,o]=Bs(e);this.r=t,this.g=n,this.b=r,this.a=o}isInit(){return this._isInit}interpolationFrom(e,t,n){n.r=e.r+(this.r-e.r)*t,n.g=e.g+(this.g-e.g)*t,n.b=e.b+(this.b-e.b)*t,n.a=e.a+(this.a-e.a)*t}by(e,t){t.r=Math.min(Math.max(this.r+e.r,0),255),t.g=Math.min(Math.max(this.g+e.g,0),255),t.b=Math.min(Math.max(this.b+e.b,0),255),t.a=Math.min(Math.max(this.a+e.a,0),1)}toHexString(){return kw([this.r,this.g,this.b,this.a])}}function Bw(i){const e=i.substring(1);return[parseInt(e.substring(0,6),16),parseInt(e.substring(6,8),16)/255]}function Bs(i){return(i=i.replace(/^#/,\"\")).substring(6,8).length===0&&(i+=\"FF\"),[parseInt(i.substring(0,2).padStart(8,\"0\"),16)/255,parseInt(i.substring(2,4).padStart(8,\"0\"),16)/255,parseInt(i.substring(4,6).padStart(8,\"0\"),16)/255,parseInt(i.substring(6,8).padStart(8,\"0\"),16)/255]}function kw(i){return\"#\"+Math.round(255*i[0]).toString(16).padStart(2,\"0\")+Math.round(255*i[1]).toString(16).padStart(2,\"0\")+Math.round(255*i[2]).toString(16).padStart(2,\"0\")+Math.round(255*i[3]).toString(16).padStart(2,\"0\")}function bp(i,e,t){const n=Bs(i),r=Bs(e),o=Math.round(255*(n[0]+(r[0]-n[0])*t)),s=Math.round(255*(n[1]+(r[1]-n[1])*t)),a=Math.round(255*(n[2]+(r[2]-n[2])*t)),l=Math.round(255*(n[3]+(r[3]-n[3])*t));return\"#\"+o.toString(16).padStart(2,\"0\")+s.toString(16).padStart(2,\"0\")+a.toString(16).padStart(2,\"0\")+l.toString(16).padStart(2,\"0\")}class wp extends Nr{constructor(){super(void 0,`\nvarying vec2 vTextureCoord;\n\nuniform vec4 color;\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 texColor = texture2D(uSampler, vTextureCoord);\n\n    if (texColor.a > 0.0) {\n        vec4 resultColor = color;\n        resultColor = resultColor * texColor.a;\n        gl_FragColor = resultColor;\n    } else {\n        gl_FragColor = texColor;\n    }\n}\n`,{color:new Float32Array([0,0,0,0]),active:0}),this.currentColor=\"#FFFFFFFF\",this.designColor=\"#FFFFFFFF\"}set color(e){this.currentColor=e;const t=Bs(e);this.uniforms.color=Float32Array.from(t)}get color(){return this.currentColor}}const Uw=new ng.ColorMatrixFilter;Uw.matrix=[1,0,0,0,-.2,0,1,0,0,-.2,0,0,1,0,-.2,0,0,0,1,0];const Gw=new ng.ColorMatrixFilter;Gw.matrix=[1,0,0,0,-.1,0,1,0,0,-.1,0,0,1,0,-.1,0,0,0,1,0];const Hw=new ng.ColorMatrixFilter;Hw.matrix=[1,0,0,0,.2,0,1,0,0,.2,0,0,1,0,.2,0,0,0,1,0];const zw=new ng.ColorMatrixFilter;zw.matrix=[1,0,0,0,.1,0,1,0,0,.1,0,0,1,0,.1,0,0,0,1,0];const tP={darken:Uw,darkenLess:Gw,lightenLess:zw,lighten:Hw};class c_ extends h_{constructor(e,t,n){super({position:{x:e.x,y:e.y},width:e.width,height:e.height},t,n),this.fillColorFilter=new wp,this.fill=new Fw(this),this.json=e,this.ctx=t,this.parentGlobalPos=n,this.global={x:n.x+e.x,y:n.y+e.y},this.updateTransform({position:{x:e.x,y:e.y},width:e.width,height:e.height})}get fillActive(){var e,t;return((t=(e=this.container.filters)===null||e===void 0?void 0:e.length)!==null&&t!==void 0?t:-1)>0}set fillActive(e){var t,n;e?((n=(t=this.container.filters)===null||t===void 0?void 0:t.indexOf(this.fillColorFilter))!==null&&n!==void 0?n:-1)<0&&(this.container.filters=[this.fillColorFilter]):this.container.filters=[]}get renderContainer(){return this.container}get interactiveContainer(){return this.container}clearOnSlideChange(){}initOnReuse(){}getTextElement(){return null}getBgElement(){return null}get ppt_x(){return this.global.x/this.ctx.stageWidth}set ppt_x(e){const t=e*this.ctx.stageWidth-this.global.x,n=this.presetSubType===544?this.scaleExt.x:1;this.container.position.x=this.designX+t+this.container.pivot.x*n}get ppt_y(){return this.global.y/this.ctx.stageHeight}set ppt_y(e){const t=e*this.ctx.stageHeight-this.global.y,n=this.presetSubType===544?this.scaleExt.y:1;this.container.position.y=this.designY+t+this.container.pivot.y*n}get design_ppt_x(){return Lc(this.global.x/this.ctx.stageWidth)}get design_ppt_y(){return Lc(this.global.y/this.ctx.stageHeight)}}class nP{constructor(e,t,n,r,o,s,a,l,u,h,d){this.ctx=e,this.type=t,this.lineWidth=n,this.width=r,this.height=o,this.fillColor=s,this.isHorz=a,this.renderContainer=new Ki,this.ghcTextureId=`${l}-text-p${u}-l${h}-u${d}-underLine`}createPaths(){if(this.type===\"ww\")return null;{let e=`M 0,0 L ${9525*this.width},0`,[t,n]=[this.width,this.lineWidth];return this.isHorz||(e=\"M 0,0 L 0,\"+9525*this.height,[t,n]=[this.lineWidth,this.height]),{paths:[{id:xp(),path:e,fill:\"norm\",hasStroke:!0,scale:{x:1,y:1},hash:rg()(e)}],width:t,height:n}}}getLineStyle(){const e={width:this.lineWidth};return this.type===\"dotted\"&&(e.dash=\"\"+this.lineWidth),e}preRender(){const e=this.createPaths();if(e){const{paths:t,width:n,height:r}=e,o=t.reduce((s,a)=>s+a.hash,\"\");this.ctx.graphicsTexture.addGraphics(this.ghcTextureId,t,o,{x:0,y:0},n,r,this.getLineStyle(),this.ctx.objectPoolGroup,!1,null,this.fillColor)}}render(){if(this.ghcTextureId){const e=this.ctx.graphicsTexture.getGraphicsData(this.ghcTextureId);e&&(this.sprite=new lr,this.sprite.texture=e.texture,this.sprite.pivot.x=e.pivot.x)}}destroy(){var e;(e=this.sprite)===null||e===void 0||e.destroy({texture:!0})}}const wr=134217729;function d_(i,e,t,n,r){let o,s,a,l,u=e[0],h=n[0],d=0,p=0;h>u==h>-u?(o=u,u=e[++d]):(o=h,h=n[++p]);let m=0;if(d<i&&p<t)for(h>u==h>-u?(s=u+o,a=o-(s-u),u=e[++d]):(s=h+o,a=o-(s-h),h=n[++p]),o=s,a!==0&&(r[m++]=a);d<i&&p<t;)h>u==h>-u?(s=o+u,l=s-o,a=o-(s-l)+(u-l),u=e[++d]):(s=o+h,l=s-o,a=o-(s-l)+(h-l),h=n[++p]),o=s,a!==0&&(r[m++]=a);for(;d<i;)s=o+u,l=s-o,a=o-(s-l)+(u-l),u=e[++d],o=s,a!==0&&(r[m++]=a);for(;p<t;)s=o+h,l=s-o,a=o-(s-l)+(h-l),h=n[++p],o=s,a!==0&&(r[m++]=a);return o===0&&m!==0||(r[m++]=o),m}function iP(i,e){let t=e[0];for(let n=1;n<i;n++)t+=e[n];return t}function Sp(i){return new Float64Array(i)}const Dc=Sp(4),jw=Sp(8),Vw=Sp(12),Ww=Sp(16),Dr=Sp(4);function ag(i,e,t,n,r,o){const s=(e-o)*(t-r),a=(i-r)*(n-o),l=s-a;if(s===0||a===0||s>0!=a>0)return l;const u=Math.abs(s+a);return Math.abs(l)>=33306690738754716e-32*u?l:-function(h,d,p,m,g,_,y){let w,R,F,U,B,V,G,W,ge,he,se,de,ue,xe,We,Ge,Ae,Re;const Ze=h-g,lt=p-g,dt=d-_,ce=m-_;xe=Ze*ce,V=wr*Ze,G=V-(V-Ze),W=Ze-G,V=wr*ce,ge=V-(V-ce),he=ce-ge,We=W*he-(xe-G*ge-W*ge-G*he),Ge=dt*lt,V=wr*dt,G=V-(V-dt),W=dt-G,V=wr*lt,ge=V-(V-lt),he=lt-ge,Ae=W*he-(Ge-G*ge-W*ge-G*he),se=We-Ae,B=We-se,Dc[0]=We-(se+B)+(B-Ae),de=xe+se,B=de-xe,ue=xe-(de-B)+(se-B),se=ue-Ge,B=ue-se,Dc[1]=ue-(se+B)+(B-Ge),Re=de+se,B=Re-de,Dc[2]=de-(Re-B)+(se-B),Dc[3]=Re;let fe=iP(4,Dc),Qe=22204460492503146e-32*y;if(fe>=Qe||-fe>=Qe||(B=h-Ze,w=h-(Ze+B)+(B-g),B=p-lt,F=p-(lt+B)+(B-g),B=d-dt,R=d-(dt+B)+(B-_),B=m-ce,U=m-(ce+B)+(B-_),w===0&&R===0&&F===0&&U===0)||(Qe=11093356479670487e-47*y+33306690738754706e-32*Math.abs(fe),fe+=Ze*U+ce*w-(dt*F+lt*R),fe>=Qe||-fe>=Qe))return fe;xe=w*ce,V=wr*w,G=V-(V-w),W=w-G,V=wr*ce,ge=V-(V-ce),he=ce-ge,We=W*he-(xe-G*ge-W*ge-G*he),Ge=R*lt,V=wr*R,G=V-(V-R),W=R-G,V=wr*lt,ge=V-(V-lt),he=lt-ge,Ae=W*he-(Ge-G*ge-W*ge-G*he),se=We-Ae,B=We-se,Dr[0]=We-(se+B)+(B-Ae),de=xe+se,B=de-xe,ue=xe-(de-B)+(se-B),se=ue-Ge,B=ue-se,Dr[1]=ue-(se+B)+(B-Ge),Re=de+se,B=Re-de,Dr[2]=de-(Re-B)+(se-B),Dr[3]=Re;const Xe=d_(4,Dc,4,Dr,jw);xe=Ze*U,V=wr*Ze,G=V-(V-Ze),W=Ze-G,V=wr*U,ge=V-(V-U),he=U-ge,We=W*he-(xe-G*ge-W*ge-G*he),Ge=dt*F,V=wr*dt,G=V-(V-dt),W=dt-G,V=wr*F,ge=V-(V-F),he=F-ge,Ae=W*he-(Ge-G*ge-W*ge-G*he),se=We-Ae,B=We-se,Dr[0]=We-(se+B)+(B-Ae),de=xe+se,B=de-xe,ue=xe-(de-B)+(se-B),se=ue-Ge,B=ue-se,Dr[1]=ue-(se+B)+(B-Ge),Re=de+se,B=Re-de,Dr[2]=de-(Re-B)+(se-B),Dr[3]=Re;const je=d_(Xe,jw,4,Dr,Vw);xe=w*U,V=wr*w,G=V-(V-w),W=w-G,V=wr*U,ge=V-(V-U),he=U-ge,We=W*he-(xe-G*ge-W*ge-G*he),Ge=R*F,V=wr*R,G=V-(V-R),W=R-G,V=wr*F,ge=V-(V-F),he=F-ge,Ae=W*he-(Ge-G*ge-W*ge-G*he),se=We-Ae,B=We-se,Dr[0]=We-(se+B)+(B-Ae),de=xe+se,B=de-xe,ue=xe-(de-B)+(se-B),se=ue-Ge,B=ue-se,Dr[1]=ue-(se+B)+(B-Ge),Re=de+se,B=Re-de,Dr[2]=de-(Re-B)+(se-B),Dr[3]=Re;const ft=d_(je,Vw,4,Dr,Ww);return Ww[ft-1]}(i,e,t,n,r,o,u)}const Xw=Math.pow(2,-52),lg=new Uint32Array(512);class p_{static from(e,t=sP,n=aP){const r=e.length,o=new Float64Array(2*r);for(let s=0;s<r;s++){const a=e[s];o[2*s]=t(a),o[2*s+1]=n(a)}return new p_(o)}constructor(e){const t=e.length>>1;if(t>0&&typeof e[0]!=\"number\")throw new Error(\"Expected coords to contain numbers.\");this.coords=e;const n=Math.max(2*t-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:n,_hullTri:r,_hullHash:o}=this,s=e.length>>1;let a=1/0,l=1/0,u=-1/0,h=-1/0;for(let he=0;he<s;he++){const se=e[2*he],de=e[2*he+1];se<a&&(a=se),de<l&&(l=de),se>u&&(u=se),de>h&&(h=de),this._ids[he]=he}const d=(a+u)/2,p=(l+h)/2;let m,g,_,y=1/0;for(let he=0;he<s;he++){const se=f_(d,p,e[2*he],e[2*he+1]);se<y&&(m=he,y=se)}const w=e[2*m],R=e[2*m+1];y=1/0;for(let he=0;he<s;he++){if(he===m)continue;const se=f_(w,R,e[2*he],e[2*he+1]);se<y&&se>0&&(g=he,y=se)}let F=e[2*g],U=e[2*g+1],B=1/0;for(let he=0;he<s;he++){if(he===m||he===g)continue;const se=oP(w,R,F,U,e[2*he],e[2*he+1]);se<B&&(_=he,B=se)}let V=e[2*_],G=e[2*_+1];if(B===1/0){for(let de=0;de<s;de++)this._dists[de]=e[2*de]-e[0]||e[2*de+1]-e[1];Fc(this._ids,this._dists,0,s-1);const he=new Uint32Array(s);let se=0;for(let de=0,ue=-1/0;de<s;de++){const xe=this._ids[de];this._dists[xe]>ue&&(he[se++]=xe,ue=this._dists[xe])}return this.hull=he.subarray(0,se),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(ag(w,R,F,U,V,G)<0){const he=g,se=F,de=U;g=_,F=V,U=G,_=he,V=se,G=de}const W=function(he,se,de,ue,xe,We){const Ge=de-he,Ae=ue-se,Re=xe-he,Ze=We-se,lt=Ge*Ge+Ae*Ae,dt=Re*Re+Ze*Ze,ce=.5/(Ge*Ze-Ae*Re);return{x:he+(Ze*lt-Ae*dt)*ce,y:se+(Ge*dt-Re*lt)*ce}}(w,R,F,U,V,G);this._cx=W.x,this._cy=W.y;for(let he=0;he<s;he++)this._dists[he]=f_(e[2*he],e[2*he+1],W.x,W.y);Fc(this._ids,this._dists,0,s-1),this._hullStart=m;let ge=3;n[m]=t[_]=g,n[g]=t[m]=_,n[_]=t[g]=m,r[m]=0,r[g]=1,r[_]=2,o.fill(-1),o[this._hashKey(w,R)]=m,o[this._hashKey(F,U)]=g,o[this._hashKey(V,G)]=_,this.trianglesLen=0,this._addTriangle(m,g,_,-1,-1,-1);for(let he,se,de=0;de<this._ids.length;de++){const ue=this._ids[de],xe=e[2*ue],We=e[2*ue+1];if(de>0&&Math.abs(xe-he)<=Xw&&Math.abs(We-se)<=Xw||(he=xe,se=We,ue===m||ue===g||ue===_))continue;let Ge=0;for(let dt=0,ce=this._hashKey(xe,We);dt<this._hashSize&&(Ge=o[(ce+dt)%this._hashSize],Ge===-1||Ge===n[Ge]);dt++);Ge=t[Ge];let Ae,Re=Ge;for(;Ae=n[Re],ag(xe,We,e[2*Re],e[2*Re+1],e[2*Ae],e[2*Ae+1])>=0;)if(Re=Ae,Re===Ge){Re=-1;break}if(Re===-1)continue;let Ze=this._addTriangle(Re,ue,n[Re],-1,-1,r[Re]);r[ue]=this._legalize(Ze+2),r[Re]=Ze,ge++;let lt=n[Re];for(;Ae=n[lt],ag(xe,We,e[2*lt],e[2*lt+1],e[2*Ae],e[2*Ae+1])<0;)Ze=this._addTriangle(lt,ue,Ae,r[ue],-1,r[lt]),r[ue]=this._legalize(Ze+2),n[lt]=lt,ge--,lt=Ae;if(Re===Ge)for(;Ae=t[Re],ag(xe,We,e[2*Ae],e[2*Ae+1],e[2*Re],e[2*Re+1])<0;)Ze=this._addTriangle(Ae,ue,Re,-1,r[Re],r[Ae]),this._legalize(Ze+2),r[Ae]=Ze,n[Re]=Re,ge--,Re=Ae;this._hullStart=t[ue]=Re,n[Re]=t[lt]=ue,n[ue]=lt,o[this._hashKey(xe,We)]=ue,o[this._hashKey(e[2*Re],e[2*Re+1])]=Re}this.hull=new Uint32Array(ge);for(let he=0,se=this._hullStart;he<ge;he++)this.hull[he]=se,se=n[se];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(function(n,r){const o=n/(Math.abs(n)+Math.abs(r));return(r>0?3-o:1+o)/4}(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:n,coords:r}=this;let o=0,s=0;for(;;){const a=n[e],l=e-e%3;if(s=l+(e+2)%3,a===-1){if(o===0)break;e=lg[--o];continue}const u=a-a%3,h=l+(e+1)%3,d=u+(a+2)%3,p=t[s],m=t[e],g=t[h],_=t[d];if(rP(r[2*p],r[2*p+1],r[2*m],r[2*m+1],r[2*g],r[2*g+1],r[2*_],r[2*_+1])){t[e]=_,t[a]=p;const y=n[d];if(y===-1){let R=this._hullStart;do{if(this._hullTri[R]===d){this._hullTri[R]=e;break}R=this._hullPrev[R]}while(R!==this._hullStart)}this._link(e,y),this._link(a,n[s]),this._link(s,d);const w=u+(a+1)%3;o<lg.length&&(lg[o++]=w)}else{if(o===0)break;e=lg[--o]}}return s}_link(e,t){this._halfedges[e]=t,t!==-1&&(this._halfedges[t]=e)}_addTriangle(e,t,n,r,o,s){const a=this.trianglesLen;return this._triangles[a]=e,this._triangles[a+1]=t,this._triangles[a+2]=n,this._link(a,r),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}}function f_(i,e,t,n){const r=i-t,o=e-n;return r*r+o*o}function rP(i,e,t,n,r,o,s,a){const l=i-s,u=e-a,h=t-s,d=n-a,p=r-s,m=o-a,g=h*h+d*d,_=p*p+m*m;return l*(d*_-g*m)-u*(h*_-g*p)+(l*l+u*u)*(h*m-d*p)<0}function oP(i,e,t,n,r,o){const s=t-i,a=n-e,l=r-i,u=o-e,h=s*s+a*a,d=l*l+u*u,p=.5/(s*u-a*l),m=(u*h-a*d)*p,g=(s*d-l*h)*p;return m*m+g*g}function Fc(i,e,t,n){if(n-t<=20)for(let r=t+1;r<=n;r++){const o=i[r],s=e[o];let a=r-1;for(;a>=t&&e[i[a]]>s;)i[a+1]=i[a--];i[a+1]=o}else{let r=t+1,o=n;Tp(i,t+n>>1,r),e[i[t]]>e[i[n]]&&Tp(i,t,n),e[i[r]]>e[i[n]]&&Tp(i,r,n),e[i[t]]>e[i[r]]&&Tp(i,t,r);const s=i[r],a=e[s];for(;;){do r++;while(e[i[r]]<a);do o--;while(e[i[o]]>a);if(o<r)break;Tp(i,r,o)}i[t+1]=i[o],i[o]=s,n-r+1>=o-t?(Fc(i,e,r,n),Fc(i,e,t,o-1)):(Fc(i,e,t,o-1),Fc(i,e,r,n))}}function Tp(i,e,t){const n=i[e];i[e]=i[t],i[t]=n}function sP(i){return i[0]}function aP(i){return i[1]}function lP(i,e,t){let n=null;const r=new Ki;if(i.stopList.sort((s,a)=>s.pos-a.pos),!i.stopList.find(s=>s.pos===0)){const s=i.stopList[0];i.stopList.unshift({pos:0,color:s.color})}if(!i.stopList.find(s=>s.pos===1)){const s=i.stopList[i.stopList.length-1];i.stopList.push({pos:1,color:s.color})}const o=s=>{const a=[];for(let l=0,u=s.length;l<u-1;l++){const h=s[l],d=s[l+1],p=h.pos+.5*(d.pos-h.pos),m=bp(h.color,d.color,.5),g=2*l;a[g]=h,a[g+1]={color:m,pos:p},a[g+2]=d}return a};if(i.stopList=o(i.stopList),i.stopList=o(i.stopList),n=i.line?qw(i,e,t):i.path?function(s,a,l){var u,h,d;const p=[],m={x:0,y:0};if(((u=s.path)===null||u===void 0?void 0:u.path)===\"circle\"||((h=s.path)===null||h===void 0?void 0:h.path)===\"rect\"||((d=s.path)===null||d===void 0?void 0:d.path)===\"shape\"){const g=a/2,_=l/2,y=Math.sqrt(g*g+_*_);s.stopList.forEach(w=>{if(w.pos===0)p.push({point:{x:0,y:0},color:w.color});else{const R=y*w.pos,F=new pu;F.absellipse(0,0,R,R,0,2*Math.PI,!1,0),F.getPoints(50).forEach(U=>{p.push({point:{x:U.x,y:U.y},color:w.color})})}m.x=g,m.y=_})}return{points:p,position:m}}(i,e,t):qw(i,e,t),n){const s=[],a=[],{position:l,points:u}=n,h=p_.from(u,_=>_.point.x,_=>_.point.y);for(let _=0;_<h.triangles.length;_+=3)s.push(u[h.triangles[_]].point.x,u[h.triangles[_]].point.y),s.push(u[h.triangles[_+1]].point.x,u[h.triangles[_+1]].point.y),s.push(u[h.triangles[_+2]].point.x,u[h.triangles[_+2]].point.y),a.push(...Bs(u[h.triangles[_]].color)),a.push(...Bs(u[h.triangles[_+1]].color)),a.push(...Bs(u[h.triangles[_+2]].color));const d=new bc;d.addAttribute(\"aVertexPosition\",s,2),d.addAttribute(\"aColor\",a,4);const p=Oa.from(`\n        precision mediump float;\n        attribute vec2 aVertexPosition;\n        attribute vec4 aColor;\n        uniform mat3 translationMatrix;\n        uniform mat3 projectionMatrix;\n        varying vec4 vColor;\n        void main() {\n            vColor = aColor;\n            gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n        }`,`precision mediump float;    \n        varying vec4 vColor;\n        void main() {\n            float alpha = vColor.a;\n            vec4 color = vColor;\n            color.a = 1.0;\n            gl_FragColor = color * alpha;\n        }\n    `),m=new Na;m.drawRect(0,0,e+1,t+1),r.mask=m,r.addChild(m);const g=new Cc(d,p);g.position.x=l.x,g.position.y=l.y,r.addChild(g)}return r}function qw(i,e,t){const n=e/2,r=t/2,o=[{x:-n,y:r},{x:-n,y:-r},{x:n,y:r},{x:n,y:-r}],s=[pl.fromPointSlope({x:-n,y:0},Math.PI/2),pl.fromPointSlope({x:0,y:r},0),pl.fromPointSlope({x:n,y:0},Math.PI/2),pl.fromPointSlope({x:0,y:-r},0)],a=[],l=i.stopList.slice(1,i.stopList.length-1).map(g=>{var _,y,w;const R=2*Math.PI;let F=(y=(_=i.line)===null||_===void 0?void 0:_.ang)!==null&&y!==void 0?y:0;for(;F>R;)F-=R;for(;F<0;)F+=R;const U={x:0,y:0};so(F,Math.PI/2)?(U.x=0,U.y=t/2-g.pos*t):so(F,0)?(U.x=g.pos*e-e/2,U.y=0):(U.x=g.pos*e-e/2,U.y=t/2-g.pos*t),F>Math.PI/2&&F<=Math.PI&&(U.x*=-1),F>Math.PI&&F<=2*Math.PI&&(U.y*=-1);const B=pl.fromPointSlope(U,Math.PI/2-(((w=i.line)===null||w===void 0?void 0:w.ang)||0)),V=s.map(W=>B.crossPoint(W)).filter(W=>W&&W.x<=n&&W.x>=-n&&W.y<=r&&W.y>=-r).map(W=>({point:W,color:g.color})).sort((W,ge)=>ge.point.y-W.point.y);a.push(...V);let G=Math.abs(V[1].point.x-V[0].point.x)/10;for(let W=20;W--;){const ge=W%2==0?1:-1,he=U.x+ge*G,se=B.resolveY(he);he<=n&&he>=-n&&se<=r&&se>=-r&&a.push({point:{x:he,y:se},color:g.color}),G+=G}return B});let u=[],h=[];e:for(let g=0;g<o.length;g++){const _=o[g];for(let U=0;U<l.length-1;U++){const B=l[U],V=l[U+1],G=B.distanceToLinearEquation(V),W=B.distanceToPoint(_),ge=V.distanceToPoint(_);if(W<G&&ge<G){const he=i.stopList.slice(1,i.stopList.length-1)[U],se=i.stopList.slice(1,i.stopList.length-1)[U+1],de=bp(he.color,se.color,W/G);a.splice(U+1,0,{point:_,color:de});continue e}}const y=l[0],w=l[l.length-1],R=y.distanceToPoint(_),F=w.distanceToPoint(_);R<=F?u.push({point:_,dis:R}):h.push({point:_,dis:F})}u=u.sort((g,_)=>_.dis-g.dis);const d=u.map((g,_)=>{if(_===0)return{point:g.point,color:i.stopList[0].color};{const y=i.stopList[0].color,w=i.stopList[1].color;return{point:g.point,color:bp(y,w,1-(u[0].dis===0?1:g.dis/u[0].dis))}}}).sort((g,_)=>_.point.y-g.point.y);h=h.sort((g,_)=>_.dis-g.dis);const p=h.map((g,_)=>{if(_===0)return{point:g.point,color:i.stopList[i.stopList.length-1].color};{const y=i.stopList[i.stopList.length-2].color,w=i.stopList[i.stopList.length-1].color;return{point:g.point,color:bp(y,w,h[0].dis===0?0:g.dis/h[0].dis)}}}).sort((g,_)=>_.point.y-g.point.y),m=d.concat(...a).concat(p);for(let g=0;g<m.length;g++)m[g].point.x+=n,m[g].point.y=-m[g].point.y+r;return{points:m,position:{x:0,y:0}}}const m_=`\nvec3 rgb2hsl(vec3 rgb) {\n    float cMax = max(max(rgb.r, rgb.g), rgb.b);\n    float cMin = min(min(rgb.r, rgb.g), rgb.b);\n    float delta = cMax - cMin;\n    \n    float h = 0.0;\n    if (delta == 0.0) {\n        h = 0.0;\n    } else if (cMax == rgb.r) {\n        h = 60.0 * mod(((rgb.g - rgb.b) / delta), 6.0);\n    } else if (cMax == rgb.g ) {\n        h = 60.0 * ((rgb.b - rgb.r) / delta + 2.0);\n    } else if (cMax == rgb.b) {\n        h = 60.0 * ((rgb.r - rgb.g) / delta + 4.0);\n    }\n    \n    float l = (cMax + cMin) / 2.0;\n    \n    float s = 0.0;\n    if (delta == 0.0) {\n        s = 0.0;\n    } else {\n        s = delta / (1.0 - abs(2.0 * l - 1.0));\n    }\n    \n    return vec3(h, s, l);\n}\n`,uP=[m_],hP={biLevel:`\nvec4 transform(vec4 texColor, float arg) {\n    vec3 hsl = rgb2hsl(texColor.rgb);\n    mat3 rgb2yuv = mat3(\n        0.2126, 0.7152, 0.0722,\n        -0.09991, -0.33609, 0.43600,\n        0.615, -0.5586, -0.05639\n    );\n    vec3 yuv = texColor.rgb * rgb2yuv;\n    if (yuv.x >= 0.49 || texColor.a < 0.9) {\n        return vec4(1.0, 1.0, 1.0, 1.0) * texColor.a;\n    } else {\n        return vec4(0.0, 0.0, 0.0, 1.0) * texColor.a;\n    }\n}\n`,alphaModFix:`\nvec4 transform(vec4 texColor, float arg) {\n   return texColor * arg;\n}\n`};class Yw extends Nr{constructor(e,t){var n;super(void 0,(n=hP[e],`\nvarying vec2 vTextureCoord;\n\nuniform float arg;\nuniform sampler2D uSampler;\n\n${uP.map(r=>r+`\n`).join(`\n`)}\n\n${n}\n\nvoid main(void){\n    vec4 texColor = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = transform(texColor, arg);\n}\n`),{arg:t})}}const cP=[m_],dP={clrChange:`\nvec4 transform(vec4 texColor, vec4 arg1, vec4 arg2) {\n    float epsilon = 0.001;\n    vec3 colorDiff = arg1.rgb - (texColor.rgb / max(texColor.a, 0.0000000001));\n    float colorDistance = length(colorDiff);\n    if (colorDistance < epsilon) {\n        arg2.rgb *= arg2.a;\n        return arg2;\n    } else {\n        return texColor;\n    }\n}\n`,changeBulletColor:`\nvec4 transform(vec4 texColor, vec4 arg1, vec4 arg2) {\n    if (texColor.a == 0.0) {\n        return texColor;\n    } else {\n        return arg2;\n    }\n}\n`};class pP extends Nr{constructor(e,t,n){var r;super(void 0,(r=dP[e],`\nvarying vec2 vTextureCoord;\n\nuniform vec4 arg1;\nuniform vec4 arg2;\nuniform sampler2D uSampler;\n\n${cP.map(o=>o+`\n`).join(`\n`)}\n\n${r}\n\nvoid main(void){\n    vec4 texColor = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = transform(texColor, arg1, arg2);\n}\n`),{arg1:Float32Array.from(t),arg2:Float32Array.from(n)})}}const fP=[m_],mP={lum:`\nvec4 transform(vec4 texColor, float arg1, float arg2) {\n    if (arg1 > 0.0) {\n        texColor.r += (1.0 - texColor.r) * arg1;\n        texColor.g += (1.0 - texColor.g) * arg1;\n        texColor.b += (1.0 - texColor.b) * arg1;\n    } else if (arg1 < 0.0) {\n        texColor.r -= texColor.r * arg1;\n        texColor.g -= texColor.g * arg1;\n        texColor.b -= texColor.b * arg1;\n    }\n    // todo \\u5BF9\\u6BD4\\u5EA6\n    texColor.rgb *= texColor.a;\n    return texColor;\n}\n`};class gP extends Nr{constructor(e,t,n){var r;super(void 0,(r=mP[e],`\nvarying vec2 vTextureCoord;\n\nuniform float arg1;\nuniform float arg2;\nuniform sampler2D uSampler;\n\n${fP.map(o=>o+`\n`).join(`\n`)}\n\n${r}\n\nvoid main(void){\n    vec4 texColor = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = transform(texColor, arg1, arg2);\n}\n`),{arg1:t,arg2:n})}}class Da{constructor(e,t,n,r,o){this.ctx=e,this.fillStyle=t,this.width=n,this.height=r,this.config=o,this.clonedObjects=[],this._displayObject=null}get displayObject(){return this._displayObject||(this._displayObject=this.createDisplayObject()),this._displayObject}set displayObject(e){this._displayObject&&this._displayObject.destroy({children:!0,texture:!0}),this._displayObject=e}get hasFill(){return!!this.fillStyle&&this.fillStyle.fillType!==\"noFill\"}createDisplayObject(){if(!this.fillStyle)return null;if(this.config.useSlideBackgroundFill&&this.ctx.bgTexture){const e=new lr;return e.texture=this.ctx.bgTexture,e}if(this.fillStyle.fillType===\"solidFill\"||this.fillStyle.fillType===\"noFill\")return null;if(this.fillStyle.fillType===\"gradientFill\")return lP(this.fillStyle,this.width,this.height);if(this.fillStyle.fillType===\"blipFill\"){const{src:e,filters:t}=this.fillStyle,n=this.ctx.spriteTexture.getTexture(e),r=this.ctx.spriteTexture.getFrameData(e);if(n){const o=new lr;return o.texture=n,t.length>0&&this.config.useFilter&&(o.filters=function(s){const a=[];return s.forEach(l=>{if(l.type===\"biLevel\")a.push(new Yw(\"biLevel\",l.args[0]));else if(l.type===\"clrChange\"||l.type===\"changeBulletColor\"){const u=Bs(l.args[0]),h=Bs(l.args[1]);a.push(new pP(l.type,u,h))}else l.type===\"alphaModFix\"?a.push(new Yw(l.type,l.args[0])):l.type===\"lum\"&&a.push(new gP(l.type,l.args[0],l.args[1]))}),a}(t)),o.width=this.width,o.height=this.height,r.rotate&&(o.position.x=this.width/2,o.position.y=this.height/2,o.anchor.x=.5,o.anchor.y=.5,o.rotation=r.rotate/180*Math.PI),o}}else if(this.fillStyle.fillType===\"gifFill\"){const{src:e,delays:t}=this.fillStyle,n=this.ctx.spriteTexture.getGifFrames(e).map((a,l)=>({texture:a,time:t[l]||20})),r=new o_(n,!0);r.width=this.width,r.height=this.height;const o=this.fillStyle.loop;let s=1;return r.onLoop=()=>{s+=1,o>0&&s>o&&r.gotoAndStop(r.totalFrames)},r}return null}isSolidFill(){var e;return((e=this.fillStyle)===null||e===void 0?void 0:e.fillType)===\"solidFill\"}getSolidFillColor(){var e;return((e=this.fillStyle)===null||e===void 0?void 0:e.fillType)===\"solidFill\"?this.fillStyle.color:\"#000000\"}getClonedDisplayObject(){const e=this.createDisplayObject();return this.clonedObjects.push(e),e}destroy(){var e;(e=this._displayObject)===null||e===void 0||e.destroy(),this._displayObject=null,this.clonedObjects.forEach(t=>{t==null||t.destroy()}),this.clonedObjects=[]}}var vP=function(i,e,t,n){return new(t||(t=Promise))(function(r,o){function s(u){try{l(n.next(u))}catch(h){o(h)}}function a(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof t?h:new t(function(d){d(h)})).then(s,a)}l((n=n.apply(i,e||[])).next())})};class _P extends c_{constructor(e,t,n){var r;super(e,t,n),this.textureContainer=new Ki,this.underline=null,this.cacheSprite=new lr;const{shapeId:o,paragraphIndex:s,lineIndex:a,unitIndex:l,lineHeight:u,width:h,underLine:d,fill:p,height:m,isHorz:g,lineWidth:_}=e,y=((r=p==null?void 0:p.fill)===null||r===void 0?void 0:r.fillType)===\"solidFill\"?p.fill.color:null;if(d){const w=g?u/16:_/16;this.underline=new nP(t,d.type,w,h,m,y,g,o,s,a,l)}this.textGraphics=this.createTextGraphics(),this.textFill=this.createTextFill(),this.strokeGraphics=this.createStrokeGraphics(),this.strokeFill=this.createStrokeFill()}createStrokeFill(){const{stroke:e,lineWidth:t,lineHeight:n}=this.json;return new Da(this.ctx,e==null?void 0:e.fill,t,n,{useFilter:!1,useSlideBackgroundFill:!1})}createStrokeGraphics(){const{stroke:e}=this.json,t=e!=null&&e.key?{fillType:\"blipFill\",src:e.key,filters:[]}:void 0;return new Da(this.ctx,t,(e==null?void 0:e.width)||0,(e==null?void 0:e.height)||0,{useFilter:!1,useSlideBackgroundFill:!1})}createTextFill(){const{isHorz:e,fill:t,lineWidth:n,lineHeight:r,fillLineHeight:o}=this.json;return e?new Da(this.ctx,t==null?void 0:t.fill,n,Math.max(o,r),{useFilter:!1,useSlideBackgroundFill:!1}):new Da(this.ctx,t==null?void 0:t.fill,o,r,{useFilter:!1,useSlideBackgroundFill:!1})}createTextGraphics(){var e;const{fill:t,content:n}=this.json;let r=\"#000000\";((e=t==null?void 0:t.fill)===null||e===void 0?void 0:e.fillType)===\"solidFill\"&&(r=t.fill.color);const o=t!=null&&t.key?{fillType:\"blipFill\",src:t.key,filters:[{type:\"changeBulletColor\",args:[\"#000000\",r]}]}:void 0;return new Da(this.ctx,o,(t==null?void 0:t.width)||0,(t==null?void 0:t.height)||0,{useFilter:n===\"\\u25FE\",useSlideBackgroundFill:!1})}getIterateEntry(){return null}getBgElement(){return null}updateTransform(e){var t,n,r,o;const{isHorz:s}=this.json;e.position={x:s&&(n=(t=e.position)===null||t===void 0?void 0:t.x)!==null&&n!==void 0?n:0,y:s?0:(o=(r=e.position)===null||r===void 0?void 0:r.y)!==null&&o!==void 0?o:0},e.width=s?this.json.width:this.json.lineWidth,e.height=s?this.json.lineHeight:this.json.height,super.updateTransform(e)}preRender(){var e;(e=this.underline)===null||e===void 0||e.preRender()}render(e){e.addSubMTask(()=>vP(this,void 0,void 0,function*(){this.doRender()}))}doRender(){let e=!1;const{lineWidth:t,lineHeight:n,baseLine:r,isHorz:o,underline:s,height:a,width:l,highlightColor:u,x:h,y:d,content:p,fillLineHeight:m,fill:g}=this.json;let _=this.json.needFill!==!1;if(g&&g.fill&&g.fill.fillType!==\"solidFill\"&&(_=!0),u){const y=new Na,[w,R]=Bw(u);y.beginFill(w,R),y.drawRect(0,0,o?l:t,o?n:a),y.endFill(),this.textureContainer.addChild(y)}if(this.textGraphics.displayObject){const y=this.textGraphics.displayObject;if(y.scale.x=.5,y.scale.y=.5,o&&(y.position.y=d>0?d:0),_){const w=this.textFill.displayObject;if(w)w.mask=y,w.addChild(y),w.position.x=-h,y.position.x+=h,e=!0,this.textureContainer.addChild(w);else if(this.textFill.isSolidFill()){const R=new wp;R.color=this.textFill.getSolidFillColor(),y.filters=[R],e=!0,this.textureContainer.addChild(y)}}else this.textureContainer.addChild(y)}if(this.strokeGraphics.displayObject){const y=this.strokeGraphics.displayObject;if(y.scale.x=.5,y.scale.y=.5,_){const w=this.strokeFill.displayObject;if(w)w.mask=y,w.addChild(y),o?w.position.y=d>0?d:0:w.position.x=h,this.textureContainer.addChild(w);else if(this.strokeFill.isSolidFill()){o?y.position.y=d>0?d:0:y.position.x=h;const R=new wp;R.color=this.strokeFill.getSolidFillColor(),y.filters=[R],e=!0,this.textureContainer.addChild(y)}}else o?y.position.y=d>0?d:0:y.position.x=h,this.textureContainer.addChild(y)}if(this.underline&&(this.underline.render(),this.underline.sprite)){o?(this.underline.sprite.position.y=s?s-n/16:r,this.underline.sprite.position.x=0):(this.underline.sprite.position.x=0,this.underline.sprite.position.y=0);const y=this.textFill.getClonedDisplayObject();y?(y.mask=this.underline.sprite,y.addChild(this.underline.sprite),this.textureContainer.addChild(y)):this.textureContainer.addChild(this.underline.sprite)}if(e){const y=Ao.create({width:o?l:t,height:o?Math.max(m,n):a,resolution:this.ctx.renderer.resolution});this.ctx.renderer.render(this.textureContainer,{renderTexture:y}),this.cacheSprite.texture=y,o&&d<0&&(this.cacheSprite.position.y=d),this.container.addChild(this.cacheSprite)}else this.container.addChild(this.textureContainer);this.container.name=p}destroy(){this.textFill.destroy(),this.textGraphics.destroy(),this.strokeFill.destroy(),this.strokeGraphics.destroy(),this.cacheSprite.texture.destroy(!0),this.cacheSprite.destroy(),this.textureContainer.destroy(),this.container.destroy()}}var $w=function(i,e,t,n){return new(t||(t=Promise))(function(r,o){function s(u){try{l(n.next(u))}catch(h){o(h)}}function a(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof t?h:new t(function(d){d(h)})).then(s,a)}l((n=n.apply(i,e||[])).next())})};class yP extends c_{constructor(){super(...arguments),this.units=[],this.isHorz=!0}getIterateElements(){return this.units}getIterateEntry(e,t,n){return this.units[t]?this.units[t]:(this.ctx.eventHub.emit(\"IterateTimeNodeEnd\",n),null)}preRender(){}createUnits(e,t,n,r){for(let o=0,s=this.json.textUnits.length;o<s;o++)r.addSubMTask(()=>$w(this,void 0,void 0,function*(){const a=this.json.textUnits[o],{height:l,width:u,fillHeight:h,baseline:d,y:p,underline:m}=this.json,g=new _P(Object.assign(Object.assign({},a),{lineHeight:l,lineWidth:u,baseLine:d-p,underline:m,fillLineHeight:h||l,isHorz:this.isHorz,shapeId:e,paragraphIndex:t,lineIndex:n,unitIndex:o}),this.ctx,this.global);g.preRender(),this.units.push(g)}))}render(e){for(const t of this.units.reverse())t.render(e),e.addSubMTask(()=>$w(this,void 0,void 0,function*(){this.container.addChild(t.container)}))}destroy(){this.units.forEach(e=>{e.destroy()}),this.container.destroy({children:!1})}}var Jw=function(i,e,t,n){return new(t||(t=Promise))(function(r,o){function s(u){try{l(n.next(u))}catch(h){o(h)}}function a(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof t?h:new t(function(d){d(h)})).then(s,a)}l((n=n.apply(i,e||[])).next())})};class xP extends c_{constructor(){super(...arguments),this.iterateElements=[],this.lines=[],this.isHorz=!0}getIterateElements(){if(this.iterateElements.length>0)return this.iterateElements;const e=this.lines.reduce((t,n)=>t=t.concat(n.getIterateElements()),[]);return this.iterateElements=e,e}getIterateEntry(e,t,n){const r=this.getIterateElements();return r[t]?r[t]:(this.ctx.eventHub.emit(\"IterateTimeNodeEnd\",n),null)}preRender(){}createLines(e,t,n){for(let r=0,o=this.json.lines.length;r<o;r++)n.addSubMTask(()=>Jw(this,void 0,void 0,function*(){const s=this.json.lines[r],a=new yP(s,this.ctx,this.global);a.isHorz=this.isHorz,a.container.name=\"line-\"+r,a.createUnits(e,t,r,n),this.lines.push(a)}))}render(e){for(const t of this.lines)t.render(e),e.addSubMTask(()=>Jw(this,void 0,void 0,function*(){this.container.addChild(t.container)}))}destroy(){this.lines.forEach(e=>{e.destroy()}),this.container.destroy({children:!1})}}var ug=function(i,e,t,n){return new(t||(t=Promise))(function(r,o){function s(u){try{l(n.next(u))}catch(h){o(h)}}function a(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof t?h:new t(function(d){d(h)})).then(s,a)}l((n=n.apply(i,e||[])).next())})};class bP{constructor(e,t,n,r){this.iterateElements=[],this.paragraphs=[],this.container=new Ki,this.json=e,this.ctx=t,this.parentGlobalPos=r,this.iterateType=n,this.container.name=\"textBody\",this.global={x:this.parentGlobalPos.x+e.position.x,y:this.parentGlobalPos.y+e.position.y},this.container.position.x=e.position.x,this.container.position.y=e.position.y,this.container.scale.x=e.scale.x,this.container.scale.y=e.scale.y;const o=new Na;o.drawRect(0,0,e.width,e.height),this.container.addChild(o)}get width(){return this.json.width}get height(){return this.json.height}get x(){return this.json.position.x}get y(){return this.json.position.y}getTextElement(e,t){return e===\"paragraph\"?this.paragraphs[t[0]]:null}getIterateEntry(e,t){return this.iterateElements[e]?this.iterateElements[e]:(this.ctx.eventHub.emit(\"IterateTimeNodeEnd\",t),null)}destroy(){this.paragraphs.forEach(e=>{e.destroy()})}createParagraphs(e,t){for(let n=0,r=this.json.paragraphs.length;n<r;n++)t.addSubMTask(()=>ug(this,void 0,void 0,function*(){var o;const s=this.json.paragraphs[n],a=new xP(s,this.ctx,this.global);a.isHorz=(o=this.json.isHorz)===null||o===void 0||o,a.createLines(e,n,t),t.addSubMTask(()=>ug(this,void 0,void 0,function*(){this.iterateElements=this.iterateElements.concat(a.getIterateElements()),a.container.name=\"\\u6BB5\\u843D-\"+n,this.paragraphs.push(a)}))}))}render(e){for(const t of this.paragraphs)t.render(e),e.addSubMTask(()=>ug(this,void 0,void 0,function*(){this.container.addChild(t.container)}));e.addSubMTask(()=>ug(this,void 0,void 0,function*(){const{width:t}=this.container;this.container.scale.x<0&&(this.container.x+=-1*t)}))}}var wP=v(48),SP=v.n(wP),TP=v(49),EP=v.n(TP);const MP={Reflection:class extends Nr{constructor(i){super(SP.a,EP.a,{uShapeFilterArea:new Float32Array([0,0,0,0]),uStartAlpha:i.startAlpha,uEndAlpha:i.endAlpha,uBlur:0}),this.json=i}}};class AP{constructor(e){this.scaleX=1,this.scaleY=1,this.pivot={x:0,y:0},this.paths=[],this.hash=\"\",this.width=0,this.height=0,this.graphicsId=\"\",this.textureId=\"\",this.id=e.id,this.type=e.type,this.heightSize=e.heightSize,this.widthSize=e.widthSize,this.fillStyle=e.fillStyle||{fillType:\"solidFill\",color:\"#ffffffff\"},this.lineWidth=e.lineWidth||1,this.position=e.position||{x:0,y:0},this.rotate=e.rotation||1,this.path=this.getUnitPath(),this.setScaleFromLineWidth(),this.setScaleFromSize(),this.generatePaths(),this.setPivot()}setPivot(){switch(this.type){case\"oval\":case\"diamond\":this.pivot={x:this.width/2,y:this.height/2};break;case\"arrow\":case\"stealth\":case\"triangle\":default:this.pivot={x:this.width,y:this.height/2}}}generatePaths(){this.hash=\"arrow-\"+rg()(this.path+this.scaleX+this.scaleY),this.paths=[{id:this.id,path:this.path,fill:\"norm\",hasStroke:!1,hash:this.hash,scale:{x:this.scaleX,y:this.scaleY}}]}getUnitPath(){switch(this.type){case\"stealth\":return\"M 0,0 L 95250,47625 L 0,95250 L 28575,47625 C C\";case\"oval\":return\"M 0,47625 A 47625,47625,-3.14159265,6.2831853 C C\";case\"diamond\":return\"M 47625,0 L 95250,47625 L 47625,95250 L 0,47625 C C\";case\"arrow\":return\"M 9525,0 L 95250,47625 L 9525,95250 L 0,85725 L 68389.5,47625 L 0,9525 C C\";case\"triangle\":return\"M 0,0 L 95250,47625 L 0,95250 C C\";default:return\"\"}}setScaleFromLineWidth(){switch(this.type){case\"stealth\":case\"oval\":case\"diamond\":case\"arrow\":case\"triangle\":this.scaleX*=.29*this.lineWidth+.7,this.scaleY*=.29*this.lineWidth+.7;break;default:throw new Error(\"can't match any arrow type!\")}}setScaleFromSize(){switch(this.type){case\"stealth\":case\"oval\":case\"diamond\":case\"arrow\":case\"triangle\":this.scaleX*=1,this.scaleY*=1;break;default:throw new Error(\"can't match any arrow type!\")}switch(this.widthSize){case\"sm\":this.scaleX*=3/4;break;case\"lg\":this.scaleX*=1.25;break;case\"med\":this.scaleX*=1}switch(this.heightSize){case\"sm\":this.scaleY*=3/4;break;case\"lg\":this.scaleY*=1.25;break;case\"med\":this.scaleY*=1}this.width=10*this.scaleX,this.height=10*this.scaleY}}class Zw{constructor(e,t,n,r,o,s,a,l,u,h,d){this.id=e,this.ctx=t,this.paths=n,this.hash=r,this.nept=o,this.width=s,this.height=a,this.lineStyle=l,this.shouldFill=u,this.bgColor=h,this.lnColor=d,this.clonedObjects=[],this._displayObject=null,this.isRectangle=!1,this.isPureRect=!1,this.isColoredPureRect=!1,this.isRectangle=this.rectangleDetect(n),this.isRectangle&&u?this.bgColor?this.isColoredPureRect=!0:this.isPureRect=!0:this.ctx.graphicsTexture.addGraphics(this.id,this.paths,this.hash,this.nept,this.width,this.height,this.lineStyle,this.ctx.objectPoolGroup,this.shouldFill,this.bgColor,this.lnColor)}get displayObject(){return this._displayObject}pointDis(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)}rectangleDetect(e){if(e.length!==1)return!1;const t=e[0].path.trim().split(\" \");if(t.length!==10)return!1;const n=[],r=[];for(let l=0;l<t.length;l+=2){const u=t[l],h=t[l+1],[d,p]=h.split(\",\").map(m=>Number(m)/100);n.push(u),r.push({x:d,y:p})}if(n.join(\"\")!==\"MLLLC\")return!1;for(let l=0;l<3;l++){const u=r[l],h=r[l+1];if(u.x!==h.x&&u.y!==h.y)return!1}const o=r.slice(0,4).reduce((l,u)=>l+u.x,0)/4,s=r.slice(0,4).reduce((l,u)=>l+u.y,0)/4;if(Number.isNaN(o)||Number.isNaN(s))return!1;const a={x:o,y:s};return so(this.pointDis(a,r[0]),this.pointDis(a,r[1]))&&so(this.pointDis(a,r[0]),this.pointDis(a,r[2]))&&so(this.pointDis(a,r[0]),this.pointDis(a,r[3]))&&this.pointDis(a,r[0])===this.pointDis(a,r[1])}createDisplayObject(){if(this.isPureRect){const e=new Na;return e.beginFill(0,1),e.drawRect(0,0,this.width,this.height),e}if(this.isColoredPureRect&&this.bgColor){const e=new Na,[t,n]=Bw(this.bgColor);return e.beginFill(t,n),e.drawRect(0,0,this.width,this.height),e}{const e=new lr,t=this.ctx.graphicsTexture.getGraphicsData(this.id);return t?(e.texture=t.texture,e.pivot.x=t.pivot.x,e.pivot.y=t.pivot.y,e):null}}getClonedDisplayObject(){const e=this.createDisplayObject();return this.clonedObjects.push(e),e}render(){this._displayObject=this.createDisplayObject()}isNeedMask(e,t){let n=!1;return this._displayObject&&(n=!(this.isRectangle&&Math.abs(e-this._displayObject.width)<2&&Math.abs(t-this._displayObject.height)<2&&this.shouldFill)),n}destroy(){var e;(e=this._displayObject)===null||e===void 0||e.destroy(),this._displayObject=null,this.clonedObjects.forEach(t=>{t==null||t.destroy()}),this.clonedObjects=[]}}var g_=function(i,e,t,n){return new(t||(t=Promise))(function(r,o){function s(u){try{l(n.next(u))}catch(h){o(h)}}function a(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof t?h:new t(function(d){d(h)})).then(s,a)}l((n=n.apply(i,e||[])).next())})};const Lu={pivot:{x:0,y:0},width:0,height:0};class Kw extends h_{constructor(e,t,n,r){var o;super(e,t,n),this.renderContainer=new Ki,this.needCacheAsBitMap=!1,this.backgroundGraphics=null,this.filterAreaJustifies=[],this.strokeGraphics=null,this.arrowList=[],this.fillColorFilter=new wp,this.strokeColorFilter=new wp,this.id=\"\",this.fill=new Fw(this),this.stroke=new ZC(this),this.updateFilterArea=()=>{const l=this.renderContainer.getBounds(!1),u=this.filterAreaJustifies.map(m=>m(l)),h=u.map(m=>m.width),d=u.map(m=>m.height),p=new Tn(l.x,l.y,Math.max(...h),Math.max(...d));this.renderContainer.filterArea=p,(this.renderContainer.filters||[]).forEach(m=>{m.uniforms.uShapeFilterArea=new Float32Array(4),m.uniforms.uShapeFilterArea[0]=p.x,m.uniforms.uShapeFilterArea[1]=p.y,m.uniforms.uShapeFilterArea[2]=p.width,m.uniforms.uShapeFilterArea[3]=p.height})},this.json=e,this.json.fillStyle&&this.json.fillStyle.fillType===\"groupFill\"&&r&&(this.json.fillStyle=r),this.id=e.id;const{fillStyle:s,lineStyle:a}=this.json;this.container.name=e.id,this.renderContainer.name=e.id+\"-render-container\",this.generateArrowList(),this.backgroundFill=this.createBackgroundFill(),this.backgroundGraphics=this.createBackgroundGraphics(),this.strokeFill=this.createStrokeFill(),this.strokeGraphics=this.createStrokeGraphics(),this.ctx.timingTargets.addTarget(this.id,this),(s==null?void 0:s.fillType)===\"solidFill\"&&(this.fillColorFilter.currentColor=s.color,this.fillColorFilter.designColor=s.color),((o=a==null?void 0:a.fill)===null||o===void 0?void 0:o.fillType)===\"solidFill\"&&(this.strokeColorFilter.currentColor=a.fill.color,this.strokeColorFilter.designColor=a.fill.color),this.updateTransform(this.json),e.textBody&&(this.text=new bP(e.textBody,this.ctx,e.textBody.iterateType,{x:this.designGlobalPosition.x,y:this.designGlobalPosition.y})),this.container.hitArea=new E0(1,1,this.json.width,this.json.height)}get interactiveContainer(){return this.renderContainer}get strokeActive(){var e,t,n,r,o,s,a;return this.strokeFill.displayObject?((n=(t=(e=this.strokeFill.displayObject)===null||e===void 0?void 0:e.filters)===null||t===void 0?void 0:t.length)!==null&&n!==void 0?n:-1)>0:((a=(s=(o=(r=this.strokeGraphics)===null||r===void 0?void 0:r.displayObject)===null||o===void 0?void 0:o.filters)===null||s===void 0?void 0:s.length)!==null&&a!==void 0?a:-1)>0}set strokeActive(e){var t,n,r,o,s,a;const{displayObject:l}=this.strokeFill;e?l&&((n=(t=l.filters)===null||t===void 0?void 0:t.indexOf(this.strokeColorFilter))!==null&&n!==void 0?n:-1)<0?l.filters=[this.strokeColorFilter]:((r=this.strokeGraphics)===null||r===void 0?void 0:r.displayObject)&&((s=(o=this.strokeGraphics.displayObject.filters)===null||o===void 0?void 0:o.indexOf(this.strokeColorFilter))!==null&&s!==void 0?s:-1)<0&&(this.strokeGraphics.displayObject.filters=[this.strokeColorFilter]):l?l.filters=[]:!((a=this.strokeGraphics)===null||a===void 0)&&a.displayObject&&(this.strokeGraphics.displayObject.filters=[])}get fillActive(){var e,t,n,r,o,s,a;return this.backgroundFill.displayObject?((n=(t=(e=this.backgroundFill.displayObject)===null||e===void 0?void 0:e.filters)===null||t===void 0?void 0:t.length)!==null&&n!==void 0?n:-1)>0:((a=(s=(o=(r=this.backgroundGraphics)===null||r===void 0?void 0:r.displayObject)===null||o===void 0?void 0:o.filters)===null||s===void 0?void 0:s.length)!==null&&a!==void 0?a:-1)>0}set fillActive(e){var t,n,r,o,s,a;e?this.backgroundFill.displayObject&&((n=(t=this.backgroundFill.displayObject.filters)===null||t===void 0?void 0:t.indexOf(this.fillColorFilter))!==null&&n!==void 0?n:-1)<0?this.backgroundFill.displayObject.filters=[this.fillColorFilter]:((r=this.backgroundGraphics)===null||r===void 0?void 0:r.displayObject)&&((s=(o=this.backgroundGraphics.displayObject.filters)===null||o===void 0?void 0:o.indexOf(this.fillColorFilter))!==null&&s!==void 0?s:-1)<0&&(this.backgroundGraphics.displayObject.filters=[this.fillColorFilter]):this.backgroundFill.displayObject?this.backgroundFill.displayObject.filters=[]:!((a=this.backgroundGraphics)===null||a===void 0)&&a.displayObject&&(this.backgroundGraphics.displayObject.filters=[])}getTextElement(e,t){var n,r;return(r=(n=this.text)===null||n===void 0?void 0:n.getTextElement(e,t))!==null&&r!==void 0?r:null}getBgElement(){return this}getIterateEntry(e,t,n){return t===0?this:e===\"el\"?(this.ctx.eventHub.emit(\"IterateTimeNodeEnd\",n),null):this.text?this.text.getIterateEntry(t-1,n)||null:(this.ctx.eventHub.emit(\"IterateTimeNodeEnd\",n),null)}createStrokeGraphics(){var e,t,n,r;const{id:o,geometry:s,lineStyle:a}=this.json,{width:l,height:u,pivot:h}=(s==null?void 0:s.lineTransform)||Lu,d=l||this.json.width,p=u||this.json.height,m=((e=a==null?void 0:a.fill)===null||e===void 0?void 0:e.fillType)===\"solidFill\"?a.fill.color:null;return a&&((t=a.fill)===null||t===void 0?void 0:t.fillType)!==\"noFill\"?new Zw(o+\"-path-graphics\",this.ctx,(n=s==null?void 0:s.paths)!==null&&n!==void 0?n:[],(r=s==null?void 0:s.hash)!==null&&r!==void 0?r:\"\",h||{x:0,y:0},d,p,a,!1,null,m):null}createStrokeFill(){const[e,t]=this.calculateFillObjectOffset(),{geometry:n,lineStyle:r,width:o,height:s}=this.json,a=(n==null?void 0:n.lineTransform)||Lu,l=Object(H.isNumber)(r==null?void 0:r.width)?r.width:1;return new Da(this.ctx,r==null?void 0:r.fill,(a.width||o)+l+e,Math.max((a.height||s)+l,t),{useFilter:!1,useSlideBackgroundFill:!1})}createBackgroundGraphics(){var e;const{geometry:t,lineStyle:n,fillStyle:r,id:o}=this.json,{width:s,height:a,pivot:l}=(t==null?void 0:t.lineTransform)||Lu,u=s||this.json.width,h=a||this.json.height,d=(r==null?void 0:r.fillType)===\"solidFill\"?r.color:null;return r&&r.fillType!==\"noFill\"||this.json.isPicture?new Zw(o+\"-bg-graphics\",this.ctx,(e=t==null?void 0:t.paths)!==null&&e!==void 0?e:[],(t==null?void 0:t.hash)||\"\",l||{x:0,y:0},u,h,n,!0,d,null):null}createBackgroundFill(){var e,t;const{fillStyle:n,width:r,height:o,lineStyle:s,geometry:a}=this.json,l=(a==null?void 0:a.fillTransform)||Lu;return new Da(this.ctx,n,(l.width||r)+((e=s==null?void 0:s.width)!==null&&e!==void 0?e:0),(l.height||o)+((t=s==null?void 0:s.width)!==null&&t!==void 0?t:0),{useFilter:!1,useSlideBackgroundFill:this.json.useBgFill})}createBackground(){var e,t,n,r,o,s,a,l;const{pivot:u,width:h,height:d}=((e=this.json.geometry)===null||e===void 0?void 0:e.fillTransform)||Lu,{displayObject:p}=this.backgroundFill;p?(this.json.useBgFill&&((n=this.backgroundGraphics)===null||n===void 0?void 0:n.displayObject)?(this.needCacheAsBitMap=!0,p.mask=this.backgroundGraphics.displayObject,p.pivot.x=((r=this.json.position)===null||r===void 0?void 0:r.x)||0,p.pivot.y=((o=this.json.position)===null||o===void 0?void 0:o.y)||0,this.container.addChild(this.backgroundGraphics.displayObject)):((s=this.json.fillStyle)===null||s===void 0?void 0:s.fillType)===\"gifFill\"?(p.height=d||this.designHeight,p.width=h||this.designWidth,p instanceof o_&&p.play(),!((a=this.backgroundGraphics)===null||a===void 0)&&a.isNeedMask(p.width,p.height)&&(p.mask=this.backgroundGraphics.displayObject,this.backgroundGraphics.displayObject&&this.container.addChild(this.backgroundGraphics.displayObject))):!((l=this.backgroundGraphics)===null||l===void 0)&&l.isNeedMask(p.width,p.height)&&(this.needCacheAsBitMap=!0,p.mask=this.backgroundGraphics.displayObject,this.backgroundGraphics.displayObject&&this.container.addChild(this.backgroundGraphics.displayObject)),p.x=u.x,p.y=u.y,this.container.addChild(p)):this.backgroundFill.hasFill&&((t=this.backgroundGraphics)===null||t===void 0?void 0:t.displayObject)&&this.container.addChild(this.backgroundGraphics.displayObject)}createPathFill(){var e,t,n;const{displayObject:r}=this.strokeFill,o=(e=this.strokeGraphics)===null||e===void 0?void 0:e.displayObject,[s,a]=this.calculateFillObjectOffset();r?(((t=this.strokeGraphics)===null||t===void 0?void 0:t.isNeedMask(r.width,r.height))&&o&&(this.needCacheAsBitMap=!0,r.pivot.x=o.pivot.x,r.pivot.y=o.pivot.y,o.pivot.x=0,o.pivot.y=0,r.mask=o,r.addChild(o),r.position.x=-s/2,r.position.y=-a/2,o.position.x=s/2,o.position.y=a/2),this.container.addChild(r)):this.strokeFill.hasFill&&((n=this.strokeGraphics)===null||n===void 0?void 0:n.displayObject)&&this.container.addChild(this.strokeGraphics.displayObject)}createFilledPathMask(){var e,t,n;const r=((t=(e=this.json.geometry)===null||e===void 0?void 0:e.paths)===null||t===void 0?void 0:t.filter(o=>o.fill!==\"none\"&&o.fill!==\"norm\"))||[];for(const o of r){const s=this.ctx.graphicsTexture.getGraphicsData(o.id);if(s){const a=new lr(s.texture);a.pivot.x=s.pivot.x,a.pivot.y=s.pivot.y;const l=this.backgroundFill.getClonedDisplayObject(),u=(n=this.backgroundGraphics)===null||n===void 0?void 0:n.getClonedDisplayObject(),h=l||u;h&&(this.backgroundFill.displayObject&&(h.pivot.x=this.backgroundFill.displayObject.pivot.x,h.pivot.y=this.backgroundFill.displayObject.pivot.y),h.mask=a,h.filters=[tP[o.fill]],this.needCacheAsBitMap=!0,this.container.addChild(h),this.container.addChild(a))}}}createArrow(){if(!this.arrowList.length)return;const e=new Ki,t=this.strokeFill.getClonedDisplayObject(),[n,r]=this.calculateFillObjectOffset();this.arrowList.forEach(s=>{const a=this.ctx.graphicsTexture.getGraphicsData(s.graphicsId);if(a){const{texture:l}=a,u=new lr(l);u.pivot.x=s.pivot.x,u.pivot.y=s.pivot.y,u.position.x=s.position.x+s.pivot.x,u.position.y=s.position.y+s.pivot.y,u.rotation=s.rotate/180*Math.PI,e.addChild(u)}}),this.arrowRenderTexture=Ao.create({width:e.width,height:e.height,resolution:1}),this.ctx.renderer.render(e,{renderTexture:this.arrowRenderTexture});const o=new lr;o.texture=this.arrowRenderTexture,t&&(t.mask=o,t.position.x=-n/2,t.position.y=-r/2,o.position.x=-n/2,o.position.y=-r/2,this.container.addChild(t),this.container.addChild(o))}generateArrowList(){var e,t;const{lineArrowList:n,lineStyle:r,id:o}=this.json,s=((e=r==null?void 0:r.fill)===null||e===void 0?void 0:e.fillType)===\"solidFill\"?r.fill.color:null;(t=n||[])===null||t===void 0||t.forEach((a,l)=>{var u,h;const d=new AP(Object.assign(Object.assign({},a),{fillStyle:r==null?void 0:r.fill,lineWidth:(u=r==null?void 0:r.width)!==null&&u!==void 0?u:0}));d.graphicsId=`${o}-arrow-${l}-graphics`,d.textureId=`${o}-arrow-${l}-fill`,this.ctx.graphicsTexture.addGraphics(d.graphicsId,(h=d.paths)!==null&&h!==void 0?h:[],d.hash,{x:0,y:0},d.width,d.height,void 0,this.ctx.objectPoolGroup,!0,s,null),this.arrowList.push(d)})}calculateFillObjectOffset(){let[e,t]=[0,0];return this.arrowList.length&&(e=this.arrowList.reduce((n,r)=>Math.max(n,r.width),0),t=this.arrowList.reduce((n,r)=>Math.max(n,r.height),0)),[e,t]}preRender(e){var t,n,r;const{lineStyle:o,geometry:s}=this.json,{width:a,height:l}=(s==null?void 0:s.lineTransform)||Lu,u=a||this.json.width,h=l||this.json.height,d=((t=s==null?void 0:s.paths)===null||t===void 0?void 0:t.filter(m=>m.fill!==\"none\"&&m.fill!==\"norm\"))||[],p=((n=o==null?void 0:o.fill)===null||n===void 0?void 0:n.fillType)===\"solidFill\"?o.fill.color:null;e.addSubMTask(()=>g_(this,void 0,void 0,function*(){for(const m of d)this.ctx.graphicsTexture.addGraphics(m.id,[m],m.hash,((s==null?void 0:s.lineTransform)||Lu).pivot,u,h,o,this.ctx.objectPoolGroup,!0,null,p)})),(r=this.text)===null||r===void 0||r.createParagraphs(this.json.id,e)}subClassRender(){}setupEffect(){const{effectList:e}=this.json;if(e&&e.length>0){const t=[];return e.forEach(n=>{n.type===\"reflection\"&&(this.filterAreaJustifies.push(r=>(r.height*=2,r)),t.push(new MP.Reflection(n)))}),this.ctx.ticker.add(this.updateFilterArea,void 0,-20),this.renderContainer.filters=t,!0}return!1}render(e){e.addSubMTask(()=>g_(this,void 0,void 0,function*(){var t,n;(t=this.strokeGraphics)===null||t===void 0||t.render(),(n=this.backgroundGraphics)===null||n===void 0||n.render(),this.createBackground(),this.subClassRender(),this.createFilledPathMask(),this.createPathFill(),this.createArrow()})),this.text&&this.text.render(e),e.addSubMTask(()=>g_(this,void 0,void 0,function*(){var t,n,r,o,s,a;if(((t=this.json.textBody)===null||t===void 0?void 0:t.iterateType)===\"wd\"||((n=this.json.textBody)===null||n===void 0?void 0:n.iterateType)===\"lt\")this.renderContainer.addChild(this.container),this.text&&(this.text.container.position.x=((o=(r=this.json.position)===null||r===void 0?void 0:r.x)!==null&&o!==void 0?o:0)+this.text.x,this.text.container.position.y=((a=(s=this.json.position)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0)+this.text.y,this.renderContainer.addChild(this.text.container));else{if(this.text){if(Object(H.isBoolean)(this.json.textRotateWithShape)&&!this.json.textRotateWithShape){const l=this.json.rotation||0;this.text.container.rotation=-l;const{width:u}=this.text;this.text.container.position.x=u}this.container.addChild(this.text.container)}this.renderContainer.addChild(this.container)}if(this.needCacheAsBitMap,this.json.id===\"background\"&&this.ctx.hasBackgroundFillShape){const l=Ao.create({width:this.json.width,height:this.json.height,resolution:Math.ceil(this.ctx.renderer.resolution)});this.ctx.renderer.render(this.renderContainer,{renderTexture:l}),this.ctx.bgTexture=l}}))}clearOnSlideChange(){}initOnReuse(){}destroy(){var e,t,n,r;(e=this.text)===null||e===void 0||e.destroy(),this.fillColorFilter.destroy(),this.strokeColorFilter.destroy(),this.backgroundFill.destroy(),(t=this.backgroundGraphics)===null||t===void 0||t.destroy(),this.strokeFill.destroy(),(n=this.strokeGraphics)===null||n===void 0||n.destroy(),this.renderContainer.destroy(),(r=this.arrowRenderTexture)===null||r===void 0||r.destroy(!0),this.arrowList=[]}}var v_=function(i,e,t,n){return new(t||(t=Promise))(function(r,o){function s(u){try{l(n.next(u))}catch(h){o(h)}}function a(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof t?h:new t(function(d){d(h)})).then(s,a)}l((n=n.apply(i,e||[])).next())})};function Fa(i,e){for(const t in e)i.style[t]=e[t]}class Ep{constructor(e){var t,n;this.progress=document.createElement(\"div\"),this.totalTime=document.createElement(\"span\"),this.playButton=document.createElement(\"div\"),this.pauseButton=document.createElement(\"div\"),this.currentTime=document.createElement(\"span\"),this.mediaController=document.createElement(\"div\"),this.currentProgress=document.createElement(\"div\"),this.medianIsEnd=!1,this.playCallBackList=[],this.duration=0,this.start=0,this.end=0,this.changeMediaProgress=r=>{r.stopPropagation();const o=r.offsetX/this.progress.clientWidth*this.duration;this.jumpToTime(o),this.medianIsEnd=!1,this.ctx.eventHub.emit(kt.mediaSeek,{id:this.targetId,time:this.media.currentTime-this.start,isPlaying:this.media.isPlaying})},this.jumpToTime=(r=0)=>{const o=Math.floor(r)+this.start;this.media.currentTime!==o&&(this.media.currentTime=o)},this.showController=r=>{r.stopPropagation(),this.show()},this.getMediaDuration=()=>{this.duration&&!Number.isNaN(this.duration)||(this.duration=this.media.duration,this.start&&(this.duration-=this.start,this.jumpToTime()),this.end&&(this.duration-=this.end)),this.totalTime.innerText=Ep.formatTime(this.duration)},this.playMedia=()=>v_(this,void 0,void 0,function*(){this.playButton.style.display=\"none\",this.pauseButton.style.display=\"block\",yield this.media.play(),this.medianIsEnd&&(this.medianIsEnd=!1,this.jumpToTime()),this.playCallBackList.forEach(r=>{r()})}),this.pauseMedia=()=>v_(this,void 0,void 0,function*(){this.playButton.style.display=\"block\",this.pauseButton.style.display=\"none\",yield this.media.pause()}),this.onMouseOut=r=>{r.stopPropagation(),this.mediaController.style.display=\"none\"},this.mediaTimeUpdate=()=>v_(this,void 0,void 0,function*(){const r=this.media.currentTime-this.start;this.duration>0&&(r>this.duration||this.media.ended)&&(yield this.pauseMedia(),this.medianIsEnd=!0),this.currentTime.innerText=Ep.formatTime(r),this.currentProgress.style.flex=(r/this.duration).toString()}),this.onPauseMedia=()=>{this.playButton.style.display=\"block\",this.pauseButton.style.display=\"none\"},this.onPlayMedia=()=>{this.playButton.style.display=\"none\",this.pauseButton.style.display=\"block\",this.playCallBackList.forEach(r=>{r()})},this.playMediaFromCtrl=()=>{this.ctx.eventHub.emit(kt.mediaPlay,{id:this.targetId,time:this.media.currentTime}),this.playMedia()},this.pauseMediaFromCtrl=()=>{this.ctx.eventHub.emit(kt.mediaPause,{id:this.targetId,time:this.media.currentTime}),this.pauseMedia()},this.targetId=e.targetId,this.ctx=e.ctx,this.height=e.height,this.width=e.width,this.target=e.target,this.media=e.media,this.info=e.info,this.canvasElement=e.canvasElement,this.getMedianContainer(),this.createMediaController(),this.info.cut&&(this.start=(t=this.info.cut.start)!==null&&t!==void 0?t:0,this.end=(n=this.info.cut.end)!==null&&n!==void 0?n:0)}getMedianContainer(){var e;let t=(e=this.canvasElement.parentElement)===null||e===void 0?void 0:e.querySelector(\".median-container\");t||(t=document.createElement(\"div\"),t.className=\"median-container\",this.canvasElement.parentElement.appendChild(t)),this.container=t}static formatTime(e){let t=\"00:00\";if(e){const n=Math.floor(e/60),r=String(n<0?0:n).padStart(2,\"0\"),o=Math.floor(e%60);t=`${r}:${String(o<0?0:o).padStart(2,\"0\")}`}return t}createButton(){const e={marginLeft:\"15px\",marginRight:\"10px\",fontSize:\"0\",height:\"20px\"};Fa(this.playButton,Object.assign(Object.assign({},e),{display:\"block\"}));const t=document.createElement(\"img\");Fa(t,{height:\"20px\"}),t.src=\"https://convertcdn.netless.link/publicFiles/icon/play.png\",this.playButton.appendChild(t),Fa(this.pauseButton,Object.assign(Object.assign({},e),{display:\"none\"}));const n=document.createElement(\"img\");Fa(n,{height:\"20px\"}),n.src=\"https://convertcdn.netless.link/publicFiles/icon/pause.png\",this.pauseButton.appendChild(n)}createTimer(){const e=document.createElement(\"div\");Fa(e,{width:\"100px\"}),this.currentTime.innerText=\"00:00\";const t=document.createElement(\"span\");return t.innerText=\"/\",e.append(this.currentTime,t,this.totalTime),e}createProgress(){Fa(this.progress,{flex:\"1\",position:\"relative\",marginRight:\"10px\"});const e=document.createElement(\"div\");Fa(e,{background:\"#D9D9D9\",position:\"relative\",height:\"10px\",display:\"flex\"}),this.progress.appendChild(e),Fa(this.currentProgress,{background:\"#4F4F4F\",top:\"0px\",left:\"0\",height:\"10px\",flex:\"0\"}),e.appendChild(this.currentProgress)}bindEvent(){this.mediaController.addEventListener(\"mouseover\",this.showController,!1),this.mediaController.addEventListener(\"mouseout\",this.onMouseOut,!1),this.progress.addEventListener(\"mousedown\",this.changeMediaProgress,!1),this.playButton.addEventListener(\"click\",this.playMediaFromCtrl,!1),this.pauseButton.addEventListener(\"click\",this.pauseMediaFromCtrl,!1),this.media.on(\"durationchange\",this.getMediaDuration,!1),this.media.on(\"timeupdate\",this.mediaTimeUpdate,!1),this.media.on(\"pause\",this.onPauseMedia,!1),this.media.on(\"play\",this.onPlayMedia,!1)}setControllerPosition(){var e;const{target:t}=this,{stageWidth:n,stageHeight:r}=this.ctx,o=t.getGlobalPosition(),s=Number((e=this.container)===null||e===void 0?void 0:e.getAttribute(\"data-scale\")),a=n*s,l=1/s*(300>a?a/300:1);o.y=o.y+this.height-50,o.x=Math.max(o.x,0),o.x=Math.min(o.x,n-300*l),o.y=Math.max(o.y,0),o.y=Math.min(o.y,r-50),Fa(this.mediaController,{height:\"50px\",borderRadius:\"25px\",width:\"300px\",flexDirection:\"row\",alignItems:\"center\",position:\"absolute\",left:o.x+\"px\",top:o.y+\"px\",display:\"none\",background:\"#fff\",zIndex:\"2\",border:\"1px solid #ccc\",transform:`scale(${l})`,transformOrigin:\"0 100%\"})}createMediaController(){this.setControllerPosition(),this.createButton();const e=this.createTimer();this.createProgress(),this.mediaController.append(this.playButton,this.pauseButton,e,this.progress),this.container.appendChild(this.mediaController),this.bindEvent()}addPlayCallBack(e){this.playCallBackList.push(e)}unbindEvent(){this.mediaController.removeEventListener(\"mouseover\",this.showController,!1),this.progress.removeEventListener(\"mousedown\",this.changeMediaProgress,!1),this.playButton.removeEventListener(\"click\",()=>this.playMedia(),!1),this.pauseButton.removeEventListener(\"click\",()=>this.pauseMedia(),!1),this.media.removeListener(\"durationchange\",this.getMediaDuration,!1),this.media.removeListener(\"timeupdate\",this.mediaTimeUpdate,!1),this.media.removeListener(\"pause\",this.onPauseMedia,!1),this.media.removeListener(\"play\",this.onPlayMedia,!1)}show(){this.setControllerPosition(),this.mediaController.style.display=\"flex\"}hide(){this.mediaController.style.display=\"none\"}destroy(){var e;this.unbindEvent(),this.playCallBackList=[],(e=this.container)===null||e===void 0||e.removeChild(this.mediaController)}}var RP=v(50);class __ extends O.a{constructor(e){super(),this.lastTime=-1,this.howl=null,this.rctClient=null,Fr.RtcAudioClazz?(this.rctClient=new Fr.RtcAudioClazz(e),this.rctClient.on(\"load\",()=>this.emit(\"load\")),this.rctClient.on(\"pause\",()=>this.emit(\"pause\")),this.rctClient.on(\"play\",()=>this.emit(\"play\"))):(this.howl=new RP.Howl({src:[e]}),this.howl.on(\"load\",()=>this.emit(\"load\")),this.howl.on(\"pause\",()=>this.emit(\"pause\")),this.howl.on(\"play\",()=>this.emit(\"play\")))}startTimeChangeEmit(){this.currentTime!==this.lastTime&&(this.lastTime=this.currentTime,this.emit(\"timeupdate\")),this.isEnded||requestAnimationFrame(()=>this.startTimeChangeEmit())}play(){var e,t;this.lastTime=-1,(e=this.howl)===null||e===void 0||e.play(),(t=this.rctClient)===null||t===void 0||t.play(),this.startTimeChangeEmit()}pause(){var e,t;(e=this.howl)===null||e===void 0||e.pause(),(t=this.rctClient)===null||t===void 0||t.pause()}stop(){var e;(e=this.howl)===null||e===void 0||e.stop(),this.rctClient&&(this.rctClient.pause(),this.rctClient.currentTime=0)}destroy(){var e,t,n,r,o,s,a;(e=this.howl)===null||e===void 0||e.pause(),(t=this.howl)===null||t===void 0||t.unload(),(n=this.rctClient)===null||n===void 0||n.pause(),(r=this.rctClient)===null||r===void 0||r.destroy(),(o=this.rctClient)===null||o===void 0||o.removeAllListeners(\"load\"),(s=this.rctClient)===null||s===void 0||s.removeAllListeners(\"play\"),(a=this.rctClient)===null||a===void 0||a.removeAllListeners(\"pause\")}get currentTime(){return this.rctClient?this.rctClient.currentTime:this.howl?this.howl.seek():-1}set currentTime(e){this.rctClient?this.rctClient.currentTime=e:this.howl&&this.howl.seek(e)}get duration(){return this.rctClient?this.rctClient.duration:this.howl?this.howl.duration():0}get isEnded(){return Math.abs(this.currentTime-this.duration)<.001}get isPaused(){return this.rctClient?this.rctClient.isPaused:!!this.howl&&this.howl.playing()}}var CP=function(i,e,t,n){return new(t||(t=Promise))(function(r,o){function s(u){try{l(n.next(u))}catch(h){o(h)}}function a(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof t?h:new t(function(d){d(h)})).then(s,a)}l((n=n.apply(i,e||[])).next())})};class PP extends O.a{constructor(e){var t,n;super(),this.type=\"video\",this.sprite=new lr,this.isPlaying=!1,this.id=e.id,this.video=e.video,this.start=(t=e.video.cut)===null||t===void 0?void 0:t.start,this.end=(n=e.video.cut)===null||n===void 0?void 0:n.end,this.container=e.container,this.ctx=e.ctx,this.ctx.medias[this.id]=this,this.videoResource=new Pb(this.video.src,{autoLoad:!0,autoPlay:!1,updateFPS:30,crossorigin:!0});const r=this.video.src.replace(/4$/,\"3\");this.rtcAudio=new __(r);const{video:o,width:s,height:a,target:l}=e;this.controller=new Ep({targetId:e.id,ctx:e.ctx,width:s,height:a,target:l,media:this,info:o,canvasElement:e.canvasElement}),this.controller.addPlayCallBack(()=>{this.sprite.width=s,this.sprite.height=a,this.ctx.clock.setTimeout(()=>{this.sprite.visible=!0},50)});const u=new Cn(null,{height:a,width:s});u.resource=this.videoResource,this.videoResource.bind(u),this.sprite=new lr,this.sprite.visible=!1,this.sprite.texture=new rn(u),this.sprite.interactive=!0,this.container.addChild(this.sprite),this.sprite.on(\"mouseover\",h=>{h.stopPropagation(),this.controller.show()}),this.sprite.on(\"mouseout\",h=>{h.stopPropagation(),this.controller.hide()}),[\"durationchange\",\"timeupdate\",\"pause\",\"play\"].forEach(h=>{this.videoResource.source.addEventListener(h,()=>{h!==\"timeupdate\"||this.isPlaying||this.pause(),this.emit(h)})})}get currentTime(){var e,t;return(t=(e=this.videoResource.source)===null||e===void 0?void 0:e.currentTime)!==null&&t!==void 0?t:0}set currentTime(e){this.videoResource.source&&(this.videoResource.source.currentTime=e)}get paused(){var e,t;return(t=(e=this.videoResource.source)===null||e===void 0?void 0:e.paused)===null||t===void 0||t}get ended(){var e,t;return(t=(e=this.videoResource.source)===null||e===void 0?void 0:e.ended)===null||t===void 0||t}get duration(){var e,t;return(t=(e=this.videoResource.source)===null||e===void 0?void 0:e.duration)!==null&&t!==void 0?t:0}showController(){this.controller.show()}hideController(){this.controller.hide()}play(){var e;return CP(this,void 0,void 0,function*(){this.isPlaying=!0,yield this.load(),yield this.ctx.clock.waitUntil(()=>{const n=this.videoResource.source;return!!(n&&n.videoWidth>0)},3e3);const t=this.videoResource.source;t&&t.videoWidth<=0||(Fr.RtcAudioClazz&&(this.rtcAudio.play(),this.videoResource.source.volume=0),yield(e=this.videoResource.source)===null||e===void 0?void 0:e.play())})}load(){return this.videoResource.load()}pause(){var e;this.isPlaying=!1,Fr.RtcAudioClazz&&this.rtcAudio.pause(),(e=this.videoResource.source)===null||e===void 0||e.pause()}togglePause(){this.isPlaying?this.pause():this.play()}seek(e){this.controller.jumpToTime(e)}stop(){this.seek(0),this.pause()}destroy(){var e;this.sprite.interactive=!1,this.sprite.destroy({texture:!0,baseTexture:!0}),(e=this.videoResource)===null||e===void 0||e.destroy(),this.rtcAudio.destroy(),this.controller.destroy()}}var IP=function(i,e,t,n){return new(t||(t=Promise))(function(r,o){function s(u){try{l(n.next(u))}catch(h){o(h)}}function a(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof t?h:new t(function(d){d(h)})).then(s,a)}l((n=n.apply(i,e||[])).next())})};class OP extends O.a{constructor(e){super(),this.type=\"audio\",this.isPlaying=!1,this.id=e.id,this.audio=e.audio,this.audioPlayer=new __(this.audio.src),e.audio.cut&&(this.start=e.audio.cut.start,this.end=e.audio.cut.end),this.ctx=e.ctx,this.ctx.medias[this.id]=this;const{width:t,height:n,target:r}=e;this.controller=new Ep({targetId:e.id,ctx:e.ctx,height:n,width:t,target:r,media:this,info:this.audio,canvasElement:e.canvasElement}),this.audioPlayer.on(\"load\",()=>this.emit(\"durationchange\")),this.audioPlayer.on(\"timeupdate\",()=>this.emit(\"timeupdate\")),this.audioPlayer.on(\"pause\",()=>this.emit(\"pause\")),this.audioPlayer.on(\"play\",()=>this.emit(\"play\"))}get currentTime(){return this.audioPlayer.currentTime}set currentTime(e){this.audioPlayer.currentTime=e}get paused(){return this.audioPlayer.isPaused}get ended(){return this.audioPlayer.isEnded}get duration(){return this.audioPlayer.duration}load(){return Promise.resolve()}showController(){this.controller.show()}hideController(){this.controller.hide()}play(){return IP(this,void 0,void 0,function*(){this.isPlaying=!0,this.audioPlayer.play()})}pause(){this.isPlaying=!1,this.audioPlayer.pause()}togglePause(){this.isPlaying?this.pause():this.play()}seek(e){this.controller.jumpToTime(e)}stop(){this.seek(0),this.pause()}destroy(){this.audioPlayer.pause(),this.controller.destroy()}}class LP extends Kw{constructor(e,t,n,r){super(Object.assign(Object.assign({},e),{type:\"Shape\",useBgFill:!1,textRotateWithShape:!0,isPicture:!0}),t,n,r),this.isInteractiveOutside=!1,this.cmd=new KC(this),this.media=e==null?void 0:e.media,this.picFill=new Da(this.ctx,e.picFill,e.width,e.height,{useFilter:!1,useSlideBackgroundFill:!1})}applyCommand(e,t){var n,r,o,s,a;if(t===\"call\")if(/playFrom\\(([0-9.]+)\\)/.test(e)){const l=e.match(/playFrom\\(([0-9.]+)\\)/),u=Number(l[1]||\"0\");(n=this.mediaPlayer)===null||n===void 0||n.play().then(()=>{var h;(h=this.mediaPlayer)===null||h===void 0||h.seek(u)})}else e===\"custom-pause\"?(r=this.mediaPlayer)===null||r===void 0||r.pause():e===\"togglePause\"?(o=this.mediaPlayer)===null||o===void 0||o.togglePause():e===\"stop\"&&((s=this.mediaPlayer)===null||s===void 0||s.pause(),(a=this.mediaPlayer)===null||a===void 0||a.seek(0))}renderPic(){var e,t,n,r,o;const{displayObject:s}=this.picFill;if(s){const a=(e=this.backgroundGraphics)===null||e===void 0?void 0:e.getClonedDisplayObject();((t=this.backgroundGraphics)===null||t===void 0?void 0:t.isNeedMask(s.width,s.height))&&a&&(s.mask=a,this.container.addChild(a)),s.width=this.designWidth,s.height=this.designHeight,s instanceof o_&&this.ctx.slideScopeEventHub.once(\"slide-render\",l=>{this.ctx.slideIndex===l&&s.play()}),this.container.addChild(s),((n=this.media)===null||n===void 0?void 0:n.type)===\"video\"&&this.media.src?(this.mediaPlayer=new PP({id:this.json.id+\"-video\",ctx:this.ctx,video:this.media,height:this.designHeight,width:this.designWidth,target:s,container:this.container,canvasElement:this.ctx.view}),(r=this.mediaPlayer)===null||r===void 0||r.sprite):((o=this.media)===null||o===void 0?void 0:o.type)===\"audio\"&&this.media.src&&(this.mediaPlayer=new OP({id:this.json.id+\"-audio\",ctx:this.ctx,audio:this.media,height:this.designHeight,width:this.designWidth,target:s,canvasElement:this.ctx.view})),this.mediaPlayer&&(this.isInteractiveOutside=this.container.interactive,this.container.interactive=!0,this.container.on(\"mouseover\",()=>{this.mediaPlayer.showController()}),this.container.on(\"mouseout\",()=>{this.mediaPlayer.hideController()},!1))}}preRender(e){super.preRender(e)}subClassRender(){this.renderPic()}clearOnSlideChange(){super.clearOnSlideChange(),this.mediaPlayer&&(this.container.interactive=!1,this.mediaPlayer.stop(),this.mediaPlayer.hideController())}initOnReuse(){super.initOnReuse(),this.mediaPlayer&&(this.container.interactive=!0)}destroy(){this.mediaPlayer&&(this.picFill.displayObject&&!this.isInteractiveOutside&&(this.container.interactive=!1),this.mediaPlayer.destroy(),this.mediaPlayer=void 0),this.picFill.destroy()}}var hg=function(i,e,t,n){return new(t||(t=Promise))(function(r,o){function s(u){try{l(n.next(u))}catch(h){o(h)}}function a(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof t?h:new t(function(d){d(h)})).then(s,a)}l((n=n.apply(i,e||[])).next())})};class y_ extends h_{constructor(e,t,n,r,o){super(e,t,n),this.children=[],this.cacheSprite=new lr,this.cacheContainer=new Ki,this.json=e,this.json.fillStyle&&this.json.fillStyle.fillType===\"groupFill\"&&r&&(this.json.fillStyle=r),this.container.name=e.id,this.cacheContainer.name=e.id+\"-cache-container\",this.ctx.timingTargets.addTarget(e.id,this),this.updateTransform(this.json),this.fillObject=new Da(this.ctx,e.fillStyle,e.width,e.height,{useFilter:!1,useSlideBackgroundFill:!1}),this.createChildren(o)}createChildren(e){var t,n,r,o;const s={x:(n=(t=this.json.position)===null||t===void 0?void 0:t.x)!==null&&n!==void 0?n:0,y:(o=(r=this.json.position)===null||r===void 0?void 0:r.y)!==null&&o!==void 0?o:0};for(let a=0,l=this.json.children.length;a<l;a++)e.addSubMTask(()=>hg(this,void 0,void 0,function*(){const u=this.json.children[a];let h=null;(u==null?void 0:u.type)===\"Shape\"?h=new Kw(u,this.ctx,s,this.json.fillStyle):(u==null?void 0:u.type)===\"Picture\"?h=new LP(u,this.ctx,s,this.json.fillStyle):(u==null?void 0:u.type)===\"Container\"&&(h=new y_(u,this.ctx,s,this.json.fillStyle,e)),h&&this.children.push(h)}))}get interactiveContainer(){return this.container}get renderContainer(){return this.container}preRender(e){for(const t of this.children)e.addSubMTask(()=>hg(this,void 0,void 0,function*(){t.preRender(e)}))}getBgElement(){return null}getIterateEntry(e,t,n){return t===0?this:(this.ctx.eventHub.emit(\"IterateTimeNodeEnd\",n),null)}getTextElement(){return null}render(e){for(const t of this.children)t.render(e),e.addSubMTask(()=>hg(this,void 0,void 0,function*(){var n;t.renderContainer&&this.cacheContainer.addChild(t.renderContainer),(t.json.hlinkHover||t.json.hlinkClick)&&((n=t.hyperlink)===null||n===void 0||n.addProxy(this.container))}));e.addSubMTask(()=>hg(this,void 0,void 0,function*(){this.container.addChild(this.cacheContainer)}))}clearOnSlideChange(){this.children.forEach(e=>e.clearOnSlideChange())}initOnReuse(){this.children.forEach(e=>e.initOnReuse())}destroy(){this.cacheSprite&&this.cacheSprite.destroy({texture:!0}),this.children.forEach(e=>e.destroy()),this.container.destroy({children:!0,texture:!0,baseTexture:!0}),this.cacheContainer.destroy({children:!0,texture:!0,baseTexture:!0})}}class Mp extends O.a{constructor(e,t,n,r){super(),this.cond={},this.timeoutIds=[],this.condHandle=o=>{if(o)if(o.delay&&o.delay>0){const s=this.ctx.clock.setTimeout(()=>{o.event&&(this.cond[o.event]=!0,this.detectTrigger())},o.delay);this.timeoutIds.push(s)}else this.cond[o.event]=!0,this.detectTrigger();else this.detectTrigger()},this.id=e,this.ctx=r,this.eventHubs=n,t.forEach(o=>{this.addCond(o)})}setTriggerParams(e){this.triggerParams=e}addCond(e){const t=()=>this.condHandle(e);e.event&&(/^shape/.test(e.event)||/^time/.test(e.event)?(this.cond[e.event]=!1,this.eventHubs.global.addListener(e.event,t)):/^runtime/.test(e.event)?(this.cond[e.event]=!1,this.eventHubs.runtime.addListener(e.event,t)):/^self/.test(e.event)?e.delay&&e.delay>0&&(this.cond[e.event]=!1,this.eventHubs.runtime.addListener(e.event,t)):this.cond[e.event]=!1)}isTrigger(){return Object.keys(this.cond).every(e=>!!this.cond[e])}isTriggerWithoutParent(){return Object.keys(this.cond).filter(e=>e!==\"self\").every(e=>!!this.cond[e])}detectTrigger(){if(Object.keys(this.cond).every(e=>!!this.cond[e])){Object.keys(this.cond).forEach(t=>{this.cond[t]=!1});const e=this.triggerParams;this.triggerParams=void 0,this.emit(\"active\",e)}}reset(){Object.keys(this.cond).forEach(e=>{this.cond[e]=!1}),this.timeoutIds.forEach(e=>this.ctx.clock.clearTimeout(e))}}class NP extends O.a{constructor(e){super(),this.isTimeNodeEndSync=!1,this.interactiveListeners=[],this.runtimeNodeEventHub=new O.a,this._currentSeqIndex=0,this._currentSeqState=\"idle\",this.isForward=!0,this.autoPlay=!1,this.handlePrev=()=>{var d,p,m,g,_,y;this.hasPrev()||!this.isMainSeq?this.currentSeqState===\"idle\"?(this.decrSeqIndex(),(d=this.commonTimeNode.children[this.currentSeqIndex])===null||d===void 0||d.commonTimeNode.seekToStart(),(p=this.commonTimeNode.children[this.currentSeqIndex])===null||p===void 0||p.commonTimeNode.clearSubList(),this.currentSeqState=\"idle\"):this.currentSeqState===\"running\"?((m=this.commonTimeNode.children[this.currentSeqIndex])===null||m===void 0||m.commonTimeNode.seekToStart(),(g=this.commonTimeNode.children[this.currentSeqIndex])===null||g===void 0||g.commonTimeNode.clearSubList(),this.currentSeqState=\"idle\"):this.currentSeqState===\"end\"&&(this.currentSeqIndex>=this.commonTimeNode.children.length&&(this.currentSeqIndex=this.commonTimeNode.children.length-1),(_=this.commonTimeNode.children[this.currentSeqIndex])===null||_===void 0||_.commonTimeNode.seekToStart(),(y=this.commonTimeNode.children[this.currentSeqIndex])===null||y===void 0||y.commonTimeNode.clearSubList(),this.currentSeqState=\"idle\"):this.globalEventHub.emit(\"c:prev slide\")},this.handleNext=()=>{var d,p,m,g;this.isTimeNodeEndSync&&(this.isTimeNodeEndSync=!1,this.currentSeqState=\"idle\",this.currentSeqIndex=0),this.hasNext()||!this.isMainSeq?this.currentSeqState===\"idle\"?(d=this.commonTimeNode.children[this.currentSeqIndex])===null||d===void 0||d.commonTimeNode.startTimeNodeForce():this.currentSeqState===\"running\"?((p=this.commonTimeNode.children[this.currentSeqIndex])===null||p===void 0||p.commonTimeNode.seekToEnd(!1,!0),this.currentSeqState=\"end\",this.incrSeqIndex(),(m=this.commonTimeNode.children[this.currentSeqIndex])===null||m===void 0||m.commonTimeNode.startTimeNodeForce()):this.currentSeqState===\"end\"&&(this.incrSeqIndex(),(g=this.commonTimeNode.children[this.currentSeqIndex])===null||g===void 0||g.commonTimeNode.startTimeNodeForce()):this.globalEventHub.emit(\"c:next slide\")};const{json:t,iterateType:n,isIterate:r,isSub:o,parent:s,ctx:a,eventHub:l,iterateIndex:u,iterateId:h}=e;this.isMainSeq=t.ctn.nodeType===\"mainSeq\",this.isInteractiveSeq=t.ctn.nodeType===\"interactiveSeq\",this.id=t.ctn.id,this.isIterate=r,this.json=t,this.ctx=a,this.globalEventHub=l,this.commonTimeNode=new kc({json:t.ctn,isSub:o,eventHubs:{global:l,runtime:this.runtimeNodeEventHub},ctx:a,parent:s,isIterate:!1,iterateType:n,iterateIndex:u,iterateId:h}),this.bindShapeEvent(),this.nextConds=new Mp(\"mainSeq\",t.nextCondLst,{global:l,runtime:this.runtimeNodeEventHub},this.ctx),this.prevConds=new Mp(\"mainSeq\",t.preCondLst,{global:l,runtime:this.runtimeNodeEventHub},this.ctx),this.commonTimeNode.on(\"timeNodeRestart\",()=>{this.currentSeqIndex=0,this.currentSeqState=\"idle\"}),this.commonTimeNode.on(\"childTimeNodeStart\",d=>{const p=this.commonTimeNode.children.findIndex(m=>m.commonTimeNode.uuid===d.id);p>=0&&(this.currentSeqIndex=p),this.currentSeqState=\"running\",this.isMainSeq&&this.ctx.eventHub.emit(kt.mainSeqStepStart,p)}),this.commonTimeNode.on(\"childTimeNodeEnd\",d=>{const p=this.commonTimeNode.children.findIndex(m=>m.commonTimeNode.uuid===d.id);p>=0&&(this.currentSeqIndex=p),this.currentSeqState=\"end\",this.autoPlay&&this.ctx.clock.setTimeout(()=>{this.handleNext()}),this.isMainSeq&&this.ctx.eventHub.emit(kt.mainSeqStepEnd,p)}),this.commonTimeNode.on(\"timeNodeEndSync\",()=>{this.isTimeNodeEndSync=!0,this.commonTimeNode.resetForRepeat()}),this.commonTimeNode.on(\"timeNodeDestroy\",()=>{this.interactiveListeners.forEach(([d,p])=>{d&&p&&d.interactiveContainer.removeListener(\"pointerdown\",p)}),this.interactiveListeners=[]}),this.nextConds.on(\"active\",()=>{this.handleNext()}),this.prevConds.on(\"active\",this.handlePrev)}get currentSeqIndex(){return this._currentSeqIndex}set currentSeqIndex(e){this._currentSeqIndex=e,this.isMainSeq?this.ctx.eventHub.emit(kt.mainSeqStepChange,e):this.isInteractiveSeq&&this.ctx.eventHub.emit(kt.interactiveSeqStateChange,{id:this.json.ctn.id,state:{step:e,state:this._currentSeqState}})}get currentSeqState(){return this._currentSeqState}set currentSeqState(e){this._currentSeqState=e,this.isMainSeq?this.ctx.eventHub.emit(kt.mainSeqStateChange,e):this.isInteractiveSeq&&this.ctx.eventHub.emit(kt.interactiveSeqStateChange,{id:this.json.ctn.id,state:{step:this._currentSeqIndex,state:e}})}get stepLength(){return this.commonTimeNode.children.length}get currentStep(){return this.currentSeqIndex}get currentState(){return this.currentSeqState}startAutoPlay(){this.autoPlay=!0,this.commonTimeNode.children[0].commonTimeNode.startTimeNodeForce()}incrSeqIndex(){this.currentSeqIndex+1<=this.commonTimeNode.children.length&&(this.currentSeqIndex+=1)}decrSeqIndex(){this.currentSeqIndex-1>=-1&&(this.currentSeqIndex-=1)}hasPrev(){return!(this.currentSeqIndex<=0&&this.currentSeqState===\"idle\")}hasNext(){return!(this.currentSeqIndex>=this.commonTimeNode.children.length||this.currentSeqIndex===this.commonTimeNode.children.length-1&&this.currentSeqState===\"end\")}bindShapeEvent(){this.json.ctn.nodeType===\"interactiveSeq\"&&this.json.nextCondLst.forEach(e=>{if(/^shape/.test(e.event)){const t=e.event.split(\" \")[1];if(t){const n=this.ctx.timingTargets.getTargetById(t);if(n){n.interactiveContainer.interactive=!0,n.interactiveContainer.cursor=\"pointer\";const r=()=>{this.ctx.eventHub.emit(kt.userInput);const o=`shape ${t} onClick`,{mode:s}=this.ctx;s!==\"interactive\"&&s!==\"sync\"||this.ctx.eventHub.emit(kt.interactiveSeqAction,{action:o,seqId:this.json.ctn.id}),s!==\"sync\"&&s!==\"local\"||this.globalEventHub.emit(o)};n.interactiveContainer.on(\"pointerdown\",r),this.interactiveListeners.push([n,r])}}}})}setCurrentStep(e,t){this.isInteractiveSeq&&this.commonTimeNode.applyCount===0&&(this.commonTimeNode.applyCount=1);let n=e;this.commonTimeNode.seekToStart();const{length:r}=this.commonTimeNode.children;if(n===-1&&(n=r-1),n>=0&&n<r)for(let o=0;o<=n;o++){const s=this.commonTimeNode.children[o];o!==n?s.commonTimeNode.seekToEnd(!1,!0):t===\"start\"?s.commonTimeNode.seekToStart():t===\"end\"&&s.commonTimeNode.seekToEnd(!1,!0)}this.currentSeqIndex=n,this.currentSeqState=t===\"start\"?\"idle\":\"end\"}}function ks(i,e,t){const n=e.split(\".\");n.reduce((r,o,s)=>{if(r)return s!==n.length-1?r[o]:void(r[o]=t);console.warn(`${i} not support ${e}`)},i)}function cg(i,e){return e?e.split(\".\").reduce((t,n)=>{if(t)return t[n];console.warn(`${i} not support ${e}`)},i):null}class fl{constructor(e){this.timingTarget=null,this.runtimeNodeEventHub=new O.a,this.onTimeLineStart=()=>{if(this.isConflict){const{target:d}=this.json.cBhvr;if(this.activeWhenConflict===\"next\"){let p=d.id;d.type===\"shape\"&&d.txEl&&(p=`${p}-txEl-${d.txEl.range[0]}`),this.commonTimeNode.isIterate&&(p=`${p}-iterate-${this.commonTimeNode.iterateIndex}`),this.ctx.conflictTimeNodeManager.addRunningTimeNode(p,this.modifyAttrKey,this.commonTimeNode)}else this.activeWhenConflict===\"prev\"&&this.commonTimeNode.dispose()}};const{isIterate:t,isSub:n,json:r,ctx:o,parent:s,eventHub:a,iterateType:l,iterateIndex:u,iterateId:h}=e;this.json=r,this.id=r.cBhvr.ctn.id,this.ctx=o,this.globalEventHub=a,this.commonTimeNode=new kc({json:r.cBhvr.ctn,isSub:n,eventHubs:{global:a,runtime:this.runtimeNodeEventHub},ctx:o,parent:s,isIterate:t,iterateType:l,iterateIndex:u,iterateId:h}),this.timingTarget=this.ctx.timingTargets.getTarget(r.cBhvr.target,t,{type:l,index:u,id:h}),this.commonTimeNode.on(\"seekToStart\",()=>this.onSeekToStart()),this.commonTimeNode.on(\"seekToEnd\",()=>this.onSeekToEnd()),this.commonTimeNode.on(\"timelineStart\",this.onTimeLineStart)}}class DP extends fl{constructor(e){super(e),this.isConflict=!1,this.activeWhenConflict=\"next\",this.startVal=null,this.updateStartValue=()=>{this.timingTarget&&(this.startVal=cg(this.timingTarget,this.json.cBhvr.attrList[0]))},this.onSeekToStart=()=>{const t=this.json.cBhvr.attrList[0];this.startVal!==null&&this.timingTarget&&ks(this.timingTarget,t,this.startVal)},this.onSeekToEnd=()=>{const t=this.json.cBhvr.attrList[0],n=this.json.cBhvr.to||this.json.to;n&&this.timingTarget&&ks(this.timingTarget,t,n)},this.commonTimeNode.on(\"timeNodeStart\",this.updateStartValue),this.commonTimeNode.on(\"timeNodeCreate\",this.updateStartValue),this.commonTimeNode.on(\"timeUpdate\",({duration:t,delta:n})=>{if(n/t>=1){const r=this.json.cBhvr.attrList[0];this.json.cBhvr.attrList.length>1&&console.warn(\"this.json.cBhvr.attrList.length > 0\");const o=this.json.cBhvr.to||this.json.to;o&&this.timingTarget&&ks(this.timingTarget,r,o)}})}get modifyAttrKey(){return this.json.cBhvr.attrList[0]}}var dg=function(i,e,t,n){var r,o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n;if(typeof Reflect==\"object\"&&typeof Reflect.decorate==\"function\")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(r=i[a])&&(s=(o<3?r(s):o>3?r(e,t,s):r(e,t))||s);return o>3&&s&&Object.defineProperty(e,t,s),s};class pg{constructor(e,t){this.math={pi:Math.PI,e:Math.E,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,ceil:Math.ceil,cos:Math.cos,cosh:Math.cosh,deg:n=>n/Math.PI*180,exp:Math.exp,floor:Math.floor,ln:Math.log,max:Math.max,min:Math.min,rad:n=>n/180*Math.PI,rand:Math.random,sin:Math.sin,sinh:Math.sinh,sqrt:Math.sqrt,tan:Math.tan,tanh:Math.tanh},this.timingTarget=t,this.val=e.val.value,this.time=e.time,e.fmla&&(this.fmla=this.parseFmla(e.fmla))}parseFmla(e){let t=e.replace(/#ppt_h/g,`(${this.timingTarget.design_ppt_h})`);return t=t.replace(/#ppt_w/g,`(${this.timingTarget.design_ppt_w})`),t=t.replace(/#ppt_x/g,`(${this.timingTarget.design_ppt_x})`),t=t.replace(/#ppt_y/g,`(${this.timingTarget.design_ppt_y})`),t=t.replace(/ppt_w/g,\"vars.ppt_w\"),t=t.replace(/ppt_h/g,\"vars.ppt_h\"),t=t.replace(/ppt_x/g,\"vars.ppt_x\"),t=t.replace(/ppt_y/g,\"vars.ppt_y\"),t=t.replace(/#/g,\"vars.\"),[\"abs\",\"acos\",\"asin\",\"atan\",\"ceil\",\"cos\",\"cosh\",\"deg\",\"exp\",\"floor\",\"ln\",\"max\",\"min\",\"rad\",\"rand\",\"sin\",\"sinh\",\"sqrt\",\"tan\",\"tanh\",\"pi\",\"e\"].forEach(n=>{const r=new RegExp(`([^a-z])${n}([^a-z])`,\"g\");t=t.replace(r,(o,s,a)=>`${s}math.${n}${a}`)}),new Function(\"vars\",\"math\",\"$\",\"return \"+t)}}class Qw extends pg{constructor(e,t,n){super(e,t),this.value=e.val.value,n&&(this.fmla=this.parseFmla(n))}resolveValue(){return this.value}interpolationFrom(e,t,n){const r=e.resolveValue(n),o=r+(this.resolveValue()-r)*t;return e.fmla?e.fmla(n,this.math,o):o}}dg([ig()],Qw.prototype,\"interpolationFrom\",null);class eS extends pg{constructor(e,t){var n;super(e,t),this.value=(n=e.val)===null||n===void 0?void 0:n.value}interpolationFrom(e,t,n){let r=e.resolveValue(n);return t>this.time&&(r=this.resolveValue()),r}resolveValue(){return this.value||\"\"}}dg([ig()],eS.prototype,\"interpolationFrom\",null);class Bc extends pg{constructor(e,t){super(e,t),this.fn=this.parseFmla(this.val)}resolveValue(e){return this.fn(e,this.math,1)}interpolationFrom(e,t,n){const r=e.resolveValue(n),o=r+(this.resolveValue(n)-r)*t;return e.fmla?e.fmla(n,this.math,o):o}}dg([ig()],Bc.prototype,\"interpolationFrom\",null);class tS extends pg{constructor(e,t){super(e,t),this.value=e.val.value}interpolationFrom(e,t){return bp(e.resolveValue(),this.value,t)}resolveValue(){return this.value}}dg([ig()],tS.prototype,\"interpolationFrom\",null);class FP extends fl{constructor(e){super(e),this.isConflict=!0,this.activeWhenConflict=\"next\",this.startVal=null,this.vars={ppt_x:0,ppt_y:0,ppt_w:0,ppt_h:0},this.keyFrames=[],this.isColorAnim=!1,this.onTimeNodeStart=()=>{this.timingTarget&&(this.startVal=cg(this.timingTarget,this.json.cBhvr.attrList[0]))},this.updateVars=()=>{var t,n,r,o;!((t=this.timingTarget)===null||t===void 0)&&t.ppt_h&&(this.vars.ppt_h=this.timingTarget.ppt_h),!((n=this.timingTarget)===null||n===void 0)&&n.ppt_w&&(this.vars.ppt_w=this.timingTarget.ppt_w),!((r=this.timingTarget)===null||r===void 0)&&r.ppt_x&&(this.vars.ppt_x=this.timingTarget.ppt_x),!((o=this.timingTarget)===null||o===void 0)&&o.ppt_y&&(this.vars.ppt_y=this.timingTarget.ppt_y),this.isColorAnim},this.onTimeUpdate=({duration:t,delta:n})=>{const r=n/t,o=this.keyFrames.findIndex(p=>r<=p[0]),{attrList:s}=this.json.cBhvr;if(o<0){const p=this.keyFrames[this.keyFrames.length-1];return void(this.timingTarget&&s&&s[0]&&ks(this.timingTarget,s[0],p[1].resolveValue(this.vars)))}const a=o-1,l=this.keyFrames[o],u=this.keyFrames[a]||l,h=l[0]-u[0]==0?1:(r-u[0])/(l[0]-u[0]),d=l[1].interpolationFrom(u[1],h,this.vars);this.timingTarget&&s&&s[0]&&ks(this.timingTarget,s[0],d)},this.onSeekToStart=()=>{this.startVal!==null&&this.timingTarget&&ks(this.timingTarget,this.json.cBhvr.attrList[0],this.startVal)},this.onSeekToEnd=()=>{this.onTimeUpdate({duration:1,delta:1,isReverse:!1})},this.initKeyFrames(),this.commonTimeNode.on(\"timeUpdate\",this.onTimeUpdate),this.commonTimeNode.on(\"timelineStart\",this.updateVars),this.commonTimeNode.on(\"timeNodeStart\",this.onTimeNodeStart),this.commonTimeNode.on(\"timeNodeCreate\",this.onTimeNodeStart)}get modifyAttrKey(){return this.json.cBhvr.attrList[0]}initKeyFrames(){var e;const{valueType:t}=this.json;if(this.json.tavLst.length<=0){if(this.json.to){if(this.json.from||this.startVal){const r={time:0,val:{type:\"string\",value:this.json.from||this.startVal.toString()},fmla:\"\"};if(t===\"num\"&&this.timingTarget){const o=new Bc(r,this.timingTarget);this.keyFrames.push([r.time,o])}}const n={time:1,val:{type:\"string\",value:this.json.to},fmla:\"\"};if(t===\"num\"&&this.timingTarget){const r=new Bc(n,this.timingTarget);this.keyFrames.push([n.time,r])}}else if(this.json.by){const n={time:0,val:{type:\"string\",value:this.json.cBhvr.attrList[0]},fmla:\"\"};if(t===\"num\"&&this.timingTarget){const o=new Bc(n,this.timingTarget);this.keyFrames.push([n.time,o])}const r={time:1,val:{type:\"string\",value:(((e=n.val)===null||e===void 0?void 0:e.value)||\"\")+\"+\"+this.json.by},fmla:\"\"};if(t===\"num\"&&this.timingTarget){const o=new Bc(r,this.timingTarget);this.keyFrames.push([r.time,o])}}}if(this.json.tavLst.length>0){for(const n of this.json.tavLst)if(n.val&&this.timingTarget){let r=null;n.val.type===\"string\"?t===\"num\"?r=new Bc(n,this.timingTarget):t===\"str\"&&(r=new eS(n,this.timingTarget)):n.val.type===\"number\"?r=new Qw(n,this.timingTarget):n.val.type===\"color\"?(this.isColorAnim=!0,r=new tS(n,this.timingTarget)):n.val.type===\"boolean\"&&console.warn(\"not implements\"),r&&this.keyFrames.push([n.time,r])}}}}var BP=v(51),kP=v.n(BP),UP=v(52),GP=v.n(UP);class HP extends Nr{constructor(){super(GP.a,kP.a,{percent:0,direction:1,transition:0})}set transition(e){this.uniforms.transition=e}set percent(e){this.uniforms.percent=e}set direction(e){this.uniforms.direction=e}}var zP=v(53),jP=v.n(zP);class VP extends Nr{constructor(){super(void 0,jP.a,{percent:0,transition:1})}set transition(e){this.uniforms.transition=Math.pow(e,e)}set percent(e){this.uniforms.percent=e}}class WP extends fl{constructor(e){var t;super(e),this.filterType=\"\",this.isConflict=!0,this.activeWhenConflict=\"prev\",this.onTimeUpdate=({duration:o,delta:s})=>{const a=s/o;this.filter&&(this.filter.percent=this.commonTimeNode.applyTimeFilter(a)),a>=1&&this.timingTarget&&this.ctx.clock.setTimeout(()=>{this.timingTarget&&(this.timingTarget.container.filters=[])})},this.onSeekToStart=()=>{this.timingTarget&&(this.timingTarget.container.filters=[])},this.onSeekToEnd=()=>{this.timingTarget&&(this.timingTarget.container.filters=[])},this.commonTimeNode.on(\"timelineStart\",()=>{this.filter&&this.timingTarget&&(this.timingTarget.container.filters=[this.filter])}),this.commonTimeNode.on(\"timeUpdate\",this.onTimeUpdate);let n=0;e.json.transition===\"out\"?n=-1:e.json.transition===\"in\"&&(n=1);const r=(t=e.json.filter)===null||t===void 0?void 0:t.match(/^([a-zA-Z]+)(\\((.+)\\))?/);if(r){const o=r[1],s=r[3];if(o===\"wipe\"){const a=new HP;s===\"up\"?a.direction=1:s===\"down\"?a.direction=2:s===\"left\"?a.direction=3:s===\"right\"&&(a.direction=4),this.filter=a,this.filterType=`${o}-${s}`}else if(o===\"fade\"){const a=new VP;this.filter=a,this.filterType=\"\"+o}this.filter&&(this.filter.transition=n)}}get modifyAttrKey(){return this.filterType}}class XP extends fl{constructor(e){super(e),this.isConflict=!0,this.activeWhenConflict=\"next\",this.onTimeUpdate=({duration:t,delta:n})=>{var r;const o=n/t,s=(r=this.path)===null||r===void 0?void 0:r.getPoint(o);this.timingTarget&&s&&(this.timingTarget.ppt_x=s.x+this.timingTarget.design_ppt_x,this.timingTarget.ppt_y=s.y+ +this.timingTarget.design_ppt_y)},this.onSeekToStart=()=>{this.timingTarget&&(this.timingTarget.ppt_x=this.timingTarget.design_ppt_x,this.timingTarget.ppt_y=this.timingTarget.design_ppt_y)},this.onSeekToEnd=()=>{var t,n,r;const o=(n=(t=this.commonTimeNode.json)===null||t===void 0?void 0:t.spd)!==null&&n!==void 0?n:1,s=(r=this.path)===null||r===void 0?void 0:r.getPoint(o>0?1:0);this.timingTarget&&s&&(this.timingTarget.ppt_x=s.x+this.timingTarget.design_ppt_x,this.timingTarget.ppt_y=s.y+this.timingTarget.design_ppt_y)},this.commonTimeNode.on(\"timeUpdate\",this.onTimeUpdate),this.createPath()}get modifyAttrKey(){return\"motion\"}createPath(){var e;const t=new pu,n=(e=this.json.path)===null||e===void 0?void 0:e.match(/[MLCmlc][^MLCmlc]+/g);if(n)for(const r of n){const[o,...s]=r.trim().replace(/\\s+/g,\" \").split(\" \");if(o===\"M\"){const[a,l]=s.map(u=>Number(u));t.moveTo(a,l)}else if(o===\"L\"){const[a,l]=s.map(u=>Number(u));t.lineTo(a,l)}else if(o===\"C\"){const[a,l,u,h,d,p]=s.map(m=>Number(m));t.bezierCurveTo(a,l,u,h,d,p)}else if(o===\"Z\")t.closePath();else if(o===\"E\")console.warn(\"not implements\");else if(o===\"c\"){const[a,l,u,h,d,p]=s.map(g=>Number(g)),m=t.currentPoint;t.bezierCurveTo(a+m.x,l+m.y,u+m.x,h+m.y,d+m.x,p+m.y)}else if(o===\"l\"){const a=t.currentPoint,[l,u]=s.map(h=>Number(h));t.lineTo(l+a.x,u+a.y)}else if(o===\"m\"){const a=t.currentPoint,[l,u]=s.map(h=>Number(h));t.moveTo(l+a.x,u+a.y)}}this.path=t}}class qP extends fl{constructor(e){super(e),this.isConflict=!0,this.activeWhenConflict=\"next\",this.startVal=null,this.onTimelineStart=t=>{t.isReverse||this.updateCurrentValue()},this.onTimeUpdate=({duration:t,delta:n})=>{var r,o,s,a,l;const u=n/t,h={x:1,y:1};if(this.to){const d=(r=this.from)!==null&&r!==void 0?r:{x:(s=(o=this.startVal)===null||o===void 0?void 0:o.x)!==null&&s!==void 0?s:1,y:(l=(a=this.startVal)===null||a===void 0?void 0:a.y)!==null&&l!==void 0?l:1};h.x=d.x+(this.to.x-d.x)*u,h.y=d.y+(this.to.y-d.y)*u}else if(this.by){const d={x:this.by.x,y:this.by.y};h.x=1+(d.x-1)*u,h.y=1+(d.y-1)*u}this.timingTarget&&(this.timingTarget.scale=h)},this.onTimeNodeStart=()=>{this.timingTarget&&(this.startVal={x:this.timingTarget.scale.x,y:this.timingTarget.scale.y})},this.onSeekToStart=()=>{this.timingTarget&&this.startVal&&(this.timingTarget.scale=this.startVal)},this.onSeekToEnd=()=>{this.onTimeUpdate({duration:1,delta:1,isReverse:!1})},this.from=e.json.from,this.to=e.json.to,this.by=e.json.by,this.commonTimeNode.on(\"timelineStart\",this.onTimelineStart),this.commonTimeNode.on(\"timeNodeCreate\",this.onTimeNodeStart),this.commonTimeNode.on(\"timeUpdate\",this.onTimeUpdate),this.commonTimeNode.on(\"timeNodeStart\",this.onTimeNodeStart)}get modifyAttrKey(){return\"scale\"}updateCurrentValue(){this.timingTarget&&(this.current={x:this.timingTarget.scale.x,y:this.timingTarget.scale.y})}}class YP extends fl{constructor(e){super(e),this.isConflict=!1,this.activeWhenConflict=\"next\",this.isTimelineStart=!1,this.startColorString=null,this.currentColorString=\"#FFFFFFFF\",this.onTimelineStart=t=>{if(this.isTimelineStart)return;this.isTimelineStart=!0,t.isReverse||this.updateCurrentValue(),this.from.isInit()||this.from.fromHexString(this.currentColorString),this.to.isInit()||this.from.by(this.by,this.to);const[n]=this.json.cBhvr.attrList[0].split(\".\");ks(this.timingTarget,n+\".on\",\"true\")},this.onTimeNodeEnd=()=>{if(this.json.cBhvr.ctn.fill===\"remove\"){const[t]=this.json.cBhvr.attrList[0].split(\".\");ks(this.timingTarget,t+\".on\",\"false\")}this.isTimelineStart=!1},this.onSeekToStart=()=>{var t;if(this.timingTarget&&(this.onTimeUpdate({duration:1,delta:0}),((t=this.timingTarget.fill)===null||t===void 0?void 0:t.designColor.toUpperCase())===this.from.toHexString().toUpperCase())){const[n]=this.json.cBhvr.attrList[0].split(\".\");ks(this.timingTarget,n+\".on\",\"false\")}},this.onTimeNodeStart=()=>{if(this.timingTarget){const t=cg(this.timingTarget,this.json.cBhvr.attrList[0]);t&&(this.startColorString=t)}},this.onTimeUpdate=({delta:t,duration:n})=>{const r=t/n;this.to.interpolationFrom(this.from,r,this.target),this.timingTarget&&ks(this.timingTarget,this.json.cBhvr.attrList[0],this.target.toHexString())},this.onSeekToEnd=()=>{this.isTimelineStart||this.onTimelineStart({isReverse:!1,activeCount:0,id:\"\"}),this.onTimeUpdate({duration:1,delta:1})},this.json.clrSpc===\"rgb\"?(this.from=new sg(this.json.from),this.to=new sg(this.json.to),this.by=new sg(this.json.by),this.target=new sg):(this.from=new og(this.json.from),this.to=new og(this.json.to),this.by=new og(this.json.by),this.target=new og),this.commonTimeNode.on(\"timeNodeStart\",this.onTimeNodeStart),this.commonTimeNode.on(\"timeNodeCreate\",this.onTimeNodeStart),this.commonTimeNode.on(\"timelineStart\",this.onTimelineStart),this.commonTimeNode.on(\"timeNodeEnd\",this.onTimeNodeEnd),this.commonTimeNode.on(\"timeUpdate\",this.onTimeUpdate)}get modifyAttrKey(){return this.json.cBhvr.attrList[0]}updateCurrentValue(){if(this.timingTarget){const e=cg(this.timingTarget,this.json.cBhvr.attrList[0]);e&&(this.currentColorString=e)}}}class $P extends fl{constructor(e){super(e),this.isConflict=!1,this.activeWhenConflict=\"next\",this.startVal=null,this.lastVal=null,this.onTimelineStart=t=>{this.lastVal=null,t.isReverse||this.updateCurrentValue()},this.onTimeUpdate=({duration:t,delta:n})=>{const r=n/t;let o=0,s=0;if(this.from!==void 0&&this.to!==void 0){o=this.from,s=this.to;const a=o+(s-o)*r;this.timingTarget&&(this.timingTarget.r=a)}else if(this.by!==void 0){this.lastVal||(this.lastVal=0);const a=this.by*r-this.lastVal;this.lastVal=this.by*r,this.timingTarget&&(this.timingTarget.r+=a)}},this.onTimeNodeStart=()=>{var t;Object(H.isNumber)((t=this.timingTarget)===null||t===void 0?void 0:t.r)&&(this.startVal=this.timingTarget.r)},this.onSeekToStart=()=>{this.timingTarget&&this.startVal!==null&&(this.timingTarget.r=this.startVal)},this.onSeekToEnd=()=>{this.onTimeUpdate({duration:1,delta:1,isReverse:!1})},this.from=this.json.from,this.to=this.json.to,this.by=this.json.by,this.by?this.isConflict=!1:this.isConflict=!0,this.commonTimeNode.on(\"timeNodeStart\",this.onTimeNodeStart),this.commonTimeNode.on(\"timeNodeCreate\",this.onTimeNodeStart),this.commonTimeNode.on(\"timelineStart\",this.onTimelineStart),this.commonTimeNode.on(\"timeUpdate\",this.onTimeUpdate)}get modifyAttrKey(){return\"rotate\"}updateCurrentValue(){var e;this.currentVal=(e=this.timingTarget)===null||e===void 0?void 0:e.r}}class JP extends fl{constructor(e){super(e),this.isConflict=!1,this.activeWhenConflict=\"next\",this.isApplied=!1,this.onTimeUpdate=()=>{var t,n;const{cmd:r,cmdType:o}=this.json;!this.isApplied&&r&&o&&(this.isApplied=!0,(n=(t=this.timingTarget)===null||t===void 0?void 0:t.cmd)===null||n===void 0||n.applyCommand(r,o))},this.onSeekToStart=()=>{var t,n;(n=(t=this.timingTarget)===null||t===void 0?void 0:t.cmd)===null||n===void 0||n.applyCommand(\"custom-pause\",\"call\")},this.onSeekToEnd=()=>{},this.commonTimeNode.on(\"timeNodeStart\",()=>{this.isApplied=!1}),this.commonTimeNode.on(\"timeNodeEnd\",()=>{this.isApplied=!1}),this.commonTimeNode.on(\"timeUpdate\",this.onTimeUpdate),this.commonTimeNode.on(\"seekToStart\",this.onSeekToStart),this.commonTimeNode.on(\"seekToEnd\",this.onSeekToEnd)}get modifyAttrKey(){var e,t,n,r;return((t=(e=this.json)===null||e===void 0?void 0:e.cmd)!==null&&t!==void 0?t:\"\")+((r=(n=this.json)===null||n===void 0?void 0:n.cmdType)!==null&&r!==void 0?r:\"\")}}class ZP{constructor(e){this.runtimeNodeEventHub=new O.a,this.stopAudio=()=>{this.audio.stop()},this.destroy=()=>{this.stopAudio(),this.audio.destroy()};const{json:t,isIterate:n,isSub:r,eventHub:o,ctx:s,parent:a,iterateType:l,iterateIndex:u,iterateId:h}=e;this.json=t,this.id=t.cMediaNode.ctn.id,this.commonTimeNode=new kc({json:t.cMediaNode.ctn,isSub:r,eventHubs:{global:o,runtime:this.runtimeNodeEventHub},ctx:s,parent:a,isIterate:n,iterateType:l,iterateIndex:u,iterateId:h}),this.audio=new __(t.cMediaNode.tgtEl),this.commonTimeNode.on(\"timelineStart\",()=>{this.audio.play()}),this.commonTimeNode.on(\"seekToStart\",this.stopAudio),this.commonTimeNode.on(\"seekToEnd\",this.stopAudio),this.commonTimeNode.on(\"timeNodeDestroy\",this.destroy)}}var KP=function(i,e,t,n){return new(t||(t=Promise))(function(r,o){function s(u){try{l(n.next(u))}catch(h){o(h)}}function a(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof t?h:new t(function(d){d(h)})).then(s,a)}l((n=n.apply(i,e||[])).next())})};class kc extends O.a{constructor(e){var t,n;super(),this.uuid=Date.now().toString(32)+Math.random().toString(32).substring(2),this.isSub=!1,this.isShadow=!1,this.startCount=0,this.applyCount=0,this.isReverse=!1,this.isConflictDispose=!1,this.isIterateEnd=!1,this.parentTimeNode=null,this.isActive=!1,this.isDestroy=!1,this.shouldSeekOnStart=!1,this.repeatTimeoutId=\"\",this.iterateShadows=[],this.isEndEventsEmitted=!1,this.tmFilter=[],this.timeDelta=0,this.isIterate=!1,this.iterateType=\"el\",this.iterateIndex=0,this.children=[],this.subList=[],this.duration=0,this.isNegativeSpeed=!1,this.handleEndCond=()=>{this.isActive&&(this.isActive=!1,this.seekToEnd(!1,!0))},this.handleActive=(_=!0)=>{if(this.isActive=!0,this.applyCount+=1,this.json.iterate||this.emit(\"timeNodeStart\",{id:this.uuid,activeCount:this.applyCount,isReverse:this.isReverse}),this.startCount>0&&this.json.restart){if(this.json.restart===\"never\")return;this.json.restart!==\"whenNotActive\"&&this.json.restart!==\"always\"||(this.seekToStart(),this.emit(\"timeNodeRestart\",{id:this.uuid,activeCount:this.applyCount,isReverse:this.isReverse}),this.startTimeLine(_))}else this.startTimeLine(_)},this.updateTimeLine=_=>{const y=_/(Jt.TARGET_FPMS||.06);this.timeDelta+=y,this.duration-this.timeDelta<=y&&(this.timeDelta=this.duration),this.timeDelta<this.duration?this.emit(\"timeUpdate\",{delta:this.isReverse||this.isNegativeSpeed?this.duration-this.timeDelta:this.timeDelta,duration:this.duration,isReverse:this.isReverse}):(this.emit(\"timeUpdate\",{delta:this.isReverse||this.isNegativeSpeed?0:this.duration,duration:this.duration,isReverse:this.isReverse}),this.onTimeLineEnd())},this.handleEnd=(_=!1)=>{(this.isTimeNodeEnd()||_)&&(this.isActive=!1,this.isSub&&this.destroy(),this.emitEndEvents())};const{isSub:r,isIterate:o,ctx:s,eventHubs:a,parent:l,json:u,iterateType:h,iterateId:d,iterateIndex:p}=e;this.isSub=r,this.isIterate=o,this.parentTimeNode=l,this.json=u,this.ctx=s,this.iterateIndex=p,this.eventHubs=a,this.iterateType=h,this.iterateId=d,this.tmFilter=(n=(t=u.tmFilter)===null||t===void 0?void 0:t.split(\";\").map(_=>_.split(\",\").map(y=>parseFloat(y.trim()))))!==null&&n!==void 0?n:[];const m=Number(this.json.dur),g=this.json.spd||1;this.isNegativeSpeed=g<0,Number.isNaN(m)||(this.duration=m/Math.abs(g)),this.uuid+=\"--\"+this.json.id,this.setPreStyle(),u.childTnLst&&this.createChildren(u.childTnLst),this.startConds=new Mp(this.json.id||\"\",u.stCondLst,a,this.ctx),this.endConds=new Mp(this.json.id||\"\",u.endCondLst,a,this.ctx),u.endSync&&(this.endSync=new Mp(this.json.id||\"\",[u.endSync],a,this.ctx),this.endSync.on(\"active\",()=>{var _;this.json.nodeType===\"interactiveSeq\"&&(this.isActive=!1,this.shouldSeekOnStart=!0,this.emit(\"timeNodeEndSync\"),(_=this.endSync)===null||_===void 0||_.reset())})),this.startConds.on(\"active\",_=>{this.isActive||(this.shouldSeekOnStart&&(this.shouldSeekOnStart=!1,this.seekToStart()),this.handleActive(_))}),this.endConds.on(\"active\",()=>{this.handleEndCond(),this.children.forEach(_=>_.commonTimeNode.handleEndCond())}),this.parentTimeNode&&this.parentTimeNode.on(\"timeNodeStart\",()=>{this.applyCount=0}),this.isSub&&this.json.masterRel===\"nextClick\"&&this.startConds.addCond({event:\"shape slide onNext\"}),this.json.iterate&&this.isIterate===!1&&this.createIterateShadow()}createIterateShadow(){const e=xp();let t=!0,n=0;const r=o=>{o===e&&(t=!1,this.ctx.eventHub.removeListener(\"IterateTimeNodeEnd\",r))};for(this.ctx.eventHub.on(\"IterateTimeNodeEnd\",r);t;){const o=JSON.parse(JSON.stringify(this.json)),s=new kc({json:o,isSub:!1,eventHubs:this.eventHubs,ctx:this.ctx,parent:null,isIterate:!0,iterateType:o.iterate.type,iterateIndex:n,iterateId:e});this.iterateShadows[n]=s,n+=1}}isInfiniteRepeat(){return this.json.repeatCount>999999998}getReverse(){return this.isReverse}setReverse(e){this.isReverse=e}createTimeNode(e,t){let n=null;const r={json:e,isSub:t,isIterate:this.isIterate,eventHub:this.eventHubs.global,ctx:this.ctx,parent:this,iterateType:this.iterateType,iterateIndex:this.iterateIndex,iterateId:this.iterateId};return e.type===\"seq\"?n=new NP(r):e.type===\"par\"?n=new nS(r):e.type===\"set\"?n=new DP(r):e.type===\"anim\"?n=new FP(r):e.type===\"animEffect\"?n=new WP(r):e.type===\"animMotion\"?n=new XP(r):e.type===\"animScale\"?n=new qP(r):e.type===\"animClr\"?n=new YP(r):e.type===\"animRot\"?n=new $P(r):e.type===\"cmd\"?n=new JP(r):e.type===\"audio\"&&(n=new ZP(r)),n}createSubList(e){this.subList=[],e.forEach(t=>{const n=this.createTimeNode(t,!0);n&&this.subList.push(n)})}bindCommonTimeNodeEvent(e){e.commonTimeNode.on(\"timeNodeStart\",t=>{this.emit(\"childTimeNodeStart\",t)}),e.commonTimeNode.on(\"timeNodeEnd\",t=>{this.emit(\"childTimeNodeEnd\",t),this.children.every(n=>n.commonTimeNode.isTimeNodeEnd())&&(this.json.iterate||this.allChildrenEndHandle())})}createChildren(e){function t(n){return(r=n,function(o){var s;return!!(!((s=o)===null||s===void 0)&&s.cBhvr)}(r)?r.cBhvr.ctn:function(o){var s,a;return!!(!((a=(s=o)===null||s===void 0?void 0:s.cMediaNode)===null||a===void 0)&&a.ctn)}(r)?r.cMediaNode.ctn:r.ctn).presetOrder;var r}e&&e[0]&&t(e[0])?[...e].sort((n,r)=>{var o,s;return((o=t(n))!==null&&o!==void 0?o:0)-((s=t(r))!==null&&s!==void 0?s:0)}).forEach(n=>{const r=e.findIndex(s=>s===n),o=this.createTimeNode(n,!1);o&&(this.bindCommonTimeNodeEvent(o),this.children[r]=o)}):e.forEach(n=>{const r=this.createTimeNode(n,!1);r&&(this.bindCommonTimeNodeEvent(r),this.children.push(r))})}playReverse(){this.isReverse=!0,this.startReverseTimeLine(),this.children.forEach(e=>e.commonTimeNode.playReverse())}allChildrenEndHandle(){if(!this.isDestroy){if(this.json.autoRev&&!this.isReverse)return this.isReverse=!0,void this.playReverse();this.isReverse&&(this.isReverse=!1),this.json.repeatCount&&this.json.repeatCount>this.applyCount?this.repeatTimeoutId=this.ctx.clock.setTimeout(()=>{this.seekToStart(!1),this.resetForRepeat(),this.startTimeNodeRepeat()}):(this.json.iterate&&!this.isIterate&&(this.isIterateEnd=!0),this.eventHubs.runtime.emit(\"runtime all end\"),this.startSubList(),this.handleEnd())}}resetForRepeat(){this.timeDelta=0,this.children.forEach(e=>e.commonTimeNode.resetForRepeat())}startSubList(){this.subList.forEach(e=>e.commonTimeNode.startTimeNode())}startReverseTimeLine(){this.isEndEventsEmitted=!1,this.timeDelta=0;const e=1e3/this.ctx.ticker.maxFPS;this.duration<=e&&this.duration>0?(this.emit(\"timeUpdate\",{delta:this.duration,duration:this.duration,isReverse:this.isReverse}),this.ctx.eventHub.emit(kt.animateEnd),this.ctx.ticker.remove(this.updateTimeLine)):this.duration>e&&(this.ctx.eventHub.emit(kt.animateStart),this.ctx.ticker.add(this.updateTimeLine))}startTimeLine(e=!0){if(e&&(this.isEndEventsEmitted=!1,this.eventHubs.global.emit(`time ${this.json.id} begin`),this.eventHubs.global.emit(`time ${this.json.id} onBegin`),this.eventHubs.runtime.emit(`runtime ${this.json.id} begin`)),this.json.iterate)return void this.startIterate();this.timeDelta=0,this.emit(\"timelineStart\",{id:this.uuid,activeCount:this.applyCount,isReverse:this.isReverse});const t=1e3/this.ctx.ticker.maxFPS;this.duration<=t&&this.duration>0?(this.timeDelta=this.isReverse?0:this.duration,this.emit(\"timeUpdate\",{delta:this.timeDelta,duration:this.duration,isReverse:this.isReverse}),this.emit(\"timelineEnd\",{id:this.uuid,activeCount:this.applyCount,isReverse:this.isReverse}),this.ctx.ticker.addOnce(()=>{this.onTimeLineEnd()})):this.duration>t&&(this.ctx.eventHub.emit(kt.animateStart),this.updateTimeLine(0),this.ctx.ticker.add(this.updateTimeLine))}startIterate(){return KP(this,void 0,void 0,function*(){if(this.json.iterate){this.isIterateEnd=!1;for(const e of this.iterateShadows){if(this.isIterateEnd)break;e.children.forEach(t=>{t.commonTimeNode.startTimeNode()}),e.applyCount+=1,yield this.ctx.clock.delay(this.json.iterate.interval)}this.onTimeLineEnd()}})}applyTimeFilter(e){if(!this.tmFilter.every(t=>Object(H.isNumber)(t[0])&&Object(H.isNumber)(t[1])))return e;for(let t=0;t<this.tmFilter.length;t++){const n=this.tmFilter[t];if(e<n[0]){const r=this.tmFilter[t-1];return(e-r[0])/(n[0]-r[0])*(n[1]-r[1])+r[1]}}return this.tmFilter.length>0?this.tmFilter[this.tmFilter.length-1][1]:e}isNatureTimeEnd(){return this.duration>=0&&this.timeDelta>=this.duration}findTargets(){const e=[],t=n=>{n.forEach(r=>{var o,s,a;r.cBhvr&&r.cBhvr.target&&e.findIndex(l=>l.id===r.cBhvr.target.id)<0&&e.push(r.cBhvr.target),((s=(o=r==null?void 0:r.cBhvr)===null||o===void 0?void 0:o.ctn)===null||s===void 0?void 0:s.childTnLst)&&r.cBhvr.ctn.childTnLst.length>0&&t(r.cBhvr.ctn.childTnLst),((a=r==null?void 0:r.ctn)===null||a===void 0?void 0:a.childTnLst)&&r.ctn.childTnLst.length>0&&t(r.ctn.childTnLst)})};return t(this.json.childTnLst||[]),e}setPreStyle(){this.json.presetClass&&this.findTargets().forEach(e=>{if(this.json.iterate){let t=0,n=!0;for(;n;){const r=this.ctx.timingTargets.getTarget(e,!0,{type:this.json.iterate.type,index:t,id:\"\"});r&&(this.setPreStyleForTarget(r),t+=1),n=!!r}}else{const t=this.ctx.timingTargets.getTarget(e,!1);t&&this.setPreStyleForTarget(t)}})}setPreStyleForTarget(e){var t,n;if(e&&this.json.presetSubtype&&(e.presetSubType=this.json.presetSubtype),e&&!e.hasPreset)if(this.json.presetClass===\"entr\"){const r=(n=(t=this.json)===null||t===void 0?void 0:t.childTnLst)===null||n===void 0?void 0:n.filter(o=>o.type===\"set\"&&o.to===\"visible\");r!=null&&r.length&&(e.hasPreset=!0,e.style.visibility=\"hidden\")}else(this.json.presetClass===\"exit\"||this.json.presetClass===\"path\")&&(e.hasPreset=!0,e.style.visibility=\"visible\")}startTimeNodeRepeat(){this.timeDelta=0,this.isActive=!0,this.applyCount+=1,this.startTimeLine(!1),this.json.iterate||this.emit(\"timeNodeRepeat\",{id:this.uuid,activeCount:this.applyCount,isReverse:this.isReverse})}startTimeNodeForce(){this.json.subTnLst&&this.createSubList(this.json.subTnLst),this.timeDelta=0,this.isActive=!0,this.handleActive(!1)}startTimeNode(e=!0){if(this.isDestroy)return;this.collectStartValue(),this.timeDelta=0,this.isReverse=!1,this.json.subTnLst&&this.createSubList(this.json.subTnLst),this.startConds.setTriggerParams(e);const t=this.json.stCondLst.filter(r=>/^self/.test(r.event||\"\"))[0];t&&this.startConds.condHandle(t);const n=this.json.endCondLst.filter(r=>/^self/.test(r.event||\"\"))[0];n&&this.endConds.condHandle(n),this.startConds.condHandle()}onTimeLineEnd(){this.dispose(),(this.children.length===0||this.json.iterate)&&this.allChildrenEndHandle()}clearSubList(){this.subList.forEach(e=>e.commonTimeNode.destroy())}seekToStart(e=!0){if(this.isEndEventsEmitted=!1,this.isActive=!1,this.dispose(),this.timeDelta=0,this.emit(\"seekToStart\"),this.json.iterate&&!this.isIterate)return this.isIterateEnd=!0,void this.iterateShadows.forEach(t=>t.seekToStart(e));if(e)for(let t=this.subList.length-1;t>=0;t--){const n=this.subList[t];n==null||n.commonTimeNode.seekToStart()}for(let t=this.children.length-1;t>=0;t--){const n=this.children[t];n==null||n.commonTimeNode.seekToStart()}for(let t=this.children.length-1;t>=0;t--){const n=this.children[t];n==null||n.commonTimeNode.seekToStart()}}dispose(e=!1){this.isConflictDispose=e,this.ctx.clock.clearTimeout(this.repeatTimeoutId),this.ctx.eventHub.emit(kt.animateEnd);try{this.ctx.ticker.remove(this.updateTimeLine)}catch{}this.startConds.reset(),this.endConds.reset()}seekToEnd(e,t=!1){if(this.isInfiniteRepeat())return;!this.isActive&&this.applyCount<=0&&this.collectStartValue(),this.applyCount=this.json.repeatCount,this.json.autoRev&&(this.isReverse=!0),this.timeDelta=this.duration,this.isActive=!1,this.dispose();const n=this.json.autoRev||e;if(n?this.emit(\"seekToStart\"):this.emit(\"seekToEnd\"),this.json.iterate&&!this.isIterate)return this.isIterateEnd=!0,void this.iterateShadows.forEach(r=>r.seekToEnd(n,t));this.children.length===0&&(this.eventHubs.runtime.emit(\"runtime all end\"),this.handleEnd()),this.children.forEach(r=>r.commonTimeNode.seekToEnd(n,t)),t&&this.json.subTnLst&&(this.subList.length<=0&&this.createSubList(this.json.subTnLst),this.subList.forEach(r=>r.commonTimeNode.seekToEnd(!1)),this.clearSubList())}isTimeNodeEnd(){let e=!0;return this.children.length>0&&(e=e&&this.children.every(t=>t.commonTimeNode.isTimeNodeEnd())),this.json.repeatCount&&(e=e&&this.applyCount>=this.json.repeatCount),this.json.autoRev&&(e=e&&!this.isReverse),e=e&&this.isNatureTimeEnd(),!!this.isConflictDispose||!(!this.isIterateEnd||!this.json.iterate)||e}emitEndEvents(){this.isEndEventsEmitted||(this.isEndEventsEmitted=!0,this.eventHubs.global.emit(`time ${this.json.id} end`),this.eventHubs.global.emit(`time ${this.json.id} onEnd`),this.eventHubs.runtime.emit(`runtime ${this.json.id} end`),this.emit(\"timeNodeEnd\",{id:this.uuid,activeCount:this.applyCount,isReverse:this.isReverse}))}collectStartValue(){this.emit(\"timeNodeCreate\"),this.children.forEach(e=>e.commonTimeNode.collectStartValue())}destroy(){this.emit(\"timeNodeDestroy\"),this.isDestroy=!0,this.dispose(),this.startConds.removeAllListeners(),this.endConds.removeAllListeners(),this.children.forEach(e=>e.commonTimeNode.destroy()),this.clearSubList()}}class nS extends O.a{constructor(e){super(),this.isRunning=!1,this.runtimeNodeEventHub=new O.a;const{json:t,iterateType:n,isIterate:r,isSub:o,parent:s,ctx:a,eventHub:l,iterateIndex:u,iterateId:h}=e;this.id=t.ctn.id,this.json=t,this.ctx=a,this.isIterate=r,this.globalEventHub=l,this.commonTimeNode=new kc({json:t.ctn,isSub:o,eventHubs:{global:l,runtime:this.runtimeNodeEventHub},ctx:a,parent:s,isIterate:!1,iterateType:n,iterateIndex:u,iterateId:h}),this.commonTimeNode.on(\"timeNodeStart\",()=>{this.commonTimeNode.children.forEach(d=>{d.commonTimeNode.setReverse(this.commonTimeNode.getReverse()),d.commonTimeNode.startTimeNode()}),this.isRunning||(this.isRunning=!0,this.globalEventHub.emit(`runtime ${this.id} begin`),this.emit(\"begin\"))}),this.commonTimeNode.on(\"timeNodeRepeat\",()=>{this.commonTimeNode.children.forEach(d=>{d.commonTimeNode.startTimeNode(!1)})}),this.commonTimeNode.on(\"timeNodeEnd\",()=>{this.commonTimeNode.isTimeNodeEnd()&&this.isRunning&&(this.isRunning=!1,this.globalEventHub.emit(`runtime ${this.id} end`),this.emit(\"end\"))})}}var QP=function(i,e,t,n){return new(t||(t=Promise))(function(r,o){function s(u){try{l(n.next(u))}catch(h){o(h)}}function a(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof t?h:new t(function(d){d(h)})).then(s,a)}l((n=n.apply(i,e||[])).next())})};class eI{constructor(e,t,n){this.json=e,this.ctx=n,this.globalEventHub=t;const r=e.timeNodeList.find(o=>o.type===\"par\"&&o.ctn.nodeType===\"tmRoot\");r&&(this.tmRoot=new nS({json:r,isSub:!1,isIterate:!1,eventHub:t,ctx:n,parent:null,iterateType:\"el\",iterateIndex:0,iterateId:\"\"}),this.mainSeq=this.tmRoot.commonTimeNode.children.find(o=>{var s,a,l;return((s=o.json)===null||s===void 0?void 0:s.type)===\"seq\"&&((l=(a=o.json)===null||a===void 0?void 0:a.ctn)===null||l===void 0?void 0:l.nodeType)===\"mainSeq\"}))}findSeq(e){var t;return(t=this.tmRoot)===null||t===void 0?void 0:t.commonTimeNode.children.find(n=>{var r,o,s;return((r=n.json)===null||r===void 0?void 0:r.type)===\"seq\"&&((s=(o=n.json)===null||o===void 0?void 0:o.ctn)===null||s===void 0?void 0:s.id)===e})}start(){var e,t;return QP(this,void 0,void 0,function*(){this.json.autoPlayMainSeq?(yield this.ctx.clock.delay(16),(e=this.mainSeq)===null||e===void 0||e.commonTimeNode.startTimeNode()):(t=this.mainSeq)===null||t===void 0||t.commonTimeNode.startTimeNode()})}setMainSeqApplied(){this.mainSeq&&(this.mainSeq.commonTimeNode.applyCount=1)}collectMainSeqStartValue(){var e;(e=this.mainSeq)===null||e===void 0||e.commonTimeNode.collectStartValue()}setMainSeqStep(e,t){var n;e===-1&&this.mainSeq&&(this.mainSeq.commonTimeNode.applyCount=1),(n=this.mainSeq)===null||n===void 0||n.setCurrentStep(e,t)}destroy(){var e;this.globalEventHub.removeAllListeners(),(e=this.tmRoot)===null||e===void 0||e.commonTimeNode.destroy()}hasMainSeq(){return!!this.mainSeq&&this.mainSeq.commonTimeNode.children.length>0}currentMainSeqState(){return this.mainSeq?this.mainSeq.currentState:null}currentMainSeqStep(){return this.mainSeq?this.mainSeq.currentStep:0}currentMainSeqLength(){return this.mainSeq?this.mainSeq.stepLength:0}mainSeqHasNextStep(){return!!this.mainSeq&&this.mainSeq.hasNext()}mainSeqHasPrevStep(){return!!this.mainSeq&&this.mainSeq.hasPrev()}seekInteractiveSeqToEnd(e){const t=this.findSeq(e);t&&t.commonTimeNode.seekToEnd(!1,!0)}setInteractiveSeqState(e,t,n){const r=this.findSeq(e);r&&r.setCurrentStep(t,n)}resetAllInteractiveSeq(){var e;(((e=this.tmRoot)===null||e===void 0?void 0:e.commonTimeNode.children.filter(t=>{var n,r,o;return((n=t.json)===null||n===void 0?void 0:n.type)===\"seq\"&&((o=(r=t.json)===null||r===void 0?void 0:r.ctn)===null||o===void 0?void 0:o.nodeType)===\"interactiveSeq\"}))||[]).forEach(t=>{t.setCurrentStep(0,\"start\")})}applyInteractiveAction(e){this.globalEventHub.emit(e)}}var iS=function(i,e,t,n){return new(t||(t=Promise))(function(r,o){function s(u){try{l(n.next(u))}catch(h){o(h)}}function a(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof t?h:new t(function(d){d(h)})).then(s,a)}l((n=n.apply(i,e||[])).next())})};class tI extends y_{constructor(e,t,n,r){super({id:\"stage\",width:e.width,height:e.height,type:\"Container\",children:e.children},t,n,void 0,r),this.isRendered=!1,this.isTimingStartValueCollected=!1,this.globalEventHub=new O.a,this.json=e,t.hasBackgroundFillShape=this.detectUseBackgroundFill(this.json),this.container.visible=!1,this.ctx=t;const o=new Na;o.beginFill(16777215),o.drawRect(0,0,e.width,e.height),o.endFill(),this.container.addChild(o)}detectUseBackgroundFill(e){return!!e&&(e.type===\"Picture\"||e.type===\"Shape\"?e.useBgFill:!(!e.children||!Object(H.isArray)(e.children))&&e.children.some(t=>this.detectUseBackgroundFill(t)))}initOnReuse(){super.initOnReuse(),this.globalEventHub.on(\"c:prev slide\",()=>{this.ctx.eventHub.emit(kt.requestPrevSlide)}),this.globalEventHub.on(\"c:next slide\",()=>{this.ctx.eventHub.emit(kt.requestNextSlide)})}get interactiveContainer(){return this.container}render(e){this.isRendered||(this.isRendered=!0,super.render(e),e.addSubMTask(()=>iS(this,void 0,void 0,function*(){this.ctx.eventHub.emit(\"StageRenderEnd\")})))}createTiming(){this.json.timing&&!this.timing&&(this.timing=new eI(this.json.timing,this.globalEventHub,this.ctx))}startTiming(){var e;return((e=this.timing)===null||e===void 0?void 0:e.start())||Promise.resolve()}setMainSeqApplied(){var e;(e=this.timing)===null||e===void 0||e.setMainSeqApplied()}setMainSeqStep(e,t){var n;(n=this.timing)===null||n===void 0||n.setMainSeqStep(e,t)}collectMainSeqStartValue(){var e;this.isTimingStartValueCollected||(this.isTimingStartValueCollected=!0,(e=this.timing)===null||e===void 0||e.collectMainSeqStartValue())}hasTiming(){return!!this.timing}clearOnSlideChange(){this.ctx.eventHub.removeAllListeners(),this.globalEventHub.removeAllListeners(),super.clearOnSlideChange()}clearOnTransactionEnd(){var e,t;this.ctx.timingTargets.getTargets().forEach(n=>{n.hasPreset=!1}),(e=this.timing)===null||e===void 0||e.resetAllInteractiveSeq(),(t=this.timing)===null||t===void 0||t.destroy(),this.timing=void 0}destroy(){var e,t;this.isTimingStartValueCollected=!1,this.isRendered=!1,this.ctx.eventHub.removeAllListeners(),this.ctx.graphicsTexture.destroy(),(e=this.ctx.bgTexture)===null||e===void 0||e.destroy(!0),this.ctx.spriteTexture.destroy(),this.globalEventHub.removeAllListeners(),(t=this.timing)===null||t===void 0||t.destroy(),this.timing=void 0,super.destroy()}mainSeqStep(){var e,t;return(t=(e=this.timing)===null||e===void 0?void 0:e.currentMainSeqStep())!==null&&t!==void 0?t:0}mainSeqLength(){var e,t;return(t=(e=this.timing)===null||e===void 0?void 0:e.currentMainSeqLength())!==null&&t!==void 0?t:0}mainSeqHasNextStep(){var e,t;return(t=(e=this.timing)===null||e===void 0?void 0:e.mainSeqHasNextStep())!==null&&t!==void 0&&t}mainSeqHasPrevStep(){var e,t;return(t=(e=this.timing)===null||e===void 0?void 0:e.mainSeqHasPrevStep())!==null&&t!==void 0&&t}mainSeqState(){return this.timing?this.timing.currentMainSeqState():null}nextStep(){var e;this.hasTiming()&&((e=this.timing)===null||e===void 0?void 0:e.hasMainSeq())?(this.globalEventHub.emit(\"shape slide onStopAudio\"),this.globalEventHub.emit(\"shape slide onNext\")):this.ctx.eventHub.emit(kt.requestNextSlide)}prevStep(){var e;this.hasTiming()&&((e=this.timing)===null||e===void 0?void 0:e.hasMainSeq())?(this.globalEventHub.emit(\"shape slide onStopAudio\"),this.globalEventHub.emit(\"shape slide onPrev\")):this.ctx.eventHub.emit(kt.requestPrevSlide)}applyInteractiveAction(e){var t;(t=this.timing)===null||t===void 0||t.applyInteractiveAction(e)}seekInteractiveSeqToEnd(e){var t;(t=this.timing)===null||t===void 0||t.seekInteractiveSeqToEnd(e)}setInteractiveSeqState(e,t,n){var r;(r=this.timing)===null||r===void 0||r.setInteractiveSeqState(e,t,n)}setMediaState(e,t){return iS(this,void 0,void 0,function*(){const n=this.ctx.medias[e];n&&(t?yield n.play():yield n.pause())})}setMediaCurrentTime(e,t){const n=this.ctx.medias[e];n&&n.seek(t)}}class nI{constructor(e){this.ticker=e,this.tasks=[],this.couldRunning=!1,this.applyNext=()=>{const t=this.tasks[0];t&&t.applyNext()},e.add(this.applyNext)}addTask(e){this.tasks.push(e),e.once(\"task-finish\",()=>{const t=this.tasks.indexOf(e);t>=0&&this.tasks.splice(t,1)}),e.once(\"task-error\",()=>{const t=this.tasks.indexOf(e);t>=0&&this.tasks.splice(t,1)})}start(){this.couldRunning=!0}stop(){this.couldRunning=!1}}var iI=function(i,e,t,n){return new(t||(t=Promise))(function(r,o){function s(u){try{l(n.next(u))}catch(h){o(h)}}function a(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof t?h:new t(function(d){d(h)})).then(s,a)}l((n=n.apply(i,e||[])).next())})};const rI=i=>new Promise(e=>setTimeout(e,i));class oI extends O.a{constructor(e,t){super(),this.slideIndex=e,this.taskId=t,this.uuid=xp(),this.isCancel=!1,this.tasks=[]}addMTask(e){this.tasks.push({fn:e,state:\"wait\",sub:[]})}addSubMTask(e){let t=this.tasks.findIndex(n=>n.state===\"running\");t<0&&(t=0),this.tasks[t].sub.push({fn:e,state:\"wait\",sub:[]})}cancel(){this.tasks=[],this.isCancel=!0}applyNext(){if(this.tasks.some(t=>t.state===\"running\")||this.tasks.some(t=>t.state===\"error\"))return;if(this.tasks.every(t=>t.state===\"finish\"))return void(this.isCancel||this.emit(\"task-finish\"));const e=this.tasks.find(t=>t.state===\"wait\");e&&(e.state=\"running\",e.fn.apply(null).then(()=>{if(e.state=\"finish\",e.sub.length>0){const t=this.tasks.findIndex(n=>n===e);this.tasks.splice(t+1,0,...e.sub)}}).catch(t=>{e.state=\"error\",Jn.error(`${t} ${t.stack}`,this.taskId),this.emit(\"task-error\",br.transform(t),this.slideIndex)}))}applyAll(){return iI(this,void 0,void 0,function*(){for(;!this.tasks.every(e=>e.state===\"finish\");)if(this.tasks.some(e=>e.state===\"running\"))yield rI(16);else{if(this.tasks.some(e=>e.state===\"error\"))return;{const e=this.tasks.find(t=>t.state===\"wait\");if(e){e.state=\"running\";try{if((yield a_(()=>e.fn.apply(null),2e4))===Nc)throw new br(us.RuntimeError,\"subtask apply timeout\");if(e.state=\"finish\",e.sub.length>0){const t=this.tasks.findIndex(n=>n===e);this.tasks.splice(t+1,0,...e.sub)}}catch(t){e.state=\"error\",Jn.error(`${t} ${t.stack}`,this.taskId),this.emit(\"task-error\",br.transform(t),this.slideIndex);break}}}}this.isCancel||this.emit(\"task-finish\")})}}var sI=v(54);const x_=new(v.n(sI)).a,aI=x_.getDevice(),lI=x_.getBrowser(),fg=x_.getOS(),mg={isDesktop(){let i=!0;return aI.type===\"mobile\"&&(i=!1),/Samsung/.test(lI.name||\"\")&&(i=!1),window.__nativeTags&&window.__nativeTags.platform&&(i=!1),i},isIOS(){let i=!1;return window.__nativeTags&&window.__nativeTags.platform&&/^ios/i.test(window.__nativeTags.platform)&&(i=!0),fg.name&&/iOS/.test(fg.name)&&(i=!0),i},isAndroid(){let i=!1;return window.__nativeTags&&window.__nativeTags.platform&&/^android/i.test(window.__nativeTags.platform)&&(i=!0),fg.name&&/android/i.test(fg.name)&&(i=!0),i},isLowGpuMemory(){var i,e;const t=(e=(i=window.__nativeTags)===null||i===void 0?void 0:i.platform)!==null&&e!==void 0?e:\"\";if(t){const n=t.split(\" \");if(n[1]){if(/^iPad/.test(n[1])){const r=n[1].match(/^iPad(\\d+)/);return!(r&&r[1]&&parseInt(r[1],10)>=6)}if(/^iPhone/.test(n[1])){const r=n[1].match(/^iPhone(\\d+)/);return!(r&&r[1]&&parseInt(r[1],10)>=9)}return!1}return!1}return!0}};var Uc=function(i,e,t,n){return new(t||(t=Promise))(function(r,o){function s(u){try{l(n.next(u))}catch(h){o(h)}}function a(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof t?h:new t(function(d){d(h)})).then(s,a)}l((n=n.apply(i,e||[])).next())})};class uI{constructor(e,t,n,r,o,s,a,l,u){this.loader=e,this.mode=t,this.renderer=n,this.ticker=r,this.view=o,this.clock=s,this.objPoolGroup=a,this.errorChannel=l,this.localstorage=u,this.currentStageIndex=0,this.cacheCount=mg.isDesktop()?2:1,this.stageStates=Object.create(null),this.stageJsons=Object.create(null),this.stageCtxs=Object.create(null),this.stageImpls=Object.create(null),this.taskId=\"\",this.url=\"\",this.microTaskManager=new nI(r)}setResourceData(e,t){this.taskId=e,this.url=t}createCtx(e){const{task:t}=this.stageStates[e];t.addMTask(()=>Uc(this,void 0,void 0,function*(){const n=new VC(this.loader),r=new O.a,o={mode:this.mode,renderer:this.renderer,graphicsTexture:new YC,stageWidth:0,stageHeight:0,ticker:this.ticker,timingTargets:new JC(r),eventHub:r,view:this.view,medias:Object.create(null),lastViewedIndex:0,conflictTimeNodeManager:new $C,clock:this.clock,spriteTexture:n,slideIndex:e,objectPoolGroup:this.objPoolGroup,hasBackgroundFillShape:!1,slideScopeEventHub:new O.a};this.stageCtxs[e]=o}))}loadStageJson(e){const{task:t}=this.stageStates[e];t.addMTask(()=>Uc(this,void 0,void 0,function*(){const n=yield this.loader.fetchJson(`${this.url}/${this.taskId}/jsonOutput/slide-${e}.json`);this.stageJsons[e]=n,this.stageCtxs[e].stageWidth=n.width,this.stageCtxs[e].stageHeight=n.height}))}loadSpriteSheets(e){const{task:t}=this.stageStates[e];t.addMTask(()=>{const n=this.stageJsons[e],{spriteTexture:r}=this.stageCtxs[e],{coloredSheets:o,sheets:s}=n,a=o||s;return a&&a.forEach(l=>{t.addSubMTask(()=>r.loadSpriteSheetItem(this.url,this.taskId,l))}),Promise.resolve()})}createStage(e){const{task:t}=this.stageStates[e];t.addMTask(()=>{const n=this.stageJsons[e],r=this.stageCtxs[e],o=new tI(n,r,{x:0,y:0},t);return this.stageImpls[e]=o,Promise.resolve()})}preRenderStage(e){const{task:t}=this.stageStates[e];t.addMTask(()=>(this.stageImpls[e].preRender(t),Promise.resolve()))}createGraphicsTexture(e){const{task:t}=this.stageStates[e];t.addMTask(()=>Uc(this,void 0,void 0,function*(){const n=this.stageCtxs[e];n.graphicsTexture.pack().forEach((r,o)=>{t.addSubMTask(()=>n.graphicsTexture.render(r,o,this.objPoolGroup))})}))}renderStage(e){const{task:t}=this.stageStates[e];t.addMTask(()=>Uc(this,void 0,void 0,function*(){const n=this.stageImpls[e],r=this.stageCtxs[e];yield n.render(t),t.addSubMTask(()=>Uc(this,void 0,void 0,function*(){var o;const s=`snapshot-${e.toString()}-start`;if(!(yield(o=this.localstorage)===null||o===void 0?void 0:o.getItem(s))&&Fr.platform.isLowGpuMemory()){n.createTiming(),n.container.visible=!0,n.collectMainSeqStartValue(),n.setMainSeqStep(0,\"start\");const a=Ao.create({width:n.json.width,height:n.json.height,resolution:1});r.renderer.render(n.container,{renderTexture:a});const l=r.renderer.plugins.extract.base64(a,\"image/jpeg\");this.localstorage.setItem(s,l,!0).catch(()=>{}),n.container.visible=!1,a.destroy(),n.timing&&(n.timing.destroy(),n.timing=void 0)}}))}))}destroyStageByIndex(e){this.stageStates[e].state===\"load\"&&this.stageStates[e].task.cancel(),delete this.stageStates[e],this.stageImpls[e].destroy(),delete this.stageImpls[e],delete this.stageCtxs[e]}destroyStage(){Object.keys(this.stageImpls).forEach(e=>{const t=parseInt(e,10);Math.abs(this.currentStageIndex-t)>this.cacheCount&&this.destroyStageByIndex(t)})}destroyAllStage(){Object.keys(this.stageImpls).forEach(e=>{const t=parseInt(e,10);this.destroyStageByIndex(t)})}preload(e,t=!1){if(this.stageImpls[e]||this.stageStates[e])return Promise.resolve();const n=new oI(e,this.taskId);return n.on(\"task-error\",(r,o)=>{this.errorChannel.emit(\"error\",r,o)}),this.stageStates[e]={state:\"load\",task:n},this.createCtx(e),this.loadStageJson(e),this.loadSpriteSheets(e),this.createStage(e),this.preRenderStage(e),this.createGraphicsTexture(e),this.renderStage(e),this.microTaskManager.addTask(n),t?n.applyAll():new Promise(r=>{n.once(\"task-finish\",()=>{this.stageStates[e].state=\"finish\",Object.keys(this.stageStates).length>2*this.cacheCount+1&&this.destroyStage(),r()})})}getStageJson(e){return this.stageJsons[e]||null}getStage(e){return Uc(this,void 0,void 0,function*(){this.currentStageIndex=e;const t=this.stageStates[e];return(t==null?void 0:t.state)===\"finish\"&&this.stageImpls[e]?this.stageImpls[e]:(t==null?void 0:t.state)===\"load\"?(yield t.task.applyAll(),this.stageImpls[e]):(yield this.preload(e,!0),this.stageImpls[e])})}}var rS=function(i,e,t,n){return new(t||(t=Promise))(function(r,o){function s(u){try{l(n.next(u))}catch(h){o(h)}}function a(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof t?h:new t(function(d){d(h)})).then(s,a)}l((n=n.apply(i,e||[])).next())})};$.config({storeName:\"slide_local_cache\"});class hI{constructor(){this.taskId=\"\",this.isIndexDBReady=!1,this.memoryCache=new Map,$.ready(()=>{this.isIndexDBReady=!0}).catch(()=>{Jn.warn(\"local storage not ready\",this.taskId)})}get couldUseIndexDBCache(){return this.isIndexDBReady&&this.taskId.length>0}attachTaskId(e){this.taskId=e}getItem(e){return rS(this,void 0,void 0,function*(){let t=null;return this.couldUseIndexDBCache&&(t=yield a_(()=>$.getItem(`${this.taskId}/${e}`),500)),t=t===Nc?null:t,t||this.memoryCache.get(e)||null})}setItem(e,t,n=!1){return rS(this,void 0,void 0,function*(){if(!this.couldUseIndexDBCache)return n&&this.memoryCache.set(e,t),Promise.resolve();(yield a_(()=>$.setItem(`${this.taskId}/${e}`,t).catch(()=>{n&&this.memoryCache.set(e,t)}),500))===Nc&&n&&this.memoryCache.set(e,t)})}dispose(){this.memoryCache=new Map,this.couldUseIndexDBCache&&$.keys().then(e=>{e.filter(t=>t.indexOf(this.taskId)>=0).forEach(t=>{$.removeItem(t).catch(()=>{})})})}}var Ap=function(i,e,t,n){return new(t||(t=Promise))(function(r,o){function s(u){try{l(n.next(u))}catch(h){o(h)}}function a(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof t?h:new t(function(d){d(h)})).then(s,a)}l((n=n.apply(i,e||[])).next())})};Q.skipHello();const oS={randomBar:\"RandomLines\",circle:\"Shape\",ripple:\"Ripples\",wipe:\"Erase\",dissolve:\"Dissolve\",morph:\"Smooth\",fade:\"FadeInOut\",push:\"Push\",split:\"Separation\",reveal:\"Display\",pull:\"Uncover\",cover:\"Cover\",flash:\"Flash\",checker:\"Checkerboard\",blinds:\"WindowShades\",curtains:\"Curtain\",fallOver:\"Fall\",drape:\"Suspension\",wheel:\"Clock\",comb:\"Combing\",warp:\"Scale\",peelOff:\"PeelOff\",flip:\"Flip\"},kt={mainSeqStepChange:\"mainSeqStepChange\",mainSeqStateChange:\"mainSeqStateChange\",interactiveSeqStateChange:\"interactiveSeqStateChange\",interactiveSeqAction:\"interactiveSeqAction\",mainSeqStepStart:\"mainSeqStepStart\",mainSeqStepEnd:\"mainSeqStepEnd\",slideChange:\"slideChange\",renderStart:\"renderStart\",renderEnd:\"renderEnd\",hyperlinkTrigger:\"hyperlinkTrigger\",animateStart:\"animateStart\",animateEnd:\"animateEnd\",mediaSeek:\"mediaSeek\",mediaPlay:\"mediaPlay\",mediaPause:\"mediaPause\",requestNextSlide:\"requestNextSlide\",requestPrevSlide:\"requestPrevSlide\",requestGotoSlide:\"requestGotoSlide\",userInput:\"userInput\"};class Fr extends O.a{constructor(e,t,n={}){super(),this.errorChannel=new O.a,this.transactionPlayer=new GA,this.transactionSprite=new lr,this.isForward=!0,this.drawCall=0,this.scale=1,this.prevSlideBase64=null,this.localStorage=new hI,this.fps=new BC,this.designWidth=0,this.designHeight=0,this.currentIndex=0,this.slideCount=0,this.runtime={drawCall:0,fps:0},this.onWebGLLost=()=>{this.errorChannel.emit(\"error\",new br(us.CanvasCrash,\"webgl context lost.\"))},this.mode=e;let r=Math.max(window.devicePixelRatio,2);mg.isDesktop()||(r=1),this.config={minFPS:Object(H.isUndefined)(n.minFPS)?30:n.minFPS,maxFPS:Object(H.isUndefined)(n.maxFPS)?40:n.maxFPS,resolution:Object(H.isUndefined)(n.resolution)?r:n.resolution,autoFPS:!Object(H.isUndefined)(n.autoFPS)&&n.autoFPS,autoResolution:!Object(H.isUndefined)(n.autoResolution)&&n.autoResolution,transactionBgColor:Object(H.isUndefined)(n.transactionBgColor)?0:n.transactionBgColor},this.loader=new kC(this.localStorage,t),this.app=new jm({antialias:!0,autoDensity:!1,backgroundColor:16777215}),this.updateConfig(this.config),this.app.view.style.zIndex=\"1\",this.app.stage.sortableChildren=!0;const o=this.app.renderer,{drawElements:s}=o.gl;o.gl.drawElements=(...a)=>{s.call(o.gl,...a),this.drawCall+=1},this.fps.on(\"update\",a=>{if(a<this.config.minFPS){if(this.config.autoResolution){const l=.7*this.scale,u=this.app.renderer.resolution,h=Math.max(l,u-.1);h>=l&&this.updateResolution(h)}if(this.config.autoFPS){const{minFPS:u,maxFPS:h}=this.app.ticker,d=Math.max(14,u-2),p=Math.max(14,h-2);d>=14&&p>=14&&(this.app.ticker.minFPS=d,this.app.ticker.maxFPS=p)}}else if(a>this.config.maxFPS){if(this.config.autoResolution){const l=this.scale*this.config.resolution,u=this.app.renderer.resolution,h=Math.min(l,u+.1);h<=this.config.resolution&&this.updateResolution(h)}if(this.config.autoFPS){const l=this.config.minFPS,u=this.config.maxFPS,{minFPS:h,maxFPS:d}=this.app.ticker,p=Math.min(l,h+2),m=Math.min(u,d+2);p<=l&&m<=u&&(this.app.ticker.minFPS=p,this.app.ticker.maxFPS=m)}}}),this.app.ticker.add(()=>{this.runtime.drawCall=this.drawCall,this.runtime.fps=Math.floor(this.app.ticker.minFPS),this.drawCall=0},null,as.LOW),this.clock=new zC(this.app.ticker),this.objPoolGroup=xp(),this.stagePool=new uI(this.loader,this.mode,this.app.renderer,this.app.ticker,this.app.view,this.clock,this.objPoolGroup,this.errorChannel,this.localStorage),this.app.view.addEventListener(\"webglcontextlost\",this.onWebGLLost)}get view(){return this.app.renderer?this.app.view:null}get nextSlideIndex(){var e;return!((e=this.currentStage)===null||e===void 0)&&e.json.nextIndex?this.currentStage.json.nextIndex:this.currentIndex+1}get prevSlideIndex(){var e;return!((e=this.currentStage)===null||e===void 0)&&e.json.prevIndex?this.currentStage.json.prevIndex:this.currentIndex-1}updateConfig(e){Object(H.isUndefined)(e.minFPS)||(this.config.minFPS=e.minFPS,this.app.ticker.minFPS=e.minFPS),Object(H.isUndefined)(e.maxFPS)||(this.config.maxFPS=e.maxFPS,this.app.ticker.maxFPS=e.maxFPS),Object(H.isUndefined)(e.resolution)||(this.config.resolution=e.resolution,this.updateResolution(this.scale*this.config.resolution)),Object(H.isUndefined)(e.autoFPS)||(this.config.autoFPS=e.autoFPS),Object(H.isUndefined)(e.autoResolution)||(this.config.autoResolution=e.autoResolution),Object(H.isUndefined)(e.transactionBgColor)||(this.config.transactionBgColor=e.transactionBgColor),this.taskId&&Jn.info(\"ppt player update config: \"+JSON.stringify(this.config),this.taskId)}preload(e){return Ap(this,void 0,void 0,function*(){e<1||e>this.slideCount||(Jn.info(`preload slide ${e} begin`,this.taskId),yield this.stagePool.preload(e),Jn.info(`preload slide ${e} end`,this.taskId))})}setResourceData(e,t){Jn.info(\"ppt player init config: \"+JSON.stringify(this.config),e),Jn.info(\"set resource to \"+t,e),this.taskId=e,this.url=t,this.stagePool.setResourceData(e,t),this.localStorage.attachTaskId(e),this.loader.attachTaskId(e)}setInteractive(e){this.app.stage.interactive=e,this.app.stage.interactiveChildren=e}translateEvent(e,t){t.forEach(n=>{e.on(n,(...r)=>{this.emit(n,...r)})})}renderSlide(e,t=!1){var n;return Ap(this,void 0,void 0,function*(){Jn.info(\"render slide \"+e,this.taskId),this.emit(kt.renderStart,e);const r=yield this.stagePool.getStage(e);this.translateEvent(r.ctx.eventHub,[kt.mainSeqStepChange,kt.mainSeqStateChange,kt.hyperlinkTrigger,kt.interactiveSeqAction,kt.mainSeqStepStart,kt.mainSeqStepEnd,kt.animateStart,kt.animateEnd,kt.mediaPlay,kt.mediaPause,kt.mediaSeek,kt.requestGotoSlide,kt.requestNextSlide,kt.requestPrevSlide,kt.interactiveSeqStateChange,kt.userInput]),this.currentIndex=Number(e);const{width:o,height:s,slideCount:a}=r.json;this.slideCount=a,this.designWidth=o,this.designHeight=s,r.json.transition&&r.json.transition.type&&!this.prevSlideBase64&&this.currentStage&&(this.prevSlideBase64=this.getBase64(this.currentStage)),(n=this.currentStage)===null||n===void 0||n.clearOnSlideChange();const l=this.currentStage;this.currentStage=r,r.initOnReuse(),r.createTiming(),r.container.visible=!0,r.collectMainSeqStartValue(),this.isForward?r.setMainSeqStep(0,\"start\"):r.setMainSeqStep(-1,\"end\");let u=null;if(r.json.transition&&r.json.transition.type){const d=e.toString()+(this.isForward||t?\"-start\":\"-end\");u=(yield this.localStorage.getItem(\"snapshot-\"+d))||this.getBase64(this.currentStage)}r.container.visible=!1,this.app.stage.addChild(r.container);let{transition:h}=r.json;!this.isForward&&(l==null?void 0:l.json.transition)&&(h=l.json.transition),this.prevSlideBase64&&u&&h&&h.type&&l&&r&&(yield this.playTransaction(this.prevSlideBase64,u,h,l,r),this.prevSlideBase64=null),this.isForward?yield r.startTiming():r.setMainSeqApplied(),this.updateResolution(this.config.resolution*this.scale),r.container.visible=!0,l&&(l.setMainSeqStep(0,\"start\"),l.clearOnTransactionEnd(),this.app.stage.removeChild(l.container)),r.ctx.slideScopeEventHub.emit(\"slide-render\",r.ctx.slideIndex),this.emit(kt.renderEnd,e),this.emit(kt.slideChange,e),this.preload(e+1).catch(d=>{this.errorChannel.emit(\"error\",br.transform(d),e+1)}),this.preload(e-1).catch(d=>{this.errorChannel.emit(\"error\",br.transform(d),e-1)})})}getBase64(e){if(!e.container.transform)return null;const t=Ao.create({width:this.designWidth,height:this.designHeight,resolution:1});this.app.renderer.render(e.container,{renderTexture:t});const n=this.app.renderer.plugins.extract.base64(t,\"image/jpeg\");return t.destroy(!0),n}playTransaction(e,t,n,r,o){return Ap(this,void 0,void 0,function*(){const s=this.app.view.parentElement;if(e&&t&&s&&oS[n.type]&&this.transactionPlayer){this.transactionSprite.zIndex=999,this.transactionSprite.visible=!1,this.app.stage.addChild(this.transactionSprite);const a=this.transactionPlayer.renderer.domElement,l=rn.from(a),u=()=>l.update();return this.app.ticker.add(u),this.transactionSprite.texture=l,setTimeout(()=>{this.transactionSprite.visible=!0},100),new Promise(h=>{var d,p,m,g;(d=this.transactionPlayer)===null||d===void 0||d.play({reverse:!this.isForward,prevTextureUrl:e,nextTextureUrl:t,textureWidth:this.designWidth,textureHeight:this.designHeight,presetType:oS[n.type],stageWidth:this.designWidth,stageHeight:this.designHeight,duration:(m=(p=this.currentStage)===null||p===void 0?void 0:p.json.transition)===null||m===void 0?void 0:m.dur,delay:0,clearColor:this.config.transactionBgColor,maxFPS:Math.ceil((g=this.config.maxFPS)!==null&&g!==void 0?g:60),onTransactionEnd:()=>{var _,y;h(),r.container.visible=!1,o.container.visible=!0,(_=this.app.stage)===null||_===void 0||_.removeChild(this.transactionSprite),(y=this.app.ticker)===null||y===void 0||y.remove(u)}})})}return Promise.resolve()})}scaleView(e,t=!1){if(this.view&&(this.view.style.width=Math.floor(this.designWidth*e)+\"px\",this.view.style.height=Math.floor(this.designHeight*e)+\"px\"),t){this.scale=e;const n=this.scale*this.config.resolution;this.updateResolution(n)}}updateResolution(e){this.app.ticker.addOnce(()=>{let t=mg.isDesktop()?e:1;for(;t*this.designWidth>5120||t*this.designHeight>5120;)t-=.1;this.app.renderer.resolution=t,this.app.renderer.plugins.interaction.resolution=this.app.renderer.resolution,this.app.renderer.resize(this.designWidth,this.designHeight)})}nextStep(){var e;Jn.info(\"ppt play trigger next step\",this.taskId);try{(e=this.currentStage)===null||e===void 0||e.nextStep()}catch(t){this.errorChannel.emit(\"error\",br.transform(t),this.currentIndex)}}prevStep(){var e;Jn.info(\"ppt play trigger prev step\",this.taskId);try{(e=this.currentStage)===null||e===void 0||e.prevStep()}catch(t){this.errorChannel.emit(\"error\",br.transform(t),this.currentIndex)}}mainSeqLength(){var e,t;return(t=(e=this.currentStage)===null||e===void 0?void 0:e.mainSeqLength())!==null&&t!==void 0?t:0}mainSeqStep(){var e,t;return(t=(e=this.currentStage)===null||e===void 0?void 0:e.mainSeqStep())!==null&&t!==void 0?t:0}setMainSeqStep(e,t){var n;(n=this.currentStage)===null||n===void 0||n.setMainSeqStep(e,t)}mainSeqState(){var e,t;return(t=(e=this.currentStage)===null||e===void 0?void 0:e.mainSeqState())!==null&&t!==void 0?t:null}mainSeqHasNextStep(){var e,t;return(t=(e=this.currentStage)===null||e===void 0?void 0:e.mainSeqHasNextStep())!==null&&t!==void 0&&t}mainSeqHasPrevStep(){var e,t;return(t=(e=this.currentStage)===null||e===void 0?void 0:e.mainSeqHasPrevStep())!==null&&t!==void 0&&t}nextTick(e){this.app.ticker.addOnce(()=>{e()},as.LOW)}applyInteractiveAction(e){var t;(t=this.currentStage)===null||t===void 0||t.applyInteractiveAction(e)}seekInteractiveSeqToEnd(e){var t;(t=this.currentStage)===null||t===void 0||t.seekInteractiveSeqToEnd(e)}setInteractiveSeqState(e,t,n){var r;(r=this.currentStage)===null||r===void 0||r.setInteractiveSeqState(e,t,n)}setMediaState(e,t){var n;return Ap(this,void 0,void 0,function*(){yield(n=this.currentStage)===null||n===void 0?void 0:n.setMediaState(e,t)})}setMediaCurrentTime(e,t){var n;(n=this.currentStage)===null||n===void 0||n.setMediaCurrentTime(e,t)}pause(){this.app.ticker.stop()}resume(){this.app.ticker.start()}getSnapshot(){return this.currentStage&&this.getBase64(this.currentStage)||\"\"}createSnapshotForNextSlide(e){return Ap(this,void 0,void 0,function*(){const t=this.nextSlideIndex,n=this.stagePool.getStageJson(t);if(n&&n.transition&&n.transition.type&&this.currentStage&&this.transactionPlayer){const r=e?`snapshot-${this.currentStage.json.index}-start`:`snapshot-${this.currentStage.json.index}-end`;if(this.currentStage.timing&&(e?this.currentStage.timing.mainSeqHasPrevStep():this.currentStage.timing.mainSeqHasNextStep()))this.prevSlideBase64=this.getBase64(this.currentStage);else{const o=yield this.localStorage.getItem(r);o?this.prevSlideBase64=o:(this.prevSlideBase64=this.getBase64(this.currentStage),this.localStorage.setItem(r,this.prevSlideBase64,!0).catch(()=>{}))}}})}clearLocalCache(){this.localStorage.dispose()}static clearLocalCache(){$.clear()}destroy(){var e;try{this.app.view.removeEventListener(\"webglcontextlost\",this.onWebGLLost);try{this.app.renderer.filter.texturePool.clear(!0)}catch{}l_.collectObjectByGroup(this.objPoolGroup),u_.collectObjectByGroup(this.objPoolGroup),(e=this.transactionPlayer)===null||e===void 0||e.destroy(),this.loader.destroy(),this.fps.destroy(),this.stagePool.destroyAllStage();try{this.app.renderer.gl.getExtension(\"WEBGL_lose_context\").loseContext()}catch{}this.app.destroy(!0,{children:!0,texture:!0,baseTexture:!0})}catch{}}}Fr.platform=mg,Fr.RtcAudioClazz=null;var Rp,Nu=[],sS=\"ResizeObserver loop completed with undelivered notifications.\";(function(i){i.BORDER_BOX=\"border-box\",i.CONTENT_BOX=\"content-box\",i.DEVICE_PIXEL_CONTENT_BOX=\"device-pixel-content-box\"})(Rp||(Rp={}));var b_,Du=function(i){return Object.freeze(i)},cI=function(i,e){this.inlineSize=i,this.blockSize=e,Du(this)},aS=function(){function i(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Du(this)}return i.prototype.toJSON=function(){var e=this;return{x:e.x,y:e.y,top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}},i.fromRect=function(e){return new i(e.x,e.y,e.width,e.height)},i}(),w_=function(i){return i instanceof SVGElement&&\"getBBox\"in i},lS=function(i){if(w_(i)){var e=i.getBBox(),t=e.width,n=e.height;return!t&&!n}var r=i,o=r.offsetWidth,s=r.offsetHeight;return!(o||s||i.getClientRects().length)},uS=function(i){var e,t;if(i instanceof Element)return!0;var n=(t=(e=i)===null||e===void 0?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView;return!!(n&&i instanceof n.Element)},Cp=typeof window!=\"undefined\"?window:{},gg=new WeakMap,hS=/auto|scroll/,dI=/^tb|vertical/,pI=/msie|trident/i.test(Cp.navigator&&Cp.navigator.userAgent),Us=function(i){return parseFloat(i||\"0\")},Gc=function(i,e,t){return i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=!1),new cI((t?e:i)||0,(t?i:e)||0)},cS=Du({devicePixelContentBoxSize:Gc(),borderBoxSize:Gc(),contentBoxSize:Gc(),contentRect:new aS(0,0,0,0)}),dS=function(i,e){if(e===void 0&&(e=!1),gg.has(i)&&!e)return gg.get(i);if(lS(i))return gg.set(i,cS),cS;var t=getComputedStyle(i),n=w_(i)&&i.ownerSVGElement&&i.getBBox(),r=!pI&&t.boxSizing===\"border-box\",o=dI.test(t.writingMode||\"\"),s=!n&&hS.test(t.overflowY||\"\"),a=!n&&hS.test(t.overflowX||\"\"),l=n?0:Us(t.paddingTop),u=n?0:Us(t.paddingRight),h=n?0:Us(t.paddingBottom),d=n?0:Us(t.paddingLeft),p=n?0:Us(t.borderTopWidth),m=n?0:Us(t.borderRightWidth),g=n?0:Us(t.borderBottomWidth),_=d+u,y=l+h,w=(n?0:Us(t.borderLeftWidth))+m,R=p+g,F=a?i.offsetHeight-R-i.clientHeight:0,U=s?i.offsetWidth-w-i.clientWidth:0,B=r?_+w:0,V=r?y+R:0,G=n?n.width:Us(t.width)-B-U,W=n?n.height:Us(t.height)-V-F,ge=G+_+U+w,he=W+y+F+R,se=Du({devicePixelContentBoxSize:Gc(Math.round(G*devicePixelRatio),Math.round(W*devicePixelRatio),o),borderBoxSize:Gc(ge,he,o),contentBoxSize:Gc(G,W,o),contentRect:new aS(d,l,G,W)});return gg.set(i,se),se},pS=function(i,e,t){var n=dS(i,t),r=n.borderBoxSize,o=n.contentBoxSize,s=n.devicePixelContentBoxSize;switch(e){case Rp.DEVICE_PIXEL_CONTENT_BOX:return s;case Rp.BORDER_BOX:return r;default:return o}},fI=function(i){var e=dS(i);this.target=i,this.contentRect=e.contentRect,this.borderBoxSize=Du([e.borderBoxSize]),this.contentBoxSize=Du([e.contentBoxSize]),this.devicePixelContentBoxSize=Du([e.devicePixelContentBoxSize])},fS=function(i){if(lS(i))return 1/0;for(var e=0,t=i.parentNode;t;)e+=1,t=t.parentNode;return e},mI=function(){var i=1/0,e=[];Nu.forEach(function(r){if(r.activeTargets.length!==0){var o=[];r.activeTargets.forEach(function(s){var a=new fI(s.target),l=fS(s.target);o.push(a),s.lastReportedSize=pS(s.target,s.observedBox),l<i&&(i=l)}),e.push(function(){r.callback.call(r.observer,o,r.observer)}),r.activeTargets.splice(0,r.activeTargets.length)}});for(var t=0,n=e;t<n.length;t++)(0,n[t])();return i},mS=function(i){Nu.forEach(function(e){e.activeTargets.splice(0,e.activeTargets.length),e.skippedTargets.splice(0,e.skippedTargets.length),e.observationTargets.forEach(function(t){t.isActive()&&(fS(t.target)>i?e.activeTargets.push(t):e.skippedTargets.push(t))})})},gI=function(){var i,e=0;for(mS(e);Nu.some(function(t){return t.activeTargets.length>0});)e=mI(),mS(e);return Nu.some(function(t){return t.skippedTargets.length>0})&&(typeof ErrorEvent==\"function\"?i=new ErrorEvent(\"error\",{message:sS}):((i=document.createEvent(\"Event\")).initEvent(\"error\",!1,!1),i.message=sS),window.dispatchEvent(i)),e>0},gS=[],vI=function(i){if(!b_){var e=0,t=document.createTextNode(\"\");new MutationObserver(function(){return gS.splice(0).forEach(function(n){return n()})}).observe(t,{characterData:!0}),b_=function(){t.textContent=\"\"+(e?e--:e++)}}gS.push(i),b_()},S_=0,_I={attributes:!0,characterData:!0,childList:!0,subtree:!0},vS=[\"resize\",\"load\",\"transitionend\",\"animationend\",\"animationstart\",\"animationiteration\",\"keyup\",\"keydown\",\"mouseup\",\"mousedown\",\"mouseover\",\"mouseout\",\"blur\",\"focus\"],_S=function(i){return i===void 0&&(i=0),Date.now()+i},T_=!1,E_=new(function(){function i(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return i.prototype.run=function(e){var t=this;if(e===void 0&&(e=250),!T_){T_=!0;var n,r=_S(e);n=function(){var o=!1;try{o=gI()}finally{if(T_=!1,e=r-_S(),!S_)return;o?t.run(1e3):e>0?t.run(e):t.start()}},vI(function(){requestAnimationFrame(n)})}},i.prototype.schedule=function(){this.stop(),this.run()},i.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,_I)};document.body?t():Cp.addEventListener(\"DOMContentLoaded\",t)},i.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),vS.forEach(function(t){return Cp.addEventListener(t,e.listener,!0)}))},i.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),vS.forEach(function(t){return Cp.removeEventListener(t,e.listener,!0)}),this.stopped=!0)},i}()),yS=function(i){!S_&&i>0&&E_.start(),!(S_+=i)&&E_.stop()},yI=function(){function i(e,t){this.target=e,this.observedBox=t||Rp.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return i.prototype.isActive=function(){var e,t=pS(this.target,this.observedBox,!0);return e=this.target,w_(e)||function(n){switch(n.tagName){case\"INPUT\":if(n.type!==\"image\")break;case\"VIDEO\":case\"AUDIO\":case\"EMBED\":case\"OBJECT\":case\"CANVAS\":case\"IFRAME\":case\"IMG\":return!0}return!1}(e)||getComputedStyle(e).display!==\"inline\"||(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},i}(),xI=function(i,e){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=i,this.callback=e},vg=new WeakMap,xS=function(i,e){for(var t=0;t<i.length;t+=1)if(i[t].target===e)return t;return-1},_g=function(){function i(){}return i.connect=function(e,t){var n=new xI(e,t);vg.set(e,n)},i.observe=function(e,t,n){var r=vg.get(e),o=r.observationTargets.length===0;xS(r.observationTargets,t)<0&&(o&&Nu.push(r),r.observationTargets.push(new yI(t,n&&n.box)),yS(1),E_.schedule())},i.unobserve=function(e,t){var n=vg.get(e),r=xS(n.observationTargets,t),o=n.observationTargets.length===1;r>=0&&(o&&Nu.splice(Nu.indexOf(n),1),n.observationTargets.splice(r,1),yS(-1))},i.disconnect=function(e){var t=this,n=vg.get(e);n.observationTargets.slice().forEach(function(r){return t.unobserve(e,r.target)}),n.activeTargets.splice(0,n.activeTargets.length)},i}(),bI=function(){function i(e){if(arguments.length===0)throw new TypeError(\"Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.\");if(typeof e!=\"function\")throw new TypeError(\"Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.\");_g.connect(this,e)}return i.prototype.observe=function(e,t){if(arguments.length===0)throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.\");if(!uS(e))throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element\");_g.observe(this,e,t)},i.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.\");if(!uS(e))throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element\");_g.unobserve(this,e)},i.prototype.disconnect=function(){_g.disconnect(this)},i.toString=function(){return\"function ResizeObserver () { [polyfill code] }\"},i}(),wI=function(i,e,t,n){return new(t||(t=Promise))(function(r,o){function s(u){try{l(n.next(u))}catch(h){o(h)}}function a(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof t?h:new t(function(d){d(h)})).then(s,a)}l((n=n.apply(i,e||[])).next())})},SI=function(i,e){var t,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol==\"function\"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return function(h){if(t)throw new TypeError(\"Generator is already executing.\");for(;s;)try{if(t=1,n&&(r=2&h[0]?n.return:h[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,h[1])).done)return r;switch(n=0,r&&(h=[2&h[0],r.value]),h[0]){case 0:case 1:r=h;break;case 4:return s.label++,{value:h[1],done:!1};case 5:s.label++,n=h[1],h=[0];continue;case 7:h=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!((r=r.length>0&&r[r.length-1])||h[0]!==6&&h[0]!==2)){s=0;continue}if(h[0]===3&&(!r||h[1]>r[0]&&h[1]<r[3])){s.label=h[1];break}if(h[0]===6&&s.label<r[1]){s.label=r[1],r=h;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(h);break}r[2]&&s.ops.pop(),s.trys.pop();continue}h=e.call(i,s)}catch(d){h=[6,d],n=0}finally{t=r=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([l,u])}}},TI=function(){function i(e,t,n,r,o){this.state=\"idle\",this.index=-1,this.slideIndex=-1,this.fn=n,this.index=e,this.slideIndex=t,this.eventHub=r,this.id=o}return i.prototype.apply=function(){return wI(this,void 0,void 0,function(){var e;return SI(this,function(t){switch(t.label){case 0:this.eventHub.emit(\"task-start\",this),t.label=1;case 1:return t.trys.push([1,3,,4]),this.state=\"start\",[4,this.fn()];case 2:return t.sent(),this.state=\"end\",this.eventHub.emit(\"task-end\",this),[3,4];case 3:return e=t.sent(),this.eventHub.emit(\"task-error\",{task:this,error:e}),[3,4];case 4:return[2]}})})},i}(),EI=function(){function i(){var e=this;this.eventHub=new O.a,this.tasks=[],this.index=0,this.eventHub.on(\"task-end\",function(t){var n,r=e.tasks.findIndex(function(s){return s.index===t.index}),o=r+1;o>=0&&((n=e.tasks[o])===null||n===void 0||n.apply()),r>=0&&(e.tasks.splice(r,1),e.replaceIdleTask()),e.eventHub.emit(\"task-end-\"+t.id)}),this.eventHub.on(\"task-error\",function(t){var n=t.task,r=e.tasks.findIndex(function(o){return o.index===n.index});r>=0&&(e.tasks.splice(r,1),e.replaceIdleTask())})}return i.prototype.replaceIdleTask=function(){for(var e,t=this,n=new Set,r=0,o=this.tasks.length;r<o;r++)this.tasks[r].state===\"idle\"&&((e=this.tasks[r+1])===null||e===void 0?void 0:e.state)===\"idle\"&&n.add(r);Array.from(n).forEach(function(s){t.tasks.splice(s,1)})},i.prototype.addTask=function(e,t,n){var r=new TI(this.index++,t,e,this.eventHub,n);this.tasks.push(r),this.tasks.sort(function(o,s){return o.index-s.index}),this.replaceIdleTask(),this.tasks.length===1&&r.apply()},i.prototype.hasStartTask=function(){return this.tasks.some(function(e){return e.state===\"start\"})},i}();function Hc(i,e){var t=i.__state.conversionName.toString(),n=Math.round(i.r),r=Math.round(i.g),o=Math.round(i.b),s=i.a,a=Math.round(i.h),l=i.s.toFixed(1),u=i.v.toFixed(1);if(e||t===\"THREE_CHAR_HEX\"||t===\"SIX_CHAR_HEX\"){for(var h=i.hex.toString(16);h.length<6;)h=\"0\"+h;return\"#\"+h}return t===\"CSS_RGB\"?\"rgb(\"+n+\",\"+r+\",\"+o+\")\":t===\"CSS_RGBA\"?\"rgba(\"+n+\",\"+r+\",\"+o+\",\"+s+\")\":t===\"HEX\"?\"0x\"+i.hex.toString(16):t===\"RGB_ARRAY\"?\"[\"+n+\",\"+r+\",\"+o+\"]\":t===\"RGBA_ARRAY\"?\"[\"+n+\",\"+r+\",\"+o+\",\"+s+\"]\":t===\"RGB_OBJ\"?\"{r:\"+n+\",g:\"+r+\",b:\"+o+\"}\":t===\"RGBA_OBJ\"?\"{r:\"+n+\",g:\"+r+\",b:\"+o+\",a:\"+s+\"}\":t===\"HSV_OBJ\"?\"{h:\"+a+\",s:\"+l+\",v:\"+u+\"}\":t===\"HSVA_OBJ\"?\"{h:\"+a+\",s:\"+l+\",v:\"+u+\",a:\"+s+\"}\":\"unknown format\"}var bS=Array.prototype.forEach,Pp=Array.prototype.slice,ht={BREAK:{},extend:function(i){return this.each(Pp.call(arguments,1),function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(t){this.isUndefined(e[t])||(i[t]=e[t])}.bind(this))},this),i},defaults:function(i){return this.each(Pp.call(arguments,1),function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(t){this.isUndefined(i[t])&&(i[t]=e[t])}.bind(this))},this),i},compose:function(){var i=Pp.call(arguments);return function(){for(var e=Pp.call(arguments),t=i.length-1;t>=0;t--)e=[i[t].apply(this,e)];return e[0]}},each:function(i,e,t){if(i){if(bS&&i.forEach&&i.forEach===bS)i.forEach(e,t);else if(i.length===i.length+0){var n,r=void 0;for(r=0,n=i.length;r<n;r++)if(r in i&&e.call(t,i[r],r)===this.BREAK)return}else for(var o in i)if(e.call(t,i[o],o)===this.BREAK)return}},defer:function(i){setTimeout(i,0)},debounce:function(i,e,t){var n=void 0;return function(){var r=this,o=arguments;function s(){n=null,t||i.apply(r,o)}var a=t||!n;clearTimeout(n),n=setTimeout(s,e),a&&i.apply(r,o)}},toArray:function(i){return i.toArray?i.toArray():Pp.call(i)},isUndefined:function(i){return i===void 0},isNull:function(i){return i===null},isNaN:function(i){function e(t){return i.apply(this,arguments)}return e.toString=function(){return i.toString()},e}(function(i){return isNaN(i)}),isArray:Array.isArray||function(i){return i.constructor===Array},isObject:function(i){return i===Object(i)},isNumber:function(i){return i===i+0},isString:function(i){return i===i+\"\"},isBoolean:function(i){return i===!1||i===!0},isFunction:function(i){return i instanceof Function}},MI=[{litmus:ht.isString,conversions:{THREE_CHAR_HEX:{read:function(i){var e=i.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return e!==null&&{space:\"HEX\",hex:parseInt(\"0x\"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString(),0)}},write:Hc},SIX_CHAR_HEX:{read:function(i){var e=i.match(/^#([A-F0-9]{6})$/i);return e!==null&&{space:\"HEX\",hex:parseInt(\"0x\"+e[1].toString(),0)}},write:Hc},CSS_RGB:{read:function(i){var e=i.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);return e!==null&&{space:\"RGB\",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:Hc},CSS_RGBA:{read:function(i){var e=i.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);return e!==null&&{space:\"RGB\",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:Hc}}},{litmus:ht.isNumber,conversions:{HEX:{read:function(i){return{space:\"HEX\",hex:i,conversionName:\"HEX\"}},write:function(i){return i.hex}}}},{litmus:ht.isArray,conversions:{RGB_ARRAY:{read:function(i){return i.length===3&&{space:\"RGB\",r:i[0],g:i[1],b:i[2]}},write:function(i){return[i.r,i.g,i.b]}},RGBA_ARRAY:{read:function(i){return i.length===4&&{space:\"RGB\",r:i[0],g:i[1],b:i[2],a:i[3]}},write:function(i){return[i.r,i.g,i.b,i.a]}}}},{litmus:ht.isObject,conversions:{RGBA_OBJ:{read:function(i){return!!(ht.isNumber(i.r)&&ht.isNumber(i.g)&&ht.isNumber(i.b)&&ht.isNumber(i.a))&&{space:\"RGB\",r:i.r,g:i.g,b:i.b,a:i.a}},write:function(i){return{r:i.r,g:i.g,b:i.b,a:i.a}}},RGB_OBJ:{read:function(i){return!!(ht.isNumber(i.r)&&ht.isNumber(i.g)&&ht.isNumber(i.b))&&{space:\"RGB\",r:i.r,g:i.g,b:i.b}},write:function(i){return{r:i.r,g:i.g,b:i.b}}},HSVA_OBJ:{read:function(i){return!!(ht.isNumber(i.h)&&ht.isNumber(i.s)&&ht.isNumber(i.v)&&ht.isNumber(i.a))&&{space:\"HSV\",h:i.h,s:i.s,v:i.v,a:i.a}},write:function(i){return{h:i.h,s:i.s,v:i.v,a:i.a}}},HSV_OBJ:{read:function(i){return!!(ht.isNumber(i.h)&&ht.isNumber(i.s)&&ht.isNumber(i.v))&&{space:\"HSV\",h:i.h,s:i.s,v:i.v}},write:function(i){return{h:i.h,s:i.s,v:i.v}}}}}],Ip=void 0,yg=void 0,M_=function(){yg=!1;var i=arguments.length>1?ht.toArray(arguments):arguments[0];return ht.each(MI,function(e){if(e.litmus(i))return ht.each(e.conversions,function(t,n){if(Ip=t.read(i),yg===!1&&Ip!==!1)return yg=Ip,Ip.conversionName=n,Ip.conversion=t,ht.BREAK}),ht.BREAK}),yg},wS=void 0,xg={hsv_to_rgb:function(i,e,t){var n=Math.floor(i/60)%6,r=i/60-Math.floor(i/60),o=t*(1-e),s=t*(1-r*e),a=t*(1-(1-r)*e),l=[[t,a,o],[s,t,o],[o,t,a],[o,s,t],[a,o,t],[t,o,s]][n];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(i,e,t){var n=Math.min(i,e,t),r=Math.max(i,e,t),o=r-n,s=void 0;return r===0?{h:NaN,s:0,v:0}:(s=i===r?(e-t)/o:e===r?2+(t-i)/o:4+(i-e)/o,(s/=6)<0&&(s+=1),{h:360*s,s:o/r,v:r/255})},rgb_to_hex:function(i,e,t){var n=this.hex_with_component(0,2,i);return n=this.hex_with_component(n,1,e),n=this.hex_with_component(n,0,t)},component_from_hex:function(i,e){return i>>8*e&255},hex_with_component:function(i,e,t){return t<<(wS=8*e)|i&~(255<<wS)}},AI=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(i){return typeof i}:function(i){return i&&typeof Symbol==\"function\"&&i.constructor===Symbol&&i!==Symbol.prototype?\"symbol\":typeof i},hs=function(i,e){if(!(i instanceof e))throw new TypeError(\"Cannot call a class as a function\")},cs=function(){function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),ml=function i(e,t,n){e===null&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===void 0){var o=Object.getPrototypeOf(e);return o===null?void 0:i(o,t,n)}if(\"value\"in r)return r.value;var s=r.get;return s!==void 0?s.call(n):void 0},gl=function(i,e){if(typeof e!=\"function\"&&e!==null)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(i,e):i.__proto__=e)},vl=function(i,e){if(!i)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||typeof e!=\"object\"&&typeof e!=\"function\"?i:e},Qi=function(){function i(){if(hs(this,i),this.__state=M_.apply(this,arguments),this.__state===!1)throw new Error(\"Failed to interpret color arguments\");this.__state.a=this.__state.a||1}return cs(i,[{key:\"toString\",value:function(){return Hc(this)}},{key:\"toHexString\",value:function(){return Hc(this,!0)}},{key:\"toOriginal\",value:function(){return this.__state.conversion.write(this)}}]),i}();function A_(i,e,t){Object.defineProperty(i,e,{get:function(){return this.__state.space===\"RGB\"||Qi.recalculateRGB(this,e,t),this.__state[e]},set:function(n){this.__state.space!==\"RGB\"&&(Qi.recalculateRGB(this,e,t),this.__state.space=\"RGB\"),this.__state[e]=n}})}function R_(i,e){Object.defineProperty(i,e,{get:function(){return this.__state.space===\"HSV\"||Qi.recalculateHSV(this),this.__state[e]},set:function(t){this.__state.space!==\"HSV\"&&(Qi.recalculateHSV(this),this.__state.space=\"HSV\"),this.__state[e]=t}})}Qi.recalculateRGB=function(i,e,t){if(i.__state.space===\"HEX\")i.__state[e]=xg.component_from_hex(i.__state.hex,t);else{if(i.__state.space!==\"HSV\")throw new Error(\"Corrupted color state\");ht.extend(i.__state,xg.hsv_to_rgb(i.__state.h,i.__state.s,i.__state.v))}},Qi.recalculateHSV=function(i){var e=xg.rgb_to_hsv(i.r,i.g,i.b);ht.extend(i.__state,{s:e.s,v:e.v}),ht.isNaN(e.h)?ht.isUndefined(i.__state.h)&&(i.__state.h=0):i.__state.h=e.h},Qi.COMPONENTS=[\"r\",\"g\",\"b\",\"h\",\"s\",\"v\",\"hex\",\"a\"],A_(Qi.prototype,\"r\",2),A_(Qi.prototype,\"g\",1),A_(Qi.prototype,\"b\",0),R_(Qi.prototype,\"h\"),R_(Qi.prototype,\"s\"),R_(Qi.prototype,\"v\"),Object.defineProperty(Qi.prototype,\"a\",{get:function(){return this.__state.a},set:function(i){this.__state.a=i}}),Object.defineProperty(Qi.prototype,\"hex\",{get:function(){return this.__state.space!==\"HEX\"&&(this.__state.hex=xg.rgb_to_hex(this.r,this.g,this.b),this.__state.space=\"HEX\"),this.__state.hex},set:function(i){this.__state.space=\"HEX\",this.__state.hex=i}});var Fu=function(){function i(e,t){hs(this,i),this.initialValue=e[t],this.domElement=document.createElement(\"div\"),this.object=e,this.property=t,this.__onChange=void 0,this.__onFinishChange=void 0}return cs(i,[{key:\"onChange\",value:function(e){return this.__onChange=e,this}},{key:\"onFinishChange\",value:function(e){return this.__onFinishChange=e,this}},{key:\"setValue\",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:\"getValue\",value:function(){return this.object[this.property]}},{key:\"updateDisplay\",value:function(){return this}},{key:\"isModified\",value:function(){return this.initialValue!==this.getValue()}}]),i}(),SS={};ht.each({HTMLEvents:[\"change\"],MouseEvents:[\"click\",\"mousemove\",\"mousedown\",\"mouseup\",\"mouseover\"],KeyboardEvents:[\"keydown\"]},function(i,e){ht.each(i,function(t){SS[t]=e})});var RI=/(\\d+(\\.\\d+)?)px/;function Gs(i){if(i===\"0\"||ht.isUndefined(i))return 0;var e=i.match(RI);return ht.isNull(e)?0:parseFloat(e[1])}var qe={makeSelectable:function(i,e){i!==void 0&&i.style!==void 0&&(i.onselectstart=e?function(){return!1}:function(){},i.style.MozUserSelect=e?\"auto\":\"none\",i.style.KhtmlUserSelect=e?\"auto\":\"none\",i.unselectable=e?\"on\":\"off\")},makeFullscreen:function(i,e,t){var n=t,r=e;ht.isUndefined(r)&&(r=!0),ht.isUndefined(n)&&(n=!0),i.style.position=\"absolute\",r&&(i.style.left=0,i.style.right=0),n&&(i.style.top=0,i.style.bottom=0)},fakeEvent:function(i,e,t,n){var r=t||{},o=SS[e];if(!o)throw new Error(\"Event type \"+e+\" not supported.\");var s=document.createEvent(o);switch(o){case\"MouseEvents\":var a=r.x||r.clientX||0,l=r.y||r.clientY||0;s.initMouseEvent(e,r.bubbles||!1,r.cancelable||!0,window,r.clickCount||1,0,0,a,l,!1,!1,!1,!1,0,null);break;case\"KeyboardEvents\":var u=s.initKeyboardEvent||s.initKeyEvent;ht.defaults(r,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),u(e,r.bubbles||!1,r.cancelable,window,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode);break;default:s.initEvent(e,r.bubbles||!1,r.cancelable||!0)}ht.defaults(s,n),i.dispatchEvent(s)},bind:function(i,e,t,n){var r=n||!1;return i.addEventListener?i.addEventListener(e,t,r):i.attachEvent&&i.attachEvent(\"on\"+e,t),qe},unbind:function(i,e,t,n){var r=n||!1;return i.removeEventListener?i.removeEventListener(e,t,r):i.detachEvent&&i.detachEvent(\"on\"+e,t),qe},addClass:function(i,e){if(i.className===void 0)i.className=e;else if(i.className!==e){var t=i.className.split(/ +/);t.indexOf(e)===-1&&(t.push(e),i.className=t.join(\" \").replace(/^\\s+/,\"\").replace(/\\s+$/,\"\"))}return qe},removeClass:function(i,e){if(e)if(i.className===e)i.removeAttribute(\"class\");else{var t=i.className.split(/ +/),n=t.indexOf(e);n!==-1&&(t.splice(n,1),i.className=t.join(\" \"))}else i.className=void 0;return qe},hasClass:function(i,e){return new RegExp(\"(?:^|\\\\s+)\"+e+\"(?:\\\\s+|$)\").test(i.className)||!1},getWidth:function(i){var e=getComputedStyle(i);return Gs(e[\"border-left-width\"])+Gs(e[\"border-right-width\"])+Gs(e[\"padding-left\"])+Gs(e[\"padding-right\"])+Gs(e.width)},getHeight:function(i){var e=getComputedStyle(i);return Gs(e[\"border-top-width\"])+Gs(e[\"border-bottom-width\"])+Gs(e[\"padding-top\"])+Gs(e[\"padding-bottom\"])+Gs(e.height)},getOffset:function(i){var e=i,t={left:0,top:0};if(e.offsetParent)do t.left+=e.offsetLeft,t.top+=e.offsetTop,e=e.offsetParent;while(e);return t},isActive:function(i){return i===document.activeElement&&(i.type||i.href)}},TS=function(i){function e(t,n){hs(this,e);var r=vl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),o=r;return r.__prev=r.getValue(),r.__checkbox=document.createElement(\"input\"),r.__checkbox.setAttribute(\"type\",\"checkbox\"),qe.bind(r.__checkbox,\"change\",function(){o.setValue(!o.__prev)},!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return gl(e,i),cs(e,[{key:\"setValue\",value:function(t){var n=ml(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),\"setValue\",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:\"updateDisplay\",value:function(){return this.getValue()===!0?(this.__checkbox.setAttribute(\"checked\",\"checked\"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),ml(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),\"updateDisplay\",this).call(this)}}]),e}(Fu),CI=function(i){function e(t,n,r){hs(this,e);var o=vl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),s=r,a=o;if(o.__select=document.createElement(\"select\"),ht.isArray(s)){var l={};ht.each(s,function(u){l[u]=u}),s=l}return ht.each(s,function(u,h){var d=document.createElement(\"option\");d.innerHTML=h,d.setAttribute(\"value\",u),a.__select.appendChild(d)}),o.updateDisplay(),qe.bind(o.__select,\"change\",function(){var u=this.options[this.selectedIndex].value;a.setValue(u)}),o.domElement.appendChild(o.__select),o}return gl(e,i),cs(e,[{key:\"setValue\",value:function(t){var n=ml(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),\"setValue\",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:\"updateDisplay\",value:function(){return qe.isActive(this.__select)?this:(this.__select.value=this.getValue(),ml(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),\"updateDisplay\",this).call(this))}}]),e}(Fu),PI=function(i){function e(t,n){hs(this,e);var r=vl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),o=r;function s(){o.setValue(o.__input.value)}return r.__input=document.createElement(\"input\"),r.__input.setAttribute(\"type\",\"text\"),qe.bind(r.__input,\"keyup\",s),qe.bind(r.__input,\"change\",s),qe.bind(r.__input,\"blur\",function(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}),qe.bind(r.__input,\"keydown\",function(a){a.keyCode===13&&this.blur()}),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return gl(e,i),cs(e,[{key:\"updateDisplay\",value:function(){return qe.isActive(this.__input)||(this.__input.value=this.getValue()),ml(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),\"updateDisplay\",this).call(this)}}]),e}(Fu);function ES(i){var e=i.toString();return e.indexOf(\".\")>-1?e.length-e.indexOf(\".\")-1:0}var MS=function(i){function e(t,n,r){hs(this,e);var o=vl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),s=r||{};return o.__min=s.min,o.__max=s.max,o.__step=s.step,ht.isUndefined(o.__step)?o.initialValue===0?o.__impliedStep=1:o.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(o.initialValue))/Math.LN10))/10:o.__impliedStep=o.__step,o.__precision=ES(o.__impliedStep),o}return gl(e,i),cs(e,[{key:\"setValue\",value:function(t){var n=t;return this.__min!==void 0&&n<this.__min?n=this.__min:this.__max!==void 0&&n>this.__max&&(n=this.__max),this.__step!==void 0&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),ml(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),\"setValue\",this).call(this,n)}},{key:\"min\",value:function(t){return this.__min=t,this}},{key:\"max\",value:function(t){return this.__max=t,this}},{key:\"step\",value:function(t){return this.__step=t,this.__impliedStep=t,this.__precision=ES(t),this}}]),e}(Fu),bg=function(i){function e(t,n,r){hs(this,e);var o=vl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r));o.__truncationSuspended=!1;var s=o,a=void 0;function l(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function u(d){var p=a-d.clientY;s.setValue(s.getValue()+p*s.__impliedStep),a=d.clientY}function h(){qe.unbind(window,\"mousemove\",u),qe.unbind(window,\"mouseup\",h),l()}return o.__input=document.createElement(\"input\"),o.__input.setAttribute(\"type\",\"text\"),qe.bind(o.__input,\"change\",function(){var d=parseFloat(s.__input.value);ht.isNaN(d)||s.setValue(d)}),qe.bind(o.__input,\"blur\",function(){l()}),qe.bind(o.__input,\"mousedown\",function(d){qe.bind(window,\"mousemove\",u),qe.bind(window,\"mouseup\",h),a=d.clientY}),qe.bind(o.__input,\"keydown\",function(d){d.keyCode===13&&(s.__truncationSuspended=!0,this.blur(),s.__truncationSuspended=!1,l())}),o.updateDisplay(),o.domElement.appendChild(o.__input),o}return gl(e,i),cs(e,[{key:\"updateDisplay\",value:function(){var t,n,r;return this.__input.value=this.__truncationSuspended?this.getValue():(t=this.getValue(),n=this.__precision,r=Math.pow(10,n),Math.round(t*r)/r),ml(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),\"updateDisplay\",this).call(this)}}]),e}(MS);function AS(i,e,t,n,r){return n+(i-e)/(t-e)*(r-n)}var C_=function(i){function e(t,n,r,o,s){hs(this,e);var a=vl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,{min:r,max:o,step:s})),l=a;function u(m){m.preventDefault();var g=l.__background.getBoundingClientRect();return l.setValue(AS(m.clientX,g.left,g.right,l.__min,l.__max)),!1}function h(){qe.unbind(window,\"mousemove\",u),qe.unbind(window,\"mouseup\",h),l.__onFinishChange&&l.__onFinishChange.call(l,l.getValue())}function d(m){var g=m.touches[0].clientX,_=l.__background.getBoundingClientRect();l.setValue(AS(g,_.left,_.right,l.__min,l.__max))}function p(){qe.unbind(window,\"touchmove\",d),qe.unbind(window,\"touchend\",p),l.__onFinishChange&&l.__onFinishChange.call(l,l.getValue())}return a.__background=document.createElement(\"div\"),a.__foreground=document.createElement(\"div\"),qe.bind(a.__background,\"mousedown\",function(m){document.activeElement.blur(),qe.bind(window,\"mousemove\",u),qe.bind(window,\"mouseup\",h),u(m)}),qe.bind(a.__background,\"touchstart\",function(m){m.touches.length===1&&(qe.bind(window,\"touchmove\",d),qe.bind(window,\"touchend\",p),d(m))}),qe.addClass(a.__background,\"slider\"),qe.addClass(a.__foreground,\"slider-fg\"),a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return gl(e,i),cs(e,[{key:\"updateDisplay\",value:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+\"%\",ml(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),\"updateDisplay\",this).call(this)}}]),e}(MS),RS=function(i){function e(t,n,r){hs(this,e);var o=vl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),s=o;return o.__button=document.createElement(\"div\"),o.__button.innerHTML=r===void 0?\"Fire\":r,qe.bind(o.__button,\"click\",function(a){return a.preventDefault(),s.fire(),!1}),qe.addClass(o.__button,\"button\"),o.domElement.appendChild(o.__button),o}return gl(e,i),cs(e,[{key:\"fire\",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e}(Fu),P_=function(i){function e(t,n){hs(this,e);var r=vl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));r.__color=new Qi(r.getValue()),r.__temp=new Qi(0);var o=r;r.domElement=document.createElement(\"div\"),qe.makeSelectable(r.domElement,!1),r.__selector=document.createElement(\"div\"),r.__selector.className=\"selector\",r.__saturation_field=document.createElement(\"div\"),r.__saturation_field.className=\"saturation-field\",r.__field_knob=document.createElement(\"div\"),r.__field_knob.className=\"field-knob\",r.__field_knob_border=\"2px solid \",r.__hue_knob=document.createElement(\"div\"),r.__hue_knob.className=\"hue-knob\",r.__hue_field=document.createElement(\"div\"),r.__hue_field.className=\"hue-field\",r.__input=document.createElement(\"input\"),r.__input.type=\"text\",r.__input_textShadow=\"0 1px 1px \",qe.bind(r.__input,\"keydown\",function(y){y.keyCode===13&&p.call(this)}),qe.bind(r.__input,\"blur\",p),qe.bind(r.__selector,\"mousedown\",function(){qe.addClass(this,\"drag\").bind(window,\"mouseup\",function(){qe.removeClass(o.__selector,\"drag\")})}),qe.bind(r.__selector,\"touchstart\",function(){qe.addClass(this,\"drag\").bind(window,\"touchend\",function(){qe.removeClass(o.__selector,\"drag\")})});var s,a=document.createElement(\"div\");function l(y){g(y),qe.bind(window,\"mousemove\",g),qe.bind(window,\"touchmove\",g),qe.bind(window,\"mouseup\",h),qe.bind(window,\"touchend\",h)}function u(y){_(y),qe.bind(window,\"mousemove\",_),qe.bind(window,\"touchmove\",_),qe.bind(window,\"mouseup\",d),qe.bind(window,\"touchend\",d)}function h(){qe.unbind(window,\"mousemove\",g),qe.unbind(window,\"touchmove\",g),qe.unbind(window,\"mouseup\",h),qe.unbind(window,\"touchend\",h),m()}function d(){qe.unbind(window,\"mousemove\",_),qe.unbind(window,\"touchmove\",_),qe.unbind(window,\"mouseup\",d),qe.unbind(window,\"touchend\",d),m()}function p(){var y=M_(this.value);y!==!1?(o.__color.__state=y,o.setValue(o.__color.toOriginal())):this.value=o.__color.toString()}function m(){o.__onFinishChange&&o.__onFinishChange.call(o,o.__color.toOriginal())}function g(y){y.type.indexOf(\"touch\")===-1&&y.preventDefault();var w=o.__saturation_field.getBoundingClientRect(),R=y.touches&&y.touches[0]||y,F=R.clientX,U=R.clientY,B=(F-w.left)/(w.right-w.left),V=1-(U-w.top)/(w.bottom-w.top);return V>1?V=1:V<0&&(V=0),B>1?B=1:B<0&&(B=0),o.__color.v=V,o.__color.s=B,o.setValue(o.__color.toOriginal()),!1}function _(y){y.type.indexOf(\"touch\")===-1&&y.preventDefault();var w=o.__hue_field.getBoundingClientRect(),R=1-((y.touches&&y.touches[0]||y).clientY-w.top)/(w.bottom-w.top);return R>1?R=1:R<0&&(R=0),o.__color.h=360*R,o.setValue(o.__color.toOriginal()),!1}return ht.extend(r.__selector.style,{width:\"122px\",height:\"102px\",padding:\"3px\",backgroundColor:\"#222\",boxShadow:\"0px 1px 3px rgba(0,0,0,0.3)\"}),ht.extend(r.__field_knob.style,{position:\"absolute\",width:\"12px\",height:\"12px\",border:r.__field_knob_border+(r.__color.v<.5?\"#fff\":\"#000\"),boxShadow:\"0px 1px 3px rgba(0,0,0,0.5)\",borderRadius:\"12px\",zIndex:1}),ht.extend(r.__hue_knob.style,{position:\"absolute\",width:\"15px\",height:\"2px\",borderRight:\"4px solid #fff\",zIndex:1}),ht.extend(r.__saturation_field.style,{width:\"100px\",height:\"100px\",border:\"1px solid #555\",marginRight:\"3px\",display:\"inline-block\",cursor:\"pointer\"}),ht.extend(a.style,{width:\"100%\",height:\"100%\",background:\"none\"}),CS(a,\"top\",\"rgba(0,0,0,0)\",\"#000\"),ht.extend(r.__hue_field.style,{width:\"15px\",height:\"100px\",border:\"1px solid #555\",cursor:\"ns-resize\",position:\"absolute\",top:\"3px\",right:\"3px\"}),(s=r.__hue_field).style.background=\"\",s.style.cssText+=\"background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);\",s.style.cssText+=\"background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);\",s.style.cssText+=\"background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);\",s.style.cssText+=\"background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);\",s.style.cssText+=\"background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);\",ht.extend(r.__input.style,{outline:\"none\",textAlign:\"center\",color:\"#fff\",border:0,fontWeight:\"bold\",textShadow:r.__input_textShadow+\"rgba(0,0,0,0.7)\"}),qe.bind(r.__saturation_field,\"mousedown\",l),qe.bind(r.__saturation_field,\"touchstart\",l),qe.bind(r.__field_knob,\"mousedown\",l),qe.bind(r.__field_knob,\"touchstart\",l),qe.bind(r.__hue_field,\"mousedown\",u),qe.bind(r.__hue_field,\"touchstart\",u),r.__saturation_field.appendChild(a),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay(),r}return gl(e,i),cs(e,[{key:\"updateDisplay\",value:function(){var t=M_(this.getValue());if(t!==!1){var n=!1;ht.each(Qi.COMPONENTS,function(s){if(!ht.isUndefined(t[s])&&!ht.isUndefined(this.__color.__state[s])&&t[s]!==this.__color.__state[s])return n=!0,{}},this),n&&ht.extend(this.__color.__state,t)}ht.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var r=this.__color.v<.5||this.__color.s>.5?255:0,o=255-r;ht.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+\"px\",marginTop:100*(1-this.__color.v)-7+\"px\",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+\"rgb(\"+r+\",\"+r+\",\"+r+\")\"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+\"px\",this.__temp.s=1,this.__temp.v=1,CS(this.__saturation_field,\"left\",\"#fff\",this.__temp.toHexString()),this.__input.value=this.__color.toString(),ht.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:\"rgb(\"+r+\",\"+r+\",\"+r+\")\",textShadow:this.__input_textShadow+\"rgba(\"+o+\",\"+o+\",\"+o+\",.7)\"})}}]),e}(Fu),II=[\"-moz-\",\"-o-\",\"-webkit-\",\"-ms-\",\"\"];function CS(i,e,t,n){i.style.background=\"\",ht.each(II,function(r){i.style.cssText+=\"background: \"+r+\"linear-gradient(\"+e+\", \"+t+\" 0%, \"+n+\" 100%); \"})}var OI=function(i,e){var t=e||document,n=document.createElement(\"style\");n.type=\"text/css\",n.innerHTML=i;var r=t.getElementsByTagName(\"head\")[0];try{r.appendChild(n)}catch{}},LI=`<div id=\"dg-save\" class=\"dg dialogue\">\n\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\n\n  <textarea id=\"dg-new-constructor\"></textarea>\n\n  <div id=\"dg-save-locally\">\n\n    <input id=\"dg-local-storage\" type=\"checkbox\"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id=\"dg-local-explain\">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>`,NI=function(i,e){var t=i[e];return ht.isArray(arguments[2])||ht.isObject(arguments[2])?new CI(i,e,arguments[2]):ht.isNumber(t)?ht.isNumber(arguments[2])&&ht.isNumber(arguments[3])?ht.isNumber(arguments[4])?new C_(i,e,arguments[2],arguments[3],arguments[4]):new C_(i,e,arguments[2],arguments[3]):ht.isNumber(arguments[4])?new bg(i,e,{min:arguments[2],max:arguments[3],step:arguments[4]}):new bg(i,e,{min:arguments[2],max:arguments[3]}):ht.isString(t)?new PI(i,e):ht.isFunction(t)?new RS(i,e,\"\"):ht.isBoolean(t)?new TS(i,e):null},DI=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(i){setTimeout(i,1e3/60)},FI=function(){function i(){hs(this,i),this.backgroundElement=document.createElement(\"div\"),ht.extend(this.backgroundElement.style,{backgroundColor:\"rgba(0,0,0,0.8)\",top:0,left:0,display:\"none\",zIndex:\"1000\",opacity:0,WebkitTransition:\"opacity 0.2s linear\",transition:\"opacity 0.2s linear\"}),qe.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position=\"fixed\",this.domElement=document.createElement(\"div\"),ht.extend(this.domElement.style,{position:\"fixed\",display:\"none\",zIndex:\"1001\",opacity:0,WebkitTransition:\"-webkit-transform 0.2s ease-out, opacity 0.2s linear\",transition:\"transform 0.2s ease-out, opacity 0.2s linear\"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;qe.bind(this.backgroundElement,\"click\",function(){e.hide()})}return cs(i,[{key:\"show\",value:function(){var e=this;this.backgroundElement.style.display=\"block\",this.domElement.style.display=\"block\",this.domElement.style.opacity=0,this.domElement.style.webkitTransform=\"scale(1.1)\",this.layout(),ht.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform=\"scale(1)\"})}},{key:\"hide\",value:function(){var e=this,t=function n(){e.domElement.style.display=\"none\",e.backgroundElement.style.display=\"none\",qe.unbind(e.domElement,\"webkitTransitionEnd\",n),qe.unbind(e.domElement,\"transitionend\",n),qe.unbind(e.domElement,\"oTransitionEnd\",n)};qe.bind(this.domElement,\"webkitTransitionEnd\",t),qe.bind(this.domElement,\"transitionend\",t),qe.bind(this.domElement,\"oTransitionEnd\",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform=\"scale(1.1)\"}},{key:\"layout\",value:function(){this.domElement.style.left=window.innerWidth/2-qe.getWidth(this.domElement)/2+\"px\",this.domElement.style.top=window.innerHeight/2-qe.getHeight(this.domElement)/2+\"px\"}}]),i}();OI(function(i){if(i&&typeof window!=\"undefined\"){var e=document.createElement(\"style\");return e.setAttribute(\"type\",\"text/css\"),e.innerHTML=i,document.head.appendChild(e),i}}(`.dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n`));var Op=function(){try{return!!window.localStorage}catch{return!1}}(),wg=void 0,PS=!0,zc=void 0,I_=!1,IS=[],ii=function i(e){var t=this,n=e||{};this.domElement=document.createElement(\"div\"),this.__ul=document.createElement(\"ul\"),this.domElement.appendChild(this.__ul),qe.addClass(this.domElement,\"dg\"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],n=ht.defaults(n,{closeOnTop:!1,autoPlace:!0,width:i.DEFAULT_WIDTH}),n=ht.defaults(n,{resizable:n.autoPlace,hideable:n.autoPlace}),ht.isUndefined(n.load)?n.load={preset:\"Default\"}:n.preset&&(n.load.preset=n.preset),ht.isUndefined(n.parent)&&n.hideable&&IS.push(this),n.resizable=ht.isUndefined(n.parent)&&n.resizable,n.autoPlace&&ht.isUndefined(n.scrollable)&&(n.scrollable=!0);var r,o=Op&&localStorage.getItem(jc(this,\"isLocal\"))===\"true\",s=void 0,a=void 0;if(Object.defineProperties(this,{parent:{get:function(){return n.parent}},scrollable:{get:function(){return n.scrollable}},autoPlace:{get:function(){return n.autoPlace}},closeOnTop:{get:function(){return n.closeOnTop}},preset:{get:function(){return t.parent?t.getRoot().preset:n.load.preset},set:function(h){t.parent?t.getRoot().preset=h:n.load.preset=h,function(d){for(var p=0;p<d.__preset_select.length;p++)d.__preset_select[p].value===d.preset&&(d.__preset_select.selectedIndex=p)}(this),t.revert()}},width:{get:function(){return n.width},set:function(h){n.width=h,D_(t,h)}},name:{get:function(){return n.name},set:function(h){n.name=h,a&&(a.innerHTML=n.name)}},closed:{get:function(){return n.closed},set:function(h){n.closed=h,n.closed?qe.addClass(t.__ul,i.CLASS_CLOSED):qe.removeClass(t.__ul,i.CLASS_CLOSED),this.onResize(),t.__closeButton&&(t.__closeButton.innerHTML=h?i.TEXT_OPEN:i.TEXT_CLOSED)}},load:{get:function(){return n.load}},useLocalStorage:{get:function(){return o},set:function(h){Op&&(o=h,h?qe.bind(window,\"unload\",s):qe.unbind(window,\"unload\",s),localStorage.setItem(jc(t,\"isLocal\"),h))}}}),ht.isUndefined(n.parent)){if(this.closed=n.closed||!1,qe.addClass(this.domElement,i.CLASS_MAIN),qe.makeSelectable(this.domElement,!1),Op&&o){t.useLocalStorage=!0;var l=localStorage.getItem(jc(this,\"gui\"));l&&(n.load=JSON.parse(l))}this.__closeButton=document.createElement(\"div\"),this.__closeButton.innerHTML=i.TEXT_CLOSED,qe.addClass(this.__closeButton,i.CLASS_CLOSE_BUTTON),n.closeOnTop?(qe.addClass(this.__closeButton,i.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(qe.addClass(this.__closeButton,i.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),qe.bind(this.__closeButton,\"click\",function(){t.closed=!t.closed})}else{n.closed===void 0&&(n.closed=!0);var u=document.createTextNode(n.name);qe.addClass(u,\"controller-name\"),a=O_(t,u),qe.addClass(this.__ul,i.CLASS_CLOSED),qe.addClass(a,\"title\"),qe.bind(a,\"click\",function(h){return h.preventDefault(),t.closed=!t.closed,!1}),n.closed||(this.closed=!1)}n.autoPlace&&(ht.isUndefined(n.parent)&&(PS&&(zc=document.createElement(\"div\"),qe.addClass(zc,\"dg\"),qe.addClass(zc,i.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(zc),PS=!1),zc.appendChild(this.domElement),qe.addClass(this.domElement,i.CLASS_AUTO_PLACE)),this.parent||D_(t,n.width)),this.__resizeHandler=function(){t.onResizeDebounced()},qe.bind(window,\"resize\",this.__resizeHandler),qe.bind(this.__ul,\"webkitTransitionEnd\",this.__resizeHandler),qe.bind(this.__ul,\"transitionend\",this.__resizeHandler),qe.bind(this.__ul,\"oTransitionEnd\",this.__resizeHandler),this.onResize(),n.resizable&&kI(this),s=function(){Op&&localStorage.getItem(jc(t,\"isLocal\"))===\"true\"&&localStorage.setItem(jc(t,\"gui\"),JSON.stringify(t.getSaveObject()))},this.saveToLocalStorageIfPossible=s,n.parent||((r=t.getRoot()).width+=1,ht.defer(function(){r.width-=1}))};function O_(i,e,t){var n=document.createElement(\"li\");return e&&n.appendChild(e),t?i.__ul.insertBefore(n,t):i.__ul.appendChild(n),i.onResize(),n}function OS(i){qe.unbind(window,\"resize\",i.__resizeHandler),i.saveToLocalStorageIfPossible&&qe.unbind(window,\"unload\",i.saveToLocalStorageIfPossible)}function L_(i,e){var t=i.__preset_select[i.__preset_select.selectedIndex];t.innerHTML=e?t.value+\"*\":t.value}function LS(i,e){var t=i.getRoot(),n=t.__rememberedObjects.indexOf(e.object);if(n!==-1){var r=t.__rememberedObjectIndecesToControllers[n];if(r===void 0&&(r={},t.__rememberedObjectIndecesToControllers[n]=r),r[e.property]=e,t.load&&t.load.remembered){var o=t.load.remembered,s=void 0;if(o[i.preset])s=o[i.preset];else{if(!o.Default)return;s=o.Default}if(s[n]&&s[n][e.property]!==void 0){var a=s[n][e.property];e.initialValue=a,e.setValue(a)}}}}function Lp(i,e,t,n){if(e[t]===void 0)throw new Error('Object \"'+e+'\" has no property \"'+t+'\"');var r=void 0;if(n.color)r=new P_(e,t);else{var o=[e,t].concat(n.factoryArgs);r=NI.apply(i,o)}n.before instanceof Fu&&(n.before=n.before.__li),LS(i,r),qe.addClass(r.domElement,\"c\");var s=document.createElement(\"span\");qe.addClass(s,\"property-name\"),s.innerHTML=r.property;var a=document.createElement(\"div\");a.appendChild(s),a.appendChild(r.domElement);var l=O_(i,a,n.before);return qe.addClass(l,ii.CLASS_CONTROLLER_ROW),r instanceof P_?qe.addClass(l,\"color\"):qe.addClass(l,AI(r.getValue())),function(u,h,d){if(d.__li=h,d.__gui=u,ht.extend(d,{options:function(g){if(arguments.length>1){var _=d.__li.nextElementSibling;return d.remove(),Lp(u,d.object,d.property,{before:_,factoryArgs:[ht.toArray(arguments)]})}if(ht.isArray(g)||ht.isObject(g)){var y=d.__li.nextElementSibling;return d.remove(),Lp(u,d.object,d.property,{before:y,factoryArgs:[g]})}},name:function(g){return d.__li.firstElementChild.firstElementChild.innerHTML=g,d},listen:function(){return d.__gui.listen(d),d},remove:function(){return d.__gui.remove(d),d}}),d instanceof C_){var p=new bg(d.object,d.property,{min:d.__min,max:d.__max,step:d.__step});ht.each([\"updateDisplay\",\"onChange\",\"onFinishChange\",\"step\",\"min\",\"max\"],function(g){var _=d[g],y=p[g];d[g]=p[g]=function(){var w=Array.prototype.slice.call(arguments);return y.apply(p,w),_.apply(d,w)}}),qe.addClass(h,\"has-slider\"),d.domElement.insertBefore(p.domElement,d.domElement.firstElementChild)}else if(d instanceof bg){var m=function(g){if(ht.isNumber(d.__min)&&ht.isNumber(d.__max)){var _=d.__li.firstElementChild.firstElementChild.innerHTML,y=d.__gui.__listening.indexOf(d)>-1;d.remove();var w=Lp(u,d.object,d.property,{before:d.__li.nextElementSibling,factoryArgs:[d.__min,d.__max,d.__step]});return w.name(_),y&&w.listen(),w}return g};d.min=ht.compose(m,d.min),d.max=ht.compose(m,d.max)}else d instanceof TS?(qe.bind(h,\"click\",function(){qe.fakeEvent(d.__checkbox,\"click\")}),qe.bind(d.__checkbox,\"click\",function(g){g.stopPropagation()})):d instanceof RS?(qe.bind(h,\"click\",function(){qe.fakeEvent(d.__button,\"click\")}),qe.bind(h,\"mouseover\",function(){qe.addClass(d.__button,\"hover\")}),qe.bind(h,\"mouseout\",function(){qe.removeClass(d.__button,\"hover\")})):d instanceof P_&&(qe.addClass(h,\"color\"),d.updateDisplay=ht.compose(function(g){return h.style.borderLeftColor=d.__color.toString(),g},d.updateDisplay),d.updateDisplay());d.setValue=ht.compose(function(g){return u.getRoot().__preset_select&&d.isModified()&&L_(u.getRoot(),!0),g},d.setValue)}(i,l,r),i.__controllers.push(r),r}function jc(i,e){return document.location.href+\".\"+e}function N_(i,e,t){var n=document.createElement(\"option\");n.innerHTML=e,n.value=e,i.__preset_select.appendChild(n),t&&(i.__preset_select.selectedIndex=i.__preset_select.length-1)}function NS(i,e){e.style.display=i.useLocalStorage?\"block\":\"none\"}function BI(i){var e=i.__save_row=document.createElement(\"li\");qe.addClass(i.domElement,\"has-save\"),i.__ul.insertBefore(e,i.__ul.firstChild),qe.addClass(e,\"save-row\");var t=document.createElement(\"span\");t.innerHTML=\"&nbsp;\",qe.addClass(t,\"button gears\");var n=document.createElement(\"span\");n.innerHTML=\"Save\",qe.addClass(n,\"button\"),qe.addClass(n,\"save\");var r=document.createElement(\"span\");r.innerHTML=\"New\",qe.addClass(r,\"button\"),qe.addClass(r,\"save-as\");var o=document.createElement(\"span\");o.innerHTML=\"Revert\",qe.addClass(o,\"button\"),qe.addClass(o,\"revert\");var s=i.__preset_select=document.createElement(\"select\");if(i.load&&i.load.remembered?ht.each(i.load.remembered,function(h,d){N_(i,d,d===i.preset)}):N_(i,\"Default\",!1),qe.bind(s,\"change\",function(){for(var h=0;h<i.__preset_select.length;h++)i.__preset_select[h].innerHTML=i.__preset_select[h].value;i.preset=this.value}),e.appendChild(s),e.appendChild(t),e.appendChild(n),e.appendChild(r),e.appendChild(o),Op){var a=document.getElementById(\"dg-local-explain\"),l=document.getElementById(\"dg-local-storage\");document.getElementById(\"dg-save-locally\").style.display=\"block\",localStorage.getItem(jc(0,\"isLocal\"))===\"true\"&&l.setAttribute(\"checked\",\"checked\"),NS(i,a),qe.bind(l,\"change\",function(){i.useLocalStorage=!i.useLocalStorage,NS(i,a)})}var u=document.getElementById(\"dg-new-constructor\");qe.bind(u,\"keydown\",function(h){!h.metaKey||h.which!==67&&h.keyCode!==67||wg.hide()}),qe.bind(t,\"click\",function(){u.innerHTML=JSON.stringify(i.getSaveObject(),void 0,2),wg.show(),u.focus(),u.select()}),qe.bind(n,\"click\",function(){i.save()}),qe.bind(r,\"click\",function(){var h=prompt(\"Enter a new preset name.\");h&&i.saveAs(h)}),qe.bind(o,\"click\",function(){i.revert()})}function kI(i){var e=void 0;function t(o){return o.preventDefault(),i.width+=e-o.clientX,i.onResize(),e=o.clientX,!1}function n(){qe.removeClass(i.__closeButton,ii.CLASS_DRAG),qe.unbind(window,\"mousemove\",t),qe.unbind(window,\"mouseup\",n)}function r(o){return o.preventDefault(),e=o.clientX,qe.addClass(i.__closeButton,ii.CLASS_DRAG),qe.bind(window,\"mousemove\",t),qe.bind(window,\"mouseup\",n),!1}i.__resize_handle=document.createElement(\"div\"),ht.extend(i.__resize_handle.style,{width:\"6px\",marginLeft:\"-3px\",height:\"200px\",cursor:\"ew-resize\",position:\"absolute\"}),qe.bind(i.__resize_handle,\"mousedown\",r),qe.bind(i.__closeButton,\"mousedown\",r),i.domElement.insertBefore(i.__resize_handle,i.domElement.firstElementChild)}function D_(i,e){i.domElement.style.width=e+\"px\",i.__save_row&&i.autoPlace&&(i.__save_row.style.width=e+\"px\"),i.__closeButton&&(i.__closeButton.style.width=e+\"px\")}function Sg(i,e){var t={};return ht.each(i.__rememberedObjects,function(n,r){var o={},s=i.__rememberedObjectIndecesToControllers[r];ht.each(s,function(a,l){o[l]=e?a.initialValue:a.getValue()}),t[r]=o}),t}ii.toggleHide=function(){I_=!I_,ht.each(IS,function(i){i.domElement.style.display=I_?\"none\":\"\"})},ii.CLASS_AUTO_PLACE=\"a\",ii.CLASS_AUTO_PLACE_CONTAINER=\"ac\",ii.CLASS_MAIN=\"main\",ii.CLASS_CONTROLLER_ROW=\"cr\",ii.CLASS_TOO_TALL=\"taller-than-window\",ii.CLASS_CLOSED=\"closed\",ii.CLASS_CLOSE_BUTTON=\"close-button\",ii.CLASS_CLOSE_TOP=\"close-top\",ii.CLASS_CLOSE_BOTTOM=\"close-bottom\",ii.CLASS_DRAG=\"drag\",ii.DEFAULT_WIDTH=245,ii.TEXT_CLOSED=\"Close Controls\",ii.TEXT_OPEN=\"Open Controls\",ii._keydownHandler=function(i){document.activeElement.type===\"text\"||i.which!==72&&i.keyCode!==72||ii.toggleHide()},qe.bind(window,\"keydown\",ii._keydownHandler,!1),ht.extend(ii.prototype,{add:function(i,e){return Lp(this,i,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(i,e){return Lp(this,i,e,{color:!0})},remove:function(i){this.__ul.removeChild(i.__li),this.__controllers.splice(this.__controllers.indexOf(i),1);var e=this;ht.defer(function(){e.onResize()})},destroy:function(){if(this.parent)throw new Error(\"Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.\");this.autoPlace&&zc.removeChild(this.domElement);var i=this;ht.each(this.__folders,function(e){i.removeFolder(e)}),qe.unbind(window,\"keydown\",ii._keydownHandler,!1),OS(this)},addFolder:function(i){if(this.__folders[i]!==void 0)throw new Error('You already have a folder in this GUI by the name \"'+i+'\"');var e={name:i,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[i]&&(e.closed=this.load.folders[i].closed,e.load=this.load.folders[i]);var t=new ii(e);this.__folders[i]=t;var n=O_(this,t.domElement);return qe.addClass(n,\"folder\"),t},removeFolder:function(i){this.__ul.removeChild(i.domElement.parentElement),delete this.__folders[i.name],this.load&&this.load.folders&&this.load.folders[i.name]&&delete this.load.folders[i.name],OS(i);var e=this;ht.each(i.__folders,function(t){i.removeFolder(t)}),ht.defer(function(){e.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display=\"none\"},show:function(){this.domElement.style.display=\"\"},onResize:function(){var i=this.getRoot();if(i.scrollable){var e=qe.getOffset(i.__ul).top,t=0;ht.each(i.__ul.childNodes,function(n){i.autoPlace&&n===i.__save_row||(t+=qe.getHeight(n))}),window.innerHeight-e-20<t?(qe.addClass(i.domElement,ii.CLASS_TOO_TALL),i.__ul.style.height=window.innerHeight-e-20+\"px\"):(qe.removeClass(i.domElement,ii.CLASS_TOO_TALL),i.__ul.style.height=\"auto\")}i.__resize_handle&&ht.defer(function(){i.__resize_handle.style.height=i.__ul.offsetHeight+\"px\"}),i.__closeButton&&(i.__closeButton.style.width=i.width+\"px\")},onResizeDebounced:ht.debounce(function(){this.onResize()},50),remember:function(){if(ht.isUndefined(wg)&&((wg=new FI).domElement.innerHTML=LI),this.parent)throw new Error(\"You can only call remember on a top level GUI.\");var i=this;ht.each(Array.prototype.slice.call(arguments),function(e){i.__rememberedObjects.length===0&&BI(i),i.__rememberedObjects.indexOf(e)===-1&&i.__rememberedObjects.push(e)}),this.autoPlace&&D_(this,this.width)},getRoot:function(){for(var i=this;i.parent;)i=i.parent;return i},getSaveObject:function(){var i=this.load;return i.closed=this.closed,this.__rememberedObjects.length>0&&(i.preset=this.preset,i.remembered||(i.remembered={}),i.remembered[this.preset]=Sg(this)),i.folders={},ht.each(this.__folders,function(e,t){i.folders[t]=e.getSaveObject()}),i},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=Sg(this),L_(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(i){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=Sg(this,!0)),this.load.remembered[i]=Sg(this),this.preset=i,N_(this,i,!0),this.saveToLocalStorageIfPossible()},revert:function(i){ht.each(this.__controllers,function(e){this.getRoot().load.remembered?LS(i||this.getRoot(),e):e.setValue(e.initialValue),e.__onFinishChange&&e.__onFinishChange.call(e,e.getValue())},this),ht.each(this.__folders,function(e){e.revert(e)}),i||L_(this.getRoot(),!1)},listen:function(i){var e=this.__listening.length===0;this.__listening.push(i),e&&function t(n){n.length!==0&&DI.call(window,function(){t(n)}),ht.each(n,function(r){r.updateDisplay()})}(this.__listening)},updateDisplay:function(){ht.each(this.__controllers,function(i){i.updateDisplay()}),ht.each(this.__folders,function(i){i.updateDisplay()})}});var UI=ii,GI=function(){function i(e){this.runTime={fps:0,resolution:\"\"},this.target=e.target,this.data=e.params,this.player=e.player,this.gui=this.createControllerGUI(),this.createStats(),this.addEventListener()}return i.prototype.createStats=function(){var e=this;this.stateId=setInterval(function(){e.player.view&&(e.controller.runTimeFps.setValue(e.player.fps.value),e.controller.drawCall.setValue(e.player.runtime.drawCall),e.controller.runTimeResolution.setValue(e.player.view.width+\"*\"+e.player.view.height))},500)},i.prototype.createControllerGUI=function(){var e,t,n,r,o,s=new UI({autoPlace:!0,closed:!0});s.domElement.style.opacity=\".6\",s.domElement.style.transformOrigin=\"100% 0\",s.domElement.style.transform=\"scale(1)\",this.target.appendChild(s.domElement),s.domElement.style.position=\"absolute\",s.domElement.style.right=\"0\",s.domElement.style.top=\"0\",s.domElement.style.zIndex=\"2\";var a=s.add({FPS:0},\"FPS\",0),l=s.add({drawCall:0},\"drawCall\",0),u=s.add({\\u5206\\u8FA8\\u7387:\"\"},\"\\u5206\\u8FA8\\u7387\",\"\"),h=s.add({\\u989D\\u5916\\u8BA1\\u7B97:0},\"\\u989D\\u5916\\u8BA1\\u7B97\",0,200),d=s.addFolder(\"renderOptions\");return this.controller={runTimeResolution:u,runTimeFps:a,drawCall:l,moreCalculation:h,minFPS:d.add({\\u6700\\u4F4Efps:(e=this.data.minFPS)!==null&&e!==void 0?e:40},\"\\u6700\\u4F4Efps\",0,60),maxFPS:d.add({\\u6700\\u9AD8fps:(t=this.data.maxFPS)!==null&&t!==void 0?t:50},\"\\u6700\\u9AD8fps\",0,60),resolution:d.add({\\u76EE\\u6807\\u5206\\u8FA8\\u500D\\u7387:(n=this.data.resolution)!==null&&n!==void 0?n:window.devicePixelRatio},\"\\u76EE\\u6807\\u5206\\u8FA8\\u500D\\u7387\",.5,6),autoResolution:d.add({\\u81EA\\u52A8\\u5206\\u8FA8\\u7387:(r=this.data.autoResolution)!==null&&r!==void 0&&r},\"\\u81EA\\u52A8\\u5206\\u8FA8\\u7387\",!0),autoFps:d.add({\\u81EA\\u52A8fps:(o=this.data.autoFPS)===null||o===void 0||o},\"\\u81EA\\u52A8fps\",!0),transactionBgColor:d.addColor({\\u5207\\u9875\\u80CC\\u666F\\u8272:this.data.transactionBgColor},\"\\u5207\\u9875\\u80CC\\u666F\\u8272\")},this.controller.runTimeFps.disabled=!0,this.controller.runTimeResolution.disabled=!0,s},i.prototype.addEventListener=function(){var e,t=this;this.controller.autoFps.onChange(function(n){t.data.autoFPS=n,t.player.updateConfig(t.data)}),this.controller.maxFPS.onChange(function(n){t.data.maxFPS=n,t.player.updateConfig(t.data)}),this.controller.minFPS.onChange(function(n){t.data.minFPS=n,t.player.updateConfig(t.data)}),this.controller.autoResolution.onChange(function(n){t.data.autoResolution=n,t.player.updateConfig(t.data)}),this.controller.resolution.onChange(function(n){t.data.resolution=n,t.player.updateConfig(t.data)}),this.controller.transactionBgColor.onChange(function(n){t.data.transactionBgColor=n,t.player.updateConfig(t.data)}),this.controller.moreCalculation.onChange(function(n){e&&t.player.app.ticker.remove(e),n>0&&(e=function(){for(var r=\"\";r.length<8e3*n;)r+=Math.random().toString(32).substr(2);rg()(r)},t.player.app.ticker.add(e))})},i.prototype.destroy=function(){try{window.clearInterval(this.stateId),this.target.removeChild(this.gui.domElement),this.gui.destroy()}catch{}},i}(),HI=function(){function i(e){var t=this;this.tasks=[],this.schedule=function(){var n=t.tasks[0];n?t.fn(n).then(function(){t.tasks.splice(0,1),window.requestAnimationFrame(t.schedule)}):window.requestAnimationFrame(t.schedule)},this.fn=e,this.schedule()}return i.prototype.addTask=function(e){this.tasks.push(e)},i}(),zI=function(){function i(){this.autoUnlock=Object.create(null),this.locks=Object.create(null)}return i.prototype.addLock=function(e,t){var n=this;this.locks[e]=t,this.autoUnlock[e]=window.setTimeout(function(){delete n.locks[e]},3e3)},i.prototype.unlock=function(e,t){t&&this.locks[e]&&this.locks[e]===t&&(window.clearTimeout(this.autoUnlock[e]),delete this.locks[e])},i.prototype.isLocked=function(e){return!!this.locks[e]},i}(),jI=function(){var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])})(e,t)};return function(e,t){if(typeof t!=\"function\"&&t!==null)throw new TypeError(\"Class extends value \"+String(t)+\" is not a constructor or null\");function n(){this.constructor=e}i(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Np=function(){return(Np=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r]);return i}).apply(this,arguments)},Hs=function(i,e,t,n){return new(t||(t=Promise))(function(r,o){function s(u){try{l(n.next(u))}catch(h){o(h)}}function a(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){var h;u.done?r(u.value):(h=u.value,h instanceof t?h:new t(function(d){d(h)})).then(s,a)}l((n=n.apply(i,e||[])).next())})},zs=function(i,e){var t,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol==\"function\"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return function(h){if(t)throw new TypeError(\"Generator is already executing.\");for(;s;)try{if(t=1,n&&(r=2&h[0]?n.return:h[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,h[1])).done)return r;switch(n=0,r&&(h=[2&h[0],r.value]),h[0]){case 0:case 1:r=h;break;case 4:return s.label++,{value:h[1],done:!1};case 5:s.label++,n=h[1],h=[0];continue;case 7:h=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!((r=r.length>0&&r[r.length-1])||h[0]!==6&&h[0]!==2)){s=0;continue}if(h[0]===3&&(!r||h[1]>r[0]&&h[1]<r[3])){s.label=h[1];break}if(h[0]===6&&s.label<r[1]){s.label=r[1],r=h;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(h);break}r[2]&&s.ops.pop(),s.trys.pop();continue}h=e.call(i,s)}catch(d){h=[6,d],n=0}finally{t=r=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([l,u])}}};window.__slide_local_logger__||(window.__slide_local_logger__=me.createInstance({name:\"_slide_local_log_\",driver:me.INDEXEDDB,version:1}));var VI=window.ResizeObserver||bI,F_=function(i){return new Promise(function(e){return setTimeout(e,i)})};function B_(i,e){return Hs(this,void 0,void 0,function(){var t;return zs(this,function(n){switch(n.label){case 0:t=Date.now(),n.label=1;case 1:return!i()&&Date.now()-t<e?[4,F_(50)]:[3,3];case 2:return n.sent(),[3,1];case 3:return[2]}})})}var ao={syncDispatch:\"syncDispatch\",syncReceive:\"syncReceive\",renderStart:\"renderStart\",renderEnd:\"renderEnd\",renderError:\"renderError\",slideChange:\"slideChange\",mainSeqStepStart:\"mainSeqStepStart\",mainSeqStepEnd:\"mainSeqStepEnd\",animateStart:\"animateStart\",animateEnd:\"animateEnd\",stateChange:\"stateChange\"},DS={taskId:\"\",url:\"\",currentSlideIndex:-1,mainSeqStep:-1,mainSeqState:null,mediaState:Object.create(null),interactiveSeqState:Object.create(null)},k_=\"\";try{k_=\"0.3.5\"}catch{k_=\"dev\"}var WI=function(i){function e(t){var n=i.call(this)||this;return n.iosResetCache=[],n.needClearCacheImage=!1,n.version=k_,n.__slideState=Object(H.cloneDeep)(DS),n.userInputTime=0,n.isSyncingSlideState=!1,n.resize=!1,n.isAnimating=!1,n.renderingTaskManager=new EI,n.isLoading=!1,n.interactive=!0,n.frameWidth=1,n.frameHeight=1,n.frame=document.createElement(\"div\"),n.medianController=document.createElement(\"div\"),n.frameResizeObserver=new VI(function(){return n.frameResizeHandler()}),n.timestamp=function(){return Date.now()},n.mode=\"local\",n.enableGlobalClick=!1,n.lastEmitedState=null,n.playerController=null,n.lock=new zI,n.isInitResized=!1,n.cacheImage=document.createElement(\"img\"),n.isFrowning=!1,n.isReleasing=!1,n.isTouchStart=!1,n.touchStartId=void 0,n.taskId=\"\",n.designWidth=0,n.designHeight=0,n._slideCount=0,n.userInputHandle=function(){n.userInputTime=Date.now()},n.handleViewClick=function(){setTimeout(function(){var r=Date.now();Math.abs(r-n.userInputTime)>500&&n.enableGlobalClick&&n.nextStep()})},n.handleViewTouchStart=function(){window.clearTimeout(n.touchStartId),n.isTouchStart=!0,n.touchStartId=setTimeout(function(){n.isTouchStart=!1},350)},n.handleViewTouchEnd=function(){n.isTouchStart&&(n.isTouchStart=!1,n.handleViewClick())},n.handleSlideRef=function(){console.log(n),window.__slide=n},n.receiveSyncHandler=function(r){return Hs(n,void 0,void 0,function(){var o,s,a,l,u=this;return zs(this,function(h){switch(h.label){case 0:return Jn.info(\"sync receive \"+JSON.stringify(r),this.taskId),r.type!==\"nextStep\"?[3,1]:(this.mainSeqStep!==r.next-1&&this.mainSeqStep+1!==this.mainSeqLength&&this.player?(this.setMainSeqStep(r.next,\"start\"),this.player.nextTick(function(){u.doNextStep()})):this.doNextStep(),[3,6]);case 1:return r.type!==\"prevStep\"?[3,2]:(this.mainSeqStep===0&&this.mainSeqState===\"idle\"||this.mainSeqStep===r.next+1||this.mainSeqStep+1===this.mainSeqLength?this.doPrevStep():(this.setMainSeqStep(r.next+1,\"start\"),(o=this.player)===null||o===void 0||o.nextTick(function(){u.doPrevStep()})),[3,6]);case 2:return r.type!==\"interactiveAnim\"?[3,3]:(this.player?this.player.applyInteractiveAction(r.action):this.__slideState.interactiveSeqState[r.seqId].step+=1,[3,6]);case 3:return r.type!==\"renderSlide\"?[3,5]:[4,this.doRenderSlide(r.index,r.isForward)];case 4:return h.sent(),[3,6];case 5:r.type===\"mediaPlay\"?((s=this.player)===null||s===void 0||s.setMediaState(r.id,!0),this.__slideState.mediaState[r.id]=r.state):r.type===\"mediaPause\"?((a=this.player)===null||a===void 0||a.setMediaState(r.id,!1),this.__slideState.mediaState[r.id]=r.state):r.type===\"mediaSeek\"&&((l=this.player)===null||l===void 0||l.setMediaCurrentTime(r.id,r.time),this.__slideState.mediaState[r.id]=r.state),h.label=6;case 6:return[2]}})})},n.handlePrevSlide=function(){return Hs(n,void 0,void 0,function(){var r,o;return zs(this,function(s){switch(s.label){case 0:return this.player?[4,(o=this.player)===null||o===void 0?void 0:o.createSnapshotForNextSlide(!0)]:[2];case 1:return s.sent(),(r=this.player.prevSlideIndex)>=1&&this.renderSlide(r,!1),[2]}})})},n.handleNextSlide=function(){return Hs(n,void 0,void 0,function(){var r,o;return zs(this,function(s){switch(s.label){case 0:return this.player?[4,(o=this.player)===null||o===void 0?void 0:o.createSnapshotForNextSlide(!1)]:[2];case 1:return s.sent(),(r=this.player.nextSlideIndex)<=this.slideCount&&this.renderSlide(r,!0),[2]}})})},n.handleGotoSlide=function(r){if(r<=n.slideCount&&r>=1){var o=n.slideState.currentSlideIndex<=r;n.renderSlide(r,o)}else r===-1&&n.renderSlide(n.slideCount,!0)},t.timestamp&&(n.timestamp=t.timestamp),t.rtcAudio&&(Fr.RtcAudioClazz=t.rtcAudio),t.logger&&(typeof t.logger.info==\"function\"&&Oc.attach(\"info\",t.logger.info),typeof t.logger.warn==\"function\"&&Oc.attach(\"warn\",t.logger.warn),typeof t.logger.error==\"function\"&&Oc.attach(\"error\",t.logger.error)),n.config=t,n.syncQueue=new HI(n.receiveSyncHandler),n.mode=t.mode,n.anchor=t.anchor,n.enableGlobalClick=!Object(H.isUndefined)(t.enableGlobalClick)&&t.enableGlobalClick,n.resize=t.resize||!1,n.interactive=t.interactive,n.cacheImage.style.position=\"absolute\",n.cacheImage.style.zIndex=\"100\",n.frame.style.cssText=\"width:100%;height:100%;display:flex;justify-content:center;align-items:center;visibility:hidden;position:relative;z-index:1;\",n.setMedianControllerAttribute(),n.frame.appendChild(n.medianController),n.anchor.appendChild(n.frame),n.frameResizeObserver.observe(n.frame),n.on(ao.syncReceive,function(r){n.lock.unlock(r.type,r.uuid),n.syncQueue.addTask(r)}),n.renderingTaskManager.eventHub.on(\"task-error\",function(r){var o=r.error,s=r.task,a=br.transform(o);a.errorType===us.RuntimeWarn?Jn.warn(a.message,n.taskId):Jn.error(a.message,n.taskId),n.emit(ao.renderError,{error:a,index:s.slideIndex})}),window.addEventListener(\"__slide_ref__\",n.handleSlideRef),n.resizeView=Object(H.debounce)(n.resizeView.bind(n),50),n.player=n.initPlayer(t),t!=null&&t.controller&&n.createController(),n.player.view&&n.frame.appendChild(n.player.view),n.handleViewClick=Object(H.debounce)(n.handleViewClick,300),n.player.errorChannel.on(\"error\",function(r,o){var s=br.transform(r);s.errorType===us.RuntimeWarn?Jn.warn(s.message,n.taskId):Jn.error(s.message,n.taskId),n.isLoading=!1,n.emit(ao.renderError,{error:r,index:o})}),n}return jI(e,i),e.prototype.initPlayer=function(t){var n,r,o,s=this,a=new Fr(this.mode,!!Object(H.isUndefined)(this.config.useLocalCache)||this.config.useLocalCache);return a.setInteractive(this.interactive),a.updateConfig(t.renderOptions||{}),a.on(kt.renderStart,function(l){s.isLoading=!0,s.emit(ao.renderStart,l)}),a.on(kt.renderEnd,function(l){s.isLoading=!1,s.player&&(s.designHeight=s.player.designHeight,s.designWidth=s.player.designWidth,s.cacheImage.style.width=s.player.designWidth+\"px\",s.cacheImage.style.height=s.player.designHeight+\"px\",s._slideCount=s.player.slideCount),s.emit(ao.renderEnd,l)}),a.on(kt.slideChange,function(l){s.__slideState.currentSlideIndex=l,s.emit(ao.slideChange,l)}),a.on(kt.mainSeqStateChange,function(l){s.__slideState.mainSeqState=l,s.emitStateChange()}),a.on(kt.mainSeqStepChange,function(l){s.__slideState.mainSeqStep=l,s.emitStateChange()}),a.on(kt.interactiveSeqStateChange,function(l){var u=l.id,h=l.state;s.__slideState.interactiveSeqState[u]=h,s.emitStateChange()}),a.on(kt.animateStart,function(){s.isAnimating!==!0&&(s.isAnimating=!0,s.emit(ao.animateStart))}),a.on(kt.animateEnd,function(){s.isAnimating!==!1&&(s.isAnimating=!1,s.emit(ao.animateEnd))}),a.on(kt.interactiveSeqAction,function(l){var u=l.action,h=l.seqId;s.emitSyncDispatch({slideIndex:s.__slideState.currentSlideIndex,type:\"interactiveAnim\",action:u,seqId:h}),s.emitStateChange()}),a.on(kt.mainSeqStepStart,function(l){s.emit(ao.mainSeqStepStart,l)}),a.on(kt.mainSeqStepEnd,function(l){s.emit(ao.mainSeqStepEnd,l)}),a.on(kt.mediaPlay,function(l){var u={type:\"play\",time:s.timestamp()-1e3*l.time};s.__slideState.mediaState[l.id]=u,s.emitSyncDispatch({slideIndex:s.__slideState.currentSlideIndex,type:\"mediaPlay\",id:l.id,state:u}),s.emitStateChange()}),a.on(kt.mediaPause,function(l){var u={type:\"pause\",time:l.time};s.__slideState.mediaState[l.id]=u,s.emitSyncDispatch({slideIndex:s.__slideState.currentSlideIndex,type:\"mediaPause\",id:l.id,state:u}),s.emitStateChange()}),a.on(kt.mediaSeek,function(l){var u={type:\"pause\",time:0};l.isPlaying?(u.type=\"play\",s.__slideState.mediaState[l.id]?u.time=s.__slideState.mediaState[l.id].time-1e3*l.time:u.time=s.timestamp()-1e3*l.time,s.__slideState.mediaState[l.id]=u):(u.type=\"pause\",u.time=l.time,s.__slideState.mediaState[l.id]=u),s.emitSyncDispatch({slideIndex:s.__slideState.currentSlideIndex,type:\"mediaSeek\",id:l.id,time:l.time,state:u}),s.emitStateChange()}),a.on(kt.requestPrevSlide,this.handlePrevSlide),a.on(kt.requestNextSlide,this.handleNextSlide),a.on(kt.requestGotoSlide,this.handleGotoSlide),(n=a.view)===null||n===void 0||n.addEventListener(\"touchend\",this.handleViewTouchEnd),(r=a.view)===null||r===void 0||r.addEventListener(\"touchstart\",this.handleViewTouchStart),(o=a.view)===null||o===void 0||o.addEventListener(\"click\",this.handleViewClick),a.on(kt.userInput,this.userInputHandle),a},e.prototype.createController=function(){this.player&&(this.playerController=new GI({player:this.player,params:this.player.config||{},target:this.frame}))},e.prototype.setMedianControllerAttribute=function(){this.medianController.className=\"median-container\",this.medianController.style.position=\"absolute\",this.medianController.style.left=\"0\",this.medianController.style.top=\"0\",this.medianController.style.zIndex=\"2\"},e.prototype.frameResizeHandler=function(){var t=this.frame.getBoundingClientRect(),n=t.width,r=t.height;this.frameWidth=n,this.frameHeight=r,this.resizeView()},e.prototype.resizeView=function(){var t,n,r=this,o=this.width,s=this.height;if(o>0&&s>0){var a=this.frameWidth/o,l=a*s;l>this.frameHeight&&(a*=this.frameHeight/l),(t=this.player)===null||t===void 0||t.scaleView(a,this.resize),this.cacheImage.style.transform=\"scale(\"+a+\")\",this.medianController.style.transform=\"scale(\"+a+\")\",this.medianController.style.top=(this.frameHeight-s*a)/2+\"px\",this.medianController.setAttribute(\"data-scale\",a.toString()),this.isInitResized||(this.isInitResized=!0,(n=this.player)===null||n===void 0||n.clock.setTimeout(function(){r.frame.style.visibility=\"visible\"},32))}},e.prototype.setSlideState=function(t){var n,r,o;return Hs(this,void 0,void 0,function(){var s,a=this;return zs(this,function(l){switch(l.label){case 0:return this.isSyncingSlideState=!0,Jn.info(\"stateChange receive \"+JSON.stringify(t),this.taskId),t.taskId&&t.taskId!==this.__slideState.taskId&&(this.__slideState.taskId=t.taskId,(n=this.player)===null||n===void 0||n.setResourceData(t.taskId,this.__slideState.url)),t.url&&t.url!==this.__slideState.url&&(this.__slideState.url=t.url,(r=this.player)===null||r===void 0||r.setResourceData(this.__slideState.taskId,t.url)),Number.isInteger(t.currentSlideIndex)&&t.currentSlideIndex!==this.__slideState.currentSlideIndex?(this.__slideState.currentSlideIndex=t.currentSlideIndex,[4,this.doRenderSlide(t.currentSlideIndex)]):[3,2];case 1:l.sent(),l.label=2;case 2:return[4,(o=this.player)===null||o===void 0?void 0:o.clock.waitUntil(function(){var u,h;return((u=a.player)===null||u===void 0?void 0:u.currentIndex)===t.currentSlideIndex&&((h=a.player)===null||h===void 0?void 0:h.currentStage)},3e3)];case 3:return l.sent(),s=!1,Number.isInteger(t.mainSeqStep)&&t.mainSeqStep!==this.__slideState.mainSeqStep&&(s=!0,this.__slideState.mainSeqStep=t.mainSeqStep),t.mainSeqState&&t.mainSeqState!==this.__slideState.mainSeqState&&(s=!0,this.__slideState.mainSeqState=t.mainSeqState),s&&this.setMainSeqStep(this.__slideState.mainSeqStep,this.__slideState.mainSeqState===\"idle\"?\"start\":\"end\"),t.mediaState&&(this.initMedia(t),this.__slideState.mediaState=t.mediaState),t.interactiveSeqState&&(this.initInteractiveSeq(t),this.__slideState.interactiveSeqState=t.interactiveSeqState),this.isSyncingSlideState=!1,[2]}})})},e.prototype.initInteractiveSeq=function(t){var n;for(var r in t.interactiveSeqState){var o=t.interactiveSeqState[r];(n=this.player)===null||n===void 0||n.setInteractiveSeqState(r,o.step,o.state===\"end\"?\"end\":\"start\")}},e.prototype.initMedia=function(t){var n,r,o=this,s=function(u){var h=t.mediaState[u],d=a.__slideState.mediaState[u];if(d&&h.type===d.type&&h.time===d.time)return\"continue\";h.type===\"play\"?(n=a.player)===null||n===void 0||n.setMediaState(u,!0).then(function(){var p,m=o.timestamp();(p=o.player)===null||p===void 0||p.setMediaCurrentTime(u,(m-h.time)/1e3)}):(r=a.player)===null||r===void 0||r.setMediaState(u,!1).then(function(){var p;(p=o.player)===null||p===void 0||p.setMediaCurrentTime(u,h.time)})},a=this;for(var l in t.mediaState)s(l)},Object.defineProperty(e.prototype,\"slideCount\",{get:function(){return this._slideCount},enumerable:!1,configurable:!0}),e.prototype.getSlideCountAsync=function(){return Hs(this,void 0,void 0,function(){return zs(this,function(t){switch(t.label){case 0:if(this._slideCount>0)return[2,this._slideCount];t.label=1;case 1:return t.trys.push([1,4,,5]),[4,fetch(this.__slideState.url+\"/\"+this.__slideState.taskId+\"/jsonOutput/slide-1.json\")];case 2:return[4,t.sent().json()];case 3:return[2,t.sent().slideCount];case 4:return t.sent(),[2,0];case 5:return[2]}})})},Object.defineProperty(e.prototype,\"slideState\",{get:function(){return this.__slideState.mainSeqState=this.mainSeqState,this.__slideState.mainSeqStep=this.mainSeqStep,JSON.parse(JSON.stringify(this.__slideState))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"mainSeqLength\",{get:function(){var t;return((t=this.player)===null||t===void 0?void 0:t.mainSeqLength())||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"mainSeqStep\",{get:function(){var t;return((t=this.player)===null||t===void 0?void 0:t.mainSeqStep())||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"mainSeqState\",{get:function(){var t;return((t=this.player)===null||t===void 0?void 0:t.mainSeqState())||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"renderOptions\",{get:function(){var t;return((t=this.player)===null||t===void 0?void 0:t.config)||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"drawCall\",{get:function(){var t;return((t=this.player)===null||t===void 0?void 0:t.runtime.drawCall)||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"renderFps\",{get:function(){var t;return((t=this.player)===null||t===void 0?void 0:t.runtime.fps)||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"runtimeFps\",{get:function(){var t;return((t=this.player)===null||t===void 0?void 0:t.fps.value)||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"view\",{get:function(){var t;return((t=this.player)===null||t===void 0?void 0:t.view)||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"width\",{get:function(){return this.designWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"height\",{get:function(){return this.designHeight},enumerable:!1,configurable:!0}),e.prototype.updateRenderOption=function(t){this.player&&(this.player.updateConfig(t),this.renderOptions&&(this.config.renderOptions=this.renderOptions))},e.prototype.setResource=function(t,n){var r;this.taskId=t,(r=this.player)===null||r===void 0||r.setResourceData(t,n),this.__slideState.taskId=t,this.__slideState.url=n,this.emitSyncDispatch({slideIndex:this.__slideState.currentSlideIndex,type:\"setResource\",taskId:t,url:n})},e.prototype._renderSlide=function(t){var n;return Hs(this,void 0,void 0,function(){var r=this;return zs(this,function(o){switch(o.label){case 0:return this.player&&t===this.player.currentIndex?[2]:((Fr.platform.isIOS()||Fr.platform.isAndroid())&&this.iosResetCache.indexOf(t)<0&&this.iosResetCache.push(t),this.isLoading=!0,[4,(n=this.player)===null||n===void 0?void 0:n.renderSlide(t)]);case 1:return o.sent(),this.__slideState.currentSlideIndex=t,this.isLoading=!1,this.resizeView(),this.emitStateChange(),setTimeout(function(){var s,a;if(((a=(s=r.player)===null||s===void 0?void 0:s.view)===null||a===void 0?void 0:a.style.visibility)===\"hidden\"&&(r.player.view.style.visibility=\"visible\"),r.frame.style.visibility===\"hidden\"&&(r.frame.style.visibility=\"visible\"),r.needClearCacheImage)try{r.frame.removeChild(r.cacheImage)}catch{}},100),[2]}})})},e.prototype.renderSlide=function(t,n){if(n===void 0&&(n=!0),this.player){var r=Number(t);(r!==this.player.currentIndex||this.renderingTaskManager.hasStartTask())&&(r>this.slideCount&&this.slideCount>0||this.poseRenderSlide(r,n))}},e.prototype.needCreateNewPlayer=function(){var t=Fr.platform.isLowGpuMemory()?15:30;return(Fr.platform.isIOS()||Fr.platform.isAndroid())&&this.iosResetCache.length>t},e.prototype.poseRenderSlide=function(t,n){this.isLoading=!0,this.mode===\"interactive\"?this.emitSyncDispatch({slideIndex:this.__slideState.currentSlideIndex,type:\"renderSlide\",index:t,isForward:n}):this.mode===\"sync\"?(this.doRenderSlide(t,n),this.emitSyncDispatch({slideIndex:this.__slideState.currentSlideIndex,type:\"renderSlide\",index:t,isForward:n})):this.doRenderSlide(t,n)},e.prototype.doRenderSlide=function(t,n){var r,o,s,a=this;if(n===void 0&&(n=!0),!this.player)return Promise.resolve();if(this.needCreateNewPlayer()&&(this.iosResetCache=[],this.iosNewPlayer=this.initPlayer(this.config),this.iosNewPlayer.setResourceData(this.__slideState.taskId,this.__slideState.url)),this.iosNewPlayer){var l=this.player.getSnapshot();this.cacheImage.src=l,this.frame.appendChild(this.cacheImage),this.player.destroy(),(r=this.playerController)===null||r===void 0||r.destroy(),this.player=this.iosNewPlayer,this.iosNewPlayer=void 0,!((o=this.config)===null||o===void 0)&&o.controller&&this.createController(),this.needClearCacheImage=!0,!((s=this==null?void 0:this.player)===null||s===void 0)&&s.view&&(this.player.view.style.visibility=\"hidden\",this.frame.appendChild(this.player.view))}var u=Math.random().toString(32).substr(2);return this.player.isForward=n,this.renderingTaskManager.addTask(function(){return a._renderSlide(t)},t,u),new Promise(function(h){a.renderingTaskManager.eventHub.once(\"task-end-\"+u,h)})},e.prototype.nextStep=function(){!this.isLoading&&this.player&&this.interactive&&(this.player.mainSeqHasNextStep()?this.mode===\"interactive\"?this.emitSyncDispatch({slideIndex:this.__slideState.currentSlideIndex,type:\"nextStep\",next:this.player.mainSeqStep()+1}):this.mode===\"sync\"?(this.doNextStep(),this.emitSyncDispatch({slideIndex:this.__slideState.currentSlideIndex,type:\"nextStep\",next:this.player.mainSeqStep()})):this.doNextStep():this.handleNextSlide())},e.prototype.doNextStep=function(){if(this.player){this.player.nextStep();var t=this.player.mainSeqStep();this.__slideState.mainSeqStep=t,this.emitStateChange()}},e.prototype.prevStep=function(){!this.isLoading&&this.player&&this.interactive&&(this.player.mainSeqHasPrevStep()?this.mode===\"interactive\"?this.emitSyncDispatch({type:\"prevStep\",slideIndex:this.__slideState.currentSlideIndex,next:this.player.mainSeqStep()-1}):this.mode===\"sync\"?(this.doPrevStep(),this.emitSyncDispatch({slideIndex:this.__slideState.currentSlideIndex,type:\"prevStep\",next:this.player.mainSeqStep()})):this.doPrevStep():this.handlePrevSlide())},e.prototype.doPrevStep=function(){if(this.player){this.player.prevStep();var t=this.player.mainSeqStep();this.__slideState.mainSeqStep=t,this.emitStateChange()}},e.prototype.isSlideStateReady=function(t){return t.taskId.length>0&&t.url.length>0&&t.currentSlideIndex>0},e.prototype.emitStateChange=function(){if(this.mode!==\"local\"&&!this.isSyncingSlideState){var t=this.slideState;!Object(H.isEqual)(this.lastEmitedState,t)&&this.isSlideStateReady(t)&&(this.lastEmitedState=t,this.emit(ao.stateChange,t),Jn.info(\"stateChange dispatch \"+JSON.stringify(this.slideState),this.taskId))}},e.prototype.emitSyncDispatch=function(t){if(!this.lock.isLocked(t.type)){var n=Math.random().toString(32).substr(2);this.lock.addLock(t.type,n),this.emit(ao.syncDispatch,Np(Np({},t),{uuid:n})),Jn.info(\"sync dispatch \"+JSON.stringify(t),this.taskId)}},e.prototype.setMainSeqStep=function(t,n){var r;(r=this.player)===null||r===void 0||r.setMainSeqStep(t,n)},e.prototype.setInteractive=function(t){var n;this.interactive=t,(n=this.player)===null||n===void 0||n.setInteractive(t)},e.prototype.pause=function(){var t;(t=this.player)===null||t===void 0||t.pause()},e.prototype.resume=function(){var t;(t=this.player)===null||t===void 0||t.resume()},e.prototype.frozen=function(){var t;return Hs(this,void 0,void 0,function(){var n,r,o,s=this;return zs(this,function(a){switch(a.label){case 0:return this.isFrowning?[2,B_(function(){return!s.isFrowning},6e4)]:this.view&&this.player?(this.isFrowning=!0,[4,this.player.clock.waitUntil(function(){return!s.isLoading},6e4)]):[3,2];case 1:for(r in a.sent(),n=this.player.getSnapshot()||\"\",this.cacheImage.src=n,this.frame.appendChild(this.cacheImage),this.player.destroy(),(t=this.playerController)===null||t===void 0||t.destroy(),this.player=void 0,this.__slideState.mediaState)o=this.__slideState.mediaState[r],this.__slideState.mediaState[r]=Np(Np({},o),{frozenTime:this.timestamp()});this.isFrowning=!1,a.label=2;case 2:return[2]}})})},e.prototype.release=function(){var t,n;return Hs(this,void 0,void 0,function(){var r,o,s,a,l=this;return zs(this,function(u){switch(u.label){case 0:if(this.player)return[2];if(this.isReleasing)return[2,B_(function(){return!l.isReleasing},6e4)];for(o in this.isReleasing=!0,this.player=this.initPlayer(this.config),!((t=this.config)===null||t===void 0)&&t.controller&&this.createController(),this.player.view&&(this.frame.appendChild(this.player.view),this.player.view.style.visibility=\"hidden\"),r=this.__slideState,this.__slideState=Object(H.cloneDeep)(DS),r.mediaState)(s=r.mediaState[o]).type===\"play\"&&(a=Math.max((n=s.frozenTime)!==null&&n!==void 0?n:0,s.time),s.time=this.timestamp()-(a-s.time),s.frozenTime=void 0);return[4,this.setSlideState(r)];case 1:return u.sent(),[4,this.player.clock.delay(333)];case 2:u.sent(),this.player.view&&(this.player.view.style.visibility=\"visible\");try{this.frame.removeChild(this.cacheImage)}catch{}return this.isReleasing=!1,[2]}})})},e.prototype._doDestroy=function(){var t,n,r,o;this.playerController&&this.playerController.destroy(),this.frameResizeObserver.disconnect(),(t=this.player)===null||t===void 0||t.removeAllListeners(),(n=this.player)===null||n===void 0||n.destroy(),(r=this.player)===null||r===void 0||r.removeAllListeners(),window.removeEventListener(\"__slide_ref__\",this.handleSlideRef);try{!((o=this.player)===null||o===void 0)&&o.view&&this.anchor.removeChild(this.player.view),this.anchor.removeChild(this.frame)}catch{}},e.prototype.waitLoadEnd=function(){return Hs(this,void 0,void 0,function(){var t;return zs(this,function(n){switch(n.label){case 0:t=0,n.label=1;case 1:return this.isLoading&&t<10?[4,F_(100)]:[3,3];case 2:return n.sent(),t+=1,[3,1];case 3:return[2]}})})},e.prototype.destroy=function(){var t=this;this.isLoading?this.waitLoadEnd().then(function(){t._doDestroy()}):this._doDestroy()},e.prototype.clearSlideCache=function(){var t;(t=this.player)===null||t===void 0||t.clearLocalCache()},e.clearLocalCache=function(){Fr.clearLocalCache()},e.disposeLocalCache=function(){},e}(O.a)}]);function rT(S,M,v){return Math.min(Math.max(S,M),v)}function KI(S){return typeof S==\"object\"&&S!==null}var oT={exports:{}},QI={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},sT={exports:{}},eO=function(M){return!M||typeof M==\"string\"?!1:M instanceof Array||Array.isArray(M)||M.length>=0&&(M.splice instanceof Function||Object.getOwnPropertyDescriptor(M,M.length-1)&&M.constructor.name!==\"String\")},tO=eO,nO=Array.prototype.concat,iO=Array.prototype.slice,JS=sT.exports=function(M){for(var v=[],b=0,Q=M.length;b<Q;b++){var me=M[b];tO(me)?v=nO.call(v,iO.call(me)):v.push(me)}return v};JS.wrap=function(S){return function(){return S(JS(arguments))}};var Hp=QI,Vp=sT.exports,aT=Object.hasOwnProperty,lT={};for(var z_ in Hp)aT.call(Hp,z_)&&(lT[Hp[z_]]=z_);var ho=oT.exports={to:{},get:{}};ho.get=function(S){var M=S.substring(0,3).toLowerCase(),v,b;switch(M){case\"hsl\":v=ho.get.hsl(S),b=\"hsl\";break;case\"hwb\":v=ho.get.hwb(S),b=\"hwb\";break;default:v=ho.get.rgb(S),b=\"rgb\";break}return v?{model:b,value:v}:null};ho.get.rgb=function(S){if(!S)return null;var M=/^#([a-f0-9]{3,4})$/i,v=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,b=/^rgba?\\(\\s*([+-]?\\d+)(?=[\\s,])\\s*(?:,\\s*)?([+-]?\\d+)(?=[\\s,])\\s*(?:,\\s*)?([+-]?\\d+)\\s*(?:[,|\\/]\\s*([+-]?[\\d\\.]+)(%?)\\s*)?\\)$/,Q=/^rgba?\\(\\s*([+-]?[\\d\\.]+)\\%\\s*,?\\s*([+-]?[\\d\\.]+)\\%\\s*,?\\s*([+-]?[\\d\\.]+)\\%\\s*(?:[,|\\/]\\s*([+-]?[\\d\\.]+)(%?)\\s*)?\\)$/,me=/^(\\w+)$/,q=[0,0,0,1],O,$,H;if(O=S.match(v)){for(H=O[2],O=O[1],$=0;$<3;$++){var D=$*2;q[$]=parseInt(O.slice(D,D+2),16)}H&&(q[3]=parseInt(H,16)/255)}else if(O=S.match(M)){for(O=O[1],H=O[3],$=0;$<3;$++)q[$]=parseInt(O[$]+O[$],16);H&&(q[3]=parseInt(H+H,16)/255)}else if(O=S.match(b)){for($=0;$<3;$++)q[$]=parseInt(O[$+1],0);O[4]&&(O[5]?q[3]=parseFloat(O[4])*.01:q[3]=parseFloat(O[4]))}else if(O=S.match(Q)){for($=0;$<3;$++)q[$]=Math.round(parseFloat(O[$+1])*2.55);O[4]&&(O[5]?q[3]=parseFloat(O[4])*.01:q[3]=parseFloat(O[4]))}else return(O=S.match(me))?O[1]===\"transparent\"?[0,0,0,0]:aT.call(Hp,O[1])?(q=Hp[O[1]],q[3]=1,q):null:null;for($=0;$<3;$++)q[$]=_l(q[$],0,255);return q[3]=_l(q[3],0,1),q};ho.get.hsl=function(S){if(!S)return null;var M=/^hsla?\\(\\s*([+-]?(?:\\d{0,3}\\.)?\\d+)(?:deg)?\\s*,?\\s*([+-]?[\\d\\.]+)%\\s*,?\\s*([+-]?[\\d\\.]+)%\\s*(?:[,|\\/]\\s*([+-]?(?=\\.\\d|\\d)(?:0|[1-9]\\d*)?(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)\\s*)?\\)$/,v=S.match(M);if(v){var b=parseFloat(v[4]),Q=(parseFloat(v[1])%360+360)%360,me=_l(parseFloat(v[2]),0,100),q=_l(parseFloat(v[3]),0,100),O=_l(isNaN(b)?1:b,0,1);return[Q,me,q,O]}return null};ho.get.hwb=function(S){if(!S)return null;var M=/^hwb\\(\\s*([+-]?\\d{0,3}(?:\\.\\d+)?)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?(?=\\.\\d|\\d)(?:0|[1-9]\\d*)?(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)\\s*)?\\)$/,v=S.match(M);if(v){var b=parseFloat(v[4]),Q=(parseFloat(v[1])%360+360)%360,me=_l(parseFloat(v[2]),0,100),q=_l(parseFloat(v[3]),0,100),O=_l(isNaN(b)?1:b,0,1);return[Q,me,q,O]}return null};ho.to.hex=function(){var S=Vp(arguments);return\"#\"+Eg(S[0])+Eg(S[1])+Eg(S[2])+(S[3]<1?Eg(Math.round(S[3]*255)):\"\")};ho.to.rgb=function(){var S=Vp(arguments);return S.length<4||S[3]===1?\"rgb(\"+Math.round(S[0])+\", \"+Math.round(S[1])+\", \"+Math.round(S[2])+\")\":\"rgba(\"+Math.round(S[0])+\", \"+Math.round(S[1])+\", \"+Math.round(S[2])+\", \"+S[3]+\")\"};ho.to.rgb.percent=function(){var S=Vp(arguments),M=Math.round(S[0]/255*100),v=Math.round(S[1]/255*100),b=Math.round(S[2]/255*100);return S.length<4||S[3]===1?\"rgb(\"+M+\"%, \"+v+\"%, \"+b+\"%)\":\"rgba(\"+M+\"%, \"+v+\"%, \"+b+\"%, \"+S[3]+\")\"};ho.to.hsl=function(){var S=Vp(arguments);return S.length<4||S[3]===1?\"hsl(\"+S[0]+\", \"+S[1]+\"%, \"+S[2]+\"%)\":\"hsla(\"+S[0]+\", \"+S[1]+\"%, \"+S[2]+\"%, \"+S[3]+\")\"};ho.to.hwb=function(){var S=Vp(arguments),M=\"\";return S.length>=4&&S[3]!==1&&(M=\", \"+S[3]),\"hwb(\"+S[0]+\", \"+S[1]+\"%, \"+S[2]+\"%\"+M+\")\"};ho.to.keyword=function(S){return lT[S.slice(0,3)]};function _l(S,M,v){return Math.min(Math.max(M,S),v)}function Eg(S){var M=Math.round(S).toString(16).toUpperCase();return M.length<2?\"0\"+M:M}var rO=oT.exports;class oO{constructor(M){this.enable=M,this.apps={},this.level=\"debug\",this.roomLogger=null,this._onMessage=v=>{let b;v instanceof CustomEvent?b=v.detail:KI(v.data)&&(b=v.data),b&&(typeof b.slide==\"boolean\"?this.enable=b.slide:b.slide===\"__instance\"?console.log(this):b.slide===\"__debug\"&&Object.values(this.apps).forEach(Q=>{var me,q;(q=(me=Q.controller)==null?void 0:me.slide)==null||q.createController()}))},this.initialize()}setAppContext(M,v){var b;((b=this.apps)[M]||(b[M]={})).context=v,this.log(`[Slide] new ${M}`)}setAppController(M,v){var b;((b=this.apps)[M]||(b[M]={})).controller=v}deleteApp(M){delete this.apps[M],this.log(`[Slide] delete ${M}`)}initialize(){window.addEventListener(\"message\",this._onMessage)}dispose(){window.removeEventListener(\"message\",this._onMessage)}log(...M){this.roomLogger?this.roomLogger.info(...M):this.enable&&console.log(...M)}verbose(...M){this.roomLogger?this.roomLogger.debug(...M):this.enable&&this.level===\"verbose\"&&console.log(...M)}warn(...M){this.roomLogger?this.roomLogger.warn(...M):console.warn(...M)}}const Co=new oO(!1),qi=Co.log.bind(Co),j_=Co.verbose.bind(Co),sO=S=>{Co.roomLogger=S.logger};function uT(S){try{const M=window.getComputedStyle(S).backgroundColor;if(M!==\"rgba(0, 0, 0, 0)\"&&M!==\"transparent\")return M;if(S.parentElement)return uT(S.parentElement)}catch{}return\"#ffffff\"}function aO(S){const M=rO.get(S);if(M&&M.model===\"rgb\"){const v=M.value,Q=(((Math.round(v[0])&255)<<16)+((Math.round(v[1])&255)<<8)+(Math.round(v[2])&255)).toString(16);return\"#\"+\"000000\".substring(Q.length)+Q}else return S}let Mg=\"\";function hT(S){return Mg||(Mg=aO(uT(S)),qi(\"[Slide] guess bg color\",Mg)),Mg}function cT(S){const{width:M,height:v,slideCount:b,slideState:Q}=S,{taskId:me,url:q}=Q,O=[];for(let $=1;$<=b;++$)O.push({width:M,height:v,thumbnail:`${q}/${me}/preview/${$}.png`,src:\"ppt\"});return O}function ZS(S,M,v,b){var O;const Q=v.slideState.currentSlideIndex;if(!(Q>0)||!M.getIsWritable())return;const me=[b,Q].join(\"/\");if(S.scenePathType(me)!==\"page\"){S.removeScenes(b);const $=v.slideCount,H=[];for(let D=1;D<=$;++D)H.push({name:`${D}`});S.putScenes(b,H)}let q;M.getBox().focus?q=S.state.sceneState.scenePath:q=((O=M.getView())==null?void 0:O.focusScenePath)||\"\",q!==me&&M.setScenePath(me)}const Y_=\"https://convertcdn.netless.link/dynamicConvert\",lO=40,V_={taskId:\"\",url:\"\",state:null};class uO{constructor({context:M,anchor:v,onPageChanged:b,onTransitionStart:Q,onTransitionEnd:me,onError:q}){this.sideEffect=new jp,this.ready=!1,this.readyPromise=new Promise(O=>{this.resolveReady=()=>{this.ready?qi(\"[Slide] render end\"):setTimeout(()=>{this.ready=!0,O()},1e3)}}),this.onSyncDispatch=O=>{if(this.context.getIsWritable()&&this.room){const $={type:wi.SLIDE_EVENTS.syncDispatch,payload:O};j_(\"[Slide] dispatch\",JSON.stringify(O)),this.context.dispatchMagixEvent(wi.SLIDE_EVENTS.syncDispatch,$)}},this.magixEventListener=O=>{const{type:$,payload:H}=O.payload;$===wi.SLIDE_EVENTS.syncDispatch&&(this.syncStateOnce(),j_(\"[Slide] receive\",JSON.stringify(H)),this.slide.emit(wi.SLIDE_EVENTS.syncReceive,H))},this.onStateChange=O=>{this.context.getIsWritable()&&(j_(\"[Slide] state change\",JSON.stringify(O,null,2)),this.context.storage.setState({state:O}))},this.pollCount=0,this.pollReadyState=()=>{this.ready?this._toFreeze===1?this.freeze():this._toFreeze===-1&&this.unfreeze():this.pollCount<lO?(this.pollCount++,setTimeout(this.pollReadyState,500)):(this.pollCount=0,qi(\"[Slide] renderSlide 1 (retry after timeout)\"),this.slide.renderSlide(1))},this._pageCount=0,this.destroyed=!1,this.timestamp=()=>this.room&&this.room.calibrationTimestamp?this.room.calibrationTimestamp:this.player?this.player.beginTimestamp+this.player.progressTime:Date.now(),this.isFrozen=!1,this._toFreeze=0,this.freezePromise=null,this.freeze=()=>{this.ready?(qi(\"[Slide] freeze\",this.context.appId),this.freezePromise?this._toFreeze=1:this.isFrozen||(this._toFreeze=0,this.freezePromise=this.slide.frozen().then(this.afterFreeze.bind(this,1)))):this._toFreeze=1},this.unfreeze=async()=>{!this.visible||(this.ready?(qi(\"[Slide] unfreeze\",this.context.appId),this.freezePromise?this._toFreeze=-1:this.isFrozen&&(this._toFreeze=0,this.freezePromise=this.slide.release().then(this.afterFreeze.bind(this,-1)))):this._toFreeze=-1)},this.onVisibilityChange=async()=>{(this.visible=document.visibilityState===\"visible\")?(qi(\"[Slide] unfreeze because tab becomes visible\",{savedIsFrozen:this.savedIsFrozen}),this.savedIsFrozen||this.unfreeze()):(this.savedIsFrozen=this.freezePromise?this._toFreeze===1:this.isFrozen,qi(\"[Slide] freeze because tab becomes invisible\"),this.freeze())},this.onPageChanged=b,this.onTransitionStart=Q,this.onTransitionEnd=me,this.onError=q,this.context=M,this.room=M.getRoom(),this.player=this.room?void 0:M.getDisplayer(),sO(this.room||this.player),this.slide=this.createSlide(v),this.syncStateOnceFlag=!this.context.isAddApp,this.visible=document.visibilityState===\"visible\",this.savedIsFrozen=!1,this.initialize()}jumpToPage(M){this.ready&&(M=rT(M,1,this.pageCount),this.slide.renderSlide(M))}initialize(){this.registerEventListeners(),this.kickStart()}kickStart(){const{context:M,slide:v}=this;M.getIsWritable()&&M.storage.ensureState(V_);const{taskId:b,url:Q,state:me}=M.storage.state;v.setResource(b,Q||Y_),me?(qi(\"[Slide] init with state\",JSON.stringify(me)),this.syncStateOnceFlag=!1,v.setSlideState(me)):M.isAddApp&&(qi(\"[Slide] init by renderSlide\",1),v.renderSlide(1)),this.pollReadyState()}registerEventListeners(){const{context:M,slide:v}=this,b=this.sideEffect.addDisposer(M.storage.addStateChangedListener(()=>{M.storage.state.state&&(this.syncStateOnce(),this.sideEffect.flush(b))}));this.sideEffect.add(()=>M.addMagixEventListener(wi.SLIDE_EVENTS.syncDispatch,this.magixEventListener,{fireSelfEventAfterCommit:!0})),v.on(wi.SLIDE_EVENTS.slideChange,this.onPageChanged),v.on(wi.SLIDE_EVENTS.renderStart,this.onTransitionStart),v.on(wi.SLIDE_EVENTS.renderEnd,this.onTransitionEnd),v.on(wi.SLIDE_EVENTS.mainSeqStepStart,this.onTransitionStart),v.on(wi.SLIDE_EVENTS.mainSeqStepEnd,this.onTransitionEnd),v.on(wi.SLIDE_EVENTS.renderError,this.onError),v.on(wi.SLIDE_EVENTS.stateChange,this.onStateChange),v.on(wi.SLIDE_EVENTS.syncDispatch,this.onSyncDispatch),v.on(wi.SLIDE_EVENTS.renderEnd,this.resolveReady),this.sideEffect.add(()=>(document.addEventListener(\"visibilitychange\",this.onVisibilityChange),()=>document.removeEventListener(\"visibilitychange\",this.onVisibilityChange)))}syncStateOnce(){if(this.syncStateOnceFlag){this.context.getIsWritable()&&this.context.storage.ensureState(V_);const{state:M}=this.context.storage.state;M&&(qi(\"[Slide] sync with state (once)\",JSON.stringify(M)),this.slide.setSlideState(M),this.syncStateOnceFlag=!1)}}get pageCount(){return this._pageCount>0?this._pageCount:(this._pageCount=this.slide.slideCount,this._pageCount)}get page(){return this.slide.slideState.currentSlideIndex}createSlide(M){var b,Q,me,q,O,$,H,D;return new wi.Slide({anchor:M,interactive:!0,mode:\"interactive\",resize:!0,controller:Co.enable,enableGlobalClick:!0,renderOptions:{minFPS:((b=this.context.getAppOptions())==null?void 0:b.minFPS)||25,maxFPS:((Q=this.context.getAppOptions())==null?void 0:Q.maxFPS)||30,autoFPS:(q=(me=this.context.getAppOptions())==null?void 0:me.autoFPS)!=null?q:!0,autoResolution:($=(O=this.context.getAppOptions())==null?void 0:O.autoResolution)!=null?$:!0,resolution:(H=this.context.getAppOptions())==null?void 0:H.resolution,transactionBgColor:((D=this.context.getAppOptions())==null?void 0:D.bgColor)||hT(M)},timestamp:this.timestamp})}destroy(){this.sideEffect.flushAll(),this.destroyed||(qi(\"[Slide] destroy slide (once)\"),this.slide.destroy(),this.destroyed=!0)}afterFreeze(M){M===1?(this.isFrozen=!0,this.freezePromise=null,this._toFreeze===-1&&this.unfreeze()):M===-1&&(this.isFrozen=!1,this.freezePromise=null,this._toFreeze===1&&this.freeze())}}function hO(S){const M=\"http://www.w3.org/2000/svg\",v=document.createElementNS(M,\"svg\");v.setAttribute(\"class\",`${S}-footer-icon-sidebar`),v.setAttribute(\"viewBox\",\"0 0 64 64\");const b=document.createElementNS(M,\"path\");return b.setAttribute(\"fill\",\"currentColor\"),b.setAttribute(\"d\",\"M50 8H14c-3.309 0-6 2.691-6 6v36c0 3.309 2.691 6 6 6h36c3.309 0 6-2.691 6-6V14c0-3.309-2.691-6-6-6zM12 50V14c0-1.103.897-2 2-2h8v40h-8c-1.103 0-2-.897-2-2zm40 0c0 1.103-.897 2-2 2H26V12h24c1.103 0 2 .897 2 2z\"),v.appendChild(b),v}function cO(S){const M=\"http://www.w3.org/2000/svg\",v=document.createElementNS(M,\"svg\");v.setAttribute(\"class\",`${S}-footer-icon-arrow-left`),v.setAttribute(\"viewBox\",\"0 0 500 500\");const b=document.createElementNS(M,\"path\");return b.setAttribute(\"fill\",\"currentColor\"),b.setAttribute(\"d\",\"M177.81 249.959L337.473 90.295c2.722-2.865 2.651-7.378-.143-10.1-2.793-2.65-7.163-2.65-9.956 0l-164.75 164.75c-2.793 2.793-2.793 7.306 0 10.1l164.75 164.75c2.865 2.722 7.378 2.65 10.099-.143 2.651-2.794 2.651-7.163 0-9.957L177.809 249.959z\"),v.appendChild(b),v}function dO(S){const M=\"http://www.w3.org/2000/svg\",v=document.createElementNS(M,\"svg\");v.setAttribute(\"class\",`${S}-footer-icon-arrow-right`),v.setAttribute(\"viewBox\",\"0 0 500 500\");const b=document.createElementNS(M,\"path\");return b.setAttribute(\"fill\",\"currentColor\"),b.setAttribute(\"d\",\"M322.19 250.041L162.527 409.705c-2.722 2.865-2.651 7.378.143 10.1 2.793 2.65 7.163 2.65 9.956 0l164.75-164.75c2.793-2.793 2.793-7.306 0-10.1l-164.75-164.75c-2.865-2.722-7.378-2.65-10.099.143-2.651 2.794-2.651 7.163 0 9.957l159.664 159.736z\"),v.appendChild(b),v}function pO(S){const M=\"http://www.w3.org/2000/svg\",v=document.createElementNS(M,\"svg\");v.setAttribute(\"class\",`${S}-footer-icon-play`),v.setAttribute(\"viewBox\",\"0 0 500 500\");const b=document.createElementNS(M,\"path\");return b.setAttribute(\"fill\",\"currentColor\"),b.setAttribute(\"d\",\"M418.158 257.419L174.663 413.33c-6.017 3.919-15.708 3.772-21.291-.29-2.791-2.018-4.295-4.483-4.295-7.084V94.109c0-5.65 6.883-10.289 15.271-10.289 4.298 0 8.391 1.307 11.181 3.332l242.629 155.484c6.016 3.917 6.451 10.292.649 14.491-.216.154-.432.154-.649.292zM170.621 391.288l223.116-141.301L170.71 107.753l-.089 283.535z\"),v.appendChild(b),v}function fO(S){const M=\"http://www.w3.org/2000/svg\",v=document.createElementNS(M,\"svg\");v.setAttribute(\"class\",`${S}-footer-icon-pause`),v.setAttribute(\"viewBox\",\"0 0 500 500\");const b=document.createElementNS(M,\"path\");return b.setAttribute(\"fill\",\"currentColor\"),b.setAttribute(\"d\",\"M312.491 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261zM165.257 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261z\"),v.appendChild(b),v}const xl=typeof window!=\"undefined\",dT=xl&&!(\"onscroll\"in window)||typeof navigator!=\"undefined\"&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),pT=xl&&\"IntersectionObserver\"in window,fT=xl&&\"classList\"in document.createElement(\"p\"),mT=xl&&window.devicePixelRatio>1,mO={elements_selector:\".lazy\",container:dT||xl?document:null,threshold:300,thresholds:null,data_src:\"src\",data_srcset:\"srcset\",data_sizes:\"sizes\",data_bg:\"bg\",data_bg_hidpi:\"bg-hidpi\",data_bg_multi:\"bg-multi\",data_bg_multi_hidpi:\"bg-multi-hidpi\",data_bg_set:\"bg-set\",data_poster:\"poster\",class_applied:\"applied\",class_loading:\"loading\",class_loaded:\"loaded\",class_error:\"error\",class_entered:\"entered\",class_exited:\"exited\",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1,restore_on_error:!1},gT=S=>Object.assign({},mO,S),KS=function(S,M){let v;const b=\"LazyLoad::Initialized\",Q=new S(M);try{v=new CustomEvent(b,{detail:{instance:Q}})}catch{v=document.createEvent(\"CustomEvent\"),v.initCustomEvent(b,!1,!1,{instance:Q})}window.dispatchEvent(v)},gO=(S,M)=>{if(!!M)if(!M.length)KS(S,M);else for(let v=0,b;b=M[v];v+=1)KS(S,b)},Ba=\"src\",$_=\"srcset\",J_=\"sizes\",vT=\"poster\",Wp=\"llOriginalAttrs\",_T=\"data\",Z_=\"loading\",yT=\"loaded\",xT=\"applied\",vO=\"entered\",K_=\"error\",bT=\"native\",wT=\"data-\",ST=\"ll-status\",$r=(S,M)=>S.getAttribute(wT+M),_O=(S,M,v)=>{var b=wT+M;if(v===null){S.removeAttribute(b);return}S.setAttribute(b,v)},Xp=S=>$r(S,ST),Uu=(S,M)=>_O(S,ST,M),Cg=S=>Uu(S,null),Q_=S=>Xp(S)===null,yO=S=>Xp(S)===Z_,xO=S=>Xp(S)===K_,ey=S=>Xp(S)===bT,bO=[Z_,yT,xT,K_],wO=S=>bO.indexOf(Xp(S))>=0,bl=(S,M,v,b)=>{if(!!S){if(b!==void 0){S(M,v,b);return}if(v!==void 0){S(M,v);return}S(M)}},Wc=(S,M)=>{if(fT){S.classList.add(M);return}S.className+=(S.className?\" \":\"\")+M},Vs=(S,M)=>{if(fT){S.classList.remove(M);return}S.className=S.className.replace(new RegExp(\"(^|\\\\s+)\"+M+\"(\\\\s+|$)\"),\" \").replace(/^\\s+/,\"\").replace(/\\s+$/,\"\")},SO=S=>{S.llTempImage=document.createElement(\"IMG\")},TO=S=>{delete S.llTempImage},TT=S=>S.llTempImage,Pg=(S,M)=>{if(!M)return;const v=M._observer;!v||v.unobserve(S)},EO=S=>{S.disconnect()},MO=(S,M,v)=>{M.unobserve_entered&&Pg(S,v)},ty=(S,M)=>{!S||(S.loadingCount+=M)},AO=S=>{!S||(S.toLoadCount-=1)},ET=(S,M)=>{!S||(S.toLoadCount=M)},RO=S=>S.loadingCount>0,CO=S=>S.toLoadCount>0,MT=S=>{let M=[];for(let v=0,b;b=S.children[v];v+=1)b.tagName===\"SOURCE\"&&M.push(b);return M},ny=(S,M)=>{const v=S.parentNode;if(!v||v.tagName!==\"PICTURE\")return;MT(v).forEach(M)},AT=(S,M)=>{MT(S).forEach(M)},Ig=[Ba],RT=[Ba,vT],zp=[Ba,$_,J_],CT=[_T],Og=S=>!!S[Wp],PT=S=>S[Wp],IT=S=>delete S[Wp],Vc=(S,M)=>{if(Og(S))return;const v={};M.forEach(b=>{v[b]=S.getAttribute(b)}),S[Wp]=v},PO=S=>{Og(S)||(S[Wp]={backgroundImage:S.style.backgroundImage})},IO=(S,M,v)=>{if(!v){S.removeAttribute(M);return}S.setAttribute(M,v)},ku=(S,M)=>{if(!Og(S))return;const v=PT(S);M.forEach(b=>{IO(S,b,v[b])})},OO=S=>{if(!Og(S))return;const M=PT(S);S.style.backgroundImage=M.backgroundImage},OT=(S,M,v)=>{Wc(S,M.class_applied),Uu(S,xT),v&&(M.unobserve_completed&&Pg(S,M),bl(M.callback_applied,S,v))},LT=(S,M,v)=>{Wc(S,M.class_loading),Uu(S,Z_),v&&(ty(v,1),bl(M.callback_loading,S,v))},yl=(S,M,v)=>{!v||S.setAttribute(M,v)},QS=(S,M)=>{yl(S,J_,$r(S,M.data_sizes)),yl(S,$_,$r(S,M.data_srcset)),yl(S,Ba,$r(S,M.data_src))},LO=(S,M)=>{ny(S,v=>{Vc(v,zp),QS(v,M)}),Vc(S,zp),QS(S,M)},NO=(S,M)=>{Vc(S,Ig),yl(S,Ba,$r(S,M.data_src))},DO=(S,M)=>{AT(S,v=>{Vc(v,Ig),yl(v,Ba,$r(v,M.data_src))}),Vc(S,RT),yl(S,vT,$r(S,M.data_poster)),yl(S,Ba,$r(S,M.data_src)),S.load()},FO=(S,M)=>{Vc(S,CT),yl(S,_T,$r(S,M.data_src))},BO=(S,M,v)=>{const b=$r(S,M.data_bg),Q=$r(S,M.data_bg_hidpi),me=mT&&Q?Q:b;!me||(S.style.backgroundImage=`url(\"${me}\")`,TT(S).setAttribute(Ba,me),LT(S,M,v))},kO=(S,M,v)=>{const b=$r(S,M.data_bg_multi),Q=$r(S,M.data_bg_multi_hidpi),me=mT&&Q?Q:b;!me||(S.style.backgroundImage=me,OT(S,M,v))},UO=(S,M,v)=>{const b=$r(S,M.data_bg_set);if(!b)return;const Q=b.split(\"|\");let me=Q.map(q=>`image-set(${q})`);S.style.backgroundImage=me.join(),S.style.backgroundImage===\"\"&&(me=Q.map(q=>`-webkit-image-set(${q})`),S.style.backgroundImage=me.join()),OT(S,M,v)},NT={IMG:LO,IFRAME:NO,VIDEO:DO,OBJECT:FO},GO=(S,M)=>{const v=NT[S.tagName];!v||v(S,M)},HO=(S,M,v)=>{const b=NT[S.tagName];!b||(b(S,M),LT(S,M,v))},zO=[\"IMG\",\"IFRAME\",\"VIDEO\",\"OBJECT\"],jO=S=>zO.indexOf(S.tagName)>-1,DT=(S,M)=>{M&&!RO(M)&&!CO(M)&&bl(S.callback_finish,M)},eT=(S,M,v)=>{S.addEventListener(M,v),S.llEvLisnrs[M]=v},VO=(S,M,v)=>{S.removeEventListener(M,v)},iy=S=>!!S.llEvLisnrs,WO=(S,M,v)=>{iy(S)||(S.llEvLisnrs={});const b=S.tagName===\"VIDEO\"?\"loadeddata\":\"load\";eT(S,b,M),eT(S,\"error\",v)},W_=S=>{if(!iy(S))return;const M=S.llEvLisnrs;for(let v in M){const b=M[v];VO(S,v,b)}delete S.llEvLisnrs},FT=(S,M,v)=>{TO(S),ty(v,-1),AO(v),Vs(S,M.class_loading),M.unobserve_completed&&Pg(S,v)},XO=(S,M,v,b)=>{const Q=ey(M);FT(M,v,b),Wc(M,v.class_loaded),Uu(M,yT),bl(v.callback_loaded,M,b),Q||DT(v,b)},qO=(S,M,v,b)=>{const Q=ey(M);FT(M,v,b),Wc(M,v.class_error),Uu(M,K_),bl(v.callback_error,M,b),v.restore_on_error&&ku(M,zp),Q||DT(v,b)},ry=(S,M,v)=>{const b=TT(S)||S;if(iy(b))return;WO(b,q=>{XO(q,S,M,v),W_(b)},q=>{qO(q,S,M,v),W_(b)})},YO=(S,M,v)=>{SO(S),ry(S,M,v),PO(S),BO(S,M,v),kO(S,M,v),UO(S,M,v)},$O=(S,M,v)=>{ry(S,M,v),HO(S,M,v)},oy=(S,M,v)=>{jO(S)?$O(S,M,v):YO(S,M,v)},JO=(S,M,v)=>{S.setAttribute(\"loading\",\"lazy\"),ry(S,M,v),GO(S,M),Uu(S,bT)},tT=S=>{S.removeAttribute(Ba),S.removeAttribute($_),S.removeAttribute(J_)},ZO=S=>{ny(S,M=>{tT(M)}),tT(S)},BT=S=>{ny(S,M=>{ku(M,zp)}),ku(S,zp)},KO=S=>{AT(S,M=>{ku(M,Ig)}),ku(S,RT),S.load()},QO=S=>{ku(S,Ig)},eL=S=>{ku(S,CT)},tL={IMG:BT,IFRAME:QO,VIDEO:KO,OBJECT:eL},nL=S=>{const M=tL[S.tagName];if(!M){OO(S);return}M(S)},iL=(S,M)=>{Q_(S)||ey(S)||(Vs(S,M.class_entered),Vs(S,M.class_exited),Vs(S,M.class_applied),Vs(S,M.class_loading),Vs(S,M.class_loaded),Vs(S,M.class_error))},rL=(S,M)=>{nL(S),iL(S,M),Cg(S),IT(S)},oL=(S,M,v,b)=>{!v.cancel_on_exit||!yO(S)||S.tagName===\"IMG\"&&(W_(S),ZO(S),BT(S),Vs(S,v.class_loading),ty(b,-1),Cg(S),bl(v.callback_cancel,S,M,b))},sL=(S,M,v,b)=>{const Q=wO(S);Uu(S,vO),Wc(S,v.class_entered),Vs(S,v.class_exited),MO(S,v,b),bl(v.callback_enter,S,M,b),!Q&&oy(S,v,b)},aL=(S,M,v,b)=>{Q_(S)||(Wc(S,v.class_exited),oL(S,M,v,b),bl(v.callback_exit,S,M,b))},lL=[\"IMG\",\"IFRAME\",\"VIDEO\"],kT=S=>S.use_native&&\"loading\"in HTMLImageElement.prototype,uL=(S,M,v)=>{S.forEach(b=>{lL.indexOf(b.tagName)!==-1&&JO(b,M,v)}),ET(v,0)},hL=S=>S.isIntersecting||S.intersectionRatio>0,cL=S=>({root:S.container===document?null:S.container,rootMargin:S.thresholds||S.threshold+\"px\"}),dL=(S,M,v)=>{S.forEach(b=>hL(b)?sL(b.target,b,M,v):aL(b.target,b,M,v))},pL=(S,M)=>{M.forEach(v=>{S.observe(v)})},fL=(S,M)=>{EO(S),pL(S,M)},mL=(S,M)=>{!pT||kT(S)||(M._observer=new IntersectionObserver(v=>{dL(v,S,M)},cL(S)))},UT=S=>Array.prototype.slice.call(S),Ag=S=>S.container.querySelectorAll(S.elements_selector),gL=S=>UT(S).filter(Q_),vL=S=>xO(S),_L=S=>UT(S).filter(vL),nT=(S,M)=>gL(S||Ag(M)),yL=(S,M)=>{_L(Ag(S)).forEach(b=>{Vs(b,S.class_error),Cg(b)}),M.update()},xL=(S,M)=>{!xl||(M._onlineHandler=()=>{yL(S,M)},window.addEventListener(\"online\",M._onlineHandler))},bL=S=>{!xl||window.removeEventListener(\"online\",S._onlineHandler)},qp=function(S,M){const v=gT(S);this._settings=v,this.loadingCount=0,mL(v,this),xL(v,this),this.update(M)};qp.prototype={update:function(S){const M=this._settings,v=nT(S,M);if(ET(this,v.length),dT||!pT){this.loadAll(v);return}if(kT(M)){uL(v,M,this);return}fL(this._observer,v)},destroy:function(){this._observer&&this._observer.disconnect(),bL(this),Ag(this._settings).forEach(S=>{IT(S)}),delete this._observer,delete this._settings,delete this._onlineHandler,delete this.loadingCount,delete this.toLoadCount},loadAll:function(S){const M=this._settings;nT(S,M).forEach(b=>{Pg(b,this),oy(b,M,this)})},restoreAll:function(){const S=this._settings;Ag(S).forEach(M=>{rL(M,S)})}};qp.load=(S,M)=>{const v=gT(M);oy(S,v)};qp.resetStatus=S=>{Cg(S)};xl&&gO(qp,window.lazyLoadOptions);class GT{constructor({readonly:M,onNewPageIndex:v,onPlay:b}){this._pages=[],this.pageIndex=0,this.setPaused=()=>{this.$btnPlay.classList.toggle(this.wrapClassName(\"footer-btn-playing\"),!1)},this.setPlaying=()=>{this.$btnPlay.classList.toggle(this.wrapClassName(\"footer-btn-playing\"),!0)},this.namespace=\"netless-app-slide\",this.isShowPreview=!1,this.isSmallBox=!1,this.sideEffect=new jp,this.readonly=M,this.onNewPageIndex=v,this.onPlay=b,this.render()}set pages(M){this._pages=M,this.refreshPreview(),this.refreshTotalPage(),this.refreshBtnSidebar()}get pages(){return this._pages}unmount(){this.$content.remove(),this.$footer.remove()}setReadonly(M){this.readonly=M,this.$content.classList.toggle(this.wrapClassName(\"readonly\"),M),this.$footer.classList.toggle(this.wrapClassName(\"readonly\"),M),this.$pageNumberInput.disabled=M}destroy(){this.sideEffect.flushAll(),this.unmount()}setPageIndex(M){Number.isNaN(M)||(this.pageIndex=M,this.$pageNumberInput.value=String(M+1))}refreshTotalPage(){this.pages.length?this.$totalPage.textContent=\" / \"+this.pages.length:this.$totalPage.textContent=\"\"}setSmallBox(M){this.isSmallBox!==M&&(this.isSmallBox=M,this.$footer.classList.toggle(this.wrapClassName(\"float-footer\"),M))}render(){return this.renderContent(),this.renderFooter(),this.$content}renderContent(){if(!this.$content){const M=document.createElement(\"div\");M.className=this.wrapClassName(\"content\"),this.$content=M,this.readonly&&M.classList.add(this.wrapClassName(\"readonly\")),M.appendChild(this.renderPreviewMask()),M.appendChild(this.renderPreview())}return this.$content}renderPreview(){if(!this.$preview){const M=document.createElement(\"div\");M.className=this.wrapClassName(\"preview\")+\" tele-fancy-scrollbar\",this.$preview=M,this.sideEffect.add(()=>(this.previewLazyLoad=new qp({container:this.$preview,elements_selector:`.${this.wrapClassName(\"preview-page>img\")}`}),()=>{var v;return(v=this.previewLazyLoad)==null?void 0:v.destroy()})),this.refreshPreview(),this.sideEffect.addEventListener(M,\"click\",v=>{var Q;if(this.readonly)return;const b=(Q=v.target.dataset)==null?void 0:Q.pageIndex;b&&(v.preventDefault(),v.stopPropagation(),v.stopImmediatePropagation(),this.onNewPageIndex(Number(b)),this.togglePreview(!1))})}return this.$preview}refreshPreview(){var Q;const{$preview:M}=this,v=this.wrapClassName(\"preview-page\"),b=this.wrapClassName(\"preview-page-name\");for(;M.firstChild;)M.firstChild.remove();this.pages.forEach((me,q)=>{var be;const O=(be=me.thumbnail)!=null?be:me.src.startsWith(\"ppt\")?void 0:me.src;if(!O)return;const $=String(q),H=document.createElement(\"a\");H.className=v+\" \"+this.wrapClassName(`preview-page-${q}`),H.setAttribute(\"href\",\"#\"),H.dataset.pageIndex=$;const D=document.createElement(\"span\");D.className=b,D.textContent=String(q+1),D.dataset.pageIndex=$;const Z=document.createElement(\"img\");Z.width=me.width,Z.height=me.height,Z.dataset.src=O,Z.dataset.pageIndex=$,H.appendChild(Z),H.appendChild(D),M.appendChild(H)}),(Q=this.previewLazyLoad)==null||Q.update()}renderPreviewMask(){return this.$previewMask||(this.$previewMask=document.createElement(\"div\"),this.$previewMask.className=this.wrapClassName(\"preview-mask\"),this.sideEffect.addEventListener(this.$previewMask,\"click\",M=>{this.readonly||M.target===this.$previewMask&&this.togglePreview(!1)})),this.$previewMask}refreshBtnSidebar(){this.$btnSidebar.style.display=this.pages.length>0?\"\":\"none\"}renderFooter(){if(!this.$footer){const M=document.createElement(\"div\");M.className=this.wrapClassName(\"footer\"),this.$footer=M,this.readonly&&M.classList.add(this.wrapClassName(\"readonly\")),this.isSmallBox&&M.classList.add(this.wrapClassName(\"float-footer\"));const v=this.renderFooterBtn(\"btn-sidebar\",hO(this.namespace));this.sideEffect.addEventListener(v,\"click\",()=>{this.readonly||this.togglePreview()}),this.$btnSidebar=v,this.$btnSidebar.style.display=\"none\",this.$footer.appendChild(v);const b=document.createElement(\"div\");b.className=this.wrapClassName(\"page-jumps\");const Q=this.renderFooterBtn(\"btn-page-back\",cO(this.namespace));if(this.sideEffect.addEventListener(Q,\"click\",()=>{this.readonly||this.onNewPageIndex(this.pageIndex-1)}),b.appendChild(Q),this.onPlay){const H=this.renderFooterBtn(\"btn-page-play\",pO(this.namespace),fO(this.namespace));this.$btnPlay=H,this.sideEffect.addEventListener(H,\"click\",()=>{this.readonly||(this.setPlaying(),this.onPlay&&this.onPlay())}),b.appendChild(H)}const me=this.renderFooterBtn(\"btn-page-next\",dO(this.namespace));this.sideEffect.addEventListener(me,\"click\",()=>{this.readonly||this.onNewPageIndex(this.pageIndex+1)}),b.appendChild(me);const q=document.createElement(\"div\");q.className=this.wrapClassName(\"page-number\");const O=document.createElement(\"input\");O.className=this.wrapClassName(\"page-number-input\"),O.value=String(this.pageIndex+1),this.readonly&&(O.disabled=!0),this.$pageNumberInput=O,this.sideEffect.addEventListener(O,\"focus\",()=>{O.select()}),this.sideEffect.addEventListener(O,\"change\",()=>{this.readonly||O.value&&this.onNewPageIndex(Number(O.value)-1)});const $=document.createElement(\"span\");this.$totalPage=$,q.appendChild(O),q.appendChild($),this.$footer.appendChild(b),this.$footer.appendChild(q)}return this.$footer}renderFooterBtn(M,v,b){const Q=document.createElement(\"button\");return Q.className=this.wrapClassName(\"footer-btn\")+\" \"+this.wrapClassName(M),Q.appendChild(v),b&&Q.appendChild(b),Q}togglePreview(M){if(this.isShowPreview=M!=null?M:!this.isShowPreview,this.$content.classList.toggle(this.wrapClassName(\"preview-active\"),this.isShowPreview),this.isShowPreview){const v=this.$preview.querySelector(\".\"+this.wrapClassName(`preview-page-${this.pageIndex}`));v&&this.$preview.scrollTo({top:v.offsetTop-16})}}wrapClassName(M){return`${this.namespace}-${M}`}}const wL=new Set([\"clicker\"]);class SL{constructor({box:M,view:v,mountSlideController:b,mountWhiteboard:Q}){this.slideController=null,this.isViewMounted=!1,this.onError=({error:me})=>{this.viewer.setPaused(),Co.warn(\"[Slide] render error\",me)},this.refreshPages=()=>{this.slideController&&(this.viewer.pages=cT(this.slideController.slide),this.viewer.setPageIndex(this.getPageIndex(this.slideController.page)),this.scaleDocsToFit())},this.scaleDocsToFit=()=>{if(this.slideController){const{width:me,height:q}=this.slideController.slide;me&&q&&(this.whiteboardView.moveCameraToContain({originX:-me/2,originY:-q/2,width:me,height:q,animationMode:\"immediately\"}),this.whiteboardView.setCameraBound({damping:1,maxContentMode:()=>this.whiteboardView.camera.scale,minContentMode:()=>this.whiteboardView.camera.scale,centerX:0,centerY:0,width:me,height:q}),this.isViewMounted||(this.isViewMounted=!0,console.log(\"[Slide] mount whiteboard view\"),this.mountWhiteboard(this.$whiteboardView)))}},this.onPlay=()=>{this.slideController&&this.slideController.slide.nextStep()},this.onNewPageIndex=me=>{this.slideController&&this.slideController.jumpToPage(me+1)},this.sideEffect=new jp,this.namespace=\"netless-app-slide\",this.box=M,this.whiteboardView=v,this.mountSlideController=b,this.mountWhiteboard=Q,this.viewer=new GT({readonly:M.readonly,onNewPageIndex:this.onNewPageIndex,onPlay:this.onPlay}),this.sideEffect.add(()=>{const me=q=>{this.setReadonly(q)};return M.events.on(\"readonly\",me),()=>M.events.off(\"readonly\",me)}),this.render()}render(){this.viewer.$content.appendChild(this.renderSlideContainer()),this.viewer.$content.appendChild(this.renderWhiteboardView()),this.sideEffect.addEventListener(window,\"keydown\",M=>{if(this.box.focus&&this.slideController)switch(M.key){case\"ArrowUp\":case\"ArrowLeft\":{this.slideController.slide.prevStep();break}case\"ArrowRight\":case\"ArrowDown\":{this.slideController.slide.nextStep();break}}})}renderSlideContainer(){if(!this.$slide){const M=document.createElement(\"div\");M.className=this.wrapClassName(\"slide\"),M.dataset.appKind=\"Slide\",this.$slide=M}return this.$slide}renderWhiteboardView(){return this.$whiteboardView||(this.$whiteboardView=document.createElement(\"div\"),this.$whiteboardView.className=this.wrapClassName(\"wb-view\")),this.$whiteboardView}mount(){return this.box.mountContent(this.viewer.$content),this.box.mountFooter(this.viewer.$footer),this.slideController=this.mountSlideController({anchor:this.$slide,onTransitionStart:this.viewer.setPlaying,onTransitionEnd:this.viewer.setPaused,onReady:this.refreshPages,onError:this.onError}),this.scaleDocsToFit(),this.sideEffect.add(()=>(this.whiteboardView.callbacks.on(\"onSizeUpdated\",this.scaleDocsToFit),()=>this.whiteboardView.callbacks.off(\"onSizeUpdated\",this.scaleDocsToFit))),this}getPageIndex(M){return(M>0?M:1)-1}unmount(){return this.slideController&&(this.slideController.destroy(),this.slideController=null),this.viewer.unmount(),this}setReadonly(M){this.viewer.setReadonly(M)}destroy(){this.sideEffect.flushAll(),this.unmount(),this.viewer.destroy()}toggleClickThrough(M){this.$whiteboardView.style.pointerEvents=!M||wL.has(M)?\"none\":\"auto\"}wrapClassName(M){return`${this.namespace}-${M}`}}let X_=!1;const HT=2,Gp=S=>\"[\"+S+\"]\",Rg={map:new Map,queue:[],validateQueue(){for(qi(\"[Slide] freezer: validate\",Gp(this.queue));this.queue.length>HT;){const S=this.queue.pop(),M=this.map.get(S);M&&(qi(\"[Slide] freezer: validate-freeze\",S,Gp(this.queue)),M.freeze())}},set(S,M){qi(\"[Slide] freezer: add\",S,Gp(this.queue)),this.map.set(S,M),this.queue.includes(S)||this.queue.unshift(S),this.validateQueue()},delete(S){this.map.delete(S),this.queue=this.queue.filter(M=>M!==S),qi(\"[Slide] freezer: delete\",S,Gp(this.queue))},focus(S){const M=this.map.get(S),v=this.queue.indexOf(S);v>-1&&this.queue.splice(v,1),this.queue.unshift(S),this.validateQueue(),qi(\"[Slide] freezer: focus\",S,Gp(this.queue)),M&&M.unfreeze()}},TL=S=>{X_=!0,S.on(\"focus\",({appId:M})=>{Rg.focus(M)})};var zT=`.netless-app-slide-content{position:relative;height:100%;overflow:hidden}.netless-app-slide-preview-mask{display:none;position:absolute;z-index:200;top:0;left:0;width:100%;height:100%}.netless-app-slide-preview{display:flex;flex-direction:column;align-items:center;position:absolute;z-index:300;top:0;left:0;width:33%;max-width:200px;height:100%;padding-top:10px;transform:translate(-100%);background:rgba(237,237,240,.9);box-shadow:inset -1px 0 #0000001c;transition:transform .4s}.netless-app-slide-preview-active .netless-app-slide-preview-mask{display:block}.netless-app-slide-preview-active .netless-app-slide-preview{transform:translate(0)}.netless-app-slide-preview-page{position:relative;display:block;width:55%;margin-bottom:10px;font-size:0;color:transparent;outline:none;border:7px solid transparent;border-radius:4px;transition:border-color .3s;user-select:none}.netless-app-slide-preview-page:hover,.netless-app-slide-preview-page.netless-app-slide-preview-page-active{border-color:#444e601a}.netless-app-slide-preview-page>img{width:100%;height:auto;box-sizing:border-box;border:1px solid rgba(0,0,0,.5);border-radius:1px;background-color:#fff;box-shadow:0 2px 8px #0000004d}.netless-app-slide-preview-page-name{position:absolute;top:1px;left:-10px;transform:translate(-100%);text-align:right;font-size:12px;color:#5f5f5f;user-select:none}.netless-app-slide-footer{box-sizing:border-box;height:26px;display:flex;align-items:center;padding:0 16px;border-top:1px solid #eeeef7;color:#191919}.netless-app-slide-float-footer{width:100%;min-height:26px;position:absolute;left:0;bottom:0;z-index:2000;background:rgba(249,249,252,.9);transition:opacity .4s}.netless-app-slide-footer-btn{box-sizing:border-box;width:26px;height:26px;font-size:0;margin:0;padding:3px;border:none;border-radius:1px;outline:none;color:currentColor;background:transparent;transition:background .4s;cursor:pointer;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.netless-app-slide-footer-btn:hover{background:rgba(237,237,240,.9)}@media (hover: none){.netless-app-slide-footer-btn:hover{background:transparent!important}}.netless-app-slide-footer-btn>svg{width:100%;height:100%}.netless-app-slide-footer-btn>svg:nth-of-type(2){display:none}.netless-app-slide-footer-btn.netless-app-slide-footer-btn-playing>svg:nth-of-type(1){display:none}.netless-app-slide-footer-btn.netless-app-slide-footer-btn-playing>svg:nth-of-type(2){display:initial}.netless-app-slide-footer-btn~.netless-app-slide-footer-btn{margin-left:15px}.netless-app-slide-page-jumps{flex:1;display:flex;justify-content:center;align-items:center}.netless-app-slide-page-number{margin-left:auto;font-size:13px;user-select:none;white-space:nowrap;word-break:keep-all}.netless-app-slide-page-number-input{border:none;outline:none;width:3em;margin:0;padding:0 2px;text-align:right;font-size:13px;line-height:1;font-weight:400;font-family:inherit;border-radius:2px;color:currentColor;background:transparent;transition:background .4s;user-select:text;-webkit-tap-highlight-color:rgba(0,0,0,0)}.netless-app-slide-page-number-input:hover,.netless-app-slide-page-number-input:focus,.netless-app-slide-page-number-input:active{background:#fff;box-shadow:#63636333 0 2px 8px}.netless-app-slide-readonly.netless-app-slide-footer{display:none}.telebox-color-scheme-dark .netless-app-slide-page-number-input{color:#a6a6a8}.telebox-color-scheme-dark .netless-app-slide-page-number-input:active,.telebox-color-scheme-dark .netless-app-slide-page-number-input:focus,.telebox-color-scheme-dark .netless-app-slide-page-number-input:hover{color:#222}.telebox-color-scheme-dark .netless-app-slide-footer{color:#a6a6a8;background:#2d2d33;border-top:none}.telebox-color-scheme-dark .netless-app-slide-footer-btn:hover{background:#212126}.telebox-color-scheme-dark .netless-app-slide-preview{background:rgba(50,50,50,.9)}.netless-app-slide-wb-view{position:absolute;top:0;left:0;width:100%;height:100%;z-index:100;overflow:hidden}.netless-app-slide-slide{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.netless-app-slide-slide canvas{transform:scale(var(--netless-app-slide-scale, 1))}\n`;function EL({container:S,taskId:M,url:v=Y_,debug:b=!1}){if(!M)throw new Error(\"[Slide] taskId is required\");S.style.cssText+=\"display:flex;flex-direction:column\";const Q=new jT({target:S});return Q.debug=!!b,Q.mount(M,v),Q}class jT{constructor(M){this.slide=null,this.debug=!1,this.sideEffect=new jp,this.ready=!1,this.readyPromise=new Promise(v=>{this.resolveReady=()=>{this.ready=!0,v()}}),this.hotkeyListener=v=>{if(this.slide)switch(v.key){case\"ArrowUp\":case\"ArrowLeft\":{this.slide.prevStep();break}case\"ArrowRight\":case\"ArrowDown\":{this.slide.nextStep();break}}},this.onPageChanged=v=>{this.viewer.setPageIndex(v-1)},this.onTransitionStart=()=>{this.viewer.setPlaying()},this.onTransitionEnd=()=>{this.viewer.setPaused()},this.onError=({error:v})=>{this.viewer.setPaused(),console.warn(\"[Slide] render error\",v)},this.destroyed=!1,this.refreshPages=()=>{this.slide&&(this.viewer.pages=cT(this.slide),this.viewer.setPageIndex(this.getPageIndex(this.slide.slideState.currentSlideIndex)))},this.onPlay=()=>{this.slide&&this.slide.nextStep()},this.onNewPageIndex=v=>{this.slide&&this.slide.slideCount>0&&this.slide.renderSlide(rT(v+1,1,this.slide.slideCount))},this.namespace=\"netless-app-slide\",this.target=M.target,this.bgColor=hT(this.target),this.viewer=new GT({readonly:!1,onNewPageIndex:this.onNewPageIndex,onPlay:this.onPlay}),this.render()}render(){this.viewer.$content.appendChild(this.renderSlideContainer()),this.registerHotKeys(window)}registerHotKeys(M){this.sideEffect.addEventListener(M,\"keydown\",this.hotkeyListener,void 0,\"hotkey\")}mount(M,v){this.target.appendChild(this.renderStyle()),this.target.appendChild(this.viewer.$content),this.target.appendChild(this.viewer.$footer),this.slide=new wi.Slide({anchor:this.$slide,interactive:!1,mode:\"local\",resize:!0,controller:this.debug,enableGlobalClick:!0,renderOptions:{minFPS:25,maxFPS:30,autoFPS:!0,autoResolution:!0,transactionBgColor:this.bgColor}}),this.registerEventListeners(),this.slide.setResource(M,v),this.slide.renderSlide(1)}renderStyle(){const M=document.createElement(\"style\");return M.appendChild(document.createTextNode(zT)),M}registerEventListeners(){if(!this.slide)return;const{slide:M}=this;M.on(wi.SLIDE_EVENTS.slideChange,this.onPageChanged),M.on(wi.SLIDE_EVENTS.renderStart,this.onTransitionStart),M.on(wi.SLIDE_EVENTS.renderEnd,this.onTransitionEnd),M.on(wi.SLIDE_EVENTS.mainSeqStepStart,this.onTransitionStart),M.on(wi.SLIDE_EVENTS.mainSeqStepEnd,this.onTransitionEnd),M.on(wi.SLIDE_EVENTS.renderError,this.onError),M.on(wi.SLIDE_EVENTS.renderEnd,this.resolveReady),this.readyPromise.then(this.refreshPages)}destroy(){this.sideEffect.flushAll(),this.slide&&!this.destroyed&&(this.slide.destroy(),this.destroyed=!0),this.viewer.destroy()}getPageIndex(M){return(M>0?M:1)-1}renderSlideContainer(){if(!this.$slide){const M=document.createElement(\"div\");M.className=this.wrapClassName(\"slide\"),M.dataset.appKind=\"Slide\",this.$slide=M}return this.$slide}wrapClassName(M){return`${this.namespace}-${M}`}}const q_=\"0.2.1\",ML={kind:\"Slide\",setup(S){if(console.log(\"[Slide] setup @ \"+q_),S.getIsWritable()&&S.storage.ensureState(V_),!S.storage.state.taskId)throw new Error(\"[Slide] no taskId\");const M=S.getView();if(!M)throw new Error(\"[Slide] no view, please set scenePath on addApp()\");M.disableCameraTransform=!0;const v=S.getBox();v.mountStyles(zT);try{v.$content.dataset.appSlideVersion=q_}catch{}const b=S.getInitScenePath();let Q=null;const me=H=>{const D=S.getRoom();if(Q&&Q.slideController){let Z=!1;D&&S.getIsWritable()&&(ZS(D,S,Q.slideController.slide,b),Z=!0),qi(\"[Slide] page to\",H,Z?\"(synced)\":\"\"),Q.viewer.setPageIndex(H-1)}},q=H=>{const D=new uO(YS(H_({context:S},H),{onPageChanged:me}));return X_&&Rg.set(S.appId,D),Co.setAppController(S.appId,D),D.readyPromise.then(H.onReady).then(()=>{const Z=S.getRoom();let be=!1;Z&&S.getIsWritable()&&(ZS(Z,S,D.slide,b),be=!0);const Ce=D.slide.slideState.currentSlideIndex;qi(\"[Slide] page to\",Ce,be?\"(synced)\":\"\",\"(on ready)\")}),D};Q=new SL({box:v,view:M,mountSlideController:q,mountWhiteboard:S.mountView.bind(S)});const O=S.getRoom(),$=new jp;return $.add(()=>{var H;return Co.setAppContext(S.appId,S),Co.enable=((H=S.getAppOptions())==null?void 0:H.debug)||!1,Co.level=\"debug\",()=>Co.deleteApp(S.appId)}),O&&(Q.toggleClickThrough(O.state.memberState.currentApplianceName),$.add(()=>{const H=D=>{D.memberState&&Q&&Q.toggleClickThrough(D.memberState.currentApplianceName)};return O.callbacks.on(\"onRoomStateChanged\",H),()=>O.callbacks.off(\"onRoomStateChanged\",H)})),S.emitter.on(\"destroy\",()=>{qi(\"[Slide] destroy\",S.appId),X_&&Rg.delete(S.appId),$.flushAll(),Q&&(Q.destroy(),Q=null)}),Q.mount(),{slide:()=>{var H;return(H=Q==null?void 0:Q.slideController)==null?void 0:H.slide},nextStep:()=>{var H;return Q&&Q.slideController?((H=Q==null?void 0:Q.slideController)==null||H.slide.nextStep(),!0):!1},prevStep:()=>{var H;return Q&&Q.slideController?((H=Q==null?void 0:Q.slideController)==null||H.slide.prevStep(),!0):!1},position:()=>{const H=Q==null?void 0:Q.slideController;if(H)return[H.page,H.pageCount]},nextPage:()=>{const H=Q==null?void 0:Q.slideController;if(H){const{page:D,pageCount:Z}=H;if(Z>0&&D<Z)return H.jumpToPage(D+1),!0}return!1},prevPage:()=>{const H=Q==null?void 0:Q.slideController;if(H){const{page:D,pageCount:Z}=H;if(Z>0&&D>1)return H.jumpToPage(D-1),!0}return!1},jumpToPage:H=>{const D=Q==null?void 0:Q.slideController;if(D){const{page:Z,pageCount:be}=D;if(be>0&&Z>0&&Z<=be)return D.jumpToPage(H),!0}return!1}}}};exports.DefaultUrl=Y_;exports.FreezerLength=HT;exports.SlidePreviewer=jT;exports.addHooks=TL;exports.apps=Rg;exports[\"default\"]=ML;exports.previewSlide=EL;exports.version=q_;\n//# sourceMappingURL=main.cjs.js.map\n\n\n//# sourceURL=webpack://whiteboard-bridge/./node_modules/@netless/app-slide/dist/main.cjs.js?");

/***/ }),

/***/ 35827:
/*!*************************************************************!*\
  !*** ./node_modules/@netless/canvas-polyfill/dist/index.js ***!
  \*************************************************************/
/***/ (function() {

"use strict";
eval("\nfunction canvasPolyfill() {\n    if (CanvasRenderingContext2D.prototype.ellipse === undefined) {\n        CanvasRenderingContext2D.prototype.ellipse = function (x, y, radiusX, radiusY, rotation, startAngle, endAngle, antiClockwise) {\n            this.save();\n            this.translate(x, y);\n            this.rotate(rotation);\n            this.scale(radiusX, radiusY);\n            this.arc(0, 0, 1, startAngle, endAngle, antiClockwise);\n            this.restore();\n        };\n    }\n    if (CanvasRenderingContext2D.prototype.resetTransform === undefined) {\n        CanvasRenderingContext2D.prototype.resetTransform = function () {\n            this.setTransform(1, 0, 0, 1, 0, 0);\n        };\n    }\n    (function () {\n        if (CanvasRenderingContext2D.prototype.getTransform !== undefined) {\n            return;\n        }\n        CanvasRenderingContext2D.prototype.getTransform = function () {\n            return function () {\n                var polyfill = this._t2stack && this._t2stack[this._t2stack.length - 1] || { a: 1, b: 0, c: 0, d: 1, e: 0, f: 0 };\n                return polyfill;\n            };\n        }();\n        CanvasRenderingContext2D.prototype.save = function () {\n            var save = CanvasRenderingContext2D.prototype.save;\n            return function () {\n                if (!this._t2stack) {\n                    this._t2stack = [{ a: 1, b: 0, c: 0, d: 1, e: 0, f: 0 }];\n                }\n                var t = this._t2stack[this._t2stack.length - 1];\n                this._t2stack.push(t && { a: t.a, b: t.b, c: t.c, d: t.d, e: t.e, f: t.f });\n                save.call(this);\n            };\n        }();\n        CanvasRenderingContext2D.prototype.restore = function () {\n            var restore = CanvasRenderingContext2D.prototype.restore;\n            return function () {\n                if (this._t2stack)\n                    this._t2stack.pop();\n                restore.call(this);\n            };\n        }();\n        CanvasRenderingContext2D.prototype.transform = function () {\n            var transform = CanvasRenderingContext2D.prototype.transform;\n            return function (a, b, c, d, e, f) {\n                if (!this._t2stack) {\n                    this._t2stack = [{ a: 1, b: 0, c: 0, d: 1, e: 0, f: 0 }];\n                }\n                var t = this._t2stack[this._t2stack.length - 1], q;\n                var na = t.a * a + t.c * b;\n                var nb = t.b * a + t.d * b;\n                var nc = t.a * c + t.c * d;\n                var nd = t.b * c + t.d * d;\n                var ne = t.e + t.a * e + t.c * f;\n                var nf = t.f + t.b * e + t.d * f;\n                t.a = na;\n                t.b = nb;\n                t.c = nc;\n                t.d = nd;\n                t.e = ne;\n                t.f = nf;\n                transform.call(this, a, b, c, d, e, f);\n            };\n        }();\n        CanvasRenderingContext2D.prototype.setTransform = function () {\n            var setTransform = CanvasRenderingContext2D.prototype.setTransform;\n            return function (a, b, c, d, e, f) {\n                if (!this._t2stack) {\n                    this._t2stack = [{}];\n                }\n                if (typeof a === \"object\" || typeof a === \"undefined\") {\n                    var aa = a.a, b_1 = a.b, c_1 = a.c, d_1 = a.d, e_1 = a.e, f_1 = a.f;\n                    this._t2stack[this._t2stack.length - 1] = { a: aa, b: b_1, c: c_1, d: d_1, e: e_1, f: f_1 };\n                    setTransform.call(this, aa, b_1, c_1, d_1, e_1, f_1);\n                }\n                else {\n                    this._t2stack[this._t2stack.length - 1] = { a: a, b: b, c: c, d: d, e: e, f: f };\n                    setTransform.call(this, a, b, c, d, e, f);\n                }\n            };\n        }();\n        CanvasRenderingContext2D.prototype.resetTransform = function () {\n            var resetTransform = CanvasRenderingContext2D.prototype.resetTransform;\n            return function () {\n                if (!this._t2stack) {\n                    this._t2stack = [{}];\n                }\n                this._t2stack[this._t2stack.length - 1] = { a: 1, b: 0, c: 0, d: 1, e: 0, f: 0 };\n                resetTransform && resetTransform.call(this);\n            };\n        }();\n        CanvasRenderingContext2D.prototype.scale = function () {\n            var scale = CanvasRenderingContext2D.prototype.scale;\n            return function (sx, sy) {\n                if (!this._t2stack) {\n                    this._t2stack = [{ a: 1, b: 0, c: 0, d: 1, e: 0, f: 0 }];\n                }\n                var t = this._t2stack[this._t2stack.length - 1];\n                sx = sx || 1;\n                sy = sy || sx;\n                t.a *= sx;\n                t.c *= sy;\n                t.b *= sx;\n                t.d *= sy;\n                scale.call(this, sx, sy);\n            };\n        }();\n        CanvasRenderingContext2D.prototype.rotate = function () {\n            var rotate = CanvasRenderingContext2D.prototype.rotate;\n            return function (w) {\n                if (!this._t2stack) {\n                    this._t2stack = [{ a: 1, b: 0, c: 0, d: 1, e: 0, f: 0 }];\n                }\n                var t = this._t2stack[this._t2stack.length - 1];\n                var cw = Math.cos(-w);\n                var sw = Math.sin(-w);\n                var a = t.a * cw - t.c * sw;\n                var b = t.b * cw - t.d * sw;\n                var c = t.c * cw + t.a * sw;\n                var d = t.d * cw + t.b * sw;\n                t.a = a;\n                t.b = b;\n                t.c = c;\n                t.d = d;\n                return rotate.call(this, w);\n            };\n        }();\n        CanvasRenderingContext2D.prototype.translate = function () {\n            var translate = CanvasRenderingContext2D.prototype.translate;\n            return function (x, y) {\n                if (!this._t2stack) {\n                    this._t2stack = [{ a: 1, b: 0, c: 0, d: 1, e: 0, f: 0 }];\n                }\n                var t = this._t2stack[this._t2stack.length - 1];\n                t.e += x * t.a + y * t.c;\n                t.f += x * t.b + y * t.d;\n                return translate.call(this, x, y);\n            };\n        }();\n    })();\n}\n;\ncanvasPolyfill();\n\n\n//# sourceURL=webpack://whiteboard-bridge/./node_modules/@netless/canvas-polyfill/dist/index.js?");

/***/ }),

/***/ 45387:
/*!************************************************************!*\
  !*** ./node_modules/@netless/combine-player/dist/index.js ***!
  \************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("module.exports=function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}({\"./src/CombinePlayerImplement.ts\":function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return P}));var a=n(\"@babel/runtime/regenerator\"),i=n.n(a),r=n(\"@babel/runtime/helpers/asyncToGenerator\"),s=n.n(r),o=n(\"@babel/runtime/helpers/classCallCheck\"),u=n.n(o),c=n(\"@babel/runtime/helpers/createClass\"),h=n.n(c),d=function(e,t,n){\"string\"==typeof n?console.log(\"[Combine-Player][\".concat(e,\"]: \").concat(t,\" -\"),n):console.log(\"[Combine-Player][\".concat(e,\"]: \").concat(t,\" -\"),JSON.stringify(n,null,2))},f=n(\"./src/StatusContant.ts\"),l=n(\"./src/EventEmitter.ts\"),b=n(\"./src/ErrorConstant.ts\");function p(e,t){var n;if(\"undefined\"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if(\"string\"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===n&&e.constructor&&(n=e.constructor.name);if(\"Map\"===n||\"Set\"===n)return Array.from(e);if(\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e))||t&&e&&\"number\"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var r,s=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw r}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var g=function(){function e(t){u()(this,e),this.videoStatus={current:f.b.PauseBuffering,previous:f.b.PauseBuffering},this.whiteboardStatus={current:f.b.PauseBuffering,previous:f.b.PauseBuffering},this.statusLockInfo={isLocked:!1,allowStatusList:[],unLockStatusList:[]},this.events=new l.a,this.table=void 0,this.debug=function(){},this.statusIgnoreCrashByDisabled=[],this.statusIgnoreCrashByDisabledCallback=function(){return Promise.resolve()},t&&(this.debug=d),this.table=this.initTables()}var t;return h()(e,[{key:\"one\",value:function(e,t){var n=this;return new Promise((function(a,r){n.events.one(e,function(){var e=s()(i.a.mark((function e(n,s,o){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=4;break}return e.next=4,t({previous:n,current:s});case 4:a(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r(e.t0);case 10:return e.prev=10,o(),e.finish(10);case 13:case\"end\":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t,n,a){return e.apply(this,arguments)}}())}))}},{key:\"setOnCrashByDisabledStatus\",value:(t=s()(i.a.mark((function e(t){var n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",this.on(f.c.Disabled,function(){var e=s()(i.a.mark((function e(a){var r,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a.current,s=r.video,o=r.whiteboard,n.shouldCrash(s,o)&&t();case 4:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case\"end\":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:\"oneButNotCrashByDisabled\",value:function(e,t){var n=this;return new Promise((function(a,r){if(0!==n.statusIgnoreCrashByDisabled.length)return r(new Error(b.f));n.statusIgnoreCrashByDisabled.push(e);var o=function(){var e=s()(i.a.mark((function e(s,o,u){var c,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n.getStatus(f.a.Whiteboard).current,h=n.getStatus(f.a.Video).current,!!n.shouldCrash(h,c)){e.next=13;break}if(n.statusIgnoreCrashByDisabled=[],n.statusIgnoreCrashByDisabledCallback=function(){return Promise.resolve()},u(),a(),!t){e.next=11;break}return e.next=11,t({previous:s,current:o});case 11:e.next=14;break;case 13:r(new Error(b.a));case 14:case\"end\":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();n.statusIgnoreCrashByDisabledCallback=o,n.events.one(f.c.Disabled,o)}))}},{key:\"cancelOneButNotCrashByDisabled\",value:function(){this.events.removeListener(f.c.Disabled,this.statusIgnoreCrashByDisabledCallback),this.statusIgnoreCrashByDisabled=[],this.statusIgnoreCrashByDisabledCallback=function(){return Promise.resolve()}}},{key:\"on\",value:function(e,t){var n=this;return new Promise((function(a,r){n.events.addListener(e,function(){var e=s()(i.a.mark((function e(n,s,o){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t({previous:n,current:s});case 3:a(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),r(e.t0);case 9:return e.prev=9,o(),e.finish(9);case 12:case\"end\":return e.stop()}}),e,null,[[0,6,9,12]])})));return function(t,n,a){return e.apply(this,arguments)}}())}))}},{key:\"off\",value:function(e){if(\"string\"==typeof e)this.events.removeAllListener(e);else for(var t=0;t<e.length;t++)this.events.removeAllListener(e[t])}},{key:\"destroy\",value:function(){this.events.destroy(),this.unlockCombineStatus()}},{key:\"setStatus\",value:function(e,t){switch(e){case f.a.Video:if(this.videoStatus.current===t)return;this.videoStatus.current=t,this.debug(\"Single\",\"Video\",f.b[t]);break;case f.a.Whiteboard:if(this.whiteboardStatus.current===t)return;this.whiteboardStatus.current=t,this.debug(\"Single\",\"Whiteboard\",f.b[t])}var n=this.whiteboardStatus.current,a=this.videoStatus.current,i=this.table[n][a];this.statusLockInfo.isLocked?this.statusLockInfo.allowStatusList.includes(i.combineStatus)&&(this.statusLockInfo.unLockStatusList.includes(i.combineStatus)&&this.unlockCombineStatus(),this.dispatchEvent(i)):this.dispatchEvent(i)}},{key:\"lockCombineStatus\",value:function(e,t){this.statusLockInfo.isLocked||(this.statusLockInfo.isLocked=!0,this.statusLockInfo.allowStatusList=e,this.statusLockInfo.unLockStatusList=t)}},{key:\"getCombinationStatus\",value:function(){var e=this.videoStatus,t=e.previous,n=e.current,a=this.whiteboardStatus,i=a.previous,r=a.current;return{previous:this.table[i][t].combineStatus,current:this.table[r][n].combineStatus}}},{key:\"getStatus\",value:function(e){switch(e){case f.a.Video:return{previous:this.videoStatus.previous,current:this.videoStatus.current};case f.a.Whiteboard:return{previous:this.whiteboardStatus.previous,current:this.whiteboardStatus.current}}}},{key:\"shouldCrash\",value:function(e,t){var n,a=!1,i=p(this.statusIgnoreCrashByDisabled[0]);try{for(i.s();!(n=i.n()).done;){var r=n.value,s=r.video;if(t===r.whiteboard&&s===e){a=!0;break}}}catch(e){i.e(e)}finally{i.f()}return!a}},{key:\"unlockCombineStatus\",value:function(){this.statusLockInfo.isLocked=!1,this.statusLockInfo.allowStatusList=[],this.statusLockInfo.unLockStatusList=[]}},{key:\"setPreviousStatus\",value:function(e,t){this.whiteboardStatus.previous=e,this.videoStatus.previous=t}},{key:\"dispatchEvent\",value:function(e){var t=this,n=e.videoStatus,a=e.whiteboardStatus,i=e.combineStatus,r={whiteboard:this.getStatus(f.a.Whiteboard).previous,video:this.getStatus(f.a.Video).previous},s={whiteboard:a,video:n};this.debug(\"CombinedStatus\",i,{previous:{whiteboard:f.b[r.whiteboard],video:f.b[r.video]},current:{whiteboard:f.b[s.whiteboard],video:f.b[s.video]}});this.events.emit(i,r,s,(function(){t.setPreviousStatus(a,n)}))}},{key:\"initTables\",value:function(){var e=function(e){return function(t,n){return Object.freeze({combineStatus:e,whiteboardStatus:t,videoStatus:n})}},t=e(f.c.PauseSeeking),n=e(f.c.PlayingSeeking),a=e(f.c.PauseBuffering),i=e(f.c.PlayingBuffering),r=e(f.c.ToPlay),s=e(f.c.ToPause),o=e(f.c.Pause),u=e(f.c.Playing),c=e(f.c.Disabled),h=e(f.c.Ended);return Object.freeze([Object.freeze([t(f.b.PauseSeeking,f.b.PauseSeeking),t(f.b.PauseSeeking,f.b.Pause),c(f.b.PauseSeeking,f.b.PauseBuffering),c(f.b.PauseSeeking,f.b.PlayingBuffering),c(f.b.PauseSeeking,f.b.Playing),c(f.b.PauseSeeking,f.b.PlayingSeeking),t(f.b.PauseSeeking,f.b.Ended)]),Object.freeze([t(f.b.Pause,f.b.PauseSeeking),o(f.b.Pause,f.b.Pause),a(f.b.Pause,f.b.PauseBuffering),i(f.b.Pause,f.b.PlayingBuffering),r(f.b.Pause,f.b.Playing),n(f.b.Pause,f.b.PlayingSeeking),h(f.b.Pause,f.b.Ended)]),Object.freeze([c(f.b.PauseBuffering,f.b.PauseSeeking),a(f.b.PauseBuffering,f.b.Pause),a(f.b.PauseBuffering,f.b.PauseBuffering),c(f.b.PauseBuffering,f.b.PlayingBuffering),c(f.b.PauseBuffering,f.b.Playing),c(f.b.PauseBuffering,f.b.PlayingSeeking),c(f.b.PauseBuffering,f.b.Ended)]),[c(f.b.PlayingBuffering,f.b.PauseSeeking),i(f.b.PlayingBuffering,f.b.Pause),c(f.b.PlayingBuffering,f.b.PauseBuffering),i(f.b.PlayingBuffering,f.b.PlayingBuffering),s(f.b.PlayingBuffering,f.b.Playing),c(f.b.PlayingBuffering,f.b.PlayingSeeking),c(f.b.PlayingBuffering,f.b.Ended)],Object.freeze([c(f.b.Playing,f.b.PauseSeeking),r(f.b.Playing,f.b.Pause),c(f.b.Playing,f.b.PauseBuffering),s(f.b.Playing,f.b.PlayingBuffering),u(f.b.Playing,f.b.Playing),s(f.b.Playing,f.b.PlayingSeeking),s(f.b.Playing,f.b.Ended)]),Object.freeze([c(f.b.PlayingSeeking,f.b.PauseSeeking),n(f.b.PlayingSeeking,f.b.Pause),c(f.b.PlayingSeeking,f.b.PauseBuffering),c(f.b.PlayingSeeking,f.b.PlayingBuffering),s(f.b.PlayingSeeking,f.b.Playing),n(f.b.PlayingSeeking,f.b.PlayingSeeking),n(f.b.PlayingSeeking,f.b.Ended)]),Object.freeze([t(f.b.Ended,f.b.PauseSeeking),h(f.b.Ended,f.b.Pause),c(f.b.Ended,f.b.PauseBuffering),c(f.b.Ended,f.b.PlayingBuffering),s(f.b.Ended,f.b.Playing),n(f.b.Ended,f.b.PlayingSeeking),h(f.b.Ended,f.b.Ended)])])}}]),e}(),y=function(){function e(){u()(this,e),this.queue=[],this.isHanding=!1}var t;return h()(e,[{key:\"append\",value:function(e){var t=this;return new Promise((function(n,a){var i={handler:e,resolve:n,reject:a};t.queue.push(i),t.isHanding||t.startHandingTasksLoop()}))}},{key:\"destroy\",value:function(){this.queue=[]}},{key:\"startHandingTasksLoop\",value:(t=s()(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,this.isHanding=!0;case 2:if(!(this.queue.length>0)){e.next=20;break}return t=this.queue[0],e.prev=4,e.t0=t,e.next=8,t.handler();case 8:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=15;break;case 12:e.prev=12,e.t2=e.catch(4),t.reject(e.t2);case 15:return e.prev=15,this.queue.shift(),e.finish(15);case 18:e.next=2;break;case 20:e.next=25;break;case 22:throw e.prev=22,e.t3=e.catch(0),new Error(e.t3);case 25:return e.prev=25,this.isHanding=!1,e.finish(25);case 28:case\"end\":return e.stop()}}),e,this,[[0,22,25,28],[4,12,15,18]])}))),function(){return t.apply(this,arguments)})}]),e}(),P=function(){function e(t){u()(this,e),this.video=void 0,this.whiteboard=void 0,this.videoOptions=void 0,this.stateMachine=void 0,this._playbackRate=1,this.seekTime=NaN,this.triggerSource=f.e.None,this.currentCombineStatus=f.d.PauseBuffering,this.whiteboardEmitter=void 0,this.taskQueue=new y,this.onStatusChangeHandleList=[];var n=t.videoConfig,a=t.whiteboard,i=t.whiteboardEmitter,r=t.debug;this.videoOptions=n.videoOptions,this.video=n.video,this.whiteboard=a,this.whiteboardEmitter=i,this.stateMachine=new g(r),this.initOnCrashByDisabledStatusCallback(),this.initVideo(n.isCanplay),this.initWhiteboard()}var t,n,a,r,o,c,d,l,p,v,P,k,m,w,S,E,x,M;return h()(e,[{key:\"setOnStatusChange\",value:function(e){this.onStatusChangeHandleList.push(e)}},{key:\"removeStatusChange\",value:function(e){this.onStatusChangeHandleList=this.onStatusChangeHandleList.filter((function(t){return t!==e}))}},{key:\"removeAllStatusChange\",value:function(){this.onStatusChangeHandleList=[]}},{key:\"getStatus\",value:function(){return this.combinedStatus}},{key:\"playbackSpeed\",value:function(e){this.playbackRate=e}},{key:\"stop\",value:function(){if(this.currentCombineStatus===f.d.Stopped)throw new Error(b.d);if(this.currentCombineStatus===f.d.Disabled)throw new Error(b.c);this.releaseEvents(),this.onStatusUpdate(f.d.Stopped)}},{key:\"play\",value:(M=s()(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isNotResponse()){e.next=2;break}return e.abrupt(\"return\");case 2:return e.next=4,this.taskQueue.append(s()(i.a.mark((function e(){var n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.triggerSource=f.e.Plugin,n=t.stateMachine.getCombinationStatus().current,e.t0=n,e.next=e.t0===f.c.Pause?5:e.t0===f.c.PauseBuffering?8:e.t0===f.c.Ended?24:27;break;case 5:return e.next=7,t.playWhenPause();case 7:return e.abrupt(\"break\",27);case 8:if(a=t.stateMachine.getStatus(f.a.Video).current,r=t.stateMachine.getStatus(f.a.Whiteboard).current,a!==f.b.Pause||r!==f.b.PauseBuffering){e.next=15;break}return e.next=13,t.playWhenVideoIsPauseAndWhiteboardIsPauseBuffering();case 13:e.next=23;break;case 15:if(a!==f.b.PauseBuffering||r!==f.b.Pause){e.next=21;break}return t.onStatusUpdate(f.d.PlayingBuffering),e.next=19,t.playWhenPause();case 19:e.next=23;break;case 21:return e.next=23,t.playWhenAllPlayerIsPauseBuffering();case 23:return e.abrupt(\"break\",27);case 24:return e.next=26,t.playWhenEnded();case 26:return e.abrupt(\"break\",27);case 27:if(isNaN(t.seekTime)){e.next=31;break}return e.next=30,t.seekWhenPlaying(t.seekTime);case 30:t.seekTime=NaN;case 31:t.triggerSource=f.e.None;case 32:case\"end\":return e.stop()}}),e)}))));case 4:case\"end\":return e.stop()}}),e,this)}))),function(){return M.apply(this,arguments)})},{key:\"pause\",value:(x=s()(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isNotResponse()){e.next=2;break}return e.abrupt(\"return\");case 2:return e.abrupt(\"return\",this.taskQueue.append(s()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.triggerSource=f.e.Plugin,t.stateMachine.getCombinationStatus().current!==f.c.Playing){e.next=5;break}return e.next=5,t.pauseWhenPlaying();case 5:t.triggerSource=f.e.None;case 6:case\"end\":return e.stop()}}),e)})))));case 3:case\"end\":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)})},{key:\"seek\",value:(E=s()(i.a.mark((function e(t){var n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isNotResponse()){e.next=2;break}return e.abrupt(\"return\");case 2:return e.abrupt(\"return\",this.taskQueue.append(s()(i.a.mark((function e(){var a,r,s,o,u,c,h,d,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.whiteboard.progressTime,r=n.video.currentTime(),0!==a||0!==r){e.next=5;break}return 0!==t&&(n.seekTime=t),e.abrupt(\"return\");case 5:n.triggerSource=f.e.Plugin,s=n.stateMachine.getCombinationStatus().current,e.t0=s,e.next=e.t0===f.c.Playing?10:e.t0===f.c.Pause||e.t0===f.c.PauseBuffering?13:e.t0===f.c.Ended?23:30;break;case 10:return e.next=12,n.seekWhenPlaying(t);case 12:return e.abrupt(\"break\",30);case 13:if(o=n.getPlayerDuration(),u=o.video,c=o.whiteboard,!(t>u||t>c)){e.next=20;break}return e.next=18,n.seekWhenPauseFinallyIsEnded(t,o);case 18:e.next=22;break;case 20:return e.next=22,n.seekWhenPause(t);case 22:return e.abrupt(\"break\",30);case 23:if(h=n.getPlayerDuration(),d=h.video,l=h.whiteboard,!(t<=d&&t<=l)){e.next=29;break}return e.next=27,n.seekWhenPause(t);case 27:return e.next=29,n.playWhenPause();case 29:return e.abrupt(\"break\",30);case 30:n.triggerSource=f.e.None;case 31:case\"end\":return e.stop()}}),e)})))));case 3:case\"end\":return e.stop()}}),e,this)}))),function(e){return E.apply(this,arguments)})},{key:\"initVideo\",value:function(e){this.stateMachine.setStatus(f.a.Video,e?f.b.Pause:f.b.PauseBuffering),e||(this.currentCombineStatus=f.d.PauseBuffering),this.initVideoJSEvents()}},{key:\"initVideoJSEvents\",value:function(){var e=this,t=!1,n=function(t){return s()(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.triggerSource!==f.e.None&&e.triggerSource!==f.e.Video){n.next=4;break}return e.triggerSource=f.e.Video,n.next=4,t();case 4:case\"end\":return n.stop()}}),n)})))};this.video.on(\"canplay\",(function(){var t=e.stateMachine.getStatus(f.a.Whiteboard).current;e.stateMachine.getStatus(f.a.Video).current===f.b.PauseBuffering&&(e.stateMachine.setStatus(f.a.Video,f.b.Pause),t===f.b.Pause&&e.onStatusUpdate(f.d.Pause))})),this.video.on(\"seeking\",n(s()(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.taskQueue.append((function(){t=!0}));case 2:case\"end\":return n.stop()}}),n)}))))),this.video.on(\"waiting\",n(s()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.onStatusUpdate(f.d.PlayingBuffering),t.next=3,e.taskQueue.append((function(){return e.pauseWhiteboardWhenVideoWaiting()}));case 3:e.triggerSource=f.e.None;case 4:case\"end\":return t.stop()}}),t)}))))),this.video.on(\"playing\",n(s()(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.taskQueue.append(s()(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=2;break}return n.abrupt(\"return\",e.playingWhiteboardWhenVideoPlayingDropFrame());case 2:return n.abrupt(\"return\",e.playingWhiteboardWhenVideoPlaying());case 3:case\"end\":return n.stop()}}),n)}))));case 2:t=!1,e.triggerSource=f.e.None;case 4:case\"end\":return n.stop()}}),n)}))))),this.video.on(\"ended\",n(s()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.taskQueue.append((function(){return e.pauseWhiteboardWhenVideoEnded()}));case 2:e.triggerSource=f.e.None;case 3:case\"end\":return t.stop()}}),t)}))))),this.video.on(\"fullscreenchange\",n(s()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.taskQueue.append((function(){var t=e.stateMachine.getStatus(f.a.Video).current;t!==f.b.Playing&&t!==f.b.PlayingBuffering||!e.video.isFullscreen()&&e.video.paused()&&(e.whiteboardEmitter.one(\"pause\",(function(){e.stateMachine.setStatus(f.a.Whiteboard,f.b.Pause),e.stateMachine.setStatus(f.a.Video,f.b.Pause),e.onStatusUpdate(f.d.Pause)})),e.whiteboard.pause()),e.triggerSource=f.e.None}));case 2:case\"end\":return t.stop()}}),t)})))))}},{key:\"initWhiteboard\",value:function(){this.initWhiteboardIsPlayable(),this.initWhiteboardEvents(),this.stateMachine.setStatus(f.a.Whiteboard,f.b.PauseBuffering),this.currentCombineStatus=f.d.PauseBuffering,this.whiteboard.seekToProgressTime(0)}},{key:\"initWhiteboardIsPlayable\",value:function(){var e=this;this.whiteboardEmitter.addListener(\"playableChange\",(function(t){var n=e.stateMachine.getStatus(f.a.Whiteboard).current,a=e.stateMachine.getStatus(f.a.Video).current;t&&n===f.b.PauseBuffering&&(e.stateMachine.setStatus(f.a.Whiteboard,f.b.Pause),a===f.b.Pause&&e.onStatusUpdate(f.d.Pause))}))}},{key:\"initWhiteboardEvents\",value:function(){var e=this,t=function(t){return s()(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.triggerSource!==f.e.None&&e.triggerSource!==f.e.Whiteboard){n.next=5;break}return e.triggerSource=f.e.Whiteboard,n.next=4,t();case 4:e.triggerSource=f.e.None;case 5:case\"end\":return n.stop()}}),n)})))};this.whiteboardEmitter.addListener(\"buffering\",t(s()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.taskQueue.append((function(){return e.pauseVideoWhenWhiteboardBuffering()}));case 2:case\"end\":return t.stop()}}),t)}))))),this.whiteboardEmitter.addListener(\"playing\",t(s()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.taskQueue.append((function(){return e.playingVideoWhenWhiteboardPlaying()}));case 2:case\"end\":return t.stop()}}),t)}))))),this.whiteboardEmitter.addListener(\"ended\",t(s()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.taskQueue.append((function(){return e.pauseVideoWhenWhiteboardEnded()}));case 2:case\"end\":return t.stop()}}),t)})))))}},{key:\"playWhenPause\",value:(S=s()(i.a.mark((function e(){var t,n,a,r,o=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.stateMachine.lockCombineStatus([f.c.ToPlay,f.c.Playing],[f.c.Playing]),t=function(){o.stateMachine.setStatus(f.a.Video,f.b.Playing)},n=function(){o.stateMachine.setStatus(f.a.Whiteboard,f.b.Playing)},this.whiteboardEmitter.one(\"playing\",n),a=this.stateMachine.one(f.c.ToPlay,s()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.whiteboard.play();case 1:case\"end\":return e.stop()}}),e)})))),r=this.stateMachine.one(f.c.Playing,s()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.onStatusUpdate(f.d.Playing);case 1:case\"end\":return e.stop()}}),e)})))),this.video.one(\"playing\",t),this.video.play(),e.next=10,Promise.all([a,r]);case 10:case\"end\":return e.stop()}}),e,this)}))),function(){return S.apply(this,arguments)})},{key:\"playWhenVideoIsPauseAndWhiteboardIsPauseBuffering\",value:(w=s()(i.a.mark((function e(){var t,n,a,r,o,u,c,h,d,l=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.stateMachine.lockCombineStatus([f.c.Disabled,f.c.Pause,f.c.PauseBuffering,f.c.ToPlay,f.c.Playing],[f.c.Playing]),t=function(){l.stateMachine.setStatus(f.a.Video,f.b.Playing)},n=function(){l.stateMachine.setStatus(f.a.Video,f.b.Pause)},a=function(){l.stateMachine.setStatus(f.a.Whiteboard,f.b.PlayingBuffering)},r=function(){l.stateMachine.setStatus(f.a.Whiteboard,f.b.Playing)},o=function(){l.whiteboardEmitter.removeListener(\"playing\",r),l.whiteboardEmitter.removeListener(\"buffering\",a),l.video.off(\"playing\",t),l.video.off(\"pause\",n)},this.stateMachine.oneButNotCrashByDisabled([{video:f.b.Playing,whiteboard:f.b.PauseBuffering}],s()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.video.pause();case 1:case\"end\":return e.stop()}}),e)})))).catch((function(e){throw Error(e)})),u=this.stateMachine.one(f.c.PauseBuffering,s()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.whiteboard.play();case 1:case\"end\":return e.stop()}}),e)})))),c=this.stateMachine.one(f.c.Pause,s()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.whiteboard.play();case 1:case\"end\":return e.stop()}}),e)})))),h=this.stateMachine.one(f.c.ToPlay,s()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.video.play();case 1:case\"end\":return e.stop()}}),e)})))),d=this.stateMachine.one(f.c.Playing,s()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.onStatusUpdate(f.d.Playing),l.stateMachine.off([f.c.PauseBuffering,f.c.Pause,f.c.ToPlay]),o();case 3:case\"end\":return e.stop()}}),e)})))),this.whiteboardEmitter.one(\"buffering\",a),this.whiteboardEmitter.one(\"playing\",r),this.video.on(\"playing\",t),this.video.one(\"pause\",n),this.video.play(),e.next=18,Promise.all([Promise.race([u,c]),h,d]);case 18:case\"end\":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)})},{key:\"playWhenAllPlayerIsPauseBuffering\",value:(m=s()(i.a.mark((function e(){var t,n,a,r,o,u,c,h,d,l=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.stateMachine.lockCombineStatus([f.c.Disabled,f.c.ToPause,f.c.ToPlay,f.c.Playing],[f.c.Playing]),t=function(){l.stateMachine.setStatus(f.a.Whiteboard,f.b.PlayingBuffering)},n=function(){l.stateMachine.setStatus(f.a.Whiteboard,f.b.Playing)},a=function(){l.stateMachine.setStatus(f.a.Whiteboard,f.b.Pause)},r=function(){l.stateMachine.setStatus(f.a.Video,f.b.Playing)},o=function(){l.stateMachine.setStatus(f.a.Video,f.b.PlayingBuffering)},u=function(){l.stateMachine.setStatus(f.a.Video,f.b.Pause)},this.stateMachine.oneButNotCrashByDisabled([{video:f.b.PlayingBuffering,whiteboard:f.b.PauseBuffering},{video:f.b.PauseBuffering,whiteboard:f.b.PlayingBuffering}],s()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.stateMachine.oneButNotCrashByDisabled([{video:f.b.Playing,whiteboard:f.b.PauseBuffering},{video:f.b.PauseBuffering,whiteboard:f.b.Playing}],function(){var e=s()(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.current).video===f.b.Playing?l.video.pause():n.whiteboard===f.b.Playing&&l.whiteboard.pause();case 2:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){throw Error(e)}));case 1:case\"end\":return e.stop()}}),e)})))).catch((function(e){throw Error(e)})),c=this.stateMachine.one(f.c.ToPause,function(){var e=s()(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.current.video===f.b.Playing?l.video.pause():l.whiteboard.pause();case 2:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h=this.stateMachine.one(f.c.ToPlay,function(){var e=s()(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.current.video===f.b.Playing?l.whiteboard.play():l.video.play();case 2:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d=this.stateMachine.one(f.c.Playing,s()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.onStatusUpdate(f.d.Playing),l.stateMachine.cancelOneButNotCrashByDisabled(),l.stateMachine.off([f.c.ToPause,f.c.ToPlay]),l.video.off(\"playing\",r),l.whiteboardEmitter.removeListener(\"playing\",n),l.whiteboardEmitter.removeListener(\"pause\",a);case 6:case\"end\":return e.stop()}}),e)})))),this.whiteboardEmitter.one(\"buffering\",t),this.whiteboardEmitter.addListener(\"playing\",n),this.whiteboardEmitter.one(\"pause\",a),this.video.on(\"playing\",r),this.video.one(\"play\",o),this.video.one(\"pause\",u),this.video.play(),this.whiteboard.play(),e.next=21,Promise.all([Promise.race([c,h]),d]);case 21:case\"end\":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:\"playWhenEnded\",value:(k=s()(i.a.mark((function e(){var t,n,a,r,o,u,c,h,d,l=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.onStatusUpdate(f.d.PlayingBuffering),t=NaN,this.stateMachine.lockCombineStatus([f.c.Pause],[f.c.Pause]),n=function(){l.stateMachine.setStatus(f.a.Whiteboard,f.b.PauseSeeking)},a=function(){l.stateMachine.setStatus(f.a.Whiteboard,f.b.Pause)},r=function(){l.whiteboard.pause()},o=function(){l.video.off(\"pause\",u),l.video.off(\"play\",c),l.video.one(\"play\",(function(){l.video.one(\"pause\",(function(){l.stateMachine.setStatus(f.a.Video,f.b.Pause)})),l.video.pause()})),l.video.play()},u=function(){l.video.play()},c=function(){l.video.pause()},h=function(){l.stateMachine.setStatus(f.a.Video,f.b.PauseSeeking),t=window.setInterval((function(){l.video.readyState()>=f.f.HAVE_CURRENT_DATA&&(clearInterval(t),l.video.play())}),500)},d=this.stateMachine.one(f.c.Pause,s()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.whiteboardEmitter.removeListener(\"buffering\",n),l.whiteboardEmitter.removeListener(\"playing\",r),clearInterval(t),e.next=5,l.playWhenPause();case 5:case\"end\":return e.stop()}}),e)})))),this.whiteboardEmitter.one(\"buffering\",n),this.whiteboardEmitter.one(\"pause\",a),this.whiteboardEmitter.one(\"playing\",r),this.video.one(\"seeking\",h),this.video.one(\"seeked\",o),this.video.on(\"play\",c),this.video.on(\"pause\",u),this.whiteboard.seekToProgressTime(0),this.video.currentTime(0),e.next=22,d;case 22:case\"end\":return e.stop()}}),e,this)}))),function(){return k.apply(this,arguments)})},{key:\"pauseWhenPlaying\",value:(P=s()(i.a.mark((function e(){var t,n,a,r=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.stateMachine.lockCombineStatus([f.c.Pause],[f.c.Pause]),t=function(){r.stateMachine.setStatus(f.a.Whiteboard,f.b.Pause)},n=function(){r.stateMachine.setStatus(f.a.Video,f.b.Pause)},a=this.stateMachine.one(f.c.Pause,s()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.onStatusUpdate(f.d.Pause);case 1:case\"end\":return e.stop()}}),e)})))),this.whiteboardEmitter.one(\"pause\",t),this.video.one(\"pause\",n),this.whiteboard.pause(),this.video.pause(),e.next=10,a;case 10:case\"end\":return e.stop()}}),e,this)}))),function(){return P.apply(this,arguments)})},{key:\"seekWhenPlaying\",value:(v=s()(i.a.mark((function e(t){var n,a,r,o,u,c,h,d,l,b,p,v=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.onStatusUpdate(f.d.PlayingSeeking),n=NaN,a=this.getPlayerDuration(),this.stateMachine.lockCombineStatus([f.c.Pause,f.c.Ended,f.c.PlayingSeeking],[f.c.Pause,f.c.Ended]),r=function(){v.stateMachine.setStatus(f.a.Whiteboard,f.b.PlayingSeeking)},o=function(){t<a.whiteboard&&v.stateMachine.setStatus(f.a.Whiteboard,f.b.Pause)},u=function(){v.whiteboard.pause()},c=function(){v.stateMachine.setStatus(f.a.Whiteboard,f.b.Ended)},h=function(){v.stateMachine.setStatus(f.a.Video,f.b.PlayingSeeking),n=window.setInterval((function(){v.video.readyState()>=f.f.HAVE_CURRENT_DATA&&(clearInterval(n),t<a.video?(v.video.pause(),v.stateMachine.setStatus(f.a.Video,f.b.Pause)):v.stateMachine.setStatus(f.a.Video,f.b.Ended))}),500)},d=function(){clearInterval(n),v.whiteboardEmitter.removeListener(\"buffering\",r),v.whiteboardEmitter.removeListener(\"pause\",o),v.whiteboardEmitter.removeListener(\"playing\",u),v.whiteboardEmitter.removeListener(\"ended\",c),v.video.off(\"seeking\",h)},l=this.stateMachine.one(f.c.PlayingSeeking,function(){var e=s()(i.a.mark((function e(n){var r,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.current,s=r.video,o=r.whiteboard,s===f.b.Ended&&t<a.whiteboard?v.whiteboard.pause():o===f.b.Ended&&t<a.video&&v.video.pause();case 3:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),b=this.stateMachine.one(f.c.Pause,s()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.stateMachine.off([f.c.Ended]),d(),e.next=4,v.playWhenPause();case 4:case\"end\":return e.stop()}}),e)})))),p=this.stateMachine.one(f.c.Ended,s()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.onStatusUpdate(f.d.Ended),v.stateMachine.off([f.c.Pause]),d();case 3:case\"end\":return e.stop()}}),e)})))),this.video.one(\"seeking\",h),this.whiteboardEmitter.one(\"buffering\",r),this.whiteboardEmitter.one(\"pause\",o),this.whiteboardEmitter.one(\"playing\",u),this.whiteboardEmitter.one(\"ended\",c),this.whiteboard.seekToProgressTime(t),this.video.currentTime(t/1e3),e.next=22,Promise.all([l,Promise.race([b,p])]);case 22:case\"end\":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:\"seekWhenPause\",value:(p=s()(i.a.mark((function e(t){var n,a,r,o,u,c,h,d=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.onStatusUpdate(f.d.PauseSeeking),n=NaN,this.stateMachine.lockCombineStatus([f.c.Disabled,f.c.Pause],[f.c.Pause]),a=function(){d.stateMachine.setStatus(f.a.Video,f.b.PauseSeeking),n=window.setInterval((function(){d.video.readyState()>=f.f.HAVE_CURRENT_DATA&&(clearInterval(n),d.stateMachine.setStatus(f.a.Video,f.b.Pause))}),500)},r=function(){d.stateMachine.setStatus(f.a.Whiteboard,f.b.PauseSeeking)},o=function(){d.stateMachine.setStatus(f.a.Whiteboard,f.b.Pause)},u=function(){d.whiteboard.pause()},c=function(){clearInterval(n),d.video.off(\"seeking\",a),d.whiteboardEmitter.removeListener(\"buffering\",r),d.whiteboardEmitter.removeListener(\"pause\",o)},this.stateMachine.oneButNotCrashByDisabled([{video:f.b.PauseSeeking,whiteboard:f.b.PauseSeeking}]).catch((function(e){throw Error(e)})),h=this.stateMachine.one(f.c.Pause,s()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d.onStatusUpdate(f.d.Pause),d.stateMachine.cancelOneButNotCrashByDisabled(),d.stateMachine.off(f.c.Ended),d.whiteboardEmitter.removeListener(\"playing\",u),c();case 5:case\"end\":return e.stop()}}),e)})))),this.video.one(\"seeking\",a),this.whiteboardEmitter.one(\"buffering\",r),this.whiteboardEmitter.one(\"playing\",u),this.whiteboardEmitter.one(\"pause\",o),this.whiteboard.seekToProgressTime(t),this.video.currentTime(t/1e3),e.next=18,h;case 18:case\"end\":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:\"seekWhenPauseFinallyIsEnded\",value:(l=s()(i.a.mark((function e(t,n){var a,r,o,u,c,h,d,l=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.onStatusUpdate(f.d.PauseSeeking),a=NaN,this.stateMachine.lockCombineStatus([f.c.Disabled,f.c.Ended],[f.c.Ended]),r=function(){l.stateMachine.setStatus(f.a.Video,f.b.PauseSeeking),a=window.setInterval((function(){l.video.readyState()>=f.f.HAVE_CURRENT_DATA&&(clearInterval(a),l.stateMachine.setStatus(f.a.Video,f.b.Pause),t>=n.video&&l.stateMachine.setStatus(f.a.Video,f.b.Ended))}),500)},o=function(){t<n.whiteboard&&l.stateMachine.setStatus(f.a.Whiteboard,f.b.Pause)},u=function(){l.stateMachine.setStatus(f.a.Whiteboard,f.b.PauseSeeking)},c=function(){l.stateMachine.setStatus(f.a.Whiteboard,f.b.Ended)},h=function(){clearInterval(a),l.video.off(\"seeking\",r),l.whiteboardEmitter.removeListener(\"buffering\",u),l.whiteboardEmitter.removeListener(\"pause\",o),l.whiteboardEmitter.removeListener(\"ended\",c)},this.stateMachine.oneButNotCrashByDisabled([{video:f.b.PauseSeeking,whiteboard:f.b.PauseSeeking}]).catch((function(e){throw Error(e)})),d=this.stateMachine.on(f.c.Ended,s()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.onStatusUpdate(f.d.Ended),l.stateMachine.cancelOneButNotCrashByDisabled(),l.stateMachine.off([f.c.Pause,f.c.Ended]),h();case 4:case\"end\":return e.stop()}}),e)})))),this.video.one(\"seeking\",r),this.whiteboardEmitter.one(\"buffering\",u),this.whiteboardEmitter.one(\"pause\",o),this.whiteboardEmitter.one(\"ended\",c),this.whiteboard.seekToProgressTime(t),this.video.currentTime(t/1e3),e.next=18,d;case 18:case\"end\":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:\"pauseWhiteboardWhenVideoWaiting\",value:(d=s()(i.a.mark((function e(){var t,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(\"pause\"!==this.whiteboard.phase){e.next=2;break}return e.abrupt(\"return\");case 2:return t=this.stateMachine.one(f.c.PlayingBuffering),this.whiteboardEmitter.one(\"pause\",(function(){n.stateMachine.setStatus(f.a.Whiteboard,f.b.Pause)})),this.whiteboard.pause(),this.stateMachine.setStatus(f.a.Video,f.b.PlayingBuffering),e.next=8,t;case 8:case\"end\":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:\"playingWhiteboardWhenVideoPlayingDropFrame\",value:function(){var e=this;this.whiteboardEmitter.one(\"pause\",(function(){e.stateMachine.setStatus(f.a.Whiteboard,f.b.PauseBuffering)}));var t=this.stateMachine.one(f.c.PauseBuffering,s()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.triggerSource=f.e.Plugin,t.abrupt(\"return\",e.playWhenVideoIsPauseAndWhiteboardIsPauseBuffering());case 2:case\"end\":return t.stop()}}),t)}))));return this.video.one(\"pause\",(function(){e.stateMachine.setStatus(f.a.Video,f.b.Pause),e.whiteboard.seekToProgressTime(1e3*e.video.currentTime())})),this.video.pause(),t}},{key:\"playingWhiteboardWhenVideoPlaying\",value:(c=s()(i.a.mark((function e(){var t,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.stateMachine.setStatus(f.a.Video,f.b.Playing),t=this.stateMachine.one(f.c.Playing,s()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.onStatusUpdate(f.d.Playing);case 1:case\"end\":return e.stop()}}),e)})))),this.whiteboardEmitter.one(\"playing\",(function(){n.stateMachine.setStatus(f.a.Whiteboard,f.b.Playing)})),this.whiteboard.play(),e.next=6,t;case 6:case\"end\":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:\"pauseVideoWhenWhiteboardBuffering\",value:(o=s()(i.a.mark((function e(){var t,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.stateMachine.setStatus(f.a.Whiteboard,f.b.PlayingBuffering),this.onStatusUpdate(f.d.PlayingBuffering),!this.video.paused()){e.next=5;break}return this.stateMachine.setStatus(f.a.Video,f.b.Pause),e.abrupt(\"return\");case 5:return this.video.one(\"pause\",(function(){n.stateMachine.setStatus(f.a.Video,f.b.Pause)})),t=this.stateMachine.one(f.c.PlayingBuffering),this.video.pause(),this.stateMachine.setStatus(f.a.Whiteboard,f.b.PlayingBuffering),e.next=11,t;case 11:case\"end\":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:\"playingVideoWhenWhiteboardPlaying\",value:(r=s()(i.a.mark((function e(){var t,n,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.stateMachine.one(f.c.ToPlay,s()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.video.play();case 1:case\"end\":return e.stop()}}),e)})))),n=this.stateMachine.one(f.c.Playing,s()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.onStatusUpdate(f.d.Playing);case 1:case\"end\":return e.stop()}}),e)})))),this.video.one(\"playing\",(function(){a.stateMachine.setStatus(f.a.Video,f.b.Playing)})),this.stateMachine.setStatus(f.a.Whiteboard,f.b.Playing),e.next=6,Promise.all([t,n]);case 6:case\"end\":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:\"pauseVideoWhenWhiteboardEnded\",value:(a=s()(i.a.mark((function e(){var t,n,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.stateMachine.setStatus(f.a.Whiteboard,f.b.Ended),(t=this.stateMachine.getStatus(f.a.Video).current)!==f.b.Ended&&t!==f.b.Pause){e.next=4;break}return e.abrupt(\"return\");case 4:return n=this.stateMachine.one(f.c.Ended,s()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.onStatusUpdate(f.d.Ended);case 1:case\"end\":return e.stop()}}),e)})))),this.video.one(\"pause\",(function(){a.stateMachine.setStatus(f.a.Video,f.b.Pause)})),this.video.pause(),e.next=9,n;case 9:case\"end\":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:\"pauseWhiteboardWhenVideoEnded\",value:(n=s()(i.a.mark((function e(){var t,n,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.stateMachine.setStatus(f.a.Video,f.b.Ended),(t=this.stateMachine.getStatus(f.a.Whiteboard).current)!==f.b.Ended&&t!==f.b.Pause){e.next=4;break}return e.abrupt(\"return\");case 4:return n=this.stateMachine.one(f.c.Ended,s()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.onStatusUpdate(f.d.Ended);case 1:case\"end\":return e.stop()}}),e)})))),this.whiteboardEmitter.one(\"pause\",(function(){a.stateMachine.setStatus(f.a.Whiteboard,f.b.Pause)})),this.whiteboard.pause(),e.next=9,n;case 9:case\"end\":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:\"releaseEvents\",value:function(){this.taskQueue.destroy(),this.stateMachine.destroy(),this.whiteboardEmitter.destroy(),this.whiteboard.stop(),this.video.off()}},{key:\"initOnCrashByDisabledStatusCallback\",value:(t=s()(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stateMachine.setOnCrashByDisabledStatus((function(){t.releaseEvents(),t.onStatusUpdate(f.d.Disabled,b.a)}));case 2:case\"end\":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:\"onStatusUpdate\",value:function(e,t){var n=this;this.isNotResponse()||this.currentCombineStatus!==e&&(this.currentCombineStatus=e,Promise.resolve().then((function(){n.onStatusChangeHandleList.forEach((function(n){\"[object AsyncFunction]\"==={}.toString.call(n)?n(e,t).catch((function(e){throw Error(e)})):n(e,t)}))})))}},{key:\"getPlayerDuration\",value:function(){return{whiteboard:this.whiteboard.timeDuration,video:1e3*this.video.duration()}}},{key:\"isNotResponse\",value:function(){var e=this.currentCombineStatus===f.d.Stopped||this.currentCombineStatus===f.d.Disabled;return e&&console.warn(\"Currently in the \".concat(this.currentCombineStatus,\" stage, the program will not respond to the current behavior\")),e}},{key:\"combinedStatus\",get:function(){return this.currentCombineStatus}},{key:\"playbackRate\",set:function(e){this.isNotResponse()||(this._playbackRate=e,this.whiteboard.playbackSpeed=e,this.video.playbackRate(e))},get:function(){return this._playbackRate}},{key:\"timeDuration\",get:function(){var e=this.getPlayerDuration(),t=e.video,n=e.whiteboard;return{duration:Math.min(t,n),video:t,whiteboard:n}}}]),e}()},\"./src/ErrorConstant.ts\":function(e,t,n){\"use strict\";n.d(t,\"e\",(function(){return a})),n.d(t,\"a\",(function(){return i})),n.d(t,\"f\",(function(){return r})),n.d(t,\"d\",(function(){return s})),n.d(t,\"c\",(function(){return o})),n.d(t,\"g\",(function(){return u})),n.d(t,\"b\",(function(){return c})),n.d(t,\"i\",(function(){return h})),n.d(t,\"h\",(function(){return d}));var a=\"[Combine-Player]: URL must be passed in during the instance\",i=\"[Combine-Player]: Accidentally enter the prohibited area!\",r=\"[Combine-Player]: In the current context, there can only be one state method that legally monitors disable\",s=\"[Combine-Player]: Combine-player did stop\",o=\"[Combine-Player]: Combine-player did crash\",u=\"[Combine-Player]: Detects that you are passing both videoElementID and videoDOM parameters, please remove one of them\",c=\"[Combine-Player]: Based on the videoElementID you provided, the relevant element could not be found in the page. Please make sure your element ID is correct\",h=\"[Combine-Player]: Based on the videoElementID you provided, it is found that this element is not a video tag. Please make sure that the videoElementID you passed in is correct\",d=\"[Combine-Player]: Based on the videoDOM you provided, it is found that this element is not a video tag. Please make sure that the videoDOM you passed in is correct\"},\"./src/EventEmitter.ts\":function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return u}));var a=n(\"@babel/runtime/helpers/classCallCheck\"),i=n.n(a),r=n(\"@babel/runtime/helpers/createClass\"),s=n.n(r),o=function(e){return\"function\"!=typeof e},u=function(){function e(){i()(this,e),this.listeners=void 0,this.listeners=Object.create(null)}return s()(e,[{key:\"addListener\",value:function(e,t){if(o(t))throw Error(\"callback is not a function\");var n=this.getEvent(e);n?n.push(t):this.listeners[e]=[t]}},{key:\"removeListener\",value:function(e,t){var n=this.getEvent(e);if(n)for(var a=0;a<n.length;a++){var i=n[a];i!==t&&i.realCallbackFn!==t||(this.listeners[e].splice(a,1),a--)}}},{key:\"removeAllListener\",value:function(e){this.getEvent(e)&&delete this.listeners[e]}},{key:\"destroy\",value:function(){var e=this;Object.keys(this.listeners).forEach((function(t){e.removeAllListener(t)}))}},{key:\"one\",value:function(e,t){var n=this;if(o(t))throw Error(\"callback is not a function\");var a=function a(){\"[object AsyncFunction]\"==={}.toString.call(t)?t.apply(void 0,arguments).catch((function(e){throw Error(e)})):t.apply(void 0,arguments),n.removeListener(e,a)};a.realCallbackFn=t,this.addListener(e,a)}},{key:\"emit\",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var i=this.getEvent(e);i&&i.forEach((function(e){return e.apply(void 0,n)}))}},{key:\"getEvent\",value:function(e){return this.listeners[e]||null}}]),e}()},\"./src/StatusContant.ts\":function(e,t,n){\"use strict\";var a,i,r,s,o,u;n.d(t,\"b\",(function(){return a})),n.d(t,\"c\",(function(){return i})),n.d(t,\"d\",(function(){return r})),n.d(t,\"a\",(function(){return s})),n.d(t,\"e\",(function(){return o})),n.d(t,\"f\",(function(){return u})),function(e){e[e.PauseSeeking=0]=\"PauseSeeking\",e[e.Pause=1]=\"Pause\",e[e.PauseBuffering=2]=\"PauseBuffering\",e[e.PlayingBuffering=3]=\"PlayingBuffering\",e[e.Playing=4]=\"Playing\",e[e.PlayingSeeking=5]=\"PlayingSeeking\",e[e.Ended=6]=\"Ended\"}(a||(a={})),function(e){e.PauseSeeking=\"PauseSeeking\",e.PlayingSeeking=\"PlayingSeeking\",e.PauseBuffering=\"PauseBuffering\",e.PlayingBuffering=\"PlayingBuffering\",e.ToPlay=\"ToPlay\",e.ToPause=\"ToPause\",e.Pause=\"Pause\",e.Playing=\"Playing\",e.Disabled=\"Disabled\",e.Ended=\"Ended\"}(i||(i={})),function(e){e.PauseSeeking=\"PauseSeeking\",e.PlayingSeeking=\"PlayingSeeking\",e.Pause=\"Pause\",e.PauseBuffering=\"PauseBuffering\",e.PlayingBuffering=\"PlayingBuffering\",e.Playing=\"Playing\",e.Ended=\"Ended\",e.Disabled=\"Disabled\",e.Stopped=\"Stopped\"}(r||(r={})),function(e){e[e.Video=0]=\"Video\",e[e.Whiteboard=1]=\"Whiteboard\"}(s||(s={})),function(e){e[e.None=0]=\"None\",e[e.Video=1]=\"Video\",e[e.Whiteboard=2]=\"Whiteboard\",e[e.Plugin=3]=\"Plugin\"}(o||(o={})),function(e){e[e.HAVE_NOTHING=0]=\"HAVE_NOTHING\",e[e.HAVE_METADATA=1]=\"HAVE_METADATA\",e[e.HAVE_CURRENT_DATA=2]=\"HAVE_CURRENT_DATA\",e[e.HAVE_FUTURE_DATA=3]=\"HAVE_FUTURE_DATA\",e[e.HAVE_ENOUGH_DATA=4]=\"HAVE_ENOUGH_DATA\"}(u||(u={}))},\"./src/Types.ts\":function(e,t){},\"./src/Verification.ts\":function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return i}));var a=n(\"./src/ErrorConstant.ts\"),i=function(e){if(!e.url)throw Error(a.e);if(void 0!==e.videoElementID){var t=document.getElementById(e.videoElementID);if(null===t)throw new Error(a.b);if(\"video\"!==t.tagName.toLowerCase())throw new Error(a.i)}if(e.videoElementID&&e.videoDOM)throw new Error(a.g);if(void 0!==e.videoDOM&&\"video\"!==e.videoDOM.tagName.toLowerCase())throw new Error(a.h)}},\"./src/index.ts\":function(e,t,n){\"use strict\";n.r(t),n.d(t,\"default\",(function(){return P}));var a=n(\"@babel/runtime/helpers/defineProperty\"),i=n.n(a),r=n(\"@babel/runtime/helpers/classCallCheck\"),s=n.n(r),o=n(\"@babel/runtime/helpers/createClass\"),u=n.n(o),c=n(\"./src/Verification.ts\"),h=n(\"./src/EventEmitter.ts\"),d=n(\"./src/CombinePlayerImplement.ts\"),f=n(\"video.js\"),l=n.n(f),b=n(\"./src/StatusContant.ts\"),p=n(\"./src/Types.ts\");for(var v in p)[\"default\"].indexOf(v)<0&&function(e){n.d(t,e,(function(){return p[e]}))}(v);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,\"AtomPlayerStatus\",(function(){return b.b})),n.d(t,\"CombinePlayerStatus\",(function(){return b.c})),n.d(t,\"PublicCombinedStatus\",(function(){return b.d})),n.d(t,\"AtomPlayerSource\",(function(){return b.a})),n.d(t,\"TriggerSource\",(function(){return b.e})),n.d(t,\"VideoReadyState\",(function(){return b.f}));var P=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s()(this,e),this.videoOptions=void 0,this.whiteboard=void 0,this.debug=void 0,Object(c.a)(n);var i=e.videoDefaultOptions(n);this.videoOptions=y(y(y({},i),n),{},{videoJsOptions:y(y({},i.videoJsOptions),n.videoJsOptions)}),this.whiteboard=t,this.debug=a}return u()(e,[{key:\"create\",value:function(){var e=new h.a;this.handleWhiteboardCallback(e);var t=this.getVideoDOM(),n=l()(t,this.videoOptions.videoJsOptions);return n.src(this.videoOptions.url),new d.a({videoConfig:{videoOptions:this.videoOptions,video:n,isCanplay:n.readyState()>b.f.HAVE_CURRENT_DATA},whiteboard:this.whiteboard,whiteboardEmitter:e,debug:this.debug})}},{key:\"getVideoDOM\",value:function(){return void 0!==this.videoOptions.videoElementID?document.getElementById(this.videoOptions.videoElementID):this.videoOptions.videoDOM}},{key:\"handleWhiteboardCallback\",value:function(e){this.whiteboard.callbacks.on(\"onPhaseChanged\",(function(t){e.emit(t)})),this.whiteboard.callbacks.on(\"onIsPlayableChanged\",(function(t){e.emit(\"playableChange\",t)}))}}],[{key:\"videoDefaultOptions\",value:function(e){var t={videoJsOptions:{preload:\"auto\"}};return e.videoDOM||e.videoElementID||(t.videoDOM=document.createElement(\"video\")),t}}]),e}()},0:function(e,t,n){e.exports=n(\"./src/index.ts\")},\"@babel/runtime/helpers/asyncToGenerator\":function(e,t){e.exports=__webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ 48926)},\"@babel/runtime/helpers/classCallCheck\":function(e,t){e.exports=__webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ 34575)},\"@babel/runtime/helpers/createClass\":function(e,t){e.exports=__webpack_require__(/*! @babel/runtime/helpers/createClass */ 93913)},\"@babel/runtime/helpers/defineProperty\":function(e,t){e.exports=__webpack_require__(/*! @babel/runtime/helpers/defineProperty */ 59713)},\"@babel/runtime/regenerator\":function(e,t){e.exports=__webpack_require__(/*! @babel/runtime/regenerator */ 87757)},\"video.js\":function(e,t){e.exports=__webpack_require__(/*! video.js */ 87017)}});\n\n//# sourceURL=webpack://whiteboard-bridge/./node_modules/@netless/combine-player/dist/index.js?");

/***/ }),

/***/ 28401:
/*!*********************************************************!*\
  !*** ./node_modules/@netless/cursor-tool/dist/index.js ***!
  \*********************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("!function(e,r){if(true)module.exports=r(__webpack_require__(/*! react */ 67294),__webpack_require__(/*! white-web-sdk */ 63314));else { var o, t; }}(window,(function(e,r){return function(e){var r={};function t(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,t),n.l=!0,n.exports}return t.m=e,t.c=r,t.d=function(e,r,o){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:o})},t.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&\"object\"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:e}),2&r&&\"string\"!=typeof e)for(var n in e)t.d(o,n,function(r){return e[r]}.bind(null,n));return o},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,\"a\",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p=\"\",t(t.s=7)}([function(r,t){r.exports=e},function(e,t){e.exports=r},function(e,r){e.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAYISURBVHgB7ZpNSCtXFIBPEuvz+dMGpYUKD/sWFX+Qti6kK7Hqpm6e9q0rIoIUFUShPLV10VZx4+JZqa9v20LBhdq9fyBUCtKNPH8qYl2IOw3G38Rkek4y15y5uTOZJDOWggcOSSYzN/ebc+45554JwIM8iBCPyTEP+86T4vyMfsRN4b+nQTKIJp0vzuGvlpID7os8EQNEIBD4oKio6Bm9DwaDv/v9/n/076JgbtWUYPchwrW8qD7UnOvr6wFNkpubm+/wu7f0c7y6mrnlvQufxB0Iau7V1dX3BDA/P6/V1dVpzc3N2uLiIofK1c8VYHys/wRKBUN3/hGHqaysNOjc3FwMis6hc0FtLTHuvYLxCCZgci8uLn4wg5Gh6Fy8Jk+/NkcCAlAAuUkoW4g0B+d5tLS05O/r67O8eGxsDNra2uDy8nKsoKCAwCIQDxQa0yTxgrvCYXyTk5Ml+Orf2dlJeeHIyAigFSE/P38ELfUNqNdSkjgF5FF89jL1TU1NlQwODl5gZPujp6cHWltbUw7Koc7Pz8mkZpHPFeFrJuZeqLnoMoPoZqe0JjDP/IZgnyLUG/o8NDRkuo5Ua2pjY6MC4oFCFf1cA0oKzRSOp6enRfTaGh0d/QxBt+1CUVgnOTs7+xrHfQzGyOcKkK3QTJMnQffZ6e/v/xwttmsHqqmpKXbdycnJCxy7ABLh3FEgVZ6hZJhnFZoFFMF0d3c/w7v+dyookXBnZ2c/xvHfhriVcvXfdBRItsxjnOhYqjwjoAimq6vrCysoGofk+Ph4Esd/F/UdiFtJAGUd2DygTpp5dmBUUJ2dnc9VUALm8PDwJY7/BPU9VD8k3M4RC6kskxZMKigKIMLN9vf3p3H8DyWgfEhEOwOQD9IXOTz7EObbwsLC4YWFBRgeHrY9ECXYo6MjaGlpKWlsbPxkYGDgRW1tbSEWquVlZWXBzc3Nl1VVVa8hXiXc6ioqBqGaPDk7AACJTRZ3NS9lcUp86cJwoSQ7Pj4Op6enfxUXF3/V0NCQv7q6GsCvwrqGUG/01xAD4+VQTOxaSF43d5bBOisrGBJRCtXX17+/trb268rKSgASFgmz97KFkmo6OztWuVyPweiWGc4WRkhFRQVEIpHg8vJyQAIQVlLBROVxvBYQHsXnO8tk62ZcyN0wecLBwcEvYHSzEPscBqOLCRhLC4n9uqaA8UAWAcAKhtbQ3t7eTHl5+Y9gtAp3twhT056CDMQ7MRzIFTeTYKb1yYYVQFH9VdzsqNmYKpfTJBDX3Ixgdnd3XyHMT2AMALJlBBSPaMpNngrIsTyTCgaj288YDGakictrxizvKFNOjgSSBLS+vv6UYHDb7DgMVgsChjTEgCIKGG4ZU+EWkgNBzN1qamq+pAMTExPgFMzW1tZrhHkFyWE5KxgSszx0527RaDRmOSpRshEOU11dPQPG8CwHARHJlMnTSrwSRFIlfXt7m3V5ngJGuJtqzaQtZkFBVNJezN5ZAdmwjKo2k9tVtrcI3OXk4tPgcg7ChCDZ1URgMOu72Xa5VFHOkymQhWVU60YVmjN6wiC7k6p+S1syCACOwJBYFaexV+yhBekNPsMBO6KAEeE4BMaCU67RsoYhSbXgaT//ht709vZCaWmp6YkEbLFmVJWzas04+iBL7EKpm0J7duqu0B7+CTUpNJuyvb1NCfMj1CqI9wLKUOlOUMeG+gGFkHii4HizUF4z/KFUrPsJ8WbEIyx7nnZ0dDynME6BAuce09iFHo+GrnmGltltb2//E4wVAN82y7vOjKOZXSBhJdHNiT3TYWD8OY2PTUJkdd7MkJMnT5wZVQF2RFX6yBMUdzPMvvfqxz3sXHF+GNT9ANXit/10O1sgHkZvdQAOKvs9B5L7ARELGAAXLSTvM8QExTE+YbHe+HURhZp1aRyF4CJXClbbWwGketgkW9VsY+YaiBCVhfgE+XvxRwgZSM4jUVCDZFQ9pytmXR8hUTB2gnidx4XffVWydN0yQjwmx/jkAZJBrIBI5J7ZvQGZWUgVSuU/EqmOAzicKNMVu816DdRWUV1/7xAP8n+SfwF3Du3NF2sYhwAAAABJRU5ErkJggg==\"},function(e,r){e.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAxCAYAAABznEEcAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAZoSURBVHgB7VlLSCRXFL3ljNEhEXTGhMQJmOjCz8ZNVLKICz9xIYhCNi7UgINkGEk2En8hW5cBUQNxo05GAoKikuCAmvGzGMdPcCUGjDPxD/4Vv/3JvWW97luvq7ur+hMZ8MKlqrteNfe8e965970GuLVbC5kpJr53+hjHx9yY3TUxJgLMAQG4ITARfp5T4Mri4uL9q6urnxwOxz/oY5eXl1/Pzs7e195X2FX4jZsIhAK7gx5ps9m6nGj9/f3OtbU1pzAE0318fPwVjYHrrN7R3AjU/wpOBwA9Cmf/9ejoqDMtLU31iooKGdA+ATo4OMiXAEWAHhBAGEApXj4rPAik0vPt7e0vCgoKPH4gMzMTSktLIS8vD2JiYgABvcHMTZyennbHxsaOg3udOJmLzwqEYB0ZgRCZENm4u7e39yQuLq65srISZmZmvP5Ybm4u5OfnQ0lJyXWUCAgzNLS+vt6SnJz8WgvYwV5xSlcRgyVg3ha2Dkxzc3MvfZmVlQW+bGxsDBobGyE7O1u94uJPjIqKqklKSvrbbrfPnp+ff7e8vJwMnlSTKWfJjDKhywJo6wLp0YcZ+dyIUr7s4cOHLsrRlQwBTSBFuzc2NiZYhjjVAIyzZBqEwgCQv0OOM/gNzuiP/ijlDxBRjgClpqa6AF1cXDydmpoaLCws3JcAGYHyC4JMzoKaibKysvienp6FtrY2IA/WCFB5ebkqCHSvARo8Ozt7igIxwIJ2gJ+seFMnDoIyEUV+dHT0G3qWVUr5M043DdAB0m2IKZwAYpgZX+qkywR6NFbuR0iDxmAoZRUQKRxSLTMnJ8eIaqqSeVMnIYUOdu+sq6vrp4f+VCoYo8khZaNs01VRlERUu2/BrWAA7sl2Anink1Ao18JGjyY/PDx8hq1GZqgp5c2mp6chMjLy2b179x7hRzvoqeUUwXIzqq4O5nZsNUaEbIbLqPLTou/s7FTvT05OpsA9sXJG1AVsZDwjutqBIN6gUlWjxod8XRBNKXgsrqpqYZfwEqX9h8TExD7wbFm8LmzxHQ0QHSlXKZVSqFC/hkqlaKapTaGgCQTK7PHW1lb/wsLC86KiokkccoV+qV1tcE0pO7AWxmhTxBszDzqRr66ujqanp2cRpQLNBgUsCh8BwQ54bn5+/s+mpqa+4eHhfS1gb52vwuP0trPjhSZCBtLQ0NA3MDDQQIFYAUHBYhuvzjpVbJr1lZWVP3p7e19UVVXNgHumXYrI4uBx6Yqevz02b0FcRQ8CoBQF3dXVpQLZ3d39C7n+ora29vfJyclDYFnWgFyxK3cxhss/+KoT/N6DVkQpKypFGUCp3Ozo6HgSHx//GLW/BwHsg57zl5pzADajwLn52mPL1ZHPloMoRYPMFL6EhAR18e7s7MxVV1fPsAAp4Avteq7dC/c1+wKI4g+EfGzDM+EYHBw8RDrNiA2QL6upqVGvKJ2/gHu2L1nA5wwEB2YDfSYMO1x/px0cgEc2zBY+eo67u6H29vZ/wU2VC8l58JxKNjDOgojNEp08aFVfX++3l6JMEdDx8fEB0FNIBsDXBc8ArwuW1EkeI1RKdLWmCx+1DhkZGRvR0dFfSsHKxYtnW0iqvJAN9xNm6MR/QO5sfapUSkqKmqW5ubmfwVgyZdpw/vPZl2kUEAinBMSUStG+gwra0NDQSynQKyloIxnlewafjDFLJzLRBJqiFMnqyMgIbG5uDuD996Dnv8iAPOMAPmbcm5lVJwA/vZRMKZGZlpaWVtAvUL4GZMqE1fjRJrUd76LHoX+InlhcXPwZnWW2tra6jjrpiBM3UK/weQr6J+gfodMh9HtwncG7YLA3CMSsLmxx5WuDCt8B7vZeicInTjCWlpb6wc15mfey7oc9E8LElpVmMgb9AXoC+qcTExOPKRu4NlTHs6Q10GfhgfYOvRsJQZ76BWMKuDtaolQs+gfoH6Mn436gDg+e+5BKXUQx/C5Je/a+NpbeiQJPKgUdlNXx/BCBKxVdxW5Q0I3XBqFKRhU4KLtjYawi3csuTKdc4FnIXNvKUJkVEGRG20QZAAUpA5DbaYAQLmQzfzxyk/ffdnCD4NWVnGdE7kQBQvQHC5lVEDxgMaM29lkxGCNLKrDnIbFAMkFmBIaDkHstU41coGZ1TZD5UjReCGUAYbNgdNqoXZB/T67yYbFAMiGML3BhYeH8rb0t9h/zgcTBcTNGiQAAAABJRU5ErkJggg==\"},function(e,r){e.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAgrSURBVHgB7ZprTBRXFIDP7gIt8lQppTwE5V0KaAn6o1pqNGkDDTEmTUhsgKRp+gNJw68CFkLbVC2QkDS+gD8KJdWmARvbFBNNWpuIRGPFWBXQRMPDqIki+KLATs+ZnTvcvXtnX8w2beJJToaduTP3fHPOPffcOwC8kP+2WCDwIvahGFxTuN8KmNSZmULPNjLeqF9F8rdPkIEGEn+r+vjx46LQ0NA8/Dsader58+e/h4WFDWntFO7ot6fMFAt3JLWi2lCDpqamCux2+2+KROj82NhYGrXT2lu5Z/DP/deFByElA4Pv3LlTiHY/nJ6eVnbv3q1s2bJFyc7OVrZu3arU1dUp4+PjxPUQoT+g9tp9PkMFgpo9kxljHRoaWp2Xl3duYmIiurKyEvDoclNCQgIcPnxYPc7MzHwcGRnZhaft4Ag7O9fUbRhaITCie4lgcnNzT7qDIaHz27dvh+vXr0NEREQneqoCHKFnAR+8ZCaQGGq2CxcurCGYycnJZHcwTNAzUFFRoUJFRUV1IFQ5OKBsXB9uxSwgl0TQ3d29Yt26dccwoyVXV1d7hGEiQmGi2AzOUHx/hob4K2yuYS9G987s7OwPISEh7xPM6dOnwVfBsIMjR45AZmbmo5s3b76Xnp7+J55egMVxBSAZT0v1ED+76yn66dOnLQSzd+9ev2BIyFP0MjBco1JTU/sxfFeDazp3cYgZHmKqdoaGNISHh9fv378fSJcqlPV6e3sBJ+I/goOD34VFL0k95Y+HxPHCYGxmw5DQ2NuzZw8EBQVtunXr1jvgwUP+hhz/QDXMMCNVE8zx48dNg2FCz6QQjI2N/RA8VBFmANnu3btXihnpG8pM9fX1EAi5du0aeWkVOAMBCF7yN+R0z4yOjq6NiYlpp9CgdBtIwXpPH6vgDKWLt0CygtM6MDCwBuUYZSKaOCksAiVY9wFOBePgDOOytPAGSKzNVCCC2bBhw69YdK7ypgpYimzbtk2dl7CM+hFcveOUHDylbTFO1YdhFbByx44dA1QFUP0VSJj4+Hjo6+sDq9U6iEmHKvFZTedQ50GYbN15SITVlwNlZWUnLRZL8s6dOwMOQ9UCTtKTra2ttdppt9V2kMF5cbmsjxuM43bMNrmUzc6fP6+GQiDGDoOJi4ubwb4qm5ubafyIE6nLxGqTPEsGo1cBOGNX0TyDYafC0CyOaxcVziyh53Z2dkJycvLMvn37PmpoaBgFR4jxYSbWdVIgI89Iq4CjR48CZjlYv369+tssqI6ODsjPz4f+/v668vLycxrEHHfkYdwC8SB6mGEV8Cl64cuuri5oa2tTG+EyGjZu3AiXLl1qefDgwV8lJSUFZkDV1tZCcXExXLx4sbWoqKgPFj0zx8GI9ZwO5W4M6ekZYeqpaqbqmaSqqkpNpcPDw4dwzfM9nrLduHEjEs+X0XV/Sx96LnqE1kLtBQUF3eDwCO8dGQyzV5rl+JyuegfXI29jRotiRlKnpFghHMzKyjqotVXS0tLacKPjF3bdHxjSq1evduAkepAD+ZsDYlC8V5w8ZBVg+PPq2MGMlkInqE4joTf45MmT4YyMjAPcA+ltLSQlJX2BafxnX6HI29QeK44TOTk57mCYZ0QoJ8OBM4yB6dkNkwGlSygsLFQvYtYB3BTMxFL+M+0eFgZqp4mJiU2+QKGX1fGIk/QIrn0aYXGsyDxjmAyMhO2jhaCGoUbX1NSkLSwsPMJqV8Fspu6lIZS6OYhjiOLwdU7fQM1HfRPD7wS1obZ0j0xpb4726Z49ezaJf2/S7s9ATUGNR41BjdJseRnke3WGwhrRTS9pD1mOGoeG15BxOOfoxuCkp0Ih6NeaEaSZGlieJyiCoc1FgsGldokGk8nBvAKOrWIGQ5uPsm0tt0BWDiicAaGuGhkZ+YqMw9StGzU4OKhCnT179hNsswY1FTXdE5QEJhc1S3tGogazXLOBwQSBl3tzIhQPtAL1VQJCTcNx8y1vHIUghSKFZE9PT7H2dlM1b+Wgrr1y5Uq77J75+fnplpaWMg2ch4nlYEI5z7hdensDpI4hrYNErcMMXJ32koG4ztf3pultz83NjWG99Ra2WQ0OL2VjZjwgeufUqVOqV8+cOdPIwdBLSNJeHg8TAh5WqJ6EfSmgt7IMNRJ1JThiOlnrOAMHshprmMKdoGSCpb9s3B3SYLIFGIqICJB7xisYi+RvfiypXw40DWGdlJaWRmMd141hk8V2OWm7ieYTXhBc3+BgaZyqAISjOYxSMVvXsBTNlzdiNQDgRao2AtK3pjggpmrqbGpqSsLPIN/dv38/gaBwUjTshMHcvn27JyUlpRmc5xpPMD599LIYnLNyUKKndKjGxsakXbt2deMCLIE8IVvs0YRM1fjdu3d/wrXN5+BcnzEgvor2uN3rjzAYMp5lPEoQlE5fA0fWo8GfhlCbKVFQ1pKNIfzcOHH58mWqaimVUwJI0+6n59D4pIlzmdZPMPiZzXjDjX47Le5g0Uu8x2zgPqWyKpjVe7x3+AUbq9NYjQbgp2dsBud5o8TP7d5kHAWcQchQfoEmLgn8HjOiBIF7o5hI1x6CEbLNP3bdqYAF44JzyWLzcN1i8DcT/o3awbm8Fz3DAy2A62INwPV/E3wWdx5inmBHuwChCBD6R2JwHge80TIQRQLjt7e8DTkGZgfX8cUMZTDAteFDkveaIlzjX9ySQs8X18r2t2VHUURPKoICmDR+eCO9aSdmOIub3/w9RgpgUpiJhvraXpa6jZKHGEqyusw0GLFzX+5RhN/8kYnMSNMMfyH/V/kHST6OYVElTPAAAAAASUVORK5CYII=\"},function(e,r){e.exports=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDBweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSIwIDAgNDAgNDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYwLjEgKDg4MTMzKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT5zaGFwZS1jdXJzb3I8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBkPSJNMjAsMjEuNSBDMjAuMjQ1NDU5OSwyMS41IDIwLjQ0OTYwODQsMjEuNjc2ODc1MiAyMC40OTE5NDQzLDIxLjkxMDEyNDQgTDIwLjUsMjIgTDIwLjUsMjcgQzIwLjUsMjcuMjc2MTQyNCAyMC4yNzYxNDI0LDI3LjUgMjAsMjcuNSBDMTkuNzU0NTQwMSwyNy41IDE5LjU1MDM5MTYsMjcuMzIzMTI0OCAxOS41MDgwNTU3LDI3LjA4OTg3NTYgTDE5LjUsMjcgTDE5LjUsMjIgQzE5LjUsMjEuNzIzODU3NiAxOS43MjM4NTc2LDIxLjUgMjAsMjEuNSBaIE0yNywxOS41IEMyNy4yNzYxNDI0LDE5LjUgMjcuNSwxOS43MjM4NTc2IDI3LjUsMjAgQzI3LjUsMjAuMjQ1NDU5OSAyNy4zMjMxMjQ4LDIwLjQ0OTYwODQgMjcuMDg5ODc1NiwyMC40OTE5NDQzIEwyNywyMC41IEwyMiwyMC41IEMyMS43MjM4NTc2LDIwLjUgMjEuNSwyMC4yNzYxNDI0IDIxLjUsMjAgQzIxLjUsMTkuNzU0NTQwMSAyMS42NzY4NzUyLDE5LjU1MDM5MTYgMjEuOTEwMTI0NCwxOS41MDgwNTU3IEwyMiwxOS41IEwyNywxOS41IFogTTE4LDE5LjUgQzE4LjI3NjE0MjQsMTkuNSAxOC41LDE5LjcyMzg1NzYgMTguNSwyMCBDMTguNSwyMC4yNDU0NTk5IDE4LjMyMzEyNDgsMjAuNDQ5NjA4NCAxOC4wODk4NzU2LDIwLjQ5MTk0NDMgTDE4LDIwLjUgTDEzLDIwLjUgQzEyLjcyMzg1NzYsMjAuNSAxMi41LDIwLjI3NjE0MjQgMTIuNSwyMCBDMTIuNSwxOS43NTQ1NDAxIDEyLjY3Njg3NTIsMTkuNTUwMzkxNiAxMi45MTAxMjQ0LDE5LjUwODA1NTcgTDEzLDE5LjUgTDE4LDE5LjUgWiBNMjAsMTIuNSBDMjAuMjQ1NDU5OSwxMi41IDIwLjQ0OTYwODQsMTIuNjc2ODc1MiAyMC40OTE5NDQzLDEyLjkxMDEyNDQgTDIwLjUsMTMgTDIwLjUsMTggQzIwLjUsMTguMjc2MTQyNCAyMC4yNzYxNDI0LDE4LjUgMjAsMTguNSBDMTkuNzU0NTQwMSwxOC41IDE5LjU1MDM5MTYsMTguMzIzMTI0OCAxOS41MDgwNTU3LDE4LjA4OTg3NTYgTDE5LjUsMTggTDE5LjUsMTMgQzE5LjUsMTIuNzIzODU3NiAxOS43MjM4NTc2LDEyLjUgMjAsMTIuNSBaIiBpZD0icGF0aC0xIj48L3BhdGg+CiAgICAgICAgPGZpbHRlciB4PSItNjQuNiUiIHk9Ii01OS41JSIgd2lkdGg9IjIyOS4zJSIgaGVpZ2h0PSIyNDYuMSUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0yIj4KICAgICAgICAgICAgPGZlTW9ycGhvbG9neSByYWRpdXM9IjEiIG9wZXJhdG9yPSJkaWxhdGUiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dTcHJlYWRPdXRlcjEiPjwvZmVNb3JwaG9sb2d5PgogICAgICAgICAgICA8ZmVPZmZzZXQgZHg9IjAiIGR5PSIyIiBpbj0ic2hhZG93U3ByZWFkT3V0ZXIxIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4KICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMyIgaW49InNoYWRvd09mZnNldE91dGVyMSIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlR2F1c3NpYW5CbHVyPgogICAgICAgICAgICA8ZmVDb21wb3NpdGUgaW49InNoYWRvd0JsdXJPdXRlcjEiIGluMj0iU291cmNlQWxwaGEiIG9wZXJhdG9yPSJvdXQiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbXBvc2l0ZT4KICAgICAgICAgICAgPGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAgICAwIDAgMCAwIDAgICAwIDAgMCAwIDAgIDAgMCAwIDAuMTYgMCIgdHlwZT0ibWF0cml4IiBpbj0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgIDwvZmlsdGVyPgogICAgPC9kZWZzPgogICAgPGcgaWQ9Iumhtemdoi00IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iV2hpdGVib2FyZC1HdWlkZWxpbmVzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzQ0LjAwMDAwMCwgLTc1MS4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9InNoYXBlLWN1cnNvciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQ0LjAwMDAwMCwgNzUxLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9ouWkh+S7vS00NCIgZmlsbD0iI0ZGRkZGRiIgb3BhY2l0eT0iMC4wMSIgeD0iMCIgeT0iMCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iMiI+PC9yZWN0PgogICAgICAgICAgICAgICAgPGcgaWQ9IuW9oueKtue7k+WQiCIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgICAgICAgICA8dXNlIGZpbGw9ImJsYWNrIiBmaWxsLW9wYWNpdHk9IjEiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSIxIiBkPSJNMjAsMjEgQzIwLjQ4NTQxMDMsMjEgMjAuODk4MDg1LDIxLjM0Nzk5OTMgMjAuOTg5OTQ3OSwyMS44NjU0ODc3IEwyMSwyMiBMMjEsMjcgQzIxLDI3LjU1MjI4NDcgMjAuNTUyMjg0NywyOCAyMCwyOCBDMTkuNTE0NTg5NywyOCAxOS4xMDE5MTUsMjcuNjUyMDAwNyAxOS4wMTAwNTIxLDI3LjEzNDUxMjMgTDE5LDI3IEwxOSwyMiBDMTksMjEuNDQ3NzE1MyAxOS40NDc3MTUzLDIxIDIwLDIxIFogTTI3LDE5IEMyNy41NTIyODQ3LDE5IDI4LDE5LjQ0NzcxNTMgMjgsMjAgQzI4LDIwLjQ4NTQxMDMgMjcuNjUyMDAwNywyMC44OTgwODUgMjcuMTM0NTEyMywyMC45ODk5NDc5IEwyNywyMSBMMjIsMjEgQzIxLjQ0NzcxNTMsMjEgMjEsMjAuNTUyMjg0NyAyMSwyMCBDMjEsMTkuNTE0NTg5NyAyMS4zNDc5OTkzLDE5LjEwMTkxNSAyMS44NjU0ODc3LDE5LjAxMDA1MjEgTDIyLDE5IEwyNywxOSBaIE0xOCwxOSBDMTguNTUyMjg0NywxOSAxOSwxOS40NDc3MTUzIDE5LDIwIEMxOSwyMC40ODU0MTAzIDE4LjY1MjAwMDcsMjAuODk4MDg1IDE4LjEzNDUxMjMsMjAuOTg5OTQ3OSBMMTgsMjEgTDEzLDIxIEMxMi40NDc3MTUzLDIxIDEyLDIwLjU1MjI4NDcgMTIsMjAgQzEyLDE5LjUxNDU4OTcgMTIuMzQ3OTk5MywxOS4xMDE5MTUgMTIuODY1NDg3NywxOS4wMTAwNTIxIEwxMywxOSBMMTgsMTkgWiBNMjAsMTIgQzIwLjQ4NTQxMDMsMTIgMjAuODk4MDg1LDEyLjM0Nzk5OTMgMjAuOTg5OTQ3OSwxMi44NjU0ODc3IEwyMSwxMyBMMjEsMTggQzIxLDE4LjU1MjI4NDcgMjAuNTUyMjg0NywxOSAyMCwxOSBDMTkuNTE0NTg5NywxOSAxOS4xMDE5MTUsMTguNjUyMDAwNyAxOS4wMTAwNTIxLDE4LjEzNDUxMjMgTDE5LDE4IEwxOSwxMyBDMTksMTIuNDQ3NzE1MyAxOS40NDc3MTUzLDEyIDIwLDEyIFoiIGZpbGw9IiMyMTIzMjQiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9oiIgZmlsbD0iI0ZGRkZGRiIgeD0iMTguNSIgeT0iMTciIHdpZHRoPSIzIiBoZWlnaHQ9IjYiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaIiIGZpbGw9IiNGRkZGRkYiIHg9IjE3IiB5PSIxOC41IiB3aWR0aD0iNiIgaGVpZ2h0PSIzIj48L3JlY3Q+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMjAsMjEuNSBDMjAuMjQ1NDU5OSwyMS41IDIwLjQ0OTYwODQsMjEuNjc2ODc1MiAyMC40OTE5NDQzLDIxLjkxMDEyNDQgTDIwLjUsMjIgTDIwLjUsMjcgQzIwLjUsMjcuMjc2MTQyNCAyMC4yNzYxNDI0LDI3LjUgMjAsMjcuNSBDMTkuNzU0NTQwMSwyNy41IDE5LjU1MDM5MTYsMjcuMzIzMTI0OCAxOS41MDgwNTU3LDI3LjA4OTg3NTYgTDE5LjUsMjcgTDE5LjUsMjIgQzE5LjUsMjEuNzIzODU3NiAxOS43MjM4NTc2LDIxLjUgMjAsMjEuNSBaIE0yNywxOS41IEMyNy4yNzYxNDI0LDE5LjUgMjcuNSwxOS43MjM4NTc2IDI3LjUsMjAgQzI3LjUsMjAuMjQ1NDU5OSAyNy4zMjMxMjQ4LDIwLjQ0OTYwODQgMjcuMDg5ODc1NiwyMC40OTE5NDQzIEwyNywyMC41IEwyMiwyMC41IEMyMS43MjM4NTc2LDIwLjUgMjEuNSwyMC4yNzYxNDI0IDIxLjUsMjAgQzIxLjUsMTkuNzU0NTQwMSAyMS42NzY4NzUyLDE5LjU1MDM5MTYgMjEuOTEwMTI0NCwxOS41MDgwNTU3IEwyMiwxOS41IEwyNywxOS41IFogTTE4LDE5LjUgQzE4LjI3NjE0MjQsMTkuNSAxOC41LDE5LjcyMzg1NzYgMTguNSwyMCBDMTguNSwyMC4yNDU0NTk5IDE4LjMyMzEyNDgsMjAuNDQ5NjA4NCAxOC4wODk4NzU2LDIwLjQ5MTk0NDMgTDE4LDIwLjUgTDEzLDIwLjUgQzEyLjcyMzg1NzYsMjAuNSAxMi41LDIwLjI3NjE0MjQgMTIuNSwyMCBDMTIuNSwxOS43NTQ1NDAxIDEyLjY3Njg3NTIsMTkuNTUwMzkxNiAxMi45MTAxMjQ0LDE5LjUwODA1NTcgTDEzLDE5LjUgTDE4LDE5LjUgWiBNMjAsMTIuNSBDMjAuMjQ1NDU5OSwxMi41IDIwLjQ0OTYwODQsMTIuNjc2ODc1MiAyMC40OTE5NDQzLDEyLjkxMDEyNDQgTDIwLjUsMTMgTDIwLjUsMTggQzIwLjUsMTguMjc2MTQyNCAyMC4yNzYxNDI0LDE4LjUgMjAsMTguNSBDMTkuNzU0NTQwMSwxOC41IDE5LjU1MDM5MTYsMTguMzIzMTI0OCAxOS41MDgwNTU3LDE4LjA4OTg3NTYgTDE5LjUsMTggTDE5LjUsMTMgQzE5LjUsMTIuNzIzODU3NiAxOS43MjM4NTc2LDEyLjUgMjAsMTIuNSBaIiBpZD0i5b2i54q257uT5ZCIIiBmaWxsPSIjMjEyMzI0IiBmaWxsLXJ1bGU9Im5vbnplcm8iPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+\"},function(e,r){e.exports=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDdweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSIwIDAgNDcgNDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYwLjEgKDg4MTMzKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT50ZXh0LWN1cnNvcjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGQ9Ik0xNiwyNi41IEMxNS43MjM4NTc2LDI2LjUgMTUuNSwyNi4yNzYxNDI0IDE1LjUsMjYgQzE1LjUsMjUuNzU0NTQwMSAxNS42NzY4NzUyLDI1LjU1MDM5MTYgMTUuOTEwMTI0NCwyNS41MDgwNTU3IEwxNiwyNS41IEwxOS41LDI1LjUgTDE5LjUsMTQuNSBMMTYsMTQuNSBDMTUuNzIzODU3NiwxNC41IDE1LjUsMTQuMjc2MTQyNCAxNS41LDE0IEMxNS41LDEzLjc1NDU0MDEgMTUuNjc2ODc1MiwxMy41NTAzOTE2IDE1LjkxMDEyNDQsMTMuNTA4MDU1NyBMMTYsMTMuNSBMMjQsMTMuNSBDMjQuMjc2MTQyNCwxMy41IDI0LjUsMTMuNzIzODU3NiAyNC41LDE0IEMyNC41LDE0LjI0NTQ1OTkgMjQuMzIzMTI0OCwxNC40NDk2MDg0IDI0LjA4OTg3NTYsMTQuNDkxOTQ0MyBMMjQsMTQuNSBMMjAuNSwxNC41IEwyMC41LDI1LjUgTDI0LDI1LjUgQzI0LjI3NjE0MjQsMjUuNSAyNC41LDI1LjcyMzg1NzYgMjQuNSwyNiBDMjQuNSwyNi4yNDU0NTk5IDI0LjMyMzEyNDgsMjYuNDQ5NjA4NCAyNC4wODk4NzU2LDI2LjQ5MTk0NDMgTDI0LDI2LjUgTDE2LDI2LjUgWiIgaWQ9InBhdGgtMSI+PC9wYXRoPgogICAgICAgIDxmaWx0ZXIgeD0iLTI4NC4wJSIgeT0iLTgxLjUlIiB3aWR0aD0iNjY4LjElIiBoZWlnaHQ9IjI5My45JSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTIiPgogICAgICAgICAgICA8ZmVNb3JwaG9sb2d5IHJhZGl1cz0iMSIgb3BlcmF0b3I9ImRpbGF0ZSIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd1NwcmVhZE91dGVyMSI+PC9mZU1vcnBob2xvZ3k+CiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjIiIGluPSJzaGFkb3dTcHJlYWRPdXRlcjEiIHJlc3VsdD0ic2hhZG93T2Zmc2V0T3V0ZXIxIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIzIiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgICAgIDxmZUNvbXBvc2l0ZSBpbj0ic2hhZG93Qmx1ck91dGVyMSIgaW4yPSJTb3VyY2VBbHBoYSIgb3BlcmF0b3I9Im91dCIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlQ29tcG9zaXRlPgogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgMCAwIDAgMC4xNiAwIiB0eXBlPSJtYXRyaXgiIGluPSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlQ29sb3JNYXRyaXg+CiAgICAgICAgPC9maWx0ZXI+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0i6aG16Z2iLTQiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJXaGl0ZWJvYXJkLUd1aWRlbGluZXMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zODguMDAwMDAwLCAtNjcyLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0idGV4dC1jdXJzb3IiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM5Mi4wMDAwMDAsIDY3Mi4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaLlpIfku70tNDAiIGZpbGw9IiNGRkZGRkYiIG9wYWNpdHk9IjAuMDEiIHg9IjAiIHk9IjAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcng9IjIiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxnIGlkPSLlvaLnirbnu5PlkIgiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSJibGFjayIgZmlsbC1vcGFjaXR5PSIxIiBmaWx0ZXI9InVybCgjZmlsdGVyLTIpIiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMSIgZD0iTTE5LDI1IEwxOSwxNSBMMTYsMTUgQzE1LjQ0NzcxNTMsMTUgMTUsMTQuNTUyMjg0NyAxNSwxNCBDMTUsMTMuNTE0NTg5NyAxNS4zNDc5OTkzLDEzLjEwMTkxNSAxNS44NjU0ODc3LDEzLjAxMDA1MjEgTDE2LDEzIEwyNCwxMyBDMjQuNTUyMjg0NywxMyAyNSwxMy40NDc3MTUzIDI1LDE0IEMyNSwxNC40ODU0MTAzIDI0LjY1MjAwMDcsMTQuODk4MDg1IDI0LjEzNDUxMjMsMTQuOTg5OTQ3OSBMMjQsMTUgTDIxLDE1IEwyMSwyNSBMMjQsMjUgQzI0LjU1MjI4NDcsMjUgMjUsMjUuNDQ3NzE1MyAyNSwyNiBDMjUsMjYuNDg1NDEwMyAyNC42NTIwMDA3LDI2Ljg5ODA4NSAyNC4xMzQ1MTIzLDI2Ljk4OTk0NzkgTDI0LDI3IEwxNiwyNyBDMTUuNDQ3NzE1MywyNyAxNSwyNi41NTIyODQ3IDE1LDI2IEMxNSwyNS41MTQ1ODk3IDE1LjM0Nzk5OTMsMjUuMTAxOTE1IDE1Ljg2NTQ4NzcsMjUuMDEwMDUyMSBMMTYsMjUgTDE5LDI1IFoiIGZpbGw9IiMyMTIzMjQiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=\"},function(e,r,t){\"use strict\";t.r(r),t.d(r,\"CursorTool\",(function(){return j}));var o,n=t(0),I=t(1),g=t(2),i=t.n(g),M=t(3),a=t.n(M),s=t(4),c=t.n(s),A=t(5),N=t.n(A),u=t(6),l=t.n(u),D=(t(8),o=function(e,r){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])})(e,r)},function(e,r){if(\"function\"!=typeof r&&null!==r)throw new TypeError(\"Class extends value \"+String(r)+\" is not a constructor or null\");function t(){this.constructor=e}o(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}),C=function(e){function r(r){var t=e.call(this,r)||this;return t.renderAvatar=function(e){var r=\"rgb(\"+e.memberState.strokeColor[0]+\", \"+e.memberState.strokeColor[1]+\", \"+e.memberState.strokeColor[2]+\")\";if(t.detectAvatar(e)){var o=t.detectCursorName(e);return n.createElement(\"img\",{className:\"cursor-selector-avatar\",style:{width:o?19:28,height:o?19:28,position:o?\"initial\":\"absolute\",borderColor:o?\"white\":r,marginRight:o?4:0},src:e.payload.avatar,alt:\"avatar\"})}return null},t.getOpacity=function(e){var r=t.getCursorName(e),o=t.detectAvatar(e);return void 0===r&&void 0===o?0:1},t.getCursorName=function(e){return e.payload&&e.payload.cursorName?e.payload.cursorName:void 0},t.getThemeClass=function(e){return e.payload&&e.payload.theme?\"cursor-inner-mellow\":\"cursor-inner\"},t.getCursorBackgroundColor=function(e){var r=t.detectCursorName(e);return e.payload&&e.payload.cursorBackgroundColor?e.payload.cursorBackgroundColor:\"rgb(\"+e.memberState.strokeColor[0]+\", \"+e.memberState.strokeColor[1]+\", \"+e.memberState.strokeColor[2]+\", \"+(r?1:0)+\")\"},t.getCursorTextColor=function(e){return e.payload&&e.payload.cursorTextColor?e.payload.cursorTextColor:\"#FFFFFF\"},t.getCursorTagBackgroundColor=function(e){return e.payload&&e.payload.cursorTagBackgroundColor?e.payload.cursorTagBackgroundColor:t.getCursorBackgroundColor(e)},t.detectCursorName=function(e){return!(!e.payload||!e.payload.cursorName)},t.detectAvatar=function(e){return!(!e.payload||!e.payload.avatar)},t.renderTag=function(e){return e.payload&&e.payload.cursorTagName?n.createElement(\"span\",{className:\"cursor-tag-name\",style:{backgroundColor:t.getCursorTagBackgroundColor(e)}},e.payload.cursorTagName):void 0},t}return D(r,e),r.prototype.render=function(){var e=this.props.roomMember,r=this.getCursorName(e);switch(e.memberState.currentApplianceName){case I.ApplianceNames.pencil:return n.createElement(\"div\",{className:\"cursor-box\"},n.createElement(\"div\",{className:\"cursor-mid cursor-pencil-offset\"},n.createElement(\"div\",{className:\"cursor-name\"},n.createElement(\"div\",{style:{opacity:this.getOpacity(e),backgroundColor:this.getCursorBackgroundColor(e),color:this.getCursorTextColor(e)},className:this.getThemeClass(e)},this.renderAvatar(e),r,this.renderTag(e))),n.createElement(\"div\",null,n.createElement(\"img\",{className:\"cursor-pencil-image\",src:i.a,alt:\"pencilCursor\"}))));case I.ApplianceNames.selector:return n.createElement(\"div\",{className:\"cursor-box\"},n.createElement(\"div\",{className:\"cursor-mid cursor-selector-offset\"},n.createElement(\"div\",null,n.createElement(\"img\",{className:\"cursor-selector-image\",src:a.a,alt:\"selectorCursor\"})),n.createElement(\"div\",{className:\"cursor-name\"},n.createElement(\"div\",{style:{opacity:this.getOpacity(e),backgroundColor:this.getCursorBackgroundColor(e),color:this.getCursorTextColor(e)},className:this.getThemeClass(e)},this.renderAvatar(e),r,this.renderTag(e)))));case I.ApplianceNames.eraser:return n.createElement(\"div\",{className:\"cursor-box\"},n.createElement(\"div\",{className:\"cursor-mid cursor-pencil-offset\"},n.createElement(\"div\",{className:\"cursor-name\"},n.createElement(\"div\",{style:{opacity:this.getOpacity(e),backgroundColor:this.getCursorBackgroundColor(e),color:this.getCursorTextColor(e)},className:this.getThemeClass(e)},this.renderAvatar(e),r,this.renderTag(e))),n.createElement(\"div\",null,n.createElement(\"img\",{className:\"cursor-pencil-image\",src:c.a,alt:\"selectorCursor\"}))));case I.ApplianceNames.text:return n.createElement(\"div\",{className:\"cursor-box\"},n.createElement(\"div\",{className:\"cursor-text-offset cursor-mid\"},n.createElement(\"div\",{className:\"cursor-name\"},n.createElement(\"div\",{style:{opacity:this.getOpacity(e),backgroundColor:this.getCursorBackgroundColor(e),color:this.getCursorTextColor(e)},className:this.getThemeClass(e)},this.renderAvatar(e),r,this.renderTag(e))),n.createElement(\"div\",null,n.createElement(\"img\",{src:l.a,alt:\"selectorCursor\"}))));default:return n.createElement(\"div\",{className:\"cursor-box\"},n.createElement(\"div\",{className:\"cursor-shape-offset cursor-mid\"},n.createElement(\"div\",{className:\"cursor-name\"},n.createElement(\"div\",{style:{opacity:this.getOpacity(e),backgroundColor:this.getCursorBackgroundColor(e),color:this.getCursorTextColor(e)},className:this.getThemeClass(e)},this.renderAvatar(e),r,this.renderTag(e))),n.createElement(\"div\",null,n.createElement(\"img\",{src:N.a,alt:\"shapeCursor\"}))))}},r}(n.Component),j=function(){function e(){this.cursors={},this.roomMembers=[],this.isFirstFrameReady=!1,this.isCursorDisappear=function(e){return!(!e.payload||!e.payload.disappearCursor)}}return e.prototype.createCursor=function(){return{x:64,y:64,width:128,height:128}},e.prototype.onAddedCursor=function(e){for(var r=0,t=this.roomMembers;r<t.length;r++){var o=t[r];if(o.memberId===e.memberId&&!this.isCursorDisappear(o)){e.setReactNode(n.createElement(C,{roomMember:o}));break}}this.cursors[e.memberId]=e},e.prototype.onRemovedCursor=function(e){delete this.cursors[e.memberId]},e.prototype.onMovingCursor=function(){},e.prototype.setRoom=function(e){var r=this;this.setColorAndAppliance(e.state.roomMembers),e.callbacks.on(\"onRoomStateChanged\",(function(e){e.roomMembers&&r.setColorAndAppliance(e.roomMembers)}))},e.prototype.setPlayer=function(e){var r=this;this.isFirstFrameReady&&this.setColorAndAppliance(e.state.roomMembers),e.callbacks.on(\"onPlayerStateChanged\",(function(e){e.roomMembers&&r.setColorAndAppliance(e.roomMembers)})),e.callbacks.on(\"onLoadFirstFrame\",(function(){r.isFirstFrameReady=!0,r.setColorAndAppliance(e.state.roomMembers)}))},e.prototype.setColorAndAppliance=function(e){this.roomMembers=e;for(var r=0,t=e;r<t.length;r++){var o=t[r],I=this.cursors[o.memberId];I&&!this.isCursorDisappear(o)&&I.setReactNode(n.createElement(C,{roomMember:o}))}},e}()},function(e,r,t){var o=t(9),n=t(10);\"string\"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,\"\"]]);var I={insert:\"head\",singleton:!1};o(n,I);e.exports=n.locals||{}},function(e,r,t){\"use strict\";var o,n=function(){return void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o},I=function(){var e={};return function(r){if(void 0===e[r]){var t=document.querySelector(r);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}e[r]=t}return e[r]}}(),g=[];function i(e){for(var r=-1,t=0;t<g.length;t++)if(g[t].identifier===e){r=t;break}return r}function M(e,r){for(var t={},o=[],n=0;n<e.length;n++){var I=e[n],M=r.base?I[0]+r.base:I[0],a=t[M]||0,s=\"\".concat(M,\" \").concat(a);t[M]=a+1;var c=i(s),A={css:I[1],media:I[2],sourceMap:I[3]};-1!==c?(g[c].references++,g[c].updater(A)):g.push({identifier:s,updater:D(A,r),references:1}),o.push(s)}return o}function a(e){var r=document.createElement(\"style\"),o=e.attributes||{};if(void 0===o.nonce){var n=t.nc;n&&(o.nonce=n)}if(Object.keys(o).forEach((function(e){r.setAttribute(e,o[e])})),\"function\"==typeof e.insert)e.insert(r);else{var g=I(e.insert||\"head\");if(!g)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");g.appendChild(r)}return r}var s,c=(s=[],function(e,r){return s[e]=r,s.filter(Boolean).join(\"\\n\")});function A(e,r,t,o){var n=t?\"\":o.media?\"@media \".concat(o.media,\" {\").concat(o.css,\"}\"):o.css;if(e.styleSheet)e.styleSheet.cssText=c(r,n);else{var I=document.createTextNode(n),g=e.childNodes;g[r]&&e.removeChild(g[r]),g.length?e.insertBefore(I,g[r]):e.appendChild(I)}}function N(e,r,t){var o=t.css,n=t.media,I=t.sourceMap;if(n?e.setAttribute(\"media\",n):e.removeAttribute(\"media\"),I&&\"undefined\"!=typeof btoa&&(o+=\"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(I)))),\" */\")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var u=null,l=0;function D(e,r){var t,o,n;if(r.singleton){var I=l++;t=u||(u=a(r)),o=A.bind(null,t,I,!1),n=A.bind(null,t,I,!0)}else t=a(r),o=N.bind(null,t,r),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)};return o(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;o(e=r)}else n()}}e.exports=function(e,r){(r=r||{}).singleton||\"boolean\"==typeof r.singleton||(r.singleton=n());var t=M(e=e||[],r);return function(e){if(e=e||[],\"[object Array]\"===Object.prototype.toString.call(e)){for(var o=0;o<t.length;o++){var n=i(t[o]);g[n].references--}for(var I=M(e,r),a=0;a<t.length;a++){var s=i(t[a]);0===g[s].references&&(g[s].updater(),g.splice(s,1))}t=I}}}},function(e,r,t){(r=t(11)(!1)).push([e.i,\".cursor-box-tool {\\n  position: absolute;\\n  z-index: 3;\\n  width: 18px;\\n  height: 18px;\\n  border-radius: 50%;\\n  margin-top: -24px;\\n  margin-left: 16px;\\n  border: 1px solid white;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n.cursor-box-tool img {\\n  width: 12px;\\n}\\n.cursor-box {\\n  color: white;\\n  padding: 4px;\\n  border-radius: 2px;\\n  width: 100%;\\n  height: 100%;\\n}\\n.cursor-pencil-image {\\n  width: 26px;\\n  height: 26px;\\n}\\n.cursor-selector-image {\\n  width: 24px;\\n  height: 24px;\\n}\\n.cursor-selector-avatar {\\n  border-radius: 50%;\\n  border-style: solid;\\n  border-width: 2px;\\n  border-color: white;\\n  margin-bottom: 2px;\\n}\\n.cursor-inner {\\n  border-radius: 4px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  flex-direction: row;\\n  padding-left: 4px;\\n  padding-right: 4px;\\n  font-size: 12px;\\n}\\n.cursor-inner-mellow {\\n  height: 32px;\\n  border-radius: 16px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  flex-direction: row;\\n  padding-left: 16px;\\n  padding-right: 16px;\\n}\\n.cursor-tag-name {\\n  font-size: 12px;\\n  margin-left: 4px;\\n  padding: 2px 8px;\\n  border-radius: 4px;\\n}\\n.cursor-mid {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n  position: absolute;\\n  width: 180px;\\n  height: 64px;\\n}\\n.cursor-pencil-offset {\\n  margin-left: -20px;\\n}\\n.cursor-selector-offset {\\n  margin-left: -22px;\\n  margin-top: 56px;\\n}\\n.cursor-text-offset {\\n  margin-left: -30px;\\n  margin-top: 18px;\\n}\\n.cursor-shape-offset {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n  position: absolute;\\n  width: 180px;\\n  height: 64px;\\n  margin-left: -30px;\\n  margin-top: 12px;\\n}\\n.cursor-name {\\n  width: 100%;\\n  height: 48px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\",\"\"]),e.exports=r},function(e,r,t){\"use strict\";e.exports=function(e){var r=[];return r.toString=function(){return this.map((function(r){var t=function(e,r){var t=e[1]||\"\",o=e[3];if(!o)return t;if(r&&\"function\"==typeof btoa){var n=(g=o,i=btoa(unescape(encodeURIComponent(JSON.stringify(g)))),M=\"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(i),\"/*# \".concat(M,\" */\")),I=o.sources.map((function(e){return\"/*# sourceURL=\".concat(o.sourceRoot||\"\").concat(e,\" */\")}));return[t].concat(I).concat([n]).join(\"\\n\")}var g,i,M;return[t].join(\"\\n\")}(r,e);return r[2]?\"@media \".concat(r[2],\" {\").concat(t,\"}\"):t})).join(\"\")},r.i=function(e,t,o){\"string\"==typeof e&&(e=[[null,e,\"\"]]);var n={};if(o)for(var I=0;I<this.length;I++){var g=this[I][0];null!=g&&(n[g]=!0)}for(var i=0;i<e.length;i++){var M=[].concat(e[i]);o&&n[M[0]]||(t&&(M[2]?M[2]=\"\".concat(t,\" and \").concat(M[2]):M[2]=t),r.push(M))}},r}}])}));\n\n//# sourceURL=webpack://whiteboard-bridge/./node_modules/@netless/cursor-tool/dist/index.js?");

/***/ }),

/***/ 97925:
/*!*******************************************************************!*\
  !*** ./node_modules/@netless/iframe-bridge/dist/iframeWrapper.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"IframeWrapper\": function() { return /* binding */ IframeWrapper; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ 67294);\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index */ 73623);\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar IframeWrapper = /** @class */ (function (_super) {\n    __extends(IframeWrapper, _super);\n    function IframeWrapper(props) {\n        var _this = _super.call(this, props) || this;\n        _this.styleDom = null;\n        _this.ref = react__WEBPACK_IMPORTED_MODULE_0__.createRef();\n        _this.state = {\n            canDisplay: true,\n            className: IframeWrapper.hiddenClass,\n        };\n        _this.injectCss();\n        _index__WEBPACK_IMPORTED_MODULE_1__.IframeBridge.emitter.on(_index__WEBPACK_IMPORTED_MODULE_1__.IframeEvents.Destory, function () {\n            _this.setState({ canDisplay: false });\n        });\n        _index__WEBPACK_IMPORTED_MODULE_1__.IframeBridge.emitter.on(_index__WEBPACK_IMPORTED_MODULE_1__.IframeEvents.StartCreate, function () {\n            _this.setState({ canDisplay: true });\n        });\n        _index__WEBPACK_IMPORTED_MODULE_1__.IframeBridge.emitter.on(_index__WEBPACK_IMPORTED_MODULE_1__.IframeEvents.DispayIframe, function () {\n            _this.setState({ className: undefined });\n        });\n        _index__WEBPACK_IMPORTED_MODULE_1__.IframeBridge.emitter.on(_index__WEBPACK_IMPORTED_MODULE_1__.IframeEvents.HideIframe, function () {\n            _this.setState({ className: IframeWrapper.hiddenClass });\n        });\n        _index__WEBPACK_IMPORTED_MODULE_1__.IframeBridge.emitter.on(_index__WEBPACK_IMPORTED_MODULE_1__.IframeEvents.GetRootRect, function () {\n            if (_this.ref.current) {\n                var parent_1 = _this.ref.current.parentElement;\n                if (parent_1) {\n                    var rect = parent_1.getBoundingClientRect();\n                    _index__WEBPACK_IMPORTED_MODULE_1__.IframeBridge.emitter.emit(_index__WEBPACK_IMPORTED_MODULE_1__.IframeEvents.ReplayRootRect, rect);\n                }\n            }\n        });\n        return _this;\n    }\n    IframeWrapper.prototype.componentDidMount = function () {\n        _index__WEBPACK_IMPORTED_MODULE_1__.IframeBridge.emitter.emit(_index__WEBPACK_IMPORTED_MODULE_1__.DomEvents.WrapperDidMount);\n    };\n    IframeWrapper.prototype.componentWillUnmount = function () {\n        var _a;\n        if (this.styleDom) {\n            (_a = this.styleDom.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(this.styleDom);\n        }\n    };\n    IframeWrapper.prototype.componentDidUpdate = function () {\n        _index__WEBPACK_IMPORTED_MODULE_1__.IframeBridge.emitter.emit(_index__WEBPACK_IMPORTED_MODULE_1__.IframeEvents.WrapperDidUpdate);\n    };\n    IframeWrapper.prototype.injectCss = function () {\n        var styleDom = document.createElement(\"style\");\n        var styleStr = \"\\n            .\" + IframeWrapper.hiddenClass + \" {\\n                display: none;\\n            }\\n        \";\n        this.styleDom = styleDom;\n        styleDom.appendChild(document.createTextNode(styleStr));\n        document.getElementsByTagName(\"head\")[0].appendChild(styleDom);\n    };\n    IframeWrapper.prototype.render = function () {\n        return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null,\n            this.props.children,\n            this.state.canDisplay && react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"iframe\", { ref: this.ref, id: _index__WEBPACK_IMPORTED_MODULE_1__.IframeBridge.kind, className: this.state.className }));\n    };\n    IframeWrapper.hiddenClass = \"netless-iframe-brdige-hidden\";\n    return IframeWrapper;\n}(react__WEBPACK_IMPORTED_MODULE_0__.Component));\n\n//# sourceMappingURL=iframeWrapper.js.map\n\n//# sourceURL=webpack://whiteboard-bridge/./node_modules/@netless/iframe-bridge/dist/iframeWrapper.js?");

/***/ }),

/***/ 73623:
/*!***********************************************************!*\
  !*** ./node_modules/@netless/iframe-bridge/dist/index.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"IframeEvents\": function() { return /* binding */ IframeEvents; },\n/* harmony export */   \"DomEvents\": function() { return /* binding */ DomEvents; },\n/* harmony export */   \"IframeBridge\": function() { return /* binding */ IframeBridge; },\n/* harmony export */   \"IframeWrapper\": function() { return /* reexport safe */ _iframeWrapper__WEBPACK_IMPORTED_MODULE_4__.IframeWrapper; }\n/* harmony export */ });\n/* harmony import */ var white_web_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! white-web-sdk */ 63314);\n/* harmony import */ var white_web_sdk__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(white_web_sdk__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var eventemitter2__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! eventemitter2 */ 56387);\n/* harmony import */ var eventemitter2__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(eventemitter2__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ 68172);\n/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash.debounce */ 91296);\n/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_debounce__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _iframeWrapper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./iframeWrapper */ 97925);\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (undefined && undefined.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\nvar IframeEvents;\n(function (IframeEvents) {\n    IframeEvents[\"Init\"] = \"Init\";\n    IframeEvents[\"AttributesUpdate\"] = \"AttributesUpdate\";\n    IframeEvents[\"SetAttributes\"] = \"SetAttributes\";\n    IframeEvents[\"RegisterMagixEvent\"] = \"RegisterMagixEvent\";\n    IframeEvents[\"RemoveMagixEvent\"] = \"RemoveMagixEvent\";\n    IframeEvents[\"RemoveAllMagixEvent\"] = \"RemoveAllMagixEvent\";\n    IframeEvents[\"RoomStateChanged\"] = \"RoomStateChanged\";\n    IframeEvents[\"DispatchMagixEvent\"] = \"DispatchMagixEvent\";\n    IframeEvents[\"ReciveMagixEvent\"] = \"ReciveMagixEvent\";\n    IframeEvents[\"NextPage\"] = \"NextPage\";\n    IframeEvents[\"PrevPage\"] = \"PrevPage\";\n    IframeEvents[\"SDKCreate\"] = \"SDKCreate\";\n    IframeEvents[\"OnCreate\"] = \"OnCreate\";\n    IframeEvents[\"SetPage\"] = \"SetPage\";\n    IframeEvents[\"GetAttributes\"] = \"GetAttributes\";\n    IframeEvents[\"Ready\"] = \"Ready\";\n    IframeEvents[\"Destory\"] = \"Destory\";\n    IframeEvents[\"StartCreate\"] = \"StartCreate\";\n    IframeEvents[\"WrapperDidUpdate\"] = \"WrapperDidUpdate\";\n    IframeEvents[\"DispayIframe\"] = \"DispayIframe\";\n    IframeEvents[\"HideIframe\"] = \"HideIframe\";\n    IframeEvents[\"GetRootRect\"] = \"GetRootRect\";\n    IframeEvents[\"ReplayRootRect\"] = \"ReplayRootRect\";\n    IframeEvents[\"PageTo\"] = \"PageTo\";\n})(IframeEvents || (IframeEvents = {}));\nvar DomEvents;\n(function (DomEvents) {\n    DomEvents[\"WrapperDidMount\"] = \"WrapperDidMount\";\n    DomEvents[\"IframeLoad\"] = \"IframeLoad\";\n})(DomEvents || (DomEvents = {}));\nvar position = \"position: absolute;\";\n// 在某些安卓机型, border-width 不为 0 时，才能正确计算 iframe 里嵌套 iframe 的大小\nvar borderWidth = \"border: 0.1px solid rgba(0,0,0,0);\";\nvar left = \"left: 0px;\";\nvar top = \"top: 0px;\";\nvar IframeBridge = /** @class */ (function (_super) {\n    __extends(IframeBridge, _super);\n    function IframeBridge(context) {\n        var _this = _super.call(this, context) || this;\n        _this.iframe = null;\n        _this.magixEventMap = new Map();\n        _this.cssList = [];\n        _this.allowAppliances = [\"clicker\"];\n        _this.rootRect = null;\n        _this.execListenIframe = lodash_debounce__WEBPACK_IMPORTED_MODULE_3___default()(function (options) {\n            _this.listenIframe(options);\n        }, 50);\n        _this.onPhaseChangedListener = function (phase) {\n            if (phase === white_web_sdk__WEBPACK_IMPORTED_MODULE_0__.PlayerPhase.Playing) {\n                _this.computedStyleAndIframeDisplay();\n            }\n        };\n        _this.stateChangeListener = function (state) {\n            _this.postMessage({ kind: IframeEvents.RoomStateChanged, payload: state });\n            if (state.cameraState) {\n                IframeBridge.emitter.emit(IframeEvents.GetRootRect);\n                _this.computedStyle(state);\n            }\n            if (state.memberState) {\n                _this.computedZindex();\n                _this.updateStyle();\n            }\n            if (state.sceneState) {\n                _this.computedIframeDisplay(state, _this.attributes);\n            }\n        };\n        IframeBridge.emitter.setMaxListeners(100);\n        IframeBridge.displayer = context.displayer;\n        IframeBridge.emitter.on(\"created\", function () {\n            IframeBridge.emitter.on(IframeEvents.ReplayRootRect, function (rect) {\n                _this.rootRect = rect;\n            });\n            _this.bridgeDisposer = (0,white_web_sdk__WEBPACK_IMPORTED_MODULE_0__.autorun)(function () {\n                var _a;\n                var attributes = _this.attributes;\n                if (attributes.url) {\n                    var iframeSrc = (_a = _this.iframe) === null || _a === void 0 ? void 0 : _a.src;\n                    if (iframeSrc && iframeSrc !== attributes.url) {\n                        _this.execListenIframe(attributes);\n                    }\n                }\n                if (attributes.displaySceneDir) {\n                    _this.computedIframeDisplay(_this.displayer.state, attributes);\n                }\n                if (attributes.width || attributes.height) {\n                    if (_this.iframe) {\n                        _this.iframe.width = attributes.width + \"px\";\n                        _this.iframe.height = attributes.height + \"px\";\n                    }\n                }\n                _this.postMessage({ kind: IframeEvents.AttributesUpdate, payload: attributes });\n            });\n        });\n        return _this;\n    }\n    IframeBridge.onCreate = function (plugin) {\n        IframeBridge.emitter.emit(IframeEvents.StartCreate);\n        var attributes = plugin.attributes;\n        if (attributes.url && attributes.height && attributes.width) {\n            if (!IframeBridge.alreadyCreate) {\n                plugin.insertByOnCreate(__assign(__assign({}, attributes), { displayer: this.displayer }));\n            }\n        }\n        IframeBridge.emitter.emit(IframeEvents.OnCreate, plugin);\n        IframeBridge.emitter.emit(\"created\");\n    };\n    IframeBridge.prototype.onDestroy = function () {\n        this._destory();\n    };\n    IframeBridge.insert = function (options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var plugin, initAttributes, instance;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        plugin = options.room.getInvisiblePlugin(IframeBridge.kind);\n                        if (plugin) {\n                            console.warn(\"plugin already inserted, can't re-insert\");\n                            return [2 /*return*/, plugin];\n                        }\n                        initAttributes = {\n                            url: options.url,\n                            width: options.width,\n                            height: options.height,\n                            displaySceneDir: options.displaySceneDir,\n                            useClicker: options.useClicker || false,\n                            useSelector: options.useSelector,\n                        };\n                        IframeBridge.alreadyCreate = true;\n                        return [4 /*yield*/, options.room.createInvisiblePlugin(IframeBridge, initAttributes)];\n                    case 1:\n                        instance = _a.sent();\n                        instance.baseInsert(options);\n                        return [2 /*return*/, instance];\n                }\n            });\n        });\n    };\n    IframeBridge.prototype.insertByOnCreate = function (options) {\n        var instance = options.displayer.getInvisiblePlugin(IframeBridge.kind);\n        instance.baseInsert(options);\n    };\n    IframeBridge.prototype.baseInsert = function (options) {\n        var _this = this;\n        var wrapperDidMountListener = function () {\n            _this.getIframe();\n            _this.listenIframe(options);\n            _this.listenDisplayerState();\n            IframeBridge.emitter.emit(IframeEvents.GetRootRect);\n        };\n        if (this.getIframe()) {\n            wrapperDidMountListener();\n        }\n        else {\n            IframeBridge.emitter.once(DomEvents.WrapperDidMount, wrapperDidMountListener);\n            IframeBridge.emitter.once(IframeEvents.WrapperDidUpdate, wrapperDidMountListener);\n        }\n        if (this.attributes.useSelector) {\n            this.allowAppliances.push(\"selector\");\n        }\n        this.computedStyle(this.displayer.state);\n        this.listenDisplayerCallbacks();\n        this.getComputedIframeStyle();\n        window.addEventListener(\"message\", this.messageListener.bind(this));\n        return this;\n    };\n    // 在某些安卓机型中会遇到 iframe 嵌套计算 bug，需要手动延迟触发一下重绘\n    IframeBridge.prototype.getComputedIframeStyle = function () {\n        var _this = this;\n        setTimeout(function () {\n            if (_this.iframe) {\n                getComputedStyle(_this.iframe);\n            }\n        }, 200);\n    };\n    IframeBridge.prototype.destroy = function () {\n        this._destory();\n        _super.prototype.destroy.call(this);\n    };\n    IframeBridge.prototype.getIframe = function () {\n        var iframe = document.getElementById(IframeBridge.kind);\n        this.iframe = iframe;\n        return iframe;\n    };\n    IframeBridge.prototype.setIframeSize = function (params) {\n        if (this.iframe) {\n            this.iframe.width = params.width + \"px\";\n            this.iframe.height = params.height + \"px\";\n            this.setAttributes({ width: params.width, height: params.height });\n        }\n    };\n    IframeBridge.prototype.scaleIframeToFit = function (animationMode) {\n        if (animationMode === void 0) { animationMode = white_web_sdk__WEBPACK_IMPORTED_MODULE_0__.AnimationMode.Immediately; }\n        if (!this.inDisplaySceneDir) {\n            return;\n        }\n        var x = -this.attributes.width / 2;\n        var y = -this.attributes.height / 2;\n        var width = this.attributes.width;\n        var height = this.attributes.height;\n        this.displayer.moveCameraToContain({\n            originX: x,\n            originY: y,\n            width: width,\n            height: height,\n            animationMode: animationMode,\n        });\n    };\n    IframeBridge.prototype.handleSetPage = function (data) {\n        if (this.isReplay) {\n            return;\n        }\n        var page = data.payload;\n        var room = this.displayer;\n        var scenes = room.entireScenes()[this.attributes.displaySceneDir];\n        if (!scenes || scenes.length !== page) {\n            var genScenes = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.times)(page, function (index) { return ({ name: String(index + 1) }); });\n            room.putScenes(this.attributes.displaySceneDir, genScenes);\n            room.setScenePath(this.attributes.displaySceneDir);\n        }\n    };\n    IframeBridge.prototype.listenIframe = function (options) {\n        var _this = this;\n        var iframe = document.getElementById(IframeBridge.kind);\n        var loadListener = function (ev) {\n            _this.postMessage({ kind: IframeEvents.Init, payload: {\n                    attributes: _this.attributes,\n                    roomState: IframeBridge.displayer.state,\n                    currentPage: _this.currentPage,\n                    observerId: _this.displayer.observerId\n                } });\n            IframeBridge.emitter.emit(DomEvents.IframeLoad, ev);\n            IframeBridge.emitter.on(IframeEvents.Ready, function () {\n                var _a;\n                _this.postMessage((_a = _this.attributes.lastEvent) === null || _a === void 0 ? void 0 : _a.payload);\n            });\n            _this.computedStyleAndIframeDisplay();\n            if ((0,white_web_sdk__WEBPACK_IMPORTED_MODULE_0__.isRoom)(_this.displayer)) {\n                var room = _this.displayer;\n                // 重新加载 iframe 会出现位置错误, 手动触发一下 scale 重新计算位置\n                room.moveCamera({\n                    scale: room.state.cameraState.scale + 0.005,\n                    animationMode: white_web_sdk__WEBPACK_IMPORTED_MODULE_0__.AnimationMode.Immediately\n                });\n            }\n        };\n        if (iframe.src) {\n            iframe.removeEventListener(\"load\", loadListener);\n        }\n        this.iframe = iframe;\n        iframe.src = options.url;\n        iframe.width = options.width + \"px\";\n        iframe.height = options.height + \"px\";\n        iframe.addEventListener(\"load\", loadListener);\n    };\n    IframeBridge.prototype.listenDisplayerState = function () {\n        if (this.isReplay) {\n            var firstPlay = false;\n            if (this.displayer._phase === white_web_sdk__WEBPACK_IMPORTED_MODULE_0__.PlayerPhase.Playing) {\n                this.computedStyleAndIframeDisplay();\n                firstPlay = true;\n            }\n            this.displayer.callbacks.on(\"onPhaseChanged\", this.onPhaseChangedListener);\n        }\n        this.computedStyleAndIframeDisplay();\n    };\n    IframeBridge.prototype.computedStyleAndIframeDisplay = function () {\n        this.computedStyle(this.displayer.state);\n        this.computedIframeDisplay(this.displayer.state, this.attributes);\n    };\n    IframeBridge.prototype.listenDisplayerCallbacks = function () {\n        this.displayer.callbacks.on(this.callbackName, this.stateChangeListener);\n    };\n    Object.defineProperty(IframeBridge.prototype, \"callbackName\", {\n        get: function () {\n            return this.isReplay ? \"onPlayerStateChanged\" : \"onRoomStateChanged\";\n        },\n        enumerable: false,\n        configurable: true\n    });\n    IframeBridge.prototype.computedStyle = function (state) {\n        var cameraState = state.cameraState;\n        if (this.iframe) {\n            var width = cameraState.width, height = cameraState.height, scale = cameraState.scale, centerX = cameraState.centerX, centerY = cameraState.centerY;\n            var rootRect = this.rootRect || { x: 0, y: 0 };\n            var transformOriginX = (width / 2) + rootRect.x + \"px\";\n            var transformOriginY = (height / 2) + rootRect.y + \"px\";\n            var transformOrigin = \"transform-origin: \" + transformOriginX + \" \" + transformOriginY + \";\";\n            var iframeXDiff = ((width - this.attributes.width) / 2) * scale;\n            var iframeYDiff = ((height - this.attributes.height) / 2) * scale;\n            var x = -(centerX * scale) + iframeXDiff;\n            var y = -(centerY * scale) + iframeYDiff;\n            var transform = \"transform: translate(\" + x + \"px,\" + y + \"px) scale(\" + scale + \", \" + scale + \");\";\n            var cssList = [position, borderWidth, top, left, transformOrigin, transform];\n            this.cssList = cssList;\n            this.computedZindex();\n            this.updateStyle();\n        }\n    };\n    IframeBridge.prototype.computedIframeDisplay = function (state, attributes) {\n        if (!state.sceneState.scenePath.startsWith(attributes.displaySceneDir)) {\n            IframeBridge.emitter.emit(IframeEvents.HideIframe);\n        }\n        else {\n            IframeBridge.emitter.emit(IframeEvents.DispayIframe);\n        }\n    };\n    IframeBridge.prototype.computedZindex = function () {\n        var zIndexString = \"z-index: -1;\";\n        var index = this.cssList.findIndex(function (css) { return css === zIndexString; });\n        if (index !== -1) {\n            this.cssList.splice(index, 1);\n        }\n        if (!this.isClicker() || this.isDisableInput) {\n            this.cssList.push(zIndexString);\n        }\n    };\n    IframeBridge.prototype.updateStyle = function () {\n        if (this.iframe) {\n            this.iframe.style.cssText = this.cssList.join(\" \");\n        }\n    };\n    IframeBridge.prototype.messageListener = function (event) {\n        if (event.origin !== this.iframeOrigin) {\n            return;\n        }\n        var data = event.data;\n        switch (data.kind) {\n            case IframeEvents.SetAttributes: {\n                this.handleSetAttributes(data);\n                break;\n            }\n            case IframeEvents.RegisterMagixEvent: {\n                this.handleRegisterMagixEvent(data);\n                break;\n            }\n            case IframeEvents.RemoveMagixEvent: {\n                this.handleRemoveMagixEvent(data);\n                break;\n            }\n            case IframeEvents.DispatchMagixEvent: {\n                this.handleDispatchMagixEvent(data);\n                break;\n            }\n            case IframeEvents.RemoveAllMagixEvent: {\n                this.handleRemoveAllMagixEvent();\n                break;\n            }\n            case IframeEvents.NextPage: {\n                this.handleNextPage();\n                break;\n            }\n            case IframeEvents.PrevPage: {\n                this.handlePrevPage();\n                break;\n            }\n            case IframeEvents.SDKCreate: {\n                this.handleSDKCreate();\n                break;\n            }\n            case IframeEvents.SetPage: {\n                this.handleSetPage(data);\n                break;\n            }\n            case IframeEvents.GetAttributes: {\n                this.handleGetAttributes();\n                break;\n            }\n            case IframeEvents.PageTo: {\n                this.handlePageTo(data);\n                break;\n            }\n            default: {\n                // console.warn(`${data.kind} not allow event.`);\n                break;\n            }\n        }\n    };\n    IframeBridge.prototype.handleSDKCreate = function () {\n        this.postMessage({ kind: IframeEvents.Init, payload: {\n                attributes: this.attributes,\n                roomState: IframeBridge.displayer.state,\n                currentPage: this.currentPage,\n                observerId: this.displayer.observerId\n            } });\n    };\n    IframeBridge.prototype.handleDispatchMagixEvent = function (data) {\n        var eventPayload = data.payload;\n        this.dispatchMagixEvent(eventPayload.event, eventPayload.payload);\n    };\n    IframeBridge.prototype.handleSetAttributes = function (data) {\n        this.setAttributes(data.payload);\n    };\n    IframeBridge.prototype.handleRegisterMagixEvent = function (data) {\n        var _this = this;\n        var eventName = data.payload;\n        var listener = function (event) {\n            if (event.authorId === _this.displayer.observerId) {\n                return;\n            }\n            _this.postMessage({ kind: IframeEvents.ReciveMagixEvent, payload: event });\n        };\n        this.magixEventMap.set(eventName, listener);\n        this.displayer.addMagixEventListener(eventName, listener);\n    };\n    IframeBridge.prototype.handleRemoveMagixEvent = function (data) {\n        var eventName = data.payload;\n        var listener = this.magixEventMap.get(eventName);\n        this.displayer.removeMagixEventListener(eventName, listener);\n    };\n    IframeBridge.prototype.handleNextPage = function () {\n        if (this.canOperation) {\n            var nextPageNum = this.currentPage + 1;\n            if (nextPageNum > this.totalPage) {\n                return;\n            }\n            this.displayer.setSceneIndex(nextPageNum - 1);\n            this.dispatchMagixEvent(IframeEvents.NextPage, {});\n        }\n    };\n    IframeBridge.prototype.handlePrevPage = function () {\n        if (this.canOperation) {\n            var prevPageNum = this.currentPage - 1;\n            if (prevPageNum < 0) {\n                return;\n            }\n            this.displayer.setSceneIndex(prevPageNum - 1);\n            this.dispatchMagixEvent(IframeEvents.PrevPage, {});\n        }\n    };\n    IframeBridge.prototype.handlePageTo = function (data) {\n        if (this.canOperation) {\n            var page = data.payload;\n            if (!Number.isSafeInteger(page) || page <= 0) {\n                return;\n            }\n            var index = page - 1;\n            this.displayer.setSceneIndex(index);\n            this.dispatchMagixEvent(IframeEvents.PageTo, index);\n        }\n    };\n    IframeBridge.prototype.handleRemoveAllMagixEvent = function () {\n        var _this = this;\n        this.magixEventMap.forEach(function (listener, event) {\n            _this.displayer.removeMagixEventListener(event, listener);\n        });\n        this.magixEventMap.clear();\n    };\n    IframeBridge.prototype.handleGetAttributes = function () {\n        this.postMessage({\n            kind: IframeEvents.GetAttributes,\n            payload: this.attributes,\n        });\n    };\n    IframeBridge.prototype.postMessage = function (message) {\n        var _a;\n        if (this.iframe) {\n            (_a = this.iframe.contentWindow) === null || _a === void 0 ? void 0 : _a.postMessage(JSON.parse(JSON.stringify(message)), \"*\");\n        }\n    };\n    IframeBridge.prototype.dispatchMagixEvent = function (event, payload) {\n        if (this.canOperation) {\n            _super.prototype.setAttributes.call(this, { lastEvent: { name: event, payload: payload } });\n            this.displayer.dispatchMagixEvent(event, payload);\n        }\n    };\n    Object.defineProperty(IframeBridge.prototype, \"currentIndex\", {\n        get: function () {\n            return this.displayer.state.sceneState.index;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(IframeBridge.prototype, \"currentPage\", {\n        get: function () {\n            return this.currentIndex + 1;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(IframeBridge.prototype, \"totalPage\", {\n        get: function () {\n            return this.displayer.state.sceneState.scenes.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(IframeBridge.prototype, \"readonly\", {\n        get: function () {\n            return !this.displayer.isWritable;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(IframeBridge.prototype, \"isReplay\", {\n        get: function () {\n            return (0,white_web_sdk__WEBPACK_IMPORTED_MODULE_0__.isPlayer)(this.displayer);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(IframeBridge.prototype, \"inDisplaySceneDir\", {\n        get: function () {\n            return this.displayer.state.sceneState.scenePath.startsWith(this.attributes.displaySceneDir);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(IframeBridge.prototype, \"canOperation\", {\n        get: function () {\n            if (this.isReplay) {\n                return false;\n            }\n            if (this.readonly) {\n                return false;\n            }\n            return this.displayer.phase === white_web_sdk__WEBPACK_IMPORTED_MODULE_0__.RoomPhase.Connected;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    IframeBridge.prototype.isClicker = function () {\n        if (this.readonly) {\n            return false;\n        }\n        var currentApplianceName = this.displayer.state.memberState.currentApplianceName;\n        return this.allowAppliances.includes(currentApplianceName);\n    };\n    Object.defineProperty(IframeBridge.prototype, \"isDisableInput\", {\n        get: function () {\n            if (\"disableDeviceInputs\" in this.displayer) {\n                return this.displayer.disableDeviceInputs;\n            }\n            else {\n                return true;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(IframeBridge.prototype, \"iframeOrigin\", {\n        get: function () {\n            if (this.iframe) {\n                var url = new URL(this.iframe.src);\n                return url.origin;\n            }\n            else {\n                return undefined;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    IframeBridge.prototype._destory = function () {\n        var _this = this;\n        window.removeEventListener(\"message\", this.messageListener);\n        this.magixEventMap.forEach(function (listener, event) {\n            _this.displayer.removeMagixEventListener(event, listener);\n        });\n        this.displayer.callbacks.off(this.callbackName, this.stateChangeListener);\n        this.displayer.callbacks.off(\"onPhaseChanged\", this.onPhaseChangedListener);\n        this.magixEventMap.clear();\n        if (this.iframe) {\n            IframeBridge.emitter.emit(IframeEvents.Destory);\n            this.iframe = null;\n            IframeBridge.alreadyCreate = false;\n        }\n        this.bridgeDisposer();\n        IframeBridge.emitter.removeAllListeners();\n    };\n    IframeBridge.kind = \"IframeBridge\";\n    IframeBridge.emitter = new eventemitter2__WEBPACK_IMPORTED_MODULE_1__.EventEmitter2();\n    IframeBridge.alreadyCreate = false;\n    return IframeBridge;\n}(white_web_sdk__WEBPACK_IMPORTED_MODULE_0__.InvisiblePlugin));\n\n\n//# sourceMappingURL=index.js.map\n\n//# sourceURL=webpack://whiteboard-bridge/./node_modules/@netless/iframe-bridge/dist/index.js?");

/***/ }),

/***/ 68172:
/*!***********************************************************!*\
  !*** ./node_modules/@netless/iframe-bridge/dist/utils.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"times\": function() { return /* binding */ times; }\n/* harmony export */ });\nvar times = function (number, iteratee) {\n    return new Array(number).fill(0).map(function (_, index) { return iteratee(index); });\n};\n//# sourceMappingURL=utils.js.map\n\n//# sourceURL=webpack://whiteboard-bridge/./node_modules/@netless/iframe-bridge/dist/utils.js?");

/***/ }),

/***/ 38298:
/*!*********************************************************************!*\
  !*** ./node_modules/@netless/synced-store/dist/synced-store.cjs.js ***!
  \*********************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* module decorator */ module = __webpack_require__.nmd(module);\nObject.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:\"Module\"}});var L=__webpack_require__(/*! white-web-sdk */ 63314);class zt{constructor(){this.listeners=new Set}get length(){return this.listeners.size}dispatch(e){this.listeners.forEach(r=>r(e))}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}}var be=typeof __webpack_require__.g==\"object\"&&__webpack_require__.g&&__webpack_require__.g.Object===Object&&__webpack_require__.g,Wt=be,we=typeof self==\"object\"&&self&&self.Object===Object&&self,Se=Wt||we||Function(\"return this\")(),T=Se,Ae=T.Symbol,m=Ae,Ht=Object.prototype,$e=Ht.hasOwnProperty,Te=Ht.toString,j=m?m.toStringTag:void 0;function Ee(t){var e=$e.call(t,j),r=t[j];try{t[j]=void 0;var n=!0}catch{}var i=Te.call(t);return n&&(e?t[j]=r:delete t[j]),i}var Oe=Object.prototype,me=Oe.toString;function Pe(t){return me.call(t)}var Ce=\"[object Null]\",Ie=\"[object Undefined]\",pt=m?m.toStringTag:void 0;function M(t){return t==null?t===void 0?Ie:Ce:pt&&pt in Object(t)?Ee(t):Pe(t)}function C(t){return t!=null&&typeof t==\"object\"}var Me=\"[object Symbol]\";function ut(t){return typeof t==\"symbol\"||C(t)&&M(t)==Me}function xe(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var Re=Array.isArray,A=Re,je=1/0,_t=m?m.prototype:void 0,vt=_t?_t.toString:void 0;function Bt(t){if(typeof t==\"string\")return t;if(A(t))return xe(t,Bt)+\"\";if(ut(t))return vt?vt.call(t):\"\";var e=t+\"\";return e==\"0\"&&1/t==-je?\"-0\":e}function y(t){var e=typeof t;return t!=null&&(e==\"object\"||e==\"function\")}function Le(t){return t}var De=\"[object AsyncFunction]\",Ne=\"[object Function]\",Ue=\"[object GeneratorFunction]\",Fe=\"[object Proxy]\";function Kt(t){if(!y(t))return!1;var e=M(t);return e==Ne||e==Ue||e==De||e==Fe}var Ge=T[\"__core-js_shared__\"],q=Ge,yt=function(){var t=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||\"\");return t?\"Symbol(src)_1.\"+t:\"\"}();function ze(t){return!!yt&&yt in t}var We=Function.prototype,He=We.toString;function x(t){if(t!=null){try{return He.call(t)}catch{}try{return t+\"\"}catch{}}return\"\"}var Be=/[\\\\^$.*+?()[\\]{}|]/g,Ke=/^\\[object .+?Constructor\\]$/,Je=Function.prototype,Ve=Object.prototype,qe=Je.toString,Ze=Ve.hasOwnProperty,Xe=RegExp(\"^\"+qe.call(Ze).replace(Be,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\");function Ye(t){if(!y(t)||ze(t))return!1;var e=Kt(t)?Xe:Ke;return e.test(x(t))}function Qe(t,e){return t==null?void 0:t[e]}function R(t,e){var r=Qe(t,e);return Ye(r)?r:void 0}var ke=R(T,\"WeakMap\"),Q=ke;function tr(){}var er=function(){try{var t=R(Object,\"defineProperty\");return t({},\"\",{}),t}catch{}}(),bt=er,rr=9007199254740991,nr=/^(?:0|[1-9]\\d*)$/;function Jt(t,e){var r=typeof t;return e=e==null?rr:e,!!e&&(r==\"number\"||r!=\"symbol\"&&nr.test(t))&&t>-1&&t%1==0&&t<e}function ir(t,e,r){e==\"__proto__\"&&bt?bt(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function Vt(t,e){return t===e||t!==t&&e!==e}var ar=9007199254740991;function ft(t){return typeof t==\"number\"&&t>-1&&t%1==0&&t<=ar}function qt(t){return t!=null&&ft(t.length)&&!Kt(t)}var sr=Object.prototype;function or(t){var e=t&&t.constructor,r=typeof e==\"function\"&&e.prototype||sr;return t===r}function ur(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var fr=\"[object Arguments]\";function wt(t){return C(t)&&M(t)==fr}var Zt=Object.prototype,lr=Zt.hasOwnProperty,cr=Zt.propertyIsEnumerable,hr=wt(function(){return arguments}())?wt:function(t){return C(t)&&lr.call(t,\"callee\")&&!cr.call(t,\"callee\")},Xt=hr;function dr(){return!1}var Yt= true&&exports&&!exports.nodeType&&exports,St=Yt&&\"object\"==\"object\"&&module&&!module.nodeType&&module,gr=St&&St.exports===Yt,At=gr?T.Buffer:void 0,pr=At?At.isBuffer:void 0,_r=pr||dr,k=_r,vr=\"[object Arguments]\",yr=\"[object Array]\",br=\"[object Boolean]\",wr=\"[object Date]\",Sr=\"[object Error]\",Ar=\"[object Function]\",$r=\"[object Map]\",Tr=\"[object Number]\",Er=\"[object Object]\",Or=\"[object RegExp]\",mr=\"[object Set]\",Pr=\"[object String]\",Cr=\"[object WeakMap]\",Ir=\"[object ArrayBuffer]\",Mr=\"[object DataView]\",xr=\"[object Float32Array]\",Rr=\"[object Float64Array]\",jr=\"[object Int8Array]\",Lr=\"[object Int16Array]\",Dr=\"[object Int32Array]\",Nr=\"[object Uint8Array]\",Ur=\"[object Uint8ClampedArray]\",Fr=\"[object Uint16Array]\",Gr=\"[object Uint32Array]\",c={};c[xr]=c[Rr]=c[jr]=c[Lr]=c[Dr]=c[Nr]=c[Ur]=c[Fr]=c[Gr]=!0;c[vr]=c[yr]=c[Ir]=c[br]=c[Mr]=c[wr]=c[Sr]=c[Ar]=c[$r]=c[Tr]=c[Er]=c[Or]=c[mr]=c[Pr]=c[Cr]=!1;function zr(t){return C(t)&&ft(t.length)&&!!c[M(t)]}function Wr(t){return function(e){return t(e)}}var Qt= true&&exports&&!exports.nodeType&&exports,D=Qt&&\"object\"==\"object\"&&module&&!module.nodeType&&module,Hr=D&&D.exports===Qt,Z=Hr&&Wt.process,Br=function(){try{var t=D&&D.require&&D.require(\"util\").types;return t||Z&&Z.binding&&Z.binding(\"util\")}catch{}}(),$t=Br,Tt=$t&&$t.isTypedArray,Kr=Tt?Wr(Tt):zr,kt=Kr,Jr=Object.prototype,Vr=Jr.hasOwnProperty;function qr(t,e){var r=A(t),n=!r&&Xt(t),i=!r&&!n&&k(t),a=!r&&!n&&!i&&kt(t),s=r||n||i||a,o=s?ur(t.length,String):[],u=o.length;for(var l in t)(e||Vr.call(t,l))&&!(s&&(l==\"length\"||i&&(l==\"offset\"||l==\"parent\")||a&&(l==\"buffer\"||l==\"byteLength\"||l==\"byteOffset\")||Jt(l,u)))&&o.push(l);return o}function Zr(t,e){return function(r){return t(e(r))}}var Xr=Zr(Object.keys,Object),Yr=Xr,Qr=Object.prototype,kr=Qr.hasOwnProperty;function te(t){if(!or(t))return Yr(t);var e=[];for(var r in Object(t))kr.call(t,r)&&r!=\"constructor\"&&e.push(r);return e}function lt(t){return qt(t)?qr(t):te(t)}var tn=/\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,en=/^\\w*$/;function ct(t,e){if(A(t))return!1;var r=typeof t;return r==\"number\"||r==\"symbol\"||r==\"boolean\"||t==null||ut(t)?!0:en.test(t)||!tn.test(t)||e!=null&&t in Object(e)}var rn=R(Object,\"create\"),N=rn;function nn(){this.__data__=N?N(null):{},this.size=0}function an(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var sn=\"__lodash_hash_undefined__\",on=Object.prototype,un=on.hasOwnProperty;function fn(t){var e=this.__data__;if(N){var r=e[t];return r===sn?void 0:r}return un.call(e,t)?e[t]:void 0}var ln=Object.prototype,cn=ln.hasOwnProperty;function hn(t){var e=this.__data__;return N?e[t]!==void 0:cn.call(e,t)}var dn=\"__lodash_hash_undefined__\";function gn(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=N&&e===void 0?dn:e,this}function I(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}I.prototype.clear=nn;I.prototype.delete=an;I.prototype.get=fn;I.prototype.has=hn;I.prototype.set=gn;function pn(){this.__data__=[],this.size=0}function K(t,e){for(var r=t.length;r--;)if(Vt(t[r][0],e))return r;return-1}var _n=Array.prototype,vn=_n.splice;function yn(t){var e=this.__data__,r=K(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():vn.call(e,r,1),--this.size,!0}function bn(t){var e=this.__data__,r=K(e,t);return r<0?void 0:e[r][1]}function wn(t){return K(this.__data__,t)>-1}function Sn(t,e){var r=this.__data__,n=K(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function E(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}E.prototype.clear=pn;E.prototype.delete=yn;E.prototype.get=bn;E.prototype.has=wn;E.prototype.set=Sn;var An=R(T,\"Map\"),U=An;function $n(){this.size=0,this.__data__={hash:new I,map:new(U||E),string:new I}}function Tn(t){var e=typeof t;return e==\"string\"||e==\"number\"||e==\"symbol\"||e==\"boolean\"?t!==\"__proto__\":t===null}function J(t,e){var r=t.__data__;return Tn(e)?r[typeof e==\"string\"?\"string\":\"hash\"]:r.map}function En(t){var e=J(this,t).delete(t);return this.size-=e?1:0,e}function On(t){return J(this,t).get(t)}function mn(t){return J(this,t).has(t)}function Pn(t,e){var r=J(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function O(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}O.prototype.clear=$n;O.prototype.delete=En;O.prototype.get=On;O.prototype.has=mn;O.prototype.set=Pn;var Cn=\"Expected a function\";function ht(t,e){if(typeof t!=\"function\"||e!=null&&typeof e!=\"function\")throw new TypeError(Cn);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var s=t.apply(this,n);return r.cache=a.set(i,s)||a,s};return r.cache=new(ht.Cache||O),r}ht.Cache=O;var In=500;function Mn(t){var e=ht(t,function(n){return r.size===In&&r.clear(),n}),r=e.cache;return e}var xn=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,Rn=/\\\\(\\\\)?/g,jn=Mn(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(\"\"),t.replace(xn,function(r,n,i,a){e.push(i?a.replace(Rn,\"$1\"):n||r)}),e}),Ln=jn;function Dn(t){return t==null?\"\":Bt(t)}function ee(t,e){return A(t)?t:ct(t,e)?[t]:Ln(Dn(t))}var Nn=1/0;function V(t){if(typeof t==\"string\"||ut(t))return t;var e=t+\"\";return e==\"0\"&&1/t==-Nn?\"-0\":e}function re(t,e){e=ee(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[V(e[r++])];return r&&r==n?t:void 0}function H(t,e,r){var n=t==null?void 0:re(t,e);return n===void 0?r:n}function Un(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var Fn=\"\\\\ud800-\\\\udfff\",Gn=\"\\\\u0300-\\\\u036f\",zn=\"\\\\ufe20-\\\\ufe2f\",Wn=\"\\\\u20d0-\\\\u20ff\",Hn=Gn+zn+Wn,Bn=\"\\\\ufe0e\\\\ufe0f\",Kn=\"\\\\u200d\",Jn=RegExp(\"[\"+Kn+Fn+Hn+Bn+\"]\");function Vn(t){return Jn.test(t)}function qn(){this.__data__=new E,this.size=0}function Zn(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function Xn(t){return this.__data__.get(t)}function Yn(t){return this.__data__.has(t)}var Qn=200;function kn(t,e){var r=this.__data__;if(r instanceof E){var n=r.__data__;if(!U||n.length<Qn-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new O(n)}return r.set(t,e),this.size=r.size,this}function $(t){var e=this.__data__=new E(t);this.size=e.size}$.prototype.clear=qn;$.prototype.delete=Zn;$.prototype.get=Xn;$.prototype.has=Yn;$.prototype.set=kn;function ti(t,e){for(var r=-1,n=t==null?0:t.length,i=0,a=[];++r<n;){var s=t[r];e(s,r,t)&&(a[i++]=s)}return a}function ei(){return[]}var ri=Object.prototype,ni=ri.propertyIsEnumerable,Et=Object.getOwnPropertySymbols,ii=Et?function(t){return t==null?[]:(t=Object(t),ti(Et(t),function(e){return ni.call(t,e)}))}:ei,ai=ii;function si(t,e,r){var n=e(t);return A(t)?n:Un(n,r(t))}function Ot(t){return si(t,lt,ai)}var oi=R(T,\"DataView\"),tt=oi,ui=R(T,\"Promise\"),et=ui,fi=R(T,\"Set\"),rt=fi,mt=\"[object Map]\",li=\"[object Object]\",Pt=\"[object Promise]\",Ct=\"[object Set]\",It=\"[object WeakMap]\",Mt=\"[object DataView]\",ci=x(tt),hi=x(U),di=x(et),gi=x(rt),pi=x(Q),P=M;(tt&&P(new tt(new ArrayBuffer(1)))!=Mt||U&&P(new U)!=mt||et&&P(et.resolve())!=Pt||rt&&P(new rt)!=Ct||Q&&P(new Q)!=It)&&(P=function(t){var e=M(t),r=e==li?t.constructor:void 0,n=r?x(r):\"\";if(n)switch(n){case ci:return Mt;case hi:return mt;case di:return Pt;case gi:return Ct;case pi:return It}return e});var nt=P,_i=T.Uint8Array,xt=_i,vi=\"__lodash_hash_undefined__\";function yi(t){return this.__data__.set(t,vi),this}function bi(t){return this.__data__.has(t)}function B(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new O;++e<r;)this.add(t[e])}B.prototype.add=B.prototype.push=yi;B.prototype.has=bi;function wi(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function Si(t,e){return t.has(e)}var Ai=1,$i=2;function ne(t,e,r,n,i,a){var s=r&Ai,o=t.length,u=e.length;if(o!=u&&!(s&&u>o))return!1;var l=a.get(t),g=a.get(e);if(l&&g)return l==e&&g==t;var h=-1,f=!0,_=r&$i?new B:void 0;for(a.set(t,e),a.set(e,t);++h<o;){var d=t[h],p=e[h];if(n)var S=s?n(p,d,h,e,t,a):n(d,p,h,t,e,a);if(S!==void 0){if(S)continue;f=!1;break}if(_){if(!wi(e,function(b,w){if(!Si(_,w)&&(d===b||i(d,b,r,n,a)))return _.push(w)})){f=!1;break}}else if(!(d===p||i(d,p,r,n,a))){f=!1;break}}return a.delete(t),a.delete(e),f}function Ti(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}function Ei(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var Oi=1,mi=2,Pi=\"[object Boolean]\",Ci=\"[object Date]\",Ii=\"[object Error]\",Mi=\"[object Map]\",xi=\"[object Number]\",Ri=\"[object RegExp]\",ji=\"[object Set]\",Li=\"[object String]\",Di=\"[object Symbol]\",Ni=\"[object ArrayBuffer]\",Ui=\"[object DataView]\",Rt=m?m.prototype:void 0,X=Rt?Rt.valueOf:void 0;function Fi(t,e,r,n,i,a,s){switch(r){case Ui:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Ni:return!(t.byteLength!=e.byteLength||!a(new xt(t),new xt(e)));case Pi:case Ci:case xi:return Vt(+t,+e);case Ii:return t.name==e.name&&t.message==e.message;case Ri:case Li:return t==e+\"\";case Mi:var o=Ti;case ji:var u=n&Oi;if(o||(o=Ei),t.size!=e.size&&!u)return!1;var l=s.get(t);if(l)return l==e;n|=mi,s.set(t,e);var g=ne(o(t),o(e),n,i,a,s);return s.delete(t),g;case Di:if(X)return X.call(t)==X.call(e)}return!1}var Gi=1,zi=Object.prototype,Wi=zi.hasOwnProperty;function Hi(t,e,r,n,i,a){var s=r&Gi,o=Ot(t),u=o.length,l=Ot(e),g=l.length;if(u!=g&&!s)return!1;for(var h=u;h--;){var f=o[h];if(!(s?f in e:Wi.call(e,f)))return!1}var _=a.get(t),d=a.get(e);if(_&&d)return _==e&&d==t;var p=!0;a.set(t,e),a.set(e,t);for(var S=s;++h<u;){f=o[h];var b=t[f],w=e[f];if(n)var gt=s?n(w,b,f,e,t,a):n(b,w,f,t,e,a);if(!(gt===void 0?b===w||i(b,w,r,n,a):gt)){p=!1;break}S||(S=f==\"constructor\")}if(p&&!S){var F=t.constructor,G=e.constructor;F!=G&&\"constructor\"in t&&\"constructor\"in e&&!(typeof F==\"function\"&&F instanceof F&&typeof G==\"function\"&&G instanceof G)&&(p=!1)}return a.delete(t),a.delete(e),p}var Bi=1,jt=\"[object Arguments]\",Lt=\"[object Array]\",z=\"[object Object]\",Ki=Object.prototype,Dt=Ki.hasOwnProperty;function Ji(t,e,r,n,i,a){var s=A(t),o=A(e),u=s?Lt:nt(t),l=o?Lt:nt(e);u=u==jt?z:u,l=l==jt?z:l;var g=u==z,h=l==z,f=u==l;if(f&&k(t)){if(!k(e))return!1;s=!0,g=!1}if(f&&!g)return a||(a=new $),s||kt(t)?ne(t,e,r,n,i,a):Fi(t,e,u,r,n,i,a);if(!(r&Bi)){var _=g&&Dt.call(t,\"__wrapped__\"),d=h&&Dt.call(e,\"__wrapped__\");if(_||d){var p=_?t.value():t,S=d?e.value():e;return a||(a=new $),i(p,S,r,n,a)}}return f?(a||(a=new $),Hi(t,e,r,n,i,a)):!1}function dt(t,e,r,n,i){return t===e?!0:t==null||e==null||!C(t)&&!C(e)?t!==t&&e!==e:Ji(t,e,r,n,dt,i)}var Vi=1,qi=2;function Zi(t,e,r,n){var i=r.length,a=i,s=!n;if(t==null)return!a;for(t=Object(t);i--;){var o=r[i];if(s&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<a;){o=r[i];var u=o[0],l=t[u],g=o[1];if(s&&o[2]){if(l===void 0&&!(u in t))return!1}else{var h=new $;if(n)var f=n(l,g,u,t,e,h);if(!(f===void 0?dt(g,l,Vi|qi,n,h):f))return!1}}return!0}function ie(t){return t===t&&!y(t)}function Xi(t){for(var e=lt(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,ie(i)]}return e}function ae(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}function Yi(t){var e=Xi(t);return e.length==1&&e[0][2]?ae(e[0][0],e[0][1]):function(r){return r===t||Zi(r,t,e)}}function Qi(t,e){return t!=null&&e in Object(t)}function se(t,e,r){e=ee(e,t);for(var n=-1,i=e.length,a=!1;++n<i;){var s=V(e[n]);if(!(a=t!=null&&r(t,s)))break;t=t[s]}return a||++n!=i?a:(i=t==null?0:t.length,!!i&&ft(i)&&Jt(s,i)&&(A(t)||Xt(t)))}function ki(t,e){return t!=null&&se(t,e,Qi)}var ta=1,ea=2;function ra(t,e){return ct(t)&&ie(e)?ae(V(t),e):function(r){var n=H(r,t);return n===void 0&&n===e?ki(r,t):dt(e,n,ta|ea)}}function oe(t){return function(e){return e==null?void 0:e[t]}}function na(t){return function(e){return re(e,t)}}function ia(t){return ct(t)?oe(V(t)):na(t)}function aa(t){return typeof t==\"function\"?t:t==null?Le:typeof t==\"object\"?A(t)?ra(t[0],t[1]):Yi(t):ia(t)}function sa(t){return function(e,r,n){for(var i=-1,a=Object(e),s=n(e),o=s.length;o--;){var u=s[t?o:++i];if(r(a[u],u,a)===!1)break}return e}}var oa=sa(),ua=oa;function fa(t,e){return t&&ua(t,e,lt)}var la=Object.prototype,ca=la.hasOwnProperty;function ha(t,e){return t!=null&&ca.call(t,e)}function it(t,e){return t!=null&&se(t,e,ha)}var da=\"[object String]\";function ga(t){return typeof t==\"string\"||!A(t)&&C(t)&&M(t)==da}function pa(t,e){var r={};return e=aa(e),fa(t,function(n,i,a){ir(r,i,e(n,i,a))}),r}var _a=oe(\"length\"),va=_a,ue=\"\\\\ud800-\\\\udfff\",ya=\"\\\\u0300-\\\\u036f\",ba=\"\\\\ufe20-\\\\ufe2f\",wa=\"\\\\u20d0-\\\\u20ff\",Sa=ya+ba+wa,Aa=\"\\\\ufe0e\\\\ufe0f\",$a=\"[\"+ue+\"]\",at=\"[\"+Sa+\"]\",st=\"\\\\ud83c[\\\\udffb-\\\\udfff]\",Ta=\"(?:\"+at+\"|\"+st+\")\",fe=\"[^\"+ue+\"]\",le=\"(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}\",ce=\"[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]\",Ea=\"\\\\u200d\",he=Ta+\"?\",de=\"[\"+Aa+\"]?\",Oa=\"(?:\"+Ea+\"(?:\"+[fe,le,ce].join(\"|\")+\")\"+de+he+\")*\",ma=de+he+Oa,Pa=\"(?:\"+[fe+at+\"?\",at,le,ce,$a].join(\"|\")+\")\",Nt=RegExp(st+\"(?=\"+st+\")|\"+Pa+ma,\"g\");function Ca(t){for(var e=Nt.lastIndex=0;Nt.test(t);)++e;return e}function Ia(t){return Vn(t)?Ca(t):va(t)}var Ma=\"[object Map]\",xa=\"[object Set]\";function Ra(t){if(t==null)return 0;if(qt(t))return ga(t)?Ia(t):t.length;var e=nt(t);return e==Ma||e==xa?t.size:te(t).length}const ge=\"!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\",ja=ge.length,Ut=Array(20),pe=()=>{for(let t=0;t<20;t++)Ut[t]=ge.charAt(Math.random()*ja);return Ut.join(\"\")};function Ft(t){try{return t()}catch(e){console.error(e)}}class La{constructor(){this.disposers=new Map}addDisposer(e,r=this.genUID()){return this.flush(r),this.disposers.set(r,Array.isArray(e)?()=>e.forEach(Ft):e),r}add(e,r=this.genUID()){return this.addDisposer(e(),r)}addEventListener(e,r,n,i,a=this.genUID()){return e.addEventListener(r,n,i),this.addDisposer(()=>e.removeEventListener(r,n,i),a),a}setTimeout(e,r,n=this.genUID()){const i=window.setTimeout(()=>{this.remove(n),e()},r);return this.addDisposer(()=>window.clearTimeout(i),n)}setInterval(e,r,n=this.genUID()){const i=window.setInterval(e,r);return this.addDisposer(()=>window.clearInterval(i),n)}remove(e){const r=this.disposers.get(e);return this.disposers.delete(e),r}flush(e){const r=this.remove(e);if(r)try{r()}catch(n){console.error(n)}}flushAll(){this.disposers.forEach(Ft),this.disposers.clear()}genUID(){let e;do e=pe();while(this.disposers.has(e));return e}}const Y=Object.keys;function Gt(t){return Boolean(it(t,\"__isRef\"))}function Da(t){return{k:pe(),v:t,__isRef:!0}}const Na=(t,e,r)=>{let n=null;const i=L.reaction(t,()=>{n&&(n(),n=null);const a=t();y(a)?(n=()=>L.unlistenUpdated(a,e),L.listenUpdated(a,e)):r==null||r(a)},{fireImmediately:!0});return()=>{n==null||n(),i()}},v=\"_WM-STORAGE_\",_e=\"_WM-MAIN-STORAGE_\";class ve{constructor(e,r,n){var s;if(this._sideEffect=new La,this._destroyed=!1,this._refMap=new WeakMap,this._lastValue=new Map,this.onStateChanged=new zt,n&&!y(n))throw new Error(`Default state for Storage ${r} is not an object.`);this._context=e,this.id=typeof r==\"undefined\"?_e:r,this._state={};const i=this.id===null?(s=this._context.attributes)!=null?s:this._state:H(this._context.attributes,[v,this.id],this._state);this.isWritable&&(this.id===null?n&&this.ensureState(n):(i===this._state||!y(i))&&(H(this._context.attributes,[v])||this._context.updateAttributes([v],{}),this._context.updateAttributes([v,this.id],this._state),n&&this.setState(n))),Y(i).forEach(o=>{if(!(this.id===null&&o===v))try{const u=y(i[o])?JSON.parse(JSON.stringify(i[o])):i[o];Gt(u)?(this._state[o]=u.v,y(u.v)&&this._refMap.set(u.v,u)):this._state[o]=u}catch(u){this._context._logError(u)}});const a=o=>{var u;if(this._destroyed){this._context._logError(new Error(`Cannot call _updateProperties on destroyed Storage \"${this.id}\".`));return}if(o.length>0){const l={};for(let g=0;g<o.length;g++)try{const h=o[g],f=h.key;if(this.id===null&&f===v)continue;const _=y(h.value)?JSON.parse(JSON.stringify(h.value)):h.value;let d;switch(this._lastValue.has(f)&&(d=this._lastValue.get(f),this._lastValue.delete(f)),h.kind){case 2:{it(this._state,f)&&(d=this._state[f],delete this._state[f]),l[f]={oldValue:d};break}default:{let p=_;if(Gt(_)){const{k:S,v:b}=_,w=this._state[f];y(w)&&((u=this._refMap.get(w))==null?void 0:u.k)===S?p=w:(p=b,y(b)&&this._refMap.set(b,_))}p!==this._state[f]&&(d=this._state[f],this._state[f]=p),l[f]={newValue:p,oldValue:d};break}}}catch(h){this._context._logError(h)}this.onStateChanged.dispatch(l)}};this._sideEffect.addDisposer(Na(()=>this.id===null?e.attributes:H(e.attributes,[v,this.id]),a,this.destroy.bind(this)))}get isWritable(){return this._context.isWritable}get state(){return this._destroyed&&console.warn(`Accessing state on destroyed Storage \"${this.id}\"`),this._state}addStateChangedListener(e){return this.onStateChanged.addListener(e),()=>this.onStateChanged.removeListener(e)}ensureState(e){return this.setState(Y(e).reduce((r,n)=>(it(this._state,n)||(r[n]=e[n]),r),{}))}setState(e){if(this._destroyed){this._context._logError(new Error(`Cannot call setState on destroyed Storage \"${this.id}\".`));return}if(!this.isWritable){this._context._logError(new Error(`Cannot setState on Storage \"${this.id}\" without writable access`),e);return}const r=Y(e);r.length>0&&r.forEach(n=>{const i=e[n];if(i===this._state[n])return;let a=i;if(i===void 0)this._lastValue.set(n,this._state[n]),delete this._state[n];else if(this._lastValue.set(n,this._state[n]),this._state[n]=i,y(i)){let s=this._refMap.get(i);s||(s=Da(i),this._refMap.set(i,s)),a=s}if(this.id===null){if(n===v)throw new Error(`Cannot set attribute on internal field \"${v}\"`);this._context.updateAttributes([n],a)}else this._context.updateAttributes([v,this.id,n],a)})}emptyStorage(){if(!(Ra(this._state)<=0)){if(this._destroyed){this._context._logError(new Error(`Cannot empty destroyed Storage \"${this.id}\".`));return}if(!this._context.attributes){this._context._logError(new Error(`Cannot empty Storage \"${this.id}\" without writable access.`));return}this.setState(pa(this._state,tr))}}deleteStorage(){if(this.id===null)throw new Error(\"Cannot delete main Storage\");if(!this._context.attributes){this._context._logError(new Error(`Cannot delete Storage \"${this.id}\" without writable access.`));return}this.destroy(),this.isWritable&&this._context.updateAttributes([v,this.id],void 0)}get destroyed(){return this._destroyed}destroy(){this._destroyed=!0,this.onStateChanged.listeners.clear(),this._sideEffect.flushAll()}}const W=L.isRoom,ot=class extends L.InvisiblePlugin{constructor(t){super(t),this.errorLog=!0}static async init(t){let e=t.getInvisiblePlugin(ot.kind);if(!e)if(W(t)){if(!t.isWritable)throw new Error(\"room is not writable\");e=await t.createInvisiblePlugin(ot,{})}else throw new Error(\"No SyncedStore Plugin\");return e}connectStorage(t=null,e){return new ve(this,t,e)}get isWritable(){return W(this.displayer)&&this.displayer.isWritable}async setWritable(t){W(this.displayer)?await this.displayer.setWritable(t):this._logError(new Error(\"SyncedStore: cannot set writable on replay mode\"))}addWritableChangedListener(t){const e=r=>t(!r);return this.displayer.callbacks.on(\"onEnableWriteNowChanged\",e),()=>this.displayer.callbacks.off(\"onEnableWriteNowChanged\",e)}dispatchEvent(t,e){if(!!W(this.displayer)){if(!this.displayer.isWritable){this._logError(new Error(`SyncedStore: ${t} event can't be dispatched without writable access`));return}return this.displayer.dispatchMagixEvent(t,e)}}addEventListener(t,e,r){return this.displayer.addMagixEventListener(t,e,r),()=>this.displayer.removeMagixEventListener(t,e)}removeEventListener(t,e){return this.displayer.removeMagixEventListener(t,e)}_logError(...t){this.errorLog&&console.error(...t)}};let ye=ot;ye.kind=\"SyncedStore\";exports.MAIN_STORAGE=_e;exports.STORAGE_NS=v;exports.Storage=ve;exports.StorageEvent=zt;exports.SyncedStore=ye;\n//# sourceMappingURL=synced-store.cjs.js.map\n\n\n//# sourceURL=webpack://whiteboard-bridge/./node_modules/@netless/synced-store/dist/synced-store.cjs.js?");

/***/ }),

/***/ 77024:
/*!*************************************************************!*\
  !*** ./node_modules/@netless/video-js-plugin/dist/index.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __markAsModule = (target) => __defProp(target, \"__esModule\", { value: true });\nvar __export = (target, all) => {\n  __markAsModule(target);\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __reExport = (target, module2, desc) => {\n  if (module2 && typeof module2 === \"object\" || typeof module2 === \"function\") {\n    for (let key of __getOwnPropNames(module2))\n      if (!__hasOwnProp.call(target, key) && key !== \"default\")\n        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });\n  }\n  return target;\n};\nvar __toModule = (module2) => {\n  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, \"default\", module2 && module2.__esModule && \"default\" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);\n};\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n// src/index.ts\n__export(exports, {\n  PluginId: () => PluginId,\n  Version: () => Version,\n  videoJsPlugin: () => videoJsPlugin\n});\n\n// src/components/VideoJsPlugin.tsx\nvar import_react4 = __toModule(__webpack_require__(/*! react */ 67294));\nvar import_video = __toModule(__webpack_require__(/*! video.js */ 87017));\nvar import_white_web_sdk = __toModule(__webpack_require__(/*! white-web-sdk */ 63314));\n\n// package.json\nvar version = \"0.3.8\";\n\n// src/constants.ts\nvar Version = version;\nvar PluginId = \"video.js\";\n\n// src/options.ts\nvar defaultOptions = {\n  currentTimeMaxError: 1,\n  syncInterval: 500,\n  retryInterval: 15e3\n};\nvar options = defaultOptions;\nfunction setOptions(userDefined) {\n  options = { ...defaultOptions, ...userDefined };\n}\n\n// src/utils.ts\nfunction checkWhiteWebSdkVersion(room) {\n  if (!room.calibrationTimestamp) {\n    throw new Error(`@netless/video-js-plugin@${Version} requires white-web-sdk@^2.13.8 to work properly.`);\n  }\n}\nfunction nextFrame() {\n  return new Promise((r) => (window.requestAnimationFrame || window.setTimeout)(r));\n}\nfunction getCurrentTime(attributes, props) {\n  if (attributes.paused) {\n    return attributes.currentTime;\n  }\n  const now2 = getTimestamp(props);\n  if (now2) {\n    return attributes.currentTime + (now2 - attributes.hostTime) / 1e3;\n  } else {\n    return attributes.currentTime;\n  }\n}\nfunction getTimestamp(props) {\n  if (props.player) {\n    return props.player.beginTimestamp + props.plugin.playerTimestamp;\n  }\n  if (props.room) {\n    return props.room.calibrationTimestamp;\n  }\n}\nvar isSafari = navigator.userAgent.includes(\"Safari\");\n\n// node_modules/lodash-es/_freeGlobal.js\nvar freeGlobal = typeof __webpack_require__.g == \"object\" && __webpack_require__.g && __webpack_require__.g.Object === Object && __webpack_require__.g;\nvar freeGlobal_default = freeGlobal;\n\n// node_modules/lodash-es/_root.js\nvar freeSelf = typeof self == \"object\" && self && self.Object === Object && self;\nvar root = freeGlobal_default || freeSelf || Function(\"return this\")();\nvar root_default = root;\n\n// node_modules/lodash-es/_Symbol.js\nvar Symbol = root_default.Symbol;\nvar Symbol_default = Symbol;\n\n// node_modules/lodash-es/_getRawTag.js\nvar objectProto = Object.prototype;\nvar hasOwnProperty = objectProto.hasOwnProperty;\nvar nativeObjectToString = objectProto.toString;\nvar symToStringTag = Symbol_default ? Symbol_default.toStringTag : void 0;\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag), tag = value[symToStringTag];\n  try {\n    value[symToStringTag] = void 0;\n    var unmasked = true;\n  } catch (e) {\n  }\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\nvar getRawTag_default = getRawTag;\n\n// node_modules/lodash-es/_objectToString.js\nvar objectProto2 = Object.prototype;\nvar nativeObjectToString2 = objectProto2.toString;\nfunction objectToString(value) {\n  return nativeObjectToString2.call(value);\n}\nvar objectToString_default = objectToString;\n\n// node_modules/lodash-es/_baseGetTag.js\nvar nullTag = \"[object Null]\";\nvar undefinedTag = \"[object Undefined]\";\nvar symToStringTag2 = Symbol_default ? Symbol_default.toStringTag : void 0;\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === void 0 ? undefinedTag : nullTag;\n  }\n  return symToStringTag2 && symToStringTag2 in Object(value) ? getRawTag_default(value) : objectToString_default(value);\n}\nvar baseGetTag_default = baseGetTag;\n\n// node_modules/lodash-es/isObjectLike.js\nfunction isObjectLike(value) {\n  return value != null && typeof value == \"object\";\n}\nvar isObjectLike_default = isObjectLike;\n\n// node_modules/lodash-es/isSymbol.js\nvar symbolTag = \"[object Symbol]\";\nfunction isSymbol(value) {\n  return typeof value == \"symbol\" || isObjectLike_default(value) && baseGetTag_default(value) == symbolTag;\n}\nvar isSymbol_default = isSymbol;\n\n// node_modules/lodash-es/_trimmedEndIndex.js\nvar reWhitespace = /\\s/;\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n  while (index-- && reWhitespace.test(string.charAt(index))) {\n  }\n  return index;\n}\nvar trimmedEndIndex_default = trimmedEndIndex;\n\n// node_modules/lodash-es/_baseTrim.js\nvar reTrimStart = /^\\s+/;\nfunction baseTrim(string) {\n  return string ? string.slice(0, trimmedEndIndex_default(string) + 1).replace(reTrimStart, \"\") : string;\n}\nvar baseTrim_default = baseTrim;\n\n// node_modules/lodash-es/isObject.js\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == \"object\" || type == \"function\");\n}\nvar isObject_default = isObject;\n\n// node_modules/lodash-es/toNumber.js\nvar NAN = 0 / 0;\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\nvar reIsBinary = /^0b[01]+$/i;\nvar reIsOctal = /^0o[0-7]+$/i;\nvar freeParseInt = parseInt;\nfunction toNumber(value) {\n  if (typeof value == \"number\") {\n    return value;\n  }\n  if (isSymbol_default(value)) {\n    return NAN;\n  }\n  if (isObject_default(value)) {\n    var other = typeof value.valueOf == \"function\" ? value.valueOf() : value;\n    value = isObject_default(other) ? other + \"\" : other;\n  }\n  if (typeof value != \"string\") {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim_default(value);\n  var isBinary = reIsBinary.test(value);\n  return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;\n}\nvar toNumber_default = toNumber;\n\n// node_modules/lodash-es/now.js\nvar now = function() {\n  return root_default.Date.now();\n};\nvar now_default = now;\n\n// node_modules/lodash-es/debounce.js\nvar FUNC_ERROR_TEXT = \"Expected a function\";\nvar nativeMax = Math.max;\nvar nativeMin = Math.min;\nfunction debounce(func, wait, options2) {\n  var lastArgs, lastThis, maxWait, result, timerId, lastCallTime, lastInvokeTime = 0, leading = false, maxing = false, trailing = true;\n  if (typeof func != \"function\") {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber_default(wait) || 0;\n  if (isObject_default(options2)) {\n    leading = !!options2.leading;\n    maxing = \"maxWait\" in options2;\n    maxWait = maxing ? nativeMax(toNumber_default(options2.maxWait) || 0, wait) : maxWait;\n    trailing = \"trailing\" in options2 ? !!options2.trailing : trailing;\n  }\n  function invokeFunc(time) {\n    var args = lastArgs, thisArg = lastThis;\n    lastArgs = lastThis = void 0;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n  function leadingEdge(time) {\n    lastInvokeTime = time;\n    timerId = setTimeout(timerExpired, wait);\n    return leading ? invokeFunc(time) : result;\n  }\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime, timeSinceLastInvoke = time - lastInvokeTime, timeWaiting = wait - timeSinceLastCall;\n    return maxing ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke) : timeWaiting;\n  }\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime, timeSinceLastInvoke = time - lastInvokeTime;\n    return lastCallTime === void 0 || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;\n  }\n  function timerExpired() {\n    var time = now_default();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n  function trailingEdge(time) {\n    timerId = void 0;\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = void 0;\n    return result;\n  }\n  function cancel() {\n    if (timerId !== void 0) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = void 0;\n  }\n  function flush() {\n    return timerId === void 0 ? result : trailingEdge(now_default());\n  }\n  function debounced() {\n    var time = now_default(), isInvoking = shouldInvoke(time);\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n    if (isInvoking) {\n      if (timerId === void 0) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === void 0) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\nvar debounce_default = debounce;\n\n// src/components/PlayerController.tsx\nvar import_react2 = __toModule(__webpack_require__(/*! react */ 67294));\n\n// svgo:src/components/icons/video_pause.svg\nvar video_pause_default = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBmaWxsLW9wYWNpdHk9Ii4wMSIgZD0iTTAgMGgyMnYyMkgweiIvPjxyZWN0IHg9IjciIHk9IjYiIHdpZHRoPSIyIiBoZWlnaHQ9IjEwIiByeD0iMSIvPjxyZWN0IHg9IjEzIiB5PSI2IiB3aWR0aD0iMiIgaGVpZ2h0PSIxMCIgcng9IjEiLz48L2c+PC9zdmc+\";\n\n// svgo:src/components/icons/video_play.svg\nvar video_play_default = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBmaWxsLW9wYWNpdHk9Ii4wMSIgZD0iTTAgMGgyMnYyMkgweiIvPjxwYXRoIGQ9Im03LjUxNCA1LjkwOSA3LjA1NyA0LjIzNGExIDEgMCAwIDEgMCAxLjcxNGwtNy4wNTcgNC4yMzRBMSAxIDAgMCAxIDYgMTUuMjM0VjYuNzY2YTEgMSAwIDAgMSAxLjUxNC0uODU3eiIvPjwvZz48L3N2Zz4=\";\n\n// svgo:src/components/icons/volume0.svg\nvar volume0_default = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNNy4wOCA4LjQ0NUg1YS45NjIuOTYyIDAgMCAwLTEgLjkyNHYzLjkwN2EuOTYzLjk2MyAwIDAgMCAuOTYuOTY2bC4wNDYtLjAwMWgyLjAxbDMuMjI3IDIuMjc0Yy41MDIuMzQ0LjkzMi4xMzguOTMyLS4zNDVWNi41MTZjLS4wMDQtLjQ4My0uNDM2LS42OS0uODY2LS4zNDVMNy4wOCA4LjQ0NXoiLz48cGF0aCBmaWxsLW9wYWNpdHk9Ii4wMSIgZD0iTTAgMGgyMnYyMkgweiIvPjwvZz48L3N2Zz4=\";\n\n// svgo:src/components/icons/volume1.svg\nvar volume1_default = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNNy4wOCA4LjQ0NUg1YS45NjIuOTYyIDAgMCAwLTEgLjkyNHYzLjkwN2EuOTYzLjk2MyAwIDAgMCAuOTYuOTY2bC4wNDYtLjAwMWgyLjAxbDMuMjI3IDIuMjc0Yy41MDIuMzQ0LjkzMi4xMzguOTMyLS4zNDVWNi41MTZjLS4wMDQtLjQ4My0uNDM2LS42OS0uODY2LS4zNDVMNy4wOCA4LjQ0NXptNS43NDUgNC40MTNhLjU3Ni41NzYgMCAwIDAgMCAuODk4LjgwNS44MDUgMCAwIDAgMS4wNzggMCAyLjk0MyAyLjk0MyAwIDAgMC0uMDA0LTQuNTVoLjAwNGEuODA1LjgwNSAwIDAgMC0xLjA3OCAwIC41NzYuNTc2IDAgMCAwIDAgLjg5NiAxLjc5NCAxLjc5NCAwIDAgMSAwIDIuNzU2eiIvPjxwYXRoIGZpbGwtb3BhY2l0eT0iLjAxIiBkPSJNMCAwaDIydjIySDB6Ii8+PC9nPjwvc3ZnPg==\";\n\n// svgo:src/components/icons/volume2.svg\nvar volume2_default = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNNy4wOCA4LjQ0NUg1YS45NjIuOTYyIDAgMCAwLTEgLjkyNHYzLjkwN2EuOTYzLjk2MyAwIDAgMCAuOTYuOTY2bC4wNDYtLjAwMWgyLjAxbDMuMjI3IDIuMjc0Yy41MDIuMzQ0LjkzMi4xMzguOTMyLS4zNDVWNi41MTZjLS4wMDQtLjQ4My0uNDM2LS42OS0uODY2LS4zNDVMNy4wOCA4LjQ0NXptNS43NDUgNC40MTNhLjU3Ni41NzYgMCAwIDAgMCAuODk4LjgwNS44MDUgMCAwIDAgMS4wNzggMCAyLjk0MyAyLjk0MyAwIDAgMC0uMDA0LTQuNTVoLjAwNGEuODA1LjgwNSAwIDAgMC0xLjA3OCAwIC41NzYuNTc2IDAgMCAwIDAgLjg5NiAxLjc5NCAxLjc5NCAwIDAgMSAwIDIuNzU2eiIvPjxwYXRoIGQ9Ik0xNC45MDYgNy40MTJhLjU3Ni41NzYgMCAwIDAgMCAuODk4IDQuMDcyIDQuMDcyIDAgMCAxIDAgNi40MTIuNTc2LjU3NiAwIDAgMCAwIC44OTYuODAzLjgwMyAwIDAgMCAxLjA3NiAwIDUuMjIzIDUuMjIzIDAgMCAwLS4wMDMtOC4yMDhoLjAwM2EuODA0LjgwNCAwIDAgMC0xLjA3Ni4wMDJ6Ii8+PHBhdGggZmlsbC1vcGFjaXR5PSIuMDEiIGQ9Ik0wIDBoMjJ2MjJIMHoiLz48L2c+PC9zdmc+\";\n\n// style-helper:__style_helper__\nfunction injectStyle(text) {\n  var style = document.createElement(\"style\");\n  var node = document.createTextNode(text);\n  style.appendChild(node);\n  document.head.appendChild(style);\n}\n\n// style-content:src/components/PlayerController.css\nvar PlayerController_default = \".vjs-p .player-controller{position:absolute;z-index:100;bottom:0px;left:0;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:stretch;height:64px;background-image:linear-gradient(0deg,#000,transparent);transition:opacity .2s}.vjs-p .player-menu-box{display:flex;align-items:center;justify-content:center;flex-direction:column;margin-bottom:40px}.vjs-p .player-menu-cell{width:100%;text-align:center;font-size:12px;color:#7a7b7c}.vjs-p .player-multiple-play{width:64px;height:120px}.vjs-p .player-controller-actions-left{display:flex;justify-content:center;align-items:center;flex-shrink:0}.vjs-p .player-right-box{font-size:14px;color:#7a7b7c;cursor:pointer;margin-right:12px}.vjs-p .player-controller-actions{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-left:8px;padding-right:8px;margin-top:2px}.vjs-p .player-mid-box-time{font-size:9px;display:flex;justify-content:center;align-items:center;color:#fff;flex-shrink:0;margin-right:8px;font-family:monospace}.vjs-p .player-controller-play{display:flex;align-items:center;justify-content:center;cursor:pointer;padding-right:4px}.vjs-p .player-controller-progress{width:calc(100% - 28px);margin-left:14px;display:flex;align-items:center;justify-content:center;margin-top:8px}.vjs-p .player-volume{display:flex;align-items:center;justify-content:center;cursor:pointer;margin-right:16px;margin-left:16px}.vjs-p .player-volume-slider{width:60px;margin-right:12px;display:flex;align-items:center}.vjs-p .player-volume-box{display:flex;flex-direction:row}\\n\";\n\n// style-stub:src/components/PlayerController.css\ninjectStyle(PlayerController_default);\n\n// src/components/SeekSlider.tsx\nvar import_react = __toModule(__webpack_require__(/*! react */ 67294));\n\n// style-content:src/components/SeekSlider.css\nvar SeekSlider_default = \".vjs-p .seek-slider{position:relative;width:100%}.vjs-p .seek-slider:focus{outline:none}.vjs-p .seek-slider .track{padding:10px 0;cursor:pointer;outline:none}.vjs-p .seek-slider .track:focus{border:0;outline:none}.vjs-p .seek-slider .track .main{width:100%;height:3px;background-color:#ffffff4d;border-radius:30px;position:absolute;left:0;top:8.5px;transition:transform .4s;outline:none}.vjs-p .seek-slider .track .main:focus{border:0;outline:none}.vjs-p .seek-slider .track .main .buffered{position:absolute;background-color:#ffffff4d;width:100%;height:100%;transform:scaleX(.8);z-index:2;transform-origin:0 0}.vjs-p .seek-slider .track .main .seek-hover{position:absolute;background-color:#ffffff80;width:100%;height:100%;z-index:1;transform:scaleX(.6);transform-origin:0 0;opacity:0;transition:opacity .4s}.vjs-p .seek-slider .track .main .connect{position:absolute;background-color:#fff;width:100%;height:100%;z-index:3;left:0;transform:scaleX(.13);transform-origin:0 0}.vjs-p .seek-slider .track.active .main{transform:scaleY(2)}.vjs-p .seek-slider .thumb{pointer-events:none;position:absolute;width:12px;height:12px;left:-6px;top:4px;z-index:4;transform:translate(100px)}.vjs-p .seek-slider .thumb .handler{border-radius:100%;width:100%;height:100%;background-color:#fff;opacity:0;transform:scale(.4);cursor:pointer;transition:transform .2s;pointer-events:none}.vjs-p .seek-slider .thumb.active .handler{opacity:1;transform:scale(1)}.vjs-p .seek-slider .hover-time{position:absolute;background-color:#0000004d;line-height:18px;font-size:16px;color:#ddd;top:-25px;left:0;padding:5px 10px;border-radius:5px;box-shadow:0 0 5px #0000004d;opacity:0;transform:translate(150px);pointer-events:none}.vjs-p .seek-slider .hover-time.active{opacity:1}.vjs-p .seek-slider:hover .track .main .seek-hover{opacity:1}\\n\";\n\n// style-stub:src/components/SeekSlider.css\ninjectStyle(SeekSlider_default);\n\n// src/components/SeekSlider.tsx\nvar SeekSlider = class extends import_react.Component {\n  constructor(props) {\n    super(props);\n    __publicField(this, \"seeking\", false);\n    __publicField(this, \"mobileSeeking\", false);\n    __publicField(this, \"track\", null);\n    __publicField(this, \"hoverTime\", null);\n    __publicField(this, \"offset\", 0);\n    __publicField(this, \"secondsPrefix\", \"00:00:\");\n    __publicField(this, \"minutesPrefix\", \"00:\");\n    __publicField(this, \"seekPause\", false);\n    __publicField(this, \"handleTouchSeeking\", (event) => {\n      let pageX = 0;\n      for (let i = 0; i < event.changedTouches.length; i++) {\n        pageX = event.changedTouches[i].pageX;\n      }\n      pageX = pageX < 0 ? 0 : pageX;\n      if (this.mobileSeeking) {\n        this.changeCurrentTimePosition(pageX);\n      }\n    });\n    __publicField(this, \"handleSeeking\", (evt) => {\n      if (this.seeking) {\n        this.changeCurrentTimePosition(evt.pageX);\n      }\n    });\n    __publicField(this, \"setTrackWidthState\", () => {\n      if (this.track) {\n        this.setState({ trackWidth: this.track.offsetWidth });\n      }\n    });\n    __publicField(this, \"handleTrackHover\", (clear, evt) => {\n      if (this.track) {\n        const scale = this.props.scale || 1;\n        let position;\n        if (clear) {\n          position = 0;\n        } else {\n          position = (evt.pageX - this.track.getBoundingClientRect().left) / scale;\n        }\n        this.setState({ seekHoverPosition: position, trackWidth: this.track.offsetWidth });\n      }\n    });\n    __publicField(this, \"mouseSeekingHandler\", (event) => {\n      this.setSeeking(false, event);\n      this.onMouseUp();\n    });\n    __publicField(this, \"setSeeking\", (state, evt) => {\n      evt.preventDefault();\n      this.handleSeeking(evt);\n      this.seeking = state;\n      this.setState({ seekHoverPosition: !state ? 0 : this.state.seekHoverPosition });\n    });\n    __publicField(this, \"mobileTouchSeekingHandler\", () => {\n      this.setMobileSeeking(false);\n    });\n    __publicField(this, \"setMobileSeeking\", (state) => {\n      this.mobileSeeking = state;\n      this.setState({ seekHoverPosition: !state ? 0 : this.state.seekHoverPosition });\n    });\n    __publicField(this, \"renderBufferProgress\", () => {\n      if (this.props.buffered) {\n        const style = {\n          ...this.getPositionStyle(this.props.buffered),\n          ...this.props.bufferColor && { backgroundColor: this.props.bufferColor }\n        };\n        return /* @__PURE__ */ import_react.default.createElement(\"div\", {\n          className: \"buffered\",\n          style\n        });\n      } else {\n        return null;\n      }\n    });\n    __publicField(this, \"renderProgress\", () => {\n      const style = {\n        ...this.getPositionStyle(this.props.current),\n        ...this.props.sliderColor && { backgroundColor: this.props.sliderColor }\n      };\n      return /* @__PURE__ */ import_react.default.createElement(\"div\", {\n        className: \"connect\",\n        style\n      });\n    });\n    __publicField(this, \"renderHoverProgress\", () => {\n      const style = {\n        ...this.getSeekHoverPosition(),\n        ...this.props.sliderHoverColor && { backgroundColor: this.props.sliderHoverColor }\n      };\n      return /* @__PURE__ */ import_react.default.createElement(\"div\", {\n        className: \"seek-hover\",\n        style\n      });\n    });\n    __publicField(this, \"renderThumb\", () => {\n      return /* @__PURE__ */ import_react.default.createElement(\"div\", {\n        className: this.isThumbActive() ? `thumb active` : \"thumb\",\n        style: this.getThumbHandlerPosition()\n      }, /* @__PURE__ */ import_react.default.createElement(\"div\", {\n        style: { backgroundColor: this.props.thumbColor },\n        className: \"handler\"\n      }));\n    });\n    __publicField(this, \"onMouseDown\", (event) => {\n      var _a, _b;\n      if (this.props.pause && !this.props.paused) {\n        this.props.pause();\n        this.seekPause = true;\n      }\n      this.setSeeking(true, event);\n      (_b = (_a = this.props).onSeekStart) == null ? void 0 : _b.call(_a);\n    });\n    __publicField(this, \"onMouseUp\", () => {\n      var _a, _b;\n      if (this.props.play && this.seekPause) {\n        this.props.play();\n        this.seekPause = false;\n      }\n      (_b = (_a = this.props).onSeekEnd) == null ? void 0 : _b.call(_a);\n    });\n    if (this.props.secondsPrefix) {\n      this.secondsPrefix = this.props.secondsPrefix;\n    }\n    if (this.props.minutesPrefix) {\n      this.minutesPrefix = this.props.minutesPrefix;\n    }\n    this.state = {\n      ready: false,\n      trackWidth: 0,\n      seekHoverPosition: 0\n    };\n  }\n  componentDidMount() {\n    this.setTrackWidthState();\n    window.addEventListener(\"resize\", this.setTrackWidthState);\n    window.addEventListener(\"mousemove\", this.handleSeeking);\n    window.addEventListener(\"mouseup\", this.mouseSeekingHandler);\n    window.addEventListener(\"touchmove\", this.handleTouchSeeking);\n    window.addEventListener(\"touchend\", this.mobileTouchSeekingHandler);\n  }\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.setTrackWidthState);\n    window.removeEventListener(\"mousemove\", this.handleSeeking);\n    window.removeEventListener(\"mouseup\", this.mouseSeekingHandler);\n    window.removeEventListener(\"touchmove\", this.handleTouchSeeking);\n    window.removeEventListener(\"touchend\", this.mobileTouchSeekingHandler);\n  }\n  changeCurrentTimePosition(pageX) {\n    if (this.track) {\n      const scale = this.props.scale || 1;\n      let position = (pageX - this.track.getBoundingClientRect().left) / scale;\n      position = Math.min(this.state.trackWidth, Math.max(0, position));\n      this.setState({ seekHoverPosition: position });\n      const percent = position / this.state.trackWidth;\n      const time = +(percent * this.props.total).toFixed(0);\n      this.props.onChange(time);\n    }\n  }\n  getPositionStyle(time) {\n    const position = time * 100 / this.props.total;\n    return { transform: `scaleX(${position / 100})` };\n  }\n  getThumbHandlerPosition() {\n    const position = this.state.trackWidth / (this.props.total / this.props.current);\n    return { transform: `translateX(${position}px)` };\n  }\n  getSeekHoverPosition() {\n    const position = this.state.seekHoverPosition * 100 / this.state.trackWidth;\n    return { transform: `scaleX(${position / 100})` };\n  }\n  getHoverTimePosition() {\n    let position = 0;\n    if (this.hoverTime) {\n      position = this.state.seekHoverPosition - this.hoverTime.offsetWidth / 2;\n      if (this.props.limitTimeTooltipBySides) {\n        if (position < 0) {\n          position = 0;\n        } else if (position + this.hoverTime.offsetWidth > this.state.trackWidth) {\n          position = this.state.trackWidth - this.hoverTime.offsetWidth;\n        }\n      }\n    }\n    return {\n      transform: `translateX(${position}px)`\n    };\n  }\n  secondsToTime(seconds) {\n    seconds = Math.round(seconds + this.offset);\n    const hours = Math.floor(seconds / 3600);\n    const divForMinutes = seconds % 3600;\n    const minutes = Math.floor(divForMinutes / 60);\n    const sec = Math.ceil(divForMinutes % 60);\n    return {\n      hh: hours.toString(),\n      mm: minutes < 10 ? \"0\" + minutes : minutes.toString(),\n      ss: sec < 10 ? \"0\" + sec : sec.toString()\n    };\n  }\n  getHoverTime() {\n    const percent = this.state.seekHoverPosition * 100 / this.state.trackWidth;\n    const time = Math.floor(+(percent * (this.props.total / 100)));\n    const times = this.secondsToTime(time);\n    if (this.props.total + this.offset < 60) {\n      return this.secondsPrefix + times.ss;\n    } else if (this.props.total + this.offset < 3600) {\n      return this.minutesPrefix + times.mm + \":\" + times.ss;\n    } else {\n      return times.hh + \":\" + times.mm + \":\" + times.ss;\n    }\n  }\n  isThumbActive() {\n    return this.state.seekHoverPosition > 0 || this.seeking;\n  }\n  drawHoverTime() {\n    if (!this.props.hideHoverTime) {\n      return /* @__PURE__ */ import_react.default.createElement(\"div\", {\n        className: this.isThumbActive() ? `hover-time active` : \"hover-time\",\n        style: this.getHoverTimePosition(),\n        ref: (ref) => this.hoverTime = ref\n      }, this.getHoverTime());\n    } else {\n      return null;\n    }\n  }\n  render() {\n    return /* @__PURE__ */ import_react.default.createElement(\"div\", {\n      className: \"seek-slider\"\n    }, /* @__PURE__ */ import_react.default.createElement(\"div\", {\n      className: \"track\",\n      ref: (ref) => this.track = ref,\n      onMouseMove: (evt) => this.handleTrackHover(false, evt),\n      onMouseLeave: (evt) => this.handleTrackHover(true, evt),\n      onMouseDown: this.onMouseDown,\n      onTouchStart: (evt) => {\n        this.setMobileSeeking(true);\n        this.onMouseDown(evt);\n      },\n      onMouseUp: this.onMouseUp,\n      onTouchEnd: this.onMouseUp\n    }, /* @__PURE__ */ import_react.default.createElement(\"div\", {\n      className: \"main\"\n    }, this.renderBufferProgress(), this.renderHoverProgress(), this.renderProgress())), this.drawHoverTime(), this.renderThumb());\n  }\n};\n\n// src/components/PlayerController.tsx\nvar PlayerController = class extends import_react2.Component {\n  constructor(props) {\n    super(props);\n    __publicField(this, \"stageVolume\", 0);\n    __publicField(this, \"updateVolumeTimer\", 0);\n    __publicField(this, \"onVolumeSeeking\", false);\n    __publicField(this, \"onClickOperationButton\", () => {\n      const { paused } = this.props;\n      if (paused) {\n        this.props.play();\n      } else {\n        this.props.pause();\n      }\n    });\n    __publicField(this, \"operationButton\", () => {\n      const { paused } = this.props;\n      if (paused) {\n        return /* @__PURE__ */ import_react2.default.createElement(\"img\", {\n          src: video_play_default\n        });\n      } else {\n        return /* @__PURE__ */ import_react2.default.createElement(\"img\", {\n          src: video_pause_default\n        });\n      }\n    });\n    __publicField(this, \"operationVolumeButton\", () => {\n      if (this.props.volume > 0.9) {\n        return /* @__PURE__ */ import_react2.default.createElement(\"img\", {\n          src: volume2_default\n        });\n      } else if (this.props.volume === 0) {\n        return /* @__PURE__ */ import_react2.default.createElement(\"img\", {\n          src: volume0_default\n        });\n      } else {\n        return /* @__PURE__ */ import_react2.default.createElement(\"img\", {\n          src: volume1_default\n        });\n      }\n    });\n    __publicField(this, \"handleClickVolume\", () => {\n      if (this.props.volume === 0) {\n        if (this.stageVolume !== 0) {\n          this.props.setVolume(this.stageVolume);\n        } else {\n          this.props.setVolume(1);\n        }\n      } else {\n        this.stageVolume = this.props.volume;\n        this.props.setVolume(0);\n      }\n    });\n    __publicField(this, \"onChange\", (currentTime) => {\n      this.setState({ currentTime });\n      currentTime && this.changeTime(currentTime);\n    });\n    __publicField(this, \"changeTime\", debounce_default((time) => {\n      this.props.setCurrentTime(time);\n    }, 50));\n    __publicField(this, \"onVolumeChange\", (time) => {\n      this.changeVolume(time);\n      this.setState({ seekVolume: time / 100 });\n    });\n    __publicField(this, \"changeVolume\", debounce_default((time) => {\n      this.props.setVolume(time / 100);\n    }, 50));\n    __publicField(this, \"onVolumeSeekStart\", () => {\n      this.onVolumeSeeking = true;\n    });\n    __publicField(this, \"onVolumeSeekEnd\", debounce_default(() => {\n      this.onVolumeSeeking = false;\n    }, 500));\n    __publicField(this, \"onProgressSeekStart\", () => this.setState({ isPlayerSeeking: true }));\n    __publicField(this, \"onProgressSeekEnd\", debounce_default(() => {\n      this.setState({ isPlayerSeeking: false });\n    }, 500));\n    this.state = {\n      isPlayerSeeking: false,\n      isVolumeHover: false,\n      seekVolume: 1,\n      visible: true,\n      currentTime: 0\n    };\n    this.stageVolume = props.volume;\n  }\n  componentDidMount() {\n    this.updateVolumeTimer = setInterval(() => {\n      if (!this.onVolumeSeeking) {\n        this.setState({ seekVolume: this.props.volume });\n      }\n      if (!this.state.isPlayerSeeking) {\n        this.setState({ currentTime: this.props.currentTime });\n      }\n    }, 100);\n  }\n  componentWillUnmount() {\n    if (this.updateVolumeTimer) {\n      clearInterval(this.updateVolumeTimer);\n    }\n  }\n  render() {\n    const { duration, currentTime: progressTime } = this.props;\n    return /* @__PURE__ */ import_react2.default.createElement(\"div\", {\n      className: \"player-controller\",\n      style: { opacity: this.props.visible ? \"1\" : \"0\" }\n    }, /* @__PURE__ */ import_react2.default.createElement(\"div\", {\n      className: \"player-controller-progress\"\n    }, /* @__PURE__ */ import_react2.default.createElement(SeekSlider, {\n      total: duration,\n      current: this.state.currentTime,\n      onChange: this.onChange,\n      buffered: this.props.buffered,\n      bufferColor: \"rgba(255,255,255,0.3)\",\n      hideHoverTime: true,\n      limitTimeTooltipBySides: true,\n      onSeekStart: this.onProgressSeekStart,\n      onSeekEnd: this.onProgressSeekEnd,\n      play: this.props.play,\n      pause: this.props.pause,\n      paused: this.props.paused,\n      scale: this.props.scale\n    })), /* @__PURE__ */ import_react2.default.createElement(\"div\", {\n      className: \"player-controller-actions\"\n    }, /* @__PURE__ */ import_react2.default.createElement(\"div\", {\n      className: \"player-controller-actions-left\"\n    }, /* @__PURE__ */ import_react2.default.createElement(\"div\", {\n      onClick: this.onClickOperationButton,\n      className: \"player-controller-play\"\n    }, this.operationButton()), /* @__PURE__ */ import_react2.default.createElement(\"div\", {\n      className: \"player-volume-box\",\n      onMouseEnter: () => this.setState({ isVolumeHover: true }),\n      onMouseLeave: () => this.setState({ isVolumeHover: false })\n    }, /* @__PURE__ */ import_react2.default.createElement(\"div\", {\n      onClick: this.handleClickVolume,\n      className: \"player-volume\"\n    }, this.operationVolumeButton()), /* @__PURE__ */ import_react2.default.createElement(\"div\", {\n      className: \"player-volume-slider\"\n    }, /* @__PURE__ */ import_react2.default.createElement(SeekSlider, {\n      total: 100,\n      current: 100 * this.state.seekVolume,\n      onChange: this.onVolumeChange,\n      onSeekStart: this.onVolumeSeekStart,\n      onSeekEnd: this.onVolumeSeekEnd,\n      scale: this.props.scale,\n      limitTimeTooltipBySides: true,\n      hideHoverTime: true\n    })))), /* @__PURE__ */ import_react2.default.createElement(\"div\", {\n      className: \"player-mid-box-time\"\n    }, displayWatch(Math.floor(progressTime / 1e3)), \" /\", \" \", displayWatch(Math.floor(duration / 1e3)))));\n  }\n};\nfunction displayWatch(seconds) {\n  const displaySeconds = seconds % 60;\n  const minutes = (seconds - displaySeconds) / 60;\n  if (minutes >= 60) {\n    const displayMinutes = minutes % 60;\n    const hours = (minutes - displayMinutes) / 60;\n    return `${updateNumber(hours)}:${updateNumber(displayMinutes)}:${updateNumber(displaySeconds)}`;\n  } else {\n    return `${updateNumber(minutes)}:${updateNumber(displaySeconds)}`;\n  }\n}\nfunction updateNumber(time) {\n  if (time <= 9) {\n    return `0${time}`;\n  } else {\n    return `${time}`;\n  }\n}\n\n// style-content:src/components/style.css\nvar style_default = '.vjs-p{display:flex;flex-grow:1;position:relative}.vjs-p *{pointer-events:auto}.vjs-p.disabled *{pointer-events:none}.vjs-p .videojs-plugin-close-icon,.vjs-p .player-controller,.vjs-p .videojs-plugin-muted-alert{pointer-events:auto}.vjs-p.disabled .videojs-plugin-close-icon,.vjs-p.disabled .player-controller{pointer-events:none}.vjs-p .video-js-plugin-header{position:absolute;z-index:100;top:-.5px;height:30px;width:100%;display:flex;background:linear-gradient(rgba(0,0,0,.85),rgba(0,0,0,.45) 40%,rgba(0,0,0,0));transition:opacity .2s;user-select:none}.vjs-p .video-js-plugin-title{padding:10px;font-size:14px;color:#fff}.vjs-p .video-js-plugin-player{position:absolute;top:0;left:0;right:0;bottom:0}.video-js,[data-vjs-player]{width:100%;height:100%}.vjs-p .videojs-plugin-close-icon.disabled{display:none}.vjs-p .videojs-plugin-close-icon{pointer-events:auto;z-index:42;color:#fff;position:absolute;top:0;right:0;width:32px;height:32px;font-size:20px;display:flex;align-items:center;justify-content:center}.vjs-p .videojs-plugin-muted-alert{pointer-events:auto;cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0;z-index:43}.vjs-p .videojs-plugin-muted-alert:before{pointer-events:auto;cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0;z-index:43;content:\"\\uF104\";background:rgba(0,0,0,.3);font-family:VideoJS;font-size:2em;display:flex;align-items:center;justify-content:center;color:#fff}.vjs-p .videojs-plugin-recovery-mode{pointer-events:auto;cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0;z-index:44}.vjs-p .videojs-plugin-recovery-mode button{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}\\n';\n\n// style-stub:src/components/style.css\ninjectStyle(style_default);\n\n// src/components/Transform.tsx\nvar import_react3 = __toModule(__webpack_require__(/*! react */ 67294));\nfunction FlexTransform({ scale = 1, size, children }) {\n  return /* @__PURE__ */ import_react3.default.createElement(\"div\", {\n    style: {\n      width: size.width / scale,\n      height: size.height / scale,\n      transform: `scale(${scale})`,\n      transformOrigin: \"top left\",\n      display: \"flex\",\n      overflow: \"hidden\"\n    }\n  }, children);\n}\n\n// src/components/VideoJsPlugin.tsx\nvar VideoJsPlugin = class extends import_react4.Component {\n  render() {\n    const { cnode, size, scale } = this.props;\n    return /* @__PURE__ */ import_react4.default.createElement(import_white_web_sdk.CNode, {\n      context: cnode\n    }, /* @__PURE__ */ import_react4.default.createElement(FlexTransform, {\n      size,\n      scale\n    }, /* @__PURE__ */ import_react4.default.createElement(import_white_web_sdk.RoomConsumer, null, (room) => room && /* @__PURE__ */ import_react4.default.createElement(Impl, {\n      room,\n      ...this.props\n    })), /* @__PURE__ */ import_react4.default.createElement(import_white_web_sdk.PlayerConsumer, null, (player) => player && /* @__PURE__ */ import_react4.default.createElement(Impl, {\n      player,\n      ...this.props\n    }))));\n  }\n};\nvar Impl = class extends import_react4.Component {\n  constructor(props) {\n    super(props);\n    __publicField(this, \"closeIcon\", null);\n    __publicField(this, \"alertMask\", null);\n    __publicField(this, \"container\", import_react4.default.createRef());\n    __publicField(this, \"player\");\n    __publicField(this, \"controllerHiddenTimer\", 0);\n    __publicField(this, \"syncPlayerTimer\", 0);\n    __publicField(this, \"retryCount\", 0);\n    __publicField(this, \"decreaseRetryTimer\", 0);\n    __publicField(this, \"disposer\");\n    __publicField(this, \"showController\", () => {\n      this.setState({ controllerVisible: true });\n      this.debounceHidingController();\n    });\n    __publicField(this, \"play\", () => {\n      var _a;\n      const hostTime = (_a = this.props.room) == null ? void 0 : _a.calibrationTimestamp;\n      this.debug(\">>> play\", { paused: false, hostTime });\n      this.isEnabled() && this.props.plugin.putAttributes({ paused: false, hostTime });\n    });\n    __publicField(this, \"pause\", () => {\n      let s = this.getAttributes();\n      if (!s)\n        return;\n      const currentTime = getCurrentTime(s, this.props);\n      this.debug(\">>> pause\", { paused: true, currentTime });\n      this.isEnabled() && this.props.plugin.putAttributes({ paused: true, currentTime });\n    });\n    __publicField(this, \"setVolume\", (volume) => {\n      this.debug(\">>> volume\", { volume });\n      this.isEnabled() && this.props.plugin.putAttributes({ volume });\n      this.isEnabled() && this.props.plugin.putAttributes({ volume, muted: volume === 0 });\n    });\n    __publicField(this, \"setCurrentTime\", (t) => {\n      var _a;\n      const hostTime = (_a = this.props.room) == null ? void 0 : _a.calibrationTimestamp;\n      this.debug(\">>> seek\", { currentTime: t / 1e3, hostTime });\n      this.isEnabled() && this.props.plugin.putAttributes({ currentTime: t / 1e3, hostTime });\n    });\n    __publicField(this, \"resetPlayer\", () => {\n      var _a;\n      (_a = this.player) == null ? void 0 : _a.autoplay(false);\n      this.debug(\">>> ended\", { paused: true, currentTime: 0 });\n      this.isEnabled() && this.props.plugin.putAttributes({ paused: true, currentTime: 0 });\n    });\n    __publicField(this, \"syncPlayerWithAttributes\", () => {\n      var _a;\n      void this.props.plugin.context;\n      const s = this.getAttributes();\n      if (!s)\n        return;\n      const player = this.player;\n      if (!player)\n        return;\n      if (player.paused() !== s.paused) {\n        this.debug(\"<<< paused -> %o\", s.paused);\n        if (s.paused) {\n          player.pause();\n        } else {\n          (_a = player.play()) == null ? void 0 : _a.catch(this.catchPlayFail);\n        }\n      }\n      if (player.muted() !== s.muted) {\n        this.debug(\"<<< muted -> %o\", s.muted);\n        player.muted(s.muted);\n      }\n      if (player.volume() !== s.volume) {\n        this.debug(\"<<< volume -> %o\", s.volume);\n        player.volume(s.volume);\n      }\n      const currentTime = getCurrentTime(s, this.props);\n      if (currentTime > player.duration()) {\n        this.resetPlayer();\n      } else if (Math.abs(player.currentTime() - currentTime) > options.currentTimeMaxError) {\n        this.debug(\"<<< currentTime -> %o\", currentTime);\n        player.currentTime(currentTime);\n      }\n    });\n    __publicField(this, \"debounceHidingController\", () => {\n      if (this.controllerHiddenTimer) {\n        clearTimeout(this.controllerHiddenTimer);\n        this.controllerHiddenTimer = 0;\n      }\n      this.controllerHiddenTimer = setTimeout(() => {\n        this.setState({ controllerVisible: false });\n        this.controllerHiddenTimer = 0;\n      }, 3e3);\n    });\n    __publicField(this, \"decreaseRetryCount\", () => {\n      if (!this.player)\n        return;\n      if (this.retryCount > 0) {\n        this.retryCount = this.retryCount - 1;\n      }\n    });\n    __publicField(this, \"catchPlayFail\", (err) => {\n      var _a, _b;\n      const string = String(err);\n      if (isSafari && string.includes(\"NotAllowedError\") || string.includes(\"interact\")) {\n        (_a = this.player) == null ? void 0 : _a.autoplay(\"any\");\n        this.setState({ NoSound: true });\n      } else {\n        const mediaError = (_b = this.player) == null ? void 0 : _b.error();\n        if (mediaError) {\n          if (this.retryCount <= 3) {\n            this.initPlayer();\n            this.retryCount = this.retryCount + 1;\n          } else {\n            this.debug(\"catch videojs media error\", mediaError);\n            this.setState({ MediaError: true });\n          }\n        }\n        this.debug(\"catch error\", err);\n      }\n    });\n    __publicField(this, \"fixPlayFail\", () => {\n      this.debug(\"try to fix play state\");\n      this.setState({ NoSound: false });\n      const { muted, volume } = this.getAttributes();\n      if (this.player) {\n        this.player.muted(muted);\n        this.player.volume(volume);\n      }\n    });\n    __publicField(this, \"initPlayer\", async () => {\n      var _a;\n      (_a = this.player) == null ? void 0 : _a.dispose();\n      this.player = void 0;\n      this.debug(\"creating elements ...\");\n      const { type, src, poster } = this.getAttributes();\n      const wrapper = document.createElement(\"div\");\n      wrapper.setAttribute(\"data-vjs-player\", \"\");\n      const video = document.createElement(\"video\");\n      video.className = \"video-js\";\n      poster && (video.poster = poster);\n      video.setAttribute(\"playsInline\", \"\");\n      video.setAttribute(\"webkit-playsinline\", \"\");\n      const source = document.createElement(\"source\");\n      if (new URL(src).pathname.endsWith(\".m3u8\")) {\n        source.type = \"application/x-mpegURL\";\n      } else {\n        video.src = src;\n      }\n      source.src = src;\n      type && (source.type = type);\n      video.appendChild(source);\n      wrapper.appendChild(video);\n      this.container.current.appendChild(wrapper);\n      await nextFrame();\n      this.debug(\"initializing videojs() ...\");\n      const player = (0, import_video.default)(video);\n      this.player = player;\n      player.one(\"loadedmetadata\", this.gracefullyUpdate);\n      player.on(\"ready\", () => {\n        var _a2, _b;\n        (_b = (_a2 = options).onPlayer) == null ? void 0 : _b.call(_a2, player);\n        player.on(\"timeupdate\", this.gracefullyUpdate);\n        player.on(\"volumechange\", this.gracefullyUpdate);\n        player.on(\"seeked\", this.gracefullyUpdate);\n        player.on(\"play\", this.gracefullyUpdate);\n        player.on(\"pause\", this.gracefullyUpdate);\n        player.on(\"ended\", this.resetPlayer);\n      });\n      player.on(\"error\", this.catchPlayFail);\n      this.setState({ MediaError: false });\n    });\n    __publicField(this, \"gracefullyUpdate\", () => this.setState({ updater: !this.state.updater }));\n    __publicField(this, \"setupClose\", (element) => {\n      if (element) {\n        element.addEventListener(\"touchstart\", this.removeSelf);\n        element.addEventListener(\"click\", this.removeSelf);\n      }\n      this.closeIcon = element;\n    });\n    __publicField(this, \"setupAlert\", (element) => {\n      if (element) {\n        element.addEventListener(\"touchstart\", this.fixPlayFail);\n        element.addEventListener(\"click\", this.fixPlayFail);\n      }\n      this.alertMask = element;\n    });\n    __publicField(this, \"setupReload\", (element) => {\n      if (element) {\n        element.addEventListener(\"touchstart\", this.initPlayer);\n        element.addEventListener(\"click\", this.initPlayer);\n      }\n    });\n    __publicField(this, \"removeSelf\", () => this.props.plugin.remove());\n    this.state = {\n      NoSound: false,\n      MediaError: false,\n      updater: false,\n      controllerVisible: false\n    };\n    props.room && checkWhiteWebSdkVersion(props.room);\n  }\n  getAttributes() {\n    var _a;\n    let s = this.props.plugin.attributes;\n    if (!s)\n      return;\n    const pausing = [import_white_web_sdk.PlayerPhase.Pause, import_white_web_sdk.PlayerPhase.Ended, import_white_web_sdk.PlayerPhase.Stopped];\n    if (!s.paused && pausing.includes((_a = this.props.player) == null ? void 0 : _a.phase)) {\n      const currentTime = getCurrentTime(s, this.props);\n      s = { ...s, currentTime, paused: true };\n    }\n    return s;\n  }\n  render() {\n    var _a, _b, _c, _d;\n    if (!(this.props.room || this.props.player)) {\n      return null;\n    }\n    const s = this.getAttributes();\n    if (!s) {\n      return null;\n    }\n    const duration = (((_a = this.player) == null ? void 0 : _a.duration()) || 1e3) * 1e3;\n    const bufferedPercent = ((_b = this.player) == null ? void 0 : _b.bufferedPercent()) || 0;\n    return /* @__PURE__ */ import_react4.default.createElement(\"div\", {\n      className: this.isEnabled() ? \"vjs-p\" : \"vjs-p disabled\",\n      onMouseEnter: this.showController,\n      onMouseMove: this.showController\n    }, /* @__PURE__ */ import_react4.default.createElement(\"div\", {\n      className: \"video-js-plugin-player\",\n      ref: this.container\n    }), /* @__PURE__ */ import_react4.default.createElement(\"div\", {\n      className: \"video-js-plugin-header\"\n    }, s.title && /* @__PURE__ */ import_react4.default.createElement(\"div\", {\n      className: \"video-js-plugin-title\"\n    }, s.title), ((_c = s.close) != null ? _c : true) && /* @__PURE__ */ import_react4.default.createElement(\"div\", {\n      className: \"videojs-plugin-close-icon\",\n      ref: this.setupClose\n    }, \"\\xD7\")), /* @__PURE__ */ import_react4.default.createElement(PlayerController, {\n      duration,\n      volume: s.volume,\n      setVolume: this.setVolume,\n      paused: s.paused,\n      play: this.play,\n      pause: this.pause,\n      currentTime: getCurrentTime(s, this.props) * 1e3,\n      setCurrentTime: this.setCurrentTime,\n      buffered: duration * bufferedPercent,\n      scale: this.props.scale,\n      visible: true\n    }), !((_d = this.props.plugin.context) == null ? void 0 : _d.hideMuteAlert) && this.state.NoSound && /* @__PURE__ */ import_react4.default.createElement(\"div\", {\n      ref: this.setupAlert,\n      className: \"videojs-plugin-muted-alert\"\n    }), this.state.MediaError && /* @__PURE__ */ import_react4.default.createElement(\"div\", {\n      className: \"videojs-plugin-recovery-mode\"\n    }, /* @__PURE__ */ import_react4.default.createElement(\"button\", {\n      ref: this.setupReload\n    }, \"Reload Player\")));\n  }\n  debug(msg, ...args) {\n    var _a;\n    if ((_a = this.props.plugin.context) == null ? void 0 : _a.verbose) {\n      (options.log || console.log)(`[VideoJS Plugin] ${msg}`, ...args);\n    }\n  }\n  componentDidMount() {\n    this.debug(\"plugin version =\", Version);\n    this.debug(\"sdk version =\", import_white_web_sdk.WhiteVersion);\n    this.debug(\"video.js version =\", import_video.default.VERSION);\n    this.initPlayer();\n    this.disposer = (0, import_white_web_sdk.autorun)(this.syncPlayerWithAttributes);\n    this.syncPlayerTimer = setInterval(this.syncPlayerWithAttributes, options.syncInterval);\n    this.decreaseRetryTimer = setInterval(this.decreaseRetryCount, options.retryInterval);\n  }\n  componentWillUnmount() {\n    var _a, _b;\n    (_a = this.disposer) == null ? void 0 : _a.call(this);\n    (_b = this.player) == null ? void 0 : _b.dispose();\n    clearInterval(this.syncPlayerTimer);\n    clearInterval(this.decreaseRetryTimer);\n  }\n  isEnabled() {\n    var _a;\n    if (!((_a = this.props.room) == null ? void 0 : _a.isWritable))\n      return false;\n    const { identity, enable } = this.props.plugin.context || {};\n    if (identity === void 0 && enable === void 0) {\n      return false;\n    }\n    if (identity) {\n      return [\"host\", \"publisher\"].includes(identity);\n    }\n    return Boolean(enable);\n  }\n};\n\n// src/index.ts\nvar videoJsPlugin = (options2) => {\n  options2 && setOptions(options2);\n  return {\n    kind: PluginId,\n    render: VideoJsPlugin,\n    defaultAttributes: {\n      src: \"\",\n      poster: \"\",\n      hostTime: 0,\n      currentTime: 0,\n      paused: true,\n      muted: false,\n      volume: 1,\n      close: true\n    }\n  };\n};\n/**\n * @license\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"es\" -o ./`\n * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n//# sourceMappingURL=index.js.map\n\n\n//# sourceURL=webpack://whiteboard-bridge/./node_modules/@netless/video-js-plugin/dist/index.js?");

/***/ }),

/***/ 25608:
/*!************************************************************!*\
  !*** ./node_modules/@netless/webview-bridge/dist/index.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n__exportStar(__webpack_require__(/*! ./react-native */ 13700), exports);\n\n\n//# sourceURL=webpack://whiteboard-bridge/./node_modules/@netless/webview-bridge/dist/index.js?");

/***/ }),

/***/ 82160:
/*!**************************************************************************!*\
  !*** ./node_modules/@netless/webview-bridge/dist/react-native/bridge.js ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Bridge = void 0;\nconst uuid_1 = __webpack_require__(/*! uuid */ 17593);\nconst common_1 = __webpack_require__(/*! ./common */ 9344);\nclass Bridge {\n    constructor() {\n        this.methods = new Map();\n        this.asyncMethods = new Map();\n        this.queue = new Map();\n        this.verbose = false;\n        this.isAndroid = () => {\n            return /android/i.test(navigator.userAgent) || /android/i.test(`${window.__platform}`);\n        };\n        this.listen = (e) => {\n            this.recv(e.data);\n        };\n        // https://github.com/react-native-webview/react-native-webview/issues/1688#issuecomment-735434550\n        if (this.isAndroid()) {\n            document.addEventListener(\"message\", this.listen);\n        }\n        else {\n            window.addEventListener(\"message\", this.listen);\n        }\n    }\n    enableLog() {\n        this.verbose = true;\n    }\n    destroy() {\n        window.removeEventListener(\"message\", this.listen);\n        document.addEventListener(\"message\", this.listen);\n    }\n    call(method, args, callback) {\n        return new Promise((resolve, reject) => {\n            const actionId = (0, uuid_1.v4)();\n            const message = (0, common_1.bridgeMessageTemplate)(common_1.BridgeEventType.evt, actionId, method, args);\n            this.queue.set(actionId, { ack: false, resolve: resolve, reject: reject, method, callback });\n            window.ReactNativeWebView.postMessage(message);\n        });\n    }\n    register(name, fun, async = false) {\n        if (async) {\n            this.asyncMethods.set(name, fun);\n        }\n        else {\n            this.methods.set(name, fun);\n        }\n    }\n    registerAsyn(name, fun) {\n        this.asyncMethods.set(name, fun);\n    }\n    recv(protocol) {\n        if (typeof protocol == \"string\") {\n            const { type, actionId, method, payload } = (0, common_1.parseBridgeMessage)(protocol);\n            this.verbose && console.log({ type, actionId, method, payload });\n            switch (type) {\n                case common_1.BridgeEventType.req:\n                    {\n                        const ret = {\n                            data: undefined,\n                            actionId: actionId,\n                            complete: true\n                        };\n                        const call = function (f, ob) {\n                            try {\n                                ret.data = f.apply(ob, payload);\n                                const ackMessage = (0, common_1.bridgeMessageTemplate)(common_1.BridgeEventType.ack, actionId, common_1.ackTypeSuccess, ret);\n                                window.ReactNativeWebView.postMessage(ackMessage);\n                            }\n                            catch (e) {\n                                const ackMessage = (0, common_1.bridgeMessageTemplate)(common_1.BridgeEventType.ack, actionId, common_1.ackTypeError, e);\n                                window.ReactNativeWebView.postMessage(ackMessage);\n                            }\n                        };\n                        const callWithProgressCallback = function (f, ob) {\n                            payload.push(function (data, complete) {\n                                ret.data = data;\n                                ret.complete = complete !== false;\n                                let ackMessage = \"\";\n                                let isError = false;\n                                // TODO: 此处逻辑与 whiteboard-bridge 耦合，暂时先这样。\n                                if (typeof data === \"string\") {\n                                    try {\n                                        const dataObj = JSON.parse(data);\n                                        isError = !!(dataObj.error || dataObj.__error);\n                                    }\n                                    catch (error) {\n                                    }\n                                }\n                                else {\n                                    isError = !!(data && (data.error || data.__error));\n                                }\n                                if (isError) {\n                                    ackMessage = (0, common_1.bridgeMessageTemplate)(common_1.BridgeEventType.ack, actionId, common_1.ackTypeError, ret.data);\n                                }\n                                else {\n                                    ackMessage = (0, common_1.bridgeMessageTemplate)(common_1.BridgeEventType.ack, actionId, common_1.ackTypeSuccess, ret);\n                                }\n                                window.ReactNativeWebView.postMessage(ackMessage);\n                            });\n                            try {\n                                f.apply(ob, payload);\n                            }\n                            catch (e) {\n                                const ackMessage = (0, common_1.bridgeMessageTemplate)(common_1.BridgeEventType.ack, actionId, common_1.ackTypeError, e);\n                                window.ReactNativeWebView.postMessage(ackMessage);\n                            }\n                        };\n                        const fun = this.methods.get(method);\n                        const funWithProgressCallback = this.asyncMethods.get(method);\n                        if (fun) {\n                            call(fun, this.methods);\n                        }\n                        else if (funWithProgressCallback) {\n                            callWithProgressCallback(funWithProgressCallback, this.asyncMethods);\n                        }\n                        else {\n                            const names = method.split(\".\");\n                            if (names.length < 2) {\n                                return;\n                            }\n                            const namespaceMethod = names.pop();\n                            const namespace = names.join(\".\");\n                            const namespaceObj = this.methods.get(namespace);\n                            if (namespaceObj) {\n                                const fun = namespaceObj[namespaceMethod];\n                                if (fun && typeof fun === \"function\") {\n                                    call(fun, namespaceObj);\n                                    return;\n                                }\n                            }\n                            const progressNamespaceObj = this.asyncMethods.get(namespace);\n                            if (progressNamespaceObj) {\n                                const fun = progressNamespaceObj[namespaceMethod];\n                                if (fun && typeof fun === \"function\") {\n                                    callWithProgressCallback(fun, progressNamespaceObj);\n                                    return;\n                                }\n                            }\n                            console.log(`method ${method} not found`);\n                        }\n                        break;\n                    }\n                case common_1.BridgeEventType.ack:\n                    {\n                        const ackPayload = payload;\n                        if (this.queue.has(actionId)) {\n                            const q = this.queue.get(actionId);\n                            q.ack = true;\n                            if (method === common_1.ackTypeError) {\n                                q.reject(payload);\n                            }\n                            else {\n                                q.resolve(ackPayload.data);\n                                // callback 是兼容 dsbridge API，await 模式更好一些。\n                                if (q.callback) {\n                                    q.callback(ackPayload.data);\n                                }\n                            }\n                            if (ackPayload.complete) {\n                                this.queue.delete(actionId);\n                            }\n                        }\n                        break;\n                    }\n            }\n        }\n    }\n}\nexports.Bridge = Bridge;\n\n\n//# sourceURL=webpack://whiteboard-bridge/./node_modules/@netless/webview-bridge/dist/react-native/bridge.js?");

/***/ }),

/***/ 9344:
/*!**************************************************************************!*\
  !*** ./node_modules/@netless/webview-bridge/dist/react-native/common.js ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, exports) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.parseBridgeMessage = exports.bridgeMessageTemplate = exports.ackTypeError = exports.ackTypeSuccess = exports.BridgeEventType = void 0;\nvar BridgeEventType;\n(function (BridgeEventType) {\n    // RN 主动发送的消息\n    BridgeEventType[\"req\"] = \"req\";\n    // bridge 主动发送的消息\n    BridgeEventType[\"evt\"] = \"evt\";\n    // 远端根据本地发送的请求，被动返回的消息\n    BridgeEventType[\"ack\"] = \"ack\";\n})(BridgeEventType = exports.BridgeEventType || (exports.BridgeEventType = {}));\nexports.ackTypeSuccess = \"success\";\nexports.ackTypeError = \"error\";\n/**\n *\n * @param type 事件类型\n * @param actionId action Id 事件唯一标识\n * @param method 方法名，当事件类型为 ack 时，该值为 @link ackTypeSuccess 时，表示成功 @link ackTypeError 时，payload 为错误信息。该字段为 bridge 与 rn 方面共享同步。\n * @param payload 数据信息\n * @returns\n */\nfunction bridgeMessageTemplate(type, actionId, method, payload) {\n    return JSON.stringify({ type, actionId, method, payload });\n}\nexports.bridgeMessageTemplate = bridgeMessageTemplate;\nfunction parseBridgeMessage(message) {\n    try {\n        const { type, actionId, method, payload } = JSON.parse(message);\n        return { type: type, actionId, method, payload };\n    }\n    catch (error) {\n        console.log(`parse bridge message ${message} failed: `, error);\n        return { type: \"fail\", actionId: \"\", method: \"\", payload: message };\n    }\n}\nexports.parseBridgeMessage = parseBridgeMessage;\n\n\n//# sourceURL=webpack://whiteboard-bridge/./node_modules/@netless/webview-bridge/dist/react-native/common.js?");

/***/ }),

/***/ 13700:
/*!*************************************************************************!*\
  !*** ./node_modules/@netless/webview-bridge/dist/react-native/index.js ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Bridge = exports.RNCommon = void 0;\nexports.RNCommon = __importStar(__webpack_require__(/*! ./common */ 9344));\nvar bridge_1 = __webpack_require__(/*! ./bridge */ 82160);\nObject.defineProperty(exports, \"Bridge\", ({ enumerable: true, get: function () { return bridge_1.Bridge; } }));\n\n\n//# sourceURL=webpack://whiteboard-bridge/./node_modules/@netless/webview-bridge/dist/react-native/index.js?");

/***/ }),

/***/ 99256:
/*!****************************************************************!*\
  !*** ./node_modules/@netless/white-audio-plugin/dist/index.js ***!
  \****************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("/*! For license information please see index.js.LICENSE.txt */\n!function(e,t){ true?module.exports=t(__webpack_require__(/*! react */ 67294),__webpack_require__(/*! white-web-sdk */ 63314)):0}(window,(function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=12)}([function(t,n){t.exports=e},function(e,t,n){\"use strict\";(function(e,r){n.d(t,\"a\",(function(){return it}));var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function u(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e}var c=[];Object.freeze(c);var l={};Object.freeze(l);var p={};function h(){return\"undefined\"!=typeof window?window:void 0!==e?e:\"undefined\"!=typeof self?self:p}function f(){return++Se.mobxGuid}function y(e){throw d(!1,e),\"X\"}function d(e,t){if(!e)throw new Error(\"[mobx] \"+(t||\"An invariant failed, however the error is obfuscated because this is an production build.\"))}function M(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var g=function(){};function v(e){return null!==e&&\"object\"==typeof e}function b(e){if(null===e||\"object\"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}function m(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function N(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function D(e,t){var n=\"isMobX\"+e;return t.prototype[n]=!0,function(e){return v(e)&&!0===e[n]}}function j(e){return void 0!==h().Map&&e instanceof h().Map}function T(e){return e instanceof Set}function w(e){for(var t=[];;){var n=e.next();if(n.done)break;t.push(n.value)}return t}function O(){return\"function\"==typeof Symbol&&Symbol.toPrimitive||\"@@toPrimitive\"}function I(e){return null===e?null:\"object\"==typeof e?\"\"+e:e}function x(){return\"function\"==typeof Symbol&&Symbol.iterator||\"@@iterator\"}function A(e,t){N(e,x(),t)}function z(e){return e[x()]=S,e}function E(){return\"function\"==typeof Symbol&&Symbol.toStringTag||\"@@toStringTag\"}function S(){return this}var L=function(){function e(e){void 0===e&&(e=\"Atom@\"+f()),this.name=e,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=ie.NOT_TRACKING}return e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.reportObserved=function(){return Ye(this)},e.prototype.reportChanged=function(){_e(),function(e){if(e.lowestObserverState===ie.STALE)return;e.lowestObserverState=ie.STALE;var t=e.observers,n=t.length;for(;n--;){var r=t[n];r.dependenciesState===ie.UP_TO_DATE&&(r.isTracing!==oe.NONE&&Re(r,e),r.onBecomeStale()),r.dependenciesState=ie.STALE}}(this),Ue()},e.prototype.toString=function(){return this.name},e}(),k=D(\"Atom\",L);function C(e,t,n){void 0===t&&(t=g),void 0===n&&(n=g);var r,i=new L(e);return at(\"onBecomeObserved\",i,t,r),ot(i,n),i}function _(e,t){return e===t}var U={identity:_,structural:function(e,t){return qt(e,t)},default:function(e,t){return function(e,t){return\"number\"==typeof e&&\"number\"==typeof t&&isNaN(e)&&isNaN(t)}(e,t)||_(e,t)},shallow:function(e,t){return qt(e,t,1)}},Y={},R={};function P(e,t){var n=t?Y:R;return n[e]||(n[e]={configurable:!0,enumerable:t,get:function(){return Q(this),this[e]},set:function(t){Q(this),this[e]=t}})}function Q(e){if(!0!==e.__mobxDidRunLazyInitializers){var t=e.__mobxDecorators;if(t)for(var n in m(e,\"__mobxDidRunLazyInitializers\",!0),t){var r=t[n];r.propertyCreator(e,r.prop,r.descriptor,r.decoratorTarget,r.decoratorArguments)}}}function B(e,t){return function(){var n,r=function(r,i,o,s){if(!0===s)return t(r,i,o,r,n),null;if(!Object.prototype.hasOwnProperty.call(r,\"__mobxDecorators\")){var u=r.__mobxDecorators;m(r,\"__mobxDecorators\",a({},u))}return r.__mobxDecorators[i]={prop:i,propertyCreator:t,descriptor:o,decoratorTarget:r,decoratorArguments:n},P(i,e)};return V(arguments)?(n=c,r.apply(null,arguments)):(n=Array.prototype.slice.call(arguments),r)}}function V(e){return(2===e.length||3===e.length)&&\"string\"==typeof e[1]||4===e.length&&!0===e[3]}function G(e,t,n){return pt(e)?e:Array.isArray(e)?ne.array(e,{name:n}):b(e)?ne.object(e,void 0,{name:n}):j(e)?ne.map(e,{name:n}):T(e)?ne.set(e,{name:n}):e}function Z(e){return e}function H(e){d(e);var t=B(!0,(function(t,n,r,i,o){Gt(t,n,r?r.initializer?r.initializer.call(t):r.value:void 0,e)})),n=(void 0!==r&&r.env,t);return n.enhancer=e,n}var W={deep:!0,name:void 0,defaultDecorator:void 0},$={deep:!1,name:void 0,defaultDecorator:void 0};function J(e){return null==e?W:\"string\"==typeof e?{name:e,deep:!0}:e}function K(e){return e.defaultDecorator?e.defaultDecorator.enhancer:!1===e.deep?Z:G}Object.freeze(W),Object.freeze($);var X=H(G),F=H((function(e,t,n){return null==e||Jt(e)||kt(e)||Yt(e)||Qt(e)?e:Array.isArray(e)?ne.array(e,{name:n,deep:!1}):b(e)?ne.object(e,void 0,{name:n,deep:!1}):j(e)?ne.map(e,{name:n,deep:!1}):T(e)?ne.set(e,{name:n,deep:!1}):y(!1)})),q=H(Z),ee=H((function(e,t,n){return qt(e,t)?t:e}));var te={box:function(e,t){arguments.length>2&&re(\"box\");var n=J(t);return new Oe(e,K(n),n.name,!0,n.equals)},shallowBox:function(e,t){return arguments.length>2&&re(\"shallowBox\"),ne.box(e,{name:t,deep:!1})},array:function(e,t){arguments.length>2&&re(\"array\");var n=J(t);return new xt(e,K(n),n.name)},shallowArray:function(e,t){return arguments.length>2&&re(\"shallowArray\"),ne.array(e,{name:t,deep:!1})},map:function(e,t){arguments.length>2&&re(\"map\");var n=J(t);return new _t(e,K(n),n.name)},shallowMap:function(e,t){return arguments.length>2&&re(\"shallowMap\"),ne.map(e,{name:t,deep:!1})},set:function(e,t){arguments.length>2&&re(\"set\");var n=J(t);return new Pt(e,K(n),n.name)},object:function(e,t,n){\"string\"==typeof arguments[1]&&re(\"object\");var r=J(n);return st({},e,t,r)},shallowObject:function(e,t){return\"string\"==typeof arguments[1]&&re(\"shallowObject\"),ne.object(e,{},{name:t,deep:!1})},ref:q,shallow:F,deep:X,struct:ee},ne=function(e,t,n){if(\"string\"==typeof arguments[1])return X.apply(null,arguments);if(pt(e))return e;var r=b(e)?ne.object(e,t,n):Array.isArray(e)?ne.array(e,t):j(e)?ne.map(e,t):T(e)?ne.set(e,t):e;if(r!==e)return r;y(!1)};function re(e){y(\"Expected one or two arguments to observable.\"+e+\". Did you accidentally try to use observable.\"+e+\" as decorator?\")}Object.keys(te).forEach((function(e){return ne[e]=te[e]}));var ie,oe,ae=B(!1,(function(e,t,n,r,i){var o=n.get,s=n.set,u=i[0]||{};!function(e,t,n){var r=Vt(e);n.name=r.name+\".\"+t,n.context=e,r.values[t]=new Ie(n),Object.defineProperty(e,t,function(e){return Ht[e]||(Ht[e]={configurable:Se.computedConfigurable,enumerable:!1,get:function(){return Wt(this).read(this,e)},set:function(t){Wt(this).write(this,e,t)}})}(t))}(e,t,a({get:o,set:s},u))}));ae({equals:U.structural});!function(e){e[e.NOT_TRACKING=-1]=\"NOT_TRACKING\",e[e.UP_TO_DATE=0]=\"UP_TO_DATE\",e[e.POSSIBLY_STALE=1]=\"POSSIBLY_STALE\",e[e.STALE=2]=\"STALE\"}(ie||(ie={})),function(e){e[e.NONE=0]=\"NONE\",e[e.LOG=1]=\"LOG\",e[e.BREAK=2]=\"BREAK\"}(oe||(oe={}));var se=function(e){this.cause=e};function ue(e){return e instanceof se}function ce(e){switch(e.dependenciesState){case ie.UP_TO_DATE:return!1;case ie.NOT_TRACKING:case ie.STALE:return!0;case ie.POSSIBLY_STALE:for(var t=Me(!0),n=ye(),r=e.observing,i=r.length,o=0;o<i;o++){var a=r[o];if(xe(a)){if(Se.disableErrorBoundaries)a.get();else try{a.get()}catch(e){return de(n),ge(t),!0}if(e.dependenciesState===ie.STALE)return de(n),ge(t),!0}}return ve(e),de(n),ge(t),!1}}function le(e){var t=e.observers.length>0;Se.computationDepth>0&&t&&y(!1),Se.allowStateChanges||!t&&\"strict\"!==Se.enforceActions||y(!1)}function pe(e,t,n){var r=Me(!0);ve(e),e.newObserving=new Array(e.observing.length+100),e.unboundDepsCount=0,e.runId=++Se.runId;var i,o=Se.trackingDerivation;if(Se.trackingDerivation=e,!0===Se.disableErrorBoundaries)i=t.call(n);else try{i=t.call(n)}catch(e){i=new se(e)}return Se.trackingDerivation=o,function(e){for(var t=e.observing,n=e.observing=e.newObserving,r=ie.UP_TO_DATE,i=0,o=e.unboundDepsCount,a=0;a<o;a++){0===(s=n[a]).diffValue&&(s.diffValue=1,i!==a&&(n[i]=s),i++),s.dependenciesState>r&&(r=s.dependenciesState)}n.length=i,e.newObserving=null,o=t.length;for(;o--;){0===(s=t[o]).diffValue&&ke(s,e),s.diffValue=0}for(;i--;){var s;1===(s=n[i]).diffValue&&(s.diffValue=0,Le(s,e))}r!==ie.UP_TO_DATE&&(e.dependenciesState=r,e.onBecomeStale())}(e),e.observing.length,ge(r),i}function he(e){var t=e.observing;e.observing=[];for(var n=t.length;n--;)ke(t[n],e);e.dependenciesState=ie.NOT_TRACKING}function fe(e){var t=ye(),n=e();return de(t),n}function ye(){var e=Se.trackingDerivation;return Se.trackingDerivation=null,e}function de(e){Se.trackingDerivation=e}function Me(e){var t=Se.allowStateReads;return Se.allowStateReads=e,t}function ge(e){Se.allowStateReads=e}function ve(e){if(e.dependenciesState!==ie.UP_TO_DATE){e.dependenciesState=ie.UP_TO_DATE;for(var t=e.observing,n=t.length;n--;)t[n].lowestObserverState=ie.UP_TO_DATE}}var be=0,me=1,Ne=Object.getOwnPropertyDescriptor((function(){}),\"name\");Ne&&Ne.configurable;function De(e,t){var n=function(){return je(e,t,this,arguments)};return n.isMobxAction=!0,n}function je(e,t,n,r){var i=function(e,t,n){var r=Ze()&&!!e,i=0;if(r){i=Date.now();var o=n&&n.length||0,a=new Array(o);if(o>0)for(var s=0;s<o;s++)a[s]=n[s];We({type:\"action\",name:e,object:t,arguments:a})}var u=ye();_e();var c=Te(!0),l=Me(!0),p={prevDerivation:u,prevAllowStateChanges:c,prevAllowStateReads:l,notifySpy:r,startTime:i,actionId:me++,parentActionId:be};return be=p.actionId,p}(e,n,r);try{return t.apply(n,r)}catch(e){throw i.error=e,e}finally{!function(e){be!==e.actionId&&y(\"invalid action stack. did you forget to finish an action?\");be=e.parentActionId,void 0!==e.error&&(Se.suppressReactionErrors=!0);we(e.prevAllowStateChanges),ge(e.prevAllowStateReads),Ue(),de(e.prevDerivation),e.notifySpy&&Je({time:Date.now()-e.startTime});Se.suppressReactionErrors=!1}(i)}}function Te(e){var t=Se.allowStateChanges;return Se.allowStateChanges=e,t}function we(e){Se.allowStateChanges=e}var Oe=function(e){function t(t,n,r,i,o){void 0===r&&(r=\"ObservableValue@\"+f()),void 0===i&&(i=!0),void 0===o&&(o=U.default);var a=e.call(this,r)||this;return a.enhancer=n,a.name=r,a.equals=o,a.hasUnreportedChange=!1,a.value=n(t,void 0,r),i&&Ze()&&He({type:\"create\",name:a.name,newValue:\"\"+a.value}),a}return o(t,e),t.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.prototype.set=function(e){var t=this.value;if((e=this.prepareNewValue(e))!==Se.UNCHANGED){var n=Ze();n&&We({type:\"update\",name:this.name,newValue:e,oldValue:t}),this.setNewValue(e),n&&Je()}},t.prototype.prepareNewValue=function(e){if(le(this),yt(this)){var t=Mt(this,{object:this,type:\"update\",newValue:e});if(!t)return Se.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value,this.name),this.equals(this.value,e)?Se.UNCHANGED:e},t.prototype.setNewValue=function(e){var t=this.value;this.value=e,this.reportChanged(),gt(this)&&bt(this,{type:\"update\",object:this,newValue:e,oldValue:t})},t.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},t.prototype.intercept=function(e){return dt(this,e)},t.prototype.observe=function(e,t){return t&&e({object:this,type:\"update\",newValue:this.value,oldValue:void 0}),vt(this,e)},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+\"[\"+this.value+\"]\"},t.prototype.valueOf=function(){return I(this.get())},t}(L);Oe.prototype[O()]=Oe.prototype.valueOf;D(\"ObservableValue\",Oe);var Ie=function(){function e(e){this.dependenciesState=ie.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=ie.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid=\"#\"+f(),this.value=new se(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=oe.NONE,d(e.get,\"missing option for computed: get\"),this.derivation=e.get,this.name=e.name||\"ComputedValue@\"+f(),e.set&&(this.setter=De(this.name+\"-setter\",e.set)),this.equals=e.equals||(e.compareStructural||e.struct?U.structural:U.default),this.scope=e.context,this.requiresReaction=!!e.requiresReaction,this.keepAlive=!!e.keepAlive}return e.prototype.onBecomeStale=function(){!function(e){if(e.lowestObserverState!==ie.UP_TO_DATE)return;e.lowestObserverState=ie.POSSIBLY_STALE;var t=e.observers,n=t.length;for(;n--;){var r=t[n];r.dependenciesState===ie.UP_TO_DATE&&(r.dependenciesState=ie.POSSIBLY_STALE,r.isTracing!==oe.NONE&&Re(r,e),r.onBecomeStale())}}(this)},e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.get=function(){this.isComputing&&y(\"Cycle detected in computation \"+this.name+\": \"+this.derivation),0!==Se.inBatch||0!==this.observers.length||this.keepAlive?(Ye(this),ce(this)&&this.trackAndCompute()&&function(e){if(e.lowestObserverState===ie.STALE)return;e.lowestObserverState=ie.STALE;var t=e.observers,n=t.length;for(;n--;){var r=t[n];r.dependenciesState===ie.POSSIBLY_STALE?r.dependenciesState=ie.STALE:r.dependenciesState===ie.UP_TO_DATE&&(e.lowestObserverState=ie.UP_TO_DATE)}}(this)):ce(this)&&(this.warnAboutUntrackedRead(),_e(),this.value=this.computeValue(!1),Ue());var e=this.value;if(ue(e))throw e.cause;return e},e.prototype.peek=function(){var e=this.computeValue(!1);if(ue(e))throw e.cause;return e},e.prototype.set=function(e){if(this.setter){d(!this.isRunningSetter,\"The setter of computed value '\"+this.name+\"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?\"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else d(!1,!1)},e.prototype.trackAndCompute=function(){Ze()&&He({object:this.scope,type:\"compute\",name:this.name});var e=this.value,t=this.dependenciesState===ie.NOT_TRACKING,n=this.computeValue(!0),r=t||ue(e)||ue(n)||!this.equals(e,n);return r&&(this.value=n),r},e.prototype.computeValue=function(e){var t;if(this.isComputing=!0,Se.computationDepth++,e)t=pe(this,this.derivation,this.scope);else if(!0===Se.disableErrorBoundaries)t=this.derivation.call(this.scope);else try{t=this.derivation.call(this.scope)}catch(e){t=new se(e)}return Se.computationDepth--,this.isComputing=!1,t},e.prototype.suspend=function(){this.keepAlive||(he(this),this.value=void 0)},e.prototype.observe=function(e,t){var n=this,r=!0,i=void 0;return tt((function(){var o=n.get();if(!r||t){var a=ye();e({type:\"update\",object:n,newValue:o,oldValue:i}),de(a)}r=!1,i=o}))},e.prototype.warnAboutUntrackedRead=function(){},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+\"[\"+this.derivation.toString()+\"]\"},e.prototype.valueOf=function(){return I(this.get())},e}();Ie.prototype[O()]=Ie.prototype.valueOf;var xe=D(\"ComputedValue\",Ie),Ae=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},ze=!0,Ee=!1,Se=function(){var e=h();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(ze=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new Ae).version&&(ze=!1),ze?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new Ae):(setTimeout((function(){Ee||y(\"There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`\")}),1),new Ae)}();function Le(e,t){var n=e.observers.length;n&&(e.observersIndexes[t.__mapid]=n),e.observers[n]=t,e.lowestObserverState>t.dependenciesState&&(e.lowestObserverState=t.dependenciesState)}function ke(e,t){if(1===e.observers.length)e.observers.length=0,Ce(e);else{var n=e.observers,r=e.observersIndexes,i=n.pop();if(i!==t){var o=r[t.__mapid]||0;o?r[i.__mapid]=o:delete r[i.__mapid],n[o]=i}delete r[t.__mapid]}}function Ce(e){!1===e.isPendingUnobservation&&(e.isPendingUnobservation=!0,Se.pendingUnobservations.push(e))}function _e(){Se.inBatch++}function Ue(){if(0==--Se.inBatch){Be();for(var e=Se.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation=!1,0===n.observers.length&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBecomeUnobserved()),n instanceof Ie&&n.suspend())}Se.pendingUnobservations=[]}}function Ye(e){var t=Se.trackingDerivation;return null!==t?(t.runId!==e.lastAccessedBy&&(e.lastAccessedBy=t.runId,t.newObserving[t.unboundDepsCount++]=e,e.isBeingObserved||(e.isBeingObserved=!0,e.onBecomeObserved())),!0):(0===e.observers.length&&Se.inBatch>0&&Ce(e),!1)}function Re(e,t){if(console.log(\"[mobx.trace] '\"+e.name+\"' is invalidated due to a change in: '\"+t.name+\"'\"),e.isTracing===oe.BREAK){var n=[];!function e(t,n,r){if(n.length>=1e3)return void n.push(\"(and many more)\");n.push(\"\"+new Array(r).join(\"\\t\")+t.name),t.dependencies&&t.dependencies.forEach((function(t){return e(t,n,r+1)}))}((r=e,ut(Kt(r,i))),n,1),new Function(\"debugger;\\n/*\\nTracing '\"+e.name+\"'\\n\\nYou are entering this break point because derivation '\"+e.name+\"' is being traced and '\"+t.name+\"' is now forcing it to update.\\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\\n\\n\"+(e instanceof Ie?e.derivation.toString().replace(/[*]\\//g,\"/\"):\"\")+\"\\n\\nThe dependencies for this derivation are:\\n\\n\"+n.join(\"\\n\")+\"\\n*/\\n    \")()}var r,i}var Pe=function(){function e(e,t,n,r){void 0===e&&(e=\"Reaction@\"+f()),void 0===r&&(r=!1),this.name=e,this.onInvalidate=t,this.errorHandler=n,this.requiresObservable=r,this.observing=[],this.newObserving=[],this.dependenciesState=ie.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid=\"#\"+f(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=oe.NONE}return e.prototype.onBecomeStale=function(){this.schedule()},e.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Se.pendingReactions.push(this),Be())},e.prototype.isScheduled=function(){return this._isScheduled},e.prototype.runReaction=function(){if(!this.isDisposed){if(_e(),this._isScheduled=!1,ce(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&Ze()&&He({name:this.name,type:\"scheduled-reaction\"})}catch(e){this.reportExceptionInDerivation(e)}}Ue()}},e.prototype.track=function(e){_e();var t,n=Ze();n&&(t=Date.now(),We({name:this.name,type:\"reaction\"})),this._isRunning=!0;var r=pe(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&he(this),ue(r)&&this.reportExceptionInDerivation(r.cause),n&&Je({time:Date.now()-t}),Ue()},e.prototype.reportExceptionInDerivation=function(e){var t=this;if(this.errorHandler)this.errorHandler(e,this);else{if(Se.disableErrorBoundaries)throw e;var n=\"[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '\"+this+\"'\";Se.suppressReactionErrors?console.warn(\"[mobx] (error in reaction '\"+this.name+\"' suppressed, fix error of causing action below)\"):console.error(n,e),Ze()&&He({type:\"error\",name:this.name,message:n,error:\"\"+e}),Se.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(_e(),he(this),Ue()))},e.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e.$mobx=this,e},e.prototype.toString=function(){return\"Reaction[\"+this.name+\"]\"},e.prototype.trace=function(e){void 0===e&&(e=!1),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=!1;\"boolean\"==typeof e[e.length-1]&&(n=e.pop());var r=ht(e);if(!r)return y(!1);r.isTracing===oe.NONE&&console.log(\"[mobx.trace] '\"+r.name+\"' tracing enabled\");r.isTracing=n?oe.BREAK:oe.LOG}(this,e)},e}();var Qe=function(e){return e()};function Be(){Se.inBatch>0||Se.isRunningReactions||Qe(Ve)}function Ve(){Se.isRunningReactions=!0;for(var e=Se.pendingReactions,t=0;e.length>0;){100==++t&&(console.error(\"Reaction doesn't converge to a stable state after 100 iterations. Probably there is a cycle in the reactive function: \"+e[0]),e.splice(0));for(var n=e.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction()}Se.isRunningReactions=!1}var Ge=D(\"Reaction\",Pe);function Ze(){return!!Se.spyListeners.length}function He(e){if(Se.spyListeners.length)for(var t=Se.spyListeners,n=0,r=t.length;n<r;n++)t[n](e)}function We(e){He(a(a({},e),{spyReportStart:!0}))}var $e={spyReportEnd:!0};function Je(e){He(e?a(a({},e),{spyReportEnd:!0}):$e)}function Ke(){y(!1)}function Xe(e){return function(t,n,r){if(r){if(r.value)return{value:De(e,r.value),enumerable:!1,configurable:!0,writable:!0};var i=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return De(e,i.call(this))}}}return Fe(e).apply(this,arguments)}}function Fe(e){return function(t,n,r){Object.defineProperty(t,n,{configurable:!0,enumerable:!1,get:function(){},set:function(t){m(this,n,qe(e,t))}})}}var qe=function(e,t,n,r){return 1===arguments.length&&\"function\"==typeof e?De(e.name||\"<unnamed action>\",e):2===arguments.length&&\"function\"==typeof t?De(e,t):1===arguments.length&&\"string\"==typeof e?Xe(e):!0!==r?Xe(t).apply(null,arguments):void(e[t]=De(e.name||t,n.value))};function et(e,t,n){m(e,t,De(t,n.bind(e)))}function tt(e,t){void 0===t&&(t=l);var n,r=t&&t.name||e.name||\"Autorun@\"+f();if(!t.scheduler&&!t.delay)n=new Pe(r,(function(){this.track(a)}),t.onError,t.requiresObservable);else{var i=rt(t),o=!1;n=new Pe(r,(function(){o||(o=!0,i((function(){o=!1,n.isDisposed||n.track(a)})))}),t.onError,t.requiresObservable)}function a(){e(n)}return n.schedule(),n.getDisposer()}qe.bound=function(e,t,n,r){return!0===r?(et(e,t,n.value),null):n?{configurable:!0,enumerable:!1,get:function(){return et(this,t,n.value||n.initializer.call(this)),this[t]},set:Ke}:{enumerable:!1,configurable:!0,set:function(e){et(this,t,e)},get:function(){}}};var nt=function(e){return e()};function rt(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:nt}function it(e,t,n){void 0===n&&(n=l),\"boolean\"==typeof n&&(n={fireImmediately:n});var r,i,o,a=n.name||\"Reaction@\"+f(),s=qe(a,n.onError?(r=n.onError,i=t,function(){try{return i.apply(this,arguments)}catch(e){r.call(this,e)}}):t),u=!n.scheduler&&!n.delay,c=rt(n),p=!0,h=!1,y=n.compareStructural?U.structural:n.equals||U.default,d=new Pe(a,(function(){p||u?M():h||(h=!0,c(M))}),n.onError,n.requiresObservable);function M(){if(h=!1,!d.isDisposed){var t=!1;d.track((function(){var n=e(d);t=p||!y(o,n),o=n})),p&&n.fireImmediately&&s(o,d),p||!0!==t||s(o,d),p&&(p=!1)}}return d.schedule(),d.getDisposer()}function ot(e,t,n){return at(\"onBecomeUnobserved\",e,t,n)}function at(e,t,n,r){var i=\"function\"==typeof r?Kt(t,n):Kt(t),o=\"function\"==typeof r?r:n,a=i[e];return\"function\"!=typeof a?y(!1):(i[e]=function(){a.call(this),o.call(this)},function(){i[e]=a})}function st(e,t,n,r){var i=(r=J(r)).defaultDecorator||(!1===r.deep?q:X);Q(e),Vt(e,r.name,i.enhancer),_e();try{for(var o in t){var a=Object.getOwnPropertyDescriptor(t,o);0;var s=(n&&o in n?n[o]:a.get?ae:i)(e,o,a,!0);s&&Object.defineProperty(e,o,s)}}finally{Ue()}return e}function ut(e){var t,n,r={name:e.name};return e.observing&&e.observing.length>0&&(r.dependencies=(t=e.observing,n=[],t.forEach((function(e){-1===n.indexOf(e)&&n.push(e)})),n).map(ut)),r}function ct(){this.message=\"FLOW_CANCELLED\"}function lt(e,t){if(null==e)return!1;if(void 0!==t){if(Jt(e)){var n=e.$mobx;return n.values&&!!n.values[t]}return!1}return Jt(e)||!!e.$mobx||k(e)||Ge(e)||xe(e)}function pt(e){return 1!==arguments.length&&y(!1),lt(e)}ct.prototype=Object.create(Error.prototype);function ht(e){switch(e.length){case 0:return Se.trackingDerivation;case 1:return Kt(e[0]);case 2:return Kt(e[0],e[1])}}function ft(e,t){void 0===t&&(t=void 0),_e();try{return e.apply(t)}finally{Ue()}}function yt(e){return void 0!==e.interceptors&&e.interceptors.length>0}function dt(e,t){var n=e.interceptors||(e.interceptors=[]);return n.push(t),M((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function Mt(e,t){var n=ye();try{var r=e.interceptors;if(r)for(var i=0,o=r.length;i<o&&(d(!(t=r[i](t))||t.type,\"Intercept handlers should return nothing or a change object\"),t);i++);return t}finally{de(n)}}function gt(e){return void 0!==e.changeListeners&&e.changeListeners.length>0}function vt(e,t){var n=e.changeListeners||(e.changeListeners=[]);return n.push(t),M((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function bt(e,t){var n=ye(),r=e.changeListeners;if(r){for(var i=0,o=(r=r.slice()).length;i<o;i++)r[i](t);de(n)}}var mt,Nt,Dt,jt,Tt=(mt=!1,Nt={},Object.defineProperty(Nt,\"0\",{set:function(){mt=!0}}),Object.create(Nt)[0]=1,!1===mt),wt=0,Ot=function(){};Dt=Ot,jt=Array.prototype,void 0!==Object.setPrototypeOf?Object.setPrototypeOf(Dt.prototype,jt):void 0!==Dt.prototype.__proto__?Dt.prototype.__proto__=jt:Dt.prototype=jt,Object.isFrozen(Array)&&[\"constructor\",\"push\",\"shift\",\"concat\",\"pop\",\"unshift\",\"replace\",\"find\",\"findIndex\",\"splice\",\"reverse\",\"sort\"].forEach((function(e){Object.defineProperty(Ot.prototype,e,{configurable:!0,writable:!0,value:Array.prototype[e]})}));var It=function(){function e(e,t,n,r){this.array=n,this.owned=r,this.values=[],this.lastKnownLength=0,this.atom=new L(e||\"ObservableArray@\"+f()),this.enhancer=function(n,r){return t(n,r,e+\"[..]\")}}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.dehanceValues=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},e.prototype.intercept=function(e){return dt(this,e)},e.prototype.observe=function(e,t){return void 0===t&&(t=!1),t&&e({object:this.array,type:\"splice\",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),vt(this,e)},e.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},e.prototype.setArrayLength=function(e){if(\"number\"!=typeof e||e<0)throw new Error(\"[mobx.array] Out of range: \"+e);var t=this.values.length;if(e!==t)if(e>t){for(var n=new Array(e-t),r=0;r<e-t;r++)n[r]=void 0;this.spliceWithArray(t,0,n)}else this.spliceWithArray(e,t-e)},e.prototype.updateArrayLength=function(e,t){if(e!==this.lastKnownLength)throw new Error(\"[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?\");this.lastKnownLength+=t,t>0&&e+t+1>wt&&St(e+t+1)},e.prototype.spliceWithArray=function(e,t,n){var r=this;le(this.atom);var i=this.values.length;if(void 0===e?e=0:e>i?e=i:e<0&&(e=Math.max(0,i+e)),t=1===arguments.length?i-e:null==t?0:Math.max(0,Math.min(t,i-e)),void 0===n&&(n=c),yt(this)){var o=Mt(this,{object:this.array,type:\"splice\",index:e,removedCount:t,added:n});if(!o)return c;t=o.removedCount,n=o.added}var a=(n=0===n.length?n:n.map((function(e){return r.enhancer(e,void 0)}))).length-t;this.updateArrayLength(i,a);var s=this.spliceItemsIntoValues(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice(e,n,s),this.dehanceValues(s)},e.prototype.spliceItemsIntoValues=function(e,t,n){var r;if(n.length<1e4)return(r=this.values).splice.apply(r,u([e,t],n));var i=this.values.slice(e,e+t);return this.values=this.values.slice(0,e).concat(n,this.values.slice(e+t)),i},e.prototype.notifyArrayChildUpdate=function(e,t,n){var r=!this.owned&&Ze(),i=gt(this),o=i||r?{object:this.array,type:\"update\",index:e,newValue:t,oldValue:n}:null;r&&We(a(a({},o),{name:this.atom.name})),this.atom.reportChanged(),i&&bt(this,o),r&&Je()},e.prototype.notifyArraySplice=function(e,t,n){var r=!this.owned&&Ze(),i=gt(this),o=i||r?{object:this.array,type:\"splice\",index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;r&&We(a(a({},o),{name:this.atom.name})),this.atom.reportChanged(),i&&bt(this,o),r&&Je()},e}(),xt=function(e){function t(t,n,r,i){void 0===r&&(r=\"ObservableArray@\"+f()),void 0===i&&(i=!1);var o=e.call(this)||this,a=new It(r,n,o,i);if(N(o,\"$mobx\",a),t&&t.length){var s=Te(!0);o.spliceWithArray(0,0,t),we(s)}return Tt&&Object.defineProperty(a.array,\"0\",At),o}return o(t,e),t.prototype.intercept=function(e){return this.$mobx.intercept(e)},t.prototype.observe=function(e,t){return void 0===t&&(t=!1),this.$mobx.observe(e,t)},t.prototype.clear=function(){return this.splice(0)},t.prototype.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),e.map((function(e){return kt(e)?e.peek():e})))},t.prototype.replace=function(e){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,e)},t.prototype.toJS=function(){return this.slice()},t.prototype.toJSON=function(){return this.toJS()},t.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},t.prototype.find=function(e,t,n){void 0===n&&(n=0);var r=this.findIndex.apply(this,arguments);return-1===r?void 0:this.get(r)},t.prototype.findIndex=function(e,t,n){void 0===n&&(n=0);for(var r=this.peek(),i=r.length,o=n;o<i;o++)if(e.call(t,r[o],o,this))return o;return-1},t.prototype.splice=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(e);case 2:return this.$mobx.spliceWithArray(e,t)}return this.$mobx.spliceWithArray(e,t,n)},t.prototype.spliceWithArray=function(e,t,n){return this.$mobx.spliceWithArray(e,t,n)},t.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.$mobx;return n.spliceWithArray(n.values.length,0,e),n.values.length},t.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},t.prototype.shift=function(){return this.splice(0,1)[0]},t.prototype.unshift=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.$mobx;return n.spliceWithArray(0,0,e),n.values.length},t.prototype.reverse=function(){var e=this.slice();return e.reverse.apply(e,arguments)},t.prototype.sort=function(e){var t=this.slice();return t.sort.apply(t,arguments)},t.prototype.remove=function(e){var t=this.$mobx.dehanceValues(this.$mobx.values).indexOf(e);return t>-1&&(this.splice(t,1),!0)},t.prototype.move=function(e,t){function n(e){if(e<0)throw new Error(\"[mobx.array] Index out of bounds: \"+e+\" is negative\");var t=this.$mobx.values.length;if(e>=t)throw new Error(\"[mobx.array] Index out of bounds: \"+e+\" is not smaller than \"+t)}if(n.call(this,e),n.call(this,t),e!==t){var r,i=this.$mobx.values;r=e<t?u(i.slice(0,e),i.slice(e+1,t+1),[i[e]],i.slice(t+1)):u(i.slice(0,t),[i[e]],i.slice(t,e),i.slice(e+1)),this.replace(r)}},t.prototype.get=function(e){var t=this.$mobx;if(t){if(e<t.values.length)return t.atom.reportObserved(),t.dehanceValue(t.values[e]);console.warn(\"[mobx.array] Attempt to read an array index (\"+e+\") that is out of bounds (\"+t.values.length+\"). Please check length first. Out of bound indices will not be tracked by MobX\")}},t.prototype.set=function(e,t){var n=this.$mobx,r=n.values;if(e<r.length){le(n.atom);var i=r[e];if(yt(n)){var o=Mt(n,{type:\"update\",object:this,index:e,newValue:t});if(!o)return;t=o.newValue}(t=n.enhancer(t,i))!==i&&(r[e]=t,n.notifyArrayChildUpdate(e,t,i))}else{if(e!==r.length)throw new Error(\"[mobx.array] Index out of bounds, \"+e+\" is larger than \"+r.length);n.spliceWithArray(e,0,[t])}},t}(Ot);A(xt.prototype,(function(){this.$mobx.atom.reportObserved();var e=this,t=0;return z({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})})),Object.defineProperty(xt.prototype,\"length\",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(e){this.$mobx.setArrayLength(e)}}),m(xt.prototype,E(),\"Array\"),[\"every\",\"filter\",\"forEach\",\"indexOf\",\"join\",\"lastIndexOf\",\"map\",\"reduce\",\"reduceRight\",\"slice\",\"some\",\"toString\",\"toLocaleString\"].forEach((function(e){var t=Array.prototype[e];d(\"function\"==typeof t,\"Base function not defined on Array prototype: '\"+e+\"'\"),m(xt.prototype,e,(function(){return t.apply(this.peek(),arguments)}))})),function(e,t){for(var n=0;n<t.length;n++)m(e,t[n],e[t[n]])}(xt.prototype,[\"constructor\",\"intercept\",\"observe\",\"clear\",\"concat\",\"get\",\"replace\",\"toJS\",\"toJSON\",\"peek\",\"find\",\"findIndex\",\"splice\",\"spliceWithArray\",\"push\",\"pop\",\"set\",\"shift\",\"unshift\",\"reverse\",\"sort\",\"remove\",\"move\",\"toString\",\"toLocaleString\"]);var At=zt(0);function zt(e){return{enumerable:!1,configurable:!1,get:function(){return this.get(e)},set:function(t){this.set(e,t)}}}function Et(e){Object.defineProperty(xt.prototype,\"\"+e,zt(e))}function St(e){for(var t=wt;t<e;t++)Et(t);wt=e}St(1e3);var Lt=D(\"ObservableArrayAdministration\",It);function kt(e){return v(e)&&Lt(e.$mobx)}var Ct={},_t=function(){function e(e,t,n){if(void 0===t&&(t=G),void 0===n&&(n=\"ObservableMap@\"+f()),this.enhancer=t,this.name=n,this.$mobx=Ct,this._keys=new xt(void 0,Z,this.name+\".keys()\",!0),\"function\"!=typeof Map)throw new Error(\"mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js\");this._data=new Map,this._hasMap=new Map,this.merge(e)}return e.prototype._has=function(e){return this._data.has(e)},e.prototype.has=function(e){var t=this;if(!Se.trackingDerivation)return this._has(e);var n=this._hasMap.get(e);if(!n){var r=n=new Oe(this._has(e),Z,this.name+\".\"+Ut(e)+\"?\",!1);this._hasMap.set(e,r),ot(r,(function(){return t._hasMap.delete(e)}))}return n.get()},e.prototype.set=function(e,t){var n=this._has(e);if(yt(this)){var r=Mt(this,{type:n?\"update\":\"add\",object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this._updateValue(e,t):this._addValue(e,t),this},e.prototype.delete=function(e){var t=this;if(yt(this)&&!(i=Mt(this,{type:\"delete\",object:this,name:e})))return!1;if(this._has(e)){var n=Ze(),r=gt(this),i=r||n?{type:\"delete\",object:this,oldValue:this._data.get(e).value,name:e}:null;return n&&We(a(a({},i),{name:this.name,key:e})),ft((function(){t._keys.remove(e),t._updateHasMapEntry(e,!1),t._data.get(e).setNewValue(void 0),t._data.delete(e)})),r&&bt(this,i),n&&Je(),!0}return!1},e.prototype._updateHasMapEntry=function(e,t){var n=this._hasMap.get(e);n&&n.setNewValue(t)},e.prototype._updateValue=function(e,t){var n=this._data.get(e);if((t=n.prepareNewValue(t))!==Se.UNCHANGED){var r=Ze(),i=gt(this),o=i||r?{type:\"update\",object:this,oldValue:n.value,name:e,newValue:t}:null;r&&We(a(a({},o),{name:this.name,key:e})),n.setNewValue(t),i&&bt(this,o),r&&Je()}},e.prototype._addValue=function(e,t){var n=this;ft((function(){var r=new Oe(t,n.enhancer,n.name+\".\"+Ut(e),!1);n._data.set(e,r),t=r.value,n._updateHasMapEntry(e,!0),n._keys.push(e)}));var r=Ze(),i=gt(this),o=i||r?{type:\"add\",object:this,name:e,newValue:t}:null;r&&We(a(a({},o),{name:this.name,key:e})),i&&bt(this,o),r&&Je()},e.prototype.get=function(e){return this.has(e)?this.dehanceValue(this._data.get(e).get()):this.dehanceValue(void 0)},e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.keys=function(){return this._keys[x()]()},e.prototype.values=function(){var e=this,t=0;return z({next:function(){return t<e._keys.length?{value:e.get(e._keys[t++]),done:!1}:{value:void 0,done:!0}}})},e.prototype.entries=function(){var e=this,t=0;return z({next:function(){if(t<e._keys.length){var n=e._keys[t++];return{value:[n,e.get(n)],done:!1}}return{done:!0}}})},e.prototype.forEach=function(e,t){var n=this;this._keys.forEach((function(r){return e.call(t,n.get(r),r,n)}))},e.prototype.merge=function(e){var t=this;return Yt(e)&&(e=e.toJS()),ft((function(){b(e)?Object.keys(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=s(e,2),r=n[0],i=n[1];return t.set(r,i)})):j(e)?e.constructor!==Map?y(\"Cannot initialize from classes that inherit from Map: \"+e.constructor.name):e.forEach((function(e,n){return t.set(n,e)})):null!=e&&y(\"Cannot initialize map from \"+e)})),this},e.prototype.clear=function(){var e=this;ft((function(){fe((function(){e._keys.slice().forEach((function(t){return e.delete(t)}))}))}))},e.prototype.replace=function(e){var t=this;return ft((function(){for(var n,r=j(n=e)||Yt(n)?n:Array.isArray(n)?new Map(n):b(n)?new Map(Object.entries(n)):y(\"Cannot convert to map from '\"+n+\"'\"),i=t._keys,o=Array.from(r.keys()),a=!1,s=0;s<i.length;s++){var u=i[s];i.length===o.length&&u!==o[s]&&(a=!0),r.has(u)||(a=!0,t.delete(u))}r.forEach((function(e,n){t._data.has(n)||(a=!0),t.set(n,e)})),a&&t._keys.replace(o)})),this},Object.defineProperty(e.prototype,\"size\",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.toPOJO=function(){var e=this,t={};return this._keys.forEach((function(n){return t[\"symbol\"==typeof n?n:Ut(n)]=e.get(n)})),t},e.prototype.toJS=function(){var e=this,t=new Map;return this._keys.forEach((function(n){return t.set(n,e.get(n))})),t},e.prototype.toJSON=function(){return this.toPOJO()},e.prototype.toString=function(){var e=this;return this.name+\"[{ \"+this._keys.map((function(t){return Ut(t)+\": \"+e.get(t)})).join(\", \")+\" }]\"},e.prototype.observe=function(e,t){return vt(this,e)},e.prototype.intercept=function(e){return dt(this,e)},e}();function Ut(e){return e&&e.toString?e.toString():new String(e).toString()}A(_t.prototype,(function(){return this.entries()})),N(_t.prototype,E(),\"Map\");var Yt=D(\"ObservableMap\",_t),Rt={},Pt=function(){function e(e,t,n){if(void 0===t&&(t=G),void 0===n&&(n=\"ObservableSet@\"+f()),this.name=n,this.$mobx=Rt,this._data=new Set,this._atom=C(this.name),\"function\"!=typeof Set)throw new Error(\"mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js\");this.enhancer=function(e,r){return t(e,r,n)},e&&this.replace(e)}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.clear=function(){var e=this;ft((function(){fe((function(){e._data.forEach((function(t){e.delete(t)}))}))}))},e.prototype.forEach=function(e,t){var n=this;this._data.forEach((function(r){e.call(t,r,r,n)}))},Object.defineProperty(e.prototype,\"size\",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.add=function(e){var t=this;if((le(this._atom),yt(this))&&!(i=Mt(this,{type:\"add\",object:this,newValue:e})))return this;if(!this.has(e)){ft((function(){t._data.add(t.enhancer(e,void 0)),t._atom.reportChanged()}));var n=Ze(),r=gt(this),i=r||n?{type:\"add\",object:this,newValue:e}:null;0,r&&bt(this,i)}return this},e.prototype.delete=function(e){var t=this;if(yt(this)&&!(i=Mt(this,{type:\"delete\",object:this,oldValue:e})))return!1;if(this.has(e)){var n=Ze(),r=gt(this),i=r||n?{type:\"delete\",object:this,oldValue:e}:null;return ft((function(){t._atom.reportChanged(),t._data.delete(e)})),r&&bt(this,i),!0}return!1},e.prototype.has=function(e){return this._atom.reportObserved(),this._data.has(this.dehanceValue(e))},e.prototype.entries=function(){var e=0,t=w(this.keys()),n=w(this.values());return z({next:function(){var r=e;return e+=1,r<n.length?{value:[t[r],n[r]],done:!1}:{done:!0}}})},e.prototype.keys=function(){return this.values()},e.prototype.values=function(){this._atom.reportObserved();var e,t=this,n=0;return void 0!==this._data.values?e=w(this._data.values()):(e=[],this._data.forEach((function(t){return e.push(t)}))),z({next:function(){return n<e.length?{value:t.dehanceValue(e[n++]),done:!1}:{done:!0}}})},e.prototype.replace=function(e){var t=this;return Qt(e)&&(e=e.toJS()),ft((function(){Array.isArray(e)||T(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&y(\"Cannot initialize set from \"+e)})),this},e.prototype.observe=function(e,t){return vt(this,e)},e.prototype.intercept=function(e){return dt(this,e)},e.prototype.toJS=function(){return new Set(this)},e.prototype.toString=function(){return this.name+\"[ \"+w(this.keys()).join(\", \")+\" ]\"},e}();A(Pt.prototype,(function(){return this.values()})),N(Pt.prototype,E(),\"Set\");var Qt=D(\"ObservableSet\",Pt),Bt=function(){function e(e,t,n){this.target=e,this.name=t,this.defaultEnhancer=n,this.values={}}return e.prototype.read=function(e,t){if(this.target===e||(this.illegalAccess(e,t),this.values[t]))return this.values[t].get()},e.prototype.write=function(e,t,n){var r=this.target;r!==e&&this.illegalAccess(e,t);var i=this.values[t];if(i instanceof Ie)i.set(n);else{if(yt(this)){if(!(u=Mt(this,{type:\"update\",object:r,name:t,newValue:n})))return;n=u.newValue}if((n=i.prepareNewValue(n))!==Se.UNCHANGED){var o=gt(this),s=Ze(),u=o||s?{type:\"update\",object:r,oldValue:i.value,name:t,newValue:n}:null;s&&We(a(a({},u),{name:this.name,key:t})),i.setNewValue(n),o&&bt(this,u),s&&Je()}}},e.prototype.remove=function(e){if(this.values[e]){var t=this.target;if(yt(this))if(!(o=Mt(this,{object:t,name:e,type:\"remove\"})))return;try{_e();var n=gt(this),r=Ze(),i=this.values[e].get();this.keys&&this.keys.remove(e),delete this.values[e],delete this.target[e];var o=n||r?{type:\"remove\",object:t,oldValue:i,name:e}:null;r&&We(a(a({},o),{name:this.name,key:e})),n&&bt(this,o),r&&Je()}finally{Ue()}}},e.prototype.illegalAccess=function(e,t){console.warn(\"Property '\"+t+\"' of '\"+e+\"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner\")},e.prototype.observe=function(e,t){return vt(this,e)},e.prototype.intercept=function(e){return dt(this,e)},e.prototype.getKeys=function(){var e=this;return void 0===this.keys&&(this.keys=new xt(Object.keys(this.values).filter((function(t){return e.values[t]instanceof Oe})),Z,\"keys(\"+this.name+\")\",!0)),this.keys.slice()},e}();function Vt(e,t,n){void 0===t&&(t=\"\"),void 0===n&&(n=G);var r=e.$mobx;return r||(b(e)||(t=(e.constructor.name||\"ObservableObject\")+\"@\"+f()),t||(t=\"ObservableObject@\"+f()),N(e,\"$mobx\",r=new Bt(e,t,n)),r)}function Gt(e,t,n,r){var i=Vt(e);if(yt(i)){var o=Mt(i,{object:e,name:t,type:\"add\",newValue:n});if(!o)return;n=o.newValue}n=(i.values[t]=new Oe(n,r,i.name+\".\"+t,!1)).value,Object.defineProperty(e,t,function(e){return Zt[e]||(Zt[e]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.read(this,e)},set:function(t){this.$mobx.write(this,e,t)}})}(t)),i.keys&&i.keys.push(t),function(e,t,n,r){var i=gt(e),o=Ze(),s=i||o?{type:\"add\",object:t,name:n,newValue:r}:null;o&&We(a(a({},s),{name:e.name,key:n}));i&&bt(e,s);o&&Je()}(i,e,t,n)}var Zt=Object.create(null),Ht=Object.create(null);function Wt(e){var t=e.$mobx;return t||(Q(e),e.$mobx)}var $t=D(\"ObservableObjectAdministration\",Bt);function Jt(e){return!!v(e)&&(Q(e),$t(e.$mobx))}function Kt(e,t){if(\"object\"==typeof e&&null!==e){if(kt(e))return void 0!==t&&y(!1),e.$mobx.atom;if(Qt(e))return e.$mobx;if(Yt(e)){var n=e;return void 0===t?Kt(n._keys):((r=n._data.get(t)||n._hasMap.get(t))||y(!1),r)}var r;if(Q(e),t&&!e.$mobx&&e[t],Jt(e))return t?((r=e.$mobx.values[t])||y(!1),r):y(!1);if(k(e)||xe(e)||Ge(e))return e}else if(\"function\"==typeof e&&Ge(e.$mobx))return e.$mobx;return y(!1)}function Xt(e,t){return e||y(\"Expecting some object\"),void 0!==t?Xt(Kt(e,t)):k(e)||xe(e)||Ge(e)||Yt(e)||Qt(e)?e:(Q(e),e.$mobx?e.$mobx:void y(!1))}var Ft=Object.prototype.toString;function qt(e,t,n){return void 0===n&&(n=-1),function e(t,n,r,i,o){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return!1;if(t!=t)return n!=n;var a=typeof t;if(\"function\"!==a&&\"object\"!==a&&\"object\"!=typeof n)return!1;t=en(t),n=en(n);var s=Ft.call(t);if(s!==Ft.call(n))return!1;switch(s){case\"[object RegExp]\":case\"[object String]\":return\"\"+t==\"\"+n;case\"[object Number]\":return+t!=+t?+n!=+n:0==+t?1/+t==1/n:+t==+n;case\"[object Date]\":case\"[object Boolean]\":return+t==+n;case\"[object Symbol]\":return\"undefined\"!=typeof Symbol&&Symbol.valueOf.call(t)===Symbol.valueOf.call(n)}var u=\"[object Array]\"===s;if(!u){if(\"object\"!=typeof t||\"object\"!=typeof n)return!1;var c=t.constructor,l=n.constructor;if(c!==l&&!(\"function\"==typeof c&&c instanceof c&&\"function\"==typeof l&&l instanceof l)&&\"constructor\"in t&&\"constructor\"in n)return!1}if(0===r)return!1;r<0&&(r=-1);o=o||[];var p=(i=i||[]).length;for(;p--;)if(i[p]===t)return o[p]===n;if(i.push(t),o.push(n),u){if((p=t.length)!==n.length)return!1;for(;p--;)if(!e(t[p],n[p],r-1,i,o))return!1}else{var h=Object.keys(t),f=void 0;if(p=h.length,Object.keys(n).length!==p)return!1;for(;p--;)if(f=h[p],!tn(n,f)||!e(t[f],n[f],r-1,i,o))return!1}return i.pop(),o.pop(),!0}(e,t,n)}function en(e){return kt(e)?e.peek():j(e)||Yt(e)||T(e)||Qt(e)?w(e.entries()):e}function tn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}\"object\"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return Se.spyListeners.push(e),M((function(){Se.spyListeners=Se.spyListeners.filter((function(t){return t!==e}))}))},extras:{getDebugName:function(e,t){return(void 0!==t?Kt(e,t):Jt(e)||Yt(e)||Qt(e)?Xt(e):Kt(e)).name}},$mobx:\"$mobx\"})}).call(this,n(10),n(11))},function(e,t){e.exports=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjlweCIgaGVpZ2h0PSIyNXB4IiB2aWV3Qm94PSIwIDAgMjkgMjUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5hdWRpbyAoMik8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0i6aG16Z2iMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9ImF1ZGlvLSgyKSIgZmlsbD0iIzMzMzMzMyIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgPHBhdGggZD0iTTI1LjQzMDUxODIsMTEuNTAwNTQ0OCBMMjUuMjgwOTU4OSwxMS41MDA1NDQ4IEwyNS4yODA5NTg5LDEwLjMxNDkyMTcgQzI1LjI4MDk1ODksNC42Mjc1MjMxOSAyMC40NDg4MzQyLDAgMTQuNTA5MDY0MiwwIEM4LjU2OTI5NDI0LDAgMy43MzcxNjk0Nyw0LjYyNzUyMzE5IDMuNzM3MTY5NDcsMTAuMzE0OTIxNyBMMy43MzcxNjk0NywxMS41MDA1NDQ4IEwzLjU2NzY2ODk0LDExLjUwMDU0NDggQzEuNjAwNzM3NjQsMTEuNTAwNTQ0OCAwLDEzLjAzMjg3MyAwLDE0LjkxNzI5NTMgTDAsMTcuODQ5OTE2MiBDMCwxOS43MzQzMzg1IDEuNjAwNzM3NjQsMjEuMjY2NjY2NyAzLjU2NzY2ODk0LDIxLjI2NjY2NjcgTDUuMzM2MDk0MjcsMjEuMjY2NjY2NyBDNi4xNzkwNjQ4MiwyMS4yNjY2NjY3IDYuODYyNTA1NDcsMjAuNjExODc5MyA2Ljg2MjUwNTQ3LDE5LjgwNTI5NjMgTDYuODYyNTA1NDcsMTIuOTYxOTE1MiBDNi44NjI1MDU0NywxMi4xNTQ0MzQgNi4xNzkwNjQ4MiwxMS41MDA1NDQ4IDUuMzM2MDk0MjcsMTEuNTAwNTQ0OCBMNS4yNjM1ODA2NywxMS41MDA1NDQ4IEw1LjI2MzU4MDY3LDEwLjMxNDkyMTcgQzUuMjYzNTgwNjcsNS40MzMyMDgwNCA5LjQxMTM1ODM4LDEuNDYyMjY4NTkgMTQuNTA5MDY0MiwxLjQ2MjI2ODU5IEMxOS42MDY3NywxLjQ2MjI2ODU5IDIzLjc1NDU0NzcsNS40MzQxMDYyNCAyMy43NTQ1NDc3LDEwLjMxNDkyMTcgTDIzLjc1NDU0NzcsMTEuNTAwNTQ0OCBMMjMuNjYyOTk5MywxMS41MDA1NDQ4IEMyMi44MjAwMjg4LDExLjUwMDU0NDggMjIuMTM2NTg4MSwxMi4xNTUzMzIyIDIyLjEzNjU4ODEsMTIuOTYxOTE1MiBMMjIuMTM2NTg4MSwxOS44MDQzOTgxIEMyMi4xMzY1ODgxLDIwLjYxMTg3OTMgMjIuODIwMDI4OCwyMS4yNjU3Njg1IDIzLjY2Mjk5OTMsMjEuMjY1NzY4NSBMMjUuNDMxNDI0NiwyMS4yNjU3Njg1IEMyNy4zOTkyNjI0LDIxLjI2NTc2ODUgMjksMTkuNzMzNDQwMyAyOSwxNy44NDkwMTggTDI5LDE0LjkxNjM5NzEgQzI4Ljk5OTA5MzYsMTMuMDMyODczIDI3LjM5ODM1NTksMTEuNTAwNTQ0OCAyNS40MzA1MTgyLDExLjUwMDU0NDggWiBNNS4zMzcwMDA2OSwxMi45NjE5MTUyIEw1LjMzNzAwMDY5LDE5LjgwNDM5ODEgTDMuNTY3NjY4OTQsMTkuODA0Mzk4MSBDMi40NDQ2MTQ2MiwxOS44MDQzOTgxIDEuNTI2NDExMiwxOC45MjQxNjI3IDEuNTI2NDExMiwxNy44NDkwMTggTDEuNTI2NDExMiwxNC45MTYzOTcxIEMxLjUyNjQxMTIsMTMuODQxMjUyNCAyLjQ0NDYxNDYyLDEyLjk2MTAxNyAzLjU2NzY2ODk0LDEyLjk2MTAxNyBMNS4zMzcwMDA2OSwxMi45NjEwMTcgTDUuMzM3MDAwNjksMTIuOTYxOTE1MiBaIE0yNy40NzI2ODI0LDE3Ljg0OTAxOCBDMjcuNDcyNjgyNCwxOC45MjQxNjI3IDI2LjU1NDQ3OSwxOS44MDQzOTgxIDI1LjQzMDUxODIsMTkuODA0Mzk4MSBMMjMuNjYyMDkyOSwxOS44MDQzOTgxIEwyMy42NjIwOTI5LDEyLjk2MTkxNTIgTDI1LjQzMDUxODIsMTIuOTYxOTE1MiBDMjYuNTUzNTcyNSwxMi45NjE5MTUyIDI3LjQ3MjY4MjQsMTMuODQxMjUyNCAyNy40NzI2ODI0LDE0LjkxNzI5NTMgTDI3LjQ3MjY4MjQsMTcuODQ5MDE4IEwyNy40NzI2ODI0LDE3Ljg0OTAxOCBaIiBpZD0i5b2i54q2Ij48L3BhdGg+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNi41OTYwNTI2LDI0LjE2NjY2NjcgQzE2LjIyNDkwODgsMjQuMTY3MjA3MSAxNS45MTM3MTA1LDIzLjg5MDA3ODIgMTUuODc2MTQzOSwyMy41MjU1NzE1IEwxNC45NTk3MzYyLDE0LjYxMjg4MTYgTDE0LjAyNjU4NjUsMTkuODQ1MTUwOCBDMTMuOTcyMTM4OSwyMC4xNTk2OTMzIDEzLjcxMjY5MjMsMjAuNDAwMjY4NyAxMy4zOTEyODU2LDIwLjQzNDI0MjIgQzEzLjA2OTg3ODksMjAuNDY4MjE1NyAxMi43NjQ3MTc4LDIwLjI4NzMyMDggMTIuNjQ0MDQ0NiwxOS45OTEyODkgTDExLjIwNTk4OTYsMTYuNTIyMjQ2NyBMMTAuNzU2NTk3NCwxOC40Nzg1ODQ3IEMxMC42ODE2MzQ2LDE4LjgwMzY4NzQgMTAuMzg4NTMzMywxOS4wMzQxNTI0IDEwLjA1MDc4NzMsMTkuMDMzNTYxOSBMOC40NTY3NjY2NywxOS4wMzM1NjE5IEM4LjI2NTEzMzg3LDE5LjAzMzc5MjcgOC4wODEyNTY5OCwxOC45NTg4NjM3IDcuOTQ1NTg2ODgsMTguODI1MjU4MyBDNy44MDk5MTY3OCwxOC42OTE2NTI5IDcuNzMzNTY2ODksMTguNTEwMzE1NSA3LjczMzMzMzMzLDE4LjMyMTEzODIgQzcuNzMzNTY2ODksMTguMTMxOTYxIDcuODA5OTE2NzgsMTcuOTUwNjIzNSA3Ljk0NTU4Njg4LDE3LjgxNzAxODEgQzguMDgxMjU2OTgsMTcuNjgzNDEyNyA4LjI2NTEzMzg3LDE3LjYwODQ4MzcgOC40NTY3NjY2NywxNy42MDg3MTQ1IEw5LjQ3Mjc0NTUyLDE3LjYwODcxNDUgTDEwLjMwMTkxODIsMTMuOTk5NjIzMSBDMTAuMzczNjM5LDEzLjY5NzE5MzQgMTAuNjM0NzI2MywxMy40NzQ5MjA5IDEwLjk0ODI5NiwxMy40NDkzMzk4IEMxMS4yNjE4NjU3LDEzLjQyMzc1ODYgMTEuNTU2MzcyNCwxMy42MDA3MDU1IDExLjY3NzQxMDgsMTMuODg3NDA5OSBMMTMuMDM1MjgwMiwxNy4xNjMzNDEgTDE0LjQzOTg1MTEsOS4yODkyNzYwNCBDMTQuNTA0NjU5OSw4LjkzOTM5MjYzIDE0LjgxOTAyODksOC42ODg5NzQ2NiAxNS4xNzkxNDU0LDguNzAwMzczOTMgQzE1LjUzOTgzMTMsOC43MTI4NjAzMiAxNS44MzU4Njk5LDguOTg2MTY3MTUgMTUuODcyNjE5Miw5LjM0MDU5ODM5IEwxNi45NzE0MjcyLDIwLjAxOTk5NDcgTDE3LjU3ODU0NzMsMTguMTg0NTY4NiBDMTcuNjc1ODg3OCwxNy44OTA4ODIgMTcuOTUzNzE2MiwxNy42OTI0Njc2IDE4LjI2NjczNDIsMTcuNjkzMDkxOSBMMTkuNTQxNzc0NCwxNy42OTMwOTE5IEMxOS44MDgxMTEzLDE3LjY4MDA5NTEgMjAuMDYwMDQ5LDE3LjgxMjk2ODMgMjAuMTk3MTYzOCwxOC4wMzg3NDc0IEMyMC4zMzQyNzg3LDE4LjI2NDUyNjYgMjAuMzM0Mjc4NywxOC41NDY1MDQ3IDIwLjE5NzE2MzgsMTguNzcyMjgzOCBDMjAuMDYwMDQ5LDE4Ljk5ODA2MyAxOS44MDgxMTEzLDE5LjEzMDkzNjEgMTkuNTQxNzc0NCwxOS4xMTc5MzkzIEwxOC43OTE5MDYyLDE5LjExNzkzOTMgTDE3LjI4NTEyMDYsMjMuNjczNDQ5NSBDMTcuMTg3MTIzLDIzLjk2NzI4NDUgMTYuOTA5NDE4MywyNC4xNjYwNTgxIDE2LjU5NjA1MjYsMjQuMTY2NjY2NyIgaWQ9Iui3r+W+hCI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+\"},function(e,n){e.exports=t},function(e,t,n){var r=n(7),i=n(8);\"string\"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,\"\"]]);var o={insert:\"head\",singleton:!1};r(i,o);e.exports=i.locals||{}},function(e,t){e.exports=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzZweCIgaGVpZ2h0PSIzMnB4IiB2aWV3Qm94PSIwIDAgMzYgMzIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT7nvJbnu4QgMjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSLpobXpnaIxIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0i57yW57uELTIiPgogICAgICAgICAgICA8ZyBpZD0i5aOw6Z+zIiBmaWxsPSIjRkZGRkZGIiBmaWxsLXJ1bGU9Im5vbnplcm8iPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTE1LjkzMDg4NTEsMC42MTgyMDU2MjUgTDcuMTgxNzAzNjYsNi40NDQwMDc4NCBMMy42MDM0NDU2Miw2LjQ0NDAwNzg0IEMxLjYyODMzMTAzLDYuNDQ0MDA3ODQgMC4wMjUxODc1OTM3LDguMjc3NjY4NjMgMC4wMjUxODc1OTM3LDEwLjUzMDQ1MTkgTDAuMDI1MTg3NTkzNywyMS40MzI4NzQ5IEMwLjAyNTE4NzU5MzcsMjMuNjkwODk3MiAxLjYyODMzMSwyNS41MTkzMTg5IDMuNjAzNDQ1NjIsMjUuNTE5MzE4OSBMNy4xODE3MDM2NiwyNS41MTkzMTg5IEwxNS45MjU2NDYsMzEuMzUwMzYwMiBDMTcuMDI1ODQyNSwzMi4wNzg1ODU1IDE4LjQzNTE0MTgsMzIuMTQ2NjkyOSAxOS41OTgyMDY2LDMxLjUyMzI0ODIgQzIwLjc2MTI3MTQsMzAuODk5ODAzNSAyMS40ODQyNTc3LDI5LjY4OTU4NzQgMjEuNDg5NDk2NywyOC4zNzQ1OTA3IEwyMS40ODk0OTY3LDMuNTkzOTc1MTMgQzIxLjQ4OTQ5NjcsMi4yNzM3MzkzOCAyMC43NjEyNzE0LDEuMDYzNTIzMjUgMTkuNTk4MjA2NiwwLjQ0NTMxNzYyNSBDMTguNDM1MTQxNywtMC4xODMzNjYwNjIgMTcuMDI1ODQyNSwtMC4xMTUyNTg2NTYgMTUuOTMwODg1MSwwLjYxODIwNTYyNSBMMTUuOTMwODg1MSwwLjYxODIwNTYyNSBaIE03LjE4MTcwMzY2LDIzLjEzNTU1OTkgTDMuNjAzNDQ1NjIsMjMuMTM1NTU5OSBDMy4wMjE5MTMyMiwyMy4xMzU1NTk5IDIuNDA4OTQ2NTksMjIuNDM4NzY4OCAyLjQwODk0NjU5LDIxLjQzMjg3NDkgTDIuNDA4OTQ2NTksMTAuNTM1NjkwOSBDMi40MDg5NDY1OSw5LjUyOTc5NyAzLjAxNjY3NDE2LDguODMzMDA1OTEgMy42MDM0NDU2Miw4LjgzMzAwNTkxIEw3LjE4MTcwMzY2LDguODMzMDA1OTEgTDcuMTgxNzAzNjYsMjMuMTM1NTU5OSBaIE0xOS4xMDU3Mzc3LDI4LjM3NDU5MDcgQzE5LjEwNTczNzcsMjguODE0NjY5MyAxOC44NjQ3NDIzLDI5LjIxODA3NDcgMTguNDc3MDU0LDI5LjQyMjM5NjggQzE4LjA4OTM2NTcsMjkuNjMxOTU4MSAxNy42MTc4NTI5LDI5LjYwNTc2MjkgMTcuMjU2MzU5OCwyOS4zNjQ3Njc1IEw5LjU2NTQ2MjY2LDI0LjI0NjIzNDQgTDkuNTY1NDYyNjYsNy43MjIzMzEzOCBMMTcuMjUxMTIwOCwyLjU5ODU1OTI4IEMxNy42MTc4NTMsMi4zNTc1NjM4OCAxOC4wODkzNjU4LDIuMzMxMzY4NzIgMTguNDcxODE1LDIuNTQwOTI5OTQgQzE4Ljg1OTUwMzIsMi43NTA0OTExNiAxOS4xMDA0OTg3LDMuMTUzODk2NTMgMTkuMTAwNDk4NywzLjU5Mzk3NTEzIEwxOS4xMDA0OTg3LDI4LjM3NDU5MDcgTDE5LjEwNTczNzcsMjguMzc0NTkwNyBaIiBpZD0i5b2i54q2Ij48L3BhdGg+CiAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPGcgaWQ9Iue8lue7hCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjUuMDAwMDAwLCAxMi4wMDAwMDApIiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIzIj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik01LjY4NDM0MTg5ZS0xNCwwIEw4LjkzMTYxODMxLDguOTMxNjE4MzEiIGlkPSLot6/lvoQtMiI+PC9wYXRoPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTUuNTA2NzA2MmUtMTQsLTEuNzc2MzU2ODRlLTE1IEw4LjkzMTYxODMxLDguOTMxNjE4MzEiIGlkPSLot6/lvoQtMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNC40NjU4MDksIDQuNDY1ODA5KSBzY2FsZSgtMSwgMSkgdHJhbnNsYXRlKC00LjQ2NTgwOSwgLTQuNDY1ODA5KSAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+\"},function(e,t){e.exports=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTc4MzAzNzcyODk2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjUwNDEiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTk1NS43MjMwODYgMTM1LjkwMjEwN0g2OTcuNTY4MTA2Vjg2LjI2MDcwMkE4Ni4zNTkwNzUgODYuMzU5MDc1IDAgMCAwIDYxMS4zMDc0MDMgMEg0MDcuMDIzODYxYTg2LjM1OTA3NSA4Ni4zNTkwNzUgMCAwIDAtODYuMjYwNzAzIDg2LjI2MDcwMnY0OS42NDE0MDVINjguMjc2OTE0QTI3LjI0OTI4MiAyNy4yNDkyODIgMCAwIDAgNDEuMDM5OTI4IDE2My4xNTEzOXY0LjUzNzQ0OGEyNy4yMzY5ODYgMjcuMjM2OTg2IDAgMCAwIDI3LjIzNjk4NiAyNy4yMzY5ODZoODEuNjc0MDY4VjkzNy43MzkyOThhODYuMzU5MDc1IDg2LjM1OTA3NSAwIDAgMCA4Ni4yNjA3MDIgODYuMjYwNzAyaDU1MS41NzY2MzJhODYuMzU5MDc1IDg2LjM1OTA3NSAwIDAgMCA4Ni4yNjA3MDItODYuMjYwNzAyVjE5NC45MjU4MjRoODEuNjc0MDY4QTI3LjIzNjk4NiAyNy4yMzY5ODYgMCAwIDAgOTgyLjk2MDA3MiAxNjcuNjg4ODM4di00LjUzNzQ0OGEyNy4yNDkyODIgMjcuMjQ5MjgyIDAgMCAwLTI3LjIzNjk4Ni0yNy4yNDkyODN6TTM3OS43ODY4NzUgODYuMjYwNzAyQTI3LjI2MTU3OSAyNy4yNjE1NzkgMCAwIDEgNDA3LjAyMzg2MSA1OS4wMjM3MTdoMjA0LjI4MzU0MmEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxIDI3LjIzNjk4NiAyNy4yMzY5ODV2NDkuNjQxNDA1SDM3OS43ODY4NzV6TTgxNS4wMjUzMDIgOTM3LjczOTI5OGEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxLTI3LjIzNjk4NiAyNy4yMzY5ODVIMjM2LjIxMTY4NGEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxLTI3LjIzNjk4Ni0yNy4yMzY5ODVWMTk0LjkyNTgyNGg2MDYuMDUwNjA0eiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0MiI+PC9wYXRoPjxwYXRoIGQ9Ik0yOTMuNTI2MTcyIDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0MyI+PC9wYXRoPjxwYXRoIGQ9Ik00NzkuNjQ3NjI1IDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0NCI+PC9wYXRoPjxwYXRoIGQ9Ik02NjUuNzgxMzc1IDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0NSI+PC9wYXRoPjwvc3ZnPg==\"},function(e,t,n){\"use strict\";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function s(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function u(e,t){for(var n={},r=[],i=0;i<e.length;i++){var o=e[i],u=t.base?o[0]+t.base:o[0],c=n[u]||0,l=\"\".concat(u,\" \").concat(c);n[u]=c+1;var p=s(l),h={css:o[1],media:o[2],sourceMap:o[3]};-1!==p?(a[p].references++,a[p].updater(h)):a.push({identifier:l,updater:M(h,t),references:1}),r.push(l)}return r}function c(e){var t=document.createElement(\"style\"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),\"function\"==typeof e.insert)e.insert(t);else{var a=o(e.insert||\"head\");if(!a)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");a.appendChild(t)}return t}var l,p=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join(\"\\n\")});function h(e,t,n,r){var i=n?\"\":r.media?\"@media \".concat(r.media,\" {\").concat(r.css,\"}\"):r.css;if(e.styleSheet)e.styleSheet.cssText=p(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function f(e,t,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?e.setAttribute(\"media\",i):e.removeAttribute(\"media\"),o&&btoa&&(r+=\"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o)))),\" */\")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var y=null,d=0;function M(e,t){var n,r,i;if(t.singleton){var o=d++;n=y||(y=c(t)),r=h.bind(null,n,o,!1),i=h.bind(null,n,o,!0)}else n=c(t),r=f.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||\"boolean\"==typeof t.singleton||(t.singleton=i());var n=u(e=e||[],t);return function(e){if(e=e||[],\"[object Array]\"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=s(n[r]);a[i].references--}for(var o=u(e,t),c=0;c<n.length;c++){var l=s(n[c]);0===a[l].references&&(a[l].updater(),a.splice(l,1))}n=o}}}},function(e,t,n){(t=n(9)(!1)).push([e.i,\".media-mute-box {\\n  position: absolute;\\n  z-index: 2;\\n  width: 100%;\\n  height: 100%;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n.media-mute-box-inner {\\n  width: 88px;\\n  cursor: pointer;\\n  height: 64px;\\n  border-radius: 8px;\\n  background-color: black;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  flex-direction: column;\\n}\\n.media-mute-box-inner span {\\n  color: white;\\n}\\n.media-mute-box-inner img {\\n  width: 24px;\\n}\\n.plugin-audio-box {\\n  display: flex;\\n  flex-direction: column;\\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.2);\\n  overflow: hidden;\\n  transform-origin: top left;\\n}\\n.plugin-audio-box-nav {\\n  width: 100%;\\n  height: 32px;\\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.2);\\n  background-image: linear-gradient(180deg, #E0E1E0 0%, #CDCDCC 100%);\\n  display: flex;\\n  flex-direction: row;\\n  flex-shrink: 0;\\n  justify-content: space-between;\\n  align-items: center;\\n  cursor: default;\\n}\\n.plugin-audio-box-nav span {\\n  margin-left: 6px;\\n  font-size: 12px;\\n  font-weight: bold;\\n}\\n.plugin-audio-box-body {\\n  width: 100%;\\n  height: 100%;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  background-color: #F2F4F5;\\n}\\n.white-plugin-audio-box {\\n  position: relative;\\n  width: 100%;\\n  height: 100%;\\n}\\n.white-plugin-audio {\\n  position: absolute;\\n  z-index: 1;\\n  width: 100%;\\n  height: 100%;\\n}\\n.plugin-audio-box-delete {\\n  width: 22px;\\n  height: 22px;\\n  background-color: #FF756E;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  border-radius: 50%;\\n  margin-right: 8px;\\n  cursor: pointer;\\n  opacity: 0.6;\\n}\\n.plugin-audio-box-delete img {\\n  width: 14px;\\n}\\n.plugin-audio-box-delete:hover {\\n  opacity: 1;\\n}\\n\",\"\"]),e.exports=t},function(e,t,n){\"use strict\";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||\"\",r=e[3];if(!r)return n;if(t&&\"function\"==typeof btoa){var i=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),u=\"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(s),\"/*# \".concat(u,\" */\")),o=r.sources.map((function(e){return\"/*# sourceURL=\".concat(r.sourceRoot||\"\").concat(e,\" */\")}));return[n].concat(o).concat([i]).join(\"\\n\")}var a,s,u;return[n].join(\"\\n\")}(t,e);return t[2]?\"@media \".concat(t[2],\" {\").concat(n,\"}\"):n})).join(\"\")},t.i=function(e,n,r){\"string\"==typeof e&&(e=[[null,e,\"\"]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);r&&i[u[0]]||(n&&(u[2]?u[2]=\"\".concat(n,\" and \").concat(u[2]):u[2]=n),t.push(u))}},t}},function(e,t){var n;n=function(){return this}();try{n=n||new Function(\"return this\")()}catch(e){\"object\"==typeof window&&(n=window)}e.exports=n},function(e,t){var n,r,i=e.exports={};function o(){throw new Error(\"setTimeout has not been defined\")}function a(){throw new Error(\"clearTimeout has not been defined\")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n=\"function\"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r=\"function\"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,p=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):p=-1,c.length&&f())}function f(){if(!l){var e=s(h);l=!0;for(var t=c.length;t;){for(u=c,c=[];++p<t;)u&&u[p].run();p=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function y(e,t){this.fun=e,this.array=t}function d(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new y(e,t)),1!==c.length||l||s(f)},y.prototype.run=function(){this.fun.apply(null,this.array)},i.title=\"browser\",i.browser=!0,i.env={},i.argv=[],i.version=\"\",i.versions={},i.on=d,i.addListener=d,i.once=d,i.off=d,i.removeListener=d,i.removeAllListeners=d,i.emit=d,i.prependListener=d,i.prependOnceListener=d,i.listeners=function(e){return[]},i.binding=function(e){throw new Error(\"process.binding is not supported\")},i.cwd=function(){return\"/\"},i.chdir=function(e){throw new Error(\"process.chdir is not supported\")},i.umask=function(){return 0}},function(e,t,n){\"use strict\";n.r(t);var r,i,o=n(0),a=n(3),s=(n(4),n(1)),u=n(5),c=n(2),l=n(6),p=function(){function e(e){this.player=e,this.isFirstSync=!0}return e.prototype.syncProgress=function(e){this.isFirstSync?(this.isFirstSync=!1,this.player.currentTime=e):Math.abs(this.player.currentTime-e)>=2&&(this.player.currentTime=e)},e}(),h=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),f=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},y=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},d=function(e){return new Promise((function(t){return setTimeout(t,e)}))};!function(e){e.host=\"host\",e.guest=\"guest\",e.listener=\"listener\"}(i||(i={}));var M,g=function(e){function t(t){var n=e.call(this,t)||this;return n.selfUserInf=null,n.playerState=!1,n.handleStartCondition=function(){return f(n,void 0,void 0,(function(){var e,t=this;return y(this,(function(n){switch(n.label){case 0:return e=this.props.plugin,this.setMyIdentityRoom(),[4,this.handleNativePlayerState(e.attributes.play)];case 1:return n.sent(),this.playerState=e.attributes.play,this.player.current&&(this.handleFirstSeek(),this.player.current.currentTime=e.attributes.currentTime,this.player.current.addEventListener(\"play\",(function(){t.handleRemotePlayState(!0)})),this.player.current.addEventListener(\"pause\",(function(){t.handleRemotePlayState(!1)})),this.player.current.addEventListener(\"seeked\",(function(){if(t.player.current){var n=e.attributes.currentTime;t.handleRemoteSeekData(n)}})),this.player.current.addEventListener(\"volumechange\",(function(e){t.handleRemoteVolumeChange(e.target.volume),t.handleRemoteMuteState(e.target.muted)}))),[2]}}))}))},n.isHost=function(){return!(!n.selfUserInf||n.selfUserInf.identity!==i.host)},n.setMyIdentityRoom=function(){var e=n.props.plugin;e.context&&e.context.identity&&(n.selfUserInf={identity:e.context.identity})},n.handleNativePlayerState=function(e){return f(n,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:if(!e)return[3,7];if(!this.player.current)return[3,6];n.label=1;case 1:return n.trys.push([1,3,,6]),[4,this.player.current.play()];case 2:return n.sent(),[3,6];case 3:return\"\"+(t=n.sent()).name!=\"NotAllowedError\"&&\"\"+t.name!=\"AbortError\"?[3,5]:(this.setState({selfMute:!0}),[4,this.player.current.play()]);case 4:n.sent(),n.label=5;case 5:return[3,6];case 6:return[3,8];case 7:this.player.current&&this.player.current.pause(),n.label=8;case 8:return[2]}}))}))},n.handleRemoteSeekData=function(e){var t=n.props.plugin;n.selfUserInf&&n.selfUserInf.identity===i.host&&t.putAttributes({seek:e})},n.handleRemoteMuteState=function(e){var t=n.props.plugin;n.selfUserInf&&n.selfUserInf.identity===i.host&&t.putAttributes({mute:e})},n.handleRemoteVolumeChange=function(e){var t=n.props.plugin;n.selfUserInf&&n.selfUserInf.identity===i.host&&t.putAttributes({volume:e})},n.handleRemotePlayState=function(e){var t=n.props.plugin;n.playerState=e;var r=t.attributes.currentTime;n.selfUserInf&&n.selfUserInf.identity===i.host&&t.putAttributes({play:e,seek:r,seekTime:Date.now()/1e3})},n.lastSyncProgressTimestamp=0,n.onTimeUpdate=function(e){var t=n.props.plugin,r=Date.now();r-n.lastSyncProgressTimestamp>1e3&&(n.lastSyncProgressTimestamp=r,n.selfUserInf&&n.selfUserInf.identity===i.host&&t.putAttributes({currentTime:e,play:n.playerState}))},n.handleSeekReaction=function(e,t){n.isHost()||n.player.current&&void 0!==t&&(n.player.current.currentTime=e+Date.now()/1e3-t)},n.handleRemove=function(){return f(n,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return e=this.props.plugin,this.handleRemotePlayState(!1),[4,d(300)];case 1:return t.sent(),e.remove(),[2]}}))}))},n.timeUpdate=function(){if(n.player.current){var e=n.player.current.currentTime;n.onTimeUpdate(e)}},n.detectAudioClickEnable=function(){var e=n.props.plugin;return e.context&&e.context.identity?e.context.identity!==i.host?\"none\":\"auto\":\"none\"},n.renderMuteBox=function(){var e=n.props.plugin;return e.context&&e.context.identity&&e.context.identity!==i.host&&n.state.selfMute?o.createElement(\"div\",{className:\"media-mute-box\"},o.createElement(\"div\",{onClick:function(){n.setState({selfMute:!1})},onTouchStart:function(){n.setState({selfMute:!1})},style:{pointerEvents:\"auto\"},className:\"media-mute-box-inner\"},o.createElement(\"img\",{src:u,alt:\"mute_icon\"}),o.createElement(\"span\",null,\"unmute\"))):null},n.renderDeleteBtn=function(){var e=n.props.plugin;return e.context&&e.context.identity&&e.context.identity===i.host?o.createElement(\"div\",{style:{pointerEvents:\"auto\"},className:\"plugin-audio-box-delete\",onClick:n.handleRemove},o.createElement(\"img\",{src:l,alt:\"delete_icon\"})):null},n.renderNavigation=function(){return!0===n.props.plugin.attributes.isNavigationDisable?null:o.createElement(\"div\",{className:\"plugin-audio-box-nav\"},o.createElement(\"div\",null,o.createElement(\"img\",{style:{width:20,marginLeft:8},src:c,alt:\"audio_plugin\"}),o.createElement(\"span\",null,\"Audio Player\")),n.renderDeleteBtn())},n.handleFirstSeek=function(e){if(!e){var t=n.props.plugin,r=Date.now()/1e3,i=void 0;i=t.attributes.seekTime?t.attributes.seek+r-t.attributes.seekTime:t.attributes.seek,n.syncNode.syncProgress(i)}},n.player=o.createRef(),n.reactionPlayDisposer=n.startPlayReaction(),n.reactionSeekDisposer=n.startSeekReaction(),n.reactionVolumeDisposer=n.startVolumeReaction(),n.reactionMuteDisposer=n.startMuteTimeReaction(),n.reactionSeekTimeDisposer=n.startSeekTimeReaction(),n.reactionSyncDisposer=n.startSyncReaction(),n.state={play:!1,seek:0,selfMute:!1,currentTime:0,mute:!1,volume:1,isEnd:!1},n}return h(t,e),t.prototype.componentDidMount=function(){return f(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return this.syncNode=new p(this.player.current),[4,this.handleStartCondition()];case 1:return e.sent(),[2]}}))}))},t.prototype.startPlayReaction=function(){var e=this,t=this.props.plugin;return Object(s.a)((function(){return t.attributes.play}),(function(t){return f(e,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return this.isHost()?[3,2]:[4,this.handleNativePlayerState(t)];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.startSeekTimeReaction=function(){var e=this,t=this.props.plugin;return Object(s.a)((function(){return t.attributes.seekTime}),(function(n){e.handleSeekReaction(t.attributes.seek,n)}))},t.prototype.startSeekReaction=function(){var e=this,t=this.props.plugin;return Object(s.a)((function(){return t.attributes.seek}),(function(n){e.handleSeekReaction(n,t.attributes.seekTime)}))},t.prototype.startSyncReaction=function(){var e=this,t=this.props.plugin;return Object(s.a)((function(){return t.attributes.currentTime}),(function(t){return f(e,void 0,void 0,(function(){return y(this,(function(e){return this.isHost()||(2,this.player.current&&Math.abs(t-this.player.current.currentTime)>2&&(this.player.current.currentTime=t)),[2]}))}))}))},t.prototype.startVolumeReaction=function(){var e=this,t=this.props.plugin;return Object(s.a)((function(){return t.attributes.volume}),(function(t){e.isHost()||e.player.current&&(e.player.current.volume=t)}))},t.prototype.startMuteTimeReaction=function(){var e=this,t=this.props.plugin;return Object(s.a)((function(){return t.attributes.mute}),(function(t){e.isHost()||e.setState({mute:t})}))},t.prototype.componentWillUnmount=function(){this.reactionPlayDisposer(),this.reactionSeekDisposer(),this.reactionMuteDisposer(),this.reactionVolumeDisposer(),this.reactionSyncDisposer(),this.player.current&&this.player.current.pause()},t.prototype.render=function(){var e=this,t=this.props,n=t.size,r=t.plugin,a=t.scale,s=0===a?1:a,u=navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);return o.createElement(\"div\",{className:\"plugin-audio-box\",style:{width:n.width/s,height:n.height/s,transform:\"scale(\"+s+\")\"}},this.renderNavigation(),o.createElement(\"div\",{className:\"plugin-audio-box-body\"},this.renderMuteBox(),o.createElement(\"div\",{className:\"white-plugin-audio-box\"},o.createElement(\"audio\",{className:\"white-plugin-audio\",src:r.attributes.pluginAudioUrl,ref:this.player,muted:this.state.mute?this.state.mute:this.state.selfMute,style:{width:\"100%\",height:54,pointerEvents:this.detectAudioClickEnable(),outline:\"none\"},onLoadedMetadataCapture:function(){return f(e,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return u?[4,d(300)]:[3,2];case 1:e.sent(),this.handleFirstSeek(this.state.isEnd),e.label=2;case 2:return[2]}}))}))},onEnded:function(){return f(e,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return this.player.current?this.selfUserInf?this.selfUserInf.identity!==i.host?[3,2]:(r.putAttributes({seek:0,seekTime:void 0,currentTime:0}),[4,d(500)]):[3,5]:[3,7];case 1:return e.sent(),this.player.current.load(),[3,4];case 2:return[4,d(1e3)];case 3:e.sent(),this.player.current.load(),e.label=4;case 4:return[3,7];case 5:return[4,d(1e3)];case 6:e.sent(),this.player.current.load(),e.label=7;case 7:return this.setState({isEnd:!0}),[2]}}))}))},controls:!0,controlsList:\"nodownload nofullscreen\",onTimeUpdate:this.timeUpdate,preload:\"auto\"}))))},t}(o.Component),v=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),b=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},m=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};!function(e){e.host=\"host\",e.guest=\"guest\",e.listener=\"listener\"}(M||(M={}));var N=function(e){function t(t){var n=e.call(this,t)||this;return n.renderNavigation=function(){return!0===n.props.plugin.attributes.isNavigationDisable?null:o.createElement(\"div\",{className:\"plugin-audio-box-nav\"},o.createElement(\"div\",null,o.createElement(\"img\",{style:{width:20,marginLeft:8},src:c,alt:\"audio_plugin\"}),o.createElement(\"span\",null,\"Audio Player\")))},n.player=o.createRef(),n.reactionPlayDisposer=n.startPlayReaction(),n.reactionSeekDisposer=n.startSeekReaction(),n.reactionMuteDisposer=n.startMuteTimeReaction(),n.reactionVolumeDisposer=n.startVolumeReaction(),n.reactionReplayPlayingDisposer=n.startReplayPlayingReaction(),n.state={mute:!1},n}return v(t,e),t.prototype.componentDidMount=function(){this.syncNode=new p(this.player.current)},t.prototype.startPlayReaction=function(){var e=this;return Object(s.a)((function(){return e.props.plugin.attributes.play}),(function(t){return b(e,void 0,void 0,(function(){return m(this,(function(e){switch(e.label){case 0:if(!t)return[3,7];if(!this.player.current)return[3,6];e.label=1;case 1:return e.trys.push([1,3,,6]),[4,this.player.current.play()];case 2:return e.sent(),[3,6];case 3:return\"\"+e.sent().name!=\"NotAllowedError\"?[3,5]:[4,this.player.current.play()];case 4:e.sent(),e.label=5;case 5:return[3,6];case 6:return[3,8];case 7:this.player.current&&this.player.current.pause(),e.label=8;case 8:return[2]}}))}))}))},t.prototype.startSeekReaction=function(){var e=this;return Object(s.a)((function(){return e.props.plugin.playerTimestamp}),(function(t){var n=e.props.plugin.attributes,r=n.seek,i=n.seekTime;if(void 0!==i){var o=r+(e.props.player.beginTimestamp+t)/1e3-i;e.syncNode.syncProgress(o)}}))},t.prototype.startReplayPlayingReaction=function(){var e=this;return Object(s.a)((function(){return e.props.plugin.isPlaying}),(function(t){return b(e,void 0,void 0,(function(){return m(this,(function(e){switch(e.label){case 0:if(!t)return[3,7];if(!this.player.current)return[3,6];e.label=1;case 1:return e.trys.push([1,3,,6]),[4,this.player.current.play()];case 2:return e.sent(),[3,6];case 3:return\"\"+e.sent().name!=\"NotAllowedError\"?[3,5]:[4,this.player.current.play()];case 4:e.sent(),e.label=5;case 5:return[3,6];case 6:return[3,8];case 7:this.player.current&&this.player.current.pause(),e.label=8;case 8:return[2]}}))}))}))},t.prototype.startVolumeReaction=function(){var e=this;return Object(s.a)((function(){return e.props.plugin.attributes.volume}),(function(t){e.player.current&&(e.player.current.volume=t)}))},t.prototype.componentWillUnmount=function(){this.reactionPlayDisposer(),this.reactionSeekDisposer(),this.reactionMuteDisposer(),this.reactionVolumeDisposer(),this.reactionReplayPlayingDisposer()},t.prototype.startMuteTimeReaction=function(){var e=this,t=this.props.plugin;return Object(s.a)((function(){return t.attributes.mute}),(function(t){e.setState({mute:t})}))},t.prototype.render=function(){var e=this.props,t=e.size,n=e.plugin,r=e.scale,i=0===r?1:r;return o.createElement(\"div\",{className:\"plugin-audio-box\",style:{width:t.width/i,height:t.height/i,transform:\"scale(\"+i+\")\"}},this.renderNavigation(),o.createElement(\"div\",{className:\"plugin-audio-box-body\"},o.createElement(\"div\",{className:\"white-plugin-audio-box\"},o.createElement(\"audio\",{\"webkit-playsinline\":\"true\",playsInline:!0,className:\"white-plugin-audio\",src:n.attributes.pluginAudioUrl,ref:this.player,muted:this.state.mute,style:{width:\"100%\",height:\"100%\",pointerEvents:\"none\",outline:\"none\"},controls:!0,controlsList:\"nodownload nofullscreen\",preload:\"auto\"}))))},t}(o.Component);n.d(t,\"audioPlugin\",(function(){return w}));var D=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),j=function(){return(j=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},T=function(e){function t(t){return e.call(this,t)||this}return D(t,e),t.prototype.render=function(){var e=this;return o.createElement(a.CNode,{context:this.props.cnode},o.createElement(a.RoomConsumer,null,(function(t){return t?o.createElement(g,j({},e.props)):null})),o.createElement(a.PlayerConsumer,null,(function(t){return t?o.createElement(N,j({},e.props,{player:t})):null})))},t}(o.Component),w=Object.freeze({kind:\"audio\",render:T,defaultAttributes:{play:!1,seek:0,mute:!1,volume:1,currentTime:0},hitTest:function(e){var t=e.component.context.getMemberState();return!(t&&\"eraser\"===t.currentApplianceName)}})}])}));\n\n//# sourceURL=webpack://whiteboard-bridge/./node_modules/@netless/white-audio-plugin/dist/index.js?");

/***/ }),

/***/ 63813:
/*!*****************************************************************!*\
  !*** ./node_modules/@netless/white-audio-plugin2/dist/index.js ***!
  \*****************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("!function(e,t){ true?module.exports=t(__webpack_require__(/*! react */ 67294),__webpack_require__(/*! white-web-sdk */ 63314)):0}(window,(function(e,t){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=8)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjlweCIgaGVpZ2h0PSIyNXB4IiB2aWV3Qm94PSIwIDAgMjkgMjUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5hdWRpbyAoMik8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0i6aG16Z2iMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9ImF1ZGlvLSgyKSIgZmlsbD0iIzMzMzMzMyIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgPHBhdGggZD0iTTI1LjQzMDUxODIsMTEuNTAwNTQ0OCBMMjUuMjgwOTU4OSwxMS41MDA1NDQ4IEwyNS4yODA5NTg5LDEwLjMxNDkyMTcgQzI1LjI4MDk1ODksNC42Mjc1MjMxOSAyMC40NDg4MzQyLDAgMTQuNTA5MDY0MiwwIEM4LjU2OTI5NDI0LDAgMy43MzcxNjk0Nyw0LjYyNzUyMzE5IDMuNzM3MTY5NDcsMTAuMzE0OTIxNyBMMy43MzcxNjk0NywxMS41MDA1NDQ4IEwzLjU2NzY2ODk0LDExLjUwMDU0NDggQzEuNjAwNzM3NjQsMTEuNTAwNTQ0OCAwLDEzLjAzMjg3MyAwLDE0LjkxNzI5NTMgTDAsMTcuODQ5OTE2MiBDMCwxOS43MzQzMzg1IDEuNjAwNzM3NjQsMjEuMjY2NjY2NyAzLjU2NzY2ODk0LDIxLjI2NjY2NjcgTDUuMzM2MDk0MjcsMjEuMjY2NjY2NyBDNi4xNzkwNjQ4MiwyMS4yNjY2NjY3IDYuODYyNTA1NDcsMjAuNjExODc5MyA2Ljg2MjUwNTQ3LDE5LjgwNTI5NjMgTDYuODYyNTA1NDcsMTIuOTYxOTE1MiBDNi44NjI1MDU0NywxMi4xNTQ0MzQgNi4xNzkwNjQ4MiwxMS41MDA1NDQ4IDUuMzM2MDk0MjcsMTEuNTAwNTQ0OCBMNS4yNjM1ODA2NywxMS41MDA1NDQ4IEw1LjI2MzU4MDY3LDEwLjMxNDkyMTcgQzUuMjYzNTgwNjcsNS40MzMyMDgwNCA5LjQxMTM1ODM4LDEuNDYyMjY4NTkgMTQuNTA5MDY0MiwxLjQ2MjI2ODU5IEMxOS42MDY3NywxLjQ2MjI2ODU5IDIzLjc1NDU0NzcsNS40MzQxMDYyNCAyMy43NTQ1NDc3LDEwLjMxNDkyMTcgTDIzLjc1NDU0NzcsMTEuNTAwNTQ0OCBMMjMuNjYyOTk5MywxMS41MDA1NDQ4IEMyMi44MjAwMjg4LDExLjUwMDU0NDggMjIuMTM2NTg4MSwxMi4xNTUzMzIyIDIyLjEzNjU4ODEsMTIuOTYxOTE1MiBMMjIuMTM2NTg4MSwxOS44MDQzOTgxIEMyMi4xMzY1ODgxLDIwLjYxMTg3OTMgMjIuODIwMDI4OCwyMS4yNjU3Njg1IDIzLjY2Mjk5OTMsMjEuMjY1NzY4NSBMMjUuNDMxNDI0NiwyMS4yNjU3Njg1IEMyNy4zOTkyNjI0LDIxLjI2NTc2ODUgMjksMTkuNzMzNDQwMyAyOSwxNy44NDkwMTggTDI5LDE0LjkxNjM5NzEgQzI4Ljk5OTA5MzYsMTMuMDMyODczIDI3LjM5ODM1NTksMTEuNTAwNTQ0OCAyNS40MzA1MTgyLDExLjUwMDU0NDggWiBNNS4zMzcwMDA2OSwxMi45NjE5MTUyIEw1LjMzNzAwMDY5LDE5LjgwNDM5ODEgTDMuNTY3NjY4OTQsMTkuODA0Mzk4MSBDMi40NDQ2MTQ2MiwxOS44MDQzOTgxIDEuNTI2NDExMiwxOC45MjQxNjI3IDEuNTI2NDExMiwxNy44NDkwMTggTDEuNTI2NDExMiwxNC45MTYzOTcxIEMxLjUyNjQxMTIsMTMuODQxMjUyNCAyLjQ0NDYxNDYyLDEyLjk2MTAxNyAzLjU2NzY2ODk0LDEyLjk2MTAxNyBMNS4zMzcwMDA2OSwxMi45NjEwMTcgTDUuMzM3MDAwNjksMTIuOTYxOTE1MiBaIE0yNy40NzI2ODI0LDE3Ljg0OTAxOCBDMjcuNDcyNjgyNCwxOC45MjQxNjI3IDI2LjU1NDQ3OSwxOS44MDQzOTgxIDI1LjQzMDUxODIsMTkuODA0Mzk4MSBMMjMuNjYyMDkyOSwxOS44MDQzOTgxIEwyMy42NjIwOTI5LDEyLjk2MTkxNTIgTDI1LjQzMDUxODIsMTIuOTYxOTE1MiBDMjYuNTUzNTcyNSwxMi45NjE5MTUyIDI3LjQ3MjY4MjQsMTMuODQxMjUyNCAyNy40NzI2ODI0LDE0LjkxNzI5NTMgTDI3LjQ3MjY4MjQsMTcuODQ5MDE4IEwyNy40NzI2ODI0LDE3Ljg0OTAxOCBaIiBpZD0i5b2i54q2Ij48L3BhdGg+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNi41OTYwNTI2LDI0LjE2NjY2NjcgQzE2LjIyNDkwODgsMjQuMTY3MjA3MSAxNS45MTM3MTA1LDIzLjg5MDA3ODIgMTUuODc2MTQzOSwyMy41MjU1NzE1IEwxNC45NTk3MzYyLDE0LjYxMjg4MTYgTDE0LjAyNjU4NjUsMTkuODQ1MTUwOCBDMTMuOTcyMTM4OSwyMC4xNTk2OTMzIDEzLjcxMjY5MjMsMjAuNDAwMjY4NyAxMy4zOTEyODU2LDIwLjQzNDI0MjIgQzEzLjA2OTg3ODksMjAuNDY4MjE1NyAxMi43NjQ3MTc4LDIwLjI4NzMyMDggMTIuNjQ0MDQ0NiwxOS45OTEyODkgTDExLjIwNTk4OTYsMTYuNTIyMjQ2NyBMMTAuNzU2NTk3NCwxOC40Nzg1ODQ3IEMxMC42ODE2MzQ2LDE4LjgwMzY4NzQgMTAuMzg4NTMzMywxOS4wMzQxNTI0IDEwLjA1MDc4NzMsMTkuMDMzNTYxOSBMOC40NTY3NjY2NywxOS4wMzM1NjE5IEM4LjI2NTEzMzg3LDE5LjAzMzc5MjcgOC4wODEyNTY5OCwxOC45NTg4NjM3IDcuOTQ1NTg2ODgsMTguODI1MjU4MyBDNy44MDk5MTY3OCwxOC42OTE2NTI5IDcuNzMzNTY2ODksMTguNTEwMzE1NSA3LjczMzMzMzMzLDE4LjMyMTEzODIgQzcuNzMzNTY2ODksMTguMTMxOTYxIDcuODA5OTE2NzgsMTcuOTUwNjIzNSA3Ljk0NTU4Njg4LDE3LjgxNzAxODEgQzguMDgxMjU2OTgsMTcuNjgzNDEyNyA4LjI2NTEzMzg3LDE3LjYwODQ4MzcgOC40NTY3NjY2NywxNy42MDg3MTQ1IEw5LjQ3Mjc0NTUyLDE3LjYwODcxNDUgTDEwLjMwMTkxODIsMTMuOTk5NjIzMSBDMTAuMzczNjM5LDEzLjY5NzE5MzQgMTAuNjM0NzI2MywxMy40NzQ5MjA5IDEwLjk0ODI5NiwxMy40NDkzMzk4IEMxMS4yNjE4NjU3LDEzLjQyMzc1ODYgMTEuNTU2MzcyNCwxMy42MDA3MDU1IDExLjY3NzQxMDgsMTMuODg3NDA5OSBMMTMuMDM1MjgwMiwxNy4xNjMzNDEgTDE0LjQzOTg1MTEsOS4yODkyNzYwNCBDMTQuNTA0NjU5OSw4LjkzOTM5MjYzIDE0LjgxOTAyODksOC42ODg5NzQ2NiAxNS4xNzkxNDU0LDguNzAwMzczOTMgQzE1LjUzOTgzMTMsOC43MTI4NjAzMiAxNS44MzU4Njk5LDguOTg2MTY3MTUgMTUuODcyNjE5Miw5LjM0MDU5ODM5IEwxNi45NzE0MjcyLDIwLjAxOTk5NDcgTDE3LjU3ODU0NzMsMTguMTg0NTY4NiBDMTcuNjc1ODg3OCwxNy44OTA4ODIgMTcuOTUzNzE2MiwxNy42OTI0Njc2IDE4LjI2NjczNDIsMTcuNjkzMDkxOSBMMTkuNTQxNzc0NCwxNy42OTMwOTE5IEMxOS44MDgxMTEzLDE3LjY4MDA5NTEgMjAuMDYwMDQ5LDE3LjgxMjk2ODMgMjAuMTk3MTYzOCwxOC4wMzg3NDc0IEMyMC4zMzQyNzg3LDE4LjI2NDUyNjYgMjAuMzM0Mjc4NywxOC41NDY1MDQ3IDIwLjE5NzE2MzgsMTguNzcyMjgzOCBDMjAuMDYwMDQ5LDE4Ljk5ODA2MyAxOS44MDgxMTEzLDE5LjEzMDkzNjEgMTkuNTQxNzc0NCwxOS4xMTc5MzkzIEwxOC43OTE5MDYyLDE5LjExNzkzOTMgTDE3LjI4NTEyMDYsMjMuNjczNDQ5NSBDMTcuMTg3MTIzLDIzLjk2NzI4NDUgMTYuOTA5NDE4MywyNC4xNjYwNTgxIDE2LjU5NjA1MjYsMjQuMTY2NjY2NyIgaWQ9Iui3r+W+hCI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+\"},function(e,t){e.exports=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTc4MzAzNzcyODk2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjUwNDEiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTk1NS43MjMwODYgMTM1LjkwMjEwN0g2OTcuNTY4MTA2Vjg2LjI2MDcwMkE4Ni4zNTkwNzUgODYuMzU5MDc1IDAgMCAwIDYxMS4zMDc0MDMgMEg0MDcuMDIzODYxYTg2LjM1OTA3NSA4Ni4zNTkwNzUgMCAwIDAtODYuMjYwNzAzIDg2LjI2MDcwMnY0OS42NDE0MDVINjguMjc2OTE0QTI3LjI0OTI4MiAyNy4yNDkyODIgMCAwIDAgNDEuMDM5OTI4IDE2My4xNTEzOXY0LjUzNzQ0OGEyNy4yMzY5ODYgMjcuMjM2OTg2IDAgMCAwIDI3LjIzNjk4NiAyNy4yMzY5ODZoODEuNjc0MDY4VjkzNy43MzkyOThhODYuMzU5MDc1IDg2LjM1OTA3NSAwIDAgMCA4Ni4yNjA3MDIgODYuMjYwNzAyaDU1MS41NzY2MzJhODYuMzU5MDc1IDg2LjM1OTA3NSAwIDAgMCA4Ni4yNjA3MDItODYuMjYwNzAyVjE5NC45MjU4MjRoODEuNjc0MDY4QTI3LjIzNjk4NiAyNy4yMzY5ODYgMCAwIDAgOTgyLjk2MDA3MiAxNjcuNjg4ODM4di00LjUzNzQ0OGEyNy4yNDkyODIgMjcuMjQ5MjgyIDAgMCAwLTI3LjIzNjk4Ni0yNy4yNDkyODN6TTM3OS43ODY4NzUgODYuMjYwNzAyQTI3LjI2MTU3OSAyNy4yNjE1NzkgMCAwIDEgNDA3LjAyMzg2MSA1OS4wMjM3MTdoMjA0LjI4MzU0MmEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxIDI3LjIzNjk4NiAyNy4yMzY5ODV2NDkuNjQxNDA1SDM3OS43ODY4NzV6TTgxNS4wMjUzMDIgOTM3LjczOTI5OGEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxLTI3LjIzNjk4NiAyNy4yMzY5ODVIMjM2LjIxMTY4NGEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxLTI3LjIzNjk4Ni0yNy4yMzY5ODVWMTk0LjkyNTgyNGg2MDYuMDUwNjA0eiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0MiI+PC9wYXRoPjxwYXRoIGQ9Ik0yOTMuNTI2MTcyIDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0MyI+PC9wYXRoPjxwYXRoIGQ9Ik00NzkuNjQ3NjI1IDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0NCI+PC9wYXRoPjxwYXRoIGQ9Ik02NjUuNzgxMzc1IDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0NSI+PC9wYXRoPjwvc3ZnPg==\"},function(e,t,n){var i=n(5),r=n(6);\"string\"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,\"\"]]);var M={insert:\"head\",singleton:!1};i(r,M);e.exports=r.locals||{}},function(e,t,n){\"use strict\";var i,r=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},M=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function u(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},i=[],r=0;r<e.length;r++){var M=e[r],c=t.base?M[0]+t.base:M[0],a=n[c]||0,s=\"\".concat(c,\" \").concat(a);n[c]=a+1;var N=u(s),D={css:M[1],media:M[2],sourceMap:M[3]};-1!==N?(o[N].references++,o[N].updater(D)):o.push({identifier:s,updater:g(D,t),references:1}),i.push(s)}return i}function a(e){var t=document.createElement(\"style\"),i=e.attributes||{};if(void 0===i.nonce){var r=n.nc;r&&(i.nonce=r)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),\"function\"==typeof e.insert)e.insert(t);else{var o=M(e.insert||\"head\");if(!o)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");o.appendChild(t)}return t}var s,N=(s=[],function(e,t){return s[e]=t,s.filter(Boolean).join(\"\\n\")});function D(e,t,n,i){var r=n?\"\":i.media?\"@media \".concat(i.media,\" {\").concat(i.css,\"}\"):i.css;if(e.styleSheet)e.styleSheet.cssText=N(t,r);else{var M=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(M,o[t]):e.appendChild(M)}}function l(e,t,n){var i=n.css,r=n.media,M=n.sourceMap;if(r?e.setAttribute(\"media\",r):e.removeAttribute(\"media\"),M&&\"undefined\"!=typeof btoa&&(i+=\"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(M)))),\" */\")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var j=null,y=0;function g(e,t){var n,i,r;if(t.singleton){var M=y++;n=j||(j=a(t)),i=D.bind(null,n,M,!1),r=D.bind(null,n,M,!0)}else n=a(t),i=l.bind(null,n,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||\"boolean\"==typeof t.singleton||(t.singleton=r());var n=c(e=e||[],t);return function(e){if(e=e||[],\"[object Array]\"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var r=u(n[i]);o[r].references--}for(var M=c(e,t),a=0;a<n.length;a++){var s=u(n[a]);0===o[s].references&&(o[s].updater(),o.splice(s,1))}n=M}}}},function(e,t,n){(t=n(7)(!1)).push([e.i,\".white-audio-plugin-container {\\n  display: flex;\\n  flex-flow: column nowrap;\\n  transform-origin: top left;\\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.2);\\n}\\n.white-audio-plugin-nav {\\n  height: 32px;\\n  flex-shrink: 0;\\n  display: flex;\\n  align-items: center;\\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.2);\\n  background-image: linear-gradient(180deg, #e0e1e0 0%, #cdcdcc 100%);\\n}\\n.white-audio-plugin-nav > img {\\n  width: 20px;\\n  margin-left: 8px;\\n}\\n.white-audio-plugin-nav-title {\\n  margin-left: 6px;\\n  font-size: 12px;\\n  font-weight: bold;\\n  flex-grow: 1;\\n}\\n.white-audio-plugin-nav-delete {\\n  width: 22px;\\n  height: 22px;\\n  border: 0;\\n  background-color: #ff756e;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  border-radius: 50%;\\n  margin-right: 8px;\\n  cursor: pointer;\\n  opacity: 0.6;\\n  transition: opacity 0.2s ease;\\n}\\n.white-audio-plugin-nav-delete > img {\\n  width: 14px;\\n}\\n.white-audio-plugin-nav-delete:hover {\\n  opacity: 1;\\n}\\n.white-audio-plugin-body {\\n  flex-grow: 1;\\n  background-color: #f2f4f5;\\n  display: flex;\\n  flex-flow: column nowrap;\\n  align-items: stretch;\\n  justify-content: center;\\n}\\n.white-audio-plugin-body > audio {\\n  flex-grow: 1;\\n  outline: none;\\n}\\n\",\"\"]),e.exports=t},function(e,t,n){\"use strict\";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||\"\",i=e[3];if(!i)return n;if(t&&\"function\"==typeof btoa){var r=(o=i,u=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),c=\"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(u),\"/*# \".concat(c,\" */\")),M=i.sources.map((function(e){return\"/*# sourceURL=\".concat(i.sourceRoot||\"\").concat(e,\" */\")}));return[n].concat(M).concat([r]).join(\"\\n\")}var o,u,c;return[n].join(\"\\n\")}(t,e);return t[2]?\"@media \".concat(t[2],\" {\").concat(n,\"}\"):n})).join(\"\")},t.i=function(e,n,i){\"string\"==typeof e&&(e=[[null,e,\"\"]]);var r={};if(i)for(var M=0;M<this.length;M++){var o=this[M][0];null!=o&&(r[o]=!0)}for(var u=0;u<e.length;u++){var c=[].concat(e[u]);i&&r[c[0]]||(n&&(c[2]?c[2]=\"\".concat(n,\" and \").concat(c[2]):c[2]=n),t.push(c))}},t}},function(e,t,n){\"use strict\";n.r(t);var i=n(0),r=n.n(i),M=n(1),o=n(2),u=n.n(o),c=n(3),a=n.n(c),s=(n(4),function(e,t,n,i){return new(n||(n=Promise))((function(r,M){function o(e){try{c(i.next(e))}catch(e){M(e)}}function u(e){try{c(i.throw(e))}catch(e){M(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}c((i=i.apply(e,t||[])).next())}))}),N=function(e,t){var n,i,r,M,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return M={next:u(0),throw:u(1),return:u(2)},\"function\"==typeof Symbol&&(M[Symbol.iterator]=function(){return this}),M;function u(M){return function(u){return function(M){if(n)throw new TypeError(\"Generator is already executing.\");for(;o;)try{if(n=1,i&&(r=2&M[0]?i.return:M[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,M[1])).done)return r;switch(i=0,r&&(M=[2&M[0],r.value]),M[0]){case 0:case 1:r=M;break;case 4:return o.label++,{value:M[1],done:!1};case 5:o.label++,i=M[1],M=[0];continue;case 7:M=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==M[0]&&2!==M[0])){o=0;continue}if(3===M[0]&&(!r||M[1]>r[0]&&M[1]<r[3])){o.label=M[1];break}if(6===M[0]&&o.label<r[1]){o.label=r[1],r=M;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(M);break}r[2]&&o.ops.pop(),o.trys.pop();continue}M=t.call(e,o)}catch(e){M=[6,e],i=0}finally{n=r=0}if(5&M[0])throw M[1];return{value:M[0]?M[1]:void 0,done:!0}}([M,u])}}};function D(e){return s(this,void 0,void 0,(function(){return N(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,4]),[4,e.play()];case 1:return t.sent(),[2,!0];case 2:return t.sent(),e.muted=!0,[4,e.play()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}var l=function(e){return new Promise((function(t){return window.setTimeout(t,e)}))},j=function(){function e(){this.map=new Map}return e.prototype.changed=function(e,t){return(!this.map.has(e)||!function e(t,n){return t===n||!!Array.isArray(t)&&t.every((function(t,i){return e(t,n[i])}))}(this.map.get(e),t))&&(this.map.set(e,t),!0)},e.prototype.clear=function(){this.map.clear()},e}();var y,g=(y=function(e,t){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Class extends value \"+String(t)+\" is not a constructor or null\");function n(){this.constructor=e}y(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),T=function(){return(T=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},p=function(e,t,n,i){return new(n||(n=Promise))((function(r,M){function o(e){try{c(i.next(e))}catch(e){M(e)}}function u(e){try{c(i.throw(e))}catch(e){M(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}c((i=i.apply(e,t||[])).next())}))},I=function(e,t){var n,i,r,M,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return M={next:u(0),throw:u(1),return:u(2)},\"function\"==typeof Symbol&&(M[Symbol.iterator]=function(){return this}),M;function u(M){return function(u){return function(M){if(n)throw new TypeError(\"Generator is already executing.\");for(;o;)try{if(n=1,i&&(r=2&M[0]?i.return:M[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,M[1])).done)return r;switch(i=0,r&&(M=[2&M[0],r.value]),M[0]){case 0:case 1:r=M;break;case 4:return o.label++,{value:M[1],done:!1};case 5:o.label++,i=M[1],M=[0];continue;case 7:M=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==M[0]&&2!==M[0])){o=0;continue}if(3===M[0]&&(!r||M[1]>r[0]&&M[1]<r[3])){o.label=M[1];break}if(6===M[0]&&o.label<r[1]){o.label=r[1],r=M;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(M);break}r[2]&&o.ops.pop(),o.trys.pop();continue}M=t.call(e,o)}catch(e){M=[6,e],i=0}finally{n=r=0}if(5&M[0])throw M[1];return{value:M[0]?M[1]:void 0,done:!0}}([M,u])}}},d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t.prototype.render=function(){var e=this;return r.a.createElement(M.CNode,{context:this.props.cnode},r.a.createElement(M.RoomConsumer,{children:function(t){return t&&r.a.createElement(z,T({},e.props,{room:t}))}}),r.a.createElement(M.PlayerConsumer,{children:function(t){return t&&r.a.createElement(z,T({},e.props,{player:t}))}}))},t}(i.Component),z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.disposers=[],t.changedMap=new j,t.player=Object(i.createRef)(),t.timestamp=function(){return{currentTime:t.player.current.currentTime,hostTime:Date.now()}},t.removeSelf=function(){return p(t,void 0,void 0,(function(){var e;return I(this,(function(t){switch(t.label){case 0:return(e=this.props.plugin).putAttributes(T({paused:!0},this.timestamp())),[4,l(300)];case 1:return t.sent(),e.remove(),[2]}}))}))},t}return g(t,e),t.prototype.isHost=function(){return this.props.room&&this.props.plugin.context&&\"host\"===this.props.plugin.context.identity},t.prototype.componentDidMount=function(){this.props.room&&(this.isHost()?this.setupHost():this.setupNonHost()),this.props.player&&this.setupNonHost()},t.prototype.setupHost=function(){var e=this,t=this.props.plugin,n=this.player.current;n.currentTime=t.attributes.currentTime,n.addEventListener(\"play\",(function(){t.putAttributes(T({paused:!1},e.timestamp()))})),n.addEventListener(\"pause\",(function(){t.putAttributes(T({paused:!0},e.timestamp()))})),n.addEventListener(\"seeked\",(function(){t.putAttributes(e.timestamp())})),n.addEventListener(\"volumechange\",(function(){t.putAttributes({volume:n.volume,muted:n.muted})}));var i,r=NaN;n.addEventListener(\"timeupdate\",(function(){r||(r=window.setTimeout((function(){r=NaN,t.putAttributes(e.timestamp())}),2e3))})),this.disposers.push((function(){return window.clearTimeout(r)})),n.addEventListener(\"ended\",(function(){return p(e,void 0,void 0,(function(){return I(this,(function(e){switch(e.label){case 0:return t.putAttributes(T({paused:!0},this.timestamp())),[4,l(500)];case 1:return e.sent(),n.load(),[2]}}))}))})),/iPad|iPhone|iPod/.test(navigator.platform)&&(i=function(){n.currentTime=t.attributes.currentTime},window.requestAnimationFrame((function(){window.requestAnimationFrame(i)})))},t.prototype.setupNonHost=function(){var e=this,t=this.props.plugin,n=this.player.current,i=Object(M.autorun)((function(){return p(e,void 0,void 0,(function(){var e,i,r,M,o,u,c,a,s,N,l;return I(this,(function(j){switch(j.label){case 0:return e=t.isPlaying,i=t.playerTimestamp,r=t.playbackSpeed,M=t.attributes,o=M.paused,u=M.volume,c=M.muted,a=M.currentTime,s=M.hostTime,this.changedMap.changed(\"paused\",[o,e])?!o&&e?[3,1]:(n.pause(),[3,3]):[3,3];case 1:return[4,D(n)];case 2:j.sent(),j.label=3;case 3:return this.changedMap.changed(\"volume\",[u,c])&&(n.volume=t.attributes.volume,n.muted=t.attributes.muted),this.changedMap.changed(\"time\",[a,s])&&s>0&&(N=Date.now(),this.props.player&&(N=this.props.player.beginTimestamp+i),l=a+(N-s)/1e3,Math.abs(n.currentTime-l)>2&&(n.currentTime=l)),this.changedMap.changed(\"rate\",r)&&(n.playbackRate=r),[2]}}))}))}));this.disposers.push(i),this.disposers.push((function(){return e.changedMap.clear()}))},t.prototype.componentWillUnmount=function(){var e;null===(e=this.player.current)||void 0===e||e.pause(),this.disposers.forEach((function(e){return e()}))},Object.defineProperty(t.prototype,\"containerStyle\",{get:function(){var e=this.props,t=e.size,n=e.scale||1;return{width:t.width/n,height:t.height/n,transform:\"scale(\"+n+\")\"}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"pointerEventsStyle\",{get:function(){return{pointerEvents:this.isHost()?\"auto\":\"none\"}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e=this.props,t=e.room,n=e.player,i=e.plugin;return t||n?r.a.createElement(\"div\",{className:\"white-audio-plugin-container\",style:this.containerStyle},!i.attributes.isNavigationDisable&&r.a.createElement(\"div\",{className:\"white-audio-plugin-nav\"},r.a.createElement(\"img\",{src:u.a,alt:\"audio_plugin\"}),r.a.createElement(\"span\",{className:\"white-audio-plugin-nav-title\"},\"Audio Player\"),r.a.createElement(\"span\",{className:\"white-audio-plugin-nav-delete\",style:this.pointerEventsStyle,onClick:this.removeSelf},r.a.createElement(\"img\",{src:a.a,alt:\"delete_icon\"}))),r.a.createElement(\"div\",{className:\"white-audio-plugin-body\"},r.a.createElement(\"audio\",{src:i.attributes.src,style:this.pointerEventsStyle,controls:!!t,controlsList:\"nodownload nofullscreen\",preload:\"auto\",ref:this.player}))):null},t}(i.Component);n.d(t,\"audioPlugin2\",(function(){return w}));var w=Object.freeze({kind:\"audio2\",render:d,defaultAttributes:{src:\"\",hostTime:0,currentTime:0,paused:!0,muted:!1,volume:1},hitTest:function(e){var t=e.component.context.getMemberState();return!(\"eraser\"===(null==t?void 0:t.currentApplianceName))}})}])}));\n\n//# sourceURL=webpack://whiteboard-bridge/./node_modules/@netless/white-audio-plugin2/dist/index.js?");

/***/ }),

/***/ 9207:
/*!****************************************************************!*\
  !*** ./node_modules/@netless/white-video-plugin/dist/index.js ***!
  \****************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("/*! For license information please see index.js.LICENSE.txt */\n!function(e,t){ true?module.exports=t(__webpack_require__(/*! react */ 67294),__webpack_require__(/*! white-web-sdk */ 63314)):0}(window,(function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=12)}([function(t,n){t.exports=e},function(e,t,n){\"use strict\";(function(e,r){n.d(t,\"a\",(function(){return ot}));var i=[];Object.freeze(i);var o={};Object.freeze(o);var a={};function s(){return\"undefined\"!=typeof window?window:void 0!==e?e:\"undefined\"!=typeof self?self:a}function u(){return++Le.mobxGuid}function c(e){throw l(!1,e),\"X\"}function l(e,t){if(!e)throw new Error(\"[mobx] \"+(t||\"An invariant failed, however the error is obfuscated because this is an production build.\"))}function p(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var f=function(){};function h(e){return null!==e&&\"object\"==typeof e}function y(e){if(null===e||\"object\"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}function d(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function M(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function g(e,t){var n=\"isMobX\"+e;return t.prototype[n]=!0,function(e){return h(e)&&!0===e[n]}}function v(e){return void 0!==s().Map&&e instanceof s().Map}function N(e){return e instanceof Set}function D(e){for(var t=[];;){var n=e.next();if(n.done)break;t.push(n.value)}return t}function b(){return\"function\"==typeof Symbol&&Symbol.toPrimitive||\"@@toPrimitive\"}function m(e){return null===e?null:\"object\"==typeof e?\"\"+e:e}function j(e,t){for(var n=e.next();!n.done;)t(n.value),n=e.next()}function T(){return\"function\"==typeof Symbol&&Symbol.iterator||\"@@iterator\"}function w(e,t){M(e,T(),t)}function I(e){return e[T()]=z,e}function O(){return\"function\"==typeof Symbol&&Symbol.toStringTag||\"@@toStringTag\"}function z(){return this}var A=function(){function e(e){void 0===e&&(e=\"Atom@\"+u()),this.name=e,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=oe.NOT_TRACKING}return e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.reportObserved=function(){return Pe(this)},e.prototype.reportChanged=function(){_e(),function(e){if(e.lowestObserverState===oe.STALE)return;e.lowestObserverState=oe.STALE;var t=e.observers,n=t.length;for(;n--;){var r=t[n];r.dependenciesState===oe.UP_TO_DATE&&(r.isTracing!==ae.NONE&&Re(r,e),r.onBecomeStale()),r.dependenciesState=oe.STALE}}(this),Ye()},e.prototype.toString=function(){return this.name},e}(),x=g(\"Atom\",A);function E(e,t,n){void 0===t&&(t=f),void 0===n&&(n=f);var r,i=new A(e);return st(\"onBecomeObserved\",i,t,r),at(i,n),i}function S(e,t){return e===t}var L={identity:S,structural:function(e,t){return en(e,t)},default:function(e,t){return function(e,t){return\"number\"==typeof e&&\"number\"==typeof t&&isNaN(e)&&isNaN(t)}(e,t)||S(e,t)},shallow:function(e,t){return en(e,t,1)}},k=function(e,t){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function C(e,t){function n(){this.constructor=e}k(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var U=function(){return(U=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function _(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function Y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(_(arguments[t]));return e}var P={},R={};function Q(e,t){var n=t?P:R;return n[e]||(n[e]={configurable:!0,enumerable:t,get:function(){return B(this),this[e]},set:function(t){B(this),this[e]=t}})}function B(e){if(!0!==e.__mobxDidRunLazyInitializers){var t=e.__mobxDecorators;if(t)for(var n in d(e,\"__mobxDidRunLazyInitializers\",!0),t){var r=t[n];r.propertyCreator(e,r.prop,r.descriptor,r.decoratorTarget,r.decoratorArguments)}}}function V(e,t){return function(){var n,r=function(r,i,o,a){if(!0===a)return t(r,i,o,r,n),null;if(!Object.prototype.hasOwnProperty.call(r,\"__mobxDecorators\")){var s=r.__mobxDecorators;d(r,\"__mobxDecorators\",U({},s))}return r.__mobxDecorators[i]={prop:i,propertyCreator:t,descriptor:o,decoratorTarget:r,decoratorArguments:n},Q(i,e)};return G(arguments)?(n=i,r.apply(null,arguments)):(n=Array.prototype.slice.call(arguments),r)}}function G(e){return(2===e.length||3===e.length)&&\"string\"==typeof e[1]||4===e.length&&!0===e[3]}function Z(e,t,n){return ft(e)?e:Array.isArray(e)?re.array(e,{name:n}):y(e)?re.object(e,void 0,{name:n}):v(e)?re.map(e,{name:n}):N(e)?re.set(e,{name:n}):e}function H(e){return e}function W(e){l(e);var t=V(!0,(function(t,n,r,i,o){Zt(t,n,r?r.initializer?r.initializer.call(t):r.value:void 0,e)})),n=(void 0!==r&&r.env,t);return n.enhancer=e,n}var $={deep:!0,name:void 0,defaultDecorator:void 0},J={deep:!1,name:void 0,defaultDecorator:void 0};function K(e){return null==e?$:\"string\"==typeof e?{name:e,deep:!0}:e}function X(e){return e.defaultDecorator?e.defaultDecorator.enhancer:!1===e.deep?H:Z}Object.freeze($),Object.freeze(J);var F=W(Z),q=W((function(e,t,n){return null==e||Kt(e)||Ct(e)||Pt(e)||Bt(e)?e:Array.isArray(e)?re.array(e,{name:n,deep:!1}):y(e)?re.object(e,void 0,{name:n,deep:!1}):v(e)?re.map(e,{name:n,deep:!1}):N(e)?re.set(e,{name:n,deep:!1}):c(!1)})),ee=W(H),te=W((function(e,t,n){return en(e,t)?t:e}));var ne={box:function(e,t){arguments.length>2&&ie(\"box\");var n=K(t);return new Oe(e,X(n),n.name,!0,n.equals)},shallowBox:function(e,t){return arguments.length>2&&ie(\"shallowBox\"),re.box(e,{name:t,deep:!1})},array:function(e,t){arguments.length>2&&ie(\"array\");var n=K(t);return new At(e,X(n),n.name)},shallowArray:function(e,t){return arguments.length>2&&ie(\"shallowArray\"),re.array(e,{name:t,deep:!1})},map:function(e,t){arguments.length>2&&ie(\"map\");var n=K(t);return new _t(e,X(n),n.name)},shallowMap:function(e,t){return arguments.length>2&&ie(\"shallowMap\"),re.map(e,{name:t,deep:!1})},set:function(e,t){arguments.length>2&&ie(\"set\");var n=K(t);return new Qt(e,X(n),n.name)},object:function(e,t,n){\"string\"==typeof arguments[1]&&ie(\"object\");var r=K(n);return ut({},e,t,r)},shallowObject:function(e,t){return\"string\"==typeof arguments[1]&&ie(\"shallowObject\"),re.object(e,{},{name:t,deep:!1})},ref:ee,shallow:q,deep:F,struct:te},re=function(e,t,n){if(\"string\"==typeof arguments[1])return F.apply(null,arguments);if(ft(e))return e;var r=y(e)?re.object(e,t,n):Array.isArray(e)?re.array(e,t):v(e)?re.map(e,t):N(e)?re.set(e,t):e;if(r!==e)return r;c(!1)};function ie(e){c(\"Expected one or two arguments to observable.\"+e+\". Did you accidentally try to use observable.\"+e+\" as decorator?\")}Object.keys(ne).forEach((function(e){return re[e]=ne[e]}));var oe,ae,se=V(!1,(function(e,t,n,r,i){var o=n.get,a=n.set,s=i[0]||{};!function(e,t,n){var r=Gt(e);n.name=r.name+\".\"+t,n.context=e,r.values[t]=new ze(n),Object.defineProperty(e,t,function(e){return Wt[e]||(Wt[e]={configurable:Le.computedConfigurable,enumerable:!1,get:function(){return $t(this).read(this,e)},set:function(t){$t(this).write(this,e,t)}})}(t))}(e,t,U({get:o,set:a},s))}));se({equals:L.structural});!function(e){e[e.NOT_TRACKING=-1]=\"NOT_TRACKING\",e[e.UP_TO_DATE=0]=\"UP_TO_DATE\",e[e.POSSIBLY_STALE=1]=\"POSSIBLY_STALE\",e[e.STALE=2]=\"STALE\"}(oe||(oe={})),function(e){e[e.NONE=0]=\"NONE\",e[e.LOG=1]=\"LOG\",e[e.BREAK=2]=\"BREAK\"}(ae||(ae={}));var ue=function(e){this.cause=e};function ce(e){return e instanceof ue}function le(e){switch(e.dependenciesState){case oe.UP_TO_DATE:return!1;case oe.NOT_TRACKING:case oe.STALE:return!0;case oe.POSSIBLY_STALE:for(var t=ge(!0),n=de(),r=e.observing,i=r.length,o=0;o<i;o++){var a=r[o];if(Ae(a)){if(Le.disableErrorBoundaries)a.get();else try{a.get()}catch(e){return Me(n),ve(t),!0}if(e.dependenciesState===oe.STALE)return Me(n),ve(t),!0}}return Ne(e),Me(n),ve(t),!1}}function pe(e){var t=e.observers.length>0;Le.computationDepth>0&&t&&c(!1),Le.allowStateChanges||!t&&\"strict\"!==Le.enforceActions||c(!1)}function fe(e,t,n){var r=ge(!0);Ne(e),e.newObserving=new Array(e.observing.length+100),e.unboundDepsCount=0,e.runId=++Le.runId;var i,o=Le.trackingDerivation;if(Le.trackingDerivation=e,!0===Le.disableErrorBoundaries)i=t.call(n);else try{i=t.call(n)}catch(e){i=new ue(e)}return Le.trackingDerivation=o,function(e){for(var t=e.observing,n=e.observing=e.newObserving,r=oe.UP_TO_DATE,i=0,o=e.unboundDepsCount,a=0;a<o;a++){0===(s=n[a]).diffValue&&(s.diffValue=1,i!==a&&(n[i]=s),i++),s.dependenciesState>r&&(r=s.dependenciesState)}n.length=i,e.newObserving=null,o=t.length;for(;o--;){0===(s=t[o]).diffValue&&Ce(s,e),s.diffValue=0}for(;i--;){var s;1===(s=n[i]).diffValue&&(s.diffValue=0,ke(s,e))}r!==oe.UP_TO_DATE&&(e.dependenciesState=r,e.onBecomeStale())}(e),e.observing.length,ve(r),i}function he(e){var t=e.observing;e.observing=[];for(var n=t.length;n--;)Ce(t[n],e);e.dependenciesState=oe.NOT_TRACKING}function ye(e){var t=de(),n=e();return Me(t),n}function de(){var e=Le.trackingDerivation;return Le.trackingDerivation=null,e}function Me(e){Le.trackingDerivation=e}function ge(e){var t=Le.allowStateReads;return Le.allowStateReads=e,t}function ve(e){Le.allowStateReads=e}function Ne(e){if(e.dependenciesState!==oe.UP_TO_DATE){e.dependenciesState=oe.UP_TO_DATE;for(var t=e.observing,n=t.length;n--;)t[n].lowestObserverState=oe.UP_TO_DATE}}var De=0,be=1,me=Object.getOwnPropertyDescriptor((function(){}),\"name\");me&&me.configurable;function je(e,t){var n=function(){return Te(e,t,this,arguments)};return n.isMobxAction=!0,n}function Te(e,t,n,r){var i=function(e,t,n){var r=He()&&!!e,i=0;if(r){i=Date.now();var o=n&&n.length||0,a=new Array(o);if(o>0)for(var s=0;s<o;s++)a[s]=n[s];$e({type:\"action\",name:e,object:t,arguments:a})}var u=de();_e();var c=we(!0),l=ge(!0),p={prevDerivation:u,prevAllowStateChanges:c,prevAllowStateReads:l,notifySpy:r,startTime:i,actionId:be++,parentActionId:De};return De=p.actionId,p}(e,n,r);try{return t.apply(n,r)}catch(e){throw i.error=e,e}finally{!function(e){De!==e.actionId&&c(\"invalid action stack. did you forget to finish an action?\");De=e.parentActionId,void 0!==e.error&&(Le.suppressReactionErrors=!0);Ie(e.prevAllowStateChanges),ve(e.prevAllowStateReads),Ye(),Me(e.prevDerivation),e.notifySpy&&Ke({time:Date.now()-e.startTime});Le.suppressReactionErrors=!1}(i)}}function we(e){var t=Le.allowStateChanges;return Le.allowStateChanges=e,t}function Ie(e){Le.allowStateChanges=e}var Oe=function(e){function t(t,n,r,i,o){void 0===r&&(r=\"ObservableValue@\"+u()),void 0===i&&(i=!0),void 0===o&&(o=L.default);var a=e.call(this,r)||this;return a.enhancer=n,a.name=r,a.equals=o,a.hasUnreportedChange=!1,a.value=n(t,void 0,r),i&&He()&&We({type:\"create\",name:a.name,newValue:\"\"+a.value}),a}return C(t,e),t.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.prototype.set=function(e){var t=this.value;if((e=this.prepareNewValue(e))!==Le.UNCHANGED){var n=He();n&&$e({type:\"update\",name:this.name,newValue:e,oldValue:t}),this.setNewValue(e),n&&Ke()}},t.prototype.prepareNewValue=function(e){if(pe(this),dt(this)){var t=gt(this,{object:this,type:\"update\",newValue:e});if(!t)return Le.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value,this.name),this.equals(this.value,e)?Le.UNCHANGED:e},t.prototype.setNewValue=function(e){var t=this.value;this.value=e,this.reportChanged(),vt(this)&&Dt(this,{type:\"update\",object:this,newValue:e,oldValue:t})},t.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},t.prototype.intercept=function(e){return Mt(this,e)},t.prototype.observe=function(e,t){return t&&e({object:this,type:\"update\",newValue:this.value,oldValue:void 0}),Nt(this,e)},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+\"[\"+this.value+\"]\"},t.prototype.valueOf=function(){return m(this.get())},t}(A);Oe.prototype[b()]=Oe.prototype.valueOf;g(\"ObservableValue\",Oe);var ze=function(){function e(e){this.dependenciesState=oe.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=oe.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid=\"#\"+u(),this.value=new ue(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=ae.NONE,l(e.get,\"missing option for computed: get\"),this.derivation=e.get,this.name=e.name||\"ComputedValue@\"+u(),e.set&&(this.setter=je(this.name+\"-setter\",e.set)),this.equals=e.equals||(e.compareStructural||e.struct?L.structural:L.default),this.scope=e.context,this.requiresReaction=!!e.requiresReaction,this.keepAlive=!!e.keepAlive}return e.prototype.onBecomeStale=function(){!function(e){if(e.lowestObserverState!==oe.UP_TO_DATE)return;e.lowestObserverState=oe.POSSIBLY_STALE;var t=e.observers,n=t.length;for(;n--;){var r=t[n];r.dependenciesState===oe.UP_TO_DATE&&(r.dependenciesState=oe.POSSIBLY_STALE,r.isTracing!==ae.NONE&&Re(r,e),r.onBecomeStale())}}(this)},e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.get=function(){this.isComputing&&c(\"Cycle detected in computation \"+this.name+\": \"+this.derivation),0!==Le.inBatch||0!==this.observers.length||this.keepAlive?(Pe(this),le(this)&&this.trackAndCompute()&&function(e){if(e.lowestObserverState===oe.STALE)return;e.lowestObserverState=oe.STALE;var t=e.observers,n=t.length;for(;n--;){var r=t[n];r.dependenciesState===oe.POSSIBLY_STALE?r.dependenciesState=oe.STALE:r.dependenciesState===oe.UP_TO_DATE&&(e.lowestObserverState=oe.UP_TO_DATE)}}(this)):le(this)&&(this.warnAboutUntrackedRead(),_e(),this.value=this.computeValue(!1),Ye());var e=this.value;if(ce(e))throw e.cause;return e},e.prototype.peek=function(){var e=this.computeValue(!1);if(ce(e))throw e.cause;return e},e.prototype.set=function(e){if(this.setter){l(!this.isRunningSetter,\"The setter of computed value '\"+this.name+\"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?\"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else l(!1,!1)},e.prototype.trackAndCompute=function(){He()&&We({object:this.scope,type:\"compute\",name:this.name});var e=this.value,t=this.dependenciesState===oe.NOT_TRACKING,n=this.computeValue(!0),r=t||ce(e)||ce(n)||!this.equals(e,n);return r&&(this.value=n),r},e.prototype.computeValue=function(e){var t;if(this.isComputing=!0,Le.computationDepth++,e)t=fe(this,this.derivation,this.scope);else if(!0===Le.disableErrorBoundaries)t=this.derivation.call(this.scope);else try{t=this.derivation.call(this.scope)}catch(e){t=new ue(e)}return Le.computationDepth--,this.isComputing=!1,t},e.prototype.suspend=function(){this.keepAlive||(he(this),this.value=void 0)},e.prototype.observe=function(e,t){var n=this,r=!0,i=void 0;return nt((function(){var o=n.get();if(!r||t){var a=de();e({type:\"update\",object:n,newValue:o,oldValue:i}),Me(a)}r=!1,i=o}))},e.prototype.warnAboutUntrackedRead=function(){},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+\"[\"+this.derivation.toString()+\"]\"},e.prototype.valueOf=function(){return m(this.get())},e}();ze.prototype[b()]=ze.prototype.valueOf;var Ae=g(\"ComputedValue\",ze),xe=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},Ee=!0,Se=!1,Le=function(){var e=s();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(Ee=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new xe).version&&(Ee=!1),Ee?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new xe):(setTimeout((function(){Se||c(\"There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`\")}),1),new xe)}();function ke(e,t){var n=e.observers.length;n&&(e.observersIndexes[t.__mapid]=n),e.observers[n]=t,e.lowestObserverState>t.dependenciesState&&(e.lowestObserverState=t.dependenciesState)}function Ce(e,t){if(1===e.observers.length)e.observers.length=0,Ue(e);else{var n=e.observers,r=e.observersIndexes,i=n.pop();if(i!==t){var o=r[t.__mapid]||0;o?r[i.__mapid]=o:delete r[i.__mapid],n[o]=i}delete r[t.__mapid]}}function Ue(e){!1===e.isPendingUnobservation&&(e.isPendingUnobservation=!0,Le.pendingUnobservations.push(e))}function _e(){Le.inBatch++}function Ye(){if(0==--Le.inBatch){Ve();for(var e=Le.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation=!1,0===n.observers.length&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBecomeUnobserved()),n instanceof ze&&n.suspend())}Le.pendingUnobservations=[]}}function Pe(e){var t=Le.trackingDerivation;return null!==t?(t.runId!==e.lastAccessedBy&&(e.lastAccessedBy=t.runId,t.newObserving[t.unboundDepsCount++]=e,e.isBeingObserved||(e.isBeingObserved=!0,e.onBecomeObserved())),!0):(0===e.observers.length&&Le.inBatch>0&&Ue(e),!1)}function Re(e,t){if(console.log(\"[mobx.trace] '\"+e.name+\"' is invalidated due to a change in: '\"+t.name+\"'\"),e.isTracing===ae.BREAK){var n=[];!function e(t,n,r){if(n.length>=1e3)return void n.push(\"(and many more)\");n.push(\"\"+new Array(r).join(\"\\t\")+t.name),t.dependencies&&t.dependencies.forEach((function(t){return e(t,n,r+1)}))}((r=e,ct(Xt(r,i))),n,1),new Function(\"debugger;\\n/*\\nTracing '\"+e.name+\"'\\n\\nYou are entering this break point because derivation '\"+e.name+\"' is being traced and '\"+t.name+\"' is now forcing it to update.\\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\\n\\n\"+(e instanceof ze?e.derivation.toString().replace(/[*]\\//g,\"/\"):\"\")+\"\\n\\nThe dependencies for this derivation are:\\n\\n\"+n.join(\"\\n\")+\"\\n*/\\n    \")()}var r,i}var Qe=function(){function e(e,t,n,r){void 0===e&&(e=\"Reaction@\"+u()),void 0===r&&(r=!1),this.name=e,this.onInvalidate=t,this.errorHandler=n,this.requiresObservable=r,this.observing=[],this.newObserving=[],this.dependenciesState=oe.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid=\"#\"+u(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=ae.NONE}return e.prototype.onBecomeStale=function(){this.schedule()},e.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Le.pendingReactions.push(this),Ve())},e.prototype.isScheduled=function(){return this._isScheduled},e.prototype.runReaction=function(){if(!this.isDisposed){if(_e(),this._isScheduled=!1,le(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&He()&&We({name:this.name,type:\"scheduled-reaction\"})}catch(e){this.reportExceptionInDerivation(e)}}Ye()}},e.prototype.track=function(e){_e();var t,n=He();n&&(t=Date.now(),$e({name:this.name,type:\"reaction\"})),this._isRunning=!0;var r=fe(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&he(this),ce(r)&&this.reportExceptionInDerivation(r.cause),n&&Ke({time:Date.now()-t}),Ye()},e.prototype.reportExceptionInDerivation=function(e){var t=this;if(this.errorHandler)this.errorHandler(e,this);else{if(Le.disableErrorBoundaries)throw e;var n=\"[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '\"+this+\"'\";Le.suppressReactionErrors?console.warn(\"[mobx] (error in reaction '\"+this.name+\"' suppressed, fix error of causing action below)\"):console.error(n,e),He()&&We({type:\"error\",name:this.name,message:n,error:\"\"+e}),Le.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(_e(),he(this),Ye()))},e.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e.$mobx=this,e},e.prototype.toString=function(){return\"Reaction[\"+this.name+\"]\"},e.prototype.trace=function(e){void 0===e&&(e=!1),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=!1;\"boolean\"==typeof e[e.length-1]&&(n=e.pop());var r=ht(e);if(!r)return c(!1);r.isTracing===ae.NONE&&console.log(\"[mobx.trace] '\"+r.name+\"' tracing enabled\");r.isTracing=n?ae.BREAK:ae.LOG}(this,e)},e}();var Be=function(e){return e()};function Ve(){Le.inBatch>0||Le.isRunningReactions||Be(Ge)}function Ge(){Le.isRunningReactions=!0;for(var e=Le.pendingReactions,t=0;e.length>0;){100==++t&&(console.error(\"Reaction doesn't converge to a stable state after 100 iterations. Probably there is a cycle in the reactive function: \"+e[0]),e.splice(0));for(var n=e.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction()}Le.isRunningReactions=!1}var Ze=g(\"Reaction\",Qe);function He(){return!!Le.spyListeners.length}function We(e){if(Le.spyListeners.length)for(var t=Le.spyListeners,n=0,r=t.length;n<r;n++)t[n](e)}function $e(e){We(U(U({},e),{spyReportStart:!0}))}var Je={spyReportEnd:!0};function Ke(e){We(e?U(U({},e),{spyReportEnd:!0}):Je)}function Xe(){c(!1)}function Fe(e){return function(t,n,r){if(r){if(r.value)return{value:je(e,r.value),enumerable:!1,configurable:!0,writable:!0};var i=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return je(e,i.call(this))}}}return qe(e).apply(this,arguments)}}function qe(e){return function(t,n,r){Object.defineProperty(t,n,{configurable:!0,enumerable:!1,get:function(){},set:function(t){d(this,n,et(e,t))}})}}var et=function(e,t,n,r){return 1===arguments.length&&\"function\"==typeof e?je(e.name||\"<unnamed action>\",e):2===arguments.length&&\"function\"==typeof t?je(e,t):1===arguments.length&&\"string\"==typeof e?Fe(e):!0!==r?Fe(t).apply(null,arguments):void(e[t]=je(e.name||t,n.value))};function tt(e,t,n){d(e,t,je(t,n.bind(e)))}function nt(e,t){void 0===t&&(t=o);var n,r=t&&t.name||e.name||\"Autorun@\"+u();if(!t.scheduler&&!t.delay)n=new Qe(r,(function(){this.track(s)}),t.onError,t.requiresObservable);else{var i=it(t),a=!1;n=new Qe(r,(function(){a||(a=!0,i((function(){a=!1,n.isDisposed||n.track(s)})))}),t.onError,t.requiresObservable)}function s(){e(n)}return n.schedule(),n.getDisposer()}et.bound=function(e,t,n,r){return!0===r?(tt(e,t,n.value),null):n?{configurable:!0,enumerable:!1,get:function(){return tt(this,t,n.value||n.initializer.call(this)),this[t]},set:Xe}:{enumerable:!1,configurable:!0,set:function(e){tt(this,t,e)},get:function(){}}};var rt=function(e){return e()};function it(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:rt}function ot(e,t,n){void 0===n&&(n=o),\"boolean\"==typeof n&&(n={fireImmediately:n});var r,i,a,s=n.name||\"Reaction@\"+u(),c=et(s,n.onError?(r=n.onError,i=t,function(){try{return i.apply(this,arguments)}catch(e){r.call(this,e)}}):t),l=!n.scheduler&&!n.delay,p=it(n),f=!0,h=!1,y=n.compareStructural?L.structural:n.equals||L.default,d=new Qe(s,(function(){f||l?M():h||(h=!0,p(M))}),n.onError,n.requiresObservable);function M(){if(h=!1,!d.isDisposed){var t=!1;d.track((function(){var n=e(d);t=f||!y(a,n),a=n})),f&&n.fireImmediately&&c(a,d),f||!0!==t||c(a,d),f&&(f=!1)}}return d.schedule(),d.getDisposer()}function at(e,t,n){return st(\"onBecomeUnobserved\",e,t,n)}function st(e,t,n,r){var i=\"function\"==typeof r?Xt(t,n):Xt(t),o=\"function\"==typeof r?r:n,a=i[e];return\"function\"!=typeof a?c(!1):(i[e]=function(){a.call(this),o.call(this)},function(){i[e]=a})}function ut(e,t,n,r){var i=(r=K(r)).defaultDecorator||(!1===r.deep?ee:F);B(e),Gt(e,r.name,i.enhancer),_e();try{for(var o=Object.getOwnPropertyNames(t),a=0,s=o.length;a<s;a++){var u=o[a],c=Object.getOwnPropertyDescriptor(t,u);0;var l=(n&&u in n?n[u]:c.get?se:i)(e,u,c,!0);l&&Object.defineProperty(e,u,l)}}finally{Ye()}return e}function ct(e){var t,n,r={name:e.name};return e.observing&&e.observing.length>0&&(r.dependencies=(t=e.observing,n=[],t.forEach((function(e){-1===n.indexOf(e)&&n.push(e)})),n).map(ct)),r}function lt(){this.message=\"FLOW_CANCELLED\"}function pt(e,t){if(null==e)return!1;if(void 0!==t){if(Kt(e)){var n=e.$mobx;return n.values&&!!n.values[t]}return!1}return Kt(e)||!!e.$mobx||x(e)||Ze(e)||Ae(e)}function ft(e){return 1!==arguments.length&&c(!1),pt(e)}lt.prototype=Object.create(Error.prototype);function ht(e){switch(e.length){case 0:return Le.trackingDerivation;case 1:return Xt(e[0]);case 2:return Xt(e[0],e[1])}}function yt(e,t){void 0===t&&(t=void 0),_e();try{return e.apply(t)}finally{Ye()}}function dt(e){return void 0!==e.interceptors&&e.interceptors.length>0}function Mt(e,t){var n=e.interceptors||(e.interceptors=[]);return n.push(t),p((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function gt(e,t){var n=de();try{var r=e.interceptors;if(r)for(var i=0,o=r.length;i<o&&(l(!(t=r[i](t))||t.type,\"Intercept handlers should return nothing or a change object\"),t);i++);return t}finally{Me(n)}}function vt(e){return void 0!==e.changeListeners&&e.changeListeners.length>0}function Nt(e,t){var n=e.changeListeners||(e.changeListeners=[]);return n.push(t),p((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function Dt(e,t){var n=de(),r=e.changeListeners;if(r){for(var i=0,o=(r=r.slice()).length;i<o;i++)r[i](t);Me(n)}}var bt,mt,jt,Tt,wt=(bt=!1,mt={},Object.defineProperty(mt,\"0\",{set:function(){bt=!0}}),Object.create(mt)[0]=1,!1===bt),It=0,Ot=function(){};jt=Ot,Tt=Array.prototype,void 0!==Object.setPrototypeOf?Object.setPrototypeOf(jt.prototype,Tt):void 0!==jt.prototype.__proto__?jt.prototype.__proto__=Tt:jt.prototype=Tt,Object.isFrozen(Array)&&[\"constructor\",\"push\",\"shift\",\"concat\",\"pop\",\"unshift\",\"replace\",\"find\",\"findIndex\",\"splice\",\"reverse\",\"sort\"].forEach((function(e){Object.defineProperty(Ot.prototype,e,{configurable:!0,writable:!0,value:Array.prototype[e]})}));var zt=function(){function e(e,t,n,r){this.array=n,this.owned=r,this.values=[],this.lastKnownLength=0,this.atom=new A(e||\"ObservableArray@\"+u()),this.enhancer=function(n,r){return t(n,r,e+\"[..]\")}}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.dehanceValues=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},e.prototype.intercept=function(e){return Mt(this,e)},e.prototype.observe=function(e,t){return void 0===t&&(t=!1),t&&e({object:this.array,type:\"splice\",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Nt(this,e)},e.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},e.prototype.setArrayLength=function(e){if(\"number\"!=typeof e||e<0)throw new Error(\"[mobx.array] Out of range: \"+e);var t=this.values.length;if(e!==t)if(e>t){for(var n=new Array(e-t),r=0;r<e-t;r++)n[r]=void 0;this.spliceWithArray(t,0,n)}else this.spliceWithArray(e,t-e)},e.prototype.updateArrayLength=function(e,t){if(e!==this.lastKnownLength)throw new Error(\"[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?\");this.lastKnownLength+=t,t>0&&e+t+1>It&&Lt(e+t+1)},e.prototype.spliceWithArray=function(e,t,n){var r=this;pe(this.atom);var o=this.values.length;if(void 0===e?e=0:e>o?e=o:e<0&&(e=Math.max(0,o+e)),t=1===arguments.length?o-e:null==t?0:Math.max(0,Math.min(t,o-e)),void 0===n&&(n=i),dt(this)){var a=gt(this,{object:this.array,type:\"splice\",index:e,removedCount:t,added:n});if(!a)return i;t=a.removedCount,n=a.added}var s=(n=0===n.length?n:n.map((function(e){return r.enhancer(e,void 0)}))).length-t;this.updateArrayLength(o,s);var u=this.spliceItemsIntoValues(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice(e,n,u),this.dehanceValues(u)},e.prototype.spliceItemsIntoValues=function(e,t,n){var r;if(n.length<1e4)return(r=this.values).splice.apply(r,Y([e,t],n));var i=this.values.slice(e,e+t);return this.values=this.values.slice(0,e).concat(n,this.values.slice(e+t)),i},e.prototype.notifyArrayChildUpdate=function(e,t,n){var r=!this.owned&&He(),i=vt(this),o=i||r?{object:this.array,type:\"update\",index:e,newValue:t,oldValue:n}:null;r&&$e(U(U({},o),{name:this.atom.name})),this.atom.reportChanged(),i&&Dt(this,o),r&&Ke()},e.prototype.notifyArraySplice=function(e,t,n){var r=!this.owned&&He(),i=vt(this),o=i||r?{object:this.array,type:\"splice\",index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;r&&$e(U(U({},o),{name:this.atom.name})),this.atom.reportChanged(),i&&Dt(this,o),r&&Ke()},e}(),At=function(e){function t(t,n,r,i){void 0===r&&(r=\"ObservableArray@\"+u()),void 0===i&&(i=!1);var o=e.call(this)||this,a=new zt(r,n,o,i);if(M(o,\"$mobx\",a),t&&t.length){var s=we(!0);o.spliceWithArray(0,0,t),Ie(s)}return wt&&Object.defineProperty(a.array,\"0\",xt),o}return C(t,e),t.prototype.intercept=function(e){return this.$mobx.intercept(e)},t.prototype.observe=function(e,t){return void 0===t&&(t=!1),this.$mobx.observe(e,t)},t.prototype.clear=function(){return this.splice(0)},t.prototype.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),e.map((function(e){return Ct(e)?e.peek():e})))},t.prototype.replace=function(e){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,e)},t.prototype.toJS=function(){return this.slice()},t.prototype.toJSON=function(){return this.toJS()},t.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},t.prototype.find=function(e,t,n){void 0===n&&(n=0);var r=this.findIndex.apply(this,arguments);return-1===r?void 0:this.get(r)},t.prototype.findIndex=function(e,t,n){void 0===n&&(n=0);for(var r=this.peek(),i=r.length,o=n;o<i;o++)if(e.call(t,r[o],o,this))return o;return-1},t.prototype.splice=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(e);case 2:return this.$mobx.spliceWithArray(e,t)}return this.$mobx.spliceWithArray(e,t,n)},t.prototype.spliceWithArray=function(e,t,n){return this.$mobx.spliceWithArray(e,t,n)},t.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.$mobx;return n.spliceWithArray(n.values.length,0,e),n.values.length},t.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},t.prototype.shift=function(){return this.splice(0,1)[0]},t.prototype.unshift=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.$mobx;return n.spliceWithArray(0,0,e),n.values.length},t.prototype.reverse=function(){var e=this.slice();return e.reverse.apply(e,arguments)},t.prototype.sort=function(e){var t=this.slice();return t.sort.apply(t,arguments)},t.prototype.remove=function(e){var t=this.$mobx.dehanceValues(this.$mobx.values).indexOf(e);return t>-1&&(this.splice(t,1),!0)},t.prototype.move=function(e,t){function n(e){if(e<0)throw new Error(\"[mobx.array] Index out of bounds: \"+e+\" is negative\");var t=this.$mobx.values.length;if(e>=t)throw new Error(\"[mobx.array] Index out of bounds: \"+e+\" is not smaller than \"+t)}if(n.call(this,e),n.call(this,t),e!==t){var r,i=this.$mobx.values;r=e<t?Y(i.slice(0,e),i.slice(e+1,t+1),[i[e]],i.slice(t+1)):Y(i.slice(0,t),[i[e]],i.slice(t,e),i.slice(e+1)),this.replace(r)}},t.prototype.get=function(e){var t=this.$mobx;if(t){if(e<t.values.length)return t.atom.reportObserved(),t.dehanceValue(t.values[e]);console.warn(\"[mobx.array] Attempt to read an array index (\"+e+\") that is out of bounds (\"+t.values.length+\"). Please check length first. Out of bound indices will not be tracked by MobX\")}},t.prototype.set=function(e,t){var n=this.$mobx,r=n.values;if(e<r.length){pe(n.atom);var i=r[e];if(dt(n)){var o=gt(n,{type:\"update\",object:this,index:e,newValue:t});if(!o)return;t=o.newValue}(t=n.enhancer(t,i))!==i&&(r[e]=t,n.notifyArrayChildUpdate(e,t,i))}else{if(e!==r.length)throw new Error(\"[mobx.array] Index out of bounds, \"+e+\" is larger than \"+r.length);n.spliceWithArray(e,0,[t])}},t}(Ot);w(At.prototype,(function(){this.$mobx.atom.reportObserved();var e=this,t=0;return I({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})})),Object.defineProperty(At.prototype,\"length\",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(e){this.$mobx.setArrayLength(e)}}),d(At.prototype,O(),\"Array\"),[\"indexOf\",\"join\",\"lastIndexOf\",\"slice\",\"toString\",\"toLocaleString\"].forEach((function(e){var t=Array.prototype[e];l(\"function\"==typeof t,\"Base function not defined on Array prototype: '\"+e+\"'\"),d(At.prototype,e,(function(){return t.apply(this.peek(),arguments)}))})),[\"every\",\"filter\",\"forEach\",\"map\",\"some\"].forEach((function(e){l(\"function\"==typeof Array.prototype[e],\"Base function not defined on Array prototype: '\"+e+\"'\"),d(At.prototype,e,(function(t,n){var r=this,i=this.$mobx;return i.atom.reportObserved(),i.dehanceValues(i.values)[e]((function(e,i){return t.call(n,e,i,r)}),n)}))})),[\"reduce\",\"reduceRight\"].forEach((function(e){d(At.prototype,e,(function(){var t=this,n=this.$mobx;n.atom.reportObserved();var r=arguments[0];return arguments[0]=function(e,i,o){return i=n.dehanceValue(i),r(e,i,o,t)},n.values[e].apply(n.values,arguments)}))})),function(e,t){for(var n=0;n<t.length;n++)d(e,t[n],e[t[n]])}(At.prototype,[\"constructor\",\"intercept\",\"observe\",\"clear\",\"concat\",\"get\",\"replace\",\"toJS\",\"toJSON\",\"peek\",\"find\",\"findIndex\",\"splice\",\"spliceWithArray\",\"push\",\"pop\",\"set\",\"shift\",\"unshift\",\"reverse\",\"sort\",\"remove\",\"move\",\"toString\",\"toLocaleString\"]);var xt=Et(0);function Et(e){return{enumerable:!1,configurable:!1,get:function(){return this.get(e)},set:function(t){this.set(e,t)}}}function St(e){Object.defineProperty(At.prototype,\"\"+e,Et(e))}function Lt(e){for(var t=It;t<e;t++)St(t);It=e}Lt(1e3);var kt=g(\"ObservableArrayAdministration\",zt);function Ct(e){return h(e)&&kt(e.$mobx)}var Ut={},_t=function(){function e(e,t,n){if(void 0===t&&(t=Z),void 0===n&&(n=\"ObservableMap@\"+u()),this.enhancer=t,this.name=n,this.$mobx=Ut,this._keysAtom=E(this.name+\".keys()\"),\"function\"!=typeof Map)throw new Error(\"mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js\");this._data=new Map,this._hasMap=new Map,this.merge(e)}return e.prototype._has=function(e){return this._data.has(e)},e.prototype.has=function(e){var t=this;if(!Le.trackingDerivation)return this._has(e);var n=this._hasMap.get(e);if(!n){var r=n=new Oe(this._has(e),H,this.name+\".\"+Yt(e)+\"?\",!1);this._hasMap.set(e,r),at(r,(function(){return t._hasMap.delete(e)}))}return n.get()},e.prototype.set=function(e,t){var n=this._has(e);if(dt(this)){var r=gt(this,{type:n?\"update\":\"add\",object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this._updateValue(e,t):this._addValue(e,t),this},e.prototype.delete=function(e){var t=this;if((pe(this._keysAtom),dt(this))&&!(i=gt(this,{type:\"delete\",object:this,name:e})))return!1;if(this._has(e)){var n=He(),r=vt(this),i=r||n?{type:\"delete\",object:this,oldValue:this._data.get(e).value,name:e}:null;return n&&$e(U(U({},i),{name:this.name,key:e})),yt((function(){t._keysAtom.reportChanged(),t._updateHasMapEntry(e,!1),t._data.get(e).setNewValue(void 0),t._data.delete(e)})),r&&Dt(this,i),n&&Ke(),!0}return!1},e.prototype._updateHasMapEntry=function(e,t){var n=this._hasMap.get(e);n&&n.setNewValue(t)},e.prototype._updateValue=function(e,t){var n=this._data.get(e);if((t=n.prepareNewValue(t))!==Le.UNCHANGED){var r=He(),i=vt(this),o=i||r?{type:\"update\",object:this,oldValue:n.value,name:e,newValue:t}:null;r&&$e(U(U({},o),{name:this.name,key:e})),n.setNewValue(t),i&&Dt(this,o),r&&Ke()}},e.prototype._addValue=function(e,t){var n=this;pe(this._keysAtom),yt((function(){var r=new Oe(t,n.enhancer,n.name+\".\"+Yt(e),!1);n._data.set(e,r),t=r.value,n._updateHasMapEntry(e,!0),n._keysAtom.reportChanged()}));var r=He(),i=vt(this),o=i||r?{type:\"add\",object:this,name:e,newValue:t}:null;r&&$e(U(U({},o),{name:this.name,key:e})),i&&Dt(this,o),r&&Ke()},e.prototype.get=function(e){return this.has(e)?this.dehanceValue(this._data.get(e).get()):this.dehanceValue(void 0)},e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},e.prototype.values=function(){var e=this,t=this.keys();return I({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:e.get(i)}}})},e.prototype.entries=function(){var e=this,t=this.keys();return I({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:[i,e.get(i)]}}})},e.prototype.forEach=function(e,t){var n=this;this._keysAtom.reportObserved(),this._data.forEach((function(r,i){return e.call(t,n.get(i),i,n)}))},e.prototype.merge=function(e){var t=this;return Pt(e)&&(e=e.toJS()),yt((function(){var n=we(!0);try{y(e)?Object.keys(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=_(e,2),r=n[0],i=n[1];return t.set(r,i)})):v(e)?e.constructor!==Map?c(\"Cannot initialize from classes that inherit from Map: \"+e.constructor.name):e.forEach((function(e,n){return t.set(n,e)})):null!=e&&c(\"Cannot initialize map from \"+e)}finally{Ie(n)}})),this},e.prototype.clear=function(){var e=this;yt((function(){ye((function(){e._data.forEach((function(t,n){return e.delete(n)}))}))}))},e.prototype.replace=function(e){var t=this;return yt((function(){var n=function(e){if(v(e)||Pt(e))return e;if(Array.isArray(e))return new Map(e);if(y(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}return c(\"Cannot convert to map from '\"+e+\"'\")}(e),r=new Map,i=!1;if(j(t._data.keys(),(function(e){if(!n.has(e))if(t.delete(e))i=!0;else{var o=t._data.get(e);r.set(e,o)}})),j(n.entries(),(function(e){var n=_(e,2),o=n[0],a=n[1],s=t._data.has(o);if(t.set(o,a),t._data.has(o)){var u=t._data.get(o);r.set(o,u),s||(i=!0)}})),!i)if(t._data.size!==r.size)t._keysAtom.reportChanged();else for(var o=t._data.keys(),a=r.keys(),s=o.next(),u=a.next();!s.done;){if(s.value!==u.value){t._keysAtom.reportChanged();break}s=o.next(),u=a.next()}t._data=r})),this},Object.defineProperty(e.prototype,\"size\",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.toPOJO=function(){var e=this,t={};return this.forEach((function(n,r){return t[\"symbol\"==typeof r?r:Yt(r)]=e.get(r)})),t},e.prototype.toJS=function(){return new Map(this)},e.prototype.toJSON=function(){return this.toPOJO()},e.prototype.toString=function(){var e=this;return this.name+\"[{ \"+D(this.keys()).map((function(t){return Yt(t)+\": \"+e.get(t)})).join(\", \")+\" }]\"},e.prototype.observe=function(e,t){return Nt(this,e)},e.prototype.intercept=function(e){return Mt(this,e)},e}();function Yt(e){return e&&e.toString?e.toString():new String(e).toString()}w(_t.prototype,(function(){return this.entries()})),M(_t.prototype,O(),\"Map\");var Pt=g(\"ObservableMap\",_t),Rt={},Qt=function(){function e(e,t,n){if(void 0===t&&(t=Z),void 0===n&&(n=\"ObservableSet@\"+u()),this.name=n,this.$mobx=Rt,this._data=new Set,this._atom=E(this.name),\"function\"!=typeof Set)throw new Error(\"mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js\");this.enhancer=function(e,r){return t(e,r,n)},e&&this.replace(e)}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.clear=function(){var e=this;yt((function(){ye((function(){e._data.forEach((function(t){e.delete(t)}))}))}))},e.prototype.forEach=function(e,t){var n=this;this._atom.reportObserved(),this._data.forEach((function(r){e.call(t,r,r,n)}))},Object.defineProperty(e.prototype,\"size\",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.add=function(e){var t=this;if((pe(this._atom),dt(this))&&!(i=gt(this,{type:\"add\",object:this,newValue:e})))return this;if(!this.has(e)){yt((function(){t._data.add(t.enhancer(e,void 0)),t._atom.reportChanged()}));var n=He(),r=vt(this),i=r||n?{type:\"add\",object:this,newValue:e}:null;0,r&&Dt(this,i)}return this},e.prototype.delete=function(e){var t=this;if(dt(this)&&!(i=gt(this,{type:\"delete\",object:this,oldValue:e})))return!1;if(this.has(e)){var n=He(),r=vt(this),i=r||n?{type:\"delete\",object:this,oldValue:e}:null;return yt((function(){t._atom.reportChanged(),t._data.delete(e)})),r&&Dt(this,i),!0}return!1},e.prototype.has=function(e){return this._atom.reportObserved(),this._data.has(this.dehanceValue(e))},e.prototype.entries=function(){var e=0,t=D(this.keys()),n=D(this.values());return I({next:function(){var r=e;return e+=1,r<n.length?{value:[t[r],n[r]],done:!1}:{done:!0}}})},e.prototype.keys=function(){return this.values()},e.prototype.values=function(){this._atom.reportObserved();var e,t=this,n=0;return void 0!==this._data.values?e=D(this._data.values()):(e=[],this._data.forEach((function(t){return e.push(t)}))),I({next:function(){return n<e.length?{value:t.dehanceValue(e[n++]),done:!1}:{done:!0}}})},e.prototype.replace=function(e){var t=this;return Bt(e)&&(e=e.toJS()),yt((function(){var n=we(!0);try{Array.isArray(e)||N(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&c(\"Cannot initialize set from \"+e)}finally{Ie(n)}})),this},e.prototype.observe=function(e,t){return Nt(this,e)},e.prototype.intercept=function(e){return Mt(this,e)},e.prototype.toJS=function(){return new Set(this)},e.prototype.toString=function(){return this.name+\"[ \"+D(this.keys()).join(\", \")+\" ]\"},e}();w(Qt.prototype,(function(){return this.values()})),M(Qt.prototype,O(),\"Set\");var Bt=g(\"ObservableSet\",Qt),Vt=function(){function e(e,t,n){this.target=e,this.name=t,this.defaultEnhancer=n,this.values={}}return e.prototype.read=function(e,t){if(this.target===e||(this.illegalAccess(e,t),this.values[t]))return this.values[t].get()},e.prototype.write=function(e,t,n){var r=this.target;r!==e&&this.illegalAccess(e,t);var i=this.values[t];if(i instanceof ze)i.set(n);else{if(dt(this)){if(!(s=gt(this,{type:\"update\",object:r,name:t,newValue:n})))return;n=s.newValue}if((n=i.prepareNewValue(n))!==Le.UNCHANGED){var o=vt(this),a=He(),s=o||a?{type:\"update\",object:r,oldValue:i.value,name:t,newValue:n}:null;a&&$e(U(U({},s),{name:this.name,key:t})),i.setNewValue(n),o&&Dt(this,s),a&&Ke()}}},e.prototype.remove=function(e){if(this.values[e]){var t=this.target;if(dt(this))if(!(o=gt(this,{object:t,name:e,type:\"remove\"})))return;try{_e();var n=vt(this),r=He(),i=this.values[e].get();this.keys&&this.keys.remove(e),delete this.values[e],delete this.target[e];var o=n||r?{type:\"remove\",object:t,oldValue:i,name:e}:null;r&&$e(U(U({},o),{name:this.name,key:e})),n&&Dt(this,o),r&&Ke()}finally{Ye()}}},e.prototype.illegalAccess=function(e,t){console.warn(\"Property '\"+t+\"' of '\"+e+\"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner\")},e.prototype.observe=function(e,t){return Nt(this,e)},e.prototype.intercept=function(e){return Mt(this,e)},e.prototype.getKeys=function(){var e=this;return void 0===this.keys&&(this.keys=new At(Object.keys(this.values).filter((function(t){return e.values[t]instanceof Oe})),H,\"keys(\"+this.name+\")\",!0)),this.keys.slice()},e}();function Gt(e,t,n){void 0===t&&(t=\"\"),void 0===n&&(n=Z);var r=e.$mobx;return r||(y(e)||(t=(e.constructor.name||\"ObservableObject\")+\"@\"+u()),t||(t=\"ObservableObject@\"+u()),M(e,\"$mobx\",r=new Vt(e,t,n)),r)}function Zt(e,t,n,r){var i=Gt(e);if(dt(i)){var o=gt(i,{object:e,name:t,type:\"add\",newValue:n});if(!o)return;n=o.newValue}n=(i.values[t]=new Oe(n,r,i.name+\".\"+t,!1)).value,Object.defineProperty(e,t,function(e){return Ht[e]||(Ht[e]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.read(this,e)},set:function(t){this.$mobx.write(this,e,t)}})}(t)),i.keys&&i.keys.push(t),function(e,t,n,r){var i=vt(e),o=He(),a=i||o?{type:\"add\",object:t,name:n,newValue:r}:null;o&&$e(U(U({},a),{name:e.name,key:n}));i&&Dt(e,a);o&&Ke()}(i,e,t,n)}var Ht=Object.create(null),Wt=Object.create(null);function $t(e){var t=e.$mobx;return t||(B(e),e.$mobx)}var Jt=g(\"ObservableObjectAdministration\",Vt);function Kt(e){return!!h(e)&&(B(e),Jt(e.$mobx))}function Xt(e,t){if(\"object\"==typeof e&&null!==e){if(Ct(e))return void 0!==t&&c(!1),e.$mobx.atom;if(Bt(e))return e.$mobx;if(Pt(e)){var n=e;return void 0===t?n._keysAtom:((r=n._data.get(t)||n._hasMap.get(t))||c(!1),r)}var r;if(B(e),t&&!e.$mobx&&e[t],Kt(e))return t?((r=e.$mobx.values[t])||c(!1),r):c(!1);if(x(e)||Ae(e)||Ze(e))return e}else if(\"function\"==typeof e&&Ze(e.$mobx))return e.$mobx;return c(!1)}function Ft(e,t){return e||c(\"Expecting some object\"),void 0!==t?Ft(Xt(e,t)):x(e)||Ae(e)||Ze(e)||Pt(e)||Bt(e)?e:(B(e),e.$mobx?e.$mobx:void c(!1))}var qt=Object.prototype.toString;function en(e,t,n){return void 0===n&&(n=-1),function e(t,n,r,i,o){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return!1;if(t!=t)return n!=n;var a=typeof t;if(\"function\"!==a&&\"object\"!==a&&\"object\"!=typeof n)return!1;t=tn(t),n=tn(n);var s=qt.call(t);if(s!==qt.call(n))return!1;switch(s){case\"[object RegExp]\":case\"[object String]\":return\"\"+t==\"\"+n;case\"[object Number]\":return+t!=+t?+n!=+n:0==+t?1/+t==1/n:+t==+n;case\"[object Date]\":case\"[object Boolean]\":return+t==+n;case\"[object Symbol]\":return\"undefined\"!=typeof Symbol&&Symbol.valueOf.call(t)===Symbol.valueOf.call(n)}var u=\"[object Array]\"===s;if(!u){if(\"object\"!=typeof t||\"object\"!=typeof n)return!1;var c=t.constructor,l=n.constructor;if(c!==l&&!(\"function\"==typeof c&&c instanceof c&&\"function\"==typeof l&&l instanceof l)&&\"constructor\"in t&&\"constructor\"in n)return!1}if(0===r)return!1;r<0&&(r=-1);o=o||[];var p=(i=i||[]).length;for(;p--;)if(i[p]===t)return o[p]===n;if(i.push(t),o.push(n),u){if((p=t.length)!==n.length)return!1;for(;p--;)if(!e(t[p],n[p],r-1,i,o))return!1}else{var f=Object.keys(t),h=void 0;if(p=f.length,Object.keys(n).length!==p)return!1;for(;p--;)if(h=f[p],!nn(n,h)||!e(t[h],n[h],r-1,i,o))return!1}return i.pop(),o.pop(),!0}(e,t,n)}function tn(e){return Ct(e)?e.peek():v(e)||Pt(e)||N(e)||Bt(e)?D(e.entries()):e}function nn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}\"object\"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return Le.spyListeners.push(e),p((function(){Le.spyListeners=Le.spyListeners.filter((function(t){return t!==e}))}))},extras:{getDebugName:function(e,t){return(void 0!==t?Xt(e,t):Kt(e)||Pt(e)||Bt(e)?Ft(e):Xt(e)).name}},$mobx:\"$mobx\"})}).call(this,n(10),n(11))},function(e,t){e.exports=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzFweCIgaGVpZ2h0PSIyN3B4IiB2aWV3Qm94PSIwIDAgMzEgMjciIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT52aWRlbyAoMSk8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0i6aG16Z2iMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9InZpZGVvLSgxKSIgZmlsbD0iIzJDMkMyQyIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgPHBhdGggZD0iTTI2LjY3NTIyODEsMjYuMDgzNTA4OCBMMy43NTI2MzE1OCwyNi4wODM1MDg4IEMxLjY4NTk2NDksMjYuMDgzNTA4OCAwLDI0LjMyNTc1NDQgMCwyMi4xNTQ2NjY3IEwwLDMuOTMxMDE3NTQgQzAsMS43NjY0NTYxNSAxLjY3OTQzODU5LDAgMy43NTI2MzE1OCwwIEwyNi42NzUyMjgxLDAgQzI4Ljc0MTg5NDcsMCAzMC40MzAwMzUxLDEuNzU5OTI5ODMgMzAuNDMwMDM1MSwzLjkzMTAxNzU0IEwzMC40MzAwMzUxLDIyLjE1NDY2NjcgQzMwLjQyMTMzMzQsMjQuMzE3MDUyNiAyOC43NDE4OTQ3LDI2LjA4MzUwODggMjYuNjc1MjI4MSwyNi4wODM1MDg4IFogTTMuNzUyNjMxNTgsMS40MjQ5MTIyNyBDMi40MzIxNDAzNiwxLjQyNDkxMjI3IDEuMzU1Mjk4MjUsMi41NTM5NjQ5IDEuMzU1Mjk4MjUsMy45Mzc1NDM4NSBMMS4zNTUyOTgyNSwyMi4xNjExOTMgQzEuMzU1Mjk4MjUsMjMuNTQ0NzcxOSAyLjQzMjE0MDM2LDI0LjY3MTY0OTEgMy43NTI2MzE1OCwyNC42NzE2NDkxIEwyNi42NzUyMjgxLDI0LjY3MTY0OTEgQzI3Ljk5NTcxOTMsMjQuNjcxNjQ5MSAyOS4wNzQ3MzY4LDIzLjU0NDc3MTkgMjkuMDc0NzM2OCwyMi4xNjExOTMgTDI5LjA3NDczNjgsMy45MzEwMTc1NCBDMjkuMDc0NzM2OCwyLjU0NzQzODU5IDI3Ljk5NTcxOTMsMS40MTgzODU5NiAyNi42NzUyMjgxLDEuNDE4Mzg1OTYgTDMuNzUyNjMxNTgsMS40MTgzODU5NiBMMy43NTI2MzE1OCwxLjQyNDkxMjI3IFoiIGlkPSLlvaLnirYiPjwvcGF0aD4KICAgICAgICAgICAgPHBhdGggZD0iTTUuMDI3NDM4NTksMjYuMDc2OTgyNSBDNC42NDU1MTEzLDI2LjA2NjMwNjUgNC4zNDM1NjQwOSwyNS43NDk3OTU5IDQuMzUwODc3MiwyNS4zNjc3ODk1IEw0LjM1MDg3NzIsMC43MDkxOTI5OTEgQzQuMzUwODc3MiwwLjMxNzYxNDA0NCA0LjY1NTQzODU5LDAgNS4wMjc0Mzg1OSwwIEM1LjQxMDIyMjg5LDAuMDA5NTAzMDE3NzYgNS43MTM0NzI3OSwwLjMyNjM2MDI4OCA1LjcwNjE3NTQzLDAuNzA5MTkyOTkxIEw1LjcwNjE3NTQzLDI1LjM2Nzc4OTUgQzUuNzA2MTc1NDMsMjUuNzU5MzY4NCA1LjQwODE0MDMzLDI2LjA3Njk4MjUgNS4wMjc0Mzg1OSwyNi4wNzY5ODI1IEw1LjAyNzQzODU5LDI2LjA3Njk4MjUgWiBNMjUuMDE1MzY4NCwyNi4wNzY5ODI1IEMyNC42MzM0NDExLDI2LjA2NjMwNjYgMjQuMzMxNDkzOSwyNS43NDk3OTYgMjQuMzM4ODA3LDI1LjM2Nzc4OTUgTDI0LjMzODgwNywwLjcwOTE5Mjk5MSBDMjQuMzM4ODA3LDAuMzE3NjE0MDQ0IDI0LjY0MzM2ODQsMCAyNS4wMTUzNjg0LDAgQzI1LjM5ODE1MjcsMC4wMDk1MDMwMTc3NiAyNS43MDE0MDI2LDAuMzI2MzYwMjg4IDI1LjY5NDEwNTMsMC43MDkxOTI5OTEgTDI1LjY5NDEwNTMsMjUuMzY3Nzg5NSBDMjUuNzAxNDAyNiwyNS43NTA2MjIyIDI1LjM5ODE1MjcsMjYuMDY3NDc5NCAyNS4wMTUzNjg0LDI2LjA3Njk4MjUgTDI1LjAxNTM2ODQsMjYuMDc2OTgyNSBaIiBpZD0i5b2i54q2Ij48L3BhdGg+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik00LjYyMDYzMTU4LDcuOTQ0NzAxNzUgTDAuNjAwNDIxMDUzLDcuOTQ0NzAxNzUgQzAuMjY5NzU0Mzc3LDcuOTQ0NzAxNzUgMCw3LjYyNDkxMjI3IDAsNy4yMzU1MDg3OCBDMCw2Ljg0MzkyOTgzIDAuMjY5NzU0Mzc3LDYuNTI2MzE1NzkgMC42MDA0MjEwNTMsNi41MjYzMTU3OSBMNC42MjA2MzE1OCw2LjUyNjMxNTc5IEM0Ljk1MTI5ODI1LDYuNTI2MzE1NzkgNS4yMjEwNTI2Myw2Ljg0NjEwNTI2IDUuMjIxMDUyNjMsNy4yMzU1MDg3OCBDNS4yMjEwNTI2Myw3LjYyNzA4NzczIDQuOTU3ODI0NTcsNy45NDQ3MDE3NSA0LjYyMDYzMTU4LDcuOTQ0NzAxNzUgWiBNNC42MjA2MzE1OCwxMy41MDcyOTgzIEwwLjYwMDQyMTA1MywxMy41MDcyOTgzIEMwLjI2OTc1NDM3NywxMy41MDcyOTgzIDAsMTMuMTg3NTA4OCAwLDEyLjc5ODEwNTMgQzAsMTIuNDA2NTI2MyAwLjI2OTc1NDM3NywxMi4wODg5MTIzIDAuNjAwNDIxMDUzLDEyLjA4ODkxMjMgTDQuNjIwNjMxNTgsMTIuMDg4OTEyMyBDNC45NTEyOTgyNSwxMi4wODg5MTIzIDUuMjIxMDUyNjMsMTIuNDA2NTI2MyA1LjIyMTA1MjYzLDEyLjc5ODEwNTMgQzUuMjIxMDUyNjMsMTMuMTg3NTA4OCA0Ljk1NzgyNDU3LDEzLjUwNzI5ODMgNC42MjA2MzE1OCwxMy41MDcyOTgzIEw0LjYyMDYzMTU4LDEzLjUwNzI5ODMgWiBNNC42MjA2MzE1OCwxOS43NzAzODYgTDAuNjAwNDIxMDUzLDE5Ljc3MDM4NiBDMC4yNjk3NTQzNzcsMTkuNzcwMzg2IDAsMTkuNDUwNTk2NSAwLDE5LjA2MTE5MyBDMCwxOC42Njk2MTQgMC4yNjk3NTQzNzcsMTguMzUyIDAuNjAwNDIxMDUzLDE4LjM1MiBMNC42MjA2MzE1OCwxOC4zNTIgQzQuOTUxMjk4MjUsMTguMzUyIDUuMjIxMDUyNjMsMTguNjcxNzg5NSA1LjIyMTA1MjYzLDE5LjA2MTE5MyBDNS4yMjEwNTI2MywxOS40NTI3NzE5IDQuOTU3ODI0NTcsMTkuNzcwMzg2IDQuNjIwNjMxNTgsMTkuNzcwMzg2IEw0LjYyMDYzMTU4LDE5Ljc3MDM4NiBaIE0yOS4zNzA1OTY1LDcuOTQ0NzAxNzUgTDI1LjAxNzU0MzksNy45NDQ3MDE3NSBDMjQuNjU4NTk2NSw3Ljk0NDcwMTc1IDI0LjM2NzA4NzcsNy42MjQ5MTIyNyAyNC4zNjcwODc3LDcuMjM1NTA4NzggQzI0LjM2NzA4NzcsNi44NDM5Mjk4MyAyNC42NTg1OTY1LDYuNTI2MzE1NzkgMjUuMDE3NTQzOSw2LjUyNjMxNTc5IEwyOS4zNjg0MjExLDYuNTI2MzE1NzkgQzI5LjcyNTE5Myw2LjUyNjMxNTc5IDMwLjAxODg3NzIsNi44NDYxMDUyNiAzMC4wMTg4NzcyLDcuMjM1NTA4NzggQzMwLjAxODg3NzIsNy42MjcwODc3MyAyOS43MjUxOTMsNy45NDQ3MDE3NSAyOS4zNjg0MjExLDcuOTQ0NzAxNzUgTDI5LjM3MDU5NjUsNy45NDQ3MDE3NSBaIE0yOS4zNzA1OTY1LDEzLjUwNzI5ODMgTDI1LjAxNzU0MzksMTMuNTA3Mjk4MyBDMjQuNjU4NTk2NSwxMy41MDcyOTgzIDI0LjM2NzA4NzcsMTMuMTg3NTA4OCAyNC4zNjcwODc3LDEyLjc5ODEwNTMgQzI0LjM2NzA4NzcsMTIuNDA2NTI2MyAyNC42NTg1OTY1LDEyLjA4ODkxMjMgMjUuMDE3NTQzOSwxMi4wODg5MTIzIEwyOS4zNjg0MjExLDEyLjA4ODkxMjMgQzI5LjcyNTE5MywxMi4wODg5MTIzIDMwLjAxODg3NzIsMTIuNDA2NTI2MyAzMC4wMTg4NzcyLDEyLjc5ODEwNTMgQzMwLjAxODg3NzIsMTMuMTg3NTA4OCAyOS43MjUxOTMsMTMuNTA3Mjk4MyAyOS4zNjg0MjExLDEzLjUwNzI5ODMgTDI5LjM3MDU5NjUsMTMuNTA3Mjk4MyBaIE0yOS4zNzA1OTY1LDE5Ljc3MDM4NiBMMjUuMDE3NTQzOSwxOS43NzAzODYgQzI0LjY1ODU5NjUsMTkuNzcwMzg2IDI0LjM2NzA4NzcsMTkuNDUwNTk2NSAyNC4zNjcwODc3LDE5LjA2MTE5MyBDMjQuMzY3MDg3NywxOC42Njk2MTQgMjQuNjU4NTk2NSwxOC4zNTIgMjUuMDE3NTQzOSwxOC4zNTIgTDI5LjM2ODQyMTEsMTguMzUyIEMyOS43MjUxOTMsMTguMzUyIDMwLjAxODg3NzIsMTguNjcxNzg5NSAzMC4wMTg4NzcyLDE5LjA2MTE5MyBDMzAuMDE4ODc3MiwxOS40NTI3NzE5IDI5LjcyNTE5MywxOS43NzAzODYgMjkuMzY4NDIxMSwxOS43NzAzODYgTDI5LjM3MDU5NjUsMTkuNzcwMzg2IFogTTExLjU1Mzc1NDQsMTguODYzMjY3MyBDMTEuNDM1MDcwMSwxOC44NjQ1Mzk2IDExLjMxODM0NzIsMTguODMyOTExNCAxMS4yMTY1NjE0LDE4Ljc3MTg1OTYgQzExLjAwMzE1OTUsMTguNjM5NDU1MiAxMC44NzQ0NjIzLDE4LjQwNTE2MDIgMTAuODc3MTUwNCwxOC4xNTQwMzUxIEwxMC44NzcxNTA0LDkuNDE1Mjk4MjUgQzEwLjg3NDQ2MjMsOS4xNjQxNzMxMiAxMS4wMDMxNTk1LDguOTI5ODc4MSAxMS4yMTY1NjE0LDguNzk3NDczNjggQzExLjQyNDA1NzUsOC42Njk5NjExNyAxMS42ODU2MjY3LDguNjY5OTYxMTcgMTEuODkzMTIyOCw4Ljc5NzQ3MzY4IEwxOS4xMjIxMDUzLDEzLjE2NzkyOTggQzE5LjMzNDg0MDgsMTMuMjk5OTMwNiAxOS40NjM0NDE2LDEzLjUzMzIyNTcgMTkuNDYxNTE2MywxMy43ODM1Nzg5IEMxOS40NjQyMDQ0LDE0LjAzNDcwNDEgMTkuMzM1NTA3MSwxNC4yNjg5OTkxIDE5LjEyMjEwNTMsMTQuNDAxNDAzNSBMMTEuODkzMTIyOCwxOC43NjUzMzMzIEMxMS43OTA3OTE2LDE4LjgyNzczMDMgMTEuNjczNTk2NywxOC44NjE1MzY1IDExLjU1Mzc1NDQsMTguODYzMjY3MyBaIE0xMi4yMzI0OTEyLDEwLjY0MDA3MDIgTDEyLjIzMjQ5MTIsMTYuOTI3MDg3NyBMMTcuNDI5NjE0LDEzLjc4MzU3ODkgTDEyLjIzMDMxNTgsMTAuNjQyMjQ1NiBMMTIuMjMyNDkxMiwxMC42NDAwNzAyIFoiIGlkPSLlvaLnirYiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==\"},function(e,n){e.exports=t},function(e,t,n){var r=n(7),i=n(8);\"string\"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,\"\"]]);var o={insert:\"head\",singleton:!1};r(i,o);e.exports=i.locals||{}},function(e,t){e.exports=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzZweCIgaGVpZ2h0PSIzMnB4IiB2aWV3Qm94PSIwIDAgMzYgMzIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT7nvJbnu4QgMjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSLpobXpnaIxIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0i57yW57uELTIiPgogICAgICAgICAgICA8ZyBpZD0i5aOw6Z+zIiBmaWxsPSIjRkZGRkZGIiBmaWxsLXJ1bGU9Im5vbnplcm8iPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTE1LjkzMDg4NTEsMC42MTgyMDU2MjUgTDcuMTgxNzAzNjYsNi40NDQwMDc4NCBMMy42MDM0NDU2Miw2LjQ0NDAwNzg0IEMxLjYyODMzMTAzLDYuNDQ0MDA3ODQgMC4wMjUxODc1OTM3LDguMjc3NjY4NjMgMC4wMjUxODc1OTM3LDEwLjUzMDQ1MTkgTDAuMDI1MTg3NTkzNywyMS40MzI4NzQ5IEMwLjAyNTE4NzU5MzcsMjMuNjkwODk3MiAxLjYyODMzMSwyNS41MTkzMTg5IDMuNjAzNDQ1NjIsMjUuNTE5MzE4OSBMNy4xODE3MDM2NiwyNS41MTkzMTg5IEwxNS45MjU2NDYsMzEuMzUwMzYwMiBDMTcuMDI1ODQyNSwzMi4wNzg1ODU1IDE4LjQzNTE0MTgsMzIuMTQ2NjkyOSAxOS41OTgyMDY2LDMxLjUyMzI0ODIgQzIwLjc2MTI3MTQsMzAuODk5ODAzNSAyMS40ODQyNTc3LDI5LjY4OTU4NzQgMjEuNDg5NDk2NywyOC4zNzQ1OTA3IEwyMS40ODk0OTY3LDMuNTkzOTc1MTMgQzIxLjQ4OTQ5NjcsMi4yNzM3MzkzOCAyMC43NjEyNzE0LDEuMDYzNTIzMjUgMTkuNTk4MjA2NiwwLjQ0NTMxNzYyNSBDMTguNDM1MTQxNywtMC4xODMzNjYwNjIgMTcuMDI1ODQyNSwtMC4xMTUyNTg2NTYgMTUuOTMwODg1MSwwLjYxODIwNTYyNSBMMTUuOTMwODg1MSwwLjYxODIwNTYyNSBaIE03LjE4MTcwMzY2LDIzLjEzNTU1OTkgTDMuNjAzNDQ1NjIsMjMuMTM1NTU5OSBDMy4wMjE5MTMyMiwyMy4xMzU1NTk5IDIuNDA4OTQ2NTksMjIuNDM4NzY4OCAyLjQwODk0NjU5LDIxLjQzMjg3NDkgTDIuNDA4OTQ2NTksMTAuNTM1NjkwOSBDMi40MDg5NDY1OSw5LjUyOTc5NyAzLjAxNjY3NDE2LDguODMzMDA1OTEgMy42MDM0NDU2Miw4LjgzMzAwNTkxIEw3LjE4MTcwMzY2LDguODMzMDA1OTEgTDcuMTgxNzAzNjYsMjMuMTM1NTU5OSBaIE0xOS4xMDU3Mzc3LDI4LjM3NDU5MDcgQzE5LjEwNTczNzcsMjguODE0NjY5MyAxOC44NjQ3NDIzLDI5LjIxODA3NDcgMTguNDc3MDU0LDI5LjQyMjM5NjggQzE4LjA4OTM2NTcsMjkuNjMxOTU4MSAxNy42MTc4NTI5LDI5LjYwNTc2MjkgMTcuMjU2MzU5OCwyOS4zNjQ3Njc1IEw5LjU2NTQ2MjY2LDI0LjI0NjIzNDQgTDkuNTY1NDYyNjYsNy43MjIzMzEzOCBMMTcuMjUxMTIwOCwyLjU5ODU1OTI4IEMxNy42MTc4NTMsMi4zNTc1NjM4OCAxOC4wODkzNjU4LDIuMzMxMzY4NzIgMTguNDcxODE1LDIuNTQwOTI5OTQgQzE4Ljg1OTUwMzIsMi43NTA0OTExNiAxOS4xMDA0OTg3LDMuMTUzODk2NTMgMTkuMTAwNDk4NywzLjU5Mzk3NTEzIEwxOS4xMDA0OTg3LDI4LjM3NDU5MDcgTDE5LjEwNTczNzcsMjguMzc0NTkwNyBaIiBpZD0i5b2i54q2Ij48L3BhdGg+CiAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPGcgaWQ9Iue8lue7hCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjUuMDAwMDAwLCAxMi4wMDAwMDApIiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIzIj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik01LjY4NDM0MTg5ZS0xNCwwIEw4LjkzMTYxODMxLDguOTMxNjE4MzEiIGlkPSLot6/lvoQtMiI+PC9wYXRoPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTUuNTA2NzA2MmUtMTQsLTEuNzc2MzU2ODRlLTE1IEw4LjkzMTYxODMxLDguOTMxNjE4MzEiIGlkPSLot6/lvoQtMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNC40NjU4MDksIDQuNDY1ODA5KSBzY2FsZSgtMSwgMSkgdHJhbnNsYXRlKC00LjQ2NTgwOSwgLTQuNDY1ODA5KSAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+\"},function(e,t){e.exports=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTc4MzAzNzcyODk2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjUwNDEiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTk1NS43MjMwODYgMTM1LjkwMjEwN0g2OTcuNTY4MTA2Vjg2LjI2MDcwMkE4Ni4zNTkwNzUgODYuMzU5MDc1IDAgMCAwIDYxMS4zMDc0MDMgMEg0MDcuMDIzODYxYTg2LjM1OTA3NSA4Ni4zNTkwNzUgMCAwIDAtODYuMjYwNzAzIDg2LjI2MDcwMnY0OS42NDE0MDVINjguMjc2OTE0QTI3LjI0OTI4MiAyNy4yNDkyODIgMCAwIDAgNDEuMDM5OTI4IDE2My4xNTEzOXY0LjUzNzQ0OGEyNy4yMzY5ODYgMjcuMjM2OTg2IDAgMCAwIDI3LjIzNjk4NiAyNy4yMzY5ODZoODEuNjc0MDY4VjkzNy43MzkyOThhODYuMzU5MDc1IDg2LjM1OTA3NSAwIDAgMCA4Ni4yNjA3MDIgODYuMjYwNzAyaDU1MS41NzY2MzJhODYuMzU5MDc1IDg2LjM1OTA3NSAwIDAgMCA4Ni4yNjA3MDItODYuMjYwNzAyVjE5NC45MjU4MjRoODEuNjc0MDY4QTI3LjIzNjk4NiAyNy4yMzY5ODYgMCAwIDAgOTgyLjk2MDA3MiAxNjcuNjg4ODM4di00LjUzNzQ0OGEyNy4yNDkyODIgMjcuMjQ5MjgyIDAgMCAwLTI3LjIzNjk4Ni0yNy4yNDkyODN6TTM3OS43ODY4NzUgODYuMjYwNzAyQTI3LjI2MTU3OSAyNy4yNjE1NzkgMCAwIDEgNDA3LjAyMzg2MSA1OS4wMjM3MTdoMjA0LjI4MzU0MmEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxIDI3LjIzNjk4NiAyNy4yMzY5ODV2NDkuNjQxNDA1SDM3OS43ODY4NzV6TTgxNS4wMjUzMDIgOTM3LjczOTI5OGEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxLTI3LjIzNjk4NiAyNy4yMzY5ODVIMjM2LjIxMTY4NGEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxLTI3LjIzNjk4Ni0yNy4yMzY5ODVWMTk0LjkyNTgyNGg2MDYuMDUwNjA0eiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0MiI+PC9wYXRoPjxwYXRoIGQ9Ik0yOTMuNTI2MTcyIDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0MyI+PC9wYXRoPjxwYXRoIGQ9Ik00NzkuNjQ3NjI1IDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0NCI+PC9wYXRoPjxwYXRoIGQ9Ik02NjUuNzgxMzc1IDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0NSI+PC9wYXRoPjwvc3ZnPg==\"},function(e,t,n){\"use strict\";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function s(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function u(e,t){for(var n={},r=[],i=0;i<e.length;i++){var o=e[i],u=t.base?o[0]+t.base:o[0],c=n[u]||0,l=\"\".concat(u,\" \").concat(c);n[u]=c+1;var p=s(l),f={css:o[1],media:o[2],sourceMap:o[3]};-1!==p?(a[p].references++,a[p].updater(f)):a.push({identifier:l,updater:M(f,t),references:1}),r.push(l)}return r}function c(e){var t=document.createElement(\"style\"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),\"function\"==typeof e.insert)e.insert(t);else{var a=o(e.insert||\"head\");if(!a)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");a.appendChild(t)}return t}var l,p=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join(\"\\n\")});function f(e,t,n,r){var i=n?\"\":r.media?\"@media \".concat(r.media,\" {\").concat(r.css,\"}\"):r.css;if(e.styleSheet)e.styleSheet.cssText=p(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function h(e,t,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?e.setAttribute(\"media\",i):e.removeAttribute(\"media\"),o&&\"undefined\"!=typeof btoa&&(r+=\"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o)))),\" */\")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var y=null,d=0;function M(e,t){var n,r,i;if(t.singleton){var o=d++;n=y||(y=c(t)),r=f.bind(null,n,o,!1),i=f.bind(null,n,o,!0)}else n=c(t),r=h.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||\"boolean\"==typeof t.singleton||(t.singleton=i());var n=u(e=e||[],t);return function(e){if(e=e||[],\"[object Array]\"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=s(n[r]);a[i].references--}for(var o=u(e,t),c=0;c<n.length;c++){var l=s(n[c]);0===a[l].references&&(a[l].updater(),a.splice(l,1))}n=o}}}},function(e,t,n){(t=n(9)(!1)).push([e.i,\".media-mute-box {\\n  position: absolute;\\n  z-index: 2;\\n  width: 100%;\\n  height: 100%;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n.media-mute-box-inner {\\n  width: 88px;\\n  cursor: pointer;\\n  height: 64px;\\n  border-radius: 8px;\\n  background-color: black;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  flex-direction: column;\\n}\\n.media-mute-box-inner span {\\n  color: white;\\n}\\n.media-mute-box-inner img {\\n  width: 24px;\\n}\\n.plugin-video-box {\\n  display: flex;\\n  flex-direction: column;\\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.2);\\n  overflow: hidden;\\n  transform-origin: top left;\\n}\\n.plugin-video-box-nav {\\n  width: 100%;\\n  height: 32px;\\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.2);\\n  background-image: linear-gradient(180deg, #E0E1E0 0%, #CDCDCC 100%);\\n  display: flex;\\n  flex-direction: row;\\n  flex-shrink: 0;\\n  justify-content: space-between;\\n  align-items: center;\\n  cursor: default;\\n}\\n.plugin-video-box-nav span {\\n  margin-left: 6px;\\n  font-size: 12px;\\n  font-weight: bold;\\n}\\n.plugin-video-box-body {\\n  width: 100%;\\n  height: 100%;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  background-color: black;\\n}\\n.white-plugin-video-box {\\n  position: relative;\\n  width: 100%;\\n  height: 100%;\\n}\\n.white-plugin-video-box video::-webkit-media-controls-fullscreen-button {\\n  display: none !important;\\n}\\n.white-plugin-video {\\n  position: absolute;\\n  z-index: 1;\\n  width: 100%;\\n  height: 100%;\\n}\\n.plugin-video-box-delete {\\n  width: 22px;\\n  height: 22px;\\n  background-color: #FF756E;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  border-radius: 50%;\\n  margin-right: 8px;\\n  cursor: pointer;\\n  opacity: 0.6;\\n}\\n.plugin-video-box-delete img {\\n  width: 14px;\\n}\\n.plugin-video-box-delete:hover {\\n  opacity: 1;\\n}\\n\",\"\"]),e.exports=t},function(e,t,n){\"use strict\";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||\"\",r=e[3];if(!r)return n;if(t&&\"function\"==typeof btoa){var i=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),u=\"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(s),\"/*# \".concat(u,\" */\")),o=r.sources.map((function(e){return\"/*# sourceURL=\".concat(r.sourceRoot||\"\").concat(e,\" */\")}));return[n].concat(o).concat([i]).join(\"\\n\")}var a,s,u;return[n].join(\"\\n\")}(t,e);return t[2]?\"@media \".concat(t[2],\" {\").concat(n,\"}\"):n})).join(\"\")},t.i=function(e,n,r){\"string\"==typeof e&&(e=[[null,e,\"\"]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);r&&i[u[0]]||(n&&(u[2]?u[2]=\"\".concat(n,\" and \").concat(u[2]):u[2]=n),t.push(u))}},t}},function(e,t){var n;n=function(){return this}();try{n=n||new Function(\"return this\")()}catch(e){\"object\"==typeof window&&(n=window)}e.exports=n},function(e,t){var n,r,i=e.exports={};function o(){throw new Error(\"setTimeout has not been defined\")}function a(){throw new Error(\"clearTimeout has not been defined\")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n=\"function\"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r=\"function\"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,p=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):p=-1,c.length&&h())}function h(){if(!l){var e=s(f);l=!0;for(var t=c.length;t;){for(u=c,c=[];++p<t;)u&&u[p].run();p=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function y(e,t){this.fun=e,this.array=t}function d(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new y(e,t)),1!==c.length||l||s(h)},y.prototype.run=function(){this.fun.apply(null,this.array)},i.title=\"browser\",i.browser=!0,i.env={},i.argv=[],i.version=\"\",i.versions={},i.on=d,i.addListener=d,i.once=d,i.off=d,i.removeListener=d,i.removeAllListeners=d,i.emit=d,i.prependListener=d,i.prependOnceListener=d,i.listeners=function(e){return[]},i.binding=function(e){throw new Error(\"process.binding is not supported\")},i.cwd=function(){return\"/\"},i.chdir=function(e){throw new Error(\"process.chdir is not supported\")},i.umask=function(){return 0}},function(e,t,n){\"use strict\";n.r(t);var r,i,o=n(0),a=n(3),s=(n(4),n(1)),u=n(5),c=n(2),l=n(6),p=function(){function e(e){this.player=e,this.isFirstSync=!0}return e.prototype.syncProgress=function(e){this.isFirstSync?(this.isFirstSync=!1,this.player.currentTime=e):Math.abs(this.player.currentTime-e)>=2&&(this.player.currentTime=e)},e}(),f=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Class extends value \"+String(t)+\" is not a constructor or null\");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),h=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},y=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},d=function(e){return new Promise((function(t){return setTimeout(t,e)}))};!function(e){e.host=\"host\",e.guest=\"guest\",e.listener=\"listener\"}(i||(i={}));var M=function(e){function t(t){var n=e.call(this,t)||this;return n.selfUserInf=null,n.playerState=!1,n.handleStartCondition=function(){return h(n,void 0,void 0,(function(){var e,t=this;return y(this,(function(n){switch(n.label){case 0:return e=this.props.plugin,this.setMyIdentityRoom(),[4,this.handleNativePlayerState(e.attributes.play)];case 1:return n.sent(),this.playerState=e.attributes.play,this.player.current&&(this.handleFirstSeek(),this.player.current.addEventListener(\"play\",(function(){t.handleRemotePlayState(!0)})),this.player.current.addEventListener(\"pause\",(function(){t.handleRemotePlayState(!1)})),this.player.current.addEventListener(\"seeked\",(function(){if(t.player.current){var n=e.attributes.currentTime;t.handleRemoteSeekData(n)}})),this.player.current.addEventListener(\"volumechange\",(function(e){t.handleRemoteVolumeChange(e.target.volume),t.handleRemoteMuteState(e.target.muted)}))),[2]}}))}))},n.handleFirstSeek=function(e){if(!e){var t=n.props.plugin,r=Date.now()/1e3,i=void 0;i=t.attributes.seekTime?t.attributes.seek+r-t.attributes.seekTime:t.attributes.seek,n.syncNode.syncProgress(i)}},n.isHost=function(){return!(!n.selfUserInf||n.selfUserInf.identity!==i.host)},n.setMyIdentityRoom=function(){var e=n.props.plugin;e.context&&e.context.identity&&(n.selfUserInf={identity:e.context.identity})},n.handleRemoteSeekData=function(e){var t=n.props.plugin;n.selfUserInf&&n.selfUserInf.identity===i.host&&t.putAttributes({seek:e,seekTime:Date.now()/1e3})},n.handleRemoteMuteState=function(e){var t=n.props.plugin;n.selfUserInf&&n.selfUserInf.identity===i.host&&t.putAttributes({mute:e})},n.handleRemoteVolumeChange=function(e){var t=n.props.plugin;n.selfUserInf&&n.selfUserInf.identity===i.host&&t.putAttributes({volume:e})},n.handleRemotePlayState=function(e){var t=n.props.plugin;n.playerState=e;var r=t.attributes.currentTime;n.selfUserInf&&n.selfUserInf.identity===i.host&&t.putAttributes({play:e,seek:r,seekTime:Date.now()/1e3})},n.lastSyncProgressTimestamp=0,n.onTimeUpdate=function(e){var t=n.props.plugin,r=Date.now();r-n.lastSyncProgressTimestamp>1e3&&(n.lastSyncProgressTimestamp=r,n.selfUserInf&&n.selfUserInf.identity===i.host&&t.putAttributes({currentTime:e,play:n.playerState}))},n.handleNativePlayerState=function(e){return h(n,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:if(!e)return[3,7];if(!this.player.current)return[3,6];n.label=1;case 1:return n.trys.push([1,3,,6]),[4,this.player.current.play()];case 2:return n.sent(),[3,6];case 3:return\"\"+(t=n.sent()).name!=\"NotAllowedError\"&&\"\"+t.name!=\"AbortError\"?[3,5]:(this.setState({selfMute:!0}),[4,this.player.current.play()]);case 4:n.sent(),n.label=5;case 5:return[3,6];case 6:return[3,8];case 7:this.player.current&&this.player.current.pause(),n.label=8;case 8:return[2]}}))}))},n.handleSeekReaction=function(e,t){return h(n,void 0,void 0,(function(){return y(this,(function(n){return this.isHost()||this.player.current&&void 0!==t&&(this.player.current.currentTime=e+Date.now()/1e3-t),[2]}))}))},n.timeUpdate=function(){if(n.player.current){var e=n.player.current.currentTime;n.onTimeUpdate(e)}},n.detectVideoClickEnable=function(){var e=n.props.plugin;return e.context&&e.context.identity?e.context.identity!==i.host?\"none\":\"auto\":\"none\"},n.renderMuteBox=function(){var e=n.props.plugin;return e.context&&e.context.identity&&e.context.identity!==i.host&&n.state.selfMute?o.createElement(\"div\",{className:\"media-mute-box\"},o.createElement(\"div\",{onClick:function(){n.setState({selfMute:!1})},onTouchStart:function(){n.setState({selfMute:!1})},style:{pointerEvents:\"auto\"},className:\"media-mute-box-inner\"},o.createElement(\"img\",{src:u,alt:\"mute_icon\"}),o.createElement(\"span\",null,\"unmute\"))):null},n.handleRemove=function(){return h(n,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return e=this.props.plugin,this.handleRemotePlayState(!1),[4,d(300)];case 1:return t.sent(),e.remove(),[2]}}))}))},n.renderDeleteBtn=function(){var e=n.props.plugin;return e.context&&e.context.identity&&e.context.identity===i.host?o.createElement(\"div\",{style:{pointerEvents:\"auto\"},className:\"plugin-audio-box-delete\",onClick:n.handleRemove},o.createElement(\"img\",{src:l,alt:\"delete\"})):null},n.renderNavigation=function(){return!0===n.props.plugin.attributes.isNavigationDisable?null:o.createElement(\"div\",{className:\"plugin-video-box-nav\"},o.createElement(\"div\",null,o.createElement(\"img\",{style:{width:20,marginLeft:8},src:c,alt:\"video_plugin\"}),o.createElement(\"span\",null,\"Video Player\")),n.renderDeleteBtn())},n.handleOnEnd=function(){return h(n,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return e=this.props.plugin,this.player.current?this.selfUserInf?this.selfUserInf.identity!==i.host?[3,2]:(e.putAttributes({seek:0,seekTime:void 0,currentTime:0}),[4,d(500)]):[3,5]:[3,7];case 1:return t.sent(),this.player.current.load(),[3,4];case 2:return[4,d(1e3)];case 3:t.sent(),this.player.current.load(),t.label=4;case 4:return[3,7];case 5:return[4,d(1e3)];case 6:t.sent(),this.player.current.load(),t.label=7;case 7:return this.setState({isEnd:!0}),[2]}}))}))},n.handleOnLoadedMetadataCapture=function(){return h(n,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return e=navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform),t=this.state.isEnd,e?[4,d(300)]:[3,2];case 1:n.sent(),this.handleFirstSeek(t),n.label=2;case 2:return[2]}}))}))},n.player=o.createRef(),n.reactionSeekDisposer=n.startSeekReaction(),n.reactionSeekTimeDisposer=n.startSeekTimeReaction(),n.reactionPlayDisposer=n.startPlayReaction(),n.reactionVolumeDisposer=n.startVolumeReaction(),n.reactionMuteDisposer=n.startMuteTimeReaction(),n.reactionSyncDisposer=n.startSyncReaction(),n.state={play:!1,seek:0,selfMute:!1,currentTime:0,mute:!1,volume:1,isEnd:!1},n}return f(t,e),t.prototype.componentDidMount=function(){return h(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return this.syncNode=new p(this.player.current),[4,this.handleStartCondition()];case 1:return e.sent(),[2]}}))}))},t.prototype.startPlayReaction=function(){var e=this,t=this.props.plugin;return Object(s.a)((function(){return t.attributes.play}),(function(t){return h(e,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return this.isHost()?[3,2]:[4,this.handleNativePlayerState(t)];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.startSeekReaction=function(){var e=this,t=this.props.plugin;return Object(s.a)((function(){return t.attributes.seek}),(function(n){return h(e,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.handleSeekReaction(n,t.attributes.seekTime)];case 1:return e.sent(),[2]}}))}))}))},t.prototype.startSyncReaction=function(){var e=this,t=this.props.plugin;return Object(s.a)((function(){return t.attributes.currentTime}),(function(t){return h(e,void 0,void 0,(function(){return y(this,(function(e){return this.isHost()||(2,this.player.current&&Math.abs(t-this.player.current.currentTime)>2&&(this.player.current.currentTime=t)),[2]}))}))}))},t.prototype.startSeekTimeReaction=function(){var e=this,t=this.props.plugin;return Object(s.a)((function(){return t.attributes.seekTime}),(function(n){return h(e,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.handleSeekReaction(t.attributes.seek,n)];case 1:return e.sent(),[2]}}))}))}))},t.prototype.startVolumeReaction=function(){var e=this,t=this.props.plugin;return Object(s.a)((function(){return t.attributes.volume}),(function(t){e.isHost()||e.player.current&&(e.player.current.volume=t)}))},t.prototype.startMuteTimeReaction=function(){var e=this,t=this.props.plugin;return Object(s.a)((function(){return t.attributes.mute}),(function(t){e.isHost()||e.setState({mute:t})}))},t.prototype.componentWillUnmount=function(){this.reactionPlayDisposer(),this.reactionSeekDisposer(),this.reactionMuteDisposer(),this.reactionVolumeDisposer(),this.reactionSeekTimeDisposer(),this.reactionSyncDisposer(),this.player.current&&this.player.current.pause()},t.prototype.render=function(){var e=this.props,t=e.size,n=e.plugin,r=e.scale,i=this.state,a=i.mute,s=i.selfMute,u=0===r?1:r;return o.createElement(\"div\",{className:\"plugin-video-box\",style:{width:t.width/u,height:t.height/u,transform:\"scale(\"+u+\")\"}},this.renderNavigation(),o.createElement(\"div\",{className:\"plugin-video-box-body\"},this.renderMuteBox(),o.createElement(\"div\",{className:\"white-plugin-video-box\"},o.createElement(\"video\",{\"webkit-playsinline\":\"true\",playsInline:!0,poster:n.attributes.poster,className:\"white-plugin-video\",src:n.attributes.pluginVideoUrl,ref:this.player,muted:a||s,style:{width:\"100%\",height:\"100%\",pointerEvents:this.detectVideoClickEnable(),outline:\"none\"},disablePictureInPicture:!0,onLoadedMetadataCapture:this.handleOnLoadedMetadataCapture,onEnded:this.handleOnEnd,controls:!0,controlsList:\"nodownload nofullscreen\",onTimeUpdate:this.timeUpdate,preload:\"metadata\"}))))},t}(o.Component),g=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if(\"function\"!=typeof n&&null!==n)throw new TypeError(\"Class extends value \"+String(n)+\" is not a constructor or null\");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),v=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},N=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},D=function(e){function t(t){var n=e.call(this,t)||this;return n.renderNavigation=function(){return!0===n.props.plugin.attributes.isNavigationDisable?null:o.createElement(\"div\",{className:\"plugin-video-box-nav\"},o.createElement(\"div\",null,o.createElement(\"img\",{style:{width:20,marginLeft:8},src:c,alt:\"video_plugin\"}),o.createElement(\"span\",null,\"Video Player\")))},n.player=o.createRef(),n.reactionPlayDisposer=n.startPlayReaction(),n.reactionSeekDisposer=n.startSeekReaction(),n.reactionMuteDisposer=n.startMuteTimeReaction(),n.reactionVolumeDisposer=n.startVolumeReaction(),n.reactionReplayPlayingDisposer=n.startReplayPlayingReaction(),n.state={mute:!1},n}return g(t,e),t.prototype.componentDidMount=function(){this.syncNode=new p(this.player.current)},t.prototype.startPlayReaction=function(){var e=this;return Object(s.a)((function(){return e.props.plugin.attributes.play}),(function(t){return v(e,void 0,void 0,(function(){return N(this,(function(e){switch(e.label){case 0:if(!t)return[3,7];if(!this.player.current)return[3,6];e.label=1;case 1:return e.trys.push([1,3,,6]),[4,this.player.current.play()];case 2:return e.sent(),[3,6];case 3:return\"\"+e.sent().name!=\"NotAllowedError\"?[3,5]:[4,this.player.current.play()];case 4:e.sent(),e.label=5;case 5:return[3,6];case 6:return[3,8];case 7:this.player.current&&this.player.current.pause(),e.label=8;case 8:return[2]}}))}))}))},t.prototype.startSeekReaction=function(){var e=this;return Object(s.a)((function(){return e.props.plugin.playerTimestamp}),(function(t){var n=e.props.plugin.attributes,r=n.seek,i=n.seekTime;if(void 0!==i){var o=r+(e.props.player.beginTimestamp+t)/1e3-i;e.syncNode.syncProgress(o)}}))},t.prototype.startReplayPlayingReaction=function(){var e=this;return Object(s.a)((function(){return e.props.plugin.isPlaying}),(function(t){return v(e,void 0,void 0,(function(){return N(this,(function(e){switch(e.label){case 0:if(!t)return[3,7];if(!this.player.current)return[3,6];e.label=1;case 1:return e.trys.push([1,3,,6]),[4,this.player.current.play()];case 2:return e.sent(),[3,6];case 3:return\"\"+e.sent().name!=\"NotAllowedError\"?[3,5]:[4,this.player.current.play()];case 4:e.sent(),e.label=5;case 5:return[3,6];case 6:return[3,8];case 7:this.player.current&&this.player.current.pause(),e.label=8;case 8:return[2]}}))}))}))},t.prototype.startVolumeReaction=function(){var e=this;return Object(s.a)((function(){return e.props.plugin.attributes.volume}),(function(t){e.player.current&&(e.player.current.volume=t)}))},t.prototype.componentWillUnmount=function(){this.reactionPlayDisposer(),this.reactionSeekDisposer(),this.reactionMuteDisposer(),this.reactionVolumeDisposer(),this.reactionReplayPlayingDisposer()},t.prototype.startMuteTimeReaction=function(){var e=this,t=this.props.plugin;return Object(s.a)((function(){return t.attributes.mute}),(function(t){e.setState({mute:t})}))},t.prototype.render=function(){var e=this.props,t=e.size,n=e.plugin,r=e.scale,i=0===r?1:r;return o.createElement(\"div\",{className:\"plugin-video-box\",style:{width:t.width/i,height:t.height/i,transform:\"scale(\"+i+\")\"}},this.renderNavigation(),o.createElement(\"div\",{className:\"plugin-video-box-body\"},o.createElement(\"div\",{className:\"white-plugin-video-box\"},o.createElement(\"video\",{\"webkit-playsinline\":\"true\",playsInline:!0,poster:n.attributes.poster?n.attributes.poster:void 0,className:\"white-plugin-video\",src:n.attributes.pluginVideoUrl,ref:this.player,muted:this.state.mute,style:{width:\"100%\",height:\"100%\",pointerEvents:\"none\",outline:\"none\"},controls:!1,preload:\"auto\"}))))},t}(o.Component);n.d(t,\"videoPlugin\",(function(){return T}));var b=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if(\"function\"!=typeof n&&null!==n)throw new TypeError(\"Class extends value \"+String(n)+\" is not a constructor or null\");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),m=function(){return(m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},j=function(e){function t(t){return e.call(this,t)||this}return b(t,e),t.prototype.render=function(){var e=this;return o.createElement(a.CNode,{context:this.props.cnode},o.createElement(a.RoomConsumer,null,(function(t){return t?o.createElement(M,m({},e.props,{room:t})):null})),o.createElement(a.PlayerConsumer,null,(function(t){return t?o.createElement(D,m({},e.props,{player:t})):null})))},t}(o.Component),T=Object.freeze({kind:\"video\",render:j,defaultAttributes:{play:!1,seek:0,mute:!1,volume:1,currentTime:0},hitTest:function(e){var t=e.component.context.getMemberState();return!(t&&\"eraser\"===t.currentApplianceName)}})}])}));\n\n//# sourceURL=webpack://whiteboard-bridge/./node_modules/@netless/white-video-plugin/dist/index.js?");

/***/ }),

/***/ 37223:
/*!*****************************************************************!*\
  !*** ./node_modules/@netless/white-video-plugin2/dist/index.js ***!
  \*****************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("!function(e,t){ true?module.exports=t(__webpack_require__(/*! react */ 67294),__webpack_require__(/*! white-web-sdk */ 63314)):0}(window,(function(e,t){return function(e){var t={};function n(M){if(t[M])return t[M].exports;var i=t[M]={i:M,l:!1,exports:{}};return e[M].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,M){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:M})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var M=Object.create(null);if(n.r(M),Object.defineProperty(M,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)n.d(M,i,function(t){return e[t]}.bind(null,i));return M},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=8)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzFweCIgaGVpZ2h0PSIyN3B4IiB2aWV3Qm94PSIwIDAgMzEgMjciIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT52aWRlbyAoMSk8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0i6aG16Z2iMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9InZpZGVvLSgxKSIgZmlsbD0iIzJDMkMyQyIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgPHBhdGggZD0iTTI2LjY3NTIyODEsMjYuMDgzNTA4OCBMMy43NTI2MzE1OCwyNi4wODM1MDg4IEMxLjY4NTk2NDksMjYuMDgzNTA4OCAwLDI0LjMyNTc1NDQgMCwyMi4xNTQ2NjY3IEwwLDMuOTMxMDE3NTQgQzAsMS43NjY0NTYxNSAxLjY3OTQzODU5LDAgMy43NTI2MzE1OCwwIEwyNi42NzUyMjgxLDAgQzI4Ljc0MTg5NDcsMCAzMC40MzAwMzUxLDEuNzU5OTI5ODMgMzAuNDMwMDM1MSwzLjkzMTAxNzU0IEwzMC40MzAwMzUxLDIyLjE1NDY2NjcgQzMwLjQyMTMzMzQsMjQuMzE3MDUyNiAyOC43NDE4OTQ3LDI2LjA4MzUwODggMjYuNjc1MjI4MSwyNi4wODM1MDg4IFogTTMuNzUyNjMxNTgsMS40MjQ5MTIyNyBDMi40MzIxNDAzNiwxLjQyNDkxMjI3IDEuMzU1Mjk4MjUsMi41NTM5NjQ5IDEuMzU1Mjk4MjUsMy45Mzc1NDM4NSBMMS4zNTUyOTgyNSwyMi4xNjExOTMgQzEuMzU1Mjk4MjUsMjMuNTQ0NzcxOSAyLjQzMjE0MDM2LDI0LjY3MTY0OTEgMy43NTI2MzE1OCwyNC42NzE2NDkxIEwyNi42NzUyMjgxLDI0LjY3MTY0OTEgQzI3Ljk5NTcxOTMsMjQuNjcxNjQ5MSAyOS4wNzQ3MzY4LDIzLjU0NDc3MTkgMjkuMDc0NzM2OCwyMi4xNjExOTMgTDI5LjA3NDczNjgsMy45MzEwMTc1NCBDMjkuMDc0NzM2OCwyLjU0NzQzODU5IDI3Ljk5NTcxOTMsMS40MTgzODU5NiAyNi42NzUyMjgxLDEuNDE4Mzg1OTYgTDMuNzUyNjMxNTgsMS40MTgzODU5NiBMMy43NTI2MzE1OCwxLjQyNDkxMjI3IFoiIGlkPSLlvaLnirYiPjwvcGF0aD4KICAgICAgICAgICAgPHBhdGggZD0iTTUuMDI3NDM4NTksMjYuMDc2OTgyNSBDNC42NDU1MTEzLDI2LjA2NjMwNjUgNC4zNDM1NjQwOSwyNS43NDk3OTU5IDQuMzUwODc3MiwyNS4zNjc3ODk1IEw0LjM1MDg3NzIsMC43MDkxOTI5OTEgQzQuMzUwODc3MiwwLjMxNzYxNDA0NCA0LjY1NTQzODU5LDAgNS4wMjc0Mzg1OSwwIEM1LjQxMDIyMjg5LDAuMDA5NTAzMDE3NzYgNS43MTM0NzI3OSwwLjMyNjM2MDI4OCA1LjcwNjE3NTQzLDAuNzA5MTkyOTkxIEw1LjcwNjE3NTQzLDI1LjM2Nzc4OTUgQzUuNzA2MTc1NDMsMjUuNzU5MzY4NCA1LjQwODE0MDMzLDI2LjA3Njk4MjUgNS4wMjc0Mzg1OSwyNi4wNzY5ODI1IEw1LjAyNzQzODU5LDI2LjA3Njk4MjUgWiBNMjUuMDE1MzY4NCwyNi4wNzY5ODI1IEMyNC42MzM0NDExLDI2LjA2NjMwNjYgMjQuMzMxNDkzOSwyNS43NDk3OTYgMjQuMzM4ODA3LDI1LjM2Nzc4OTUgTDI0LjMzODgwNywwLjcwOTE5Mjk5MSBDMjQuMzM4ODA3LDAuMzE3NjE0MDQ0IDI0LjY0MzM2ODQsMCAyNS4wMTUzNjg0LDAgQzI1LjM5ODE1MjcsMC4wMDk1MDMwMTc3NiAyNS43MDE0MDI2LDAuMzI2MzYwMjg4IDI1LjY5NDEwNTMsMC43MDkxOTI5OTEgTDI1LjY5NDEwNTMsMjUuMzY3Nzg5NSBDMjUuNzAxNDAyNiwyNS43NTA2MjIyIDI1LjM5ODE1MjcsMjYuMDY3NDc5NCAyNS4wMTUzNjg0LDI2LjA3Njk4MjUgTDI1LjAxNTM2ODQsMjYuMDc2OTgyNSBaIiBpZD0i5b2i54q2Ij48L3BhdGg+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik00LjYyMDYzMTU4LDcuOTQ0NzAxNzUgTDAuNjAwNDIxMDUzLDcuOTQ0NzAxNzUgQzAuMjY5NzU0Mzc3LDcuOTQ0NzAxNzUgMCw3LjYyNDkxMjI3IDAsNy4yMzU1MDg3OCBDMCw2Ljg0MzkyOTgzIDAuMjY5NzU0Mzc3LDYuNTI2MzE1NzkgMC42MDA0MjEwNTMsNi41MjYzMTU3OSBMNC42MjA2MzE1OCw2LjUyNjMxNTc5IEM0Ljk1MTI5ODI1LDYuNTI2MzE1NzkgNS4yMjEwNTI2Myw2Ljg0NjEwNTI2IDUuMjIxMDUyNjMsNy4yMzU1MDg3OCBDNS4yMjEwNTI2Myw3LjYyNzA4NzczIDQuOTU3ODI0NTcsNy45NDQ3MDE3NSA0LjYyMDYzMTU4LDcuOTQ0NzAxNzUgWiBNNC42MjA2MzE1OCwxMy41MDcyOTgzIEwwLjYwMDQyMTA1MywxMy41MDcyOTgzIEMwLjI2OTc1NDM3NywxMy41MDcyOTgzIDAsMTMuMTg3NTA4OCAwLDEyLjc5ODEwNTMgQzAsMTIuNDA2NTI2MyAwLjI2OTc1NDM3NywxMi4wODg5MTIzIDAuNjAwNDIxMDUzLDEyLjA4ODkxMjMgTDQuNjIwNjMxNTgsMTIuMDg4OTEyMyBDNC45NTEyOTgyNSwxMi4wODg5MTIzIDUuMjIxMDUyNjMsMTIuNDA2NTI2MyA1LjIyMTA1MjYzLDEyLjc5ODEwNTMgQzUuMjIxMDUyNjMsMTMuMTg3NTA4OCA0Ljk1NzgyNDU3LDEzLjUwNzI5ODMgNC42MjA2MzE1OCwxMy41MDcyOTgzIEw0LjYyMDYzMTU4LDEzLjUwNzI5ODMgWiBNNC42MjA2MzE1OCwxOS43NzAzODYgTDAuNjAwNDIxMDUzLDE5Ljc3MDM4NiBDMC4yNjk3NTQzNzcsMTkuNzcwMzg2IDAsMTkuNDUwNTk2NSAwLDE5LjA2MTE5MyBDMCwxOC42Njk2MTQgMC4yNjk3NTQzNzcsMTguMzUyIDAuNjAwNDIxMDUzLDE4LjM1MiBMNC42MjA2MzE1OCwxOC4zNTIgQzQuOTUxMjk4MjUsMTguMzUyIDUuMjIxMDUyNjMsMTguNjcxNzg5NSA1LjIyMTA1MjYzLDE5LjA2MTE5MyBDNS4yMjEwNTI2MywxOS40NTI3NzE5IDQuOTU3ODI0NTcsMTkuNzcwMzg2IDQuNjIwNjMxNTgsMTkuNzcwMzg2IEw0LjYyMDYzMTU4LDE5Ljc3MDM4NiBaIE0yOS4zNzA1OTY1LDcuOTQ0NzAxNzUgTDI1LjAxNzU0MzksNy45NDQ3MDE3NSBDMjQuNjU4NTk2NSw3Ljk0NDcwMTc1IDI0LjM2NzA4NzcsNy42MjQ5MTIyNyAyNC4zNjcwODc3LDcuMjM1NTA4NzggQzI0LjM2NzA4NzcsNi44NDM5Mjk4MyAyNC42NTg1OTY1LDYuNTI2MzE1NzkgMjUuMDE3NTQzOSw2LjUyNjMxNTc5IEwyOS4zNjg0MjExLDYuNTI2MzE1NzkgQzI5LjcyNTE5Myw2LjUyNjMxNTc5IDMwLjAxODg3NzIsNi44NDYxMDUyNiAzMC4wMTg4NzcyLDcuMjM1NTA4NzggQzMwLjAxODg3NzIsNy42MjcwODc3MyAyOS43MjUxOTMsNy45NDQ3MDE3NSAyOS4zNjg0MjExLDcuOTQ0NzAxNzUgTDI5LjM3MDU5NjUsNy45NDQ3MDE3NSBaIE0yOS4zNzA1OTY1LDEzLjUwNzI5ODMgTDI1LjAxNzU0MzksMTMuNTA3Mjk4MyBDMjQuNjU4NTk2NSwxMy41MDcyOTgzIDI0LjM2NzA4NzcsMTMuMTg3NTA4OCAyNC4zNjcwODc3LDEyLjc5ODEwNTMgQzI0LjM2NzA4NzcsMTIuNDA2NTI2MyAyNC42NTg1OTY1LDEyLjA4ODkxMjMgMjUuMDE3NTQzOSwxMi4wODg5MTIzIEwyOS4zNjg0MjExLDEyLjA4ODkxMjMgQzI5LjcyNTE5MywxMi4wODg5MTIzIDMwLjAxODg3NzIsMTIuNDA2NTI2MyAzMC4wMTg4NzcyLDEyLjc5ODEwNTMgQzMwLjAxODg3NzIsMTMuMTg3NTA4OCAyOS43MjUxOTMsMTMuNTA3Mjk4MyAyOS4zNjg0MjExLDEzLjUwNzI5ODMgTDI5LjM3MDU5NjUsMTMuNTA3Mjk4MyBaIE0yOS4zNzA1OTY1LDE5Ljc3MDM4NiBMMjUuMDE3NTQzOSwxOS43NzAzODYgQzI0LjY1ODU5NjUsMTkuNzcwMzg2IDI0LjM2NzA4NzcsMTkuNDUwNTk2NSAyNC4zNjcwODc3LDE5LjA2MTE5MyBDMjQuMzY3MDg3NywxOC42Njk2MTQgMjQuNjU4NTk2NSwxOC4zNTIgMjUuMDE3NTQzOSwxOC4zNTIgTDI5LjM2ODQyMTEsMTguMzUyIEMyOS43MjUxOTMsMTguMzUyIDMwLjAxODg3NzIsMTguNjcxNzg5NSAzMC4wMTg4NzcyLDE5LjA2MTE5MyBDMzAuMDE4ODc3MiwxOS40NTI3NzE5IDI5LjcyNTE5MywxOS43NzAzODYgMjkuMzY4NDIxMSwxOS43NzAzODYgTDI5LjM3MDU5NjUsMTkuNzcwMzg2IFogTTExLjU1Mzc1NDQsMTguODYzMjY3MyBDMTEuNDM1MDcwMSwxOC44NjQ1Mzk2IDExLjMxODM0NzIsMTguODMyOTExNCAxMS4yMTY1NjE0LDE4Ljc3MTg1OTYgQzExLjAwMzE1OTUsMTguNjM5NDU1MiAxMC44NzQ0NjIzLDE4LjQwNTE2MDIgMTAuODc3MTUwNCwxOC4xNTQwMzUxIEwxMC44NzcxNTA0LDkuNDE1Mjk4MjUgQzEwLjg3NDQ2MjMsOS4xNjQxNzMxMiAxMS4wMDMxNTk1LDguOTI5ODc4MSAxMS4yMTY1NjE0LDguNzk3NDczNjggQzExLjQyNDA1NzUsOC42Njk5NjExNyAxMS42ODU2MjY3LDguNjY5OTYxMTcgMTEuODkzMTIyOCw4Ljc5NzQ3MzY4IEwxOS4xMjIxMDUzLDEzLjE2NzkyOTggQzE5LjMzNDg0MDgsMTMuMjk5OTMwNiAxOS40NjM0NDE2LDEzLjUzMzIyNTcgMTkuNDYxNTE2MywxMy43ODM1Nzg5IEMxOS40NjQyMDQ0LDE0LjAzNDcwNDEgMTkuMzM1NTA3MSwxNC4yNjg5OTkxIDE5LjEyMjEwNTMsMTQuNDAxNDAzNSBMMTEuODkzMTIyOCwxOC43NjUzMzMzIEMxMS43OTA3OTE2LDE4LjgyNzczMDMgMTEuNjczNTk2NywxOC44NjE1MzY1IDExLjU1Mzc1NDQsMTguODYzMjY3MyBaIE0xMi4yMzI0OTEyLDEwLjY0MDA3MDIgTDEyLjIzMjQ5MTIsMTYuOTI3MDg3NyBMMTcuNDI5NjE0LDEzLjc4MzU3ODkgTDEyLjIzMDMxNTgsMTAuNjQyMjQ1NiBMMTIuMjMyNDkxMiwxMC42NDAwNzAyIFoiIGlkPSLlvaLnirYiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==\"},function(e,t){e.exports=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTc4MzAzNzcyODk2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjUwNDEiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTk1NS43MjMwODYgMTM1LjkwMjEwN0g2OTcuNTY4MTA2Vjg2LjI2MDcwMkE4Ni4zNTkwNzUgODYuMzU5MDc1IDAgMCAwIDYxMS4zMDc0MDMgMEg0MDcuMDIzODYxYTg2LjM1OTA3NSA4Ni4zNTkwNzUgMCAwIDAtODYuMjYwNzAzIDg2LjI2MDcwMnY0OS42NDE0MDVINjguMjc2OTE0QTI3LjI0OTI4MiAyNy4yNDkyODIgMCAwIDAgNDEuMDM5OTI4IDE2My4xNTEzOXY0LjUzNzQ0OGEyNy4yMzY5ODYgMjcuMjM2OTg2IDAgMCAwIDI3LjIzNjk4NiAyNy4yMzY5ODZoODEuNjc0MDY4VjkzNy43MzkyOThhODYuMzU5MDc1IDg2LjM1OTA3NSAwIDAgMCA4Ni4yNjA3MDIgODYuMjYwNzAyaDU1MS41NzY2MzJhODYuMzU5MDc1IDg2LjM1OTA3NSAwIDAgMCA4Ni4yNjA3MDItODYuMjYwNzAyVjE5NC45MjU4MjRoODEuNjc0MDY4QTI3LjIzNjk4NiAyNy4yMzY5ODYgMCAwIDAgOTgyLjk2MDA3MiAxNjcuNjg4ODM4di00LjUzNzQ0OGEyNy4yNDkyODIgMjcuMjQ5MjgyIDAgMCAwLTI3LjIzNjk4Ni0yNy4yNDkyODN6TTM3OS43ODY4NzUgODYuMjYwNzAyQTI3LjI2MTU3OSAyNy4yNjE1NzkgMCAwIDEgNDA3LjAyMzg2MSA1OS4wMjM3MTdoMjA0LjI4MzU0MmEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxIDI3LjIzNjk4NiAyNy4yMzY5ODV2NDkuNjQxNDA1SDM3OS43ODY4NzV6TTgxNS4wMjUzMDIgOTM3LjczOTI5OGEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxLTI3LjIzNjk4NiAyNy4yMzY5ODVIMjM2LjIxMTY4NGEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxLTI3LjIzNjk4Ni0yNy4yMzY5ODVWMTk0LjkyNTgyNGg2MDYuMDUwNjA0eiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0MiI+PC9wYXRoPjxwYXRoIGQ9Ik0yOTMuNTI2MTcyIDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0MyI+PC9wYXRoPjxwYXRoIGQ9Ik00NzkuNjQ3NjI1IDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0NCI+PC9wYXRoPjxwYXRoIGQ9Ik02NjUuNzgxMzc1IDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0NSI+PC9wYXRoPjwvc3ZnPg==\"},function(e,t,n){var M=n(5),i=n(6);\"string\"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,\"\"]]);var r={insert:\"head\",singleton:!1};M(i,r);e.exports=i.locals||{}},function(e,t,n){\"use strict\";var M,i=function(){return void 0===M&&(M=Boolean(window&&document&&document.all&&!window.atob)),M},r=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function u(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},M=[],i=0;i<e.length;i++){var r=e[i],c=t.base?r[0]+t.base:r[0],N=n[c]||0,a=\"\".concat(c,\" \").concat(N);n[c]=N+1;var s=u(a),D={css:r[1],media:r[2],sourceMap:r[3]};-1!==s?(o[s].references++,o[s].updater(D)):o.push({identifier:a,updater:z(D,t),references:1}),M.push(a)}return M}function N(e){var t=document.createElement(\"style\"),M=e.attributes||{};if(void 0===M.nonce){var i=n.nc;i&&(M.nonce=i)}if(Object.keys(M).forEach((function(e){t.setAttribute(e,M[e])})),\"function\"==typeof e.insert)e.insert(t);else{var o=r(e.insert||\"head\");if(!o)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");o.appendChild(t)}return t}var a,s=(a=[],function(e,t){return a[e]=t,a.filter(Boolean).join(\"\\n\")});function D(e,t,n,M){var i=n?\"\":M.media?\"@media \".concat(M.media,\" {\").concat(M.css,\"}\"):M.css;if(e.styleSheet)e.styleSheet.cssText=s(t,i);else{var r=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(r,o[t]):e.appendChild(r)}}function j(e,t,n){var M=n.css,i=n.media,r=n.sourceMap;if(i?e.setAttribute(\"media\",i):e.removeAttribute(\"media\"),r&&\"undefined\"!=typeof btoa&&(M+=\"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r)))),\" */\")),e.styleSheet)e.styleSheet.cssText=M;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(M))}}var y=null,l=0;function z(e,t){var n,M,i;if(t.singleton){var r=l++;n=y||(y=N(t)),M=D.bind(null,n,r,!1),i=D.bind(null,n,r,!0)}else n=N(t),M=j.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return M(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;M(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||\"boolean\"==typeof t.singleton||(t.singleton=i());var n=c(e=e||[],t);return function(e){if(e=e||[],\"[object Array]\"===Object.prototype.toString.call(e)){for(var M=0;M<n.length;M++){var i=u(n[M]);o[i].references--}for(var r=c(e,t),N=0;N<n.length;N++){var a=u(n[N]);0===o[a].references&&(o[a].updater(),o.splice(a,1))}n=r}}}},function(e,t,n){(t=n(7)(!1)).push([e.i,\".white-video-plugin-container {\\n  display: flex;\\n  flex-flow: column nowrap;\\n  transform-origin: top left;\\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.2);\\n}\\n.white-video-plugin-nav {\\n  height: 32px;\\n  flex-shrink: 0;\\n  display: flex;\\n  align-items: center;\\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.2);\\n  background-image: linear-gradient(180deg, #e0e1e0 0%, #cdcdcc 100%);\\n}\\n.white-video-plugin-nav > img {\\n  width: 20px;\\n  margin-left: 8px;\\n}\\n.white-video-plugin-nav-title {\\n  margin-left: 6px;\\n  font-size: 12px;\\n  font-weight: bold;\\n  flex-grow: 1;\\n}\\n.white-video-plugin-nav-delete {\\n  width: 22px;\\n  height: 22px;\\n  border: 0;\\n  background-color: #ff756e;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  border-radius: 50%;\\n  margin-right: 8px;\\n  cursor: pointer;\\n  opacity: 0.6;\\n  transition: opacity 0.2s ease;\\n}\\n.white-video-plugin-nav-delete > img {\\n  width: 14px;\\n}\\n.white-video-plugin-nav-delete:hover {\\n  opacity: 1;\\n}\\n.white-video-plugin-body {\\n  flex-grow: 1;\\n  background-color: #f2f4f5;\\n  display: flex;\\n  flex-flow: column nowrap;\\n  align-items: stretch;\\n  justify-content: center;\\n  height: calc(100% - 32px);\\n}\\n.white-video-plugin-body > audio {\\n  flex-grow: 1;\\n  outline: none;\\n}\\n\",\"\"]),e.exports=t},function(e,t,n){\"use strict\";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||\"\",M=e[3];if(!M)return n;if(t&&\"function\"==typeof btoa){var i=(o=M,u=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),c=\"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(u),\"/*# \".concat(c,\" */\")),r=M.sources.map((function(e){return\"/*# sourceURL=\".concat(M.sourceRoot||\"\").concat(e,\" */\")}));return[n].concat(r).concat([i]).join(\"\\n\")}var o,u,c;return[n].join(\"\\n\")}(t,e);return t[2]?\"@media \".concat(t[2],\" {\").concat(n,\"}\"):n})).join(\"\")},t.i=function(e,n,M){\"string\"==typeof e&&(e=[[null,e,\"\"]]);var i={};if(M)for(var r=0;r<this.length;r++){var o=this[r][0];null!=o&&(i[o]=!0)}for(var u=0;u<e.length;u++){var c=[].concat(e[u]);M&&i[c[0]]||(n&&(c[2]?c[2]=\"\".concat(n,\" and \").concat(c[2]):c[2]=n),t.push(c))}},t}},function(e,t,n){\"use strict\";n.r(t);var M=n(0),i=n.n(M),r=n(1),o=n(2),u=n.n(o),c=n(3),N=n.n(c),a=(n(4),function(e,t,n,M){return new(n||(n=Promise))((function(i,r){function o(e){try{c(M.next(e))}catch(e){r(e)}}function u(e){try{c(M.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}c((M=M.apply(e,t||[])).next())}))}),s=function(e,t){var n,M,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:u(0),throw:u(1),return:u(2)},\"function\"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function u(r){return function(u){return function(r){if(n)throw new TypeError(\"Generator is already executing.\");for(;o;)try{if(n=1,M&&(i=2&r[0]?M.return:r[0]?M.throw||((i=M.return)&&i.call(M),0):M.next)&&!(i=i.call(M,r[1])).done)return i;switch(M=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,M=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],M=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,u])}}};function D(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,4]),[4,e.play()];case 1:return t.sent(),[2,!0];case 2:return t.sent(),e.muted=!0,[4,e.play()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}var j=function(e){return new Promise((function(t){return window.setTimeout(t,e)}))},y=function(){function e(){this.map=new Map}return e.prototype.changed=function(e,t){return(!this.map.has(e)||!function e(t,n){return t===n||!!Array.isArray(t)&&t.every((function(t,M){return e(t,n[M])}))}(this.map.get(e),t))&&(this.map.set(e,t),!0)},e.prototype.clear=function(){this.map.clear()},e}();var l,z=(l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Class extends value \"+String(t)+\" is not a constructor or null\");function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),g=function(){return(g=Object.assign||function(e){for(var t,n=1,M=arguments.length;n<M;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},T=function(e,t,n,M){return new(n||(n=Promise))((function(i,r){function o(e){try{c(M.next(e))}catch(e){r(e)}}function u(e){try{c(M.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}c((M=M.apply(e,t||[])).next())}))},I=function(e,t){var n,M,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:u(0),throw:u(1),return:u(2)},\"function\"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function u(r){return function(u){return function(r){if(n)throw new TypeError(\"Generator is already executing.\");for(;o;)try{if(n=1,M&&(i=2&r[0]?M.return:r[0]?M.throw||((i=M.return)&&i.call(M),0):M.next)&&!(i=i.call(M,r[1])).done)return i;switch(M=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,M=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],M=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,u])}}},p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return z(t,e),t.prototype.render=function(){var e=this;return i.a.createElement(r.CNode,{context:this.props.cnode},i.a.createElement(r.RoomConsumer,{children:function(t){return t&&i.a.createElement(w,g({},e.props,{room:t}))}}),i.a.createElement(r.PlayerConsumer,{children:function(t){return t&&i.a.createElement(w,g({},e.props,{player:t}))}}))},t}(M.Component),w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.disposers=[],t.changedMap=new y,t.player=Object(M.createRef)(),t.timestamp=function(){return{currentTime:t.player.current.currentTime,hostTime:Date.now()}},t.removeSelf=function(){return T(t,void 0,void 0,(function(){var e;return I(this,(function(t){switch(t.label){case 0:return(e=this.props.plugin).putAttributes(g({paused:!0},this.timestamp())),[4,j(300)];case 1:return t.sent(),e.remove(),[2]}}))}))},t}return z(t,e),t.prototype.isHost=function(){return this.props.room&&this.props.plugin.context&&\"host\"===this.props.plugin.context.identity},t.prototype.componentDidMount=function(){this.props.room&&(this.isHost()?this.setupHost():this.setupNonHost()),this.props.player&&this.setupNonHost()},t.prototype.setupHost=function(){var e=this,t=this.props.plugin,n=this.player.current;n.currentTime=t.attributes.currentTime,n.addEventListener(\"play\",(function(){t.putAttributes(g({paused:!1},e.timestamp()))})),n.addEventListener(\"pause\",(function(){t.putAttributes(g({paused:!0},e.timestamp()))})),n.addEventListener(\"seeked\",(function(){t.putAttributes(e.timestamp())})),n.addEventListener(\"volumechange\",(function(){t.putAttributes({volume:n.volume,muted:n.muted})}));var M,i=NaN;n.addEventListener(\"timeupdate\",(function(){i||(i=window.setTimeout((function(){i=NaN,t.putAttributes(e.timestamp())}),2e3))})),this.disposers.push((function(){return window.clearTimeout(i)})),n.addEventListener(\"ended\",(function(){return T(e,void 0,void 0,(function(){return I(this,(function(e){switch(e.label){case 0:return t.putAttributes(g({paused:!0},this.timestamp())),[4,j(500)];case 1:return e.sent(),n.load(),[2]}}))}))})),/iPad|iPhone|iPod/.test(navigator.platform)&&(M=function(){n.currentTime=t.attributes.currentTime},window.requestAnimationFrame((function(){window.requestAnimationFrame(M)})))},t.prototype.setupNonHost=function(){var e=this,t=this.props.plugin,n=this.player.current,M=Object(r.autorun)((function(){return T(e,void 0,void 0,(function(){var e,M,i,r,o,u,c,N,a,s,j;return I(this,(function(y){switch(y.label){case 0:return e=t.isPlaying,M=t.playerTimestamp,i=t.playbackSpeed,r=t.attributes,o=r.paused,u=r.volume,c=r.muted,N=r.currentTime,a=r.hostTime,this.changedMap.changed(\"paused\",[o,e])?!o&&e?[3,1]:(n.pause(),[3,3]):[3,3];case 1:return[4,D(n)];case 2:y.sent(),y.label=3;case 3:return this.changedMap.changed(\"volume\",[u,c])&&(n.volume=t.attributes.volume,n.muted=t.attributes.muted),this.changedMap.changed(\"time\",[N,a])&&a>0&&(s=Date.now(),this.props.player&&(s=this.props.player.beginTimestamp+M),j=N+(s-a)/1e3,Math.abs(n.currentTime-j)>2&&(n.currentTime=j)),this.changedMap.changed(\"rate\",i)&&(n.playbackRate=i),[2]}}))}))}));this.disposers.push(M),this.disposers.push((function(){return e.changedMap.clear()}))},t.prototype.componentWillUnmount=function(){var e;null===(e=this.player.current)||void 0===e||e.pause(),this.disposers.forEach((function(e){return e()}))},Object.defineProperty(t.prototype,\"containerStyle\",{get:function(){var e=this.props,t=e.size,n=e.scale||1;return{width:t.width/n,height:t.height/n,transform:\"scale(\"+n+\")\"}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"pointerEventsStyle\",{get:function(){return{pointerEvents:this.isHost()?\"auto\":\"none\"}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e=this.props,t=e.room,n=e.player,M=e.plugin;return t||n?i.a.createElement(\"div\",{className:\"white-video-plugin-container\",style:this.containerStyle},!M.attributes.isNavigationDisable&&i.a.createElement(\"div\",{className:\"white-video-plugin-nav\"},i.a.createElement(\"img\",{src:u.a,alt:\"video_plugin\"}),i.a.createElement(\"span\",{className:\"white-video-plugin-nav-title\"},\"Video Player\"),i.a.createElement(\"span\",{className:\"white-video-plugin-nav-delete\",style:this.pointerEventsStyle,onClick:this.removeSelf},i.a.createElement(\"img\",{src:N.a,alt:\"delete_icon\"}))),i.a.createElement(\"div\",{className:\"white-video-plugin-body\"},i.a.createElement(\"video\",{src:M.attributes.src,style:g({maxWidth:\"100%\",maxHeight:\"100%\"},this.pointerEventsStyle),controls:!!t,controlsList:\"nodownload nofullscreen\",preload:\"metadata\",ref:this.player,playsInline:!0,\"webkit-playsinline\":\"true\",poster:M.attributes.poster,disablePictureInPicture:!0}))):null},t}(M.Component);n.d(t,\"videoPlugin2\",(function(){return d}));var d=Object.freeze({kind:\"video2\",render:p,defaultAttributes:{src:\"\",hostTime:0,currentTime:0,paused:!0,muted:!1,volume:1},hitTest:function(e){var t=e.component.context.getMemberState();return!(\"eraser\"===(null==t?void 0:t.currentApplianceName))}})}])}));\n\n//# sourceURL=webpack://whiteboard-bridge/./node_modules/@netless/white-video-plugin2/dist/index.js?");

/***/ }),

/***/ 11358:
/*!*********************************************************************!*\
  !*** ./node_modules/@netless/whiteboard-bridge-types/dist/index.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.playerStateNameSpace = exports.playerNameSpace = exports.sdkNameSpace = exports.roomStateNamespace = exports.roomNamespace = exports.roomSyncNamespace = exports.pptNamespace = exports.ScaleMode = void 0;\n// Android 使用 enum 名称，请勿随意改动\nvar ScaleMode;\n(function (ScaleMode) {\n    ScaleMode[ScaleMode[\"Scale\"] = 0] = \"Scale\";\n    ScaleMode[ScaleMode[\"AspectFit\"] = 1] = \"AspectFit\";\n    ScaleMode[ScaleMode[\"AspectFitScale\"] = 2] = \"AspectFitScale\";\n    ScaleMode[ScaleMode[\"AspectFitSpace\"] = 3] = \"AspectFitSpace\";\n    ScaleMode[ScaleMode[\"AspectFill\"] = 4] = \"AspectFill\";\n    ScaleMode[ScaleMode[\"AspectFillScale\"] = 5] = \"AspectFillScale\";\n})(ScaleMode = exports.ScaleMode || (exports.ScaleMode = {}));\nexports.pptNamespace = \"ppt\";\nexports.roomSyncNamespace = \"room.sync\";\nexports.roomNamespace = \"room\";\nexports.roomStateNamespace = \"room.state\";\nexports.sdkNameSpace = 'sdk';\nexports.playerNameSpace = \"player\";\nexports.playerStateNameSpace = \"player.state\";\n\n\n//# sourceURL=webpack://whiteboard-bridge/./node_modules/@netless/whiteboard-bridge-types/dist/index.js?");

/***/ }),

/***/ 70732:
/*!****************************************************************!*\
  !*** ./node_modules/@netless/window-manager/dist/index.cjs.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("var rg=Object.defineProperty,sg=Object.defineProperties;var og=Object.getOwnPropertyDescriptors;var pu=Object.getOwnPropertySymbols;var ag=Object.prototype.hasOwnProperty,lg=Object.prototype.propertyIsEnumerable;var fu=(e,t,i)=>t in e?rg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,q=(e,t)=>{for(var i in t||(t={}))ag.call(t,i)&&fu(e,i,t[i]);if(pu)for(var i of pu(t))lg.call(t,i)&&fu(e,i,t[i]);return e},Ge=(e,t)=>sg(e,og(t));Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:\"Module\"}});var ug=__webpack_require__(/*! p-retry */ 42693),cg=__webpack_require__(/*! emittery */ 148),E=__webpack_require__(/*! lodash */ 96486),A=__webpack_require__(/*! white-web-sdk */ 63314),dg=__webpack_require__(/*! uuid */ 17593),Fn=__webpack_require__(/*! side-effect-manager */ 31659),hg=__webpack_require__(/*! @juggle/resize-observer */ 79667),pg=__webpack_require__(/*! video.js */ 87017);function Ha(e){return e&&typeof e==\"object\"&&\"default\"in e?e:{default:e}}var fg=Ha(ug),Qn=Ha(cg),gu=Ha(pg),J=(e=>(e.AppMove=\"AppMove\",e.AppFocus=\"AppFocus\",e.AppResize=\"AppResize\",e.AppBoxStateChange=\"AppBoxStateChange\",e.GetAttributes=\"GetAttributes\",e.UpdateWindowManagerWrapper=\"UpdateWindowManagerWrapper\",e.InitReplay=\"InitReplay\",e.WindowCreated=\"WindowCreated\",e.SetMainViewScenePath=\"SetMainViewScenePath\",e.SetMainViewSceneIndex=\"SetMainViewSceneIndex\",e.SetAppFocusIndex=\"SetAppFocusIndex\",e.SwitchViewsToFreedom=\"SwitchViewsToFreedom\",e.MoveCamera=\"MoveCamera\",e.MoveCameraToContain=\"MoveCameraToContain\",e.CursorMove=\"CursorMove\",e.RootDirRemoved=\"RootDirRemoved\",e.Refresh=\"Refresh\",e.InitMainViewCamera=\"InitMainViewCamera\",e))(J||{});const Do=\"__WindowManger\",eo=\"__WindowMangerEnsureReconnected__\";var Ee=(e=>(e.Size=\"size\",e.Position=\"position\",e.SceneIndex=\"SceneIndex\",e.ZIndex=\"zIndex\",e))(Ee||{}),Md=(e=>(e.setBoxSize=\"setBoxSize\",e.setBoxMinSize=\"setBoxMinSize\",e.destroy=\"destroy\",e))(Md||{}),Lo=(e=>(e.StartCreate=\"StartCreate\",e))(Lo||{}),Id=(e=>(e.Leave=\"leave\",e.Normal=\"normal\",e))(Id||{});const mu=\"2.16.1\",gg=340/720,mg=340/720,vg=9/16,De=\"/\",bd=\"/init\",Ed=50,se=new Qn.default;class wg{constructor(){this.list=[],this.isEmit=!1,this.invoked=()=>{this.currentInvoker=void 0,this.list.length===0&&(this.clear(),this.emitReady())},this.clear=()=>{clearInterval(this.timer),this.timer=void 0}}initInterval(){return setInterval(()=>{this.invoke()},50)}push(t){this.list.push(t),this.invoke(),this.timer===void 0&&this.list.length>0&&(this.timer=this.initInterval())}invoke(){if(this.list.length===0||this.currentInvoker!==void 0)return;const t=this.list.shift();t&&(this.currentInvoker=t,t().then(()=>{this.invoked()}).catch(i=>{console.error(`[WindowManager]: create app error: ${i.message}`),this.invoked()}))}emitReady(){this.isEmit||setTimeout(()=>{se.emit(\"ready\")},Ed),this.isEmit=!0}empty(){this.list=[],this.clear()}destroy(){this.timer&&this.clear()}}const R=new Qn.default,yg=\"__WindowManagerAppCache\";let Pn,vu;const xg=async()=>{Pn=await Mg()},Sg=(e,t)=>{if(!!Pn)return bg(Pn,{kind:e,sourceCode:t})},Cg=async e=>Pn?await Ig(Pn,e):null;function Mg(){return new Promise((e,t)=>{const i=indexedDB.open(yg,2);i.onerror=n=>{t(n)},i.onupgradeneeded=n=>{const r=n.target.result;r.objectStoreNames.contains(\"apps\")||(vu=r.createObjectStore(\"apps\",{keyPath:\"kind\"}),vu.createIndex(\"kind\",\"kind\",{unique:!0}))},i.onsuccess=()=>{const n=i.result;e(n)}})}function Ig(e,t){return new Promise((i,n)=>{const s=e.transaction([\"apps\"]).objectStore(\"apps\").index(\"kind\").get(t);s.onerror=o=>n(o),s.onsuccess=()=>{s.result?i(s.result):i(null)}})}function bg(e,t){return new Promise((i,n)=>{const r=e.transaction([\"apps\"],\"readwrite\").objectStore(\"apps\").add(t);r.onsuccess=()=>i(),r.onerror=()=>n()})}const Eg=\"NetlessApp\",Ag=1e4,Tg=async e=>{const t=await Cg(e);if(t)return t.sourceCode;{const n=await(await Ng(e,{timeout:Ag})).text();return await Sg(e,n),n}},wu=(e,t)=>{let i=Function(e+`\n;return ${t}`)();return typeof i==\"undefined\"&&(i=window[t]),i},kg=async(e,t,i)=>{const n=i||Eg+t;se.emit(\"loadApp\",{kind:t,status:\"start\"});try{const r=await Tg(e);if(!r||r.length===0){se.emit(\"loadApp\",{kind:t,status:\"failed\",reason:\"script is empty.\"});return}try{const s=wu(r,n);return se.emit(\"loadApp\",{kind:t,status:\"success\"}),s}catch(s){if(s.message.includes(\"Can only have one anonymous define call per script file\")){const o=window.define;typeof o==\"function\"&&o.amd&&delete o.amd;const a=wu(r,n);return se.emit(\"loadApp\",{kind:t,status:\"success\"}),a}se.emit(\"loadApp\",{kind:t,status:\"failed\",reason:s.message})}}catch(r){se.emit(\"loadApp\",{kind:t,status:\"failed\",reason:r.message})}};async function Ng(e,t){const{timeout:i=1e4}=t,n=new AbortController,r=setTimeout(()=>n.abort(),i),s=await fetch(e,Ge(q({},t),{signal:n.signal,headers:{\"content-type\":\"text/plain\"}}));return clearTimeout(r),s}class Pg{constructor(){this.kindEmitters=new Map,this.registered=new Map,this.appClassesCache=new Map,this.appClasses=new Map,this.syncRegisterApp=null,this.onSyncRegisterAppChange=t=>{this.register({kind:t.kind,src:t.src})}}setSyncRegisterApp(t){this.syncRegisterApp=t}async register(t){this.appClassesCache.delete(t.kind),this.registered.set(t.kind,t);const i=t.src;let n;if(typeof i==\"string\"?(n=async()=>{let r=await kg(i,t.kind,t.name);if(r)return r.__esModule&&(r=r.default),r;throw new Error(`[WindowManager]: load remote script failed, ${i}`)},this.syncRegisterApp&&this.syncRegisterApp({kind:t.kind,src:i,name:t.name})):typeof i==\"function\"?n=i:n=async()=>i,this.appClasses.set(t.kind,async()=>{let r=this.appClassesCache.get(t.kind);return r||(r=n(),this.appClassesCache.set(t.kind,r)),r}),t.addHooks){const r=this.createKindEmitter(t.kind);r&&t.addHooks(r)}}unregister(t){this.appClasses.delete(t),this.appClassesCache.delete(t),this.registered.delete(t);const i=this.kindEmitters.get(t);i&&(i.clearListeners(),this.kindEmitters.delete(t))}async notifyApp(t,i,n){const r=this.kindEmitters.get(t);await(r==null?void 0:r.emit(i,n))}createKindEmitter(t){if(!this.kindEmitters.has(t)){const i=new Qn.default;this.kindEmitters.set(t,i)}return this.kindEmitters.get(t)}}const je=new Pg,zg=async e=>{var i,n;const t=await((i=je.appClasses.get(e))==null?void 0:i());return t&&((n=t.config)==null?void 0:n.singleton)?e:`${e}-${dg.v4().replace(\"-\",\"\").slice(0,8)}`},gi=(e,t)=>{if(e.focusScenePath!==t)return e.focusScenePath=t,e},jo=(e,t)=>{if(e&&e.isWritable&&e.state.sceneState.scenePath!==t){const i=t===\"/\"?\"\":t;e.setScenePath(i)}},Dg=(e,t,i)=>{var n;if(e&&t){const s=(n=Oi(e)[t])==null?void 0:n[i];if(s)return`${t}/${s.name}`}},Bo=(e,t,i)=>{e&&e.scenePathType(t)!==A.ScenePathType.None&&e.removeScenes(t,i)},Lg=(e,t)=>{R.once(e).then(t)};E.debounce((e,t)=>{e.emit(\"mainViewModeChange\",t)},200);const jg=(e,t,i=0)=>{const n=Oi(e)[t];if(!n)return;const r=n[i];if(!r)return;const s=r.name;return t===De?`/${s}`:`${t}/${s}`},Oi=e=>e.entireScenes(),wn=(e,t,i,n)=>e==null?void 0:e.putScenes(t,i,n),Bg=e=>e.startsWith(\"/\"),to=e=>{const t=e.split(\"/\");t.pop();let i=t.join(\"/\");return i===\"\"&&(i=\"/\"),i},Rg=e=>e.endsWith(\"/\")?e.slice(0,-1):e,yu=e=>{const t=e.split(\".\").map(i=>i.padStart(2,\"0\")).join(\"\");return parseInt(t)},Gr=e=>new Promise(t=>setTimeout(t,e)),_g=e=>e.split(\"\").reduce((i,n)=>(n===De&&(i+=1),i),0)===1;class Og{constructor(t){this.manager=t,this.displayer=this.manager.displayer,this.mainMagixEventListener=i=>{if(i.authorId!==this.displayer.observerId){const n=i.payload;switch(n.eventName){case J.AppMove:{this.appMoveHandler(n.payload);break}case J.AppResize:{this.appResizeHandler(n.payload);break}case J.AppBoxStateChange:{this.boxStateChangeHandler(n.payload);break}case J.SetMainViewScenePath:{this.setMainViewScenePathHandler(n.payload);break}case J.MoveCamera:{this.moveCameraHandler(n.payload);break}case J.MoveCameraToContain:{this.moveCameraToContainHandler(n.payload);break}case J.CursorMove:{this.cursorMoveHandler(n.payload);break}case J.RootDirRemoved:{this.rootDirRemovedHandler();break}case J.Refresh:{this.refreshHandler();break}case J.InitMainViewCamera:{this.initMainViewCameraHandler();break}case J.SetAppFocusIndex:{this.setAppFocusViewIndexHandler(n.payload);break}}}},this.appMoveHandler=i=>{var n;(n=this.boxManager)==null||n.moveBox(i)},this.appResizeHandler=i=>{var n,r;(n=this.boxManager)==null||n.resizeBox(Object.assign(i,{skipUpdate:!0})),(r=this.manager.room)==null||r.refreshViewSize()},this.boxStateChangeHandler=i=>{se.emit(\"boxStateChange\",i)},this.setMainViewScenePathHandler=({nextScenePath:i})=>{gi(this.manager.mainView,i),se.emit(\"mainViewScenePathChange\",i)},this.moveCameraHandler=i=>{E.isEqual(E.omit(i,[\"animationMode\"]),q({},this.manager.mainView.camera))||this.manager.mainView.moveCamera(i)},this.moveCameraToContainHandler=i=>{this.manager.mainView.moveCameraToContain(i)},this.cursorMoveHandler=i=>{R.emit(\"cursorMove\",i)},this.rootDirRemovedHandler=()=>{this.manager.createRootDirScenesCallback(),this.manager.mainViewProxy.rebind(),R.emit(\"rootDirRemoved\")},this.refreshHandler=()=>{this.manager.windowManger._refresh()},this.initMainViewCameraHandler=()=>{this.manager.mainViewProxy.addCameraReaction()},this.setAppFocusViewIndexHandler=i=>{if(i.type===\"main\")this.manager.setSceneIndexWithoutSync(i.index);else if(i.type===\"app\"&&i.appID){const n=this.manager.appProxies.get(i.appID);n&&n.setSceneIndexWithoutSync(i.index)}}}get boxManager(){return this.manager.boxManager}addListeners(){this.displayer.addMagixEventListener(Do,this.mainMagixEventListener)}removeListeners(){this.displayer.removeMagixEventListener(Do,this.mainMagixEventListener)}}class Ad extends Error{constructor(){super(...arguments);this.message=\"[WindowManager]: app duplicate exists and cannot be created again\"}}class Vg extends Error{constructor(t){super(`[WindowManager]: app ${t} need register or provide src`)}}class Xe extends Error{constructor(){super(...arguments);this.message=\"[WindowManager]: AppManager must be initialized\"}}class Td extends Error{constructor(t){super(`[WindowManager]: white-web-sdk version must large than ${t}`)}}class kd extends Error{constructor(){super(...arguments);this.message=\"[WindowManager]: kind must be a valid string\"}}class Nd extends Error{constructor(){super(...arguments);this.message=\"[WindowManager]: box need created\"}}class Pd extends Error{constructor(){super(...arguments);this.message='[WindowManager]: ScenePath should start with \"/\"'}}class zd extends Error{constructor(){super(...arguments);this.message=\"[WindowManager]: boxManager not found\"}}class Dd extends Error{constructor(){super(...arguments);this.message=\"[WindowManager]: room phase only Connected can be bindContainer\"}}const Ld=e=>(t,i)=>{if(t!==void 0)if(A.listenUpdated){const n=r=>{r.map(o=>o.kind).includes(e)&&i()};return A.listenUpdated(t,n),i(),()=>A.unlistenUpdated(t,n)}else return A.reaction(()=>t,()=>{i()},{fireImmediately:!0})},jd=(e,t,i)=>{let n=null;const r=A.reaction(e,()=>{n&&(n(),n=null);const s=e();E.isObject(s)?(n=()=>A.unlistenUpdated(s,t),A.listenUpdated(s,t)):i==null||i(s)},{fireImmediately:!0});return()=>{n==null||n(),r()}},Ug=Ld(A.UpdateEventKind.Removed);Ld(A.UpdateEventKind.Inserted);const io=Object.keys;function xu(e){return Boolean(E.has(e,\"__isRef\"))}function Wg(e){return{k:Fn.genUID(),v:e,__isRef:!0}}class $g{constructor(){this.listeners=new Set}get length(){return this.listeners.size}dispatch(t){this.listeners.forEach(i=>i(t))}addListener(t){this.listeners.add(t)}removeListener(t){this.listeners.delete(t)}}const Ye=\"_WM-STORAGE_\";class Su{constructor(t,i,n){if(this._sideEffect=new Fn.SideEffectManager,this._destroyed=!1,this._refMap=new WeakMap,this._lastValue=new Map,this.onStateChanged=new $g,n&&!E.isObject(n))throw new Error(`Default state for Storage ${i} is not an object.`);this._context=t,this.id=i||null,this._state={};const r=this._getRawState(this._state);this._context.getIsWritable()&&(this.id===null?t.isAddApp&&n&&this.setState(n):(r===this._state||!E.isObject(r))&&(E.get(this._context.getAttributes(),[Ye])||this._context.updateAttributes([Ye],{}),this._context.updateAttributes([Ye,this.id],this._state),n&&this.setState(n))),io(r).forEach(s=>{if(!(this.id===null&&s===Ye))try{const o=E.isObject(r[s])?JSON.parse(JSON.stringify(r[s])):r[s];xu(o)?(this._state[s]=o.v,E.isObject(o.v)&&this._refMap.set(o.v,o)):this._state[s]=o}catch(o){console.error(o)}}),this._sideEffect.addDisposer(jd(()=>this.id===null?t.getAttributes():E.get(t.getAttributes(),[Ye,this.id]),this._updateProperties.bind(this),this.destroy.bind(this)))}get state(){return this._destroyed&&console.warn(`Accessing state on destroyed Storage \"${this.id}\"`),this._state}addStateChangedListener(t){return this.onStateChanged.addListener(t),()=>this.onStateChanged.removeListener(t)}ensureState(t){return this.setState(io(t).reduce((i,n)=>(E.has(this._state,n)||(i[n]=t[n]),i),{}))}setState(t){if(this._destroyed){console.error(new Error(`Cannot call setState on destroyed Storage \"${this.id}\".`));return}if(!this._context.getIsWritable()){console.error(new Error(`Cannot setState on Storage \"${this.id}\" without writable access`),t);return}const i=io(t);i.length>0&&i.forEach(n=>{const r=t[n];if(r!==this._state[n])if(r===void 0)this._lastValue.set(n,this._state[n]),delete this._state[n],this._setRawState(n,r);else{this._lastValue.set(n,this._state[n]),this._state[n]=r;let s=r;if(E.isObject(r)){let o=this._refMap.get(r);o||(o=Wg(r),this._refMap.set(r,o)),s=o}this._setRawState(n,s)}})}emptyStorage(){if(!(E.size(this._state)<=0)){if(this._destroyed){console.error(new Error(`Cannot empty destroyed Storage \"${this.id}\".`));return}if(!this._context.getIsWritable()){console.error(new Error(`Cannot empty Storage \"${this.id}\" without writable access.`));return}this.setState(E.mapValues(this._state,E.noop))}}deleteStorage(){if(this.id===null)throw new Error(\"Cannot delete main Storage\");if(!this._context.getIsWritable()){console.error(new Error(`Cannot delete Storage \"${this.id}\" without writable access.`));return}this.destroy(),this._context.updateAttributes([Ye,this.id],void 0)}get destroyed(){return this._destroyed}destroy(){this._destroyed=!0,this._sideEffect.flushAll()}_getRawState(t){var i;return this.id===null?(i=this._context.getAttributes())!=null?i:t:E.get(this._context.getAttributes(),[Ye,this.id],t)}_setRawState(t,i){if(this.id===null){if(t===Ye)throw new Error(`Cannot set attribute internal filed \"${Ye}\"`);return this._context.updateAttributes([t],i)}else return this._context.updateAttributes([Ye,this.id,t],i)}_updateProperties(t){var i;if(this._destroyed){console.error(new Error(`Cannot call _updateProperties on destroyed Storage \"${this.id}\".`));return}if(t.length>0){const n={};for(let r=0;r<t.length;r++)try{const s=t[r],o=s.key;if(this.id===null&&o===Ye)continue;const a=E.isObject(s.value)?JSON.parse(JSON.stringify(s.value)):s.value;let l;switch(this._lastValue.has(o)&&(l=this._lastValue.get(o),this._lastValue.delete(o)),s.kind){case 2:{E.has(this._state,o)&&(l=this._state[o],delete this._state[o]),n[o]={oldValue:l};break}default:{let u=a;if(xu(a)){const{k:d,v:p}=a,m=this._state[o];E.isObject(m)&&((i=this._refMap.get(m))==null?void 0:i.k)===d?u=m:(u=p,E.isObject(p)&&this._refMap.set(p,a))}u!==this._state[o]&&(l=this._state[o],this._state[o]=u),n[o]={newValue:u,oldValue:l};break}}}catch(s){console.error(s)}this.onStateChanged.dispatch(n)}}}class Hg{constructor(t,i,n,r,s){this.manager=t,this.boxManager=i,this.appId=n,this.appProxy=r,this.appOptions=s,this.mobxUtils={autorun:A.autorun,reaction:A.reaction,toJS:A.toJS},this.objectUtils={listenUpdated:A.listenUpdated,unlistenUpdated:A.unlistenUpdated,listenDisposed:A.listenDisposed,unlistenDisposed:A.unlistenDisposed},this.store=this.manager.store,this.isReplay=this.manager.isReplay,this.getDisplayer=()=>this.manager.displayer,this.getAttributes=()=>this.appProxy.attributes,this.getScenes=()=>{const o=this.store.getAppAttributes(this.appId);return o!=null&&o.isDynamicPPT?this.appProxy.scenes:o==null?void 0:o.options.scenes},this.getView=()=>this.appProxy.view,this.mountView=o=>{const a=this.getView();a&&(a.divElement=o,setTimeout(()=>{var l;(l=this.getRoom())==null||l.refreshViewSize()},1e3))},this.getInitScenePath=()=>this.manager.getAppInitPath(this.appId),this.getIsWritable=()=>this.manager.canOperate,this.getBox=()=>{const o=this.boxManager.getBox(this.appId);if(o)return o;throw new Nd},this.getRoom=()=>this.manager.room,this.setAttributes=o=>{this.manager.safeSetAttributes({[this.appId]:o})},this.updateAttributes=(o,a)=>{this.manager.attributes[this.appId]&&this.manager.safeUpdateAttributes([this.appId,...o],a)},this.setScenePath=async o=>{var a;!this.appProxy.box||(this.appProxy.setFullPath(o),(a=this.getRoom())==null||a.setScenePath(o))},this.getAppOptions=()=>typeof this.appOptions==\"function\"?this.appOptions():this.appOptions,this.createStorage=(o,a)=>{const l=new Su(this,o,a);return this.emitter.on(\"destroy\",()=>{l.destroy()}),l},this.dispatchMagixEvent=(...o)=>{var l;const a=`${this.appId}:${o[0]}`;return(l=this.manager.room)==null?void 0:l.dispatchMagixEvent(a,o[1])},this.addMagixEventListener=(o,a,l)=>{const u=`${this.appId}:${o}`;return this.manager.displayer.addMagixEventListener(u,a,l),()=>this.manager.displayer.removeMagixEventListener(u,a)},this.removeMagixEventListener=this.manager.displayer.removeMagixEventListener.bind(this.manager.displayer),this.nextPage=async()=>{const o=this.pageState.index+1;return o>this.pageState.length-1?(console.warn(\"[WindowManager] nextPage: index out of range\"),!1):(this.appProxy.setSceneIndex(o),!0)},this.prevPage=async()=>{const o=this.pageState.index-1;return o<0?(console.warn(\"[WindowManager] prevPage: index out of range\"),!1):(this.appProxy.setSceneIndex(o),!0)},this.addPage=async o=>{const a=o==null?void 0:o.after,l=o==null?void 0:o.scene,u=this.appProxy.scenePath;if(!!u)if(a){const d=this.pageState.index+1;wn(this.manager.room,u,[l||{}],d)}else wn(this.manager.room,u,[l||{}])},this.removePage=async o=>{const a=o===void 0?this.pageState.index:o;return this.pageState.length===1?(console.warn(\"[WindowManager]: can not remove the last page\"),!1):a<0||a>=this.pageState.length?(console.warn(`[WindowManager]: page index ${o} out of range`),!1):this.appProxy.removeSceneByIndex(a)},this.emitter=r.appEmitter,this.isAddApp=r.isAddApp}get storage(){return this._storage||(this._storage=new Su(this)),this._storage}get pageState(){return this.appProxy.pageState}}class Fg{constructor(t){this.params=t,this.sceneNode=null,this.onSceneChange=r=>{this.sceneNode=r,this.params.notifyPageStateChange()};const{displayer:i,scenePath:n}=this.params;n&&(this.sceneNode=i.createScenesCallback(n,{onAddScene:this.onSceneChange,onRemoveScene:this.onSceneChange}))}getFullPath(t){var n;const i=(n=this.sceneNode)==null?void 0:n.scenes;if(this.params.scenePath&&i){const r=i[t];if(r)return`${this.params.scenePath}/${r}`}}toObject(){var t,i;return{index:((t=this.params.view)==null?void 0:t.focusSceneIndex)||0,length:((i=this.sceneNode)==null?void 0:i.scenes.length)||0}}destroy(){var t;(t=this.sceneNode)==null||t.dispose()}}var be=(e=>(e.Apps=\"apps\",e.Focus=\"focus\",e.State=\"state\",e.BoxState=\"boxState\",e.MainViewCamera=\"mainViewCamera\",e.MainViewSize=\"mainViewSize\",e.Broadcaster=\"broadcaster\",e.Cursors=\"cursors\",e.Position=\"position\",e.CursorState=\"cursorState\",e.FullPath=\"fullPath\",e.Registered=\"registered\",e))(be||{});class Qg{constructor(t){this.context=t,this.setAppFocus=(i,n)=>{n?this.context.safeSetAttributes({focus:i}):this.context.safeSetAttributes({focus:void 0})}}setContext(t){this.context=t}get attributes(){return this.context.getAttributes()}apps(){return E.get(this.attributes,[\"apps\"])}get focus(){return E.get(this.attributes,[\"focus\"])}getAppAttributes(t){return E.get(this.apps(),[t])}getAppState(t){return E.get(this.apps(),[t,\"state\"])}getMaximized(){return E.get(this.attributes,[\"maximized\"])}getMinimized(){return E.get(this.attributes,[\"minimized\"])}setupAppAttributes(t,i,n){this.attributes.apps||this.context.safeSetAttributes({apps:{}});const s=[\"scenePath\",\"title\"];n||s.push(\"scenes\");const o=E.pick(t.options,s),a={kind:t.kind,options:o,isDynamicPPT:n};typeof t.src==\"string\"&&(a.src=t.src),a.createdAt=Date.now(),this.context.safeUpdateAttributes([\"apps\",i],a),this.context.safeUpdateAttributes([\"apps\",i,\"state\"],{[Ee.Size]:{},[Ee.Position]:{},[Ee.SceneIndex]:0})}updateAppState(t,i,n){E.get(this.attributes,[\"apps\",t,\"state\"])&&this.context.safeUpdateAttributes([\"apps\",t,\"state\",i],n)}cleanAppAttributes(t){this.context.safeUpdateAttributes([\"apps\",t],void 0),this.context.safeSetAttributes({[t]:void 0}),this.attributes.focus===t&&this.cleanFocus()}cleanFocus(){this.context.safeSetAttributes({focus:void 0})}getAppSceneIndex(t){var i;return(i=this.getAppState(t))==null?void 0:i[Ee.SceneIndex]}getAppScenePath(t){var i,n;return(n=(i=this.getAppAttributes(t))==null?void 0:i.options)==null?void 0:n.scenePath}getMainViewScenePath(){return this.attributes._mainScenePath}getMainViewSceneIndex(){return this.attributes._mainSceneIndex}getBoxState(){return this.attributes.boxState}setMainViewScenePath(t){this.context.safeSetAttributes({_mainScenePath:t})}setMainViewSceneIndex(t){this.context.safeSetAttributes({_mainSceneIndex:t})}getMainViewCamera(){return E.get(this.attributes,[\"mainViewCamera\"])}getMainViewSize(){return E.get(this.attributes,[\"mainViewSize\"])}setMainViewCamera(t){this.context.safeSetAttributes({mainViewCamera:q({},t)})}setMainViewSize(t){this.context.safeSetAttributes({mainViewSize:q({},t)})}setMainViewCameraAndSize(t,i){this.context.safeSetAttributes({mainViewCamera:q({},t),mainViewSize:q({},i)})}updateCursor(t,i){E.get(this.attributes,[\"cursors\"])||this.context.safeUpdateAttributes([\"cursors\"],{}),E.get(this.attributes,[\"cursors\",t])||this.context.safeUpdateAttributes([\"cursors\",t],{}),this.context.safeUpdateAttributes([\"cursors\",t,\"position\"],i)}updateCursorState(t,i){E.get(this.attributes,[\"cursors\",t])||this.context.safeUpdateAttributes([\"cursors\",t],{}),this.context.safeUpdateAttributes([\"cursors\",t,\"cursorState\"],i)}getCursorState(t){return E.get(this.attributes,[\"cursors\",t,\"cursorState\"])}cleanCursor(t){this.context.safeUpdateAttributes([\"cursors\",t],void 0)}setMainViewFocusPath(t){const i=this.getMainViewScenePath();i&&gi(t,i)}}const Zg=new Qg({getAttributes:()=>{throw new Error(\"getAttributes not implemented\")},safeSetAttributes:()=>{throw new Error(\"safeSetAttributes not implemented\")},safeUpdateAttributes:()=>{throw new Error(\"safeUpdateAttributes not implemented\")}}),ai=(...e)=>{ie.debug&&console.log(\"[WindowManager]:\",...e)},Fa=(e,t)=>{let i=0;const n=t.length-1;return e===t.index?e===n?i=e-1:i=t.index+1:i=t.index,i},wt=new Qn.default;class Qa{constructor(t,i,n,r){var s;this.params=t,this.manager=i,this.boxManager=this.manager.boxManager,this.appProxies=this.manager.appProxies,this.viewManager=this.manager.viewManager,this.store=this.manager.store,this.status=\"normal\",this.getAppInitState=o=>{var h,c;const a=this.store.getAppState(o);if(!a)return;const l=a==null?void 0:a[Ee.Position],u=this.store.focus,d=a==null?void 0:a[Ee.Size],p=a==null?void 0:a[Ee.SceneIndex],m=(h=this.attributes)==null?void 0:h.maximized,v=(c=this.attributes)==null?void 0:c.minimized,S=a==null?void 0:a.zIndex;let y={maximized:m,minimized:v,zIndex:S};return l&&(y=Ge(q({},y),{id:o,x:l.x,y:l.y})),u===o&&(y=Ge(q({},y),{focus:!0})),d&&(y=Ge(q({},y),{width:d.width,height:d.height})),p&&(y=Ge(q({},y),{sceneIndex:p})),y},this.appAttributesUpdateListener=o=>{var a,l,u;(a=this.manager.refresher)==null||a.add(o,()=>A.autorun(()=>{const d=this.manager.attributes[o];d&&this.appEmitter.emit(\"attributesUpdate\",d)})),(l=this.manager.refresher)==null||l.add(this.stateKey,()=>A.autorun(()=>{var p,m,v;const d=(p=this.appAttributes)==null?void 0:p.state;(d==null?void 0:d.zIndex)>0&&d.zIndex!==((m=this.box)==null?void 0:m.zIndex)&&((v=this.boxManager)==null||v.setZIndex(o,d.zIndex))})),(u=this.manager.refresher)==null||u.add(`${o}-fullPath`,()=>A.autorun(()=>{var p;const d=(p=this.appAttributes)==null?void 0:p.fullPath;this.setFocusScenePathHandler(d),this._prevFullPath!==d&&(this.notifyPageStateChange(),this._prevFullPath=d)}))},this.setFocusScenePathHandler=E.debounce(o=>{var a;this.view&&o&&o!==((a=this.view)==null?void 0:a.focusScenePath)&&gi(this.view,o)},50),this.notifyPageStateChange=E.debounce(()=>{this.appEmitter.emit(\"pageStateChange\",this.pageState)},50),this.kind=t.kind,this.id=n,this.stateKey=`${this.id}_state`,this.appProxies.set(this.id,this),this.appEmitter=new Qn.default,this.appListener=this.makeAppEventListener(this.id),this.isAddApp=r,this.initScenes(),(s=this.params.options)!=null&&s.scenePath&&this.createView(),this._pageState=new Fg({displayer:this.manager.displayer,scenePath:this.scenePath,view:this.view,notifyPageStateChange:this.notifyPageStateChange})}initScenes(){var i;const t=this.params.options;t&&(this.scenePath=t.scenePath,((i=this.appAttributes)==null?void 0:i.isDynamicPPT)&&this.scenePath?this.scenes=Oi(this.manager.displayer)[this.scenePath]:this.scenes=t.scenes)}get view(){return this.manager.viewManager.getView(this.id)}get viewIndex(){var t;return(t=this.view)==null?void 0:t.focusSceneIndex}get isWritable(){var t;return this.manager.canOperate&&!((t=this.box)!=null&&t.readonly)}get attributes(){return this.manager.attributes[this.id]}get appAttributes(){return this.store.getAppAttributes(this.id)}getFullScenePath(){if(this.scenePath)return E.get(this.appAttributes,[be.FullPath])||this.getFullScenePathFromScenes()}getFullScenePathFromScenes(){const t=E.get(this.appAttributes,[\"state\",\"SceneIndex\"],0),i=Dg(this.manager.room,this.scenePath,t);return i&&this.setFullPath(i),i}setFullPath(t){this.manager.safeUpdateAttributes([\"apps\",this.id,be.FullPath],t)}async baseInsertApp(t=!1){var s;const i=this.params;if(!i.kind)throw new Error(\"[WindowManager]: kind require\");const n=await((s=je.appClasses.get(i.kind))==null?void 0:s()),r=je.registered.get(i.kind);if(n)await this.setupApp(this.id,t,n,i.options,r==null?void 0:r.appOptions);else throw new Error(`[WindowManager]: app load failed ${i.kind} ${i.src}`);return R.emit(\"updateManagerRect\"),{appId:this.id,app:n}}get box(){var t;return(t=this.boxManager)==null?void 0:t.getBox(this.id)}async setupApp(t,i,n,r,s){var a;if(ai(\"setupApp\",t,n,r),!this.boxManager)throw new zd;const o=new Hg(this.manager,this.boxManager,t,this,s);this.appContext=o;try{R.once(`${t}${J.WindowCreated}`).then(async()=>{var u;let l;i||(l=this.getAppInitState(t),(u=this.boxManager)==null||u.updateBoxState(l)),this.appEmitter.onAny(this.appListener),this.appAttributesUpdateListener(t),this.setViewFocusScenePath(),setTimeout(async()=>{const d=await n.setup(o);this.appResult=d,je.notifyApp(this.kind,\"created\",{appId:t,result:d}),this.afterSetupApp(l),this.fixMobileSize()},Ed)}),(a=this.boxManager)==null||a.createBox({appId:t,app:n,options:r,canOperate:this.manager.canOperate,smartPosition:this.isAddApp}),this.isAddApp&&this.box&&(this.store.updateAppState(t,Ee.ZIndex,this.box.zIndex),this.store.updateAppState(t,Ee.Size,{width:this.box.intrinsicWidth,height:this.box.intrinsicHeight}),this.boxManager.focusBox({appId:t},!1))}catch(l){throw console.error(l),new Error(`[WindowManager]: app setup error: ${l.message}`)}}fixMobileSize(){var i,n;const t=(i=this.boxManager)==null?void 0:i.getBox(this.id);t&&((n=this.boxManager)==null||n.resizeBox({appId:this.id,width:t.intrinsicWidth+.001,height:t.intrinsicHeight+.001,skipUpdate:!0}))}afterSetupApp(t){var i;t&&(!(t!=null&&t.x)||!t.y)&&((i=this.boxManager)==null||i.setBoxInitState(this.id))}async onSeek(t){var n;this.appEmitter.emit(\"seek\",t).catch(r=>{console.log(`[WindowManager]: emit seek error: ${r.message}`)});const i=this.getAppInitState(this.id);(n=this.boxManager)==null||n.updateBoxState(i)}async onReconnected(){var s;if(!Boolean(this.manager.attributes.apps[this.id])){await this.destroy(!0,!1,!0);return}this.appEmitter.emit(\"reconnected\",void 0);const i=this.getAppInitState(this.id);await this.destroy(!0,!1,!0);const n=this.params;await new Qa(n,this.manager,this.id,this.isAddApp).baseInsertApp(!0),(s=this.boxManager)==null||s.updateBoxState(i)}async onRemoveScene(t){if(this.scenePath&&t.startsWith(this.scenePath+\"/\")){let i=this.pageState.index,n=this._pageState.getFullPath(i);n||(i=0,n=this._pageState.getFullPath(i)),n&&this.setFullPath(n),this.setViewFocusScenePath(),this.view&&(this.view.focusSceneIndex=i)}}emitAppSceneStateChange(t){this.appEmitter.emit(\"sceneStateChange\",t)}emitAppIsWritableChange(){this.appEmitter.emit(\"writableChange\",this.isWritable)}makeAppEventListener(t){return(i,n)=>{var r,s,o,a;if(!!this.manager.canOperate)switch(i){case\"setBoxSize\":{(r=this.boxManager)==null||r.resizeBox({appId:t,width:n.width,height:n.height,skipUpdate:!1});break}case\"setBoxMinSize\":{(s=this.boxManager)==null||s.setBoxMinSize({appId:t,minWidth:n.minwidth,minHeight:n.minheight});break}case\"setBoxTitle\":{(o=this.boxManager)==null||o.setBoxTitle({appId:t,title:n.title});break}case Md.destroy:{if(this.status===\"destroyed\")return;this.destroy(!0,!1,!0,n==null?void 0:n.error),n!=null&&n.error&&console.error(n==null?void 0:n.error);break}case\"focus\":{(a=this.boxManager)==null||a.focusBox({appId:this.id}),wt.emit(\"focus\",{appId:this.id});break}}}}setScenePath(){if(!this.manager.canOperate)return;const t=this.getFullScenePath();this.manager.room&&t&&this.view&&jo(this.manager.room,t)}setViewFocusScenePath(){const t=this.getFullScenePath();return t&&this.view&&gi(this.view,t),t}async createView(){const t=await this.viewManager.createView(this.id);return this.setViewFocusScenePath(),t}get pageState(){return this._pageState.toObject()}async removeSceneByIndex(t){const i=this._pageState.getFullPath(t);if(i){const n=Fa(t,this.pageState);return this.setSceneIndexWithoutSync(n),this.manager.dispatchInternalEvent(J.SetAppFocusIndex,{type:\"app\",appID:this.id,index:n}),setTimeout(()=>{Bo(this.manager.room,i,t)},100),!0}else return!1}setSceneIndexWithoutSync(t){this.view&&(this.view.focusSceneIndex=t)}setSceneIndex(t){if(this.view){this.view.focusSceneIndex=t;const i=this._pageState.getFullPath(t);i&&this.setFullPath(i)}}async destroy(t,i,n,r){var s,o,a,l;if(this.status!==\"destroyed\"){this.status=\"destroyed\";try{await je.notifyApp(this.kind,\"destroy\",{appId:this.id}),await this.appEmitter.emit(\"destroy\",{error:r})}catch(u){console.error(\"[WindowManager]: notifyApp error\",u.message,u.stack)}this.appEmitter.clearListeners(),R.emit(`destroy-${this.id}`,{error:r}),t&&((s=this.boxManager)==null||s.closeBox(this.id,n)),i&&(this.store.cleanAppAttributes(this.id),this.scenePath&&Bo(this.manager.room,this.scenePath)),this.appProxies.delete(this.id),this._pageState.destroy(),this.viewManager.destroyView(this.id),this.manager.appStatus.delete(this.id),(o=this.manager.refresher)==null||o.remove(this.id),(a=this.manager.refresher)==null||a.remove(this.stateKey),(l=this.manager.refresher)==null||l.remove(`${this.id}-fullPath`),this._prevFullPath=void 0}}close(){return this.destroy(!0,!0,!1)}}class Gg{constructor(t){this.displayer=t,this.views=new Map}createView(t){const i=Bd(this.displayer);return this.views.set(t,i),i}getView(t){return this.views.get(t)}destroyView(t){const i=this.views.get(t);if(i){try{i.release()}catch{}this.views.delete(t)}}setViewScenePath(t,i){const n=this.views.get(t);n&&(n.focusScenePath=i)}destroy(){this.views.forEach(t=>{try{t.release()}catch{}}),this.views.clear()}}const Bd=e=>{const t=e.views.createView();return Yg(t),t},Yg=e=>{e.setCameraBound({maxContentMode:()=>10,minContentMode:()=>.1})};class Xg{constructor(t){this.manager=t,this.started=!1,this.mainViewIsAddListener=!1,this.store=this.manager.store,this.sideEffectManager=new Fn.SideEffectManager,this.startListenWritableChange=()=>{this.sideEffectManager.add(()=>R.on(\"writableChange\",n=>{n&&this.ensureCameraAndSize()}))},this.addCameraReaction=()=>{var n;(n=this.manager.refresher)==null||n.add(be.MainViewCamera,this.cameraReaction)},this.cameraReaction=()=>A.reaction(()=>this.mainViewCamera,n=>{n&&n.id!==this.manager.uid&&(this.moveCameraToContian(this.mainViewSize),this.moveCamera(n))},{fireImmediately:!0}),this.sizeChangeHandler=E.debounce(n=>{n&&(this.moveCameraToContian(n),this.moveCamera(this.mainViewCamera))},30),this.onUpdateContainerSizeRatio=()=>{const n=this.store.getMainViewSize();this.sizeChangeHandler(n),n.id===this.manager.uid&&this.setCameraAndSize()},this.onCameraUpdatedByDevice=n=>{this.store.setMainViewCamera(Ge(q({},n),{id:this.manager.uid})),E.isEqual(this.mainViewSize,Ge(q({},this.mainView.size),{id:this.manager.uid}))||this.setMainViewSize(this.view.size)},this.mainViewClickListener=()=>{this.mainViewClickHandler()},this.setMainViewSize=E.debounce(n=>{this.store.setMainViewSize(Ge(q({},n),{id:this.manager.uid}))},50),this.onCameraOrSizeUpdated=()=>{se.emit(\"cameraStateChange\",this.cameraState)},this.mainView=this.createMainView(),this.moveCameraSizeByAttributes(),R.once(\"mainViewMounted\").then(()=>{this.addMainViewListener(),this.start(),this.ensureCameraAndSize(),this.startListenWritableChange()});const i=()=>{this.sizeChangeHandler(this.mainViewSize)};this.sideEffectManager.add(()=>R.on(\"playgroundSizeChange\",i)),this.sideEffectManager.add(()=>R.on(\"containerSizeRatioUpdate\",this.onUpdateContainerSizeRatio)),this.sideEffectManager.add(()=>R.on(\"startReconnect\",()=>{this.mainView.release()}))}ensureCameraAndSize(){(!this.mainViewCamera||!this.mainViewSize)&&(this.manager.dispatchInternalEvent(J.InitMainViewCamera),this.setCameraAndSize())}get mainViewCamera(){return this.store.getMainViewCamera()}get mainViewSize(){return this.store.getMainViewSize()}get didRelease(){return E.get(this.view,[\"didRelease\"])}moveCameraSizeByAttributes(){this.moveCameraToContian(this.mainViewSize),this.moveCamera(this.mainViewCamera)}start(){this.started||(this.sizeChangeHandler(this.mainViewSize),this.addCameraListener(),this.addCameraReaction(),this.started=!0)}setCameraAndSize(){const t=Ge(q({},this.mainView.camera),{id:this.manager.uid}),i=Ge(q({},this.mainView.size),{id:this.manager.uid});this.store.setMainViewCameraAndSize(t,i)}get view(){return this.mainView}get cameraState(){return q(q({},this.view.camera),this.view.size)}createMainView(){const t=Bd(this.manager.displayer),i=this.store.getMainViewScenePath();return i&&gi(t,i),t}onReconnect(){if(this.didRelease)this.rebind();else{const t=this.store.getMainViewScenePath();this.setFocusScenePath(t)}}setFocusScenePath(t){if(t)return gi(this.view,t)}rebind(){const t=this.mainView.divElement,i=this.mainView.disableCameraTransform;this.stop(),this.didRelease||this.mainView.release(),this.removeMainViewListener(),this.mainView=this.createMainView(),this.mainView.disableCameraTransform=i,this.mainView.divElement=t,this.addMainViewListener(),this.start()}addMainViewListener(){this.mainViewIsAddListener||this.view.divElement&&(this.view.divElement.addEventListener(\"click\",this.mainViewClickListener),this.view.divElement.addEventListener(\"touchend\",this.mainViewClickListener),this.mainViewIsAddListener=!0)}removeMainViewListener(){this.view.divElement&&(this.view.divElement.removeEventListener(\"click\",this.mainViewClickListener),this.view.divElement.removeEventListener(\"touchend\",this.mainViewClickListener)),this.mainViewIsAddListener=!1}async mainViewClickHandler(){var t;!this.manager.canOperate||(this.store.cleanFocus(),(t=this.manager.boxManager)==null||t.blurAllBox())}addCameraListener(){this.view.callbacks.on(\"onCameraUpdatedByDevice\",this.onCameraUpdatedByDevice),this.view.callbacks.on(\"onCameraUpdated\",this.onCameraOrSizeUpdated),this.view.callbacks.on(\"onSizeUpdated\",this.onCameraOrSizeUpdated)}removeCameraListener(){this.view.callbacks.off(\"onCameraUpdatedByDevice\",this.onCameraUpdatedByDevice),this.view.callbacks.off(\"onCameraUpdated\",this.onCameraOrSizeUpdated),this.view.callbacks.off(\"onSizeUpdated\",this.onCameraOrSizeUpdated)}moveCameraToContian(t){E.isEmpty(t)||(this.view.moveCameraToContain({width:t.width,height:t.height,originX:-t.width/2,originY:-t.height/2,animationMode:A.AnimationMode.Immediately}),this.scale=this.view.camera.scale)}moveCamera(t){if(!E.isEmpty(t)){if(E.isEqual(t,this.view.camera))return;const{centerX:i,centerY:n,scale:r}=t,s=r*(this.scale||1);this.view.moveCamera({centerX:i,centerY:n,scale:s,animationMode:A.AnimationMode.Immediately})}}stop(){var t,i;this.removeCameraListener(),(t=this.manager.refresher)==null||t.remove(be.MainViewCamera),(i=this.manager.refresher)==null||i.remove(be.MainViewSize),this.started=!1}destroy(){this.removeMainViewListener(),this.stop(),this.sideEffectManager.flushAll()}}class Jg{constructor(t){this.context=t,this.addRedoUndoListeners=i=>{if(i===void 0)this.addViewCallbacks(this.context.mainView(),this.onCanRedoStepsUpdate,this.onCanUndoStepsUpdate);else{const n=this.context.getAppProxy(i);n&&n.view&&this.addViewCallbacks(n.view,this.onCanRedoStepsUpdate,this.onCanUndoStepsUpdate)}},this.addViewCallbacks=(i,n,r)=>{n(i.canRedoSteps),r(i.canUndoSteps),i.callbacks.on(\"onCanRedoStepsUpdate\",n),i.callbacks.on(\"onCanUndoStepsUpdate\",r)},this.disposeViewCallbacks=i=>{i.callbacks.off(\"onCanRedoStepsUpdate\",this.onCanRedoStepsUpdate),i.callbacks.off(\"onCanUndoStepsUpdate\",this.onCanUndoStepsUpdate)},this.onCanRedoStepsUpdate=i=>{se.emit(\"canRedoStepsChange\",i)},this.onCanUndoStepsUpdate=i=>{se.emit(\"canUndoStepsChange\",i)},this.disposePrevFocusViewRedoUndoListeners=i=>{let n;if(i===void 0)n=this.context.mainView();else{const r=this.context.getAppProxy(i);r&&r.view&&(n=r.view)}n&&this.disposeViewCallbacks(n)},R.on(\"focusedChange\",i=>{this.disposePrevFocusViewRedoUndoListeners(i.prev),setTimeout(()=>{this.addRedoUndoListeners(i.focused)},0)}),R.on(\"rootDirRemoved\",()=>{this.disposePrevFocusViewRedoUndoListeners(t.focus()),this.addRedoUndoListeners(t.focus())}),this.addRedoUndoListeners(t.focus())}destroy(){this.disposePrevFocusViewRedoUndoListeners(this.context.focus())}}class Kg{constructor(t){this.windowManger=t,this.appProxies=new Map,this.appStatus=new Map,this.store=Zg,this.isReplay=this.windowManger.isReplay,this.mainViewScenesLength=0,this.callbacksNode=null,this.appCreateQueue=new wg,this.sideEffectManager=new Fn.SideEffectManager,this.sceneState=null,this.rootDirRemoving=!1,this.onRemoveScenes=async i=>{var r,s;const{scenePath:n}=i;if(n===De){await this.onRootDirRemoved(),this.dispatchInternalEvent(J.RootDirRemoved);return}if(_g(n)){let o=this.mainView.focusSceneIndex||0,a=(r=this.callbacksNode)==null?void 0:r.scenes[o];a||(o=0,a=(s=this.callbacksNode)==null?void 0:s.scenes[o]),a&&this.setMainViewScenePath(`${De}${a}`),await this.setMainViewSceneIndex(o)}else this.appProxies.forEach(o=>{o.onRemoveScene(n)})},this.onReadonlyChanged=()=>{this.appProxies.forEach(i=>{i.emitAppIsWritableChange()})},this.onPlayerSeekStart=async()=>{await this.closeAll()},this.onPlayerSeekDone=async i=>{await this.attributesUpdateCallback(this.attributes.apps),this.appProxies.forEach(n=>{n.onSeek(i)})},this.createRootDirScenesCallback=()=>{let i=!1;this.callbacksNode&&(this.callbacksNode.dispose(),i=!0),this.callbacksNode=this.displayer.createScenesCallback(De,{onAddScene:this.onSceneChange,onRemoveScene:async(n,r)=>{await this.onSceneChange(n),R.emit(\"rootDirSceneRemoved\",r)}}),this.callbacksNode&&(this.updateSceneState(this.callbacksNode),this.mainViewScenesLength=this.callbacksNode.scenes.length,i&&this.emitMainViewScenesChange(this.callbacksNode.scenes.length))},this.removeSceneByIndex=async i=>{var s;const n=Fa(i,this.windowManger.pageState);this.setSceneIndexWithoutSync(n),this.dispatchInternalEvent(J.SetAppFocusIndex,{type:\"main\",index:n});const r=(s=this.callbacksNode)==null?void 0:s.scenes[i];return setTimeout(()=>{r&&Bo(this.room,`${De}${r}`,i)},100),new Promise((o,a)=>{R.once(\"rootDirSceneRemoved\").then(l=>{l===r&&o(!0)}).catch(l=>{console.log(`[WindowManager]: removePage error: ${l}`),a(!1)})})},this.setSceneIndexWithoutSync=i=>{var r;const n=(r=this.callbacksNode)==null?void 0:r.scenes[i];n&&this.mainViewProxy.setFocusScenePath(`${De}${n}`)},this.onSceneChange=i=>(this.mainViewScenesLength=i.scenes.length,this.updateSceneState(i),this.emitMainViewScenesChange(this.mainViewScenesLength)),this.emitMainViewScenesChange=i=>Promise.all([se.emit(\"mainViewScenesLengthChange\",i),R.emit(\"changePageState\")]),this.updateSceneState=i=>{const n=this.store.getMainViewSceneIndex()||0;let r=i.scenes[n];r||(r=i.scenes[this.mainView.focusSceneIndex||0]),this.sceneState={scenePath:`${De}${r}`,contextPath:i.path,index:n,scenes:i.scenes.map(s=>({name:s})),sceneName:r},se.emit(\"sceneStateChange\",this.sceneState)},this.onBoxMove=i=>{this.dispatchInternalEvent(J.AppMove,i),this.store.updateAppState(i.appId,Ee.Position,{x:i.x,y:i.y})},this.onBoxResize=i=>{i.width&&i.height&&(this.dispatchInternalEvent(J.AppResize,i),this.store.updateAppState(i.appId,Ee.Size,{width:i.width,height:i.height}))},this.onBoxFocus=i=>{this.windowManger.safeSetAttributes({focus:i.appId})},this.onBoxClose=i=>{const n=this.appProxies.get(i.appId);n&&n.destroy(!1,!0,!0,i.error)},this.onBoxStateChange=i=>{this.dispatchInternalEvent(J.AppBoxStateChange,i)},this.addAppsChangeListener=()=>{var i;(i=this.refresher)==null||i.add(\"apps\",()=>jd(()=>this.attributes.apps,()=>{this.attributesUpdateCallback(this.attributes.apps)}))},this.addAppCloseListener=()=>{var i;(i=this.refresher)==null||i.add(\"appsClose\",()=>Ug(this.attributes.apps,()=>{this.onAppDelete(this.attributes.apps)}))},this.onMainViewIndexChange=i=>{i!==void 0&&this._prevSceneIndex!==i&&(se.emit(\"mainViewSceneIndexChange\",i),R.emit(\"changePageState\"),this.callbacksNode&&this.updateSceneState(this.callbacksNode),this._prevSceneIndex=i)},this.onFocusChange=i=>{var n;this._prevFocused!==i&&(se.emit(\"focusedChange\",i),R.emit(\"focusedChange\",{focused:i,prev:this._prevFocused}),this._prevFocused=i,i!==void 0&&((n=this.boxManager)==null||n.focusBox({appId:i}),setTimeout(()=>{const r=this.appProxies.get(i);r&&je.notifyApp(r.kind,\"focus\",{appId:i})},0)))},this.attributesUpdateCallback=E.debounce(i=>this._attributesUpdateCallback(i),100),this.onRegisteredChange=i=>{!i||Object.entries(i).forEach(([n,r])=>{je.appClasses.has(n)||je.register({kind:n,src:r.src,name:r.name})})},this.onMinimized=i=>{var n,r;((n=this.boxManager)==null?void 0:n.minimized)!==i&&(i===!0&&((r=this.boxManager)==null||r.blurAllBox()),setTimeout(()=>{var s;(s=this.boxManager)==null||s.setMinimized(Boolean(i))},0))},this.onAppDelete=async i=>{const n=Object.keys(i);for(const[r,s]of this.appProxies.entries())n.includes(r)||await s.destroy(!0,!1,!0)},this.closeAll=async()=>{for(const[i,n]of this.appProxies.entries())await n.destroy(!0,!1,!0)},this.displayerStateListener=i=>{const n=i.sceneState;if(n){const r=n.scenePath;this.appProxies.forEach(s=>{s.scenePath&&r.startsWith(s.scenePath)&&(s.emitAppSceneStateChange(n),s.setFullPath(r))})}this.appProxies.forEach(r=>{r.appEmitter.emit(\"roomStateChange\",i)}),R.emit(\"observerIdChange\",this.displayer.observerId)},this.displayerWritableListener=i=>{var s,o;const n=!i,r=this.windowManger.readonly===void 0||this.windowManger.readonly===!1;this.windowManger.readonly===void 0?(s=this.boxManager)==null||s.setReadonly(i):(o=this.boxManager)==null||o.setReadonly(!(n&&r)),this.appProxies.forEach(a=>{a.emitAppIsWritableChange()}),R.emit(\"writableChange\",n)},this.updateSceneIndex=()=>{const i=this.store.getMainViewScenePath(),n=to(i),r=Oi(this.displayer)[n];if(r.length){const s=i.replace(n,\"\").replace(\"/\",\"\"),o=r.findIndex(a=>a.name===s);E.isInteger(o)&&o>=0&&this.safeSetAttributes({_mainSceneIndex:o})}},this.updateRootDirRemoving=i=>{this.rootDirRemoving=i},this.displayer=t.displayer,this.store.setContext({getAttributes:()=>this.attributes,safeSetAttributes:i=>this.safeSetAttributes(i),safeUpdateAttributes:(i,n)=>this.safeUpdateAttributes(i,n)}),this.mainViewProxy=new Xg(this),this.viewManager=new Gg(this.displayer),this.appListeners=new Og(this),this.displayer.callbacks.on(this.eventName,this.displayerStateListener),this.appListeners.addListeners(),this.refresher=eg,this.refresher.setRoom(this.room),this.refresher.setContext({emitter:R}),this.sideEffectManager.add(()=>()=>{var i,n,r;this.appCreateQueue.destroy(),this.mainViewProxy.destroy(),(i=this.refresher)==null||i.destroy(),this.viewManager.destroy(),(n=this.boxManager)==null||n.destroy(),(r=this.callbacksNode)==null||r.dispose()}),R.once(\"onCreated\").then(()=>this.onCreated()),R.on(\"onReconnected\",()=>this.onReconnected()),A.isPlayer(this.displayer)&&(R.on(\"seekStart\",this.onPlayerSeekStart),R.on(\"seek\",this.onPlayerSeekDone)),R.on(\"removeScenes\",this.onRemoveScenes),R.on(\"setReadonly\",this.onReadonlyChanged),this.createRootDirScenesCallback(),je.setSyncRegisterApp(i=>{this.safeUpdateAttributes([be.Registered,i.kind],i)})}async onRootDirRemoved(t=!0){this.setMainViewScenePath(bd),this.createRootDirScenesCallback();for(const[i,n]of this.appProxies.entries())n.view&&await this.closeApp(i,t);this.mainViewProxy.rebind(),R.emit(\"rootDirRemoved\"),this.updateRootDirRemoving(!1)}get eventName(){return A.isRoom(this.displayer)?\"onRoomStateChanged\":\"onPlayerStateChanged\"}get attributes(){return this.windowManger.attributes}get canOperate(){return this.windowManger.canOperate}get room(){return A.isRoom(this.displayer)?this.displayer:void 0}get mainView(){return this.mainViewProxy.view}get focusApp(){if(this.store.focus)return this.appProxies.get(this.store.focus)}get uid(){var t;return((t=this.room)==null?void 0:t.uid)||\"\"}getMainViewSceneDir(){const t=this.store.getMainViewScenePath();if(t)return to(t);throw new Error(\"[WindowManager]: mainViewSceneDir not found\")}async onCreated(){var t,i,n,r,s,o;if(await this.attributesUpdateCallback(this.attributes.apps),R.emit(\"updateManagerRect\"),wt.on(\"move\",this.onBoxMove),wt.on(\"resize\",this.onBoxResize),wt.on(\"focus\",this.onBoxFocus),wt.on(\"close\",this.onBoxClose),wt.on(\"boxStateChange\",this.onBoxStateChange),this.addAppsChangeListener(),this.addAppCloseListener(),(t=this.refresher)==null||t.add(\"maximized\",()=>A.autorun(()=>{var l;const a=this.attributes.maximized;(l=this.boxManager)==null||l.setMaximized(Boolean(a))})),(i=this.refresher)==null||i.add(\"minimized\",()=>A.autorun(()=>{const a=this.attributes.minimized;this.onMinimized(a)})),(n=this.refresher)==null||n.add(\"mainViewIndex\",()=>A.autorun(()=>{const a=E.get(this.attributes,\"_mainSceneIndex\");this.onMainViewIndexChange(a)})),(r=this.refresher)==null||r.add(\"focusedChange\",()=>A.autorun(()=>{const a=E.get(this.attributes,\"focus\");this.onFocusChange(a)})),(s=this.refresher)==null||s.add(\"registeredChange\",()=>A.autorun(()=>{const a=E.get(this.attributes,be.Registered);this.onRegisteredChange(a)})),!this.attributes.apps||Object.keys(this.attributes.apps).length===0){const a=this.store.getMainViewScenePath();if(!a)return;this.resetScenePath(a)}this.displayerWritableListener(!((o=this.room)!=null&&o.isWritable)),this.displayer.callbacks.on(\"onEnableWriteNowChanged\",this.displayerWritableListener),this._prevFocused=this.attributes.focus,this.sideEffectManager.add(()=>{const a=new Jg({mainView:()=>this.mainViewProxy.view,focus:()=>this.attributes.focus,getAppProxy:l=>this.appProxies.get(l)});return()=>a.destroy()})}async _attributesUpdateCallback(t){if(t&&ie.container){const i=Object.keys(t);i.length===0&&this.appCreateQueue.emitReady();const n=i.map(r=>({id:r,createdAt:t[r].createdAt}));for(const{id:r}of E.orderBy(n,\"createdAt\",\"asc\"))if(!this.appProxies.has(r)&&!this.appStatus.has(r)){const s=t[r];try{if(!this.attributes[r])throw new Error(\"appAttributes is undefined\");this.appCreateQueue.push(()=>(this.appStatus.set(r,Lo.StartCreate),this.baseInsertApp({kind:s.kind,options:s.options,isDynamicPPT:s.isDynamicPPT},r,!1))),this.focusByAttributes(t)}catch(o){console.warn(\"[WindowManager]: Insert App Error\",o)}}}}refresh(){this.attributesUpdateCallback(this.attributes.apps)}setBoxManager(t){this.boxManager=t}resetMaximized(){var t;(t=this.boxManager)==null||t.setMaximized(Boolean(this.store.getMaximized()))}resetMinimized(){var t;(t=this.boxManager)==null||t.setMinimized(Boolean(this.store.getMinimized()))}bindMainView(t,i){const n=this.mainViewProxy.view;n.disableCameraTransform=i,n.divElement=t,n.focusScenePath||this.setMainViewFocusPath(),R.emit(\"mainViewMounted\")}setMainViewFocusPath(t){var n;const i=t||this.store.getMainViewScenePath();if(i)return gi(this.mainView,i),((n=this.mainView)==null?void 0:n.focusScenePath)===i}resetScenePath(t){this.displayer.state.sceneState.scenePath!==t&&jo(this.room,t)}async addApp(t,i){ai(\"addApp\",t);const{appId:n,needFocus:r}=await this.beforeAddApp(t,i),s=await this.baseInsertApp(t,n,!0,r);return this.afterAddApp(s),s==null?void 0:s.id}async beforeAddApp(t,i){var o,a;const n=await zg(t.kind);this.appStatus.set(n,Lo.StartCreate);const r=(o=t.attributes)!=null?o:{};this.safeUpdateAttributes([n],r),this.store.setupAppAttributes(t,n,i);const s=!((a=this.boxManager)!=null&&a.minimized);return s&&this.store.setAppFocus(n,!0),{appId:n,needFocus:s}}afterAddApp(t){var i,n;if(t&&t.box){const r=t.box;wt.emit(\"move\",{appId:t.id,x:r==null?void 0:r.intrinsicX,y:r==null?void 0:r.intrinsicY}),this.store.updateAppState(t.id,Ee.ZIndex,r.zIndex)}(i=this.boxManager)!=null&&i.minimized&&((n=this.boxManager)==null||n.setMinimized(!1,!1))}async closeApp(t,i=!0){const n=this.appProxies.get(t);n&&n.destroy(!0,i,!1)}async baseInsertApp(t,i,n,r){if(this.appProxies.has(i)){console.warn(\"[WindowManager]: app duplicate exists and cannot be created again\");return}const s=new Qa(t,this,i,n);if(s)return await s.baseInsertApp(r),this.appStatus.delete(i),s;throw this.appStatus.delete(i),new Error(\"[WindowManger]: initialize AppProxy failed\")}safeSetAttributes(t){this.windowManger.safeSetAttributes(t)}safeUpdateAttributes(t,i){this.windowManger.safeUpdateAttributes(t,i)}async setMainViewScenePath(t){if(this.room){const i=this.displayer.scenePathType(t);if(to(t)!==De)throw new Error('[WindowManager]: main view scenePath must in root dir \"/\"');if(i===A.ScenePathType.None)throw new Error(`[WindowManager]: ${t} not valid scene`);if(i===A.ScenePathType.Page)await this._setMainViewScenePath(t);else if(i===A.ScenePathType.Dir){const r=jg(this.displayer,t);r&&await this._setMainViewScenePath(r)}}}async _setMainViewScenePath(t){this.setMainViewFocusPath(t)&&(this.safeSetAttributes({_mainScenePath:t}),this.store.setMainViewFocusPath(this.mainView),this.updateSceneIndex(),this.dispatchSetMainViewScenePath(t))}async setMainViewSceneIndex(t){var i;if(this.room){if(this.store.getMainViewSceneIndex()===t)return;const n=(i=this.callbacksNode)==null?void 0:i.scenes[t],r=`${De}${n}`;if(n)this.setMainViewFocusPath(r)&&(this.store.setMainViewScenePath(r),this.safeSetAttributes({_mainSceneIndex:t}),this.dispatchSetMainViewScenePath(r));else throw new Error(`[WindowManager]: ${t} not valid index`)}}dispatchSetMainViewScenePath(t){this.dispatchInternalEvent(J.SetMainViewScenePath,{nextScenePath:t}),jo(this.room,t)}getAppInitPath(t){var n;const i=this.store.getAppAttributes(t);if(i)return(n=i==null?void 0:i.options)==null?void 0:n.scenePath}safeDispatchMagixEvent(t,i){this.canOperate&&this.displayer.dispatchMagixEvent(t,i)}focusByAttributes(t){var i;if(t&&Object.keys(t).length===((i=this.boxManager)==null?void 0:i.boxSize)){const n=this.store.focus;n&&this.boxManager.focusBox({appId:n})}}async onReconnected(){this.attributesUpdateCallback(this.attributes.apps);const i=Array.from(this.appProxies.values()).map(n=>n.onReconnected());this.mainViewProxy.onReconnect(),await Promise.all(i)}notifyContainerRectUpdate(t){this.appProxies.forEach(i=>{i.appEmitter.emit(\"containerRectUpdate\",t)})}dispatchInternalEvent(t,i){this.safeDispatchMagixEvent(Do,{eventName:t,payload:i})}destroy(){this.displayer.callbacks.off(this.eventName,this.displayerStateListener),this.displayer.callbacks.off(\"onEnableWriteNowChanged\",this.displayerWritableListener),this.appListeners.removeListeners(),wt.clearListeners(),R.clearListeners(),this.appProxies.size&&this.appProxies.forEach(t=>{t.destroy(!0,!1,!0)}),se.clearListeners(),this.sideEffectManager.flushAll(),this._prevFocused=void 0,this._prevSceneIndex=void 0}}const qg=e=>{const t=document.createElement(\"div\");t.className=\"netless-window-manager-playground\";const i=document.createElement(\"div\");i.className=\"netless-window-manager-sizer\";const n=document.createElement(\"div\");n.className=\"netless-window-manager-wrapper\";const r=document.createElement(\"div\");return r.className=\"netless-window-manager-main-view\",t.appendChild(i),i.appendChild(n),n.appendChild(r),e.appendChild(t),ie.wrapper=n,{playground:t,wrapper:n,sizer:i,mainViewElement:r}},em=()=>{if(yu(A.WhiteVersion)<yu(mu))throw new Td(mu)},tm=(e,t)=>{const i=e==null?void 0:e.state.roomMembers;return i==null?void 0:i.find(n=>{var r;return((r=n.payload)==null?void 0:r.uid)===t})},Cu=async e=>{try{return await e.createInvisiblePlugin(ie,{})}catch(t){if(t.message==='invisible plugin \"WindowManager\" exits')return await Gr(200),e.getInvisiblePlugin(ie.kind);ai(\"createInvisiblePlugin failed\",t)}},im=window.ResizeObserver||hg.ResizeObserver;class Za{constructor(t){this.emitter=t}static create(t,i,n,r){const s=new Za(r);return s.observePlaygroundSize(t,i,n),s}observePlaygroundSize(t,i,n){this.updateSizer(t.getBoundingClientRect(),i,n),this.containerResizeObserver=new im(r=>{var o;const s=(o=r[0])==null?void 0:o.contentRect;s&&(this.updateSizer(s,i,n),this.emitter.emit(\"playgroundSizeChange\",s))}),this.disposer=this.emitter.on(\"containerSizeRatioUpdate\",()=>{this.updateSizer(t.getBoundingClientRect(),i,n)}),this.containerResizeObserver.observe(t)}updateSizer({width:t,height:i},n,r){t&&i&&(i/t>ie.containerSizeRatio?(i=t*ie.containerSizeRatio,n.classList.toggle(\"netless-window-manager-sizer-horizontal\",!0)):(t=i/ie.containerSizeRatio,n.classList.toggle(\"netless-window-manager-sizer-horizontal\",!1)),r.style.width=`${t}px`,r.style.height=`${i}px`)}disconnect(){var t;(t=this.containerResizeObserver)==null||t.disconnect(),E.isFunction(this.disposer)&&(this.disposer(),this.disposer=void 0)}}var xi={exports:{}},Z={};/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/var Mu=Object.getOwnPropertySymbols,nm=Object.prototype.hasOwnProperty,rm=Object.prototype.propertyIsEnumerable;function sm(e){if(e==null)throw new TypeError(\"Object.assign cannot be called with null or undefined\");return Object(e)}function om(){try{if(!Object.assign)return!1;var e=new String(\"abc\");if(e[5]=\"de\",Object.getOwnPropertyNames(e)[0]===\"5\")return!1;for(var t={},i=0;i<10;i++)t[\"_\"+String.fromCharCode(i)]=i;var n=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(n.join(\"\")!==\"0123456789\")return!1;var r={};return\"abcdefghijklmnopqrst\".split(\"\").forEach(function(s){r[s]=s}),Object.keys(Object.assign({},r)).join(\"\")===\"abcdefghijklmnopqrst\"}catch{return!1}}var Rd=om()?Object.assign:function(e,t){for(var i,n=sm(e),r,s=1;s<arguments.length;s++){i=Object(arguments[s]);for(var o in i)nm.call(i,o)&&(n[o]=i[o]);if(Mu){r=Mu(i);for(var a=0;a<r.length;a++)rm.call(i,r[a])&&(n[r[a]]=i[r[a]])}}return n};/** @license React v16.14.0\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */var Ga=Rd,it=typeof Symbol==\"function\"&&Symbol.for,Zn=it?Symbol.for(\"react.element\"):60103,am=it?Symbol.for(\"react.portal\"):60106,lm=it?Symbol.for(\"react.fragment\"):60107,um=it?Symbol.for(\"react.strict_mode\"):60108,cm=it?Symbol.for(\"react.profiler\"):60114,dm=it?Symbol.for(\"react.provider\"):60109,hm=it?Symbol.for(\"react.context\"):60110,pm=it?Symbol.for(\"react.forward_ref\"):60112,fm=it?Symbol.for(\"react.suspense\"):60113,gm=it?Symbol.for(\"react.memo\"):60115,mm=it?Symbol.for(\"react.lazy\"):60116,Iu=typeof Symbol==\"function\"&&Symbol.iterator;function Gn(e){for(var t=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+e,i=1;i<arguments.length;i++)t+=\"&args[]=\"+encodeURIComponent(arguments[i]);return\"Minified React error #\"+e+\"; visit \"+t+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}var _d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Od={};function Yi(e,t,i){this.props=e,this.context=t,this.refs=Od,this.updater=i||_d}Yi.prototype.isReactComponent={};Yi.prototype.setState=function(e,t){if(typeof e!=\"object\"&&typeof e!=\"function\"&&e!=null)throw Error(Gn(85));this.updater.enqueueSetState(this,e,t,\"setState\")};Yi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,\"forceUpdate\")};function Vd(){}Vd.prototype=Yi.prototype;function Ya(e,t,i){this.props=e,this.context=t,this.refs=Od,this.updater=i||_d}var Xa=Ya.prototype=new Vd;Xa.constructor=Ya;Ga(Xa,Yi.prototype);Xa.isPureReactComponent=!0;var Ja={current:null},Ud=Object.prototype.hasOwnProperty,Wd={key:!0,ref:!0,__self:!0,__source:!0};function $d(e,t,i){var n,r={},s=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=\"\"+t.key),t)Ud.call(t,n)&&!Wd.hasOwnProperty(n)&&(r[n]=t[n]);var a=arguments.length-2;if(a===1)r.children=i;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)r[n]===void 0&&(r[n]=a[n]);return{$$typeof:Zn,type:e,key:s,ref:o,props:r,_owner:Ja.current}}function vm(e,t){return{$$typeof:Zn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ka(e){return typeof e==\"object\"&&e!==null&&e.$$typeof===Zn}function wm(e){var t={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+(\"\"+e).replace(/[=:]/g,function(i){return t[i]})}var Hd=/\\/+/g,Yr=[];function Fd(e,t,i,n){if(Yr.length){var r=Yr.pop();return r.result=e,r.keyPrefix=t,r.func=i,r.context=n,r.count=0,r}return{result:e,keyPrefix:t,func:i,context:n,count:0}}function Qd(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>Yr.length&&Yr.push(e)}function Ro(e,t,i,n){var r=typeof e;(r===\"undefined\"||r===\"boolean\")&&(e=null);var s=!1;if(e===null)s=!0;else switch(r){case\"string\":case\"number\":s=!0;break;case\"object\":switch(e.$$typeof){case Zn:case am:s=!0}}if(s)return i(n,e,t===\"\"?\".\"+no(e,0):t),1;if(s=0,t=t===\"\"?\".\":t+\":\",Array.isArray(e))for(var o=0;o<e.length;o++){r=e[o];var a=t+no(r,o);s+=Ro(r,a,i,n)}else if(e===null||typeof e!=\"object\"?a=null:(a=Iu&&e[Iu]||e[\"@@iterator\"],a=typeof a==\"function\"?a:null),typeof a==\"function\")for(e=a.call(e),o=0;!(r=e.next()).done;)r=r.value,a=t+no(r,o++),s+=Ro(r,a,i,n);else if(r===\"object\")throw i=\"\"+e,Error(Gn(31,i===\"[object Object]\"?\"object with keys {\"+Object.keys(e).join(\", \")+\"}\":i,\"\"));return s}function _o(e,t,i){return e==null?0:Ro(e,\"\",t,i)}function no(e,t){return typeof e==\"object\"&&e!==null&&e.key!=null?wm(e.key):t.toString(36)}function ym(e,t){e.func.call(e.context,t,e.count++)}function xm(e,t,i){var n=e.result,r=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?Oo(e,n,i,function(s){return s}):e!=null&&(Ka(e)&&(e=vm(e,r+(!e.key||t&&t.key===e.key?\"\":(\"\"+e.key).replace(Hd,\"$&/\")+\"/\")+i)),n.push(e))}function Oo(e,t,i,n,r){var s=\"\";i!=null&&(s=(\"\"+i).replace(Hd,\"$&/\")+\"/\"),t=Fd(t,s,n,r),_o(e,xm,t),Qd(t)}var Zd={current:null};function Et(){var e=Zd.current;if(e===null)throw Error(Gn(321));return e}var Sm={ReactCurrentDispatcher:Zd,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:Ja,IsSomeRendererActing:{current:!1},assign:Ga};Z.Children={map:function(e,t,i){if(e==null)return e;var n=[];return Oo(e,n,null,t,i),n},forEach:function(e,t,i){if(e==null)return e;t=Fd(null,null,t,i),_o(e,ym,t),Qd(t)},count:function(e){return _o(e,function(){return null},null)},toArray:function(e){var t=[];return Oo(e,t,null,function(i){return i}),t},only:function(e){if(!Ka(e))throw Error(Gn(143));return e}};Z.Component=Yi;Z.Fragment=lm;Z.Profiler=cm;Z.PureComponent=Ya;Z.StrictMode=um;Z.Suspense=fm;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sm;Z.cloneElement=function(e,t,i){if(e==null)throw Error(Gn(267,e));var n=Ga({},e.props),r=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Ja.current),t.key!==void 0&&(r=\"\"+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)Ud.call(t,l)&&!Wd.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=i;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:Zn,type:e.type,key:r,ref:s,props:n,_owner:o}};Z.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:hm,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:dm,_context:e},e.Consumer=e};Z.createElement=$d;Z.createFactory=function(e){var t=$d.bind(null,e);return t.type=e,t};Z.createRef=function(){return{current:null}};Z.forwardRef=function(e){return{$$typeof:pm,render:e}};Z.isValidElement=Ka;Z.lazy=function(e){return{$$typeof:mm,_ctor:e,_status:-1,_result:null}};Z.memo=function(e,t){return{$$typeof:gm,type:e,compare:t===void 0?null:t}};Z.useCallback=function(e,t){return Et().useCallback(e,t)};Z.useContext=function(e,t){return Et().useContext(e,t)};Z.useDebugValue=function(){};Z.useEffect=function(e,t){return Et().useEffect(e,t)};Z.useImperativeHandle=function(e,t,i){return Et().useImperativeHandle(e,t,i)};Z.useLayoutEffect=function(e,t){return Et().useLayoutEffect(e,t)};Z.useMemo=function(e,t){return Et().useMemo(e,t)};Z.useReducer=function(e,t,i){return Et().useReducer(e,t,i)};Z.useRef=function(e){return Et().useRef(e)};Z.useState=function(e){return Et().useState(e)};Z.version=\"16.14.0\";xi.exports=Z;var H=xi.exports,Cm=Object.defineProperty,Mm=Object.defineProperties,Im=Object.getOwnPropertyDescriptors,bu=Object.getOwnPropertySymbols,bm=Object.prototype.hasOwnProperty,Em=Object.prototype.propertyIsEnumerable,Eu=(e,t,i)=>t in e?Cm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Au=(e,t)=>{for(var i in t||(t={}))bm.call(t,i)&&Eu(e,i,t[i]);if(bu)for(var i of bu(t))Em.call(t,i)&&Eu(e,i,t[i]);return e},Tu=(e,t)=>Mm(e,Im(t)),Gd={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,i=\"~\";function n(){}function r(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function s(l,u,d,p,m){if(typeof d!=\"function\")throw new TypeError(\"The listener must be a function\");var v=new r(d,p||l,m),S=i?i+u:u;return l._events[S]?l._events[S].fn?l._events[S]=[l._events[S],v]:l._events[S].push(v):(l._events[S]=v,l._eventsCount++),l}function o(l,u){--l._eventsCount==0?l._events=new n:delete l._events[u]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(i=!1)),a.prototype.eventNames=function(){var l,u,d=[];if(this._eventsCount===0)return d;for(u in l=this._events)t.call(l,u)&&d.push(i?u.slice(1):u);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(l)):d},a.prototype.listeners=function(l){var u=i?i+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var p=0,m=d.length,v=new Array(m);p<m;p++)v[p]=d[p].fn;return v},a.prototype.listenerCount=function(l){var u=i?i+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,p,m,v){var S=i?i+l:l;if(!this._events[S])return!1;var y,h,c=this._events[S],f=arguments.length;if(c.fn){switch(c.once&&this.removeListener(l,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,u),!0;case 3:return c.fn.call(c.context,u,d),!0;case 4:return c.fn.call(c.context,u,d,p),!0;case 5:return c.fn.call(c.context,u,d,p,m),!0;case 6:return c.fn.call(c.context,u,d,p,m,v),!0}for(h=1,y=new Array(f-1);h<f;h++)y[h-1]=arguments[h];c.fn.apply(c.context,y)}else{var g,w=c.length;for(h=0;h<w;h++)switch(c[h].once&&this.removeListener(l,c[h].fn,void 0,!0),f){case 1:c[h].fn.call(c[h].context);break;case 2:c[h].fn.call(c[h].context,u);break;case 3:c[h].fn.call(c[h].context,u,d);break;case 4:c[h].fn.call(c[h].context,u,d,p);break;default:if(!y)for(g=1,y=new Array(f-1);g<f;g++)y[g-1]=arguments[g];c[h].fn.apply(c[h].context,y)}}return!0},a.prototype.on=function(l,u,d){return s(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return s(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,p){var m=i?i+l:l;if(!this._events[m])return this;if(!u)return o(this,m),this;var v=this._events[m];if(v.fn)v.fn!==u||p&&!v.once||d&&v.context!==d||o(this,m);else{for(var S=0,y=[],h=v.length;S<h;S++)(v[S].fn!==u||p&&!v[S].once||d&&v[S].context!==d)&&y.push(v[S]);y.length?this._events[m]=y.length===1?y[0]:y:o(this,m)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=i?i+l:l,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,e.exports=a})(Gd);var Vo=Gd.exports,Xr=function(){return(Xr=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */function qa(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols==\"function\"){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}var ro=0,Yd=typeof window!=\"undefined\"&&window.requestAnimationFrame!==void 0?function(e){return window.requestAnimationFrame(e)}:function(e){var t=Date.now(),i=Math.max(0,16.7-(t-ro));ro=t+i,setTimeout(function(){return e(ro)},i)},ku=1/60*1e3,kr=!0,zn=!1,Uo=!1,pn={delta:0,timestamp:0},el=[\"read\",\"update\",\"preRender\",\"render\",\"postRender\"],Am=function(e){return zn=e},Xd=el.reduce(function(e,t){var i,n,r,s,o,a,l,u,d;return e[t]=(i=Am,n=[],r=[],s=0,o=!1,a=0,l=new WeakSet,u=new WeakSet,d={cancel:function(p){var m=r.indexOf(p);l.add(p),m!==-1&&r.splice(m,1)},process:function(p){var m,v;if(o=!0,n=(m=[r,n])[0],(r=m[1]).length=0,s=n.length)for(a=0;a<s;a++)(v=n[a])(p),u.has(v)!==!0||l.has(v)||(d.schedule(v),i(!0));o=!1},schedule:function(p,m,v){m===void 0&&(m=!1),v===void 0&&(v=!1);var S=v&&o,y=S?n:r;l.delete(p),m&&u.add(p),y.indexOf(p)===-1&&(y.push(p),S&&(s=n.length))}}),e},{}),Tm=el.reduce(function(e,t){var i=Xd[t];return e[t]=function(n,r,s){return r===void 0&&(r=!1),s===void 0&&(s=!1),zn||Nm(),i.schedule(n,r,s),n},e},{}),km=function(e){return Xd[e].process(pn)},Jd=function(e){zn=!1,pn.delta=kr?ku:Math.max(Math.min(e-pn.timestamp,40),1),kr||(ku=pn.delta),pn.timestamp=e,Uo=!0,el.forEach(km),Uo=!1,zn&&(kr=!1,Yd(Jd))},Nm=function(){zn=!0,kr=!0,Uo||Yd(Jd)},qe=function(){return(qe=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Kd=function(e,t){return function(i){return Math.max(Math.min(i,t),e)}},Nr=function(e){return e%1?Number(e.toFixed(5)):e},qd=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\\((-?[\\d\\.]+%?[,\\s]+){2,3}\\s*\\/*\\s*[\\d\\.]+%?\\))$/i,Ns={test:function(e){return typeof e==\"number\"},parse:parseFloat,transform:function(e){return e}},yn=qe(qe({},Ns),{transform:Kd(0,1)}),cr=qe(qe({},Ns),{default:1}),tl=function(e){return{test:function(t){return typeof t==\"string\"&&t.endsWith(e)&&t.split(\" \").length===1},parse:parseFloat,transform:function(t){return\"\"+t+e}}},qt=tl(\"deg\"),xn=tl(\"%\"),V=tl(\"px\"),Nu=qe(qe({},xn),{parse:function(e){return xn.parse(e)/100},transform:function(e){return xn.transform(100*e)}}),Pm=Kd(0,255),Wo=function(e){return e.red!==void 0},$o=function(e){return e.hue!==void 0},eh=function(e){return function(t){if(typeof t!=\"string\")return t;for(var i={},n=function(s){return s.substring(s.indexOf(\"(\")+1,s.lastIndexOf(\")\"))}(t).replace(/(,|\\/)/g,\" \").split(/ \\s*/),r=0;r<4;r++)i[e[r]]=n[r]!==void 0?parseFloat(n[r]):1;return i}},so=qe(qe({},Ns),{transform:function(e){return Math.round(Pm(e))}});function il(e,t){return e.startsWith(t)&&qd.test(e)}var oo,Pr={test:function(e){return typeof e==\"string\"?il(e,\"rgb\"):Wo(e)},parse:eh([\"red\",\"green\",\"blue\",\"alpha\"]),transform:function(e){var t=e.red,i=e.green,n=e.blue,r=e.alpha,s=r===void 0?1:r;return function(o){var a=o.red,l=o.green,u=o.blue,d=o.alpha;return\"rgba(\"+a+\", \"+l+\", \"+u+\", \"+(d===void 0?1:d)+\")\"}({red:so.transform(t),green:so.transform(i),blue:so.transform(n),alpha:Nr(yn.transform(s))})}},ao={test:function(e){return typeof e==\"string\"?il(e,\"hsl\"):$o(e)},parse:eh([\"hue\",\"saturation\",\"lightness\",\"alpha\"]),transform:function(e){var t=e.hue,i=e.saturation,n=e.lightness,r=e.alpha,s=r===void 0?1:r;return function(o){var a=o.hue,l=o.saturation,u=o.lightness,d=o.alpha;return\"hsla(\"+a+\", \"+l+\", \"+u+\", \"+(d===void 0?1:d)+\")\"}({hue:Math.round(t),saturation:xn.transform(Nr(i)),lightness:xn.transform(Nr(n)),alpha:Nr(yn.transform(s))})}},Pu=qe(qe({},Pr),{test:function(e){return typeof e==\"string\"&&il(e,\"#\")},parse:function(e){var t=\"\",i=\"\",n=\"\";return e.length>4?(t=e.substr(1,2),i=e.substr(3,2),n=e.substr(5,2)):(t=e.substr(1,1),i=e.substr(2,1),n=e.substr(3,1),t+=t,i+=i,n+=n),{red:parseInt(t,16),green:parseInt(i,16),blue:parseInt(n,16),alpha:1}}}),rt={test:function(e){return typeof e==\"string\"&&qd.test(e)||Wo(e)||$o(e)},parse:function(e){return Pr.test(e)?Pr.parse(e):ao.test(e)?ao.parse(e):Pu.test(e)?Pu.parse(e):e},transform:function(e){return Wo(e)?Pr.transform(e):$o(e)?ao.transform(e):e}},nl=function(e){var t=e.onRead,i=e.onRender,n=e.uncachedValues,r=n===void 0?new Set:n,s=e.useCache,o=s===void 0||s;return function(a){a===void 0&&(a={});var l=qa(a,[]),u={},d=[],p=!1;function m(S,y){S.startsWith(\"--\")&&(l.hasCSSVariable=!0);var h=u[S];u[S]=y,u[S]!==h&&(d.indexOf(S)===-1&&d.push(S),p||(p=!0,Tm.render(v.render)))}var v={get:function(S,y){return y===void 0&&(y=!1),!y&&o&&!r.has(S)&&u[S]!==void 0?u[S]:t(S,l)},set:function(S,y){if(typeof S==\"string\")m(S,y);else for(var h in S)m(h,S[h]);return this},render:function(S){return S===void 0&&(S=!1),(p||S===!0)&&(i(u,l,d),p=!1,d.length=0),this}};return v}},zm=/([a-z])([A-Z])/g,Ps=function(e){return e.replace(zm,\"$1-$2\").toLowerCase()},zu=new Map,Ho=new Map,th=[\"Webkit\",\"Moz\",\"O\",\"ms\",\"\"],Dm=th.length,Lm=typeof document!=\"undefined\",Du=function(e,t){return Ho.set(e,Ps(t))},ih=function(e,t){t===void 0&&(t=!1);var i=t?Ho:zu;return i.has(e)||(Lm?function(n){oo=oo||document.createElement(\"div\");for(var r=0;r<Dm;r++){var s=th[r],o=s===\"\",a=o?n:s+n.charAt(0).toUpperCase()+n.slice(1);if(a in oo.style||o){if(o&&n===\"clipPath\"&&Ho.has(n))return;zu.set(n,a),Du(n,(o?\"\":\"-\")+Ps(a))}}}(e):function(n){Du(n,n)}(e)),i.get(e)||e},jm=[\"\",\"X\",\"Y\",\"Z\"],Fo=[\"translate\",\"scale\",\"rotate\",\"skew\",\"transformPerspective\"].reduce(function(e,t){return jm.reduce(function(i,n){return i.push(t+n),i},e)},[\"x\",\"y\",\"z\"]),Bm=Fo.reduce(function(e,t){return e[t]=!0,e},{});function rl(e){return Bm[e]===!0}function Rm(e,t){return Fo.indexOf(e)-Fo.indexOf(t)}var _m=new Set([\"originX\",\"originY\",\"originZ\"]);function Om(e){return _m.has(e)}var Lu=Xr(Xr({},Ns),{transform:Math.round}),Vm={color:rt,backgroundColor:rt,outlineColor:rt,fill:rt,stroke:rt,borderColor:rt,borderTopColor:rt,borderRightColor:rt,borderBottomColor:rt,borderLeftColor:rt,borderWidth:V,borderTopWidth:V,borderRightWidth:V,borderBottomWidth:V,borderLeftWidth:V,borderRadius:V,radius:V,borderTopLeftRadius:V,borderTopRightRadius:V,borderBottomRightRadius:V,borderBottomLeftRadius:V,width:V,maxWidth:V,height:V,maxHeight:V,size:V,top:V,right:V,bottom:V,left:V,padding:V,paddingTop:V,paddingRight:V,paddingBottom:V,paddingLeft:V,margin:V,marginTop:V,marginRight:V,marginBottom:V,marginLeft:V,rotate:qt,rotateX:qt,rotateY:qt,rotateZ:qt,scale:cr,scaleX:cr,scaleY:cr,scaleZ:cr,skew:qt,skewX:qt,skewY:qt,distance:V,translateX:V,translateY:V,translateZ:V,x:V,y:V,z:V,perspective:V,opacity:yn,originX:Nu,originY:Nu,originZ:V,zIndex:Lu,fillOpacity:yn,strokeOpacity:yn,numOctaves:Lu},sl=function(e){return Vm[e]},Um=function(e,t){return t&&typeof e==\"number\"?t.transform(e):e},ju=new Set([\"scrollLeft\",\"scrollTop\"]),Wm=new Set([\"scrollLeft\",\"scrollTop\",\"transform\"]),$m={x:\"translateX\",y:\"translateY\",z:\"translateZ\"};function Bu(e){return typeof e==\"function\"}function Hm(e,t,i,n,r,s,o,a){t===void 0&&(t=!0),i===void 0&&(i={}),n===void 0&&(n={}),r===void 0&&(r={}),s===void 0&&(s=[]),o===void 0&&(o=!1),a===void 0&&(a=!0);var l=!0,u=!1,d=!1;for(var p in e){var m=e[p],v=sl(p),S=Um(m,v);rl(p)?(u=!0,n[p]=S,s.push(p),l&&(v.default&&m!==v.default||!v.default&&m!==0)&&(l=!1)):Om(p)?(r[p]=S,d=!0):Wm.has(p)&&Bu(S)||(i[ih(p,o)]=S)}return(u||typeof e.transform==\"function\")&&(i.transform=function(y,h,c,f,g,w){w===void 0&&(w=!0);var x=\"\",C=!1;c.sort(Rm);for(var z=c.length,D=0;D<z;D++){var T=c[D];x+=($m[T]||T)+\"(\"+h[T]+\") \",C=T===\"z\"||C}return!C&&g?x+=\"translateZ(0)\":x=x.trim(),Bu(y.transform)?x=y.transform(h,f?\"\":x):w&&f&&(x=\"none\"),x}(e,n,s,l,t,a)),d&&(i.transformOrigin=(r.originX||\"50%\")+\" \"+(r.originY||\"50%\")+\" \"+(r.originZ||0)),i}function ol(e){var t=e===void 0?{}:e,i=t.enableHardwareAcceleration,n=i===void 0||i,r=t.isDashCase,s=r===void 0||r,o=t.allowTransformNone,a=o===void 0||o,l={},u={},d={},p=[];return function(m){return p.length=0,Hm(m,n,l,u,d,p,s,a),l}}var Fm=nl({onRead:function(e,t){var i=t.element,n=t.preparseOutput,r=sl(e);if(rl(e))return r&&r.default||0;if(ju.has(e))return i[e];var s=window.getComputedStyle(i,null).getPropertyValue(ih(e,!0))||0;return n&&r&&r.test(s)&&r.parse?r.parse(s):s},onRender:function(e,t,i){var n=t.element,r=t.buildStyles,s=t.hasCSSVariable;if(Object.assign(n.style,r(e)),s)for(var o=i.length,a=0;a<o;a++){var l=i[a];l.startsWith(\"--\")&&n.style.setProperty(l,e[l])}i.indexOf(\"scrollLeft\")!==-1&&(n.scrollLeft=e.scrollLeft),i.indexOf(\"scrollTop\")!==-1&&(n.scrollTop=e.scrollTop)},uncachedValues:ju}),nh=new Set([\"baseFrequency\",\"diffuseConstant\",\"kernelMatrix\",\"kernelUnitLength\",\"keySplines\",\"keyTimes\",\"limitingConeAngle\",\"markerHeight\",\"markerWidth\",\"numOctaves\",\"targetX\",\"targetY\",\"surfaceScale\",\"specularConstant\",\"specularExponent\",\"stdDeviation\",\"tableValues\"]),lo=function(e,t){return V.transform(e*t)},Qm={x:0,y:0,width:0,height:0};function Ru(e,t,i){return typeof e==\"string\"?e:V.transform(t+i*e)}var rh={enableHardwareAcceleration:!1,isDashCase:!1};function Zm(e,t,i,n,r,s){t===void 0&&(t=Qm),n===void 0&&(n=ol(rh)),r===void 0&&(r={style:{}}),s===void 0&&(s=!0);var o=e.attrX,a=e.attrY,l=e.originX,u=e.originY,d=e.pathLength,p=e.pathSpacing,m=p===void 0?1:p,v=e.pathOffset,S=v===void 0?0:v,y=n(qa(e,[\"attrX\",\"attrY\",\"originX\",\"originY\",\"pathLength\",\"pathSpacing\",\"pathOffset\"]));for(var h in y)h===\"transform\"?r.style.transform=y[h]:r[s&&!nh.has(h)?Ps(h):h]=y[h];return(l!==void 0||u!==void 0||y.transform)&&(r.style.transformOrigin=function(c,f,g){return Ru(f,c.x,c.width)+\" \"+Ru(g,c.y,c.height)}(t,l!==void 0?l:.5,u!==void 0?u:.5)),o!==void 0&&(r.x=o),a!==void 0&&(r.y=a),i!==void 0&&d!==void 0&&(r[s?\"stroke-dashoffset\":\"strokeDashoffset\"]=lo(-S,i),r[s?\"stroke-dasharray\":\"strokeDasharray\"]=lo(d,i)+\" \"+lo(m,i)),r}function Gm(e,t,i){i===void 0&&(i=!0);var n={style:{}},r=ol(rh);return function(s){return Zm(s,e,t,r,n,i)}}var Ym=nl({onRead:function(e,t){var i=t.element;if(rl(e=nh.has(e)?e:Ps(e))){var n=sl(e);return n&&n.default||0}return i.getAttribute(e)},onRender:function(e,t){var i=t.element,n=(0,t.buildAttrs)(e);for(var r in n)r===\"style\"?Object.assign(i.style,n.style):i.setAttribute(r,n[r])}}),Xm=nl({useCache:!1,onRead:function(e){return e===\"scrollTop\"?window.pageYOffset:window.pageXOffset},onRender:function(e){var t=e.scrollTop,i=t===void 0?0:t,n=e.scrollLeft,r=n===void 0?0:n;return window.scrollTo(r,i)}}),Qo=new WeakMap,Jm=function(e,t){var i,n,r,s;return e===window?i=Xm(e):function(o){return o instanceof HTMLElement||typeof o.click==\"function\"}(e)?i=function(o,a){a===void 0&&(a={});var l=a.enableHardwareAcceleration,u=a.allowTransformNone,d=qa(a,[\"enableHardwareAcceleration\",\"allowTransformNone\"]);return Fm(Xr({element:o,buildStyles:ol({enableHardwareAcceleration:l,allowTransformNone:u}),preparseOutput:!0},d))}(e,t):function(o){return o instanceof SVGElement||\"ownerSVGElement\"in o}(e)&&(r=function(o){try{return function(a){return typeof a.getBBox==\"function\"?a.getBBox():a.getBoundingClientRect()}(o)}catch{return{x:0,y:0,width:0,height:0}}}(n=e),s=function(o){return o.tagName===\"path\"}(n)&&n.getTotalLength?n.getTotalLength():void 0,i=Ym({element:n,buildAttrs:Gm(r,s)})),Qo.set(e,i),i};function Km(e,t){return function(i,n){return Qo.has(i)?Qo.get(i):Jm(i,n)}(typeof e==\"string\"?document.querySelector(e):e,t)}var ot=function(e,t,i,n){var r=i?i.call(n,e,t):void 0;if(r!==void 0)return!!r;if(e===t)return!0;if(typeof e!=\"object\"||!e||typeof t!=\"object\"||!t)return!1;var s=Object.keys(e),o=Object.keys(t);if(s.length!==o.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),l=0;l<s.length;l++){var u=s[l];if(!a(u))return!1;var d=e[u],p=t[u];if((r=i?i.call(n,d,p,u):void 0)===!1||r===void 0&&d!==p)return!1}return!0};const sh=\"!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\",qm=sh.length,_u=Array(20),en=()=>{for(let e=0;e<20;e++)_u[e]=sh.charAt(Math.random()*qm);return _u.join(\"\")};class Jr{constructor(){this.disposers=new Map}add(t,i=en()){return this.flush(i),this.disposers.set(i,t()),i}addDisposer(t,i=en()){return this.flush(i),this.disposers.set(i,t),i}addEventListener(t,i,n,r,s=en()){return this.add(()=>(t.addEventListener(i,n,r),()=>t.removeEventListener(i,n,r)),s),s}setTimeout(t,i,n=en()){return this.add(()=>{const r=window.setTimeout(()=>{this.remove(n),t()},i);return()=>window.clearTimeout(r)},n)}setInterval(t,i,n=en()){return this.add(()=>{const r=window.setInterval(t,i);return()=>window.clearInterval(r)},n)}remove(t){const i=this.disposers.get(t);return this.disposers.delete(t),i}flush(t){const i=this.remove(t);if(i)try{i()}catch(n){console.error(n)}}flushAll(){this.disposers.forEach(t=>{try{t()}catch(i){console.error(i)}}),this.disposers.clear()}}var ev=Object.defineProperty,uo=( true&&__webpack_require__(80782),(e,t,i)=>{return s=i,(r=typeof t!=\"symbol\"?t+\"\":t)in(n=e)?ev(n,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[r]=s,i;var n,r,s});class Dn{constructor(t,i){uo(this,\"_value\"),uo(this,\"_beforeDestroys\"),uo(this,\"_subscribers\"),this._value=t,i&&(this.compare=i)}get value(){return this._value}setValue(t,i){if(!this.compare(t,this._value)){const n=this._value;this._value=t,this._subscribers&&this._subscribers.forEach(r=>r(t,n,i))}}reaction(t){return this._subscribers||(this._subscribers=new Set),this._subscribers.add(t),()=>{this._subscribers&&this._subscribers.delete(t)}}subscribe(t,i){const n=this.reaction(t);return t(this._value,void 0,i),n}derive(t,i,n){const r=new Dn(t(this.value,void 0,n),i),s=this.reaction((o,a,l)=>{r.setValue(t(o,a,l))});return r.addBeforeDestroy(s),r}destroy(){this._beforeDestroys&&(this._beforeDestroys.forEach(t=>t()),this._beforeDestroys.clear()),this._subscribers&&this._subscribers.clear()}addBeforeDestroy(t){return this._beforeDestroys||(this._beforeDestroys=new Set),this._beforeDestroys.add(t),()=>{this._beforeDestroys&&this._beforeDestroys.delete(t)}}compare(t,i){return t===i}}function oh(e,t){Object.keys(t).forEach(i=>{(function(n,r,s){var o;Object.defineProperties(n,{[r]:{get:()=>s.value},[`_${r}$`]:{value:s},[`set${o=r,o[0].toUpperCase()+o.slice(1)}`]:{value:(a,l)=>s.setValue(a,l)}})})(e,i,t[i])})}function ah(e){const t=i=>{const n=e.addDisposer(()=>{i.destroy()});return i.addBeforeDestroy(()=>{e.remove(n)}),i};return{bindSideEffect:t,combine:(i,n,r,s)=>t(function(o,a,l,u){let d=o.map(m=>m.value);const p=new Dn(a(d,void 0,u),l);return o.forEach((m,v)=>{const S=m.reaction((y,h,c)=>{const f=d.slice();f[v]=y;const g=d;d=f,p.setValue(a(f,g,c),c)});p.addBeforeDestroy(S)}),p}(i,n,r,s)),createVal:(i,n)=>t(new Dn(i,n))}}var Kr,co,te,ho,ae,ge,Se,po,Je,Pt;(co=Kr||(Kr={})).Light=\"light\",co.Dark=\"dark\",co.Auto=\"auto\",(ho=te||(te={})).Normal=\"normal\",ho.Minimized=\"minimized\",ho.Maximized=\"maximized\",(ge=ae||(ae={})).DarkMode=\"dark_mode\",ge.PrefersColorScheme=\"prefers_color_scheme\",ge.Close=\"close\",ge.Focus=\"focus\",ge.Blur=\"blur\",ge.Move=\"move\",ge.Resize=\"resize\",ge.IntrinsicMove=\"intrinsic_move\",ge.IntrinsicResize=\"intrinsic_resize\",ge.VisualResize=\"visual_resize\",ge.ZIndex=\"z_index\",ge.State=\"state\",ge.Minimized=\"minimized\",ge.Maximized=\"maximized\",ge.Readonly=\"readonly\",ge.Destroyed=\"destroyed\",(po=Se||(Se={})).Close=\"close\",po.Maximize=\"maximize\",po.Minimize=\"minimize\",(Pt=Je||(Je={})).North=\"n\",Pt.South=\"s\",Pt.West=\"w\",Pt.East=\"e\",Pt.NorthWest=\"nw\",Pt.NorthEast=\"ne\",Pt.SouthEast=\"se\",Pt.SouthWest=\"sw\";function Ie(e,t,i){return Math.min(Math.max(e,t),i)}function Pi(e){e.stopPropagation(),e.cancelable&&e.preventDefault()}function Ou(e){return e.touches?e.touches[0]:e}function tv(){return Date.now().toString().slice(6)+Math.random().toString().slice(2,8)}let iv=1;function nv(){return\"New Box \"+iv++}function rv(e){return Boolean(e)}function dr(e){return!e}class lh{constructor({readonly:t=!1,title:i,buttons:n,onEvent:r,onDragStart:s,namespace:o=\"telebox\",state:a=te.Normal}={}){this.$btns=[],this.sideEffect=new Jr,this.lastTitleBarClick={timestamp:0,clientX:-100,clientY:-100},this.handleTitleBarClick=l=>{var u;if(this.readonly||l.button!==0||(u=l.target.dataset)!=null&&u.teleTitleBarNoDblClick)return;Pi(l);const d=Date.now();d-this.lastTitleBarClick.timestamp<=500?Math.abs(l.clientX-this.lastTitleBarClick.clientX)<=5&&Math.abs(l.clientY-this.lastTitleBarClick.clientY)<=5&&this.onEvent&&this.onEvent({type:Se.Maximize}):this.onDragStart&&this.onDragStart(l),this.lastTitleBarClick.timestamp=d,this.lastTitleBarClick.clientX=l.clientX,this.lastTitleBarClick.clientY=l.clientY},this.lastTitleBarTouch={timestamp:0,clientX:-100,clientY:-100},this.handleTitleBarTouch=l=>{var u;if(this.readonly||(u=l.target.dataset)!=null&&u.teleTitleBarNoDblClick)return;Pi(l);const d=Date.now(),{clientX:p=this.lastTitleBarTouch.clientX+100,clientY:m=this.lastTitleBarTouch.clientY+100}=l.touches[0]||{};d-this.lastTitleBarTouch.timestamp<=500?Math.abs(p-this.lastTitleBarTouch.clientX)<=10&&Math.abs(m-this.lastTitleBarTouch.clientY)<=10&&this.onEvent&&this.onEvent({type:Se.Maximize}):this.onDragStart&&this.onDragStart(l),this.lastTitleBarTouch.timestamp=d,this.lastTitleBarTouch.clientX=p,this.lastTitleBarTouch.clientY=m},this.readonly=t,this.onEvent=r,this.onDragStart=s,this.namespace=o,this.title=i,this.state=a,this.buttons=n||[{type:Se.Minimize,iconClassName:this.wrapClassName(\"titlebar-icon-minimize\")},{type:Se.Maximize,iconClassName:this.wrapClassName(\"titlebar-icon-maximize\"),isActive:l=>l===te.Maximized},{type:Se.Close,iconClassName:this.wrapClassName(\"titlebar-icon-close\")}],this.$dragArea=this.renderDragArea()}setTitle(t){this.title=t,this.$title&&(this.$title.textContent=t,this.$title.title=t)}setState(t){this.state!==t&&(this.state=t,this.buttons.forEach((i,n)=>{i.isActive&&this.$btns[n].classList.toggle(\"is-active\",i.isActive(t))}))}setReadonly(t){this.readonly!==t&&(this.readonly=t)}render(){if(!this.$titleBar){this.$titleBar=document.createElement(\"div\"),this.$titleBar.className=this.wrapClassName(\"titlebar\");const t=document.createElement(\"div\");t.className=this.wrapClassName(\"title-area\"),t.dataset.teleBoxHandle=\"dh\",this.$title=document.createElement(\"h1\"),this.$title.className=this.wrapClassName(\"title\"),this.$title.dataset.teleBoxHandle=\"dh\",this.title&&(this.$title.textContent=this.title,this.$title.title=this.title),t.appendChild(this.$title),t.appendChild(this.$dragArea);const i=document.createElement(\"div\");i.className=this.wrapClassName(\"titlebar-btns\"),this.buttons.forEach(({iconClassName:n,isActive:r},s)=>{const o=String(s),a=document.createElement(\"button\");a.className=`${this.wrapClassName(\"titlebar-btn\")} ${n}`,a.dataset.teleTitleBarBtnIndex=o,a.dataset.teleTitleBarNoDblClick=\"true\",r&&a.classList.toggle(\"is-active\",r(this.state)),this.$btns.push(a),i.appendChild(a)}),this.sideEffect.addEventListener(i,\"click\",n=>{var r;if(this.readonly)return;const s=n.target,o=Number((r=s.dataset)==null?void 0:r.teleTitleBarBtnIndex);if(!Number.isNaN(o)&&o<this.buttons.length){Pi(n);const a=this.buttons[o];this.onEvent&&this.onEvent({type:a.type,value:a.value})}}),this.$titleBar.appendChild(t),this.$titleBar.appendChild(i)}return this.$titleBar}renderDragArea(){const t=document.createElement(\"div\");return t.className=this.wrapClassName(\"drag-area\"),t.dataset.teleBoxHandle=\"dh\",this.sideEffect.addEventListener(t,\"mousedown\",this.handleTitleBarClick),this.sideEffect.addEventListener(t,\"touchstart\",this.handleTitleBarTouch,{passive:!0}),t}dragHandle(){return this.$titleBar}wrapClassName(t){return`${this.namespace}-${t}`}destroy(){this.sideEffect.flushAll(),this.$titleBar&&(this.$titleBar=void 0,this.$title=void 0,this.$btns.length=0,this.onDragStart=void 0,this.onEvent=void 0)}}class sv{constructor({id:t=tv(),title:i=nv(),prefersColorScheme:n=Kr.Light,darkMode:r,visible:s=!0,width:o=.5,height:a=.5,minWidth:l=0,minHeight:u=0,x:d=.1,y:p=.1,minimized:m=!1,maximized:v=!1,readonly:S=!1,resizable:y=!0,draggable:h=!0,fence:c=!0,fixRatio:f=!1,focus:g=!1,zIndex:w=100,namespace:x=\"telebox\",titleBar:C,content:z,footer:D,styles:T,containerRect:b={x:0,y:0,width:window.innerWidth,height:window.innerHeight},collectorRect:j}={}){this._renderSideEffect=new Jr,this.handleTrackStart=P=>{var Q;return(Q=this._handleTrackStart)==null?void 0:Q.call(this,P)},this._sideEffect=new Jr,this._valSideEffectBinder=ah(this._sideEffect);const{combine:B,createVal:L}=this._valSideEffectBinder;this.id=t,this.namespace=x,this.events=new Vo,this._delegateEvents=new Vo;const Y=L(n);Y.reaction((P,Q,O)=>{O||this.events.emit(ae.PrefersColorScheme,P)});const F=L(Boolean(r));r==null&&Y.subscribe((P,Q,O)=>{this._sideEffect.add(()=>{if(P===\"auto\"){const ue=window.matchMedia(\"(prefers-color-scheme: dark)\");if(ue){F.setValue(ue.matches,O);const lr=ur=>{F.setValue(ur.matches,O)};return ue.addListener(lr),()=>ue.removeListener(lr)}return Vu}return F.setValue(P===\"dark\",O),Vu},\"prefers-color-scheme\")}),F.reaction((P,Q,O)=>{O||this.events.emit(ae.DarkMode,P)});const At=L(b,ot),Qe=L(j,ot),Tt=L(i),kt=L(s);kt.reaction((P,Q,O)=>{O||P||this.events.emit(ae.Close)});const Nt=L(S);Nt.reaction((P,Q,O)=>{O||this.events.emit(ae.Readonly,P)});const qi=L(y),or=L(h),Ks=L(c),I=L(f),N=L(w);N.reaction((P,Q,O)=>{O||this.events.emit(ae.ZIndex,P)});const $=L(g);$.reaction((P,Q,O)=>{O||this.events.emit(P?ae.Focus:ae.Blur)});const G=L(m);G.reaction((P,Q,O)=>{O||this.events.emit(ae.Minimized,P)});const X=L(v);X.reaction((P,Q,O)=>{O||this.events.emit(ae.Maximized,P)});const nt=B([G,X],([P,Q])=>P?te.Minimized:Q?te.Maximized:te.Normal);nt.reaction((P,Q,O)=>{O||this.events.emit(ae.State,P)});const Ve=L({width:Ie(l,0,1),height:Ie(u,0,1)},ot),Ze=L({width:Ie(o,Ve.value.width,1),height:Ie(a,Ve.value.height,1)},ot);Ve.reaction((P,Q,O)=>{Ze.setValue({width:Ie(o,P.width,1),height:Ie(a,P.height,1)},O)}),Ze.reaction((P,Q,O)=>{O||this.events.emit(ae.IntrinsicResize,P)});const Ue=B([Ze,X],([P,Q])=>Q?{width:1,height:1}:P,ot);Ue.reaction((P,Q,O)=>{O||this.events.emit(ae.Resize,P)});const hu=B([Ue,G,At,Qe],([P,Q,O,ue])=>Q&&ue?{width:ue.width/P.width/O.width,height:ue.height/P.height/O.height}:P,ot);hu.reaction((P,Q,O)=>{O||this.events.emit(ae.VisualResize,P)});const qs=L({x:Ie(d,0,1),y:Ie(p,0,1)},ot);qs.reaction((P,Q,O)=>{O||this.events.emit(ae.IntrinsicMove,P)});const ar=B([qs,Ze,At,Qe,G,X],([P,Q,O,ue,lr,ur])=>lr&&ue?ur?{x:(ue.x+ue.width/2)/O.width-.5,y:(ue.y+ue.height/2)/O.height-.5}:{x:(ue.x+ue.width/2)/O.width-Q.width/2,y:(ue.y+ue.height/2)/O.height-Q.height/2}:ur?{x:0,y:0}:P,ot);ar.reaction((P,Q,O)=>{O||this.events.emit(ae.Move,P)}),this.titleBar=C||new lh({readonly:Nt.value,title:Tt.value,namespace:this.namespace,onDragStart:P=>{var Q;return(Q=this._handleTrackStart)==null?void 0:Q.call(this,P)},onEvent:P=>{if(this._delegateEvents.listeners.length>0)this._delegateEvents.emit(P.type);else switch(P.type){case Se.Maximize:X.setValue(!X.value);break;case Se.Minimize:G.setValue(!0);break;case Se.Close:kt.setValue(!1);break;default:console.error(\"Unsupported titleBar event:\",P)}}}),Nt.reaction(P=>{this.titleBar.setReadonly(P)});const tg=L(z),ig=L(D),ng=L(T);oh(this,{prefersColorScheme:Y,darkMode:F,containerRect:At,collectorRect:Qe,title:Tt,visible:kt,readonly:Nt,resizable:qi,draggable:or,fence:Ks,fixRatio:I,focus:$,zIndex:N,minimized:G,maximized:X,$userContent:tg,$userFooter:ig,$userStyles:ng}),this._state$=nt,this._minSize$=Ve,this._size$=Ue,this._intrinsicSize$=Ze,this._visualSize$=hu,this._coord$=ar,this._intrinsicCoord$=qs,this.fixRatio&&this.transform(ar.value.x,ar.value.y,Ue.value.width,Ue.value.height,!0),this.$box=this.render()}get darkMode(){return this._darkMode$.value}get state(){return this._state$.value}setState(t,i=!1){switch(t){case te.Maximized:this.setMinimized(!1,i),this.setMaximized(!0,i);break;case te.Minimized:this.setMinimized(!0,i),this.setMaximized(!1,i);break;default:this.setMinimized(!1,i),this.setMaximized(!1,i)}return this}get minWidth(){return this._minSize$.value.width}get minHeight(){return this._minSize$.value.height}setMinWidth(t,i=!1){return this._minSize$.setValue({width:t,height:this.minHeight},i),this}setMinHeight(t,i=!1){return this._minSize$.setValue({width:this.minWidth,height:t},i),this}get intrinsicWidth(){return this._intrinsicSize$.value.width}get intrinsicHeight(){return this._intrinsicSize$.value.height}resize(t,i,n=!1){return this._intrinsicSize$.setValue({width:t,height:i},n),this}get width(){return this._size$.value.width}get height(){return this._size$.value.height}get absoluteWidth(){return this.width*this.containerRect.width}get absoluteHeight(){return this.height*this.containerRect.height}get visualWidth(){return this._visualSize$.value.width}get visualHeight(){return this._visualSize$.value.height}get intrinsicX(){return this._intrinsicCoord$.value.x}get intrinsicY(){return this._intrinsicCoord$.value.y}move(t,i,n=!1){return this._intrinsicCoord$.setValue({x:t,y:i},n),this}get x(){return this._coord$.value.x}get y(){return this._coord$.value.y}transform(t,i,n,r,s=!1){if(this.fixRatio){const o=this.intrinsicHeight/this.intrinsicWidth*n;i!==this.intrinsicY&&(i-=o-r),r=o}return i<0&&(i=0,r>this.intrinsicHeight&&(r=this.intrinsicHeight)),this._intrinsicCoord$.setValue({x:n>=this.minWidth?t:this.intrinsicX,y:r>=this.minHeight?i:this.intrinsicY},s),this._intrinsicSize$.setValue({width:Ie(n,this.minWidth,1),height:Ie(r,this.minHeight,1)},s),this}mount(t){return t.appendChild(this.render()),this}unmount(){return this.$box&&this.$box.remove(),this}mountContent(t){return this.set$userContent(t),this}unmountContent(){return this.set$userContent(void 0),this}mountFooter(t){return this.set$userFooter(t),this}unmountFooter(){return this.set$userFooter(void 0),this}getUserStyles(){return this.$userStyles}mountStyles(t){let i;return typeof t==\"string\"?(i=document.createElement(\"style\"),i.textContent=t):i=t,this.set$userStyles(i),this}unmountStyles(){return this.set$userStyles(void 0),this}render(t){if(t){if(t===this.$box)return this.$box;this.$box=t}else{if(this.$box)return this.$box;this.$box=document.createElement(\"div\")}this._renderSideEffect.flushAll(),this.$box.classList.add(this.wrapClassName(\"box\"));const i=(p,m,v,S=rv)=>this._renderSideEffect.add(()=>{const y=this.wrapClassName(v);return m.subscribe(h=>{p.classList.toggle(y,S(h))})});i(this.$box,this._readonly$,\"readonly\"),i(this.$box,this._draggable$,\"no-drag\",dr),i(this.$box,this._resizable$,\"no-resize\",dr),i(this.$box,this._focus$,\"blur\",dr),i(this.$box,this._darkMode$,\"color-scheme-dark\"),i(this.$box,this._darkMode$,\"color-scheme-light\",dr),this._renderSideEffect.add(()=>{const p=this.wrapClassName(\"minimized\"),m=this.wrapClassName(\"maximized\"),v=\"box-maximized-timer\";return this._state$.subscribe(S=>{this.$box.classList.toggle(p,S===te.Minimized),S===te.Maximized?(this._renderSideEffect.flush(v),this.$box.classList.toggle(m,!0)):this._renderSideEffect.setTimeout(()=>{this.$box.classList.toggle(m,!1)},0,v)})}),this._renderSideEffect.add(()=>this._visible$.subscribe(p=>{this.$box.style.display=p?\"block\":\"none\"})),this._renderSideEffect.add(()=>this._zIndex$.subscribe(p=>{this.$box.style.zIndex=String(p)}));const n=Km(this.$box);this.$box.dataset.teleBoxID=this.id,this.$box.style.width=this.absoluteWidth+\"px\",this.$box.style.height=this.absoluteHeight+\"px\";const r=this.x*this.containerRect.width+this.containerRect.x,s=this.y*this.containerRect.height+this.containerRect.y;this.$box.style.transform=`translate(${r-10}px,${s-10}px)`,this._valSideEffectBinder.combine([this._coord$,this._size$,this._minimized$,this._containerRect$,this._collectorRect$],([p,m,v,S,y])=>{const h=m.width*S.width,c=m.height*S.height;return{width:h,height:c,x:p.x*S.width,y:p.y*S.height,scaleX:v&&y?y.width/h:1,scaleY:v&&y?y.height/c:1}},ot).subscribe(p=>{n.set(p)}),n.set({x:r,y:s});const o=document.createElement(\"div\");o.className=this.wrapClassName(\"box-main\"),this.$box.appendChild(o);const a=document.createElement(\"div\");a.className=this.wrapClassName(\"titlebar-wrap\"),a.appendChild(this.titleBar.render()),this.$titleBar=a;const l=document.createElement(\"div\");l.className=this.wrapClassName(\"content-wrap\");const u=document.createElement(\"div\");u.className=this.wrapClassName(\"content\")+\" tele-fancy-scrollbar\",this.$content=u,this._renderSideEffect.add(()=>{let p;return this._$userStyles$.subscribe(m=>{p&&p.remove(),p=m,m&&l.appendChild(m)})}),this._renderSideEffect.add(()=>{let p;return this._$userContent$.subscribe(m=>{p&&p.remove(),p=m,m&&u.appendChild(m)})}),l.appendChild(u);const d=document.createElement(\"div\");return d.className=this.wrapClassName(\"footer-wrap\"),this.$footer=d,this._renderSideEffect.add(()=>{let p;return this._$userFooter$.subscribe(m=>{p&&p.remove(),p=m,m&&d.appendChild(m)})}),o.appendChild(a),o.appendChild(l),o.appendChild(d),this._renderResizeHandlers(),this.$box}_renderResizeHandlers(){const t=document.createElement(\"div\");t.className=this.wrapClassName(\"resize-handles\"),Object.values(Je).forEach(y=>{const h=document.createElement(\"div\");h.className=this.wrapClassName(y)+\" \"+this.wrapClassName(\"resize-handle\"),h.dataset.teleBoxHandle=y,t.appendChild(h)}),this.$box.appendChild(t);const i=\"handle-tracking-listener\",n=this.wrapClassName(\"transforming\");let r,s,o=0,a=0,l=0,u=0,d=0,p=0;const m=y=>{if(this.state!==te.Normal)return;Pi(y);let{pageX:h,pageY:c}=Ou(y);c<0&&(c=0);const f=(h-d)/this.containerRect.width,g=(c-p)/this.containerRect.height;switch(s){case Je.North:this.transform(this.x,a+g,this.width,u-g);break;case Je.South:this.transform(this.x,this.y,this.width,u+g);break;case Je.West:this.transform(o+f,this.y,l-f,this.height);break;case Je.East:this.transform(this.x,this.y,l+f,this.height);break;case Je.NorthWest:this.transform(o+f,a+g,l-f,u-g);break;case Je.NorthEast:this.transform(this.x,a+g,l+f,u-g);break;case Je.SouthEast:this.transform(this.x,this.y,l+f,u+g);break;case Je.SouthWest:this.transform(o+f,this.y,l-f,u+g);break;default:if(this.fence)this.move(Ie(o+f,0,1-this.width),Ie(a+g,0,1-this.height));else{const w=20/this.containerRect.width,x=20/this.containerRect.height;this.move(Ie(o+f,w-this.width,1-w),Ie(a+g,0,1-x))}}},v=y=>{s=void 0,r&&(Pi(y),this.$box.classList.toggle(n,!1),this._sideEffect.flush(i),r.remove())},S=y=>{var h;if(this.readonly||y.button!=null&&y.button!==0||!this.draggable||s||this.state!==te.Normal)return;const c=y.target;if((h=c.dataset)!=null&&h.teleBoxHandle){Pi(y),o=this.x,a=this.y,l=this.width,u=this.height,{pageX:d,pageY:p}=Ou(y),s=c.dataset.teleBoxHandle,r||(r=document.createElement(\"div\"));const f=s?this.wrapClassName(`cursor-${s}`):\"\";r.className=this.wrapClassName(\"track-mask\"+(f?` ${f}`:\"\")),this.$box.appendChild(r),this.$box.classList.add(n),this._sideEffect.add(()=>(window.addEventListener(\"mousemove\",m),window.addEventListener(\"touchmove\",m,{passive:!1}),window.addEventListener(\"mouseup\",v),window.addEventListener(\"touchend\",v,{passive:!1}),window.addEventListener(\"touchcancel\",v,{passive:!1}),()=>{window.removeEventListener(\"mousemove\",m),window.removeEventListener(\"touchmove\",m),window.removeEventListener(\"mouseup\",v),window.removeEventListener(\"touchend\",v),window.removeEventListener(\"touchcancel\",v)}),i)}};this._handleTrackStart=S,this._sideEffect.addEventListener(t,\"mousedown\",S,{},\"box-resizeHandles-mousedown\"),this._sideEffect.addEventListener(t,\"touchstart\",S,{passive:!1},\"box-resizeHandles-touchstart\")}destroy(){this.$box.remove(),this.events.emit(ae.Destroyed),this._sideEffect.flushAll(),this._renderSideEffect.flushAll(),this.events.removeAllListeners(),this._delegateEvents.removeAllListeners()}wrapClassName(t){return`${this.namespace}-${t}`}}function Vu(){}var oe,xe;class uh{constructor({visible:t=!0,readonly:i=!1,darkMode:n=!1,namespace:r=\"telebox\",styles:s={},onClick:o}={}){this.handleCollectorClick=()=>{!this._readonly&&this.onClick&&this.onClick()},this._visible=t,this._readonly=i,this._darkMode=n,this.namespace=r,this.styles=s,this.onClick=o}get visible(){return this._visible}get readonly(){return this._readonly}get darkMode(){return this._darkMode}mount(t){return t.appendChild(this.render()),this}unmount(){return this.$collector&&this.$collector.remove(),this}setVisible(t){return this._visible!==t&&(this._visible=t,this.$collector&&this.$collector.classList.toggle(this.wrapClassName(\"collector-visible\"),t)),this}setReadonly(t){return this._readonly!==t&&(this._readonly=t,this.$collector&&this.$collector.classList.toggle(this.wrapClassName(\"collector-readonly\"),t)),this}setDarkMode(t){return this._darkMode!==t&&(this._darkMode=t,this.$collector&&(this.$collector.classList.toggle(this.wrapClassName(\"color-scheme-dark\"),t),this.$collector.classList.toggle(this.wrapClassName(\"color-scheme-light\"),!t))),this}setStyles(t){if(Object.assign(this.styles,t),this.$collector){const i=this.$collector;Object.keys(t).forEach(n=>{const r=t[n];r!=null&&(i.style[n]=r)})}return this}render(){return this.$collector||(this.$collector=document.createElement(\"button\"),this.$collector.className=this.wrapClassName(\"collector\"),this.$collector.style.backgroundImage=\"url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxOCAxNiI+CiAgICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxwYXRoIHN0cm9rZT0iIzdCODhBMCIgc3Ryb2tlLXdpZHRoPSIxLjQiIGQ9Ik0uNyAxLjJoMTYuNnYxMy42SC43eiIgLz4KICAgICAgICA8cGF0aCBmaWxsPSIjN0I4OEEwIiBkPSJNNCA1LjVoNnYxLjRINHpNNCA5LjVoMTB2MS40SDR6IiAvPgogICAgPC9nPgo8L3N2Zz4K')\",this.$collector.addEventListener(\"click\",this.handleCollectorClick),this._visible&&this.$collector.classList.add(this.wrapClassName(\"collector-visible\")),this._readonly&&this.$collector.classList.add(this.wrapClassName(\"collector-readonly\")),this.$collector.classList.add(this.wrapClassName(this._darkMode?\"color-scheme-dark\":\"color-scheme-light\")),this.setStyles(this.styles)),this.$collector}destroy(){this.$collector&&(this.$collector.removeEventListener(\"click\",this.handleCollectorClick),this.$collector.remove(),this.$collector=void 0),this.onClick=void 0}wrapClassName(t){return`${this.namespace}-${t}`}}(xe=oe||(oe={})).Focused=\"focused\",xe.Blurred=\"blurred\",xe.Created=\"created\",xe.Removed=\"removed\",xe.State=\"state\",xe.Maximized=\"maximized\",xe.Minimized=\"minimized\",xe.Move=\"move\",xe.Resize=\"resize\",xe.IntrinsicMove=\"intrinsic_move\",xe.IntrinsicResize=\"intrinsic_resize\",xe.VisualResize=\"visual_resize\",xe.ZIndex=\"z_index\",xe.PrefersColorScheme=\"prefers_color_scheme\",xe.DarkMode=\"dark_mode\";class ov extends lh{constructor(t){super(t),this.boxes=t.boxes,this.focusedBox=t.focusedBox,this.containerRect=t.containerRect,this.darkMode=t.darkMode}focusBox(t){var i;if(!this.focusedBox||this.focusedBox!==t){if(this.$titles&&this.state===te.Maximized){const{children:n}=this.$titles.firstElementChild;for(let r=n.length-1;r>=0;r-=1){const s=n[r],o=(i=s.dataset)==null?void 0:i.teleBoxID;o&&(t&&o===t.id?s.classList.toggle(this.wrapClassName(\"titles-tab-focus\"),!0):this.focusedBox&&o===this.focusedBox.id&&s.classList.toggle(this.wrapClassName(\"titles-tab-focus\"),!1))}}this.focusedBox=t}}setContainerRect(t){if(this.containerRect=t,this.$titleBar){const{x:i,y:n,width:r}=t;this.$titleBar.style.transform=`translate(${i}px, ${n}px)`,this.$titleBar.style.width=r+\"px\"}}setBoxes(t){this.boxes=t,this.updateTitles()}setState(t){super.setState(t),this.$titleBar&&this.$titleBar.classList.toggle(this.wrapClassName(\"max-titlebar-maximized\"),t===te.Maximized),this.updateTitles()}setReadonly(t){super.setReadonly(t),this.$titleBar&&this.$titleBar.classList.toggle(this.wrapClassName(\"readonly\"),this.readonly)}setDarkMode(t){t!==this.darkMode&&(this.darkMode=t,this.$titleBar&&(this.$titleBar.classList.toggle(this.wrapClassName(\"color-scheme-dark\"),t),this.$titleBar.classList.toggle(this.wrapClassName(\"color-scheme-light\"),!t)))}render(){const t=super.render(),{x:i,y:n,width:r}=this.containerRect;t.style.transform=`translate(${i}px, ${n}px)`,t.style.width=r+\"px\",t.classList.add(this.wrapClassName(\"max-titlebar\")),t.classList.toggle(this.wrapClassName(\"max-titlebar-maximized\"),this.state===te.Maximized),t.classList.toggle(this.wrapClassName(\"readonly\"),this.readonly),t.classList.add(this.wrapClassName(this.darkMode?\"color-scheme-dark\":\"color-scheme-light\"));const s=document.createElement(\"div\");return s.classList.add(this.wrapClassName(\"titles-area\")),t.insertBefore(s,t.firstElementChild),this.updateTitles(),t}destroy(){super.destroy(),this.$titles=void 0,this.boxes.length=0,this.focusedBox=void 0}updateTitles(){this.$titleBar&&this.state===te.Maximized&&(this.$titleBar.classList.toggle(this.wrapClassName(\"max-titlebar-single-title\"),this.boxes.length===1),this.boxes.length===1?this.setTitle(this.boxes[0].title):this.$titleBar.replaceChild(this.renderTitles(),this.$titleBar.firstElementChild))}renderTitles(){this.$titles=document.createElement(\"div\"),this.$titles.className=this.wrapClassName(\"titles\"),this.$titles.addEventListener(\"wheel\",i=>{i.currentTarget.scrollBy({left:i.deltaY>0?250:-250,behavior:\"smooth\"})},{passive:!1});const t=document.createElement(\"div\");return t.className=this.wrapClassName(\"titles-content\"),this.$titles.appendChild(t),this.boxes.forEach(i=>{const n=document.createElement(\"button\");n.className=this.wrapClassName(\"titles-tab\"),n.textContent=i.title,n.dataset.teleBoxID=i.id,n.dataset.teleTitleBarNoDblClick=\"true\",this.focusedBox&&i.id===this.focusedBox.id&&n.classList.add(this.wrapClassName(\"titles-tab-focus\")),t.appendChild(n)}),this.$titles}}class av{constructor({root:t=document.body,prefersColorScheme:i=Kr.Light,minimized:n=!1,maximized:r=!1,fence:s=!0,containerRect:o={x:0,y:0,width:window.innerWidth,height:window.innerHeight},collector:a,namespace:l=\"telebox\",readonly:u=!1}={}){this.events=new Vo,this._sideEffect=new Jr;const{combine:d,createVal:p}=ah(this._sideEffect);this.root=t,this.namespace=l,this.boxes$=p([]),this.topBox$=this.boxes$.derive(b=>{if(b.length>0)return b.reduce((j,B)=>j.zIndex>B.zIndex?j:B)});const m=window.matchMedia(\"(prefers-color-scheme: dark)\"),v=p(!1);m&&(v.setValue(m.matches),this._sideEffect.add(()=>{const b=j=>{v.setValue(j.matches)};return m.addListener(b),()=>m.removeListener(b)}));const S=p(i);S.reaction((b,j,B)=>{this.boxes.forEach(L=>L.setPrefersColorScheme(b,B)),B||this.events.emit(oe.PrefersColorScheme,b)}),this._darkMode$=d([v,S],([b,j])=>j===\"auto\"?b:j===\"dark\"),this._darkMode$.reaction((b,j,B)=>{this.boxes.forEach(L=>L.setDarkMode(b,B)),B||this.events.emit(oe.DarkMode,b)});const y=p(u);y.reaction((b,j,B)=>{this.boxes.forEach(L=>L.setReadonly(b,B))});const h=p(n),c=p(r);c.reaction((b,j,B)=>{this.boxes.forEach(L=>L.setMaximized(b,B)),B||this.events.emit(oe.Maximized,b)});const f=d([h,c],([b,j])=>b?te.Minimized:j?te.Maximized:te.Normal);f.reaction((b,j,B)=>{this.maxTitleBar.setState(b),B||this.events.emit(oe.State,b)});const g=p(s);g.subscribe((b,j,B)=>{this.boxes.forEach(L=>L.setFence(b,B))});const w=p(o,ot);w.reaction((b,j,B)=>{this.boxes.forEach(L=>L.setContainerRect(b,B)),this.maxTitleBar.setContainerRect(b)});const x=p(a===null?null:a||new uh({visible:n,readonly:u,namespace:l}).mount(t));x.subscribe(b=>{b&&(b.setVisible(h.value),b.setReadonly(y.value),b.setDarkMode(this._darkMode$.value),this._sideEffect.add(()=>(b.onClick=()=>{y.value||h.setValue(!1)},()=>b.destroy()),\"collect-onClick\"))}),y.subscribe(b=>{var j;return(j=x.value)==null?void 0:j.setReadonly(b)}),this._darkMode$.subscribe(b=>{var j;(j=x.value)==null||j.setDarkMode(b)});const C=()=>{var b;if((b=x.value)!=null&&b.$collector){const{x:j,y:B,width:L,height:Y}=x.value.$collector.getBoundingClientRect(),F=this.root.getBoundingClientRect();return{x:j-F.x,y:B-F.y,width:L,height:Y}}},z=p(h.value?C():void 0);z.subscribe((b,j,B)=>{this.boxes.forEach(L=>{L.setCollectorRect(b,B)})}),h.subscribe((b,j,B)=>{var L,Y;(L=x.value)==null||L.setVisible(b),b&&((Y=x.value)==null?void 0:Y.$collector)&&z.setValue(C()),this.boxes.forEach(F=>F.setMinimized(b,B)),B||this.events.emit(oe.Minimized,b)});const D=this.wrapClassName(\"titlebar-icon-close\"),T=b=>{var j;if(y.value)return;const B=b.target;if(B.tagName)for(let L=B;L;L=L.parentElement){if(L.classList&&L.classList.contains(D))return;const Y=(j=L.dataset)==null?void 0:j.teleBoxID;if(Y){const F=this.getBox(Y);if(F)return this.focusBox(F),void this.makeBoxTop(F)}}};this._sideEffect.addEventListener(window,\"mousedown\",T,!0),this._sideEffect.addEventListener(window,\"touchstart\",T,!0),this.maxTitleBar=new ov({darkMode:this.darkMode,readonly:y.value,namespace:this.namespace,state:f.value,boxes:this.boxes$.value,containerRect:w.value,onEvent:b=>{switch(b.type){case Se.Maximize:c.setValue(!c.value);break;case Se.Minimize:h.setValue(!0);break;case ae.Close:this.removeTopBox(),this.focusTopBox()}}}),y.subscribe(b=>this.maxTitleBar.setReadonly(b)),this._darkMode$.subscribe(b=>{this.maxTitleBar.setDarkMode(b)}),this.boxes$.reaction(b=>{this.maxTitleBar.setBoxes(b)}),oh(this,{prefersColorScheme:S,containerRect:w,collector:x,collectorRect:z,readonly:y,fence:g,minimized:h,maximized:c}),this._state$=f,this.root.appendChild(this.maxTitleBar.render())}get boxes(){return this.boxes$.value}get topBox(){return this.topBox$.value}get darkMode(){return this._darkMode$.value}get state(){return this._state$.value}setState(t,i=!1){switch(t){case te.Maximized:this.setMinimized(!1,i),this.setMaximized(!0,i);break;case te.Minimized:this.setMinimized(!0,i),this.setMaximized(!1,i);break;default:this.setMinimized(!1,i),this.setMaximized(!1,i)}return this}create(t={},i=!0){const n=new sv(Tu(Au({zIndex:this.topBox?this.topBox.zIndex+1:100},i?this.smartPosition(t):t),{darkMode:this.darkMode,prefersColorScheme:this.prefersColorScheme,maximized:this.maximized,minimized:this.minimized,fence:this.fence,namespace:this.namespace,containerRect:this.containerRect,readonly:this.readonly,collectorRect:this.collectorRect}));return n.mount(this.root),n.focus&&(this.focusBox(n),i&&this.makeBoxTop(n)),this.boxes$.setValue([...this.boxes,n]),n._delegateEvents.on(Se.Maximize,()=>{this.setMaximized(!this.maximized)}),n._delegateEvents.on(Se.Minimize,()=>{this.setMinimized(!0)}),n._delegateEvents.on(Se.Close,()=>{this.remove(n),this.focusTopBox()}),n._coord$.reaction((r,s,o)=>{o||this.events.emit(oe.Move,n)}),n._size$.reaction((r,s,o)=>{o||this.events.emit(oe.Resize,n)}),n._intrinsicCoord$.reaction((r,s,o)=>{o||this.events.emit(oe.IntrinsicMove,n)}),n._intrinsicSize$.reaction((r,s,o)=>{o||this.events.emit(oe.IntrinsicResize,n)}),n._visualSize$.reaction((r,s,o)=>{o||this.events.emit(oe.VisualResize,n)}),n._zIndex$.reaction((r,s,o)=>{if(this.boxes.length>0){const a=this.boxes.reduce((l,u)=>l.zIndex>u.zIndex?l:u);this.topBox$.setValue(a)}o||this.events.emit(oe.ZIndex,n)}),this.events.emit(oe.Created,n),n}query(t){return t?this.boxes.filter(this.teleBoxMatcher(t)):[...this.boxes]}queryOne(t){return t?this.boxes.find(this.teleBoxMatcher(t)):this.boxes[0]}update(t,i,n=!1){const r=this.boxes.find(s=>s.id===t);if(r)return this.updateBox(r,i,n)}updateAll(t,i=!1){this.boxes.forEach(n=>{this.updateBox(n,t,i)})}remove(t,i=!1){const n=this.getBoxIndex(t);if(n>=0){const r=this.boxes.slice(),s=r.splice(n,1);return this.boxes$.setValue(r),s.forEach(o=>o.destroy()),i||(this.boxes.length<=0&&(this.setMaximized(!1),this.setMinimized(!1)),this.events.emit(oe.Removed,s)),s[0]}}removeTopBox(){if(this.topBox)return this.remove(this.topBox)}removeAll(t=!1){const i=this.boxes$.value;return this.boxes$.setValue([]),i.forEach(n=>n.destroy()),t||(this.boxes.length<=0&&(this.setMaximized(!1),this.setMinimized(!1)),this.events.emit(oe.Removed,i)),i}destroy(t=!1){this.events.removeAllListeners(),this._sideEffect.flushAll(),this.removeAll(t),Object.keys(this).forEach(i=>{const n=this[i];n instanceof Dn&&n.destroy()})}wrapClassName(t){return`${this.namespace}-${t}`}focusBox(t,i=!1){const n=this.getBox(t);n&&(this.boxes.forEach(r=>{if(n===r){let s=!1;n.focus||(s=!0,n.setFocus(!0,i)),s&&!i&&this.events.emit(oe.Focused,n)}else r.focus&&this.blurBox(r,i)}),this.maxTitleBar.focusBox(n))}focusTopBox(){if(this.topBox&&!this.topBox.focus)return this.focusBox(this.topBox)}blurBox(t,i=!1){const n=this.getBox(t);n&&(n.focus&&(n.setFocus(!1,i),i||this.events.emit(oe.Blurred,n)),this.maxTitleBar.focusedBox===n&&this.maxTitleBar.focusBox())}blurAll(t=!1){this.boxes.forEach(i=>{i.focus&&(i.setFocus(!1,t),t||this.events.emit(oe.Blurred,i))}),this.maxTitleBar.focusedBox&&this.maxTitleBar.focusBox()}teleBoxMatcher(t){const i=Object.keys(t);return n=>i.every(r=>t[r]===n[r])}updateBox(t,i,n=!1){i.x==null&&i.y==null||t.move(i.x==null?t.intrinsicX:i.x,i.y==null?t.intrinsicY:i.y,n),i.width==null&&i.height==null||t.resize(i.width==null?t.intrinsicWidth:i.width,i.height==null?t.intrinsicHeight:i.height,n),i.title!=null&&(t.setTitle(i.title),this.maxTitleBar.updateTitles()),i.visible!=null&&t.setVisible(i.visible,n),i.minHeight!=null&&t.setMinHeight(i.minHeight,n),i.minWidth!=null&&t.setMinWidth(i.minWidth,n),i.resizable!=null&&t.setResizable(i.resizable,n),i.draggable!=null&&t.setDraggable(i.draggable,n),i.fixRatio!=null&&t.setFixRatio(i.fixRatio,n),i.zIndex!=null&&t.setZIndex(i.zIndex,n),i.content!=null&&t.mountContent(i.content),i.footer!=null&&t.mountFooter(i.footer)}smartPosition(t={}){let{x:i,y:n}=t;const{width:r=.5,height:s=.5}=t;if(i==null){let o=20;this.topBox&&(o=this.topBox.intrinsicX*this.containerRect.width+20,o>this.containerRect.width-r*this.containerRect.width&&(o=20)),i=o/this.containerRect.width}if(n==null){let o=20;this.topBox&&(o=this.topBox.intrinsicY*this.containerRect.height+20,o>this.containerRect.height-s*this.containerRect.height&&(o=20)),n=o/this.containerRect.height}return Tu(Au({},t),{x:i,y:n,width:r,height:s})}makeBoxTop(t,i=!1){this.topBox&&t!==this.topBox&&t.setZIndex(this.topBox.zIndex+1,i)}getBoxIndex(t){return typeof t==\"string\"?this.boxes.findIndex(i=>i.id===t):this.boxes.findIndex(i=>i===t)}getBox(t){return typeof t==\"string\"?this.boxes.find(i=>i.id===t):t}}const lv=(e,t,i,n,r)=>new uv({safeSetAttributes:s=>e.safeSetAttributes(s),getMainView:()=>e.mainView,updateAppState:(...s)=>{var o;return(o=e.appManager)==null?void 0:o.store.updateAppState(...s)},canOperate:()=>e.canOperate,notifyContainerRectUpdate:s=>{var o;return(o=e.appManager)==null?void 0:o.notifyContainerRectUpdate(s)},cleanFocus:()=>{var s;return(s=e.appManager)==null?void 0:s.store.cleanFocus()},setAppFocus:s=>{var o;return(o=e.appManager)==null?void 0:o.store.setAppFocus(s,!0)},callbacks:t,emitter:i,boxEmitter:n},r);class uv{constructor(t,i){this.context=t,this.createTeleBoxManagerConfig=i;const{emitter:n,callbacks:r,boxEmitter:s}=t;this.teleBoxManager=this.setupBoxManager(i),this.teleBoxManager._state$.reaction(o=>{r.emit(\"boxStateChange\",o),n.emit(\"boxStateChange\",o)}),this.teleBoxManager._darkMode$.reaction(o=>{r.emit(\"darkModeChange\",o)}),this.teleBoxManager._prefersColorScheme$.reaction(o=>{r.emit(\"prefersColorSchemeChange\",o)}),this.teleBoxManager.events.on(\"minimized\",o=>{if(this.context.safeSetAttributes({minimized:o}),o)this.context.cleanFocus(),this.blurAllBox();else{const a=this.getTopBox();a&&(this.context.setAppFocus(a.id),this.focusBox({appId:a.id},!1))}}),this.teleBoxManager.events.on(\"maximized\",o=>{this.context.safeSetAttributes({maximized:o})}),this.teleBoxManager.events.on(\"removed\",o=>{o.forEach(a=>{s.emit(\"close\",{appId:a.id})})}),this.teleBoxManager.events.on(\"intrinsic_move\",E.debounce(o=>{s.emit(\"move\",{appId:o.id,x:o.intrinsicX,y:o.intrinsicY})},50)),this.teleBoxManager.events.on(\"intrinsic_resize\",E.debounce(o=>{s.emit(\"resize\",{appId:o.id,width:o.intrinsicWidth,height:o.intrinsicHeight})},200)),this.teleBoxManager.events.on(\"focused\",o=>{o&&(this.canOperate?s.emit(\"focus\",{appId:o.id}):this.teleBoxManager.blurBox(o.id))}),this.teleBoxManager.events.on(\"z_index\",o=>{this.context.updateAppState(o.id,Ee.ZIndex,o.zIndex)}),n.on(\"playgroundSizeChange\",()=>this.updateManagerRect()),n.on(\"updateManagerRect\",()=>this.updateManagerRect())}get mainView(){return this.context.getMainView()}get canOperate(){return this.context.canOperate()}get boxState(){return this.teleBoxManager.state}get maximized(){return this.teleBoxManager.maximized}get minimized(){return this.teleBoxManager.minimized}get darkMode(){return this.teleBoxManager.darkMode}get prefersColorScheme(){return this.teleBoxManager.prefersColorScheme}get boxSize(){return this.teleBoxManager.boxes.length}createBox(t){var u,d,p;if(!this.teleBoxManager)return;let{minwidth:i=gg,minheight:n=mg}=(u=t.app.config)!=null?u:{};const{width:r,height:s}=(d=t.app.config)!=null?d:{},o=((p=t.options)==null?void 0:p.title)||t.appId,a=this.teleBoxManager.containerRect;i>1&&(i=i/a.width),n>1&&(n=n/a.height);const l={title:o,minWidth:i,minHeight:n,width:r,height:s,id:t.appId};this.teleBoxManager.create(l,t.smartPosition),this.context.emitter.emit(`${t.appId}${J.WindowCreated}`)}setBoxInitState(t){const i=this.teleBoxManager.queryOne({id:t});i&&i.state===te.Maximized&&this.context.boxEmitter.emit(\"resize\",{appId:t,x:i.x,y:i.y,width:i.intrinsicWidth,height:i.intrinsicHeight})}setupBoxManager(t){const i=ie.wrapper?ie.wrapper:document.body,n=i.getBoundingClientRect(),r={root:i,containerRect:{x:0,y:0,width:n.width,height:n.height},fence:!1,prefersColorScheme:t==null?void 0:t.prefersColorScheme},s=new av(r);this.teleBoxManager&&this.teleBoxManager.destroy(),this.teleBoxManager=s;const o=(t==null?void 0:t.collectorContainer)||ie.wrapper;return o&&this.setCollectorContainer(o),s}setCollectorContainer(t){var n;const i=new uh({styles:(n=this.createTeleBoxManagerConfig)==null?void 0:n.collectorStyles}).mount(t);this.teleBoxManager.setCollector(i)}getBox(t){return this.teleBoxManager.queryOne({id:t})}closeBox(t,i=!1){return this.teleBoxManager.remove(t,i)}boxIsFocus(t){const i=this.getBox(t);return i==null?void 0:i.focus}getFocusBox(){return this.teleBoxManager.query({focus:!0})[0]}getTopBox(){return this.teleBoxManager.topBox}updateBoxState(t){if(!t)return;const i=this.getBox(t.id);i&&(this.teleBoxManager.update(i.id,{x:t.x,y:t.y,width:t.width||.5,height:t.height||.5,zIndex:t.zIndex},!0),setTimeout(()=>{t.focus&&this.teleBoxManager.focusBox(i.id,!0),t.maximized!=null&&this.teleBoxManager.setMaximized(Boolean(t.maximized),!0),t.minimized!=null&&this.teleBoxManager.setMinimized(Boolean(t.minimized),!0)},50),this.context.callbacks.emit(\"boxStateChange\",this.teleBoxManager.state))}updateManagerRect(){var i;const t=(i=this.mainView.divElement)==null?void 0:i.getBoundingClientRect();if(t&&t.width>0&&t.height>0){const n={x:0,y:0,width:t.width,height:t.height};this.teleBoxManager.setContainerRect(n),this.context.notifyContainerRectUpdate(this.teleBoxManager.containerRect)}}moveBox({appId:t,x:i,y:n}){this.teleBoxManager.update(t,{x:i,y:n},!0)}focusBox({appId:t},i=!0){this.teleBoxManager.focusBox(t,i)}resizeBox({appId:t,width:i,height:n,skipUpdate:r}){this.teleBoxManager.update(t,{width:i,height:n},r)}setBoxMinSize(t){this.teleBoxManager.update(t.appId,{minWidth:t.minWidth,minHeight:t.minHeight},!0)}setBoxTitle(t){this.teleBoxManager.update(t.appId,{title:t.title},!0)}blurAllBox(){this.teleBoxManager.blurAll()}updateAll(t){this.teleBoxManager.updateAll(t)}setMaximized(t,i=!0){t!==this.maximized&&this.teleBoxManager.setMaximized(t,i)}setMinimized(t,i=!0){this.teleBoxManager.setMinimized(t,i)}focusTopBox(){if(this.teleBoxManager.query().length>=1){const i=this.getTopBox();i&&this.focusBox({appId:i.id},!1)}}updateBox(t,i,n=!0){this.teleBoxManager.update(t,i,n)}setReadonly(t){this.teleBoxManager.setReadonly(t)}setPrefersColorScheme(t){this.teleBoxManager.setPrefersColorScheme(t)}setZIndex(t,i,n=!0){this.teleBoxManager.update(t,{zIndex:i},n)}destroy(){this.teleBoxManager.destroy()}}function qr(){}function ch(e){return e()}function Uu(){return Object.create(null)}function zs(e){e.forEach(ch)}function cv(e){return typeof e==\"function\"}function dv(e,t){return e!=e?t==t:e!==t||e&&typeof e==\"object\"||typeof e==\"function\"}let hr;function es(e,t){return hr||(hr=document.createElement(\"a\")),hr.href=t,e===hr.href}function hv(e){return Object.keys(e).length===0}function xt(e,t){e.appendChild(t)}function Ds(e,t,i){e.insertBefore(t,i||null)}function Yn(e){e.parentNode.removeChild(e)}function Ot(e){return document.createElement(e)}function al(e){return document.createTextNode(e)}function Zo(){return al(\" \")}function he(e,t,i){i==null?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function pv(e){return Array.from(e.childNodes)}function dh(e,t){t=\"\"+t,e.wholeText!==t&&(e.data=t)}function me(e,t,i,n){i===null?e.style.removeProperty(t):e.style.setProperty(t,i,n?\"important\":\"\")}let ll;function Sn(e){ll=e}const fn=[],Wu=[],zr=[],$u=[],fv=Promise.resolve();let Go=!1;function gv(){Go||(Go=!0,fv.then(hh))}function Yo(e){zr.push(e)}const fo=new Set;let pr=0;function hh(){const e=ll;do{for(;pr<fn.length;){const t=fn[pr];pr++,Sn(t),mv(t.$$)}for(Sn(null),fn.length=0,pr=0;Wu.length;)Wu.pop()();for(let t=0;t<zr.length;t+=1){const i=zr[t];fo.has(i)||(fo.add(i),i())}zr.length=0}while(fn.length);for(;$u.length;)$u.pop()();Go=!1,fo.clear(),Sn(e)}function mv(e){if(e.fragment!==null){e.update(),zs(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Yo)}}const vv=new Set;function wv(e,t){e&&e.i&&(vv.delete(e),e.i(t))}function yv(e,t,i,n){const{fragment:r,on_mount:s,on_destroy:o,after_update:a}=e.$$;r&&r.m(t,i),n||Yo(()=>{const l=s.map(ch).filter(cv);o?o.push(...l):zs(l),e.$$.on_mount=[]}),a.forEach(Yo)}function xv(e,t){const i=e.$$;i.fragment!==null&&(zs(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function Sv(e,t){e.$$.dirty[0]===-1&&(fn.push(e),gv(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Cv(e,t,i,n,r,s,o,a=[-1]){const l=ll;Sn(e);const u=e.$$={fragment:null,ctx:null,props:s,update:qr,not_equal:r,bound:Uu(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:Uu(),dirty:a,skip_bound:!1,root:t.target||l.$$.root};o&&o(u.root);let d=!1;if(u.ctx=i?i(e,t.props||{},(p,m,...v)=>{const S=v.length?v[0]:m;return u.ctx&&r(u.ctx[p],u.ctx[p]=S)&&(!u.skip_bound&&u.bound[p]&&u.bound[p](S),d&&Sv(e,p)),m}):[],u.update(),d=!0,zs(u.before_update),u.fragment=n?n(u.ctx):!1,t.target){if(t.hydrate){const p=pv(t.target);u.fragment&&u.fragment.l(p),p.forEach(Yn)}else u.fragment&&u.fragment.c();t.intro&&wv(e.$$.fragment),yv(e,t.target,t.anchor,t.customElement),hh()}Sn(l)}class Mv{$destroy(){xv(this,1),this.$destroy=qr}$on(t,i){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(i),()=>{const r=n.indexOf(i);r!==-1&&n.splice(r,1)}}$set(t){this.$$set&&!hv(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Hu(e){let t,i,n,r,s,o,a=e[14]&&Fu(e),l=e[15]&&Qu(e);return{c(){t=Ot(\"div\"),i=Ot(\"div\"),a&&a.c(),n=Zo(),r=Ot(\"span\"),s=al(e[0]),o=Zo(),l&&l.c(),me(r,\"overflow\",\"hidden\"),me(r,\"white-space\",\"nowrap\"),me(r,\"text-overflow\",\"ellipsis\"),me(r,\"max-width\",\"80px\"),he(i,\"class\",e[8]),me(i,\"background-color\",e[2]),me(i,\"color\",e[9]),me(i,\"opacity\",e[11]),he(t,\"class\",\"netless-window-manager-cursor-name\")},m(u,d){Ds(u,t,d),xt(t,i),a&&a.m(i,null),xt(i,n),xt(i,r),xt(r,s),xt(i,o),l&&l.m(i,null)},p(u,d){u[14]?a?a.p(u,d):(a=Fu(u),a.c(),a.m(i,n)):a&&(a.d(1),a=null),d&1&&dh(s,u[0]),u[15]?l?l.p(u,d):(l=Qu(u),l.c(),l.m(i,null)):l&&(l.d(1),l=null),d&256&&he(i,\"class\",u[8]),d&4&&me(i,\"background-color\",u[2]),d&512&&me(i,\"color\",u[9]),d&2048&&me(i,\"opacity\",u[11])},d(u){u&&Yn(t),a&&a.d(),l&&l.d()}}}function Fu(e){let t,i;return{c(){t=Ot(\"img\"),he(t,\"class\",\"netless-window-manager-cursor-selector-avatar\"),he(t,\"style\",e[16]()),es(t.src,i=e[7])||he(t,\"src\",i),he(t,\"alt\",\"avatar\")},m(n,r){Ds(n,t,r)},p(n,r){r&128&&!es(t.src,i=n[7])&&he(t,\"src\",i)},d(n){n&&Yn(t)}}}function Qu(e){let t,i;return{c(){t=Ot(\"span\"),i=al(e[1]),he(t,\"class\",\"netless-window-manager-cursor-tag-name\"),me(t,\"background-color\",e[10])},m(n,r){Ds(n,t,r),xt(t,i)},p(n,r){r&2&&dh(i,n[1]),r&1024&&me(t,\"background-color\",n[10])},d(n){n&&Yn(t)}}}function Iv(e){let t,i,n,r,s,o,a=!e[12]&&Hu(e);return{c(){t=Ot(\"div\"),a&&a.c(),i=Zo(),n=Ot(\"div\"),r=Ot(\"img\"),he(r,\"class\",s=\"netless-window-manager-cursor-\"+e[3]+\"-image\"),es(r.src,o=e[6])||he(r,\"src\",o),he(r,\"alt\",e[3]),he(n,\"class\",\"cursor-image-wrapper\"),he(t,\"class\",\"netless-window-manager-cursor-mid\"),me(t,\"transform\",\"translateX(\"+e[4]+\"px) translateY(\"+e[5]+\"px)\"),me(t,\"display\",e[13])},m(l,u){Ds(l,t,u),a&&a.m(t,null),xt(t,i),xt(t,n),xt(n,r)},p(l,[u]){l[12]?a&&(a.d(1),a=null):a?a.p(l,u):(a=Hu(l),a.c(),a.m(t,i)),u&8&&s!==(s=\"netless-window-manager-cursor-\"+l[3]+\"-image\")&&he(r,\"class\",s),u&64&&!es(r.src,o=l[6])&&he(r,\"src\",o),u&8&&he(r,\"alt\",l[3]),u&48&&me(t,\"transform\",\"translateX(\"+l[4]+\"px) translateY(\"+l[5]+\"px)\"),u&8192&&me(t,\"display\",l[13])},i:qr,o:qr,d(l){l&&Yn(t),a&&a.d()}}}function bv(e,t,i){let n,r,s,o,a,{cursorName:l}=t,{tagName:u}=t,{backgroundColor:d}=t,{appliance:p}=t,{x:m}=t,{y:v}=t,{src:S}=t,{visible:y}=t,{avatar:h}=t,{theme:c}=t,{color:f}=t,{cursorTagBackgroundColor:g}=t,{opacity:w}=t;const x=()=>Object.entries({width:(n?19:28)+\"px\",height:(n?19:28)+\"px\",position:n?\"initial\":\"absolute\",\"border-color\":n?\"white\":d,\"margin-right\":(n?4:0)+\"px\"}).map(([C,z])=>`${C}: ${z}`).join(\";\");return e.$$set=C=>{\"cursorName\"in C&&i(0,l=C.cursorName),\"tagName\"in C&&i(1,u=C.tagName),\"backgroundColor\"in C&&i(2,d=C.backgroundColor),\"appliance\"in C&&i(3,p=C.appliance),\"x\"in C&&i(4,m=C.x),\"y\"in C&&i(5,v=C.y),\"src\"in C&&i(6,S=C.src),\"visible\"in C&&i(17,y=C.visible),\"avatar\"in C&&i(7,h=C.avatar),\"theme\"in C&&i(8,c=C.theme),\"color\"in C&&i(9,f=C.color),\"cursorTagBackgroundColor\"in C&&i(10,g=C.cursorTagBackgroundColor),\"opacity\"in C&&i(11,w=C.opacity)},e.$$.update=()=>{e.$$.dirty&1&&(n=!E.isEmpty(l)),e.$$.dirty&2&&i(15,r=!E.isEmpty(u)),e.$$.dirty&128&&i(14,s=!E.isEmpty(h)),e.$$.dirty&131072&&i(13,o=y?\"initial\":\"none\"),e.$$.dirty&8&&i(12,a=p===A.ApplianceNames.laserPointer)},[l,u,d,p,m,v,S,h,c,f,g,w,a,o,s,r,x,y]}class Ev extends Mv{constructor(t){super();Cv(this,t,bv,Iv,dv,{cursorName:0,tagName:1,backgroundColor:2,appliance:3,x:4,y:5,src:6,visible:17,avatar:7,theme:8,color:9,cursorTagBackgroundColor:10,opacity:11})}}class Av{constructor(t,i,n,r){this.manager=t,this.memberId=i,this.cursorManager=n,this.wrapper=r,this.move=s=>{var o;if(s.type===\"main\"){const a=this.cursorManager.wrapperRect;this.component&&a&&(this.autoHidden(),this.moveCursor(s,a,this.manager.mainView))}else{const a=this.cursorManager.focusView,l=(o=a==null?void 0:a.divElement)==null?void 0:o.getBoundingClientRect(),u=a==null?void 0:a.camera;a&&l&&u&&this.component&&(this.autoHidden(),this.moveCursor(s,l,a))}},this.leave=()=>{this.hide()},this.updateMember(),this.createCursor(),this.autoHidden()}moveCursor(t,i,n){var l,u;const{x:r,y:s,type:o}=t,a=n==null?void 0:n.screen.convertPointToScreen(r,s);if(a){let d=a.x-2,p=a.y-18;if(o===\"app\"){const m=this.cursorManager.wrapperRect;m&&(d=d+i.x-m.x,p=p+i.y-m.y)}a.x<0||a.x>i.width||a.y<0||a.y>i.height?(l=this.component)==null||l.$set({visible:!1,x:d,y:p}):(u=this.component)==null||u.$set({visible:!0,x:d,y:p})}}get memberApplianceName(){var t,i;return(i=(t=this.member)==null?void 0:t.memberState)==null?void 0:i.currentApplianceName}get memberColor(){var i,n;return`rgb(${(n=(i=this.member)==null?void 0:i.memberState)==null?void 0:n.strokeColor.join(\",\")})`}get payload(){var t;return(t=this.member)==null?void 0:t.payload}get memberCursorName(){var t,i;return((t=this.payload)==null?void 0:t.nickName)||((i=this.payload)==null?void 0:i.cursorName)||this.memberId}get memberTheme(){var t;return(t=this.payload)!=null&&t.theme?\"netless-window-manager-cursor-inner-mellow\":\"netless-window-manager-cursor-inner\"}get memberCursorTextColor(){var t;return((t=this.payload)==null?void 0:t.cursorTextColor)||\"#FFFFFF\"}get memberCursorTagBackgroundColor(){var t;return((t=this.payload)==null?void 0:t.cursorTagBackgroundColor)||this.memberColor}get memberAvatar(){var t;return(t=this.payload)==null?void 0:t.avatar}get memberOpacity(){return!this.memberCursorName&&!this.memberAvatar?0:1}get memberTagName(){var t;return(t=this.payload)==null?void 0:t.cursorTagName}autoHidden(){this.timer&&clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.hide()},1e3*10)}async createCursor(){this.member&&this.wrapper&&(this.component=new Ev({target:this.wrapper,props:this.initProps()}))}initProps(){return{x:0,y:0,appliance:this.memberApplianceName,avatar:this.memberAvatar,src:this.getIcon(),visible:!1,backgroundColor:this.memberColor,cursorName:this.memberCursorName,theme:this.memberTheme,color:this.memberCursorTextColor,cursorTagBackgroundColor:this.memberCursorTagBackgroundColor,opacity:this.memberOpacity,tagName:this.memberTagName}}getIcon(){if(this.member){const t=this.cursorManager.applianceIcons;return t[this.memberApplianceName||A.ApplianceNames.shape]||t[A.ApplianceNames.shape]}}updateMember(){return this.member=tm(this.manager.room,this.memberId),this.updateComponent(),this.member}updateComponent(){var t;(t=this.component)==null||t.$set(E.omit(this.initProps(),[\"x\",\"y\"]))}destroy(){this.component&&this.component.$destroy(),this.cursorManager.cursorInstances.delete(this.memberId),this.timer&&clearTimeout(this.timer)}hide(){this.component&&(this.component.$set({visible:!1}),this.destroy())}}var Tv=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAYISURBVHgB7ZpNSCtXFIBPEuvz+dMGpYUKD/sWFX+Qti6kK7Hqpm6e9q0rIoIUFUShPLV10VZx4+JZqa9v20LBhdq9fyBUCtKNPH8qYl2IOw3G38Rkek4y15y5uTOZJDOWggcOSSYzN/ebc+45554JwIM8iBCPyTEP+86T4vyMfsRN4b+nQTKIJp0vzuGvlpID7os8EQNEIBD4oKio6Bm9DwaDv/v9/n/076JgbtWUYPchwrW8qD7UnOvr6wFNkpubm+/wu7f0c7y6mrnlvQufxB0Iau7V1dX3BDA/P6/V1dVpzc3N2uLiIofK1c8VYHys/wRKBUN3/hGHqaysNOjc3FwMis6hc0FtLTHuvYLxCCZgci8uLn4wg5Gh6Fy8Jk+/NkcCAlAAuUkoW4g0B+d5tLS05O/r67O8eGxsDNra2uDy8nKsoKCAwCIQDxQa0yTxgrvCYXyTk5Ml+Orf2dlJeeHIyAigFSE/P38ELfUNqNdSkjgF5FF89jL1TU1NlQwODl5gZPujp6cHWltbUw7Koc7Pz8mkZpHPFeFrJuZeqLnoMoPoZqe0JjDP/IZgnyLUG/o8NDRkuo5Ua2pjY6MC4oFCFf1cA0oKzRSOp6enRfTaGh0d/QxBt+1CUVgnOTs7+xrHfQzGyOcKkK3QTJMnQffZ6e/v/xwttmsHqqmpKXbdycnJCxy7ABLh3FEgVZ6hZJhnFZoFFMF0d3c/w7v+dyookXBnZ2c/xvHfhriVcvXfdBRItsxjnOhYqjwjoAimq6vrCysoGofk+Ph4Esd/F/UdiFtJAGUd2DygTpp5dmBUUJ2dnc9VUALm8PDwJY7/BPU9VD8k3M4RC6kskxZMKigKIMLN9vf3p3H8DyWgfEhEOwOQD9IXOTz7EObbwsLC4YWFBRgeHrY9ECXYo6MjaGlpKWlsbPxkYGDgRW1tbSEWquVlZWXBzc3Nl1VVVa8hXiXc6ioqBqGaPDk7AACJTRZ3NS9lcUp86cJwoSQ7Pj4Op6enfxUXF3/V0NCQv7q6GsCvwrqGUG/01xAD4+VQTOxaSF43d5bBOisrGBJRCtXX17+/trb268rKSgASFgmz97KFkmo6OztWuVyPweiWGc4WRkhFRQVEIpHg8vJyQAIQVlLBROVxvBYQHsXnO8tk62ZcyN0wecLBwcEvYHSzEPscBqOLCRhLC4n9uqaA8UAWAcAKhtbQ3t7eTHl5+Y9gtAp3twhT056CDMQ7MRzIFTeTYKb1yYYVQFH9VdzsqNmYKpfTJBDX3Ixgdnd3XyHMT2AMALJlBBSPaMpNngrIsTyTCgaj288YDGakictrxizvKFNOjgSSBLS+vv6UYHDb7DgMVgsChjTEgCIKGG4ZU+EWkgNBzN1qamq+pAMTExPgFMzW1tZrhHkFyWE5KxgSszx0527RaDRmOSpRshEOU11dPQPG8CwHARHJlMnTSrwSRFIlfXt7m3V5ngJGuJtqzaQtZkFBVNJezN5ZAdmwjKo2k9tVtrcI3OXk4tPgcg7ChCDZ1URgMOu72Xa5VFHOkymQhWVU60YVmjN6wiC7k6p+S1syCACOwJBYFaexV+yhBekNPsMBO6KAEeE4BMaCU67RsoYhSbXgaT//ht709vZCaWmp6YkEbLFmVJWzas04+iBL7EKpm0J7duqu0B7+CTUpNJuyvb1NCfMj1CqI9wLKUOlOUMeG+gGFkHii4HizUF4z/KFUrPsJ8WbEIyx7nnZ0dDynME6BAuce09iFHo+GrnmGltltb2//E4wVAN82y7vOjKOZXSBhJdHNiT3TYWD8OY2PTUJkdd7MkJMnT5wZVQF2RFX6yBMUdzPMvvfqxz3sXHF+GNT9ANXit/10O1sgHkZvdQAOKvs9B5L7ARELGAAXLSTvM8QExTE+YbHe+HURhZp1aRyF4CJXClbbWwGketgkW9VsY+YaiBCVhfgE+XvxRwgZSM4jUVCDZFQ9pytmXR8hUTB2gnidx4XffVWydN0yQjwmx/jkAZJBrIBI5J7ZvQGZWUgVSuU/EqmOAzicKNMVu816DdRWUV1/7xAP8n+SfwF3Du3NF2sYhwAAAABJRU5ErkJggg==\",kv=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAxCAYAAABznEEcAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAZoSURBVHgB7VlLSCRXFL3ljNEhEXTGhMQJmOjCz8ZNVLKICz9xIYhCNi7UgINkGEk2En8hW5cBUQNxo05GAoKikuCAmvGzGMdPcCUGjDPxD/4Vv/3JvWW97luvq7ur+hMZ8MKlqrteNfe8e965970GuLVbC5kpJr53+hjHx9yY3TUxJgLMAQG4ITARfp5T4Mri4uL9q6urnxwOxz/oY5eXl1/Pzs7e195X2FX4jZsIhAK7gx5ps9m6nGj9/f3OtbU1pzAE0318fPwVjYHrrN7R3AjU/wpOBwA9Cmf/9ejoqDMtLU31iooKGdA+ATo4OMiXAEWAHhBAGEApXj4rPAik0vPt7e0vCgoKPH4gMzMTSktLIS8vD2JiYgABvcHMTZyennbHxsaOg3udOJmLzwqEYB0ZgRCZENm4u7e39yQuLq65srISZmZmvP5Ybm4u5OfnQ0lJyXWUCAgzNLS+vt6SnJz8WgvYwV5xSlcRgyVg3ha2Dkxzc3MvfZmVlQW+bGxsDBobGyE7O1u94uJPjIqKqklKSvrbbrfPnp+ff7e8vJwMnlSTKWfJjDKhywJo6wLp0YcZ+dyIUr7s4cOHLsrRlQwBTSBFuzc2NiZYhjjVAIyzZBqEwgCQv0OOM/gNzuiP/ijlDxBRjgClpqa6AF1cXDydmpoaLCws3JcAGYHyC4JMzoKaibKysvienp6FtrY2IA/WCFB5ebkqCHSvARo8Ozt7igIxwIJ2gJ+seFMnDoIyEUV+dHT0G3qWVUr5M043DdAB0m2IKZwAYpgZX+qkywR6NFbuR0iDxmAoZRUQKRxSLTMnJ8eIaqqSeVMnIYUOdu+sq6vrp4f+VCoYo8khZaNs01VRlERUu2/BrWAA7sl2Anink1Ao18JGjyY/PDx8hq1GZqgp5c2mp6chMjLy2b179x7hRzvoqeUUwXIzqq4O5nZsNUaEbIbLqPLTou/s7FTvT05OpsA9sXJG1AVsZDwjutqBIN6gUlWjxod8XRBNKXgsrqpqYZfwEqX9h8TExD7wbFm8LmzxHQ0QHSlXKZVSqFC/hkqlaKapTaGgCQTK7PHW1lb/wsLC86KiokkccoV+qV1tcE0pO7AWxmhTxBszDzqRr66ujqanp2cRpQLNBgUsCh8BwQ54bn5+/s+mpqa+4eHhfS1gb52vwuP0trPjhSZCBtLQ0NA3MDDQQIFYAUHBYhuvzjpVbJr1lZWVP3p7e19UVVXNgHumXYrI4uBx6Yqevz02b0FcRQ8CoBQF3dXVpQLZ3d39C7n+ora29vfJyclDYFnWgFyxK3cxhss/+KoT/N6DVkQpKypFGUCp3Ozo6HgSHx//GLW/BwHsg57zl5pzADajwLn52mPL1ZHPloMoRYPMFL6EhAR18e7s7MxVV1fPsAAp4Avteq7dC/c1+wKI4g+EfGzDM+EYHBw8RDrNiA2QL6upqVGvKJ2/gHu2L1nA5wwEB2YDfSYMO1x/px0cgEc2zBY+eo67u6H29vZ/wU2VC8l58JxKNjDOgojNEp08aFVfX++3l6JMEdDx8fEB0FNIBsDXBc8ArwuW1EkeI1RKdLWmCx+1DhkZGRvR0dFfSsHKxYtnW0iqvJAN9xNm6MR/QO5sfapUSkqKmqW5ubmfwVgyZdpw/vPZl2kUEAinBMSUStG+gwra0NDQSynQKyloIxnlewafjDFLJzLRBJqiFMnqyMgIbG5uDuD996Dnv8iAPOMAPmbcm5lVJwA/vZRMKZGZlpaWVtAvUL4GZMqE1fjRJrUd76LHoX+InlhcXPwZnWW2tra6jjrpiBM3UK/weQr6J+gfodMh9HtwncG7YLA3CMSsLmxx5WuDCt8B7vZeicInTjCWlpb6wc15mfey7oc9E8LElpVmMgb9AXoC+qcTExOPKRu4NlTHs6Q10GfhgfYOvRsJQZ76BWMKuDtaolQs+gfoH6Mn436gDg+e+5BKXUQx/C5Je/a+NpbeiQJPKgUdlNXx/BCBKxVdxW5Q0I3XBqFKRhU4KLtjYawi3csuTKdc4FnIXNvKUJkVEGRG20QZAAUpA5DbaYAQLmQzfzxyk/ffdnCD4NWVnGdE7kQBQvQHC5lVEDxgMaM29lkxGCNLKrDnIbFAMkFmBIaDkHstU41coGZ1TZD5UjReCGUAYbNgdNqoXZB/T67yYbFAMiGML3BhYeH8rb0t9h/zgcTBcTNGiQAAAABJRU5ErkJggg==\",Nv=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAgrSURBVHgB7ZprTBRXFIDP7gIt8lQppTwE5V0KaAn6o1pqNGkDDTEmTUhsgKRp+gNJw68CFkLbVC2QkDS+gD8KJdWmARvbFBNNWpuIRGPFWBXQRMPDqIki+KLATs+ZnTvcvXtnX8w2beJJToaduTP3fHPOPffcOwC8kP+2WCDwIvahGFxTuN8KmNSZmULPNjLeqF9F8rdPkIEGEn+r+vjx46LQ0NA8/Dsader58+e/h4WFDWntFO7ot6fMFAt3JLWi2lCDpqamCux2+2+KROj82NhYGrXT2lu5Z/DP/deFByElA4Pv3LlTiHY/nJ6eVnbv3q1s2bJFyc7OVrZu3arU1dUp4+PjxPUQoT+g9tp9PkMFgpo9kxljHRoaWp2Xl3duYmIiurKyEvDoclNCQgIcPnxYPc7MzHwcGRnZhaft4Ag7O9fUbRhaITCie4lgcnNzT7qDIaHz27dvh+vXr0NEREQneqoCHKFnAR+8ZCaQGGq2CxcurCGYycnJZHcwTNAzUFFRoUJFRUV1IFQ5OKBsXB9uxSwgl0TQ3d29Yt26dccwoyVXV1d7hGEiQmGi2AzOUHx/hob4K2yuYS9G987s7OwPISEh7xPM6dOnwVfBsIMjR45AZmbmo5s3b76Xnp7+J55egMVxBSAZT0v1ED+76yn66dOnLQSzd+9ev2BIyFP0MjBco1JTU/sxfFeDazp3cYgZHmKqdoaGNISHh9fv378fSJcqlPV6e3sBJ+I/goOD34VFL0k95Y+HxPHCYGxmw5DQ2NuzZw8EBQVtunXr1jvgwUP+hhz/QDXMMCNVE8zx48dNg2FCz6QQjI2N/RA8VBFmANnu3btXihnpG8pM9fX1EAi5du0aeWkVOAMBCF7yN+R0z4yOjq6NiYlpp9CgdBtIwXpPH6vgDKWLt0CygtM6MDCwBuUYZSKaOCksAiVY9wFOBePgDOOytPAGSKzNVCCC2bBhw69YdK7ypgpYimzbtk2dl7CM+hFcveOUHDylbTFO1YdhFbByx44dA1QFUP0VSJj4+Hjo6+sDq9U6iEmHKvFZTedQ50GYbN15SITVlwNlZWUnLRZL8s6dOwMOQ9UCTtKTra2ttdppt9V2kMF5cbmsjxuM43bMNrmUzc6fP6+GQiDGDoOJi4ubwb4qm5ubafyIE6nLxGqTPEsGo1cBOGNX0TyDYafC0CyOaxcVziyh53Z2dkJycvLMvn37PmpoaBgFR4jxYSbWdVIgI89Iq4CjR48CZjlYv369+tssqI6ODsjPz4f+/v668vLycxrEHHfkYdwC8SB6mGEV8Cl64cuuri5oa2tTG+EyGjZu3AiXLl1qefDgwV8lJSUFZkDV1tZCcXExXLx4sbWoqKgPFj0zx8GI9ZwO5W4M6ekZYeqpaqbqmaSqqkpNpcPDw4dwzfM9nrLduHEjEs+X0XV/Sx96LnqE1kLtBQUF3eDwCO8dGQyzV5rl+JyuegfXI29jRotiRlKnpFghHMzKyjqotVXS0tLacKPjF3bdHxjSq1evduAkepAD+ZsDYlC8V5w8ZBVg+PPq2MGMlkInqE4joTf45MmT4YyMjAPcA+ltLSQlJX2BafxnX6HI29QeK44TOTk57mCYZ0QoJ8OBM4yB6dkNkwGlSygsLFQvYtYB3BTMxFL+M+0eFgZqp4mJiU2+QKGX1fGIk/QIrn0aYXGsyDxjmAyMhO2jhaCGoUbX1NSkLSwsPMJqV8Fspu6lIZS6OYhjiOLwdU7fQM1HfRPD7wS1obZ0j0xpb4726Z49ezaJf2/S7s9ATUGNR41BjdJseRnke3WGwhrRTS9pD1mOGoeG15BxOOfoxuCkp0Ih6NeaEaSZGlieJyiCoc1FgsGldokGk8nBvAKOrWIGQ5uPsm0tt0BWDiicAaGuGhkZ+YqMw9StGzU4OKhCnT179hNsswY1FTXdE5QEJhc1S3tGogazXLOBwQSBl3tzIhQPtAL1VQJCTcNx8y1vHIUghSKFZE9PT7H2dlM1b+Wgrr1y5Uq77J75+fnplpaWMg2ch4nlYEI5z7hdensDpI4hrYNErcMMXJ32koG4ztf3pultz83NjWG99Ra2WQ0OL2VjZjwgeufUqVOqV8+cOdPIwdBLSNJeHg8TAh5WqJ6EfSmgt7IMNRJ1JThiOlnrOAMHshprmMKdoGSCpb9s3B3SYLIFGIqICJB7xisYi+RvfiypXw40DWGdlJaWRmMd141hk8V2OWm7ieYTXhBc3+BgaZyqAISjOYxSMVvXsBTNlzdiNQDgRao2AtK3pjggpmrqbGpqSsLPIN/dv38/gaBwUjTshMHcvn27JyUlpRmc5xpPMD599LIYnLNyUKKndKjGxsakXbt2deMCLIE8IVvs0YRM1fjdu3d/wrXN5+BcnzEgvor2uN3rjzAYMp5lPEoQlE5fA0fWo8GfhlCbKVFQ1pKNIfzcOHH58mWqaimVUwJI0+6n59D4pIlzmdZPMPiZzXjDjX47Le5g0Uu8x2zgPqWyKpjVe7x3+AUbq9NYjQbgp2dsBud5o8TP7d5kHAWcQchQfoEmLgn8HjOiBIF7o5hI1x6CEbLNP3bdqYAF44JzyWLzcN1i8DcT/o3awbm8Fz3DAy2A62INwPV/E3wWdx5inmBHuwChCBD6R2JwHge80TIQRQLjt7e8DTkGZgfX8cUMZTDAteFDkveaIlzjX9ySQs8X18r2t2VHUURPKoICmDR+eCO9aSdmOIub3/w9RgpgUpiJhvraXpa6jZKHGEqyusw0GLFzX+5RhN/8kYnMSNMMfyH/V/kHST6OYVElTPAAAAAASUVORK5CYII=\",Pv=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDBweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSIwIDAgNDAgNDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYwLjEgKDg4MTMzKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT5zaGFwZS1jdXJzb3I8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBkPSJNMjAsMjEuNSBDMjAuMjQ1NDU5OSwyMS41IDIwLjQ0OTYwODQsMjEuNjc2ODc1MiAyMC40OTE5NDQzLDIxLjkxMDEyNDQgTDIwLjUsMjIgTDIwLjUsMjcgQzIwLjUsMjcuMjc2MTQyNCAyMC4yNzYxNDI0LDI3LjUgMjAsMjcuNSBDMTkuNzU0NTQwMSwyNy41IDE5LjU1MDM5MTYsMjcuMzIzMTI0OCAxOS41MDgwNTU3LDI3LjA4OTg3NTYgTDE5LjUsMjcgTDE5LjUsMjIgQzE5LjUsMjEuNzIzODU3NiAxOS43MjM4NTc2LDIxLjUgMjAsMjEuNSBaIE0yNywxOS41IEMyNy4yNzYxNDI0LDE5LjUgMjcuNSwxOS43MjM4NTc2IDI3LjUsMjAgQzI3LjUsMjAuMjQ1NDU5OSAyNy4zMjMxMjQ4LDIwLjQ0OTYwODQgMjcuMDg5ODc1NiwyMC40OTE5NDQzIEwyNywyMC41IEwyMiwyMC41IEMyMS43MjM4NTc2LDIwLjUgMjEuNSwyMC4yNzYxNDI0IDIxLjUsMjAgQzIxLjUsMTkuNzU0NTQwMSAyMS42NzY4NzUyLDE5LjU1MDM5MTYgMjEuOTEwMTI0NCwxOS41MDgwNTU3IEwyMiwxOS41IEwyNywxOS41IFogTTE4LDE5LjUgQzE4LjI3NjE0MjQsMTkuNSAxOC41LDE5LjcyMzg1NzYgMTguNSwyMCBDMTguNSwyMC4yNDU0NTk5IDE4LjMyMzEyNDgsMjAuNDQ5NjA4NCAxOC4wODk4NzU2LDIwLjQ5MTk0NDMgTDE4LDIwLjUgTDEzLDIwLjUgQzEyLjcyMzg1NzYsMjAuNSAxMi41LDIwLjI3NjE0MjQgMTIuNSwyMCBDMTIuNSwxOS43NTQ1NDAxIDEyLjY3Njg3NTIsMTkuNTUwMzkxNiAxMi45MTAxMjQ0LDE5LjUwODA1NTcgTDEzLDE5LjUgTDE4LDE5LjUgWiBNMjAsMTIuNSBDMjAuMjQ1NDU5OSwxMi41IDIwLjQ0OTYwODQsMTIuNjc2ODc1MiAyMC40OTE5NDQzLDEyLjkxMDEyNDQgTDIwLjUsMTMgTDIwLjUsMTggQzIwLjUsMTguMjc2MTQyNCAyMC4yNzYxNDI0LDE4LjUgMjAsMTguNSBDMTkuNzU0NTQwMSwxOC41IDE5LjU1MDM5MTYsMTguMzIzMTI0OCAxOS41MDgwNTU3LDE4LjA4OTg3NTYgTDE5LjUsMTggTDE5LjUsMTMgQzE5LjUsMTIuNzIzODU3NiAxOS43MjM4NTc2LDEyLjUgMjAsMTIuNSBaIiBpZD0icGF0aC0xIj48L3BhdGg+CiAgICAgICAgPGZpbHRlciB4PSItNjQuNiUiIHk9Ii01OS41JSIgd2lkdGg9IjIyOS4zJSIgaGVpZ2h0PSIyNDYuMSUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0yIj4KICAgICAgICAgICAgPGZlTW9ycGhvbG9neSByYWRpdXM9IjEiIG9wZXJhdG9yPSJkaWxhdGUiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dTcHJlYWRPdXRlcjEiPjwvZmVNb3JwaG9sb2d5PgogICAgICAgICAgICA8ZmVPZmZzZXQgZHg9IjAiIGR5PSIyIiBpbj0ic2hhZG93U3ByZWFkT3V0ZXIxIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4KICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMyIgaW49InNoYWRvd09mZnNldE91dGVyMSIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlR2F1c3NpYW5CbHVyPgogICAgICAgICAgICA8ZmVDb21wb3NpdGUgaW49InNoYWRvd0JsdXJPdXRlcjEiIGluMj0iU291cmNlQWxwaGEiIG9wZXJhdG9yPSJvdXQiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbXBvc2l0ZT4KICAgICAgICAgICAgPGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAgICAwIDAgMCAwIDAgICAwIDAgMCAwIDAgIDAgMCAwIDAuMTYgMCIgdHlwZT0ibWF0cml4IiBpbj0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgIDwvZmlsdGVyPgogICAgPC9kZWZzPgogICAgPGcgaWQ9Iumhtemdoi00IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iV2hpdGVib2FyZC1HdWlkZWxpbmVzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzQ0LjAwMDAwMCwgLTc1MS4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9InNoYXBlLWN1cnNvciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQ0LjAwMDAwMCwgNzUxLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9ouWkh+S7vS00NCIgZmlsbD0iI0ZGRkZGRiIgb3BhY2l0eT0iMC4wMSIgeD0iMCIgeT0iMCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iMiI+PC9yZWN0PgogICAgICAgICAgICAgICAgPGcgaWQ9IuW9oueKtue7k+WQiCIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgICAgICAgICA8dXNlIGZpbGw9ImJsYWNrIiBmaWxsLW9wYWNpdHk9IjEiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSIxIiBkPSJNMjAsMjEgQzIwLjQ4NTQxMDMsMjEgMjAuODk4MDg1LDIxLjM0Nzk5OTMgMjAuOTg5OTQ3OSwyMS44NjU0ODc3IEwyMSwyMiBMMjEsMjcgQzIxLDI3LjU1MjI4NDcgMjAuNTUyMjg0NywyOCAyMCwyOCBDMTkuNTE0NTg5NywyOCAxOS4xMDE5MTUsMjcuNjUyMDAwNyAxOS4wMTAwNTIxLDI3LjEzNDUxMjMgTDE5LDI3IEwxOSwyMiBDMTksMjEuNDQ3NzE1MyAxOS40NDc3MTUzLDIxIDIwLDIxIFogTTI3LDE5IEMyNy41NTIyODQ3LDE5IDI4LDE5LjQ0NzcxNTMgMjgsMjAgQzI4LDIwLjQ4NTQxMDMgMjcuNjUyMDAwNywyMC44OTgwODUgMjcuMTM0NTEyMywyMC45ODk5NDc5IEwyNywyMSBMMjIsMjEgQzIxLjQ0NzcxNTMsMjEgMjEsMjAuNTUyMjg0NyAyMSwyMCBDMjEsMTkuNTE0NTg5NyAyMS4zNDc5OTkzLDE5LjEwMTkxNSAyMS44NjU0ODc3LDE5LjAxMDA1MjEgTDIyLDE5IEwyNywxOSBaIE0xOCwxOSBDMTguNTUyMjg0NywxOSAxOSwxOS40NDc3MTUzIDE5LDIwIEMxOSwyMC40ODU0MTAzIDE4LjY1MjAwMDcsMjAuODk4MDg1IDE4LjEzNDUxMjMsMjAuOTg5OTQ3OSBMMTgsMjEgTDEzLDIxIEMxMi40NDc3MTUzLDIxIDEyLDIwLjU1MjI4NDcgMTIsMjAgQzEyLDE5LjUxNDU4OTcgMTIuMzQ3OTk5MywxOS4xMDE5MTUgMTIuODY1NDg3NywxOS4wMTAwNTIxIEwxMywxOSBMMTgsMTkgWiBNMjAsMTIgQzIwLjQ4NTQxMDMsMTIgMjAuODk4MDg1LDEyLjM0Nzk5OTMgMjAuOTg5OTQ3OSwxMi44NjU0ODc3IEwyMSwxMyBMMjEsMTggQzIxLDE4LjU1MjI4NDcgMjAuNTUyMjg0NywxOSAyMCwxOSBDMTkuNTE0NTg5NywxOSAxOS4xMDE5MTUsMTguNjUyMDAwNyAxOS4wMTAwNTIxLDE4LjEzNDUxMjMgTDE5LDE4IEwxOSwxMyBDMTksMTIuNDQ3NzE1MyAxOS40NDc3MTUzLDEyIDIwLDEyIFoiIGZpbGw9IiMyMTIzMjQiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9oiIgZmlsbD0iI0ZGRkZGRiIgeD0iMTguNSIgeT0iMTciIHdpZHRoPSIzIiBoZWlnaHQ9IjYiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaIiIGZpbGw9IiNGRkZGRkYiIHg9IjE3IiB5PSIxOC41IiB3aWR0aD0iNiIgaGVpZ2h0PSIzIj48L3JlY3Q+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMjAsMjEuNSBDMjAuMjQ1NDU5OSwyMS41IDIwLjQ0OTYwODQsMjEuNjc2ODc1MiAyMC40OTE5NDQzLDIxLjkxMDEyNDQgTDIwLjUsMjIgTDIwLjUsMjcgQzIwLjUsMjcuMjc2MTQyNCAyMC4yNzYxNDI0LDI3LjUgMjAsMjcuNSBDMTkuNzU0NTQwMSwyNy41IDE5LjU1MDM5MTYsMjcuMzIzMTI0OCAxOS41MDgwNTU3LDI3LjA4OTg3NTYgTDE5LjUsMjcgTDE5LjUsMjIgQzE5LjUsMjEuNzIzODU3NiAxOS43MjM4NTc2LDIxLjUgMjAsMjEuNSBaIE0yNywxOS41IEMyNy4yNzYxNDI0LDE5LjUgMjcuNSwxOS43MjM4NTc2IDI3LjUsMjAgQzI3LjUsMjAuMjQ1NDU5OSAyNy4zMjMxMjQ4LDIwLjQ0OTYwODQgMjcuMDg5ODc1NiwyMC40OTE5NDQzIEwyNywyMC41IEwyMiwyMC41IEMyMS43MjM4NTc2LDIwLjUgMjEuNSwyMC4yNzYxNDI0IDIxLjUsMjAgQzIxLjUsMTkuNzU0NTQwMSAyMS42NzY4NzUyLDE5LjU1MDM5MTYgMjEuOTEwMTI0NCwxOS41MDgwNTU3IEwyMiwxOS41IEwyNywxOS41IFogTTE4LDE5LjUgQzE4LjI3NjE0MjQsMTkuNSAxOC41LDE5LjcyMzg1NzYgMTguNSwyMCBDMTguNSwyMC4yNDU0NTk5IDE4LjMyMzEyNDgsMjAuNDQ5NjA4NCAxOC4wODk4NzU2LDIwLjQ5MTk0NDMgTDE4LDIwLjUgTDEzLDIwLjUgQzEyLjcyMzg1NzYsMjAuNSAxMi41LDIwLjI3NjE0MjQgMTIuNSwyMCBDMTIuNSwxOS43NTQ1NDAxIDEyLjY3Njg3NTIsMTkuNTUwMzkxNiAxMi45MTAxMjQ0LDE5LjUwODA1NTcgTDEzLDE5LjUgTDE4LDE5LjUgWiBNMjAsMTIuNSBDMjAuMjQ1NDU5OSwxMi41IDIwLjQ0OTYwODQsMTIuNjc2ODc1MiAyMC40OTE5NDQzLDEyLjkxMDEyNDQgTDIwLjUsMTMgTDIwLjUsMTggQzIwLjUsMTguMjc2MTQyNCAyMC4yNzYxNDI0LDE4LjUgMjAsMTguNSBDMTkuNzU0NTQwMSwxOC41IDE5LjU1MDM5MTYsMTguMzIzMTI0OCAxOS41MDgwNTU3LDE4LjA4OTg3NTYgTDE5LjUsMTggTDE5LjUsMTMgQzE5LjUsMTIuNzIzODU3NiAxOS43MjM4NTc2LDEyLjUgMjAsMTIuNSBaIiBpZD0i5b2i54q257uT5ZCIIiBmaWxsPSIjMjEyMzI0IiBmaWxsLXJ1bGU9Im5vbnplcm8iPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+\",zv=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDdweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSIwIDAgNDcgNDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYwLjEgKDg4MTMzKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT50ZXh0LWN1cnNvcjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGQ9Ik0xNiwyNi41IEMxNS43MjM4NTc2LDI2LjUgMTUuNSwyNi4yNzYxNDI0IDE1LjUsMjYgQzE1LjUsMjUuNzU0NTQwMSAxNS42NzY4NzUyLDI1LjU1MDM5MTYgMTUuOTEwMTI0NCwyNS41MDgwNTU3IEwxNiwyNS41IEwxOS41LDI1LjUgTDE5LjUsMTQuNSBMMTYsMTQuNSBDMTUuNzIzODU3NiwxNC41IDE1LjUsMTQuMjc2MTQyNCAxNS41LDE0IEMxNS41LDEzLjc1NDU0MDEgMTUuNjc2ODc1MiwxMy41NTAzOTE2IDE1LjkxMDEyNDQsMTMuNTA4MDU1NyBMMTYsMTMuNSBMMjQsMTMuNSBDMjQuMjc2MTQyNCwxMy41IDI0LjUsMTMuNzIzODU3NiAyNC41LDE0IEMyNC41LDE0LjI0NTQ1OTkgMjQuMzIzMTI0OCwxNC40NDk2MDg0IDI0LjA4OTg3NTYsMTQuNDkxOTQ0MyBMMjQsMTQuNSBMMjAuNSwxNC41IEwyMC41LDI1LjUgTDI0LDI1LjUgQzI0LjI3NjE0MjQsMjUuNSAyNC41LDI1LjcyMzg1NzYgMjQuNSwyNiBDMjQuNSwyNi4yNDU0NTk5IDI0LjMyMzEyNDgsMjYuNDQ5NjA4NCAyNC4wODk4NzU2LDI2LjQ5MTk0NDMgTDI0LDI2LjUgTDE2LDI2LjUgWiIgaWQ9InBhdGgtMSI+PC9wYXRoPgogICAgICAgIDxmaWx0ZXIgeD0iLTI4NC4wJSIgeT0iLTgxLjUlIiB3aWR0aD0iNjY4LjElIiBoZWlnaHQ9IjI5My45JSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTIiPgogICAgICAgICAgICA8ZmVNb3JwaG9sb2d5IHJhZGl1cz0iMSIgb3BlcmF0b3I9ImRpbGF0ZSIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd1NwcmVhZE91dGVyMSI+PC9mZU1vcnBob2xvZ3k+CiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjIiIGluPSJzaGFkb3dTcHJlYWRPdXRlcjEiIHJlc3VsdD0ic2hhZG93T2Zmc2V0T3V0ZXIxIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIzIiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgICAgIDxmZUNvbXBvc2l0ZSBpbj0ic2hhZG93Qmx1ck91dGVyMSIgaW4yPSJTb3VyY2VBbHBoYSIgb3BlcmF0b3I9Im91dCIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlQ29tcG9zaXRlPgogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgMCAwIDAgMC4xNiAwIiB0eXBlPSJtYXRyaXgiIGluPSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlQ29sb3JNYXRyaXg+CiAgICAgICAgPC9maWx0ZXI+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0i6aG16Z2iLTQiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJXaGl0ZWJvYXJkLUd1aWRlbGluZXMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zODguMDAwMDAwLCAtNjcyLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0idGV4dC1jdXJzb3IiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM5Mi4wMDAwMDAsIDY3Mi4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaLlpIfku70tNDAiIGZpbGw9IiNGRkZGRkYiIG9wYWNpdHk9IjAuMDEiIHg9IjAiIHk9IjAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcng9IjIiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxnIGlkPSLlvaLnirbnu5PlkIgiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSJibGFjayIgZmlsbC1vcGFjaXR5PSIxIiBmaWx0ZXI9InVybCgjZmlsdGVyLTIpIiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMSIgZD0iTTE5LDI1IEwxOSwxNSBMMTYsMTUgQzE1LjQ0NzcxNTMsMTUgMTUsMTQuNTUyMjg0NyAxNSwxNCBDMTUsMTMuNTE0NTg5NyAxNS4zNDc5OTkzLDEzLjEwMTkxNSAxNS44NjU0ODc3LDEzLjAxMDA1MjEgTDE2LDEzIEwyNCwxMyBDMjQuNTUyMjg0NywxMyAyNSwxMy40NDc3MTUzIDI1LDE0IEMyNSwxNC40ODU0MTAzIDI0LjY1MjAwMDcsMTQuODk4MDg1IDI0LjEzNDUxMjMsMTQuOTg5OTQ3OSBMMjQsMTUgTDIxLDE1IEwyMSwyNSBMMjQsMjUgQzI0LjU1MjI4NDcsMjUgMjUsMjUuNDQ3NzE1MyAyNSwyNiBDMjUsMjYuNDg1NDEwMyAyNC42NTIwMDA3LDI2Ljg5ODA4NSAyNC4xMzQ1MTIzLDI2Ljk4OTk0NzkgTDI0LDI3IEwxNiwyNyBDMTUuNDQ3NzE1MywyNyAxNSwyNi41NTIyODQ3IDE1LDI2IEMxNSwyNS41MTQ1ODk3IDE1LjM0Nzk5OTMsMjUuMTAxOTE1IDE1Ljg2NTQ4NzcsMjUuMDEwMDUyMSBMMTYsMjUgTDE5LDI1IFoiIGZpbGw9IiMyMTIzMjQiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=\",Dv=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjhweCIgaGVpZ2h0PSIyOHB4IiB2aWV3Qm94PSIwIDAgMjggMjgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT7nvJbnu4QgMjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxmaWx0ZXIgeD0iLTEyMC4wJSIgeT0iLTEyMC4wJSIgd2lkdGg9IjM0MC4wJSIgaGVpZ2h0PSIzNDAuMCUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0xIj4KICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iNCIgaW49IlNvdXJjZUdyYXBoaWMiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgPC9maWx0ZXI+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0i6aG16Z2iMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Iue8lue7hC0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5LjAwMDAwMCwgOS4wMDAwMDApIiBmaWxsPSIjRkYwMTAwIj4KICAgICAgICAgICAgPGNpcmNsZSBpZD0i5qSt5ZyG5b2iIiBmaWx0ZXI9InVybCgjZmlsdGVyLTEpIiBjeD0iNSIgY3k9IjUiIHI9IjUiPjwvY2lyY2xlPgogICAgICAgICAgICA8cGF0aCBkPSJNNSw4IEM2LjY1Njg1NDI1LDggOCw2LjY1Njg1NDI1IDgsNSBDOCwzLjM0MzE0NTc1IDYuNjU2ODU0MjUsMiA1LDIgQzMuMzQzMTQ1NzUsMiAyLDMuMzQzMTQ1NzUgMiw1IEMyLDYuNjU2ODU0MjUgMy4zNDMxNDU3NSw4IDUsOCBaIE01LDYuMjg1NzE0MjkgQzQuMjg5OTE5NjEsNi4yODU3MTQyOSAzLjcxNDI4NTcxLDUuNzEwMDgwMzkgMy43MTQyODU3MSw1IEMzLjcxNDI4NTcxLDQuMjg5OTE5NjEgNC4yODk5MTk2MSwzLjcxNDI4NTcxIDUsMy43MTQyODU3MSBDNS43MTAwODAzOSwzLjcxNDI4NTcxIDYuMjg1NzE0MjksNC4yODk5MTk2MSA2LjI4NTcxNDI5LDUgQzYuMjg1NzE0MjksNS43MTAwODAzOSA1LjcxMDA4MDM5LDYuMjg1NzE0MjkgNSw2LjI4NTcxNDI5IFoiIGlkPSLmpK3lnIblvaIiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+\";const Zu={[A.ApplianceNames.pencil]:Tv,[A.ApplianceNames.selector]:kv,[A.ApplianceNames.eraser]:Nv,[A.ApplianceNames.shape]:Pv,[A.ApplianceNames.text]:zv,[A.ApplianceNames.laserPointer]:Dv};class Lv{constructor(t,i,n){var s;this.manager=t,this.enableCursor=i,this.cursorInstances=new Map,this.sideEffectManager=new Fn.SideEffectManager,this.store=this.manager.store,this.applianceIcons=Zu,this.onCursorMove=o=>{const a=this.initCursorInstance(o.uid);if(o.state===Id.Leave)a.leave();else{const l=a.updateMember();this.canMoveCursor(l)&&a.move(o.position)}},this.initCursorInstance=o=>{let a=this.cursorInstances.get(o);return a||(a=new Av(this.manager,o,this,ie.wrapper),this.cursorInstances.set(o,a)),a},this.mouseMoveListener=E.throttle(o=>{o.pointerType===\"touch\"&&!o.isPrimary||this.updateCursor(this.getType(o),o.clientX,o.clientY)},48),this.getPoint=(o,a,l)=>{var d;const u=(d=o==null?void 0:o.divElement)==null?void 0:d.getBoundingClientRect();if(u)return o==null?void 0:o.convertToPointInWorld({x:a-u.x,y:l-u.y})},this.getType=o=>{var u;const a=o.target,l=this.manager.focusApp;switch(a.parentElement){case this.mainViewElement:return{type:\"main\"};case((u=l==null?void 0:l.view)==null?void 0:u.divElement):return{type:\"app\"};default:return{type:\"main\"}}},this.mouseLeaveListener=()=>{this.hideCursor(this.manager.uid)},this.roomMembers=(s=this.manager.room)==null?void 0:s.state.roomMembers;const r=ie.wrapper;r&&this.setupWrapper(r),this.sideEffectManager.add(()=>R.on(\"cursorMove\",this.onCursorMove)),this.sideEffectManager.add(()=>R.on(\"playgroundSizeChange\",()=>this.updateContainerRect())),n&&(this.applianceIcons=q(q({},Zu),n))}canMoveCursor(t){const i=(t==null?void 0:t.memberState.currentApplianceName)===A.ApplianceNames.laserPointer;return this.enableCursor||i}setupWrapper(t){this.sideEffectManager.add(()=>(t.addEventListener(\"pointerenter\",this.mouseMoveListener),t.addEventListener(\"pointermove\",this.mouseMoveListener),t.addEventListener(\"pointerleave\",this.mouseLeaveListener),()=>{t.removeEventListener(\"pointerenter\",this.mouseMoveListener),t.removeEventListener(\"pointermove\",this.mouseMoveListener),t.removeEventListener(\"pointerleave\",this.mouseLeaveListener)})),this.wrapperRect=t.getBoundingClientRect()}setMainViewDivElement(t){this.mainViewElement=t}get boxState(){return this.store.getBoxState()}get focusView(){var t;return(t=this.manager.focusApp)==null?void 0:t.view}updateCursor(t,i,n){if(this.wrapperRect&&this.manager.canOperate){const r=t.type===\"main\"?this.manager.mainView:this.focusView,s=this.getPoint(r,i,n);s&&this.manager.dispatchInternalEvent(J.CursorMove,{uid:this.manager.uid,position:{x:s.x,y:s.y,type:t.type}})}}updateContainerRect(){var t,i;this.containerRect=(t=ie.container)==null?void 0:t.getBoundingClientRect(),this.wrapperRect=(i=ie.wrapper)==null?void 0:i.getBoundingClientRect()}deleteCursor(t){this.store.cleanCursor(t);const i=this.cursorInstances.get(t);i&&i.destroy()}hideCursor(t){const i=this.cursorInstances.get(t);i&&i.hide()}destroy(){this.sideEffectManager.flushAll(),this.cursorInstances.size&&(this.cursorInstances.forEach(t=>{t.destroy()}),this.cursorInstances.clear())}}class jv{constructor(t){this.manager=t,R.on(\"changePageState\",()=>{se.emit(\"pageStateChange\",this.toObject())})}get index(){var t;return((t=this.manager)==null?void 0:t.store.getMainViewSceneIndex())||0}get length(){var t;return((t=this.manager)==null?void 0:t.mainViewScenesLength)||0}toObject(){return{index:this.index>=this.length?this.length-1:this.index,length:this.length}}}class Bv{constructor(t){this.ctx=t,this.reactors=new Map,this.disposers=new Map,this.onPhaseChanged=async i=>{var n,r;i===A.RoomPhase.Reconnecting&&this.ctx.emitter.emit(\"startReconnect\"),i===A.RoomPhase.Connected&&this.phase===A.RoomPhase.Reconnecting&&((n=this.room)!=null&&n.isWritable?(r=this.room)==null||r.dispatchMagixEvent(eo,{}):(await Gr(500),this.onReconnected())),this.phase=i},this.onReconnected=E.debounce(()=>{this._onReconnected()},1e3),this._onReconnected=()=>{ai(\"onReconnected refresh reactors\"),this.releaseDisposers(),this.reactors.forEach((i,n)=>{E.isFunction(i)&&this.disposers.set(n,i())}),this.ctx.emitter.emit(\"onReconnected\")}}setRoom(t){this.room=t,this.phase=t==null?void 0:t.phase,t&&(t.callbacks.off(\"onPhaseChanged\",this.onPhaseChanged),t.callbacks.on(\"onPhaseChanged\",this.onPhaseChanged),t.addMagixEventListener(eo,i=>{i.authorId===t.observerId&&this.onReconnected()},{fireSelfEventAfterCommit:!0}))}setContext(t){this.ctx=t}releaseDisposers(){this.disposers.forEach(t=>{E.isFunction(t)&&t()}),this.disposers.clear()}refresh(){this._onReconnected()}add(t,i){const n=this.disposers.get(t);n&&E.isFunction(n)&&n(),E.isFunction(i)&&(this.reactors.set(t,i),this.disposers.set(t,i()))}remove(t){this.reactors.has(t)&&this.reactors.delete(t);const i=this.disposers.get(t);i&&(E.isFunction(i)&&i(),this.disposers.delete(t))}hasReactor(t){return this.reactors.has(t)}destroy(){var t,i;(t=this.room)==null||t.callbacks.off(\"onPhaseChanged\",this.onPhaseChanged),(i=this.room)==null||i.removeMagixEventListener(eo,this.onReconnected),this.releaseDisposers()}}const Rv=(e,t)=>{if(A.isPlayer(e))Ov(e);else{if(e=e,Object.getOwnPropertyDescriptor(e,\"disableCameraTransform\"))return;Object.defineProperty(e,\"disableCameraTransform\",{get(){return t.mainView.disableCameraTransform},set(n){t.mainView.disableCameraTransform=n}}),Object.defineProperty(e,\"canUndoSteps\",{get(){return t.canUndoSteps}}),Object.defineProperty(e,\"canRedoSteps\",{get(){return t.canRedoSteps}}),e.moveCamera=n=>t.moveCamera(n),e.moveCameraToContain=(...n)=>t.moveCameraToContain(...n),e.convertToPointInWorld=(...n)=>t.mainView.convertToPointInWorld(...n),e.setCameraBound=(...n)=>t.mainView.setCameraBound(...n),e.scenePreview=(...n)=>t.mainView.scenePreview(...n),e.fillSceneSnapshot=(...n)=>t.mainView.fillSceneSnapshot(...n),e.generateScreenshot=(...n)=>t.mainView.generateScreenshot(...n),e.setMemberState=(...n)=>t.mainView.setMemberState(...n),e.redo=()=>t.redo(),e.undo=()=>t.undo(),e.cleanCurrentScene=()=>t.cleanCurrentScene(),e.delete=()=>t.delete(),e.copy=()=>t.copy(),e.paste=()=>t.paste(),e.duplicate=()=>t.duplicate(),e.insertImage=(...n)=>t.insertImage(...n),e.completeImageUpload=(...n)=>t.completeImageUpload(...n),e.insertText=(...n)=>t.insertText(...n),e.lockImage=(...n)=>t.lockImage(...n),e.lockImages=(...n)=>t.lockImages(...n),_v(e,t)}},_v=(e,t)=>{const i=e.removeScenes;e.removeScenes=(n,r)=>{var o;n===De&&((o=t.appManager)==null||o.updateRootDirRemoving(!0));const s=i.call(e,n);return R.emit(\"removeScenes\",{scenePath:n,index:r}),s}},Ov=e=>{const t=e.seekToProgressTime;async function i(n){await R.emit(\"seekStart\");const r=await t.call(e,n);return R.emit(\"seek\",n),r}e.seekToProgressTime=i};var Vv=Object.defineProperty,Uv=Object.defineProperties,Wv=Object.getOwnPropertyDescriptors,Gu=Object.getOwnPropertySymbols,$v=Object.prototype.hasOwnProperty,Hv=Object.prototype.propertyIsEnumerable,Yu=(e,t,i)=>t in e?Vv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,ph=(e,t)=>{for(var i in t||(t={}))$v.call(t,i)&&Yu(e,i,t[i]);if(Gu)for(var i of Gu(t))Hv.call(t,i)&&Yu(e,i,t[i]);return e},fh=(e,t)=>Uv(e,Wv(t)),Fv=`.netless-app-docs-viewer-content{position:relative;height:100%;overflow:hidden}.netless-app-docs-viewer-preview-mask{display:none;position:absolute;z-index:200;top:0;left:0;width:100%;height:100%}.netless-app-docs-viewer-preview{display:flex;flex-direction:column;align-items:center;position:absolute;z-index:300;top:0;left:0;width:33%;max-width:200px;height:100%;padding-top:10px;transform:translate(-100%);background:rgba(237,237,240,.9);box-shadow:inset -1px 0 #0000001c;transition:transform .4s}.netless-app-docs-viewer-preview-active .netless-app-docs-viewer-preview-mask{display:block}.netless-app-docs-viewer-preview-active .netless-app-docs-viewer-preview{transform:translate(0)}.netless-app-docs-viewer-preview-page{position:relative;display:block;width:55%;margin-bottom:10px;font-size:0;color:transparent;outline:none;border:7px solid transparent;border-radius:4px;transition:border-color .3s;user-select:none}.netless-app-docs-viewer-preview-page:hover,.netless-app-docs-viewer-preview-page.netless-app-docs-viewer-preview-page-active{border-color:#444e601a}.netless-app-docs-viewer-preview-page>img{width:100%;height:auto;box-sizing:border-box;border:1px solid rgba(0,0,0,.5);border-radius:1px;background-color:#fff;box-shadow:0 2px 8px #0000004d}.netless-app-docs-viewer-preview-page-name{position:absolute;top:1px;left:-10px;transform:translate(-100%);text-align:right;font-size:12px;color:#5f5f5f;user-select:none}.netless-app-docs-viewer-footer{box-sizing:border-box;height:26px;display:flex;align-items:center;padding:0 16px;border-top:1px solid #eeeef7;color:#191919}.netless-app-docs-viewer-float-footer{width:100%;min-height:26px;position:absolute;left:0;bottom:0;z-index:2000;background:rgba(249,249,252,.9);transition:opacity .4s}.netless-app-docs-viewer-footer-btn{box-sizing:border-box;width:26px;height:26px;font-size:0;margin:0;padding:3px;border:none;border-radius:1px;outline:none;color:currentColor;background:transparent;transition:background .4s;cursor:pointer;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.netless-app-docs-viewer-footer-btn:hover{background:rgba(237,237,240,.9)}@media (hover: none){.netless-app-docs-viewer-footer-btn:hover{background:transparent!important}}.netless-app-docs-viewer-footer-btn>svg{width:100%;height:100%}.netless-app-docs-viewer-footer-btn>svg:nth-of-type(2){display:none}.netless-app-docs-viewer-footer-btn.netless-app-docs-viewer-footer-btn-playing>svg:nth-of-type(1){display:none}.netless-app-docs-viewer-footer-btn.netless-app-docs-viewer-footer-btn-playing>svg:nth-of-type(2){display:initial}.netless-app-docs-viewer-footer-btn~.netless-app-docs-viewer-footer-btn{margin-left:15px}.netless-app-docs-viewer-page-jumps{flex:1;display:flex;justify-content:center;align-items:center}.netless-app-docs-viewer-page-number{margin-left:auto;font-size:13px;user-select:none;white-space:nowrap;word-break:keep-all}.netless-app-docs-viewer-page-number-input{border:none;outline:none;width:3em;margin:0;padding:0 2px;text-align:right;font-size:13px;line-height:1;font-weight:400;font-family:inherit;border-radius:2px;color:currentColor;background:transparent;transition:background .4s;user-select:text;-webkit-tap-highlight-color:rgba(0,0,0,0)}.netless-app-docs-viewer-page-number-input:hover,.netless-app-docs-viewer-page-number-input:focus,.netless-app-docs-viewer-page-number-input:active{background:#fff;box-shadow:#63636333 0 2px 8px}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-footer-btn{cursor:not-allowed}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-footer-btn:hover{background:transparent}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input{cursor:not-allowed}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:hover,.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:focus,.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:active{background:transparent;box-shadow:none}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:disabled{color:inherit}.netless-app-docs-viewer-readonly.netless-app-docs-viewer-float-footer{display:none}.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input{color:#a6a6a8}.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input:active,.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input:focus,.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input:hover{color:#222}.telebox-color-scheme-dark .netless-app-docs-viewer-footer{color:#a6a6a8;background:#2d2d33;border-top:none}.telebox-color-scheme-dark .netless-app-docs-viewer-footer-btn:hover{background:#212126}.telebox-color-scheme-dark .netless-app-docs-viewer-preview{background:rgba(50,50,50,.9)}.netless-app-docs-viewer-static-scrollbar{position:absolute;top:0;right:0;z-index:2147483647;width:8px;min-height:30px;margin:0;padding:0;border:none;outline:none;border-radius:4px;background:rgba(68,78,96,.4);box-shadow:1px 1px 8px #ffffffb3;opacity:0;transition:background .4s,opacity .4s 3s,transform .2s;user-select:none}.netless-app-docs-viewer-static-scrollbar.netless-app-docs-viewer-static-scrollbar-dragging{background:rgba(68,78,96,.6);opacity:1;transition:background .4s,opacity .4s 3s!important}.netless-app-docs-viewer-static-scrollbar:hover,.netless-app-docs-viewer-static-scrollbar:focus{background:rgba(68,78,96,.5)}.netless-app-docs-viewer-static-scrollbar:active{background:rgba(68,78,96,.6)}.netless-app-docs-viewer-content:hover .netless-app-docs-viewer-static-scrollbar{opacity:1;transition:background .4s,opacity .4s,transform .2s}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-static-scrollbar{display:none}.netless-app-docs-viewer-static-pages:hover .netless-app-docs-viewer-static-scrollbar{opacity:1;transition:background .4s,opacity .4s,transform .2s}.page-renderer-pages-container{position:relative;overflow:hidden}.page-renderer-page{position:absolute;top:0;left:0;background-position:center;background-size:cover;background-repeat:no-repeat}.page-renderer-pages-container.is-hwa .page-renderer-page{will-change:transform}.page-renderer-page-img{display:block;width:100%;height:auto;user-select:none}.netless-app-docs-viewer-static-pages{overflow:hidden;position:relative;height:100%;user-select:none}.netless-app-docs-viewer-static-page{display:block;width:100%;height:auto;user-select:none}.netless-app-docs-viewer-static-wb-view,.netless-app-docs-viewer-dynamic-wb-view{position:absolute;top:0;left:0;width:100%;height:100%;z-index:100;overflow:hidden}.netless-app-docs-viewer-dynamic-wb-view .cursor-clicker .ppt-event-source{cursor:pointer}\n`;const Qv=(e,t,i,n)=>{if(i===\"length\"||i===\"prototype\"||i===\"arguments\"||i===\"caller\")return;const r=Object.getOwnPropertyDescriptor(e,i),s=Object.getOwnPropertyDescriptor(t,i);!Zv(r,s)&&n||Object.defineProperty(e,i,s)},Zv=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},Gv=(e,t)=>{const i=Object.getPrototypeOf(t);i!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,i)},Yv=(e,t)=>`/* Wrapped ${e}*/\n${t}`,Xv=Object.getOwnPropertyDescriptor(Function.prototype,\"toString\"),Jv=Object.getOwnPropertyDescriptor(Function.prototype.toString,\"name\"),Kv=(e,t,i)=>{const n=i===\"\"?\"\":`with ${i.trim()}() `,r=Yv.bind(null,n,t.toString());Object.defineProperty(r,\"name\",Jv),Object.defineProperty(e,\"toString\",fh(ph({},Xv),{value:r}))};function qv(e,t,{ignoreNonConfigurable:i=!1}={}){const{name:n}=e;for(const r of Reflect.ownKeys(t))Qv(e,t,r,i);return Gv(e,t),Kv(e,t,n),e}const ew=(e,t={})=>{if(typeof e!=\"function\")throw new TypeError(`Expected the first argument to be a function, got \\`${typeof e}\\``);const{wait:i=0,maxWait:n=Number.Infinity,before:r=!1,after:s=!0}=t;if(!r&&!s)throw new Error(\"Both `before` and `after` are false, function wouldn't be called.\");let o,a,l;const u=function(...d){const p=this,m=()=>{o=void 0,a&&(clearTimeout(a),a=void 0),s&&(l=e.apply(p,d))},v=()=>{a=void 0,o&&(clearTimeout(o),o=void 0),s&&(l=e.apply(p,d))},S=r&&!o;return clearTimeout(o),o=setTimeout(m,i),n>0&&n!==Number.Infinity&&!a&&(a=setTimeout(v,n)),S&&(l=e.apply(p,d)),l};return qv(u,e),u.cancel=()=>{o&&(clearTimeout(o),o=void 0),a&&(clearTimeout(a),a=void 0)},u},gh=\"!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\",tw=gh.length,Xu=Array(20),tn=()=>{for(let e=0;e<20;e++)Xu[e]=gh.charAt(Math.random()*tw);return Xu.join(\"\")};class Ls{constructor(){this.disposers=new Map}add(t,i=tn()){return this.flush(i),this.disposers.set(i,t()),i}addDisposer(t,i=tn()){return this.flush(i),this.disposers.set(i,t),i}addEventListener(t,i,n,r,s=tn()){return this.add(()=>(t.addEventListener(i,n,r),()=>t.removeEventListener(i,n,r)),s),s}setTimeout(t,i,n=tn()){return this.add(()=>{const r=window.setTimeout(()=>{this.remove(n),t()},i);return()=>window.clearTimeout(r)},n)}setInterval(t,i,n=tn()){return this.add(()=>{const r=window.setInterval(t,i);return()=>window.clearInterval(r)},n)}remove(t){const i=this.disposers.get(t);return this.disposers.delete(t),i}flush(t){const i=this.remove(t);if(i)try{i()}catch(n){console.error(n)}}flushAll(){this.disposers.forEach(t=>{try{t()}catch(i){console.error(i)}}),this.disposers.clear()}}var li=[],iw=function(){return li.some(function(e){return e.activeTargets.length>0})},nw=function(){return li.some(function(e){return e.skippedTargets.length>0})},Ju=\"ResizeObserver loop completed with undelivered notifications.\",rw=function(){var e;typeof ErrorEvent==\"function\"?e=new ErrorEvent(\"error\",{message:Ju}):(e=document.createEvent(\"Event\"),e.initEvent(\"error\",!1,!1),e.message=Ju),window.dispatchEvent(e)},Ln;(function(e){e.BORDER_BOX=\"border-box\",e.CONTENT_BOX=\"content-box\",e.DEVICE_PIXEL_CONTENT_BOX=\"device-pixel-content-box\"})(Ln||(Ln={}));var ui=function(e){return Object.freeze(e)},sw=function(){function e(t,i){this.inlineSize=t,this.blockSize=i,ui(this)}return e}(),mh=function(){function e(t,i,n,r){return this.x=t,this.y=i,this.width=n,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,ui(this)}return e.prototype.toJSON=function(){var t=this,i=t.x,n=t.y,r=t.top,s=t.right,o=t.bottom,a=t.left,l=t.width,u=t.height;return{x:i,y:n,top:r,right:s,bottom:o,left:a,width:l,height:u}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),ul=function(e){return e instanceof SVGElement&&\"getBBox\"in e},vh=function(e){if(ul(e)){var t=e.getBBox(),i=t.width,n=t.height;return!i&&!n}var r=e,s=r.offsetWidth,o=r.offsetHeight;return!(s||o||e.getClientRects().length)},Ku=function(e){var t,i;if(e instanceof Element)return!0;var n=(i=(t=e)===null||t===void 0?void 0:t.ownerDocument)===null||i===void 0?void 0:i.defaultView;return!!(n&&e instanceof n.Element)},ow=function(e){switch(e.tagName){case\"INPUT\":if(e.type!==\"image\")break;case\"VIDEO\":case\"AUDIO\":case\"EMBED\":case\"OBJECT\":case\"CANVAS\":case\"IFRAME\":case\"IMG\":return!0}return!1},Cn=typeof window!=\"undefined\"?window:{},fr=new WeakMap,qu=/auto|scroll/,aw=/^tb|vertical/,lw=/msie|trident/i.test(Cn.navigator&&Cn.navigator.userAgent),st=function(e){return parseFloat(e||\"0\")},zi=function(e,t,i){return e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=!1),new sw((i?t:e)||0,(i?e:t)||0)},ec=ui({devicePixelContentBoxSize:zi(),borderBoxSize:zi(),contentBoxSize:zi(),contentRect:new mh(0,0,0,0)}),wh=function(e,t){if(t===void 0&&(t=!1),fr.has(e)&&!t)return fr.get(e);if(vh(e))return fr.set(e,ec),ec;var i=getComputedStyle(e),n=ul(e)&&e.ownerSVGElement&&e.getBBox(),r=!lw&&i.boxSizing===\"border-box\",s=aw.test(i.writingMode||\"\"),o=!n&&qu.test(i.overflowY||\"\"),a=!n&&qu.test(i.overflowX||\"\"),l=n?0:st(i.paddingTop),u=n?0:st(i.paddingRight),d=n?0:st(i.paddingBottom),p=n?0:st(i.paddingLeft),m=n?0:st(i.borderTopWidth),v=n?0:st(i.borderRightWidth),S=n?0:st(i.borderBottomWidth),y=n?0:st(i.borderLeftWidth),h=p+u,c=l+d,f=y+v,g=m+S,w=a?e.offsetHeight-g-e.clientHeight:0,x=o?e.offsetWidth-f-e.clientWidth:0,C=r?h+f:0,z=r?c+g:0,D=n?n.width:st(i.width)-C-x,T=n?n.height:st(i.height)-z-w,b=D+h+x+f,j=T+c+w+g,B=ui({devicePixelContentBoxSize:zi(Math.round(D*devicePixelRatio),Math.round(T*devicePixelRatio),s),borderBoxSize:zi(b,j,s),contentBoxSize:zi(D,T,s),contentRect:new mh(p,l,D,T)});return fr.set(e,B),B},yh=function(e,t,i){var n=wh(e,i),r=n.borderBoxSize,s=n.contentBoxSize,o=n.devicePixelContentBoxSize;switch(t){case Ln.DEVICE_PIXEL_CONTENT_BOX:return o;case Ln.BORDER_BOX:return r;default:return s}},uw=function(){function e(t){var i=wh(t);this.target=t,this.contentRect=i.contentRect,this.borderBoxSize=ui([i.borderBoxSize]),this.contentBoxSize=ui([i.contentBoxSize]),this.devicePixelContentBoxSize=ui([i.devicePixelContentBoxSize])}return e}(),xh=function(e){if(vh(e))return 1/0;for(var t=0,i=e.parentNode;i;)t+=1,i=i.parentNode;return t},cw=function(){var e=1/0,t=[];li.forEach(function(o){if(o.activeTargets.length!==0){var a=[];o.activeTargets.forEach(function(u){var d=new uw(u.target),p=xh(u.target);a.push(d),u.lastReportedSize=yh(u.target,u.observedBox),p<e&&(e=p)}),t.push(function(){o.callback.call(o.observer,a,o.observer)}),o.activeTargets.splice(0,o.activeTargets.length)}});for(var i=0,n=t;i<n.length;i++){var r=n[i];r()}return e},tc=function(e){li.forEach(function(i){i.activeTargets.splice(0,i.activeTargets.length),i.skippedTargets.splice(0,i.skippedTargets.length),i.observationTargets.forEach(function(r){r.isActive()&&(xh(r.target)>e?i.activeTargets.push(r):i.skippedTargets.push(r))})})},dw=function(){var e=0;for(tc(e);iw();)e=cw(),tc(e);return nw()&&rw(),e>0},go,Sh=[],hw=function(){return Sh.splice(0).forEach(function(e){return e()})},pw=function(e){if(!go){var t=0,i=document.createTextNode(\"\"),n={characterData:!0};new MutationObserver(function(){return hw()}).observe(i,n),go=function(){i.textContent=\"\"+(t?t--:t++)}}Sh.push(e),go()},fw=function(e){pw(function(){requestAnimationFrame(e)})},Dr=0,gw=function(){return!!Dr},mw=250,vw={attributes:!0,characterData:!0,childList:!0,subtree:!0},ic=[\"resize\",\"load\",\"transitionend\",\"animationend\",\"animationstart\",\"animationiteration\",\"keyup\",\"keydown\",\"mouseup\",\"mousedown\",\"mouseover\",\"mouseout\",\"blur\",\"focus\"],nc=function(e){return e===void 0&&(e=0),Date.now()+e},mo=!1,ww=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var i=this;if(t===void 0&&(t=mw),!mo){mo=!0;var n=nc(t);fw(function(){var r=!1;try{r=dw()}finally{if(mo=!1,t=n-nc(),!gw())return;r?i.run(1e3):t>0?i.run(t):i.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,i=function(){return t.observer&&t.observer.observe(document.body,vw)};document.body?i():Cn.addEventListener(\"DOMContentLoaded\",i)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),ic.forEach(function(i){return Cn.addEventListener(i,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),ic.forEach(function(i){return Cn.removeEventListener(i,t.listener,!0)}),this.stopped=!0)},e}(),Xo=new ww,rc=function(e){!Dr&&e>0&&Xo.start(),Dr+=e,!Dr&&Xo.stop()},yw=function(e){return!ul(e)&&!ow(e)&&getComputedStyle(e).display===\"inline\"},xw=function(){function e(t,i){this.target=t,this.observedBox=i||Ln.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=yh(this.target,this.observedBox,!0);return yw(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),Sw=function(){function e(t,i){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=i}return e}(),gr=new WeakMap,sc=function(e,t){for(var i=0;i<e.length;i+=1)if(e[i].target===t)return i;return-1},mr=function(){function e(){}return e.connect=function(t,i){var n=new Sw(t,i);gr.set(t,n)},e.observe=function(t,i,n){var r=gr.get(t),s=r.observationTargets.length===0;sc(r.observationTargets,i)<0&&(s&&li.push(r),r.observationTargets.push(new xw(i,n&&n.box)),rc(1),Xo.schedule())},e.unobserve=function(t,i){var n=gr.get(t),r=sc(n.observationTargets,i),s=n.observationTargets.length===1;r>=0&&(s&&li.splice(li.indexOf(n),1),n.observationTargets.splice(r,1),rc(-1))},e.disconnect=function(t){var i=this,n=gr.get(t);n.observationTargets.slice().forEach(function(r){return i.unobserve(t,r.target)}),n.activeTargets.splice(0,n.activeTargets.length)},e}(),Cw=function(){function e(t){if(arguments.length===0)throw new TypeError(\"Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.\");if(typeof t!=\"function\")throw new TypeError(\"Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.\");mr.connect(this,t)}return e.prototype.observe=function(t,i){if(arguments.length===0)throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.\");if(!Ku(t))throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element\");mr.observe(this,t,i)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.\");if(!Ku(t))throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element\");mr.unobserve(this,t)},e.prototype.disconnect=function(){mr.disconnect(this)},e.toString=function(){return\"function ResizeObserver () { [polyfill code] }\"},e}();function Mw(e){const t=\"http://www.w3.org/2000/svg\",i=document.createElementNS(t,\"svg\");i.setAttribute(\"class\",`${e}-footer-icon-sidebar`),i.setAttribute(\"viewBox\",\"0 0 64 64\");const n=document.createElementNS(t,\"path\");return n.setAttribute(\"fill\",\"currentColor\"),n.setAttribute(\"d\",\"M50 8H14c-3.309 0-6 2.691-6 6v36c0 3.309 2.691 6 6 6h36c3.309 0 6-2.691 6-6V14c0-3.309-2.691-6-6-6zM12 50V14c0-1.103.897-2 2-2h8v40h-8c-1.103 0-2-.897-2-2zm40 0c0 1.103-.897 2-2 2H26V12h24c1.103 0 2 .897 2 2z\"),i.appendChild(n),i}function Iw(e){const t=\"http://www.w3.org/2000/svg\",i=document.createElementNS(t,\"svg\");i.setAttribute(\"class\",`${e}-footer-icon-arrow-left`),i.setAttribute(\"viewBox\",\"0 0 500 500\");const n=document.createElementNS(t,\"path\");return n.setAttribute(\"fill\",\"currentColor\"),n.setAttribute(\"d\",\"M177.81 249.959L337.473 90.295c2.722-2.865 2.651-7.378-.143-10.1-2.793-2.65-7.163-2.65-9.956 0l-164.75 164.75c-2.793 2.793-2.793 7.306 0 10.1l164.75 164.75c2.865 2.722 7.378 2.65 10.099-.143 2.651-2.794 2.651-7.163 0-9.957L177.809 249.959z\"),i.appendChild(n),i}function bw(e){const t=\"http://www.w3.org/2000/svg\",i=document.createElementNS(t,\"svg\");i.setAttribute(\"class\",`${e}-footer-icon-arrow-right`),i.setAttribute(\"viewBox\",\"0 0 500 500\");const n=document.createElementNS(t,\"path\");return n.setAttribute(\"fill\",\"currentColor\"),n.setAttribute(\"d\",\"M322.19 250.041L162.527 409.705c-2.722 2.865-2.651 7.378.143 10.1 2.793 2.65 7.163 2.65 9.956 0l164.75-164.75c2.793-2.793 2.793-7.306 0-10.1l-164.75-164.75c-2.865-2.722-7.378-2.65-10.099.143-2.651 2.794-2.651 7.163 0 9.957l159.664 159.736z\"),i.appendChild(n),i}function Ew(e){const t=\"http://www.w3.org/2000/svg\",i=document.createElementNS(t,\"svg\");i.setAttribute(\"class\",`${e}-footer-icon-play`),i.setAttribute(\"viewBox\",\"0 0 500 500\");const n=document.createElementNS(t,\"path\");return n.setAttribute(\"fill\",\"currentColor\"),n.setAttribute(\"d\",\"M418.158 257.419L174.663 413.33c-6.017 3.919-15.708 3.772-21.291-.29-2.791-2.018-4.295-4.483-4.295-7.084V94.109c0-5.65 6.883-10.289 15.271-10.289 4.298 0 8.391 1.307 11.181 3.332l242.629 155.484c6.016 3.917 6.451 10.292.649 14.491-.216.154-.432.154-.649.292zM170.621 391.288l223.116-141.301L170.71 107.753l-.089 283.535z\"),i.appendChild(n),i}function Aw(e){const t=\"http://www.w3.org/2000/svg\",i=document.createElementNS(t,\"svg\");i.setAttribute(\"class\",`${e}-footer-icon-pause`),i.setAttribute(\"viewBox\",\"0 0 500 500\");const n=document.createElementNS(t,\"path\");return n.setAttribute(\"fill\",\"currentColor\"),n.setAttribute(\"d\",\"M312.491 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261zM165.257 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261z\"),i.appendChild(n),i}const Si=typeof window!=\"undefined\",Ch=Si&&!(\"onscroll\"in window)||typeof navigator!=\"undefined\"&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),Mh=Si&&\"IntersectionObserver\"in window,Ih=Si&&\"classList\"in document.createElement(\"p\"),bh=Si&&window.devicePixelRatio>1,Tw={elements_selector:\".lazy\",container:Ch||Si?document:null,threshold:300,thresholds:null,data_src:\"src\",data_srcset:\"srcset\",data_sizes:\"sizes\",data_bg:\"bg\",data_bg_hidpi:\"bg-hidpi\",data_bg_multi:\"bg-multi\",data_bg_multi_hidpi:\"bg-multi-hidpi\",data_poster:\"poster\",class_applied:\"applied\",class_loading:\"loading\",class_loaded:\"loaded\",class_error:\"error\",class_entered:\"entered\",class_exited:\"exited\",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1},Eh=e=>Object.assign({},Tw,e),oc=function(e,t){let i;const n=\"LazyLoad::Initialized\",r=new e(t);try{i=new CustomEvent(n,{detail:{instance:r}})}catch{i=document.createEvent(\"CustomEvent\"),i.initCustomEvent(n,!1,!1,{instance:r})}window.dispatchEvent(i)},kw=(e,t)=>{if(!!t)if(!t.length)oc(e,t);else for(let i=0,n;n=t[i];i+=1)oc(e,n)},bt=\"src\",cl=\"srcset\",dl=\"sizes\",Ah=\"poster\",Xn=\"llOriginalAttrs\",Th=\"data\",hl=\"loading\",kh=\"loaded\",Nh=\"applied\",Nw=\"entered\",pl=\"error\",Ph=\"native\",zh=\"data-\",Dh=\"ll-status\",Be=(e,t)=>e.getAttribute(zh+t),Pw=(e,t,i)=>{var n=zh+t;if(i===null){e.removeAttribute(n);return}e.setAttribute(n,i)},Jn=e=>Be(e,Dh),Ci=(e,t)=>Pw(e,Dh,t),js=e=>Ci(e,null),fl=e=>Jn(e)===null,zw=e=>Jn(e)===hl,Dw=e=>Jn(e)===pl,gl=e=>Jn(e)===Ph,Lw=[hl,kh,Nh,pl],jw=e=>Lw.indexOf(Jn(e))>=0,Jt=(e,t,i,n)=>{if(!!e){if(n!==void 0){e(t,i,n);return}if(i!==void 0){e(t,i);return}e(t)}},Xi=(e,t)=>{if(Ih){e.classList.add(t);return}e.className+=(e.className?\" \":\"\")+t},at=(e,t)=>{if(Ih){e.classList.remove(t);return}e.className=e.className.replace(new RegExp(\"(^|\\\\s+)\"+t+\"(\\\\s+|$)\"),\" \").replace(/^\\s+/,\"\").replace(/\\s+$/,\"\")},Bw=e=>{e.llTempImage=document.createElement(\"IMG\")},Rw=e=>{delete e.llTempImage},Lh=e=>e.llTempImage,Bs=(e,t)=>{if(!t)return;const i=t._observer;!i||i.unobserve(e)},_w=e=>{e.disconnect()},Ow=(e,t,i)=>{t.unobserve_entered&&Bs(e,i)},ml=(e,t)=>{!e||(e.loadingCount+=t)},Vw=e=>{!e||(e.toLoadCount-=1)},jh=(e,t)=>{!e||(e.toLoadCount=t)},Uw=e=>e.loadingCount>0,Ww=e=>e.toLoadCount>0,Bh=e=>{let t=[];for(let i=0,n;n=e.children[i];i+=1)n.tagName===\"SOURCE\"&&t.push(n);return t},vl=(e,t)=>{const i=e.parentNode;if(!i||i.tagName!==\"PICTURE\")return;Bh(i).forEach(t)},Rh=(e,t)=>{Bh(e).forEach(t)},Rs=[bt],_h=[bt,Ah],ts=[bt,cl,dl],Oh=[Th],_s=e=>!!e[Xn],Vh=e=>e[Xn],Uh=e=>delete e[Xn],Vi=(e,t)=>{if(_s(e))return;const i={};t.forEach(n=>{i[n]=e.getAttribute(n)}),e[Xn]=i},$w=e=>{_s(e)||(e[Xn]={backgroundImage:e.style.backgroundImage})},Hw=(e,t,i)=>{if(!i){e.removeAttribute(t);return}e.setAttribute(t,i)},Ui=(e,t)=>{if(!_s(e))return;const i=Vh(e);t.forEach(n=>{Hw(e,n,i[n])})},Fw=e=>{if(!_s(e))return;const t=Vh(e);e.style.backgroundImage=t.backgroundImage},Qw=(e,t,i)=>{Xi(e,t.class_applied),Ci(e,Nh),i&&(t.unobserve_completed&&Bs(e,t),Jt(t.callback_applied,e,i))},Wh=(e,t,i)=>{Xi(e,t.class_loading),Ci(e,hl),i&&(ml(i,1),Jt(t.callback_loading,e,i))},Vt=(e,t,i)=>{!i||e.setAttribute(t,i)},ac=(e,t)=>{Vt(e,dl,Be(e,t.data_sizes)),Vt(e,cl,Be(e,t.data_srcset)),Vt(e,bt,Be(e,t.data_src))},Zw=(e,t)=>{vl(e,i=>{Vi(i,ts),ac(i,t)}),Vi(e,ts),ac(e,t)},Gw=(e,t)=>{Vi(e,Rs),Vt(e,bt,Be(e,t.data_src))},Yw=(e,t)=>{Rh(e,i=>{Vi(i,Rs),Vt(i,bt,Be(i,t.data_src))}),Vi(e,_h),Vt(e,Ah,Be(e,t.data_poster)),Vt(e,bt,Be(e,t.data_src)),e.load()},Xw=(e,t)=>{Vi(e,Oh),Vt(e,Th,Be(e,t.data_src))},Jw=(e,t,i)=>{const n=Be(e,t.data_bg),r=Be(e,t.data_bg_hidpi),s=bh&&r?r:n;!s||(e.style.backgroundImage=`url(\"${s}\")`,Lh(e).setAttribute(bt,s),Wh(e,t,i))},Kw=(e,t,i)=>{const n=Be(e,t.data_bg_multi),r=Be(e,t.data_bg_multi_hidpi),s=bh&&r?r:n;!s||(e.style.backgroundImage=s,Qw(e,t,i))},$h={IMG:Zw,IFRAME:Gw,VIDEO:Yw,OBJECT:Xw},qw=(e,t)=>{const i=$h[e.tagName];!i||i(e,t)},ey=(e,t,i)=>{const n=$h[e.tagName];!n||(n(e,t),Wh(e,t,i))},ty=[\"IMG\",\"IFRAME\",\"VIDEO\",\"OBJECT\"],iy=e=>ty.indexOf(e.tagName)>-1,Hh=(e,t)=>{t&&!Uw(t)&&!Ww(t)&&Jt(e.callback_finish,t)},lc=(e,t,i)=>{e.addEventListener(t,i),e.llEvLisnrs[t]=i},ny=(e,t,i)=>{e.removeEventListener(t,i)},wl=e=>!!e.llEvLisnrs,ry=(e,t,i)=>{wl(e)||(e.llEvLisnrs={});const n=e.tagName===\"VIDEO\"?\"loadeddata\":\"load\";lc(e,n,t),lc(e,\"error\",i)},Jo=e=>{if(!wl(e))return;const t=e.llEvLisnrs;for(let i in t){const n=t[i];ny(e,i,n)}delete e.llEvLisnrs},Fh=(e,t,i)=>{Rw(e),ml(i,-1),Vw(i),at(e,t.class_loading),t.unobserve_completed&&Bs(e,i)},sy=(e,t,i,n)=>{const r=gl(t);Fh(t,i,n),Xi(t,i.class_loaded),Ci(t,kh),Jt(i.callback_loaded,t,n),r||Hh(i,n)},oy=(e,t,i,n)=>{const r=gl(t);Fh(t,i,n),Xi(t,i.class_error),Ci(t,pl),Jt(i.callback_error,t,n),r||Hh(i,n)},yl=(e,t,i)=>{const n=Lh(e)||e;if(wl(n))return;ry(n,o=>{sy(o,e,t,i),Jo(n)},o=>{oy(o,e,t,i),Jo(n)})},ay=(e,t,i)=>{Bw(e),yl(e,t,i),$w(e),Jw(e,t,i),Kw(e,t,i)},ly=(e,t,i)=>{yl(e,t,i),ey(e,t,i)},xl=(e,t,i)=>{iy(e)?ly(e,t,i):ay(e,t,i)},uy=(e,t,i)=>{e.setAttribute(\"loading\",\"lazy\"),yl(e,t,i),qw(e,t),Ci(e,Ph)},uc=e=>{e.removeAttribute(bt),e.removeAttribute(cl),e.removeAttribute(dl)},cy=e=>{vl(e,t=>{uc(t)}),uc(e)},Qh=e=>{vl(e,t=>{Ui(t,ts)}),Ui(e,ts)},dy=e=>{Rh(e,t=>{Ui(t,Rs)}),Ui(e,_h),e.load()},hy=e=>{Ui(e,Rs)},py=e=>{Ui(e,Oh)},fy={IMG:Qh,IFRAME:hy,VIDEO:dy,OBJECT:py},gy=e=>{const t=fy[e.tagName];if(!t){Fw(e);return}t(e)},my=(e,t)=>{fl(e)||gl(e)||(at(e,t.class_entered),at(e,t.class_exited),at(e,t.class_applied),at(e,t.class_loading),at(e,t.class_loaded),at(e,t.class_error))},vy=(e,t)=>{gy(e),my(e,t),js(e),Uh(e)},wy=(e,t,i,n)=>{!i.cancel_on_exit||!zw(e)||e.tagName===\"IMG\"&&(Jo(e),cy(e),Qh(e),at(e,i.class_loading),ml(n,-1),js(e),Jt(i.callback_cancel,e,t,n))},yy=(e,t,i,n)=>{const r=jw(e);Ci(e,Nw),Xi(e,i.class_entered),at(e,i.class_exited),Ow(e,i,n),Jt(i.callback_enter,e,t,n),!r&&xl(e,i,n)},xy=(e,t,i,n)=>{fl(e)||(Xi(e,i.class_exited),wy(e,t,i,n),Jt(i.callback_exit,e,t,n))},Sy=[\"IMG\",\"IFRAME\",\"VIDEO\"],Zh=e=>e.use_native&&\"loading\"in HTMLImageElement.prototype,Cy=(e,t,i)=>{e.forEach(n=>{Sy.indexOf(n.tagName)!==-1&&uy(n,t,i)}),jh(i,0)},My=e=>e.isIntersecting||e.intersectionRatio>0,Iy=e=>({root:e.container===document?null:e.container,rootMargin:e.thresholds||e.threshold+\"px\"}),by=(e,t,i)=>{e.forEach(n=>My(n)?yy(n.target,n,t,i):xy(n.target,n,t,i))},Ey=(e,t)=>{t.forEach(i=>{e.observe(i)})},Ay=(e,t)=>{_w(e),Ey(e,t)},Ty=(e,t)=>{!Mh||Zh(e)||(t._observer=new IntersectionObserver(i=>{by(i,e,t)},Iy(e)))},Gh=e=>Array.prototype.slice.call(e),is=e=>e.container.querySelectorAll(e.elements_selector),ky=e=>Gh(e).filter(fl),Ny=e=>Dw(e),Py=e=>Gh(e).filter(Ny),cc=(e,t)=>ky(e||is(t)),zy=(e,t)=>{Py(is(e)).forEach(n=>{at(n,e.class_error),js(n)}),t.update()},Dy=(e,t)=>{!Si||window.addEventListener(\"online\",()=>{zy(e,t)})},Kn=function(e,t){const i=Eh(e);this._settings=i,this.loadingCount=0,Ty(i,this),Dy(i,this),this.update(t)};Kn.prototype={update:function(e){const t=this._settings,i=cc(e,t);if(jh(this,i.length),Ch||!Mh){this.loadAll(i);return}if(Zh(t)){Cy(i,t,this);return}Ay(this._observer,i)},destroy:function(){this._observer&&this._observer.disconnect(),is(this._settings).forEach(e=>{Uh(e)}),delete this._observer,delete this._settings,delete this.loadingCount,delete this.toLoadCount},loadAll:function(e){const t=this._settings;cc(e,t).forEach(n=>{Bs(n,this),xl(n,t,this)})},restoreAll:function(){const e=this._settings;is(e).forEach(t=>{vy(t,e)})}};Kn.load=(e,t)=>{const i=Eh(t);xl(e,i)};Kn.resetStatus=e=>{js(e)};Si&&kw(Kn,window.lazyLoadOptions);class Yh{constructor({readonly:t,box:i,pages:n,onNewPageIndex:r,onPlay:s}){if(this.pageIndex=0,this.namespace=\"netless-app-docs-viewer\",this.isShowPreview=!1,this.isSmallBox=!1,this.sideEffect=new Ls,n.length<=0)throw new Error(\"[DocsViewer] Empty pages.\");this.readonly=t,this.box=i,this.pages=n,this.onNewPageIndex=r,this.onPlay=s,this.render()}mount(){this.box.mountContent(this.$content),this.box.mountFooter(this.$footer),this.sideEffect.add(()=>{const t=new Kn({container:this.$preview,elements_selector:`.${this.wrapClassName(\"preview-page>img\")}`});return()=>t.destroy()},\"preview-lazyload\")}unmount(){this.$content.remove(),this.$footer.remove()}setReadonly(t){this.readonly!==t&&(this.readonly=t,this.$content.classList.toggle(this.wrapClassName(\"readonly\"),t),this.$footer.classList.toggle(this.wrapClassName(\"readonly\"),t),this.$pageNumberInput.disabled=t)}destroy(){this.sideEffect.flushAll(),this.unmount()}setPageIndex(t){Number.isNaN(t)||(this.pageIndex=t,this.$pageNumberInput.value=String(t+1))}setSmallBox(t){this.isSmallBox!==t&&(this.isSmallBox=t,this.$footer.classList.toggle(this.wrapClassName(\"float-footer\"),t))}render(){return this.renderContent(),this.renderFooter(),this.$content}renderContent(){if(!this.$content){const t=document.createElement(\"div\");t.className=this.wrapClassName(\"content\"),this.$content=t,this.readonly&&t.classList.add(this.wrapClassName(\"readonly\")),t.appendChild(this.renderPreviewMask()),t.appendChild(this.renderPreview())}return this.$content}renderPreview(){if(!this.$preview){const t=document.createElement(\"div\");t.className=this.wrapClassName(\"preview\")+\" tele-fancy-scrollbar\",this.$preview=t;const i=this.wrapClassName(\"preview-page\"),n=this.wrapClassName(\"preview-page-name\");this.pages.forEach((r,s)=>{var o;const a=(o=r.thumbnail)!=null?o:r.src.startsWith(\"ppt\")?void 0:r.src;if(!a)return;const l=String(s),u=document.createElement(\"a\");u.className=i+\" \"+this.wrapClassName(`preview-page-${s}`),u.setAttribute(\"href\",\"#\"),u.dataset.pageIndex=l;const d=document.createElement(\"span\");d.className=n,d.textContent=String(s+1),d.dataset.pageIndex=l;const p=document.createElement(\"img\");p.width=r.width,p.height=r.height,p.dataset.src=a,p.dataset.pageIndex=l,u.appendChild(p),u.appendChild(d),t.appendChild(u)}),this.sideEffect.addEventListener(t,\"click\",r=>{var s;if(this.readonly)return;const o=(s=r.target.dataset)==null?void 0:s.pageIndex;o&&(r.preventDefault(),r.stopPropagation(),r.stopImmediatePropagation(),this.onNewPageIndex(Number(o)),this.togglePreview(!1))})}return this.$preview}renderPreviewMask(){return this.$previewMask||(this.$previewMask=document.createElement(\"div\"),this.$previewMask.className=this.wrapClassName(\"preview-mask\"),this.sideEffect.addEventListener(this.$previewMask,\"click\",t=>{this.readonly||t.target===this.$previewMask&&this.togglePreview(!1)})),this.$previewMask}renderFooter(){if(!this.$footer){const t=document.createElement(\"div\");if(t.className=this.wrapClassName(\"footer\"),this.$footer=t,this.readonly&&t.classList.add(this.wrapClassName(\"readonly\")),this.isSmallBox&&t.classList.add(this.wrapClassName(\"float-footer\")),this.pages.some(l=>l.thumbnail||!l.src.startsWith(\"ppt\"))){const l=this.renderFooterBtn(\"btn-sidebar\",Mw(this.namespace));this.sideEffect.addEventListener(l,\"click\",()=>{this.readonly||this.togglePreview()}),this.$footer.appendChild(l)}const i=document.createElement(\"div\");i.className=this.wrapClassName(\"page-jumps\");const n=this.renderFooterBtn(\"btn-page-back\",Iw(this.namespace));if(this.sideEffect.addEventListener(n,\"click\",()=>{this.readonly||this.onNewPageIndex(this.pageIndex-1)}),i.appendChild(n),this.onPlay){const l=this.renderFooterBtn(\"btn-page-play\",Ew(this.namespace),Aw(this.namespace)),u=()=>{this.sideEffect.setTimeout(()=>{l.classList.toggle(this.wrapClassName(\"footer-btn-playing\"),!1)},500,\"returnPlay\")};this.sideEffect.addEventListener(l,\"click\",()=>{this.readonly||(l.classList.toggle(this.wrapClassName(\"footer-btn-playing\"),!0),this.onPlay&&this.onPlay(),u())}),i.appendChild(l)}const r=this.renderFooterBtn(\"btn-page-next\",bw(this.namespace));this.sideEffect.addEventListener(r,\"click\",()=>{this.readonly||this.onNewPageIndex(this.pageIndex+1)}),i.appendChild(r);const s=document.createElement(\"div\");s.className=this.wrapClassName(\"page-number\");const o=document.createElement(\"input\");o.className=this.wrapClassName(\"page-number-input\"),o.value=String(this.pageIndex+1),this.readonly&&(o.disabled=!0),this.$pageNumberInput=o,this.sideEffect.addEventListener(o,\"focus\",()=>{o.select()}),this.sideEffect.addEventListener(o,\"change\",()=>{this.readonly||o.value&&this.onNewPageIndex(Number(o.value)-1)});const a=document.createElement(\"span\");a.textContent=\" / \"+this.pages.length,s.appendChild(o),s.appendChild(a),this.$footer.appendChild(i),this.$footer.appendChild(s)}return this.$footer}renderFooterBtn(t,i,n){const r=document.createElement(\"button\");return r.className=this.wrapClassName(\"footer-btn\")+\" \"+this.wrapClassName(t),r.appendChild(i),n&&r.appendChild(n),r}togglePreview(t){if(this.isShowPreview=t!=null?t:!this.isShowPreview,this.$content.classList.toggle(this.wrapClassName(\"preview-active\"),this.isShowPreview),this.isShowPreview){const i=this.$preview.querySelector(\".\"+this.wrapClassName(`preview-page-${this.pageIndex}`));i&&this.$preview.scrollTo({top:i.offsetTop-16})}}wrapClassName(t){return`${this.namespace}-${t}`}}function Wi(e,t,i){return Math.min(Math.max(e,t),i)}function dc(e){return e.touches?e.touches[0]:e}function Xh(e){e.stopPropagation(),e.cancelable&&e.preventDefault()}class Ly{constructor(t){var i,n,r;this.velocity=0,this.paused=!0,this._animationFrameID=null,this._loopTimestamp=0,this.looper=s=>{if(this.paused)return;let o=Math.floor((s-this._loopTimestamp)/1e3*60)+1;for(this._loopTimestamp=s;o-- >0;)this.stepper();this.onStep(this.current,this),!this.paused&&this.current!==this.target&&window.requestAnimationFrame(this.looper)},this.current=(i=t.start)!=null?i:0,this.target=this.current,this.stiffness=(n=t.stiffness)!=null?n:170,this.damping=(r=t.damping)!=null?r:26,this.onStep=t.onStep}stepTo(t,i){this.paused&&i!=null&&(this.current=i),this.paused=!1,this.target=t,this.onStep(this.current,this),this._loopTimestamp=Date.now(),window.requestAnimationFrame(this.looper)}pause(){this.paused=!0}destroy(){this.pause()}stepper(){const t=-this.stiffness*(this.current-this.target),i=-this.damping*this.velocity,n=this.velocity+(t+i)/60,r=this.current+n/60;Math.abs(n-0)<.01&&Math.abs(r-this.target)<.01?(this.current=this.target,this.velocity=0):(this.current=r,this.velocity=n)}}class jy{constructor(t,i,n,r){this.scale=1,this.lastVisit=Date.now(),this.pageOffsetY=0,this.pageOffsetX=0,this.visible=!0,this.index=t,this.page=i,this.scale=n,this.pageOffsetX=(r-i.width)/2;const s=document.createElement(\"div\");s.className=\"page-renderer-page\",s.dataset.index=`${t}`,s.style.width=`${i.width*n}px`,s.style.height=`${i.height*n}px`,i.thumbnail&&(s.style.backgroundImage=`url(\"${i.thumbnail}\")`);const o=document.createElement(\"img\");o.className=\"page-renderer-page-img\",o.width=i.width,o.height=i.height,o.src=i.src,s.appendChild(o),this.$page=s}translateY(t){Math.abs(t-this.pageOffsetY)>=.001&&(this.pageOffsetY=t,this.$page.style.transform=`translate(${this.pageOffsetX*this.scale}px, ${this.pageOffsetY*this.scale}px)`)}setScale(t){Math.abs(t-this.scale)>=.001&&(this.scale=t,this.$page.style.width=`${this.page.width*this.scale}px`,this.$page.style.height=`${this.page.height*this.scale}px`,this.$page.style.transform=`translate(${this.pageOffsetX*this.scale}px, ${this.pageOffsetY*this.scale}px)`)}setVisible(t){t!==this.visible&&(this.visible=t,this.$page.style.opacity=t?\"1\":\"0\")}}const By=window.requestIdleCallback||(e=>window.setTimeout(e,5e3)),Ry=window.cancelIdleCallback||window.clearTimeout;class _y{constructor(t,i,n){this.pages=t,this.pagesIntrinsicWidth=i,this.scale=n,this.els=new Map,this.maxElCount=200,this.gcTimer=null,this.gc=()=>{if(this.gcTimer=null,this.els.size>this.maxElCount){const r=[...this.els.values()].sort((s,o)=>o.lastVisit-s.lastVisit);for(let s=Math.floor(this.maxElCount/4);s<r.length;s++)this.els.delete(r[s].index)}}}getEl(t){let i=this.els.get(t);return i||(i=new jy(t,this.pages[t],this.scale,this.pagesIntrinsicWidth),this.els.set(t,i)),i.lastVisit=Date.now(),this.els.size>this.maxElCount&&this.gcTimer===null&&(this.gcTimer=By(this.gc)),i}setScale(t){t!==this.scale&&(this.scale=t,this.els.forEach(i=>i.setScale(t)))}destroy(){this.els.clear(),this.gcTimer!==null&&(Ry(this.gcTimer),this.gcTimer=null)}}class Oy{constructor(t){this._hwaTimeout=NaN,this._turnOffHWA=()=>{window.clearTimeout(this._hwaTimeout),this._hwaTimeout=NaN,this.$pages.classList.toggle(\"is-hwa\",!1)},this.pagesScrollTop=t.pagesScrollTop||0,this.containerWidth=t.containerWidth||1,this.containerHeight=t.containerHeight||1,this.pages=t.pages.map(s=>{if(s.thumbnail)return s;try{const o=new URL(s.src);return o.searchParams.set(\"x-oss-process\",\"image/resize,l_50\"),fh(ph({},s),{thumbnail:o.toString()})}catch(o){return console.error(o),s}});const i=Array(this.pages.length);let n=1/0,r=0;this.pagesIntrinsicHeight=this.pages.reduce((s,o,a)=>(i[a]=s,o.width>r&&(r=o.width),o.height<=n&&(n=o.height),s+o.height),0),this.pagesIntrinsicWidth=r,this.pagesMinHeight=n,this.pagesIntrinsicYs=i,this.scale=this._calcScale(),this.threshold=this._calcThreshold(),this.onPageIndexChanged=t.onPageIndexChanged,this.pageScrollIndex=0,this.pagesScrollTop!==0&&(this.pageScrollIndex=this.findScrollPageIndex(),this.onPageIndexChanged&&this.pageScrollIndex>0&&this.onPageIndexChanged(this.pageScrollIndex)),this.pageElManager=new _y(this.pages,r,this.scale),this.$pages=this.renderPages()}setContainerSize(t,i){t>0&&i>0&&(t!==this.containerWidth||i!==this.containerHeight)&&(this.containerWidth=t,this.containerHeight=i,this.$pages.style.width=`${this.containerWidth}px`,this.$pages.style.height=`${this.containerHeight}px`,this.scale=this._calcScale(),this.threshold=this._calcThreshold(),this.pageElManager.setScale(this.scale),this.$pages.parentElement&&this.pagesScrollTo(this.pagesScrollTop,!0))}renderPages(){const t=document.createElement(\"div\");return t.className=\"page-renderer-pages-container\",t.style.width=`${this.containerWidth}px`,t.style.height=`${this.containerHeight}px`,t}pagesScrollTo(t,i){if(t=Wi(t,0,this.pagesIntrinsicHeight-this.containerHeight/this.scale),i||Math.abs(t-this.pagesScrollTop)>=.001){this._turnOnHWA(),this.pagesScrollTop=t;const n=this.findScrollPageIndex(),r=Math.max(n-this.threshold,0),s=Math.min(n+this.threshold,this.pages.length-1);for(let o=0;o<this.$pages.children.length;o++){const a=this.$pages.children[o],l=Number(a.dataset.index);l>=r&&l<=s||(a.remove(),o--)}for(let o=r;o<=s;o++){const a=this.pageElManager.getEl(o);a.$page.parentElement!==this.$pages&&this.$pages.appendChild(a.$page),a.translateY(this.pagesIntrinsicYs[o]-this.pagesScrollTop)}n!==this.pageScrollIndex&&(this.pageScrollIndex=n,this.onPageIndexChanged&&this.onPageIndexChanged(n))}}findScrollPageIndex(){for(let t=0;t<this.pagesIntrinsicYs.length;t++)if(this.pagesIntrinsicYs[t]+this.pages[t].height-this.pagesScrollTop>=.001)return t;return this.pagesIntrinsicYs.length-1}mount(t){t.appendChild(this.$pages),this.pagesScrollTo(this.pagesScrollTop,!0)}unmount(){this.$pages.remove()}destroy(){this.unmount(),this.onPageIndexChanged=void 0,this.pageElManager.destroy(),this._hwaTimeout&&(window.clearTimeout(this._hwaTimeout),this._hwaTimeout=NaN)}_calcScale(){return this.containerWidth/this.pagesIntrinsicWidth||1}_calcThreshold(){return Wi(Math.ceil(this.containerHeight/this.scale/this.pagesMinHeight/2),1,this.pages.length)}_turnOnHWA(){this._hwaTimeout?window.clearTimeout(this._hwaTimeout):this.$pages.classList.toggle(\"is-hwa\",!0),this._hwaTimeout=window.setTimeout(this._turnOffHWA,1e3)}}const Vy=30;class Uy{constructor(t){this.sideEffect=new Ls,this.pagesScrollTop=t.pagesScrollTop||0,this.containerWidth=t.containerWidth||1,this.containerHeight=t.containerHeight||1,this.pagesWidth=t.pagesWidth||1,this.pagesHeight=t.pagesHeight||1,this.scale=this._calcScale(),this.scrollbarMinHeight=t.scrollbarMinHeight||Vy,this.scrollbarHeight=this._calcScrollbarHeight(),this.readonly=t.readonly,this.wrapClassName=t.wrapClassName,this.onDragScroll=t.onDragScroll,this.$scrollbar=this.renderScrollbar()}mount(t){t.appendChild(this.$scrollbar),this.pagesScrollTo(this.pagesScrollTop,!0)}unmount(){this.$scrollbar.remove()}setReadonly(t){this.readonly=t}setContainerSize(t,i){t>0&&i>0&&(t!==this.containerWidth||i!==this.containerHeight)&&(this.containerWidth=t,this.containerHeight=i,this.scale=this._calcScale(),this._updateScrollbarHeight(),this.$scrollbar.parentElement&&this.pagesScrollTo(this.pagesScrollTop,!0))}pagesScrollTo(t,i){if(t=Wi(t,0,this.pagesHeight-this.containerHeight/this.scale),i||Math.abs(t-this.pagesScrollTop)>=.001){this.pagesScrollTop=t;const n=this.pagesScrollTop*this.scale,r=this.pagesHeight*this.scale,s=n/(r-this.containerHeight)*(this.containerHeight-this.scrollbarHeight);window.requestAnimationFrame?window.requestAnimationFrame(()=>{this.$scrollbar.style.transform=`translateY(${s}px)`}):this.$scrollbar.style.transform=`translateY(${s}px)`}}destroy(){this.unmount(),this.onDragScroll=void 0,this.sideEffect.flushAll()}renderScrollbar(){const t=document.createElement(\"button\");t.className=this.wrapClassName(\"scrollbar\"),t.style.minHeight=`${this.scrollbarMinHeight}px`,t.style.height=`${this.scrollbarHeight}px`;const i=n=>{if(this.readonly||n.button!=null&&n.button!==0)return;Xh(n);const r=this.wrapClassName(\"scrollbar-dragging\");t.classList.toggle(r,!0);const s=this.pagesScrollTop,{clientY:o}=dc(n),a=u=>{if(this.readonly)return;const{clientY:d}=dc(u),p=(d-o)/this.scale;Math.abs(p)>0&&this.onDragScroll&&this.onDragScroll(s+p*(this.pagesHeight*this.scale/this.containerHeight))},l=()=>{t.classList.toggle(r,!1),window.removeEventListener(\"mousemove\",a,!0),window.removeEventListener(\"touchmove\",a,!0),window.removeEventListener(\"mouseup\",l,!0),window.removeEventListener(\"touchend\",l,!0),window.removeEventListener(\"touchcancel\",l,!0)};window.addEventListener(\"mousemove\",a,!0),window.addEventListener(\"touchmove\",a,!0),window.addEventListener(\"mouseup\",l,!0),window.addEventListener(\"touchend\",l,!0),window.addEventListener(\"touchcancel\",l,!0)};return this.sideEffect.addEventListener(t,\"mousedown\",i),this.sideEffect.addEventListener(t,\"touchstart\",i),t}_calcScale(){return this.containerWidth/this.pagesWidth||1}_calcScrollbarHeight(){return Wi(this.containerHeight/(this.pagesHeight*this.scale)*this.containerHeight,this.scrollbarMinHeight,this.containerHeight)}_updateScrollbarHeight(){const t=this._calcScrollbarHeight();Math.abs(t-this.scrollbarHeight)>.001&&(this.scrollbarHeight=t,this.$scrollbar.style.height=`${t}px`)}}const Wy=window.ResizeObserver||Cw,nn=640;class $y{constructor({whiteboardView:t,readonly:i,box:n,pages:r,pageScrollTop:s=0,mountWhiteboard:o,onUserScroll:a}){this.sideEffect=new Ls,this.userScrolling=!1,this.onNewPageIndex=p=>{this.scrollToPage(p)},this.whiteboardView=t,this.readonly=i,this.box=n,this.pages=r,this.mountWhiteboard=o,this._onUserScroll=a;const l=this.debounce(()=>{this.userScrolling=!1,this._onUserScroll&&this._onUserScroll(this.pageRenderer.pagesScrollTop)},{wait:80},\"debounce-updateUserScroll\");this.updateUserScroll=()=>{this.userScrolling=!0,l()},this.viewer=new Yh({readonly:i,box:n,pages:r,onNewPageIndex:this.onNewPageIndex});const{width:u,height:d}=this.whiteboardView.size;this.pageRenderer=new Oy({pagesScrollTop:s,pages:this.pages,containerWidth:u,containerHeight:d,onPageIndexChanged:this.viewer.setPageIndex.bind(this.viewer)}),this.scrollbar=new Uy({pagesScrollTop:this.pageRenderer.pagesScrollTop,containerWidth:u,containerHeight:d,pagesWidth:this.pageRenderer.pagesIntrinsicWidth,pagesHeight:this.pageRenderer.pagesIntrinsicHeight,readonly:this.readonly,wrapClassName:this.wrapClassName.bind(this),onDragScroll:p=>{this.pageScrollTo(p),this.updateUserScroll()}}),this.pageScrollStepper=new Ly({start:this.pageRenderer.pagesScrollTop,onStep:p=>{this.pageScrollTo(p)}}),this.render()}mount(){this.viewer.mount(),this.setupScrollListener();const t=this.debounce(this.renderRatioHeight.bind(this),{wait:80});return this.sideEffect.add(()=>{const i=new Wy(t);return i.observe(this.viewer.$content),()=>i.disconnect()}),this.sideEffect.setTimeout(()=>{this.userScrolling||this.pageScrollTo(this.pageRenderer.pagesScrollTop)},100),this}unmount(){return this.viewer.unmount(),this}setReadonly(t){this.readonly!==t&&(this.readonly=t,this.viewer.setReadonly(t),this.scrollbar.setReadonly(t))}destroy(){this.sideEffect.flushAll(),this.pageScrollStepper.destroy(),this._onUserScroll=void 0,this.unmount(),this.viewer.destroy(),this.pageRenderer.destroy(),this.scrollbar.destroy()}syncPageScrollTop(t){!this.userScrolling&&t>=0&&Math.abs(this.pageRenderer.pagesScrollTop-t)>.01&&this.pageScrollStepper.stepTo(t,this.pageRenderer.pagesScrollTop)}render(){this.pageRenderer.mount(this.viewer.$content),this.viewer.$content.appendChild(this.renderWhiteboardView()),this.scrollbar.mount(this.viewer.$content),this.renderRatioHeight()}renderRatioHeight(){const t=this.box.absoluteHeight,i=t<=nn;if(this.viewer.setSmallBox(i),i){const n=26/nn,r=26/t,s=26/nn,o=0,a=Math.max((n+s-(r+o))/2,0);if(this.box.$titleBar){const l=r+a;this.box.$titleBar.style.height=`${l*100}%`}if(this.box.$footer){const l=o+a;this.box.$footer.style.height=`${l*100}%`}}else{if(this.box.$titleBar){const n=Math.max(26/nn,26/t);this.box.$titleBar.style.height=`${n*100}%`}if(this.box.$footer){const n=Math.max(26/nn,26/t);this.box.$footer.style.height=`${n*100}%`}}}renderWhiteboardView(){return this.$whiteboardView||(this.$whiteboardView=document.createElement(\"div\"),this.$whiteboardView.className=this.wrapClassName(\"wb-view\"),this.mountWhiteboard(this.$whiteboardView),this.sideEffect.addEventListener(this.$whiteboardView,\"wheel\",t=>{Xh(t),this.readonly||(this.pageScrollTo(this.pageRenderer.pagesScrollTop+t.deltaY),this.updateUserScroll())},{passive:!1,capture:!0}),this.sideEffect.addEventListener(this.$whiteboardView,\"touchmove\",t=>{this.readonly||t.touches.length<=1||this.updateUserScroll()},{passive:!0,capture:!0})),this.$whiteboardView}scrollTopPageToEl(t){return t*this.pageRenderer.scale}scrollTopElToPage(t){return t/this.pageRenderer.scale}elScrollTo(t){this.pageScrollTo(this.scrollTopElToPage(t))}pageScrollTo(t){const i=this.scrollTopElToPage(this.whiteboardView.size.height/2);this.whiteboardView.moveCamera({centerY:Wi(t+i,i,this.pageRenderer.pagesIntrinsicHeight-i),animationMode:\"immediately\"})}scrollToPage(t){if(!this.readonly&&!Number.isNaN(t)){const i=this.pageRenderer.pagesIntrinsicYs[t];i>=0&&(this.pageScrollTo(i+5/this.pageRenderer.scale),this.updateUserScroll())}}setupScrollListener(){this.sideEffect.add(()=>{const t=i=>{const{width:n,height:r}=this.whiteboardView.size;if(n<=0||r<=0)return;const s=i.centerY-this.pageRenderer.containerHeight/this.pageRenderer.scale/2;this.pageRenderer.pagesScrollTo(s),this.scrollbar.pagesScrollTo(s)};return this.whiteboardView.callbacks.on(\"onCameraUpdated\",t),()=>this.whiteboardView.callbacks.off(\"onCameraUpdated\",t)}),this.sideEffect.add(()=>{const t=({width:i,height:n})=>{if(i<=0||n<=0)return;this.pageRenderer.setContainerSize(i,n),this.scrollbar.setContainerSize(i,n);const{pagesIntrinsicWidth:r,pagesIntrinsicHeight:s}=this.pageRenderer;this.whiteboardView.moveCameraToContain({originX:0,originY:this.pageRenderer.pagesScrollTop,width:r,height:n/this.pageRenderer.scale,animationMode:\"immediately\"}),this.whiteboardView.setCameraBound({damping:1,maxContentMode:()=>this.pageRenderer.scale,minContentMode:()=>this.pageRenderer.scale,centerX:r/2,centerY:s/2,width:r,height:s})};return this.whiteboardView.callbacks.on(\"onSizeUpdated\",t),()=>{this.whiteboardView.callbacks.off(\"onSizeUpdated\",t)}},\"whiteboard-size-update\"),this.sideEffect.addEventListener(window,\"keyup\",t=>{if(this.readonly||!this.box.focus||this.box.minimized)return;let i=null;switch(t.key){case\"PageDown\":{i=this.pageRenderer.pagesScrollTop+this.pageRenderer.containerHeight/this.pageRenderer.scale;break}case\"PageUp\":{i=this.pageRenderer.pagesScrollTop-this.pageRenderer.containerHeight/this.pageRenderer.scale;break}case\"ArrowDown\":{i=this.pageRenderer.pagesScrollTop+this.pageRenderer.containerHeight/4/this.pageRenderer.scale;break}case\"ArrowUp\":{i=this.pageRenderer.pagesScrollTop-this.pageRenderer.containerHeight/4/this.pageRenderer.scale;break}}i!==null&&(this._onUserScroll?this._onUserScroll(i):(this.pageScrollTo(i),this.updateUserScroll()))},{capture:!0})}debounce(t,i,n){const r=ew(t,i);return this.sideEffect.addDisposer(()=>r.cancel(),n),r}wrapClassName(t){return\"netless-app-docs-viewer-static-\"+t}}class Hy{constructor({context:t,whiteboardView:i,box:n,pages:r}){this.sideEffect=new Ls,this.onPlayPPT=()=>{const s=this.context.getRoom();s&&s.pptNextStep()},this._scaleDocsToFitImpl=()=>{const s=this.pages[this.getPageIndex()];s&&(this.whiteboardView.moveCameraToContain({originX:-s.width/2,originY:-s.height/2,width:s.width,height:s.height,animationMode:\"immediately\"}),this.whiteboardView.setCameraBound({damping:1,maxContentMode:()=>this.whiteboardView.camera.scale,minContentMode:()=>this.whiteboardView.camera.scale,centerX:0,centerY:0,width:s.width,height:s.height}))},this._scaleDocsToFitDebounced=()=>{this.sideEffect.setTimeout(this._scaleDocsToFitImpl,1e3,\"_scaleDocsToFitDebounced\")},this.scaleDocsToFit=()=>{this._scaleDocsToFitImpl(),this._scaleDocsToFitDebounced()},this.onNewPageIndex=s=>{this.jumpToPage(s,!0)},this.context=t,this.whiteboardView=i,this.box=n,this.pages=r,this.displayer=t.getDisplayer(),this.viewer=new Yh({readonly:!t.getIsWritable(),box:n,pages:r,onNewPageIndex:this.onNewPageIndex,onPlay:this.onPlayPPT}),this.render(),this.sideEffect.add(()=>{const s=o=>{this.viewer.setReadonly(!o)};return this.context.emitter.on(\"writableChange\",s),()=>this.context.emitter.off(\"writableChange\",s)}),this.sideEffect.add(()=>{const s=o=>{this.jumpToPage(o.index)};return this.context.emitter.on(\"sceneStateChange\",s),()=>this.context.emitter.off(\"sceneStateChange\",s)})}mount(){this.viewer.mount();const t=this.getPageIndex();return t!==0&&this.jumpToPage(t),this.scaleDocsToFit(),this.sideEffect.add(()=>(this.whiteboardView.callbacks.on(\"onSizeUpdated\",this.scaleDocsToFit),()=>{this.whiteboardView.callbacks.off(\"onSizeUpdated\",this.scaleDocsToFit)})),this}unmount(){return this.viewer.unmount(),this}destroy(){this.sideEffect.flushAll(),this.unmount(),this.viewer.destroy()}getPageIndex(){return this.displayer.state.sceneState.index}jumpToPage(t,i){var n,r;if(t=Wi(t,0,this.pages.length-1),t!==this.getPageIndex()&&this.context.getIsWritable()){const s=this.context.getInitScenePath(),o=(r=(n=this.context.getScenes())==null?void 0:n[t])==null?void 0:r.name;s&&o&&this.context.setScenePath(`${s}/${o}`),this.scaleDocsToFit()}if(t!==this.viewer.pageIndex&&this.viewer.setPageIndex(t),i){const s=this.context.getRoom();if(s){const o=s.state.globalState.__pptState;s.setGlobalState({__pptState:o&&{uuid:o.uuid,pageIndex:t,disableAutoPlay:o.disableAutoPlay}})}}}render(){this.viewer.$content.appendChild(this.renderMask()),this.viewer.$content.appendChild(this.renderWhiteboardView()),this.sideEffect.addEventListener(window,\"keydown\",t=>{var i;if(this.box.focus)switch(t.key){case\"ArrowUp\":case\"ArrowLeft\":{this.jumpToPage(this.getPageIndex()-1,!0);break}case\"ArrowRight\":case\"ArrowDown\":{(i=this.context.getRoom())==null||i.pptNextStep();break}}})}renderMask(){if(!this.$mask){const t=document.createElement(\"div\");t.className=this.wrapClassName(\"mask\"),this.$mask=t;const i=document.createElement(\"button\");i.className=this.wrapClassName(\"back\");const n=document.createElement(\"button\");n.className=this.wrapClassName(\"next\")}return this.$mask}renderWhiteboardView(){return this.$whiteboardView||(this.$whiteboardView=document.createElement(\"div\"),this.$whiteboardView.className=this.wrapClassName(\"wb-view\"),this.sideEffect.addEventListener(this.$whiteboardView,\"click\",t=>{var i;const n=this.context.getRoom();if(n&&n.state.memberState.currentApplianceName===\"clicker\"){for(let r=t.target;r;r=r.parentElement)if((i=r.classList)!=null&&i.contains(\"ppt-event-source\"))return;n.pptNextStep()}}),this.context.mountView(this.$whiteboardView)),this.$whiteboardView}wrapClassName(t){return\"netless-app-docs-viewer-dynamic-\"+t}}const Fy=\"DocsViewer\",Ko={kind:Fy,setup(e){const t=e.getBox(),i=e.getScenes();if(!i)throw new Error(\"[Docs Viewer]: scenes not found.\");const n=e.getView();if(!n)throw new Error(\"[Docs Viewer]: no whiteboard view.\");const r=i.map(({ppt:s})=>s?{width:s.width,height:s.height,src:s.src,thumbnail:s.previewURL}:null).filter(s=>Boolean(s));if(r.length<=0)throw new Error(\"[Docs Viewer]: empty scenes.\");t.mountStyles(Fv),r[0].src.startsWith(\"ppt\")?Zy(e,n,t,r):Qy(e,n,t,r)}};function Qy(e,t,i,n){var r;t.disableCameraTransform=!e.getIsWritable();const s=new $y({whiteboardView:t,readonly:!e.getIsWritable(),box:i,pages:n,pageScrollTop:(r=e.getAttributes())==null?void 0:r.pageScrollTop,mountWhiteboard:e.mountView.bind(e),onUserScroll:o=>{var a;((a=e.getAttributes())==null?void 0:a.pageScrollTop)!==o&&!i.readonly&&e.updateAttributes([\"pageScrollTop\"],o)}}).mount();e.emitter.on(\"attributesUpdate\",o=>{o&&o.pageScrollTop!=null&&s.syncPageScrollTop(o.pageScrollTop)}),e.emitter.on(\"writableChange\",o=>{s.setReadonly(!o),t.disableCameraTransform=!o})}function Zy(e,t,i,n){t.disableCameraTransform=!0;const r=new Hy({context:e,whiteboardView:t,box:i,pages:n}).mount();e.mountView(r.$whiteboardView),e.isAddApp&&t.callbacks.once(\"onSizeUpdated\",({width:s,height:o})=>{if(n.length>0&&i.state!==\"maximized\"){const{width:a,height:l}=n[0],d=l/a*s-o;d!==0&&e.getIsWritable()&&e.emitter.emit(\"setBoxSize\",{width:i.width,height:i.height+d/i.containerRect.height})}})}var Jh={exports:{}},Fe={},Kh={exports:{}},qh={};/** @license React v0.19.1\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */(function(e){var t,i,n,r,s;if(typeof window==\"undefined\"||typeof MessageChannel!=\"function\"){var o=null,a=null,l=function(){if(o!==null)try{var I=e.unstable_now();o(!0,I),o=null}catch(N){throw setTimeout(l,0),N}},u=Date.now();e.unstable_now=function(){return Date.now()-u},t=function(I){o!==null?setTimeout(t,0,I):(o=I,setTimeout(l,0))},i=function(I,N){a=setTimeout(I,N)},n=function(){clearTimeout(a)},r=function(){return!1},s=e.unstable_forceFrameRate=function(){}}else{var d=window.performance,p=window.Date,m=window.setTimeout,v=window.clearTimeout;if(typeof console!=\"undefined\"){var S=window.cancelAnimationFrame;typeof window.requestAnimationFrame!=\"function\"&&console.error(\"This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills\"),typeof S!=\"function\"&&console.error(\"This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills\")}if(typeof d==\"object\"&&typeof d.now==\"function\")e.unstable_now=function(){return d.now()};else{var y=p.now();e.unstable_now=function(){return p.now()-y}}var h=!1,c=null,f=-1,g=5,w=0;r=function(){return e.unstable_now()>=w},s=function(){},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported\"):g=0<I?Math.floor(1e3/I):5};var x=new MessageChannel,C=x.port2;x.port1.onmessage=function(){if(c!==null){var I=e.unstable_now();w=I+g;try{c(!0,I)?C.postMessage(null):(h=!1,c=null)}catch(N){throw C.postMessage(null),N}}else h=!1},t=function(I){c=I,h||(h=!0,C.postMessage(null))},i=function(I,N){f=m(function(){I(e.unstable_now())},N)},n=function(){v(f),f=-1}}function z(I,N){var $=I.length;I.push(N);e:for(;;){var G=$-1>>>1,X=I[G];if(X!==void 0&&0<b(X,N))I[G]=N,I[$]=X,$=G;else break e}}function D(I){return I=I[0],I===void 0?null:I}function T(I){var N=I[0];if(N!==void 0){var $=I.pop();if($!==N){I[0]=$;e:for(var G=0,X=I.length;G<X;){var nt=2*(G+1)-1,Ve=I[nt],Ze=nt+1,Ue=I[Ze];if(Ve!==void 0&&0>b(Ve,$))Ue!==void 0&&0>b(Ue,Ve)?(I[G]=Ue,I[Ze]=$,G=Ze):(I[G]=Ve,I[nt]=$,G=nt);else if(Ue!==void 0&&0>b(Ue,$))I[G]=Ue,I[Ze]=$,G=Ze;else break e}}return N}return null}function b(I,N){var $=I.sortIndex-N.sortIndex;return $!==0?$:I.id-N.id}var j=[],B=[],L=1,Y=null,F=3,At=!1,Qe=!1,Tt=!1;function kt(I){for(var N=D(B);N!==null;){if(N.callback===null)T(B);else if(N.startTime<=I)T(B),N.sortIndex=N.expirationTime,z(j,N);else break;N=D(B)}}function Nt(I){if(Tt=!1,kt(I),!Qe)if(D(j)!==null)Qe=!0,t(qi);else{var N=D(B);N!==null&&i(Nt,N.startTime-I)}}function qi(I,N){Qe=!1,Tt&&(Tt=!1,n()),At=!0;var $=F;try{for(kt(N),Y=D(j);Y!==null&&(!(Y.expirationTime>N)||I&&!r());){var G=Y.callback;if(G!==null){Y.callback=null,F=Y.priorityLevel;var X=G(Y.expirationTime<=N);N=e.unstable_now(),typeof X==\"function\"?Y.callback=X:Y===D(j)&&T(j),kt(N)}else T(j);Y=D(j)}if(Y!==null)var nt=!0;else{var Ve=D(B);Ve!==null&&i(Nt,Ve.startTime-N),nt=!1}return nt}finally{Y=null,F=$,At=!1}}function or(I){switch(I){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var Ks=s;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){Qe||At||(Qe=!0,t(qi))},e.unstable_getCurrentPriorityLevel=function(){return F},e.unstable_getFirstCallbackNode=function(){return D(j)},e.unstable_next=function(I){switch(F){case 1:case 2:case 3:var N=3;break;default:N=F}var $=F;F=N;try{return I()}finally{F=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=Ks,e.unstable_runWithPriority=function(I,N){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var $=F;F=I;try{return N()}finally{F=$}},e.unstable_scheduleCallback=function(I,N,$){var G=e.unstable_now();if(typeof $==\"object\"&&$!==null){var X=$.delay;X=typeof X==\"number\"&&0<X?G+X:G,$=typeof $.timeout==\"number\"?$.timeout:or(I)}else $=or(I),X=G;return $=X+$,I={id:L++,callback:N,priorityLevel:I,startTime:X,expirationTime:$,sortIndex:-1},X>G?(I.sortIndex=X,z(B,I),D(j)===null&&I===D(B)&&(Tt?n():Tt=!0,i(Nt,X-G))):(I.sortIndex=$,z(j,I),Qe||At||(Qe=!0,t(qi))),I},e.unstable_shouldYield=function(){var I=e.unstable_now();kt(I);var N=D(j);return N!==Y&&Y!==null&&N!==null&&N.callback!==null&&N.startTime<=I&&N.expirationTime<Y.expirationTime||r()},e.unstable_wrapCallback=function(I){var N=F;return function(){var $=F;F=N;try{return I.apply(this,arguments)}finally{F=$}}}})(qh);Kh.exports=qh;/** @license React v16.14.0\n * react-dom.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */var Os=xi.exports,Ce=Rd,pe=Kh.exports;function M(e){for(var t=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+e,i=1;i<arguments.length;i++)t+=\"&args[]=\"+encodeURIComponent(arguments[i]);return\"Minified React error #\"+e+\"; visit \"+t+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}if(!Os)throw Error(M(227));function Gy(e,t,i,n,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(i,u)}catch(d){this.onError(d)}}var Mn=!1,ns=null,rs=!1,qo=null,Yy={onError:function(e){Mn=!0,ns=e}};function Xy(e,t,i,n,r,s,o,a,l){Mn=!1,ns=null,Gy.apply(Yy,arguments)}function Jy(e,t,i,n,r,s,o,a,l){if(Xy.apply(this,arguments),Mn){if(Mn){var u=ns;Mn=!1,ns=null}else throw Error(M(198));rs||(rs=!0,qo=u)}}var Sl=null,ep=null,tp=null;function hc(e,t,i){var n=e.type||\"unknown-event\";e.currentTarget=tp(i),Jy(n,t,void 0,e),e.currentTarget=null}var ss=null,Ii={};function ip(){if(ss)for(var e in Ii){var t=Ii[e],i=ss.indexOf(e);if(!(-1<i))throw Error(M(96,e));if(!os[i]){if(!t.extractEvents)throw Error(M(97,e));os[i]=t,i=t.eventTypes;for(var n in i){var r=void 0,s=i[n],o=t,a=n;if(ea.hasOwnProperty(a))throw Error(M(99,a));ea[a]=s;var l=s.phasedRegistrationNames;if(l){for(r in l)l.hasOwnProperty(r)&&pc(l[r],o,a);r=!0}else s.registrationName?(pc(s.registrationName,o,a),r=!0):r=!1;if(!r)throw Error(M(98,n,e))}}}}function pc(e,t,i){if($i[e])throw Error(M(100,e));$i[e]=t,Cl[e]=t.eventTypes[i].dependencies}var os=[],ea={},$i={},Cl={};function np(e){var t=!1,i;for(i in e)if(e.hasOwnProperty(i)){var n=e[i];if(!Ii.hasOwnProperty(i)||Ii[i]!==n){if(Ii[i])throw Error(M(102,i));Ii[i]=n,t=!0}}t&&ip()}var Kt=!(typeof window==\"undefined\"||typeof window.document==\"undefined\"||typeof window.document.createElement==\"undefined\"),ta=null,Di=null,Li=null;function fc(e){if(e=ep(e)){if(typeof ta!=\"function\")throw Error(M(280));var t=e.stateNode;t&&(t=Sl(t),ta(e.stateNode,e.type,t))}}function rp(e){Di?Li?Li.push(e):Li=[e]:Di=e}function sp(){if(Di){var e=Di,t=Li;if(Li=Di=null,fc(e),t)for(e=0;e<t.length;e++)fc(t[e])}}function Ml(e,t){return e(t)}function op(e,t,i,n,r){return e(t,i,n,r)}function Il(){}var ap=Ml,ii=!1,vo=!1;function bl(){(Di!==null||Li!==null)&&(Il(),sp())}function lp(e,t,i){if(vo)return e(t,i);vo=!0;try{return ap(e,t,i)}finally{vo=!1,bl()}}var Ky=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,gc=Object.prototype.hasOwnProperty,mc={},vc={};function qy(e){return gc.call(vc,e)?!0:gc.call(mc,e)?!1:Ky.test(e)?vc[e]=!0:(mc[e]=!0,!1)}function e0(e,t,i,n){if(i!==null&&i.type===0)return!1;switch(typeof t){case\"function\":case\"symbol\":return!0;case\"boolean\":return n?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!==\"data-\"&&e!==\"aria-\");default:return!1}}function t0(e,t,i,n){if(t===null||typeof t==\"undefined\"||e0(e,t,i,n))return!0;if(n)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Me(e,t,i,n,r,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=s}var fe={};\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(e){fe[e]=new Me(e,0,!1,e,null,!1)});[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(e){var t=e[0];fe[t]=new Me(t,1,!1,e[1],null,!1)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(e){fe[e]=new Me(e,2,!1,e.toLowerCase(),null,!1)});[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach(function(e){fe[e]=new Me(e,2,!1,e,null,!1)});\"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(e){fe[e]=new Me(e,3,!1,e.toLowerCase(),null,!1)});[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(e){fe[e]=new Me(e,3,!0,e,null,!1)});[\"capture\",\"download\"].forEach(function(e){fe[e]=new Me(e,4,!1,e,null,!1)});[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(e){fe[e]=new Me(e,6,!1,e,null,!1)});[\"rowSpan\",\"start\"].forEach(function(e){fe[e]=new Me(e,5,!1,e.toLowerCase(),null,!1)});var El=/[\\-:]([a-z])/g;function Al(e){return e[1].toUpperCase()}\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(e){var t=e.replace(El,Al);fe[t]=new Me(t,1,!1,e,null,!1)});\"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(e){var t=e.replace(El,Al);fe[t]=new Me(t,1,!1,e,\"http://www.w3.org/1999/xlink\",!1)});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(e){var t=e.replace(El,Al);fe[t]=new Me(t,1,!1,e,\"http://www.w3.org/XML/1998/namespace\",!1)});[\"tabIndex\",\"crossOrigin\"].forEach(function(e){fe[e]=new Me(e,1,!1,e.toLowerCase(),null,!1)});fe.xlinkHref=new Me(\"xlinkHref\",1,!1,\"xlink:href\",\"http://www.w3.org/1999/xlink\",!0);[\"src\",\"href\",\"action\",\"formAction\"].forEach(function(e){fe[e]=new Me(e,1,!1,e.toLowerCase(),null,!0)});var et=Os.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;et.hasOwnProperty(\"ReactCurrentDispatcher\")||(et.ReactCurrentDispatcher={current:null});et.hasOwnProperty(\"ReactCurrentBatchConfig\")||(et.ReactCurrentBatchConfig={suspense:null});function Tl(e,t,i,n){var r=fe.hasOwnProperty(t)?fe[t]:null,s=r!==null?r.type===0:n?!1:!(!(2<t.length)||t[0]!==\"o\"&&t[0]!==\"O\"||t[1]!==\"n\"&&t[1]!==\"N\");s||(t0(t,i,r,n)&&(i=null),n||r===null?qy(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,\"\"+i)):r.mustUseProperty?e[r.propertyName]=i===null?r.type===3?!1:\"\":i:(t=r.attributeName,n=r.attributeNamespace,i===null?e.removeAttribute(t):(r=r.type,i=r===3||r===4&&i===!0?\"\":\"\"+i,n?e.setAttributeNS(n,t,i):e.setAttribute(t,i))))}var i0=/^(.*)[\\\\\\/]/,Ne=typeof Symbol==\"function\"&&Symbol.for,vr=Ne?Symbol.for(\"react.element\"):60103,bi=Ne?Symbol.for(\"react.portal\"):60106,ti=Ne?Symbol.for(\"react.fragment\"):60107,up=Ne?Symbol.for(\"react.strict_mode\"):60108,Lr=Ne?Symbol.for(\"react.profiler\"):60114,cp=Ne?Symbol.for(\"react.provider\"):60109,dp=Ne?Symbol.for(\"react.context\"):60110,n0=Ne?Symbol.for(\"react.concurrent_mode\"):60111,kl=Ne?Symbol.for(\"react.forward_ref\"):60112,jr=Ne?Symbol.for(\"react.suspense\"):60113,ia=Ne?Symbol.for(\"react.suspense_list\"):60120,Nl=Ne?Symbol.for(\"react.memo\"):60115,hp=Ne?Symbol.for(\"react.lazy\"):60116,pp=Ne?Symbol.for(\"react.block\"):60121,wc=typeof Symbol==\"function\"&&Symbol.iterator;function rn(e){return e===null||typeof e!=\"object\"?null:(e=wc&&e[wc]||e[\"@@iterator\"],typeof e==\"function\"?e:null)}function r0(e){if(e._status===-1){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then(function(i){e._status===0&&(i=i.default,e._status=1,e._result=i)},function(i){e._status===0&&(e._status=2,e._result=i)})}}function It(e){if(e==null)return null;if(typeof e==\"function\")return e.displayName||e.name||null;if(typeof e==\"string\")return e;switch(e){case ti:return\"Fragment\";case bi:return\"Portal\";case Lr:return\"Profiler\";case up:return\"StrictMode\";case jr:return\"Suspense\";case ia:return\"SuspenseList\"}if(typeof e==\"object\")switch(e.$$typeof){case dp:return\"Context.Consumer\";case cp:return\"Context.Provider\";case kl:var t=e.render;return t=t.displayName||t.name||\"\",e.displayName||(t!==\"\"?\"ForwardRef(\"+t+\")\":\"ForwardRef\");case Nl:return It(e.type);case pp:return It(e.render);case hp:if(e=e._status===1?e._result:null)return It(e)}return null}function Pl(e){var t=\"\";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var i=\"\";break e;default:var n=e._debugOwner,r=e._debugSource,s=It(e.type);i=null,n&&(i=It(n.type)),n=s,s=\"\",r?s=\" (at \"+r.fileName.replace(i0,\"\")+\":\"+r.lineNumber+\")\":i&&(s=\" (created by \"+i+\")\"),i=`\n    in `+(n||\"Unknown\")+s}t+=i,e=e.return}while(e);return t}function Gt(e){switch(typeof e){case\"boolean\":case\"number\":case\"object\":case\"string\":case\"undefined\":return e;default:return\"\"}}function fp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()===\"input\"&&(t===\"checkbox\"||t===\"radio\")}function s0(e){var t=fp(e)?\"checked\":\"value\",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=\"\"+e[t];if(!e.hasOwnProperty(t)&&typeof i!=\"undefined\"&&typeof i.get==\"function\"&&typeof i.set==\"function\"){var r=i.get,s=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(o){n=\"\"+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(o){n=\"\"+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wr(e){e._valueTracker||(e._valueTracker=s0(e))}function gp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n=\"\";return e&&(n=fp(e)?e.checked?\"true\":\"false\":e.value),e=n,e!==i?(t.setValue(e),!0):!1}function na(e,t){var i=t.checked;return Ce({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i!=null?i:e._wrapperState.initialChecked})}function yc(e,t){var i=t.defaultValue==null?\"\":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;i=Gt(t.value!=null?t.value:i),e._wrapperState={initialChecked:n,initialValue:i,controlled:t.type===\"checkbox\"||t.type===\"radio\"?t.checked!=null:t.value!=null}}function mp(e,t){t=t.checked,t!=null&&Tl(e,\"checked\",t,!1)}function ra(e,t){mp(e,t);var i=Gt(t.value),n=t.type;if(i!=null)n===\"number\"?(i===0&&e.value===\"\"||e.value!=i)&&(e.value=\"\"+i):e.value!==\"\"+i&&(e.value=\"\"+i);else if(n===\"submit\"||n===\"reset\"){e.removeAttribute(\"value\");return}t.hasOwnProperty(\"value\")?sa(e,t.type,i):t.hasOwnProperty(\"defaultValue\")&&sa(e,t.type,Gt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function xc(e,t,i){if(t.hasOwnProperty(\"value\")||t.hasOwnProperty(\"defaultValue\")){var n=t.type;if(!(n!==\"submit\"&&n!==\"reset\"||t.value!==void 0&&t.value!==null))return;t=\"\"+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==\"\"&&(e.name=\"\"),e.defaultChecked=!!e._wrapperState.initialChecked,i!==\"\"&&(e.name=i)}function sa(e,t,i){(t!==\"number\"||e.ownerDocument.activeElement!==e)&&(i==null?e.defaultValue=\"\"+e._wrapperState.initialValue:e.defaultValue!==\"\"+i&&(e.defaultValue=\"\"+i))}function o0(e){var t=\"\";return Os.Children.forEach(e,function(i){i!=null&&(t+=i)}),t}function oa(e,t){return e=Ce({children:void 0},t),(t=o0(t.children))&&(e.children=t),e}function ji(e,t,i,n){if(e=e.options,t){t={};for(var r=0;r<i.length;r++)t[\"$\"+i[r]]=!0;for(i=0;i<e.length;i++)r=t.hasOwnProperty(\"$\"+e[i].value),e[i].selected!==r&&(e[i].selected=r),r&&n&&(e[i].defaultSelected=!0)}else{for(i=\"\"+Gt(i),t=null,r=0;r<e.length;r++){if(e[r].value===i){e[r].selected=!0,n&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function aa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(M(91));return Ce({},t,{value:void 0,defaultValue:void 0,children:\"\"+e._wrapperState.initialValue})}function Sc(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(M(92));if(Array.isArray(i)){if(!(1>=i.length))throw Error(M(93));i=i[0]}t=i}t==null&&(t=\"\"),i=t}e._wrapperState={initialValue:Gt(i)}}function vp(e,t){var i=Gt(t.value),n=Gt(t.defaultValue);i!=null&&(i=\"\"+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),n!=null&&(e.defaultValue=\"\"+n)}function Cc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==\"\"&&t!==null&&(e.value=t)}var wp={html:\"http://www.w3.org/1999/xhtml\",mathml:\"http://www.w3.org/1998/Math/MathML\",svg:\"http://www.w3.org/2000/svg\"};function yp(e){switch(e){case\"svg\":return\"http://www.w3.org/2000/svg\";case\"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}function la(e,t){return e==null||e===\"http://www.w3.org/1999/xhtml\"?yp(t):e===\"http://www.w3.org/2000/svg\"&&t===\"foreignObject\"?\"http://www.w3.org/1999/xhtml\":e}var yr,xp=function(e){return typeof MSApp!=\"undefined\"&&MSApp.execUnsafeLocalFunction?function(t,i,n,r){MSApp.execUnsafeLocalFunction(function(){return e(t,i,n,r)})}:e}(function(e,t){if(e.namespaceURI!==wp.svg||\"innerHTML\"in e)e.innerHTML=t;else{for(yr=yr||document.createElement(\"div\"),yr.innerHTML=\"<svg>\"+t.valueOf().toString()+\"</svg>\",t=yr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function jn(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}function xr(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i[\"Webkit\"+e]=\"webkit\"+t,i[\"Moz\"+e]=\"moz\"+t,i}var Ei={animationend:xr(\"Animation\",\"AnimationEnd\"),animationiteration:xr(\"Animation\",\"AnimationIteration\"),animationstart:xr(\"Animation\",\"AnimationStart\"),transitionend:xr(\"Transition\",\"TransitionEnd\")},wo={},Sp={};Kt&&(Sp=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete Ei.animationend.animation,delete Ei.animationiteration.animation,delete Ei.animationstart.animation),\"TransitionEvent\"in window||delete Ei.transitionend.transition);function Vs(e){if(wo[e])return wo[e];if(!Ei[e])return e;var t=Ei[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Sp)return wo[e]=t[i];return e}var Cp=Vs(\"animationend\"),Mp=Vs(\"animationiteration\"),Ip=Vs(\"animationstart\"),bp=Vs(\"transitionend\"),gn=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),Mc=new(typeof WeakMap==\"function\"?WeakMap:Map);function zl(e){var t=Mc.get(e);return t===void 0&&(t=new Map,Mc.set(e,t)),t}function Mi(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.effectTag&1026)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function Ep(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ic(e){if(Mi(e)!==e)throw Error(M(188))}function a0(e){var t=e.alternate;if(!t){if(t=Mi(e),t===null)throw Error(M(188));return t!==e?null:e}for(var i=e,n=t;;){var r=i.return;if(r===null)break;var s=r.alternate;if(s===null){if(n=r.return,n!==null){i=n;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===i)return Ic(r),e;if(s===n)return Ic(r),t;s=s.sibling}throw Error(M(188))}if(i.return!==n.return)i=r,n=s;else{for(var o=!1,a=r.child;a;){if(a===i){o=!0,i=r,n=s;break}if(a===n){o=!0,n=r,i=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===i){o=!0,i=s,n=r;break}if(a===n){o=!0,n=s,i=r;break}a=a.sibling}if(!o)throw Error(M(189))}}if(i.alternate!==n)throw Error(M(190))}if(i.tag!==3)throw Error(M(188));return i.stateNode.current===i?e:t}function Ap(e){if(e=a0(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Hi(e,t){if(t==null)throw Error(M(30));return e==null?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function Dl(e,t,i){Array.isArray(e)?e.forEach(t,i):e&&t.call(i,e)}var sn=null;function l0(e){if(e){var t=e._dispatchListeners,i=e._dispatchInstances;if(Array.isArray(t))for(var n=0;n<t.length&&!e.isPropagationStopped();n++)hc(e,t[n],i[n]);else t&&hc(e,t,i);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function Us(e){if(e!==null&&(sn=Hi(sn,e)),e=sn,sn=null,e){if(Dl(e,l0),sn)throw Error(M(95));if(rs)throw e=qo,rs=!1,qo=null,e}}function Ll(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}function Tp(e){if(!Kt)return!1;e=\"on\"+e;var t=e in document;return t||(t=document.createElement(\"div\"),t.setAttribute(e,\"return;\"),t=typeof t[e]==\"function\"),t}var as=[];function kp(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>as.length&&as.push(e)}function Np(e,t,i,n){if(as.length){var r=as.pop();return r.topLevelType=e,r.eventSystemFlags=n,r.nativeEvent=t,r.targetInst=i,r}return{topLevelType:e,eventSystemFlags:n,nativeEvent:t,targetInst:i,ancestors:[]}}function Pp(e){var t=e.targetInst,i=t;do{if(!i){e.ancestors.push(i);break}var n=i;if(n.tag===3)n=n.stateNode.containerInfo;else{for(;n.return;)n=n.return;n=n.tag!==3?null:n.stateNode.containerInfo}if(!n)break;t=i.tag,t!==5&&t!==6||e.ancestors.push(i),i=er(n)}while(i);for(i=0;i<e.ancestors.length;i++){t=e.ancestors[i];var r=Ll(e.nativeEvent);n=e.topLevelType;var s=e.nativeEvent,o=e.eventSystemFlags;i===0&&(o|=64);for(var a=null,l=0;l<os.length;l++){var u=os[l];u&&(u=u.extractEvents(n,t,s,r,o))&&(a=Hi(a,u))}Us(a)}}function ua(e,t,i){if(!i.has(e)){switch(e){case\"scroll\":mn(t,\"scroll\",!0);break;case\"focus\":case\"blur\":mn(t,\"focus\",!0),mn(t,\"blur\",!0),i.set(\"blur\",null),i.set(\"focus\",null);break;case\"cancel\":case\"close\":Tp(e)&&mn(t,e,!0);break;case\"invalid\":case\"submit\":case\"reset\":break;default:gn.indexOf(e)===-1&&ee(e,t)}i.set(e,null)}}var zp,jl,Dp,ca=!1,lt=[],Ut=null,Wt=null,$t=null,Bn=new Map,Rn=new Map,on=[],da=\"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit\".split(\" \"),u0=\"focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture\".split(\" \");function c0(e,t){var i=zl(t);da.forEach(function(n){ua(n,t,i)}),u0.forEach(function(n){ua(n,t,i)})}function ha(e,t,i,n,r){return{blockedOn:e,topLevelType:t,eventSystemFlags:i|32,nativeEvent:r,container:n}}function bc(e,t){switch(e){case\"focus\":case\"blur\":Ut=null;break;case\"dragenter\":case\"dragleave\":Wt=null;break;case\"mouseover\":case\"mouseout\":$t=null;break;case\"pointerover\":case\"pointerout\":Bn.delete(t.pointerId);break;case\"gotpointercapture\":case\"lostpointercapture\":Rn.delete(t.pointerId)}}function an(e,t,i,n,r,s){return e===null||e.nativeEvent!==s?(e=ha(t,i,n,r,s),t!==null&&(t=tr(t),t!==null&&jl(t)),e):(e.eventSystemFlags|=n,e)}function d0(e,t,i,n,r){switch(t){case\"focus\":return Ut=an(Ut,e,t,i,n,r),!0;case\"dragenter\":return Wt=an(Wt,e,t,i,n,r),!0;case\"mouseover\":return $t=an($t,e,t,i,n,r),!0;case\"pointerover\":var s=r.pointerId;return Bn.set(s,an(Bn.get(s)||null,e,t,i,n,r)),!0;case\"gotpointercapture\":return s=r.pointerId,Rn.set(s,an(Rn.get(s)||null,e,t,i,n,r)),!0}return!1}function h0(e){var t=er(e.target);if(t!==null){var i=Mi(t);if(i!==null){if(t=i.tag,t===13){if(t=Ep(i),t!==null){e.blockedOn=t,pe.unstable_runWithPriority(e.priority,function(){Dp(i)});return}}else if(t===3&&i.stateNode.hydrate){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Br(e){if(e.blockedOn!==null)return!1;var t=_l(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(t!==null){var i=tr(t);return i!==null&&jl(i),e.blockedOn=t,!1}return!0}function Ec(e,t,i){Br(e)&&i.delete(t)}function p0(){for(ca=!1;0<lt.length;){var e=lt[0];if(e.blockedOn!==null){e=tr(e.blockedOn),e!==null&&zp(e);break}var t=_l(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);t!==null?e.blockedOn=t:lt.shift()}Ut!==null&&Br(Ut)&&(Ut=null),Wt!==null&&Br(Wt)&&(Wt=null),$t!==null&&Br($t)&&($t=null),Bn.forEach(Ec),Rn.forEach(Ec)}function ln(e,t){e.blockedOn===t&&(e.blockedOn=null,ca||(ca=!0,pe.unstable_scheduleCallback(pe.unstable_NormalPriority,p0)))}function Lp(e){function t(r){return ln(r,e)}if(0<lt.length){ln(lt[0],e);for(var i=1;i<lt.length;i++){var n=lt[i];n.blockedOn===e&&(n.blockedOn=null)}}for(Ut!==null&&ln(Ut,e),Wt!==null&&ln(Wt,e),$t!==null&&ln($t,e),Bn.forEach(t),Rn.forEach(t),i=0;i<on.length;i++)n=on[i],n.blockedOn===e&&(n.blockedOn=null);for(;0<on.length&&(i=on[0],i.blockedOn===null);)h0(i),i.blockedOn===null&&on.shift()}var jp={},Bp=new Map,Bl=new Map,f0=[\"abort\",\"abort\",Cp,\"animationEnd\",Mp,\"animationIteration\",Ip,\"animationStart\",\"canplay\",\"canPlay\",\"canplaythrough\",\"canPlayThrough\",\"durationchange\",\"durationChange\",\"emptied\",\"emptied\",\"encrypted\",\"encrypted\",\"ended\",\"ended\",\"error\",\"error\",\"gotpointercapture\",\"gotPointerCapture\",\"load\",\"load\",\"loadeddata\",\"loadedData\",\"loadedmetadata\",\"loadedMetadata\",\"loadstart\",\"loadStart\",\"lostpointercapture\",\"lostPointerCapture\",\"playing\",\"playing\",\"progress\",\"progress\",\"seeking\",\"seeking\",\"stalled\",\"stalled\",\"suspend\",\"suspend\",\"timeupdate\",\"timeUpdate\",bp,\"transitionEnd\",\"waiting\",\"waiting\"];function Rl(e,t){for(var i=0;i<e.length;i+=2){var n=e[i],r=e[i+1],s=\"on\"+(r[0].toUpperCase()+r.slice(1));s={phasedRegistrationNames:{bubbled:s,captured:s+\"Capture\"},dependencies:[n],eventPriority:t},Bl.set(n,t),Bp.set(n,s),jp[r]=s}}Rl(\"blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange\".split(\" \"),0);Rl(\"drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel\".split(\" \"),1);Rl(f0,2);for(var Ac=\"change selectionchange textInput compositionstart compositionend compositionupdate\".split(\" \"),yo=0;yo<Ac.length;yo++)Bl.set(Ac[yo],0);var g0=pe.unstable_UserBlockingPriority,m0=pe.unstable_runWithPriority,Rr=!0;function ee(e,t){mn(t,e,!1)}function mn(e,t,i){var n=Bl.get(t);switch(n===void 0?2:n){case 0:n=v0.bind(null,t,1,e);break;case 1:n=w0.bind(null,t,1,e);break;default:n=Ws.bind(null,t,1,e)}i?e.addEventListener(t,n,!0):e.addEventListener(t,n,!1)}function v0(e,t,i,n){ii||Il();var r=Ws,s=ii;ii=!0;try{op(r,e,t,i,n)}finally{(ii=s)||bl()}}function w0(e,t,i,n){m0(g0,Ws.bind(null,e,t,i,n))}function Ws(e,t,i,n){if(Rr)if(0<lt.length&&-1<da.indexOf(e))e=ha(null,e,t,i,n),lt.push(e);else{var r=_l(e,t,i,n);if(r===null)bc(e,n);else if(-1<da.indexOf(e))e=ha(r,e,t,i,n),lt.push(e);else if(!d0(r,e,t,i,n)){bc(e,n),e=Np(e,n,null,t);try{lp(Pp,e)}finally{kp(e)}}}}function _l(e,t,i,n){if(i=Ll(n),i=er(i),i!==null){var r=Mi(i);if(r===null)i=null;else{var s=r.tag;if(s===13){if(i=Ep(r),i!==null)return i;i=null}else if(s===3){if(r.stateNode.hydrate)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}e=Np(e,n,i,t);try{lp(Pp,e)}finally{kp(e)}return null}var In={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},y0=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(In).forEach(function(e){y0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),In[t]=In[e]})});function Rp(e,t,i){return t==null||typeof t==\"boolean\"||t===\"\"?\"\":i||typeof t!=\"number\"||t===0||In.hasOwnProperty(e)&&In[e]?(\"\"+t).trim():t+\"px\"}function _p(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var n=i.indexOf(\"--\")===0,r=Rp(i,t[i],n);i===\"float\"&&(i=\"cssFloat\"),n?e.setProperty(i,r):e[i]=r}}var x0=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pa(e,t){if(t){if(x0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(M(137,e,\"\"));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(M(60));if(!(typeof t.dangerouslySetInnerHTML==\"object\"&&\"__html\"in t.dangerouslySetInnerHTML))throw Error(M(61))}if(t.style!=null&&typeof t.style!=\"object\")throw Error(M(62,\"\"))}}function fa(e,t){if(e.indexOf(\"-\")===-1)return typeof t.is==\"string\";switch(e){case\"annotation-xml\":case\"color-profile\":case\"font-face\":case\"font-face-src\":case\"font-face-uri\":case\"font-face-format\":case\"font-face-name\":case\"missing-glyph\":return!1;default:return!0}}var Tc=wp.html;function mt(e,t){e=e.nodeType===9||e.nodeType===11?e:e.ownerDocument;var i=zl(e);t=Cl[t];for(var n=0;n<t.length;n++)ua(t[n],e,i)}function ls(){}function ga(e){if(e=e||(typeof document!=\"undefined\"?document:void 0),typeof e==\"undefined\")return null;try{return e.activeElement||e.body}catch{return e.body}}function kc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Nc(e,t){var i=kc(e);e=0;for(var n;i;){if(i.nodeType===3){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=kc(i)}}function Op(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Op(e,t.parentNode):\"contains\"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Pc(){for(var e=window,t=ga();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href==\"string\"}catch{i=!1}if(i)e=t.contentWindow;else break;t=ga(e.document)}return t}function ma(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t===\"input\"&&(e.type===\"text\"||e.type===\"search\"||e.type===\"tel\"||e.type===\"url\"||e.type===\"password\")||t===\"textarea\"||e.contentEditable===\"true\")}var Vp=\"$\",Up=\"/$\",Ol=\"$?\",Vl=\"$!\",xo=null,So=null;function Wp(e,t){switch(e){case\"button\":case\"input\":case\"select\":case\"textarea\":return!!t.autoFocus}return!1}function va(e,t){return e===\"textarea\"||e===\"option\"||e===\"noscript\"||typeof t.children==\"string\"||typeof t.children==\"number\"||typeof t.dangerouslySetInnerHTML==\"object\"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Co=typeof setTimeout==\"function\"?setTimeout:void 0,S0=typeof clearTimeout==\"function\"?clearTimeout:void 0;function Bi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function zc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i===Vp||i===Vl||i===Ol){if(t===0)return e;t--}else i===Up&&t++}e=e.previousSibling}return null}var Ul=Math.random().toString(36).slice(2),Lt=\"__reactInternalInstance$\"+Ul,us=\"__reactEventHandlers$\"+Ul,qn=\"__reactContainere$\"+Ul;function er(e){var t=e[Lt];if(t)return t;for(var i=e.parentNode;i;){if(t=i[qn]||i[Lt]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=zc(e);e!==null;){if(i=e[Lt])return i;e=zc(e)}return t}e=i,i=e.parentNode}return null}function tr(e){return e=e[Lt]||e[qn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function mi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(M(33))}function Wl(e){return e[us]||null}function vt(e){do e=e.return;while(e&&e.tag!==5);return e||null}function $p(e,t){var i=e.stateNode;if(!i)return null;var n=Sl(i);if(!n)return null;i=n[t];e:switch(t){case\"onClick\":case\"onClickCapture\":case\"onDoubleClick\":case\"onDoubleClickCapture\":case\"onMouseDown\":case\"onMouseDownCapture\":case\"onMouseMove\":case\"onMouseMoveCapture\":case\"onMouseUp\":case\"onMouseUpCapture\":case\"onMouseEnter\":(n=!n.disabled)||(e=e.type,n=!(e===\"button\"||e===\"input\"||e===\"select\"||e===\"textarea\")),e=!n;break e;default:e=!1}if(e)return null;if(i&&typeof i!=\"function\")throw Error(M(231,t,typeof i));return i}function Dc(e,t,i){(t=$p(e,i.dispatchConfig.phasedRegistrationNames[t]))&&(i._dispatchListeners=Hi(i._dispatchListeners,t),i._dispatchInstances=Hi(i._dispatchInstances,e))}function C0(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,i=[];t;)i.push(t),t=vt(t);for(t=i.length;0<t--;)Dc(i[t],\"captured\",e);for(t=0;t<i.length;t++)Dc(i[t],\"bubbled\",e)}}function wa(e,t,i){e&&i&&i.dispatchConfig.registrationName&&(t=$p(e,i.dispatchConfig.registrationName))&&(i._dispatchListeners=Hi(i._dispatchListeners,t),i._dispatchInstances=Hi(i._dispatchInstances,e))}function M0(e){e&&e.dispatchConfig.registrationName&&wa(e._targetInst,null,e)}function Fi(e){Dl(e,C0)}var jt=null,$l=null,_r=null;function Hp(){if(_r)return _r;var e,t=$l,i=t.length,n,r=\"value\"in jt?jt.value:jt.textContent,s=r.length;for(e=0;e<i&&t[e]===r[e];e++);var o=i-e;for(n=1;n<=o&&t[i-n]===r[s-n];n++);return _r=r.slice(e,1<n?1-n:void 0)}function Or(){return!0}function cs(){return!1}function Oe(e,t,i,n){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=i,e=this.constructor.Interface;for(var r in e)e.hasOwnProperty(r)&&((t=e[r])?this[r]=t(i):r===\"target\"?this.target=n:this[r]=i[r]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Or:cs,this.isPropagationStopped=cs,this}Ce(Oe.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!=\"unknown\"&&(e.returnValue=!1),this.isDefaultPrevented=Or)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!=\"unknown\"&&(e.cancelBubble=!0),this.isPropagationStopped=Or)},persist:function(){this.isPersistent=Or},isPersistent:cs,destructor:function(){var e=this.constructor.Interface,t;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=cs,this._dispatchInstances=this._dispatchListeners=null}});Oe.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};Oe.extend=function(e){function t(){}function i(){return n.apply(this,arguments)}var n=this;t.prototype=n.prototype;var r=new t;return Ce(r,i.prototype),i.prototype=r,i.prototype.constructor=i,i.Interface=Ce({},n.Interface,e),i.extend=n.extend,Fp(i),i};Fp(Oe);function I0(e,t,i,n){if(this.eventPool.length){var r=this.eventPool.pop();return this.call(r,e,t,i,n),r}return new this(e,t,i,n)}function b0(e){if(!(e instanceof this))throw Error(M(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Fp(e){e.eventPool=[],e.getPooled=I0,e.release=b0}var E0=Oe.extend({data:null}),A0=Oe.extend({data:null}),T0=[9,13,27,32],Hl=Kt&&\"CompositionEvent\"in window,bn=null;Kt&&\"documentMode\"in document&&(bn=document.documentMode);var k0=Kt&&\"TextEvent\"in window&&!bn,Qp=Kt&&(!Hl||bn&&8<bn&&11>=bn),Lc=String.fromCharCode(32),gt={beforeInput:{phasedRegistrationNames:{bubbled:\"onBeforeInput\",captured:\"onBeforeInputCapture\"},dependencies:[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]},compositionEnd:{phasedRegistrationNames:{bubbled:\"onCompositionEnd\",captured:\"onCompositionEndCapture\"},dependencies:\"blur compositionend keydown keypress keyup mousedown\".split(\" \")},compositionStart:{phasedRegistrationNames:{bubbled:\"onCompositionStart\",captured:\"onCompositionStartCapture\"},dependencies:\"blur compositionstart keydown keypress keyup mousedown\".split(\" \")},compositionUpdate:{phasedRegistrationNames:{bubbled:\"onCompositionUpdate\",captured:\"onCompositionUpdateCapture\"},dependencies:\"blur compositionupdate keydown keypress keyup mousedown\".split(\" \")}},jc=!1;function Zp(e,t){switch(e){case\"keyup\":return T0.indexOf(t.keyCode)!==-1;case\"keydown\":return t.keyCode!==229;case\"keypress\":case\"mousedown\":case\"blur\":return!0;default:return!1}}function Gp(e){return e=e.detail,typeof e==\"object\"&&\"data\"in e?e.data:null}var Ai=!1;function N0(e,t){switch(e){case\"compositionend\":return Gp(t);case\"keypress\":return t.which!==32?null:(jc=!0,Lc);case\"textInput\":return e=t.data,e===Lc&&jc?null:e;default:return null}}function P0(e,t){if(Ai)return e===\"compositionend\"||!Hl&&Zp(e,t)?(e=Hp(),_r=$l=jt=null,Ai=!1,e):null;switch(e){case\"paste\":return null;case\"keypress\":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case\"compositionend\":return Qp&&t.locale!==\"ko\"?null:t.data;default:return null}}var z0={eventTypes:gt,extractEvents:function(e,t,i,n){var r;if(Hl)e:{switch(e){case\"compositionstart\":var s=gt.compositionStart;break e;case\"compositionend\":s=gt.compositionEnd;break e;case\"compositionupdate\":s=gt.compositionUpdate;break e}s=void 0}else Ai?Zp(e,i)&&(s=gt.compositionEnd):e===\"keydown\"&&i.keyCode===229&&(s=gt.compositionStart);return s?(Qp&&i.locale!==\"ko\"&&(Ai||s!==gt.compositionStart?s===gt.compositionEnd&&Ai&&(r=Hp()):(jt=n,$l=\"value\"in jt?jt.value:jt.textContent,Ai=!0)),s=E0.getPooled(s,t,i,n),r?s.data=r:(r=Gp(i),r!==null&&(s.data=r)),Fi(s),r=s):r=null,(e=k0?N0(e,i):P0(e,i))?(t=A0.getPooled(gt.beforeInput,t,i,n),t.data=e,Fi(t)):t=null,r===null?t:t===null?r:[r,t]}},D0={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t===\"input\"?!!D0[e.type]:t===\"textarea\"}var Xp={change:{phasedRegistrationNames:{bubbled:\"onChange\",captured:\"onChangeCapture\"},dependencies:\"blur change click focus input keydown keyup selectionchange\".split(\" \")}};function Jp(e,t,i){return e=Oe.getPooled(Xp.change,e,t,i),e.type=\"change\",rp(i),Fi(e),e}var En=null,_n=null;function L0(e){Us(e)}function $s(e){var t=mi(e);if(gp(t))return e}function j0(e,t){if(e===\"change\")return t}var ya=!1;Kt&&(ya=Tp(\"input\")&&(!document.documentMode||9<document.documentMode));function Bc(){En&&(En.detachEvent(\"onpropertychange\",Kp),_n=En=null)}function Kp(e){if(e.propertyName===\"value\"&&$s(_n))if(e=Jp(_n,e,Ll(e)),ii)Us(e);else{ii=!0;try{Ml(L0,e)}finally{ii=!1,bl()}}}function B0(e,t,i){e===\"focus\"?(Bc(),En=t,_n=i,En.attachEvent(\"onpropertychange\",Kp)):e===\"blur\"&&Bc()}function R0(e){if(e===\"selectionchange\"||e===\"keyup\"||e===\"keydown\")return $s(_n)}function _0(e,t){if(e===\"click\")return $s(t)}function O0(e,t){if(e===\"input\"||e===\"change\")return $s(t)}var V0={eventTypes:Xp,_isInputEventSupported:ya,extractEvents:function(e,t,i,n){var r=t?mi(t):window,s=r.nodeName&&r.nodeName.toLowerCase();if(s===\"select\"||s===\"input\"&&r.type===\"file\")var o=j0;else if(Yp(r))if(ya)o=O0;else{o=R0;var a=B0}else(s=r.nodeName)&&s.toLowerCase()===\"input\"&&(r.type===\"checkbox\"||r.type===\"radio\")&&(o=_0);if(o&&(o=o(e,t)))return Jp(o,i,n);a&&a(e,r,t),e===\"blur\"&&(e=r._wrapperState)&&e.controlled&&r.type===\"number\"&&sa(r,\"number\",r.value)}},ir=Oe.extend({view:null,detail:null}),U0={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function W0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=U0[e])?!!t[e]:!1}function Fl(){return W0}var Rc=0,_c=0,Oc=!1,Vc=!1,nr=ir.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Fl,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if(\"movementX\"in e)return e.movementX;var t=Rc;return Rc=e.screenX,Oc?e.type===\"mousemove\"?e.screenX-t:0:(Oc=!0,0)},movementY:function(e){if(\"movementY\"in e)return e.movementY;var t=_c;return _c=e.screenY,Vc?e.type===\"mousemove\"?e.screenY-t:0:(Vc=!0,0)}}),qp=nr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),un={mouseEnter:{registrationName:\"onMouseEnter\",dependencies:[\"mouseout\",\"mouseover\"]},mouseLeave:{registrationName:\"onMouseLeave\",dependencies:[\"mouseout\",\"mouseover\"]},pointerEnter:{registrationName:\"onPointerEnter\",dependencies:[\"pointerout\",\"pointerover\"]},pointerLeave:{registrationName:\"onPointerLeave\",dependencies:[\"pointerout\",\"pointerover\"]}},$0={eventTypes:un,extractEvents:function(e,t,i,n,r){var s=e===\"mouseover\"||e===\"pointerover\",o=e===\"mouseout\"||e===\"pointerout\";if(s&&(r&32)===0&&(i.relatedTarget||i.fromElement)||!o&&!s)return null;if(s=n.window===n?n:(s=n.ownerDocument)?s.defaultView||s.parentWindow:window,o){if(o=t,t=(t=i.relatedTarget||i.toElement)?er(t):null,t!==null){var a=Mi(t);(t!==a||t.tag!==5&&t.tag!==6)&&(t=null)}}else o=null;if(o===t)return null;if(e===\"mouseout\"||e===\"mouseover\")var l=nr,u=un.mouseLeave,d=un.mouseEnter,p=\"mouse\";else(e===\"pointerout\"||e===\"pointerover\")&&(l=qp,u=un.pointerLeave,d=un.pointerEnter,p=\"pointer\");if(e=o==null?s:mi(o),s=t==null?s:mi(t),u=l.getPooled(u,o,i,n),u.type=p+\"leave\",u.target=e,u.relatedTarget=s,i=l.getPooled(d,t,i,n),i.type=p+\"enter\",i.target=s,i.relatedTarget=e,n=o,p=t,n&&p)e:{for(l=n,d=p,o=0,e=l;e;e=vt(e))o++;for(e=0,t=d;t;t=vt(t))e++;for(;0<o-e;)l=vt(l),o--;for(;0<e-o;)d=vt(d),e--;for(;o--;){if(l===d||l===d.alternate)break e;l=vt(l),d=vt(d)}l=null}else l=null;for(d=l,l=[];n&&n!==d&&(o=n.alternate,!(o!==null&&o===d));)l.push(n),n=vt(n);for(n=[];p&&p!==d&&(o=p.alternate,!(o!==null&&o===d));)n.push(p),p=vt(p);for(p=0;p<l.length;p++)wa(l[p],\"bubbled\",u);for(p=n.length;0<p--;)wa(n[p],\"captured\",i);return(r&64)===0?[u]:[u,i]}};function H0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vi=typeof Object.is==\"function\"?Object.is:H0,F0=Object.prototype.hasOwnProperty;function On(e,t){if(vi(e,t))return!0;if(typeof e!=\"object\"||e===null||typeof t!=\"object\"||t===null)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++)if(!F0.call(t,i[n])||!vi(e[i[n]],t[i[n]]))return!1;return!0}var Q0=Kt&&\"documentMode\"in document&&11>=document.documentMode,ef={select:{phasedRegistrationNames:{bubbled:\"onSelect\",captured:\"onSelectCapture\"},dependencies:\"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange\".split(\" \")}},Ti=null,xa=null,An=null,Sa=!1;function Uc(e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;return Sa||Ti==null||Ti!==ga(i)?null:(i=Ti,\"selectionStart\"in i&&ma(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),An&&On(An,i)?null:(An=i,e=Oe.getPooled(ef.select,xa,e,t),e.type=\"select\",e.target=Ti,Fi(e),e))}var Z0={eventTypes:ef,extractEvents:function(e,t,i,n,r,s){if(r=s||(n.window===n?n.document:n.nodeType===9?n:n.ownerDocument),!(s=!r)){e:{r=zl(r),s=Cl.onSelect;for(var o=0;o<s.length;o++)if(!r.has(s[o])){r=!1;break e}r=!0}s=!r}if(s)return null;switch(r=t?mi(t):window,e){case\"focus\":(Yp(r)||r.contentEditable===\"true\")&&(Ti=r,xa=t,An=null);break;case\"blur\":An=xa=Ti=null;break;case\"mousedown\":Sa=!0;break;case\"contextmenu\":case\"mouseup\":case\"dragend\":return Sa=!1,Uc(i,n);case\"selectionchange\":if(Q0)break;case\"keydown\":case\"keyup\":return Uc(i,n)}return null}},G0=Oe.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Y0=Oe.extend({clipboardData:function(e){return\"clipboardData\"in e?e.clipboardData:window.clipboardData}}),X0=ir.extend({relatedTarget:null});function Vr(e){var t=e.keyCode;return\"charCode\"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}var J0={Esc:\"Escape\",Spacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},K0={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",116:\"F5\",117:\"F6\",118:\"F7\",119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},q0=ir.extend({key:function(e){if(e.key){var t=J0[e.key]||e.key;if(t!==\"Unidentified\")return t}return e.type===\"keypress\"?(e=Vr(e),e===13?\"Enter\":String.fromCharCode(e)):e.type===\"keydown\"||e.type===\"keyup\"?K0[e.keyCode]||\"Unidentified\":\"\"},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Fl,charCode:function(e){return e.type===\"keypress\"?Vr(e):0},keyCode:function(e){return e.type===\"keydown\"||e.type===\"keyup\"?e.keyCode:0},which:function(e){return e.type===\"keypress\"?Vr(e):e.type===\"keydown\"||e.type===\"keyup\"?e.keyCode:0}}),ex=nr.extend({dataTransfer:null}),tx=ir.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Fl}),ix=Oe.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),nx=nr.extend({deltaX:function(e){return\"deltaX\"in e?e.deltaX:\"wheelDeltaX\"in e?-e.wheelDeltaX:0},deltaY:function(e){return\"deltaY\"in e?e.deltaY:\"wheelDeltaY\"in e?-e.wheelDeltaY:\"wheelDelta\"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),rx={eventTypes:jp,extractEvents:function(e,t,i,n){var r=Bp.get(e);if(!r)return null;switch(e){case\"keypress\":if(Vr(i)===0)return null;case\"keydown\":case\"keyup\":e=q0;break;case\"blur\":case\"focus\":e=X0;break;case\"click\":if(i.button===2)return null;case\"auxclick\":case\"dblclick\":case\"mousedown\":case\"mousemove\":case\"mouseup\":case\"mouseout\":case\"mouseover\":case\"contextmenu\":e=nr;break;case\"drag\":case\"dragend\":case\"dragenter\":case\"dragexit\":case\"dragleave\":case\"dragover\":case\"dragstart\":case\"drop\":e=ex;break;case\"touchcancel\":case\"touchend\":case\"touchmove\":case\"touchstart\":e=tx;break;case Cp:case Mp:case Ip:e=G0;break;case bp:e=ix;break;case\"scroll\":e=ir;break;case\"wheel\":e=nx;break;case\"copy\":case\"cut\":case\"paste\":e=Y0;break;case\"gotpointercapture\":case\"lostpointercapture\":case\"pointercancel\":case\"pointerdown\":case\"pointermove\":case\"pointerout\":case\"pointerover\":case\"pointerup\":e=qp;break;default:e=Oe}return t=e.getPooled(r,t,i,n),Fi(t),t}};if(ss)throw Error(M(101));ss=Array.prototype.slice.call(\"ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin\".split(\" \"));ip();var sx=tr;Sl=Wl;ep=sx;tp=mi;np({SimpleEventPlugin:rx,EnterLeaveEventPlugin:$0,ChangeEventPlugin:V0,SelectEventPlugin:Z0,BeforeInputEventPlugin:z0});var Ca=[],ki=-1;function K(e){0>ki||(e.current=Ca[ki],Ca[ki]=null,ki--)}function re(e,t){ki++,Ca[ki]=e.current,e.current=t}var Yt={},ye={current:Yt},Ae={current:!1},wi=Yt;function Qi(e,t){var i=e.type.contextTypes;if(!i)return Yt;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in i)r[s]=t[s];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Te(e){return e=e.childContextTypes,e!=null}function ds(){K(Ae),K(ye)}function Wc(e,t,i){if(ye.current!==Yt)throw Error(M(168));re(ye,t),re(Ae,i)}function tf(e,t,i){var n=e.stateNode;if(e=t.childContextTypes,typeof n.getChildContext!=\"function\")return i;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(M(108,It(t)||\"Unknown\",r));return Ce({},i,{},n)}function Ur(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Yt,wi=ye.current,re(ye,e),re(Ae,Ae.current),!0}function $c(e,t,i){var n=e.stateNode;if(!n)throw Error(M(169));i?(e=tf(e,t,wi),n.__reactInternalMemoizedMergedChildContext=e,K(Ae),K(ye),re(ye,e)):K(Ae),re(Ae,i)}var ox=pe.unstable_runWithPriority,Ql=pe.unstable_scheduleCallback,nf=pe.unstable_cancelCallback,Hc=pe.unstable_requestPaint,Ma=pe.unstable_now,ax=pe.unstable_getCurrentPriorityLevel,Hs=pe.unstable_ImmediatePriority,rf=pe.unstable_UserBlockingPriority,sf=pe.unstable_NormalPriority,of=pe.unstable_LowPriority,af=pe.unstable_IdlePriority,lf={},lx=pe.unstable_shouldYield,ux=Hc!==void 0?Hc:function(){},yt=null,Wr=null,Mo=!1,Fc=Ma(),We=1e4>Fc?Ma:function(){return Ma()-Fc};function Fs(){switch(ax()){case Hs:return 99;case rf:return 98;case sf:return 97;case of:return 96;case af:return 95;default:throw Error(M(332))}}function uf(e){switch(e){case 99:return Hs;case 98:return rf;case 97:return sf;case 96:return of;case 95:return af;default:throw Error(M(332))}}function Xt(e,t){return e=uf(e),ox(e,t)}function cf(e,t,i){return e=uf(e),Ql(e,t,i)}function Qc(e){return yt===null?(yt=[e],Wr=Ql(Hs,df)):yt.push(e),lf}function ft(){if(Wr!==null){var e=Wr;Wr=null,nf(e)}df()}function df(){if(!Mo&&yt!==null){Mo=!0;var e=0;try{var t=yt;Xt(99,function(){for(;e<t.length;e++){var i=t[e];do i=i(!0);while(i!==null)}}),yt=null}catch(i){throw yt!==null&&(yt=yt.slice(e+1)),Ql(Hs,ft),i}finally{Mo=!1}}}function $r(e,t,i){return i/=10,1073741821-(((1073741821-e+t/10)/i|0)+1)*i}function Ke(e,t){if(e&&e.defaultProps){t=Ce({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i])}return t}var hs={current:null},ps=null,Ni=null,fs=null;function Zl(){fs=Ni=ps=null}function Gl(e){var t=hs.current;K(hs),e.type._context._currentValue=t}function hf(e,t){for(;e!==null;){var i=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,i!==null&&i.childExpirationTime<t&&(i.childExpirationTime=t);else if(i!==null&&i.childExpirationTime<t)i.childExpirationTime=t;else break;e=e.return}}function Ri(e,t){ps=e,fs=Ni=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.expirationTime>=t&&(ut=!0),e.firstContext=null)}function He(e,t){if(fs!==e&&t!==!1&&t!==0)if((typeof t!=\"number\"||t===1073741823)&&(fs=e,t=1073741823),t={context:e,observedBits:t,next:null},Ni===null){if(ps===null)throw Error(M(308));Ni=t,ps.dependencies={expirationTime:0,firstContext:t,responders:null}}else Ni=Ni.next=t;return e._currentValue}var Dt=!1;function Yl(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function Xl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function Ht(e,t){return e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null},e.next=e}function Ft(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}}function Zc(e,t){var i=e.alternate;i!==null&&Xl(i,e),e=e.updateQueue,i=e.baseQueue,i===null?(e.baseQueue=t.next=t,t.next=t):(t.next=i.next,i.next=t)}function Vn(e,t,i,n){var r=e.updateQueue;Dt=!1;var s=r.baseQueue,o=r.shared.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}s=o,r.shared.pending=null,a=e.alternate,a!==null&&(a=a.updateQueue,a!==null&&(a.baseQueue=o))}if(s!==null){a=s.next;var l=r.baseState,u=0,d=null,p=null,m=null;if(a!==null){var v=a;do{if(o=v.expirationTime,o<n){var S={expirationTime:v.expirationTime,suspenseConfig:v.suspenseConfig,tag:v.tag,payload:v.payload,callback:v.callback,next:null};m===null?(p=m=S,d=l):m=m.next=S,o>u&&(u=o)}else{m!==null&&(m=m.next={expirationTime:1073741823,suspenseConfig:v.suspenseConfig,tag:v.tag,payload:v.payload,callback:v.callback,next:null}),Wf(o,v.suspenseConfig);e:{var y=e,h=v;switch(o=t,S=i,h.tag){case 1:if(y=h.payload,typeof y==\"function\"){l=y.call(S,l,o);break e}l=y;break e;case 3:y.effectTag=y.effectTag&-4097|64;case 0:if(y=h.payload,o=typeof y==\"function\"?y.call(S,l,o):y,o==null)break e;l=Ce({},l,o);break e;case 2:Dt=!0}}v.callback!==null&&(e.effectTag|=32,o=r.effects,o===null?r.effects=[v]:o.push(v))}if(v=v.next,v===null||v===a){if(o=r.shared.pending,o===null)break;v=s.next=o.next,o.next=a,r.baseQueue=s=o,r.shared.pending=null}}while(1)}m===null?d=l:m.next=p,r.baseState=d,r.baseQueue=m,Xs(u),e.expirationTime=u,e.memoizedState=l}}function Gc(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],r=n.callback;if(r!==null){if(n.callback=null,n=r,r=i,typeof n!=\"function\")throw Error(M(191,n));n.call(r)}}}var Tn=et.ReactCurrentBatchConfig,pf=new Os.Component().refs;function gs(e,t,i,n){t=e.memoizedState,i=i(n,t),i=i==null?t:Ce({},t,i),e.memoizedState=i,e.expirationTime===0&&(e.updateQueue.baseState=i)}var Qs={isMounted:function(e){return(e=e._reactInternalFiber)?Mi(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternalFiber;var n=ht(),r=Tn.suspense;n=pi(n,e,r),r=Ht(n,r),r.payload=t,i!=null&&(r.callback=i),Ft(e,r),Zt(e,n)},enqueueReplaceState:function(e,t,i){e=e._reactInternalFiber;var n=ht(),r=Tn.suspense;n=pi(n,e,r),r=Ht(n,r),r.tag=1,r.payload=t,i!=null&&(r.callback=i),Ft(e,r),Zt(e,n)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var i=ht(),n=Tn.suspense;i=pi(i,e,n),n=Ht(i,n),n.tag=2,t!=null&&(n.callback=t),Ft(e,n),Zt(e,i)}};function Yc(e,t,i,n,r,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate==\"function\"?e.shouldComponentUpdate(n,s,o):t.prototype&&t.prototype.isPureReactComponent?!On(i,n)||!On(r,s):!0}function ff(e,t,i){var n=!1,r=Yt,s=t.contextType;return typeof s==\"object\"&&s!==null?s=He(s):(r=Te(t)?wi:ye.current,n=t.contextTypes,s=(n=n!=null)?Qi(e,r):Yt),t=new t(i,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Qs,e.stateNode=t,t._reactInternalFiber=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function Xc(e,t,i,n){e=t.state,typeof t.componentWillReceiveProps==\"function\"&&t.componentWillReceiveProps(i,n),typeof t.UNSAFE_componentWillReceiveProps==\"function\"&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&Qs.enqueueReplaceState(t,t.state,null)}function Ia(e,t,i,n){var r=e.stateNode;r.props=i,r.state=e.memoizedState,r.refs=pf,Yl(e);var s=t.contextType;typeof s==\"object\"&&s!==null?r.context=He(s):(s=Te(t)?wi:ye.current,r.context=Qi(e,s)),Vn(e,i,r,n),r.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s==\"function\"&&(gs(e,t,s,i),r.state=e.memoizedState),typeof t.getDerivedStateFromProps==\"function\"||typeof r.getSnapshotBeforeUpdate==\"function\"||typeof r.UNSAFE_componentWillMount!=\"function\"&&typeof r.componentWillMount!=\"function\"||(t=r.state,typeof r.componentWillMount==\"function\"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount==\"function\"&&r.UNSAFE_componentWillMount(),t!==r.state&&Qs.enqueueReplaceState(r,r.state,null),Vn(e,i,r,n),r.state=e.memoizedState),typeof r.componentDidMount==\"function\"&&(e.effectTag|=4)}var Sr=Array.isArray;function cn(e,t,i){if(e=i.ref,e!==null&&typeof e!=\"function\"&&typeof e!=\"object\"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(M(309));var n=i.stateNode}if(!n)throw Error(M(147,e));var r=\"\"+e;return t!==null&&t.ref!==null&&typeof t.ref==\"function\"&&t.ref._stringRef===r?t.ref:(t=function(s){var o=n.refs;o===pf&&(o=n.refs={}),s===null?delete o[r]:o[r]=s},t._stringRef=r,t)}if(typeof e!=\"string\")throw Error(M(284));if(!i._owner)throw Error(M(290,e))}return e}function Cr(e,t){if(e.type!==\"textarea\")throw Error(M(31,Object.prototype.toString.call(t)===\"[object Object]\"?\"object with keys {\"+Object.keys(t).join(\", \")+\"}\":t,\"\"))}function gf(e){function t(h,c){if(e){var f=h.lastEffect;f!==null?(f.nextEffect=c,h.lastEffect=c):h.firstEffect=h.lastEffect=c,c.nextEffect=null,c.effectTag=8}}function i(h,c){if(!e)return null;for(;c!==null;)t(h,c),c=c.sibling;return null}function n(h,c){for(h=new Map;c!==null;)c.key!==null?h.set(c.key,c):h.set(c.index,c),c=c.sibling;return h}function r(h,c){return h=yi(h,c),h.index=0,h.sibling=null,h}function s(h,c,f){return h.index=f,e?(f=h.alternate,f!==null?(f=f.index,f<c?(h.effectTag=2,c):f):(h.effectTag=2,c)):c}function o(h){return e&&h.alternate===null&&(h.effectTag=2),h}function a(h,c,f,g){return c===null||c.tag!==6?(c=ko(f,h.mode,g),c.return=h,c):(c=r(c,f),c.return=h,c)}function l(h,c,f,g){return c!==null&&c.elementType===f.type?(g=r(c,f.props),g.ref=cn(h,c,f),g.return=h,g):(g=Zr(f.type,f.key,f.props,null,h.mode,g),g.ref=cn(h,c,f),g.return=h,g)}function u(h,c,f,g){return c===null||c.tag!==4||c.stateNode.containerInfo!==f.containerInfo||c.stateNode.implementation!==f.implementation?(c=No(f,h.mode,g),c.return=h,c):(c=r(c,f.children||[]),c.return=h,c)}function d(h,c,f,g,w){return c===null||c.tag!==7?(c=_t(f,h.mode,g,w),c.return=h,c):(c=r(c,f),c.return=h,c)}function p(h,c,f){if(typeof c==\"string\"||typeof c==\"number\")return c=ko(\"\"+c,h.mode,f),c.return=h,c;if(typeof c==\"object\"&&c!==null){switch(c.$$typeof){case vr:return f=Zr(c.type,c.key,c.props,null,h.mode,f),f.ref=cn(h,null,c),f.return=h,f;case bi:return c=No(c,h.mode,f),c.return=h,c}if(Sr(c)||rn(c))return c=_t(c,h.mode,f,null),c.return=h,c;Cr(h,c)}return null}function m(h,c,f,g){var w=c!==null?c.key:null;if(typeof f==\"string\"||typeof f==\"number\")return w!==null?null:a(h,c,\"\"+f,g);if(typeof f==\"object\"&&f!==null){switch(f.$$typeof){case vr:return f.key===w?f.type===ti?d(h,c,f.props.children,g,w):l(h,c,f,g):null;case bi:return f.key===w?u(h,c,f,g):null}if(Sr(f)||rn(f))return w!==null?null:d(h,c,f,g,null);Cr(h,f)}return null}function v(h,c,f,g,w){if(typeof g==\"string\"||typeof g==\"number\")return h=h.get(f)||null,a(c,h,\"\"+g,w);if(typeof g==\"object\"&&g!==null){switch(g.$$typeof){case vr:return h=h.get(g.key===null?f:g.key)||null,g.type===ti?d(c,h,g.props.children,w,g.key):l(c,h,g,w);case bi:return h=h.get(g.key===null?f:g.key)||null,u(c,h,g,w)}if(Sr(g)||rn(g))return h=h.get(f)||null,d(c,h,g,w,null);Cr(c,g)}return null}function S(h,c,f,g){for(var w=null,x=null,C=c,z=c=0,D=null;C!==null&&z<f.length;z++){C.index>z?(D=C,C=null):D=C.sibling;var T=m(h,C,f[z],g);if(T===null){C===null&&(C=D);break}e&&C&&T.alternate===null&&t(h,C),c=s(T,c,z),x===null?w=T:x.sibling=T,x=T,C=D}if(z===f.length)return i(h,C),w;if(C===null){for(;z<f.length;z++)C=p(h,f[z],g),C!==null&&(c=s(C,c,z),x===null?w=C:x.sibling=C,x=C);return w}for(C=n(h,C);z<f.length;z++)D=v(C,h,z,f[z],g),D!==null&&(e&&D.alternate!==null&&C.delete(D.key===null?z:D.key),c=s(D,c,z),x===null?w=D:x.sibling=D,x=D);return e&&C.forEach(function(b){return t(h,b)}),w}function y(h,c,f,g){var w=rn(f);if(typeof w!=\"function\")throw Error(M(150));if(f=w.call(f),f==null)throw Error(M(151));for(var x=w=null,C=c,z=c=0,D=null,T=f.next();C!==null&&!T.done;z++,T=f.next()){C.index>z?(D=C,C=null):D=C.sibling;var b=m(h,C,T.value,g);if(b===null){C===null&&(C=D);break}e&&C&&b.alternate===null&&t(h,C),c=s(b,c,z),x===null?w=b:x.sibling=b,x=b,C=D}if(T.done)return i(h,C),w;if(C===null){for(;!T.done;z++,T=f.next())T=p(h,T.value,g),T!==null&&(c=s(T,c,z),x===null?w=T:x.sibling=T,x=T);return w}for(C=n(h,C);!T.done;z++,T=f.next())T=v(C,h,z,T.value,g),T!==null&&(e&&T.alternate!==null&&C.delete(T.key===null?z:T.key),c=s(T,c,z),x===null?w=T:x.sibling=T,x=T);return e&&C.forEach(function(j){return t(h,j)}),w}return function(h,c,f,g){var w=typeof f==\"object\"&&f!==null&&f.type===ti&&f.key===null;w&&(f=f.props.children);var x=typeof f==\"object\"&&f!==null;if(x)switch(f.$$typeof){case vr:e:{for(x=f.key,w=c;w!==null;){if(w.key===x){switch(w.tag){case 7:if(f.type===ti){i(h,w.sibling),c=r(w,f.props.children),c.return=h,h=c;break e}break;default:if(w.elementType===f.type){i(h,w.sibling),c=r(w,f.props),c.ref=cn(h,w,f),c.return=h,h=c;break e}}i(h,w);break}else t(h,w);w=w.sibling}f.type===ti?(c=_t(f.props.children,h.mode,g,f.key),c.return=h,h=c):(g=Zr(f.type,f.key,f.props,null,h.mode,g),g.ref=cn(h,c,f),g.return=h,h=g)}return o(h);case bi:e:{for(w=f.key;c!==null;){if(c.key===w)if(c.tag===4&&c.stateNode.containerInfo===f.containerInfo&&c.stateNode.implementation===f.implementation){i(h,c.sibling),c=r(c,f.children||[]),c.return=h,h=c;break e}else{i(h,c);break}else t(h,c);c=c.sibling}c=No(f,h.mode,g),c.return=h,h=c}return o(h)}if(typeof f==\"string\"||typeof f==\"number\")return f=\"\"+f,c!==null&&c.tag===6?(i(h,c.sibling),c=r(c,f),c.return=h,h=c):(i(h,c),c=ko(f,h.mode,g),c.return=h,h=c),o(h);if(Sr(f))return S(h,c,f,g);if(rn(f))return y(h,c,f,g);if(x&&Cr(h,f),typeof f==\"undefined\"&&!w)switch(h.tag){case 1:case 0:throw h=h.type,Error(M(152,h.displayName||h.name||\"Component\"))}return i(h,c)}}var Zi=gf(!0),Jl=gf(!1),rr={},dt={current:rr},Un={current:rr},Wn={current:rr};function ni(e){if(e===rr)throw Error(M(174));return e}function ba(e,t){switch(re(Wn,t),re(Un,e),re(dt,rr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:la(null,\"\");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=la(t,e)}K(dt),re(dt,t)}function Gi(){K(dt),K(Un),K(Wn)}function Jc(e){ni(Wn.current);var t=ni(dt.current),i=la(t,e.type);t!==i&&(re(Un,e),re(dt,i))}function Kl(e){Un.current===e&&(K(dt),K(Un))}var ne={current:0};function ms(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data===Ol||i.data===Vl))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.effectTag&64)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ql(e,t){return{responder:e,props:t}}var Hr=et.ReactCurrentDispatcher,$e=et.ReactCurrentBatchConfig,Bt=0,le=null,ve=null,we=null,vs=!1;function Pe(){throw Error(M(321))}function eu(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!vi(e[i],t[i]))return!1;return!0}function tu(e,t,i,n,r,s){if(Bt=s,le=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Hr.current=e===null||e.memoizedState===null?cx:dx,e=i(n,r),t.expirationTime===Bt){s=0;do{if(t.expirationTime=0,!(25>s))throw Error(M(301));s+=1,we=ve=null,t.updateQueue=null,Hr.current=hx,e=i(n,r)}while(t.expirationTime===Bt)}if(Hr.current=xs,t=ve!==null&&ve.next!==null,Bt=0,we=ve=le=null,vs=!1,t)throw Error(M(300));return e}function _i(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return we===null?le.memoizedState=we=e:we=we.next=e,we}function Ji(){if(ve===null){var e=le.alternate;e=e!==null?e.memoizedState:null}else e=ve.next;var t=we===null?le.memoizedState:we.next;if(t!==null)we=t,ve=e;else{if(e===null)throw Error(M(310));ve=e,e={memoizedState:ve.memoizedState,baseState:ve.baseState,baseQueue:ve.baseQueue,queue:ve.queue,next:null},we===null?le.memoizedState=we=e:we=we.next=e}return we}function ci(e,t){return typeof t==\"function\"?t(e):t}function Mr(e){var t=Ji(),i=t.queue;if(i===null)throw Error(M(311));i.lastRenderedReducer=e;var n=ve,r=n.baseQueue,s=i.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}n.baseQueue=r=s,i.pending=null}if(r!==null){r=r.next,n=n.baseState;var a=o=s=null,l=r;do{var u=l.expirationTime;if(u<Bt){var d={expirationTime:l.expirationTime,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};a===null?(o=a=d,s=n):a=a.next=d,u>le.expirationTime&&(le.expirationTime=u,Xs(u))}else a!==null&&(a=a.next={expirationTime:1073741823,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),Wf(u,l.suspenseConfig),n=l.eagerReducer===e?l.eagerState:e(n,l.action);l=l.next}while(l!==null&&l!==r);a===null?s=n:a.next=o,vi(n,t.memoizedState)||(ut=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=a,i.lastRenderedState=n}return[t.memoizedState,i.dispatch]}function Ir(e){var t=Ji(),i=t.queue;if(i===null)throw Error(M(311));i.lastRenderedReducer=e;var n=i.dispatch,r=i.pending,s=t.memoizedState;if(r!==null){i.pending=null;var o=r=r.next;do s=e(s,o.action),o=o.next;while(o!==r);vi(s,t.memoizedState)||(ut=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),i.lastRenderedState=s}return[s,n]}function Io(e){var t=_i();return typeof e==\"function\"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ci,lastRenderedState:e},e=e.dispatch=Sf.bind(null,le,e),[t.memoizedState,e]}function Ea(e,t,i,n){return e={tag:e,create:t,destroy:i,deps:n,next:null},t=le.updateQueue,t===null?(t={lastEffect:null},le.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e)),e}function mf(){return Ji().memoizedState}function Aa(e,t,i,n){var r=_i();le.effectTag|=e,r.memoizedState=Ea(1|t,i,void 0,n===void 0?null:n)}function iu(e,t,i,n){var r=Ji();n=n===void 0?null:n;var s=void 0;if(ve!==null){var o=ve.memoizedState;if(s=o.destroy,n!==null&&eu(n,o.deps)){Ea(t,i,s,n);return}}le.effectTag|=e,r.memoizedState=Ea(1|t,i,s,n)}function Kc(e,t){return Aa(516,4,e,t)}function ws(e,t){return iu(516,4,e,t)}function vf(e,t){return iu(4,2,e,t)}function wf(e,t){if(typeof t==\"function\")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function yf(e,t,i){return i=i!=null?i.concat([e]):null,iu(4,2,wf.bind(null,t,e),i)}function nu(){}function qc(e,t){return _i().memoizedState=[e,t===void 0?null:t],e}function ys(e,t){var i=Ji();t=t===void 0?null:t;var n=i.memoizedState;return n!==null&&t!==null&&eu(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function xf(e,t){var i=Ji();t=t===void 0?null:t;var n=i.memoizedState;return n!==null&&t!==null&&eu(t,n[1])?n[0]:(e=e(),i.memoizedState=[e,t],e)}function ru(e,t,i){var n=Fs();Xt(98>n?98:n,function(){e(!0)}),Xt(97<n?97:n,function(){var r=$e.suspense;$e.suspense=t===void 0?null:t;try{e(!1),i()}finally{$e.suspense=r}})}function Sf(e,t,i){var n=ht(),r=Tn.suspense;n=pi(n,e,r),r={expirationTime:n,suspenseConfig:r,action:i,eagerReducer:null,eagerState:null,next:null};var s=t.pending;if(s===null?r.next=r:(r.next=s.next,s.next=r),t.pending=r,s=e.alternate,e===le||s!==null&&s===le)vs=!0,r.expirationTime=Bt,le.expirationTime=Bt;else{if(e.expirationTime===0&&(s===null||s.expirationTime===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,i);if(r.eagerReducer=s,r.eagerState=a,vi(a,o))return}catch{}finally{}Zt(e,n)}}var xs={readContext:He,useCallback:Pe,useContext:Pe,useEffect:Pe,useImperativeHandle:Pe,useLayoutEffect:Pe,useMemo:Pe,useReducer:Pe,useRef:Pe,useState:Pe,useDebugValue:Pe,useResponder:Pe,useDeferredValue:Pe,useTransition:Pe},cx={readContext:He,useCallback:qc,useContext:He,useEffect:Kc,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Aa(4,2,wf.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Aa(4,2,e,t)},useMemo:function(e,t){var i=_i();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var n=_i();return t=i!==void 0?i(t):t,n.memoizedState=n.baseState=t,e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=Sf.bind(null,le,e),[n.memoizedState,e]},useRef:function(e){var t=_i();return e={current:e},t.memoizedState=e},useState:Io,useDebugValue:nu,useResponder:ql,useDeferredValue:function(e,t){var i=Io(e),n=i[0],r=i[1];return Kc(function(){var s=$e.suspense;$e.suspense=t===void 0?null:t;try{r(e)}finally{$e.suspense=s}},[e,t]),n},useTransition:function(e){var t=Io(!1),i=t[0];return t=t[1],[qc(ru.bind(null,t,e),[t,e]),i]}},dx={readContext:He,useCallback:ys,useContext:He,useEffect:ws,useImperativeHandle:yf,useLayoutEffect:vf,useMemo:xf,useReducer:Mr,useRef:mf,useState:function(){return Mr(ci)},useDebugValue:nu,useResponder:ql,useDeferredValue:function(e,t){var i=Mr(ci),n=i[0],r=i[1];return ws(function(){var s=$e.suspense;$e.suspense=t===void 0?null:t;try{r(e)}finally{$e.suspense=s}},[e,t]),n},useTransition:function(e){var t=Mr(ci),i=t[0];return t=t[1],[ys(ru.bind(null,t,e),[t,e]),i]}},hx={readContext:He,useCallback:ys,useContext:He,useEffect:ws,useImperativeHandle:yf,useLayoutEffect:vf,useMemo:xf,useReducer:Ir,useRef:mf,useState:function(){return Ir(ci)},useDebugValue:nu,useResponder:ql,useDeferredValue:function(e,t){var i=Ir(ci),n=i[0],r=i[1];return ws(function(){var s=$e.suspense;$e.suspense=t===void 0?null:t;try{r(e)}finally{$e.suspense=s}},[e,t]),n},useTransition:function(e){var t=Ir(ci),i=t[0];return t=t[1],[ys(ru.bind(null,t,e),[t,e]),i]}},Ct=null,Rt=null,di=!1;function Cf(e,t){var i=ct(5,null,null,0);i.elementType=\"DELETED\",i.type=\"DELETED\",i.stateNode=t,i.return=e,i.effectTag=8,e.lastEffect!==null?(e.lastEffect.nextEffect=i,e.lastEffect=i):e.firstEffect=e.lastEffect=i}function ed(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===\"\"||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function Ta(e){if(di){var t=Rt;if(t){var i=t;if(!ed(e,t)){if(t=Bi(i.nextSibling),!t||!ed(e,t)){e.effectTag=e.effectTag&-1025|2,di=!1,Ct=e;return}Cf(Ct,i)}Ct=e,Rt=Bi(t.firstChild)}else e.effectTag=e.effectTag&-1025|2,di=!1,Ct=e}}function td(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ct=e}function br(e){if(e!==Ct)return!1;if(!di)return td(e),di=!0,!1;var t=e.type;if(e.tag!==5||t!==\"head\"&&t!==\"body\"&&!va(t,e.memoizedProps))for(t=Rt;t;)Cf(e,t),t=Bi(t.nextSibling);if(td(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(M(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i===Up){if(t===0){Rt=Bi(e.nextSibling);break e}t--}else i!==Vp&&i!==Vl&&i!==Ol||t++}e=e.nextSibling}Rt=null}}else Rt=Ct?Bi(e.stateNode.nextSibling):null;return!0}function bo(){Rt=Ct=null,di=!1}var px=et.ReactCurrentOwner,ut=!1;function ze(e,t,i,n){t.child=e===null?Jl(t,null,i,n):Zi(t,e.child,i,n)}function id(e,t,i,n,r){i=i.render;var s=t.ref;return Ri(t,r),n=tu(e,t,i,n,s,r),e!==null&&!ut?(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=r&&(e.expirationTime=0),Mt(e,t,r)):(t.effectTag|=1,ze(e,t,n,r),t.child)}function nd(e,t,i,n,r,s){if(e===null){var o=i.type;return typeof o==\"function\"&&!uu(o)&&o.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=o,Mf(e,t,o,n,r,s)):(e=Zr(i.type,null,n,null,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}return o=e.child,r<s&&(r=o.memoizedProps,i=i.compare,i=i!==null?i:On,i(r,n)&&e.ref===t.ref)?Mt(e,t,s):(t.effectTag|=1,e=yi(o,n),e.ref=t.ref,e.return=t,t.child=e)}function Mf(e,t,i,n,r,s){return e!==null&&On(e.memoizedProps,n)&&e.ref===t.ref&&(ut=!1,r<s)?(t.expirationTime=e.expirationTime,Mt(e,t,s)):ka(e,t,i,n,s)}function If(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.effectTag|=128)}function ka(e,t,i,n,r){var s=Te(i)?wi:ye.current;return s=Qi(t,s),Ri(t,r),i=tu(e,t,i,n,s,r),e!==null&&!ut?(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=r&&(e.expirationTime=0),Mt(e,t,r)):(t.effectTag|=1,ze(e,t,i,r),t.child)}function rd(e,t,i,n,r){if(Te(i)){var s=!0;Ur(t)}else s=!1;if(Ri(t,r),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.effectTag|=2),ff(t,i,n),Ia(t,i,n,r),n=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=i.contextType;typeof u==\"object\"&&u!==null?u=He(u):(u=Te(i)?wi:ye.current,u=Qi(t,u));var d=i.getDerivedStateFromProps,p=typeof d==\"function\"||typeof o.getSnapshotBeforeUpdate==\"function\";p||typeof o.UNSAFE_componentWillReceiveProps!=\"function\"&&typeof o.componentWillReceiveProps!=\"function\"||(a!==n||l!==u)&&Xc(t,o,n,u),Dt=!1;var m=t.memoizedState;o.state=m,Vn(t,n,o,r),l=t.memoizedState,a!==n||m!==l||Ae.current||Dt?(typeof d==\"function\"&&(gs(t,i,d,n),l=t.memoizedState),(a=Dt||Yc(t,i,a,n,m,l,u))?(p||typeof o.UNSAFE_componentWillMount!=\"function\"&&typeof o.componentWillMount!=\"function\"||(typeof o.componentWillMount==\"function\"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount==\"function\"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount==\"function\"&&(t.effectTag|=4)):(typeof o.componentDidMount==\"function\"&&(t.effectTag|=4),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=u,n=a):(typeof o.componentDidMount==\"function\"&&(t.effectTag|=4),n=!1)}else o=t.stateNode,Xl(e,t),a=t.memoizedProps,o.props=t.type===t.elementType?a:Ke(t.type,a),l=o.context,u=i.contextType,typeof u==\"object\"&&u!==null?u=He(u):(u=Te(i)?wi:ye.current,u=Qi(t,u)),d=i.getDerivedStateFromProps,(p=typeof d==\"function\"||typeof o.getSnapshotBeforeUpdate==\"function\")||typeof o.UNSAFE_componentWillReceiveProps!=\"function\"&&typeof o.componentWillReceiveProps!=\"function\"||(a!==n||l!==u)&&Xc(t,o,n,u),Dt=!1,l=t.memoizedState,o.state=l,Vn(t,n,o,r),m=t.memoizedState,a!==n||l!==m||Ae.current||Dt?(typeof d==\"function\"&&(gs(t,i,d,n),m=t.memoizedState),(d=Dt||Yc(t,i,a,n,l,m,u))?(p||typeof o.UNSAFE_componentWillUpdate!=\"function\"&&typeof o.componentWillUpdate!=\"function\"||(typeof o.componentWillUpdate==\"function\"&&o.componentWillUpdate(n,m,u),typeof o.UNSAFE_componentWillUpdate==\"function\"&&o.UNSAFE_componentWillUpdate(n,m,u)),typeof o.componentDidUpdate==\"function\"&&(t.effectTag|=4),typeof o.getSnapshotBeforeUpdate==\"function\"&&(t.effectTag|=256)):(typeof o.componentDidUpdate!=\"function\"||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),typeof o.getSnapshotBeforeUpdate!=\"function\"||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=n,t.memoizedState=m),o.props=n,o.state=m,o.context=u,n=d):(typeof o.componentDidUpdate!=\"function\"||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),typeof o.getSnapshotBeforeUpdate!=\"function\"||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),n=!1);return Na(e,t,i,n,s,r)}function Na(e,t,i,n,r,s){If(e,t);var o=(t.effectTag&64)!==0;if(!n&&!o)return r&&$c(t,i,!1),Mt(e,t,s);n=t.stateNode,px.current=t;var a=o&&typeof i.getDerivedStateFromError!=\"function\"?null:n.render();return t.effectTag|=1,e!==null&&o?(t.child=Zi(t,e.child,null,s),t.child=Zi(t,null,a,s)):ze(e,t,a,s),t.memoizedState=n.state,r&&$c(t,i,!0),t.child}function sd(e){var t=e.stateNode;t.pendingContext?Wc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Wc(e,t.context,!1),ba(e,t.containerInfo)}var Eo={dehydrated:null,retryTime:0};function od(e,t,i){var n=t.mode,r=t.pendingProps,s=ne.current,o=!1,a;if((a=(t.effectTag&64)!==0)||(a=(s&2)!==0&&(e===null||e.memoizedState!==null)),a?(o=!0,t.effectTag&=-65):e!==null&&e.memoizedState===null||r.fallback===void 0||r.unstable_avoidThisFallback===!0||(s|=1),re(ne,s&1),e===null){if(r.fallback!==void 0&&Ta(t),o){if(o=r.fallback,r=_t(null,n,0,null),r.return=t,(t.mode&2)===0)for(e=t.memoizedState!==null?t.child.child:t.child,r.child=e;e!==null;)e.return=r,e=e.sibling;return i=_t(o,n,i,null),i.return=t,r.sibling=i,t.memoizedState=Eo,t.child=r,i}return n=r.children,t.memoizedState=null,t.child=Jl(t,null,n,i)}if(e.memoizedState!==null){if(e=e.child,n=e.sibling,o){if(r=r.fallback,i=yi(e,e.pendingProps),i.return=t,(t.mode&2)===0&&(o=t.memoizedState!==null?t.child.child:t.child,o!==e.child))for(i.child=o;o!==null;)o.return=i,o=o.sibling;return n=yi(n,r),n.return=t,i.sibling=n,i.childExpirationTime=0,t.memoizedState=Eo,t.child=i,n}return i=Zi(t,e.child,r.children,i),t.memoizedState=null,t.child=i}if(e=e.child,o){if(o=r.fallback,r=_t(null,n,0,null),r.return=t,r.child=e,e!==null&&(e.return=r),(t.mode&2)===0)for(e=t.memoizedState!==null?t.child.child:t.child,r.child=e;e!==null;)e.return=r,e=e.sibling;return i=_t(o,n,i,null),i.return=t,r.sibling=i,i.effectTag|=2,r.childExpirationTime=0,t.memoizedState=Eo,t.child=r,i}return t.memoizedState=null,t.child=Zi(t,e,r.children,i)}function ad(e,t){e.expirationTime<t&&(e.expirationTime=t);var i=e.alternate;i!==null&&i.expirationTime<t&&(i.expirationTime=t),hf(e.return,t)}function Ao(e,t,i,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailExpiration:0,tailMode:r,lastEffect:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=i,o.tailExpiration=0,o.tailMode=r,o.lastEffect=s)}function ld(e,t,i){var n=t.pendingProps,r=n.revealOrder,s=n.tail;if(ze(e,t,n.children,i),n=ne.current,(n&2)!==0)n=n&1|2,t.effectTag|=64;else{if(e!==null&&(e.effectTag&64)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ad(e,i);else if(e.tag===19)ad(e,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(re(ne,n),(t.mode&2)===0)t.memoizedState=null;else switch(r){case\"forwards\":for(i=t.child,r=null;i!==null;)e=i.alternate,e!==null&&ms(e)===null&&(r=i),i=i.sibling;i=r,i===null?(r=t.child,t.child=null):(r=i.sibling,i.sibling=null),Ao(t,!1,r,i,s,t.lastEffect);break;case\"backwards\":for(i=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&ms(e)===null){t.child=r;break}e=r.sibling,r.sibling=i,i=r,r=e}Ao(t,!0,i,null,s,t.lastEffect);break;case\"together\":Ao(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Mt(e,t,i){e!==null&&(t.dependencies=e.dependencies);var n=t.expirationTime;if(n!==0&&Xs(n),t.childExpirationTime<i)return null;if(e!==null&&t.child!==e.child)throw Error(M(153));if(t.child!==null){for(e=t.child,i=yi(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=yi(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}var bf,Pa,Ef,Af;bf=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Pa=function(){};Ef=function(e,t,i,n,r){var s=e.memoizedProps;if(s!==n){var o=t.stateNode;switch(ni(dt.current),e=null,i){case\"input\":s=na(o,s),n=na(o,n),e=[];break;case\"option\":s=oa(o,s),n=oa(o,n),e=[];break;case\"select\":s=Ce({},s,{value:void 0}),n=Ce({},n,{value:void 0}),e=[];break;case\"textarea\":s=aa(o,s),n=aa(o,n),e=[];break;default:typeof s.onClick!=\"function\"&&typeof n.onClick==\"function\"&&(o.onclick=ls)}pa(i,n);var a,l;i=null;for(a in s)if(!n.hasOwnProperty(a)&&s.hasOwnProperty(a)&&s[a]!=null)if(a===\"style\")for(l in o=s[a],o)o.hasOwnProperty(l)&&(i||(i={}),i[l]=\"\");else a!==\"dangerouslySetInnerHTML\"&&a!==\"children\"&&a!==\"suppressContentEditableWarning\"&&a!==\"suppressHydrationWarning\"&&a!==\"autoFocus\"&&($i.hasOwnProperty(a)?e||(e=[]):(e=e||[]).push(a,null));for(a in n){var u=n[a];if(o=s!=null?s[a]:void 0,n.hasOwnProperty(a)&&u!==o&&(u!=null||o!=null))if(a===\"style\")if(o){for(l in o)!o.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(i||(i={}),i[l]=\"\");for(l in u)u.hasOwnProperty(l)&&o[l]!==u[l]&&(i||(i={}),i[l]=u[l])}else i||(e||(e=[]),e.push(a,i)),i=u;else a===\"dangerouslySetInnerHTML\"?(u=u?u.__html:void 0,o=o?o.__html:void 0,u!=null&&o!==u&&(e=e||[]).push(a,u)):a===\"children\"?o===u||typeof u!=\"string\"&&typeof u!=\"number\"||(e=e||[]).push(a,\"\"+u):a!==\"suppressContentEditableWarning\"&&a!==\"suppressHydrationWarning\"&&($i.hasOwnProperty(a)?(u!=null&&mt(r,a),e||o===u||(e=[])):(e=e||[]).push(a,u))}i&&(e=e||[]).push(\"style\",i),r=e,(t.updateQueue=r)&&(t.effectTag|=4)}};Af=function(e,t,i,n){i!==n&&(t.effectTag|=4)};function Er(e,t){switch(e.tailMode){case\"hidden\":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case\"collapsed\":i=e.tail;for(var n=null;i!==null;)i.alternate!==null&&(n=i),i=i.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function fx(e,t,i){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Te(t.type)&&ds(),null;case 3:return Gi(),K(Ae),K(ye),i=t.stateNode,i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),e!==null&&e.child!==null||!br(t)||(t.effectTag|=4),Pa(t),null;case 5:Kl(t),i=ni(Wn.current);var r=t.type;if(e!==null&&t.stateNode!=null)Ef(e,t,r,n,i),e.ref!==t.ref&&(t.effectTag|=128);else{if(!n){if(t.stateNode===null)throw Error(M(166));return null}if(e=ni(dt.current),br(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[Lt]=t,n[us]=s,r){case\"iframe\":case\"object\":case\"embed\":ee(\"load\",n);break;case\"video\":case\"audio\":for(e=0;e<gn.length;e++)ee(gn[e],n);break;case\"source\":ee(\"error\",n);break;case\"img\":case\"image\":case\"link\":ee(\"error\",n),ee(\"load\",n);break;case\"form\":ee(\"reset\",n),ee(\"submit\",n);break;case\"details\":ee(\"toggle\",n);break;case\"input\":yc(n,s),ee(\"invalid\",n),mt(i,\"onChange\");break;case\"select\":n._wrapperState={wasMultiple:!!s.multiple},ee(\"invalid\",n),mt(i,\"onChange\");break;case\"textarea\":Sc(n,s),ee(\"invalid\",n),mt(i,\"onChange\")}pa(r,s),e=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o===\"children\"?typeof a==\"string\"?n.textContent!==a&&(e=[\"children\",a]):typeof a==\"number\"&&n.textContent!==\"\"+a&&(e=[\"children\",\"\"+a]):$i.hasOwnProperty(o)&&a!=null&&mt(i,o)}switch(r){case\"input\":wr(n),xc(n,s,!0);break;case\"textarea\":wr(n),Cc(n);break;case\"select\":case\"option\":break;default:typeof s.onClick==\"function\"&&(n.onclick=ls)}i=e,t.updateQueue=i,i!==null&&(t.effectTag|=4)}else{switch(o=i.nodeType===9?i:i.ownerDocument,e===Tc&&(e=yp(r)),e===Tc?r===\"script\"?(e=o.createElement(\"div\"),e.innerHTML=\"<script><\\/script>\",e=e.removeChild(e.firstChild)):typeof n.is==\"string\"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r===\"select\"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Lt]=t,e[us]=n,bf(e,t,!1,!1),t.stateNode=e,o=fa(r,n),r){case\"iframe\":case\"object\":case\"embed\":ee(\"load\",e),a=n;break;case\"video\":case\"audio\":for(a=0;a<gn.length;a++)ee(gn[a],e);a=n;break;case\"source\":ee(\"error\",e),a=n;break;case\"img\":case\"image\":case\"link\":ee(\"error\",e),ee(\"load\",e),a=n;break;case\"form\":ee(\"reset\",e),ee(\"submit\",e),a=n;break;case\"details\":ee(\"toggle\",e),a=n;break;case\"input\":yc(e,n),a=na(e,n),ee(\"invalid\",e),mt(i,\"onChange\");break;case\"option\":a=oa(e,n);break;case\"select\":e._wrapperState={wasMultiple:!!n.multiple},a=Ce({},n,{value:void 0}),ee(\"invalid\",e),mt(i,\"onChange\");break;case\"textarea\":Sc(e,n),a=aa(e,n),ee(\"invalid\",e),mt(i,\"onChange\");break;default:a=n}pa(r,a);var l=a;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s===\"style\"?_p(e,u):s===\"dangerouslySetInnerHTML\"?(u=u?u.__html:void 0,u!=null&&xp(e,u)):s===\"children\"?typeof u==\"string\"?(r!==\"textarea\"||u!==\"\")&&jn(e,u):typeof u==\"number\"&&jn(e,\"\"+u):s!==\"suppressContentEditableWarning\"&&s!==\"suppressHydrationWarning\"&&s!==\"autoFocus\"&&($i.hasOwnProperty(s)?u!=null&&mt(i,s):u!=null&&Tl(e,s,u,o))}switch(r){case\"input\":wr(e),xc(e,n,!1);break;case\"textarea\":wr(e),Cc(e);break;case\"option\":n.value!=null&&e.setAttribute(\"value\",\"\"+Gt(n.value));break;case\"select\":e.multiple=!!n.multiple,i=n.value,i!=null?ji(e,!!n.multiple,i,!1):n.defaultValue!=null&&ji(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick==\"function\"&&(e.onclick=ls)}Wp(r,n)&&(t.effectTag|=4)}t.ref!==null&&(t.effectTag|=128)}return null;case 6:if(e&&t.stateNode!=null)Af(e,t,e.memoizedProps,n);else{if(typeof n!=\"string\"&&t.stateNode===null)throw Error(M(166));i=ni(Wn.current),ni(dt.current),br(t)?(i=t.stateNode,n=t.memoizedProps,i[Lt]=t,i.nodeValue!==n&&(t.effectTag|=4)):(i=(i.nodeType===9?i:i.ownerDocument).createTextNode(n),i[Lt]=t,t.stateNode=i)}return null;case 13:return K(ne),n=t.memoizedState,(t.effectTag&64)!==0?(t.expirationTime=i,t):(i=n!==null,n=!1,e===null?t.memoizedProps.fallback!==void 0&&br(t):(r=e.memoizedState,n=r!==null,i||r===null||(r=e.child.sibling,r!==null&&(s=t.firstEffect,s!==null?(t.firstEffect=r,r.nextEffect=s):(t.firstEffect=t.lastEffect=r,r.nextEffect=null),r.effectTag=8))),i&&!n&&(t.mode&2)!==0&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||(ne.current&1)!==0?ce===hi&&(ce=Ms):((ce===hi||ce===Ms)&&(ce=Zs),Hn!==0&&Re!==null&&(oi(Re,ke),Zf(Re,Hn)))),(i||n)&&(t.effectTag|=4),null);case 4:return Gi(),Pa(t),null;case 10:return Gl(t),null;case 17:return Te(t.type)&&ds(),null;case 19:if(K(ne),n=t.memoizedState,n===null)return null;if(r=(t.effectTag&64)!==0,s=n.rendering,s===null){if(r)Er(n,!1);else if(ce!==hi||e!==null&&(e.effectTag&64)!==0)for(s=t.child;s!==null;){if(e=ms(s),e!==null){for(t.effectTag|=64,Er(n,!1),r=e.updateQueue,r!==null&&(t.updateQueue=r,t.effectTag|=4),n.lastEffect===null&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=t.child;n!==null;)r=n,s=i,r.effectTag&=2,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null,e=r.alternate,e===null?(r.childExpirationTime=0,r.expirationTime=s,r.child=null,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null):(r.childExpirationTime=e.childExpirationTime,r.expirationTime=e.expirationTime,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,s=e.dependencies,r.dependencies=s===null?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),n=n.sibling;return re(ne,ne.current&1|2),t.child}s=s.sibling}}else{if(!r)if(e=ms(s),e!==null){if(t.effectTag|=64,r=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.effectTag|=4),Er(n,!0),n.tail===null&&n.tailMode===\"hidden\"&&!s.alternate)return t=t.lastEffect=n.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*We()-n.renderingStartTime>n.tailExpiration&&1<i&&(t.effectTag|=64,r=!0,Er(n,!1),t.expirationTime=t.childExpirationTime=i-1);n.isBackwards?(s.sibling=t.child,t.child=s):(i=n.last,i!==null?i.sibling=s:t.child=s,n.last=s)}return n.tail!==null?(n.tailExpiration===0&&(n.tailExpiration=We()+500),i=n.tail,n.rendering=i,n.tail=i.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=We(),i.sibling=null,t=ne.current,re(ne,r?t&1|2:t&1),i):null}throw Error(M(156,t.tag))}function gx(e){switch(e.tag){case 1:Te(e.type)&&ds();var t=e.effectTag;return t&4096?(e.effectTag=t&-4097|64,e):null;case 3:if(Gi(),K(Ae),K(ye),t=e.effectTag,(t&64)!==0)throw Error(M(285));return e.effectTag=t&-4097|64,e;case 5:return Kl(e),null;case 13:return K(ne),t=e.effectTag,t&4096?(e.effectTag=t&-4097|64,e):null;case 19:return K(ne),null;case 4:return Gi(),null;case 10:return Gl(e),null;default:return null}}function su(e,t){return{value:e,source:t,stack:Pl(t)}}var mx=typeof WeakSet==\"function\"?WeakSet:Set;function za(e,t){var i=t.source,n=t.stack;n===null&&i!==null&&(n=Pl(i)),i!==null&&It(i.type),t=t.value,e!==null&&e.tag===1&&It(e.type);try{console.error(t)}catch(r){setTimeout(function(){throw r})}}function vx(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(i){fi(e,i)}}function ud(e){var t=e.ref;if(t!==null)if(typeof t==\"function\")try{t(null)}catch(i){fi(e,i)}else t.current=null}function wx(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.effectTag&256&&e!==null){var i=e.memoizedProps,n=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?i:Ke(t.type,i),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(M(163))}function Tf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var n=i.destroy;i.destroy=void 0,n!==void 0&&n()}i=i.next}while(i!==t)}}function kf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var n=i.create;i.destroy=n()}i=i.next}while(i!==t)}}function yx(e,t,i){switch(i.tag){case 0:case 11:case 15:case 22:kf(3,i);return;case 1:if(e=i.stateNode,i.effectTag&4)if(t===null)e.componentDidMount();else{var n=i.elementType===i.type?t.memoizedProps:Ke(i.type,t.memoizedProps);e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}t=i.updateQueue,t!==null&&Gc(i,t,e);return;case 3:if(t=i.updateQueue,t!==null){if(e=null,i.child!==null)switch(i.child.tag){case 5:e=i.child.stateNode;break;case 1:e=i.child.stateNode}Gc(i,t,e)}return;case 5:e=i.stateNode,t===null&&i.effectTag&4&&Wp(i.type,i.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:i.memoizedState===null&&(i=i.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&Lp(i))));return;case 19:case 17:case 20:case 21:return}throw Error(M(163))}function cd(e,t,i){switch(typeof Va==\"function\"&&Va(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var n=e.next;Xt(97<i?97:i,function(){var r=n;do{var s=r.destroy;if(s!==void 0){var o=t;try{s()}catch(a){fi(o,a)}}r=r.next}while(r!==n)})}break;case 1:ud(t),i=t.stateNode,typeof i.componentWillUnmount==\"function\"&&vx(t,i);break;case 5:ud(t);break;case 4:Pf(e,t,i)}}function Nf(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,t!==null&&Nf(t)}function dd(e){return e.tag===5||e.tag===3||e.tag===4}function hd(e){e:{for(var t=e.return;t!==null;){if(dd(t)){var i=t;break e}t=t.return}throw Error(M(160))}switch(t=i.stateNode,i.tag){case 5:var n=!1;break;case 3:t=t.containerInfo,n=!0;break;case 4:t=t.containerInfo,n=!0;break;default:throw Error(M(161))}i.effectTag&16&&(jn(t,\"\"),i.effectTag&=-17);e:t:for(i=e;;){for(;i.sibling===null;){if(i.return===null||dd(i.return)){i=null;break e}i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.effectTag&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.effectTag&2)){i=i.stateNode;break e}}n?Da(e,i,t):La(e,i,t)}function Da(e,t,i){var n=e.tag,r=n===5||n===6;if(r)e=r?e.stateNode:e.stateNode.instance,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=ls));else if(n!==4&&(e=e.child,e!==null))for(Da(e,t,i),e=e.sibling;e!==null;)Da(e,t,i),e=e.sibling}function La(e,t,i){var n=e.tag,r=n===5||n===6;if(r)e=r?e.stateNode:e.stateNode.instance,t?i.insertBefore(e,t):i.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(La(e,t,i),e=e.sibling;e!==null;)La(e,t,i),e=e.sibling}function Pf(e,t,i){for(var n=t,r=!1,s,o;;){if(!r){r=n.return;e:for(;;){if(r===null)throw Error(M(160));switch(s=r.stateNode,r.tag){case 5:o=!1;break e;case 3:s=s.containerInfo,o=!0;break e;case 4:s=s.containerInfo,o=!0;break e}r=r.return}r=!0}if(n.tag===5||n.tag===6){e:for(var a=e,l=n,u=i,d=l;;)if(cd(a,d,u),d.child!==null&&d.tag!==4)d.child.return=d,d=d.child;else{if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}o?(a=s,l=n.stateNode,a.nodeType===8?a.parentNode.removeChild(l):a.removeChild(l)):s.removeChild(n.stateNode)}else if(n.tag===4){if(n.child!==null){s=n.stateNode.containerInfo,o=!0,n.child.return=n,n=n.child;continue}}else if(cd(e,n,i),n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return,n.tag===4&&(r=!1)}n.sibling.return=n.return,n=n.sibling}}function To(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:Tf(3,t);return;case 1:return;case 5:var i=t.stateNode;if(i!=null){var n=t.memoizedProps,r=e!==null?e.memoizedProps:n;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,s!==null){for(i[us]=n,e===\"input\"&&n.type===\"radio\"&&n.name!=null&&mp(i,n),fa(e,r),t=fa(e,n),r=0;r<s.length;r+=2){var o=s[r],a=s[r+1];o===\"style\"?_p(i,a):o===\"dangerouslySetInnerHTML\"?xp(i,a):o===\"children\"?jn(i,a):Tl(i,o,a,t)}switch(e){case\"input\":ra(i,n);break;case\"textarea\":vp(i,n);break;case\"select\":t=i._wrapperState.wasMultiple,i._wrapperState.wasMultiple=!!n.multiple,e=n.value,e!=null?ji(i,!!n.multiple,e,!1):t!==!!n.multiple&&(n.defaultValue!=null?ji(i,!!n.multiple,n.defaultValue,!0):ji(i,!!n.multiple,n.multiple?[]:\"\",!1))}}}return;case 6:if(t.stateNode===null)throw Error(M(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:t=t.stateNode,t.hydrate&&(t.hydrate=!1,Lp(t.containerInfo));return;case 12:return;case 13:if(i=t,t.memoizedState===null?n=!1:(n=!0,i=t.child,lu=We()),i!==null)e:for(e=i;;){if(e.tag===5)s=e.stateNode,n?(s=s.style,typeof s.setProperty==\"function\"?s.setProperty(\"display\",\"none\",\"important\"):s.display=\"none\"):(s=e.stateNode,r=e.memoizedProps.style,r=r!=null&&r.hasOwnProperty(\"display\")?r.display:null,s.style.display=Rp(\"display\",r));else if(e.tag===6)e.stateNode.nodeValue=n?\"\":e.memoizedProps;else if(e.tag===13&&e.memoizedState!==null&&e.memoizedState.dehydrated===null){s=e.child.sibling,s.return=e,e=s;continue}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}pd(t);return;case 19:pd(t);return;case 17:return}throw Error(M(163))}function pd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new mx),t.forEach(function(n){var r=kx.bind(null,e,n);i.has(n)||(i.add(n),n.then(r,r))})}}var xx=typeof WeakMap==\"function\"?WeakMap:Map;function zf(e,t,i){i=Ht(i,null),i.tag=3,i.payload={element:null};var n=t.value;return i.callback=function(){Es||(Es=!0,ja=n),za(e,t)},i}function Df(e,t,i){i=Ht(i,null),i.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n==\"function\"){var r=t.value;i.payload=function(){return za(e,t),n(r)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch==\"function\"&&(i.callback=function(){typeof n!=\"function\"&&(Qt===null?Qt=new Set([this]):Qt.add(this),za(e,t));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:\"\"})}),i}var Sx=Math.ceil,Ss=et.ReactCurrentDispatcher,Lf=et.ReactCurrentOwner,de=0,ou=8,tt=16,pt=32,hi=0,Cs=1,jf=2,Ms=3,Zs=4,au=5,_=de,Re=null,U=null,ke=0,ce=hi,Gs=null,St=1073741823,$n=1073741823,Is=null,Hn=0,bs=!1,lu=0,Bf=500,k=null,Es=!1,ja=null,Qt=null,As=!1,kn=null,vn=90,ri=null,Nn=0,Ba=null,Fr=0;function ht(){return(_&(tt|pt))!==de?1073741821-(We()/10|0):Fr!==0?Fr:Fr=1073741821-(We()/10|0)}function pi(e,t,i){if(t=t.mode,(t&2)===0)return 1073741823;var n=Fs();if((t&4)===0)return n===99?1073741823:1073741822;if((_&tt)!==de)return ke;if(i!==null)e=$r(e,i.timeoutMs|0||5e3,250);else switch(n){case 99:e=1073741823;break;case 98:e=$r(e,150,100);break;case 97:case 96:e=$r(e,5e3,250);break;case 95:e=2;break;default:throw Error(M(326))}return Re!==null&&e===ke&&--e,e}function Zt(e,t){if(50<Nn)throw Nn=0,Ba=null,Error(M(185));if(e=Ys(e,t),e!==null){var i=Fs();t===1073741823?(_&ou)!==de&&(_&(tt|pt))===de?Ra(e):(_e(e),_===de&&ft()):_e(e),(_&4)===de||i!==98&&i!==99||(ri===null?ri=new Map([[e,t]]):(i=ri.get(e),(i===void 0||i>t)&&ri.set(e,t)))}}function Ys(e,t){e.expirationTime<t&&(e.expirationTime=t);var i=e.alternate;i!==null&&i.expirationTime<t&&(i.expirationTime=t);var n=e.return,r=null;if(n===null&&e.tag===3)r=e.stateNode;else for(;n!==null;){if(i=n.alternate,n.childExpirationTime<t&&(n.childExpirationTime=t),i!==null&&i.childExpirationTime<t&&(i.childExpirationTime=t),n.return===null&&n.tag===3){r=n.stateNode;break}n=n.return}return r!==null&&(Re===r&&(Xs(t),ce===Zs&&oi(r,ke)),Zf(r,t)),r}function Qr(e){var t=e.lastExpiredTime;if(t!==0||(t=e.firstPendingTime,!Qf(e,t)))return t;var i=e.lastPingedTime;return e=e.nextKnownPendingLevel,e=i>e?i:e,2>=e&&t!==e?0:e}function _e(e){if(e.lastExpiredTime!==0)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Qc(Ra.bind(null,e));else{var t=Qr(e),i=e.callbackNode;if(t===0)i!==null&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var n=ht();if(t===1073741823?n=99:t===1||t===2?n=95:(n=10*(1073741821-t)-10*(1073741821-n),n=0>=n?99:250>=n?98:5250>=n?97:95),i!==null){var r=e.callbackPriority;if(e.callbackExpirationTime===t&&r>=n)return;i!==lf&&nf(i)}e.callbackExpirationTime=t,e.callbackPriority=n,t=t===1073741823?Qc(Ra.bind(null,e)):cf(n,Rf.bind(null,e),{timeout:10*(1073741821-t)-We()}),e.callbackNode=t}}}function Rf(e,t){if(Fr=0,t)return t=ht(),Ua(e,t),_e(e),null;var i=Qr(e);if(i!==0){if(t=e.callbackNode,(_&(tt|pt))!==de)throw Error(M(327));if(Ki(),e===Re&&i===ke||si(e,i),U!==null){var n=_;_|=tt;var r=Uf();do try{Ix();break}catch(a){Vf(e,a)}while(1);if(Zl(),_=n,Ss.current=r,ce===Cs)throw t=Gs,si(e,i),oi(e,i),_e(e),t;if(U===null)switch(r=e.finishedWork=e.current.alternate,e.finishedExpirationTime=i,n=ce,Re=null,n){case hi:case Cs:throw Error(M(345));case jf:Ua(e,2<i?2:i);break;case Ms:if(oi(e,i),n=e.lastSuspendedTime,i===n&&(e.nextKnownPendingLevel=_a(r)),St===1073741823&&(r=lu+Bf-We(),10<r)){if(bs){var s=e.lastPingedTime;if(s===0||s>=i){e.lastPingedTime=i,si(e,i);break}}if(s=Qr(e),s!==0&&s!==i)break;if(n!==0&&n!==i){e.lastPingedTime=n;break}e.timeoutHandle=Co(ei.bind(null,e),r);break}ei(e);break;case Zs:if(oi(e,i),n=e.lastSuspendedTime,i===n&&(e.nextKnownPendingLevel=_a(r)),bs&&(r=e.lastPingedTime,r===0||r>=i)){e.lastPingedTime=i,si(e,i);break}if(r=Qr(e),r!==0&&r!==i)break;if(n!==0&&n!==i){e.lastPingedTime=n;break}if($n!==1073741823?n=10*(1073741821-$n)-We():St===1073741823?n=0:(n=10*(1073741821-St)-5e3,r=We(),i=10*(1073741821-i)-r,n=r-n,0>n&&(n=0),n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Sx(n/1960))-n,i<n&&(n=i)),10<n){e.timeoutHandle=Co(ei.bind(null,e),n);break}ei(e);break;case au:if(St!==1073741823&&Is!==null){s=St;var o=Is;if(n=o.busyMinDurationMs|0,0>=n?n=0:(r=o.busyDelayMs|0,s=We()-(10*(1073741821-s)-(o.timeoutMs|0||5e3)),n=s<=r?0:r+n-s),10<n){oi(e,i),e.timeoutHandle=Co(ei.bind(null,e),n);break}}ei(e);break;default:throw Error(M(329))}if(_e(e),e.callbackNode===t)return Rf.bind(null,e)}}return null}function Ra(e){var t=e.lastExpiredTime;if(t=t!==0?t:1073741823,(_&(tt|pt))!==de)throw Error(M(327));if(Ki(),e===Re&&t===ke||si(e,t),U!==null){var i=_;_|=tt;var n=Uf();do try{Mx();break}catch(r){Vf(e,r)}while(1);if(Zl(),_=i,Ss.current=n,ce===Cs)throw i=Gs,si(e,t),oi(e,t),_e(e),i;if(U!==null)throw Error(M(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Re=null,ei(e),_e(e)}return null}function Cx(){if(ri!==null){var e=ri;ri=null,e.forEach(function(t,i){Ua(i,t),_e(i)}),ft()}}function _f(e,t){var i=_;_|=1;try{return e(t)}finally{_=i,_===de&&ft()}}function Of(e,t){var i=_;_&=-2,_|=ou;try{return e(t)}finally{_=i,_===de&&ft()}}function si(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,S0(i)),U!==null)for(i=U.return;i!==null;){var n=i;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&ds();break;case 3:Gi(),K(Ae),K(ye);break;case 5:Kl(n);break;case 4:Gi();break;case 13:K(ne);break;case 19:K(ne);break;case 10:Gl(n)}i=i.return}Re=e,U=yi(e.current,null),ke=t,ce=hi,Gs=null,$n=St=1073741823,Is=null,Hn=0,bs=!1}function Vf(e,t){do{try{if(Zl(),Hr.current=xs,vs)for(var i=le.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}if(Bt=0,we=ve=le=null,vs=!1,U===null||U.return===null)return ce=Cs,Gs=t,U=null;e:{var r=e,s=U.return,o=U,a=t;if(t=ke,o.effectTag|=2048,o.firstEffect=o.lastEffect=null,a!==null&&typeof a==\"object\"&&typeof a.then==\"function\"){var l=a;if((o.mode&2)===0){var u=o.alternate;u?(o.updateQueue=u.updateQueue,o.memoizedState=u.memoizedState,o.expirationTime=u.expirationTime):(o.updateQueue=null,o.memoizedState=null)}var d=(ne.current&1)!==0,p=s;do{var m;if(m=p.tag===13){var v=p.memoizedState;if(v!==null)m=v.dehydrated!==null;else{var S=p.memoizedProps;m=S.fallback===void 0?!1:S.unstable_avoidThisFallback!==!0?!0:!d}}if(m){var y=p.updateQueue;if(y===null){var h=new Set;h.add(l),p.updateQueue=h}else y.add(l);if((p.mode&2)===0){if(p.effectTag|=64,o.effectTag&=-2981,o.tag===1)if(o.alternate===null)o.tag=17;else{var c=Ht(1073741823,null);c.tag=2,Ft(o,c)}o.expirationTime=1073741823;break e}a=void 0,o=t;var f=r.pingCache;if(f===null?(f=r.pingCache=new xx,a=new Set,f.set(l,a)):(a=f.get(l),a===void 0&&(a=new Set,f.set(l,a))),!a.has(o)){a.add(o);var g=Tx.bind(null,r,l,o);l.then(g,g)}p.effectTag|=4096,p.expirationTime=t;break e}p=p.return}while(p!==null);a=Error((It(o.type)||\"A React component\")+` suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`+Pl(o))}ce!==au&&(ce=jf),a=su(a,o),p=s;do{switch(p.tag){case 3:l=a,p.effectTag|=4096,p.expirationTime=t;var w=zf(p,l,t);Zc(p,w);break e;case 1:l=a;var x=p.type,C=p.stateNode;if((p.effectTag&64)===0&&(typeof x.getDerivedStateFromError==\"function\"||C!==null&&typeof C.componentDidCatch==\"function\"&&(Qt===null||!Qt.has(C)))){p.effectTag|=4096,p.expirationTime=t;var z=Df(p,l,t);Zc(p,z);break e}}p=p.return}while(p!==null)}U=Hf(U)}catch(D){t=D;continue}break}while(1)}function Uf(){var e=Ss.current;return Ss.current=xs,e===null?xs:e}function Wf(e,t){e<St&&2<e&&(St=e),t!==null&&e<$n&&2<e&&($n=e,Is=t)}function Xs(e){e>Hn&&(Hn=e)}function Mx(){for(;U!==null;)U=$f(U)}function Ix(){for(;U!==null&&!lx();)U=$f(U)}function $f(e){var t=Ff(e.alternate,e,ke);return e.memoizedProps=e.pendingProps,t===null&&(t=Hf(e)),Lf.current=null,t}function Hf(e){U=e;do{var t=U.alternate;if(e=U.return,(U.effectTag&2048)===0){if(t=fx(t,U,ke),ke===1||U.childExpirationTime!==1){for(var i=0,n=U.child;n!==null;){var r=n.expirationTime,s=n.childExpirationTime;r>i&&(i=r),s>i&&(i=s),n=n.sibling}U.childExpirationTime=i}if(t!==null)return t;e!==null&&(e.effectTag&2048)===0&&(e.firstEffect===null&&(e.firstEffect=U.firstEffect),U.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=U.firstEffect),e.lastEffect=U.lastEffect),1<U.effectTag&&(e.lastEffect!==null?e.lastEffect.nextEffect=U:e.firstEffect=U,e.lastEffect=U))}else{if(t=gx(U),t!==null)return t.effectTag&=2047,t;e!==null&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(t=U.sibling,t!==null)return t;U=e}while(U!==null);return ce===hi&&(ce=au),null}function _a(e){var t=e.expirationTime;return e=e.childExpirationTime,t>e?t:e}function ei(e){var t=Fs();return Xt(99,bx.bind(null,e,t)),null}function bx(e,t){do Ki();while(kn!==null);if((_&(tt|pt))!==de)throw Error(M(327));var i=e.finishedWork,n=e.finishedExpirationTime;if(i===null)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,i===e.current)throw Error(M(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var r=_a(i);if(e.firstPendingTime=r,n<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:n<=e.firstSuspendedTime&&(e.firstSuspendedTime=n-1),n<=e.lastPingedTime&&(e.lastPingedTime=0),n<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Re&&(U=Re=null,ke=0),1<i.effectTag?i.lastEffect!==null?(i.lastEffect.nextEffect=i,r=i.firstEffect):r=i:r=i.firstEffect,r!==null){var s=_;_|=pt,Lf.current=null,xo=Rr;var o=Pc();if(ma(o)){if(\"selectionStart\"in o)var a={start:o.selectionStart,end:o.selectionEnd};else e:{a=(a=o.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var u=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var p=0,m=-1,v=-1,S=0,y=0,h=o,c=null;t:for(;;){for(var f;h!==a||u!==0&&h.nodeType!==3||(m=p+u),h!==d||l!==0&&h.nodeType!==3||(v=p+l),h.nodeType===3&&(p+=h.nodeValue.length),(f=h.firstChild)!==null;)c=h,h=f;for(;;){if(h===o)break t;if(c===a&&++S===u&&(m=p),c===d&&++y===l&&(v=p),(f=h.nextSibling)!==null)break;h=c,c=h.parentNode}h=f}a=m===-1||v===-1?null:{start:m,end:v}}else a=null}a=a||{start:0,end:0}}else a=null;So={activeElementDetached:null,focusedElem:o,selectionRange:a},Rr=!1,k=r;do try{Ex()}catch(T){if(k===null)throw Error(M(330));fi(k,T),k=k.nextEffect}while(k!==null);k=r;do try{for(o=e,a=t;k!==null;){var g=k.effectTag;if(g&16&&jn(k.stateNode,\"\"),g&128){var w=k.alternate;if(w!==null){var x=w.ref;x!==null&&(typeof x==\"function\"?x(null):x.current=null)}}switch(g&1038){case 2:hd(k),k.effectTag&=-3;break;case 6:hd(k),k.effectTag&=-3,To(k.alternate,k);break;case 1024:k.effectTag&=-1025;break;case 1028:k.effectTag&=-1025,To(k.alternate,k);break;case 4:To(k.alternate,k);break;case 8:u=k,Pf(o,u,a),Nf(u)}k=k.nextEffect}}catch(T){if(k===null)throw Error(M(330));fi(k,T),k=k.nextEffect}while(k!==null);if(x=So,w=Pc(),g=x.focusedElem,a=x.selectionRange,w!==g&&g&&g.ownerDocument&&Op(g.ownerDocument.documentElement,g)){for(a!==null&&ma(g)&&(w=a.start,x=a.end,x===void 0&&(x=w),\"selectionStart\"in g?(g.selectionStart=w,g.selectionEnd=Math.min(x,g.value.length)):(x=(w=g.ownerDocument||document)&&w.defaultView||window,x.getSelection&&(x=x.getSelection(),u=g.textContent.length,o=Math.min(a.start,u),a=a.end===void 0?o:Math.min(a.end,u),!x.extend&&o>a&&(u=a,a=o,o=u),u=Nc(g,o),d=Nc(g,a),u&&d&&(x.rangeCount!==1||x.anchorNode!==u.node||x.anchorOffset!==u.offset||x.focusNode!==d.node||x.focusOffset!==d.offset)&&(w=w.createRange(),w.setStart(u.node,u.offset),x.removeAllRanges(),o>a?(x.addRange(w),x.extend(d.node,d.offset)):(w.setEnd(d.node,d.offset),x.addRange(w)))))),w=[],x=g;x=x.parentNode;)x.nodeType===1&&w.push({element:x,left:x.scrollLeft,top:x.scrollTop});for(typeof g.focus==\"function\"&&g.focus(),g=0;g<w.length;g++)x=w[g],x.element.scrollLeft=x.left,x.element.scrollTop=x.top}Rr=!!xo,So=xo=null,e.current=i,k=r;do try{for(g=e;k!==null;){var C=k.effectTag;if(C&36&&yx(g,k.alternate,k),C&128){w=void 0;var z=k.ref;if(z!==null){var D=k.stateNode;switch(k.tag){case 5:w=D;break;default:w=D}typeof z==\"function\"?z(w):z.current=w}}k=k.nextEffect}}catch(T){if(k===null)throw Error(M(330));fi(k,T),k=k.nextEffect}while(k!==null);k=null,ux(),_=s}else e.current=i;if(As)As=!1,kn=e,vn=t;else for(k=r;k!==null;)t=k.nextEffect,k.nextEffect=null,k=t;if(t=e.firstPendingTime,t===0&&(Qt=null),t===1073741823?e===Ba?Nn++:(Nn=0,Ba=e):Nn=0,typeof Oa==\"function\"&&Oa(i.stateNode,n),_e(e),Es)throw Es=!1,e=ja,ja=null,e;return(_&ou)!==de||ft(),null}function Ex(){for(;k!==null;){var e=k.effectTag;(e&256)!==0&&wx(k.alternate,k),(e&512)===0||As||(As=!0,cf(97,function(){return Ki(),null})),k=k.nextEffect}}function Ki(){if(vn!==90){var e=97<vn?97:vn;return vn=90,Xt(e,Ax)}}function Ax(){if(kn===null)return!1;var e=kn;if(kn=null,(_&(tt|pt))!==de)throw Error(M(331));var t=_;for(_|=pt,e=e.current.firstEffect;e!==null;){try{var i=e;if((i.effectTag&512)!==0)switch(i.tag){case 0:case 11:case 15:case 22:Tf(5,i),kf(5,i)}}catch(n){if(e===null)throw Error(M(330));fi(e,n)}i=e.nextEffect,e.nextEffect=null,e=i}return _=t,ft(),!0}function fd(e,t,i){t=su(i,t),t=zf(e,t,1073741823),Ft(e,t),e=Ys(e,1073741823),e!==null&&_e(e)}function fi(e,t){if(e.tag===3)fd(e,e,t);else for(var i=e.return;i!==null;){if(i.tag===3){fd(i,e,t);break}else if(i.tag===1){var n=i.stateNode;if(typeof i.type.getDerivedStateFromError==\"function\"||typeof n.componentDidCatch==\"function\"&&(Qt===null||!Qt.has(n))){e=su(t,e),e=Df(i,e,1073741823),Ft(i,e),i=Ys(i,1073741823),i!==null&&_e(i);break}}i=i.return}}function Tx(e,t,i){var n=e.pingCache;n!==null&&n.delete(t),Re===e&&ke===i?ce===Zs||ce===Ms&&St===1073741823&&We()-lu<Bf?si(e,ke):bs=!0:Qf(e,i)&&(t=e.lastPingedTime,t!==0&&t<i||(e.lastPingedTime=i,_e(e)))}function kx(e,t){var i=e.stateNode;i!==null&&i.delete(t),t=0,t===0&&(t=ht(),t=pi(t,e,null)),e=Ys(e,t),e!==null&&_e(e)}var Ff;Ff=function(e,t,i){var n=t.expirationTime;if(e!==null){var r=t.pendingProps;if(e.memoizedProps!==r||Ae.current)ut=!0;else{if(n<i){switch(ut=!1,t.tag){case 3:sd(t),bo();break;case 5:if(Jc(t),t.mode&4&&i!==1&&r.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:Te(t.type)&&Ur(t);break;case 4:ba(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value,r=t.type._context,re(hs,r._currentValue),r._currentValue=n;break;case 13:if(t.memoizedState!==null)return n=t.child.childExpirationTime,n!==0&&n>=i?od(e,t,i):(re(ne,ne.current&1),t=Mt(e,t,i),t!==null?t.sibling:null);re(ne,ne.current&1);break;case 19:if(n=t.childExpirationTime>=i,(e.effectTag&64)!==0){if(n)return ld(e,t,i);t.effectTag|=64}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null),re(ne,ne.current),!n)return null}return Mt(e,t,i)}ut=!1}}else ut=!1;switch(t.expirationTime=0,t.tag){case 2:if(n=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,r=Qi(t,ye.current),Ri(t,i),r=tu(null,t,n,e,r,i),t.effectTag|=1,typeof r==\"object\"&&r!==null&&typeof r.render==\"function\"&&r.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Te(n)){var s=!0;Ur(t)}else s=!1;t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Yl(t);var o=n.getDerivedStateFromProps;typeof o==\"function\"&&gs(t,n,o,e),r.updater=Qs,t.stateNode=r,r._reactInternalFiber=t,Ia(t,n,e,i),t=Na(null,t,n,!0,s,i)}else t.tag=0,ze(null,t,r,i),t=t.child;return t;case 16:e:{if(r=t.elementType,e!==null&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,r0(r),r._status!==1)throw r._result;switch(r=r._result,t.type=r,s=t.tag=zx(r),e=Ke(r,e),s){case 0:t=ka(null,t,r,e,i);break e;case 1:t=rd(null,t,r,e,i);break e;case 11:t=id(null,t,r,e,i);break e;case 14:t=nd(null,t,r,Ke(r.type,e),n,i);break e}throw Error(M(306,r,\"\"))}return t;case 0:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:Ke(n,r),ka(e,t,n,r,i);case 1:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:Ke(n,r),rd(e,t,n,r,i);case 3:if(sd(t),n=t.updateQueue,e===null||n===null)throw Error(M(282));if(n=t.pendingProps,r=t.memoizedState,r=r!==null?r.element:null,Xl(e,t),Vn(t,n,null,i),n=t.memoizedState.element,n===r)bo(),t=Mt(e,t,i);else{if((r=t.stateNode.hydrate)&&(Rt=Bi(t.stateNode.containerInfo.firstChild),Ct=t,r=di=!0),r)for(i=Jl(t,null,n,i),t.child=i;i;)i.effectTag=i.effectTag&-3|1024,i=i.sibling;else ze(e,t,n,i),bo();t=t.child}return t;case 5:return Jc(t),e===null&&Ta(t),n=t.type,r=t.pendingProps,s=e!==null?e.memoizedProps:null,o=r.children,va(n,r)?o=null:s!==null&&va(n,s)&&(t.effectTag|=16),If(e,t),t.mode&4&&i!==1&&r.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(ze(e,t,o,i),t=t.child),t;case 6:return e===null&&Ta(t),null;case 13:return od(e,t,i);case 4:return ba(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Zi(t,null,n,i):ze(e,t,n,i),t.child;case 11:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:Ke(n,r),id(e,t,n,r,i);case 7:return ze(e,t,t.pendingProps,i),t.child;case 8:return ze(e,t,t.pendingProps.children,i),t.child;case 12:return ze(e,t,t.pendingProps.children,i),t.child;case 10:e:{n=t.type._context,r=t.pendingProps,o=t.memoizedProps,s=r.value;var a=t.type._context;if(re(hs,a._currentValue),a._currentValue=s,o!==null)if(a=o.value,s=vi(a,s)?0:(typeof n._calculateChangedBits==\"function\"?n._calculateChangedBits(a,s):1073741823)|0,s===0){if(o.children===r.children&&!Ae.current){t=Mt(e,t,i);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var u=l.firstContext;u!==null;){if(u.context===n&&(u.observedBits&s)!==0){a.tag===1&&(u=Ht(i,null),u.tag=2,Ft(a,u)),a.expirationTime<i&&(a.expirationTime=i),u=a.alternate,u!==null&&u.expirationTime<i&&(u.expirationTime=i),hf(a.return,i),l.expirationTime<i&&(l.expirationTime=i);break}u=u.next}}else o=a.tag===10&&a.type===t.type?null:a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}ze(e,t,r.children,i),t=t.child}return t;case 9:return r=t.type,s=t.pendingProps,n=s.children,Ri(t,i),r=He(r,s.unstable_observedBits),n=n(r),t.effectTag|=1,ze(e,t,n,i),t.child;case 14:return r=t.type,s=Ke(r,t.pendingProps),s=Ke(r.type,s),nd(e,t,r,s,n,i);case 15:return Mf(e,t,t.type,t.pendingProps,n,i);case 17:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:Ke(n,r),e!==null&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,Te(n)?(e=!0,Ur(t)):e=!1,Ri(t,i),ff(t,n,r),Ia(t,n,r,i),Na(null,t,n,!0,e,i);case 19:return ld(e,t,i)}throw Error(M(156,t.tag))};var Oa=null,Va=null;function Nx(e){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__==\"undefined\")return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var i=t.inject(e);Oa=function(n){try{t.onCommitFiberRoot(i,n,void 0,(n.current.effectTag&64)===64)}catch{}},Va=function(n){try{t.onCommitFiberUnmount(i,n)}catch{}}}catch{}return!0}function Px(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function ct(e,t,i,n){return new Px(e,t,i,n)}function uu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zx(e){if(typeof e==\"function\")return uu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===kl)return 11;if(e===Nl)return 14}return 2}function yi(e,t){var i=e.alternate;return i===null?(i=ct(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.effectTag=0,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null),i.childExpirationTime=e.childExpirationTime,i.expirationTime=e.expirationTime,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Zr(e,t,i,n,r,s){var o=2;if(n=e,typeof e==\"function\")uu(e)&&(o=1);else if(typeof e==\"string\")o=5;else e:switch(e){case ti:return _t(i.children,r,s,t);case n0:o=8,r|=7;break;case up:o=8,r|=1;break;case Lr:return e=ct(12,i,t,r|8),e.elementType=Lr,e.type=Lr,e.expirationTime=s,e;case jr:return e=ct(13,i,t,r),e.type=jr,e.elementType=jr,e.expirationTime=s,e;case ia:return e=ct(19,i,t,r),e.elementType=ia,e.expirationTime=s,e;default:if(typeof e==\"object\"&&e!==null)switch(e.$$typeof){case cp:o=10;break e;case dp:o=9;break e;case kl:o=11;break e;case Nl:o=14;break e;case hp:o=16,n=null;break e;case pp:o=22;break e}throw Error(M(130,e==null?e:typeof e,\"\"))}return t=ct(o,i,t,r),t.elementType=e,t.type=n,t.expirationTime=s,t}function _t(e,t,i,n){return e=ct(7,e,n,t),e.expirationTime=i,e}function ko(e,t,i){return e=ct(6,e,null,t),e.expirationTime=i,e}function No(e,t,i){return t=ct(4,e.children!==null?e.children:[],e.key,t),t.expirationTime=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Dx(e,t,i){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=i,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Qf(e,t){var i=e.firstSuspendedTime;return e=e.lastSuspendedTime,i!==0&&i>=t&&e<=t}function oi(e,t){var i=e.firstSuspendedTime,n=e.lastSuspendedTime;i<t&&(e.firstSuspendedTime=t),(n>t||i===0)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Zf(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var i=e.firstSuspendedTime;i!==0&&(t>=i?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Ua(e,t){var i=e.lastExpiredTime;(i===0||i>t)&&(e.lastExpiredTime=t)}function Ts(e,t,i,n){var r=t.current,s=ht(),o=Tn.suspense;s=pi(s,r,o);e:if(i){i=i._reactInternalFiber;t:{if(Mi(i)!==i||i.tag!==1)throw Error(M(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(Te(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(a!==null);throw Error(M(171))}if(i.tag===1){var l=i.type;if(Te(l)){i=tf(i,l,a);break e}}i=a}else i=Yt;return t.context===null?t.context=i:t.pendingContext=i,t=Ht(s,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),Ft(r,t),Zt(r,s),s}function Po(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function gd(e,t){e=e.memoizedState,e!==null&&e.dehydrated!==null&&e.retryTime<t&&(e.retryTime=t)}function cu(e,t){gd(e,t),(e=e.alternate)&&gd(e,t)}function du(e,t,i){i=i!=null&&i.hydrate===!0;var n=new Dx(e,t,i),r=ct(3,null,null,t===2?7:t===1?3:0);n.current=r,r.stateNode=n,Yl(r),e[qn]=n.current,i&&t!==0&&c0(e,e.nodeType===9?e:e.ownerDocument),this._internalRoot=n}du.prototype.render=function(e){Ts(e,this._internalRoot,null,null)};du.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Ts(null,e,null,function(){t[qn]=null})};function sr(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==\" react-mount-point-unstable \"))}function Lx(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute(\"data-reactroot\"))),!t)for(var i;i=e.lastChild;)e.removeChild(i);return new du(e,0,t?{hydrate:!0}:void 0)}function Js(e,t,i,n,r){var s=i._reactRootContainer;if(s){var o=s._internalRoot;if(typeof r==\"function\"){var a=r;r=function(){var u=Po(o);a.call(u)}}Ts(t,o,e,r)}else{if(s=i._reactRootContainer=Lx(i,n),o=s._internalRoot,typeof r==\"function\"){var l=r;r=function(){var u=Po(o);l.call(u)}}Of(function(){Ts(t,o,e,r)})}return Po(o)}function jx(e,t,i){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bi,key:n==null?null:\"\"+n,children:e,containerInfo:t,implementation:i}}zp=function(e){if(e.tag===13){var t=$r(ht(),150,100);Zt(e,t),cu(e,t)}};jl=function(e){e.tag===13&&(Zt(e,3),cu(e,3))};Dp=function(e){if(e.tag===13){var t=ht();t=pi(t,e,null),Zt(e,t),cu(e,t)}};ta=function(e,t,i){switch(t){case\"input\":if(ra(e,i),t=i.name,i.type===\"radio\"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+t)+'][type=\"radio\"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var r=Wl(n);if(!r)throw Error(M(90));gp(n),ra(n,r)}}}break;case\"textarea\":vp(e,i);break;case\"select\":t=i.value,t!=null&&ji(e,!!i.multiple,t,!1)}};Ml=_f;op=function(e,t,i,n,r){var s=_;_|=4;try{return Xt(98,e.bind(null,t,i,n,r))}finally{_=s,_===de&&ft()}};Il=function(){(_&(1|tt|pt))===de&&(Cx(),Ki())};ap=function(e,t){var i=_;_|=2;try{return e(t)}finally{_=i,_===de&&ft()}};function Gf(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sr(t))throw Error(M(200));return jx(e,t,null,i)}var Bx={Events:[tr,mi,Wl,np,ea,Fi,function(e){Dl(e,M0)},rp,sp,Ws,Us,Ki,{current:!1}]};(function(e){var t=e.findFiberByHostInstance;return Nx(Ce({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:et.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Ap(i),i===null?null:i.stateNode},findFiberByHostInstance:function(i){return t?t(i):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:er,bundleType:0,version:\"16.14.0\",rendererPackageName:\"react-dom\"});Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bx;Fe.createPortal=Gf;Fe.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternalFiber;if(t===void 0)throw typeof e.render==\"function\"?Error(M(188)):Error(M(268,Object.keys(e)));return e=Ap(t),e=e===null?null:e.stateNode,e};Fe.flushSync=function(e,t){if((_&(tt|pt))!==de)throw Error(M(187));var i=_;_|=1;try{return Xt(99,e.bind(null,t))}finally{_=i,ft()}};Fe.hydrate=function(e,t,i){if(!sr(t))throw Error(M(200));return Js(null,e,t,!0,i)};Fe.render=function(e,t,i){if(!sr(t))throw Error(M(200));return Js(null,e,t,!1,i)};Fe.unmountComponentAtNode=function(e){if(!sr(e))throw Error(M(40));return e._reactRootContainer?(Of(function(){Js(null,null,e,!1,function(){e._reactRootContainer=null,e[qn]=null})}),!0):!1};Fe.unstable_batchedUpdates=_f;Fe.unstable_createPortal=function(e,t){return Gf(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Fe.unstable_renderSubtreeIntoContainer=function(e,t,i,n){if(!sr(i))throw Error(M(200));if(e==null||e._reactInternalFiber===void 0)throw Error(M(38));return Js(e,t,i,!1,n)};Fe.version=\"16.14.0\";function Yf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__==\"undefined\"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=\"function\"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Yf)}catch(e){console.error(e)}}Yf(),Jh.exports=Fe;var md=Jh.exports,Rx=Object.defineProperty,_x=Object.defineProperties,Ox=Object.getOwnPropertyDescriptors,vd=Object.getOwnPropertySymbols,Vx=Object.prototype.hasOwnProperty,Ux=Object.prototype.propertyIsEnumerable,wd=(e,t,i)=>t in e?Rx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Le=(e,t)=>{for(var i in t||(t={}))Vx.call(t,i)&&wd(e,i,t[i]);if(vd)for(var i of vd(t))Ux.call(t,i)&&wd(e,i,t[i]);return e};const Xf={src:\"\",currentTime:0,hostTime:0,muted:!1,paused:!0,volume:1},Jf={currentTimeMaxError:1,syncInterval:1e3,retryInterval:15e3,verbose:!1,log:console.log.bind(console)};let zt=Jf;function Wx(e){zt=Le(Le({},Jf),e)}function Ar(e,t){if(e.paused)return e.currentTime;const i=function(n){if(n.player)return n.player.beginTimestamp+n.player.progressTime;if(n.room)return n.room.calibrationTimestamp}(t);return i?e.currentTime+(i-e.hostTime)/1e3:e.currentTime}const $x=navigator.userAgent.includes(\"Safari\"),Hx=[\".aac\",\".mid\",\".midi\",\".mp3\",\".ogg\",\".oga\",\".wav\",\".weba\"];var Fx=typeof __webpack_require__.g==\"object\"&&__webpack_require__.g&&__webpack_require__.g.Object===Object&&__webpack_require__.g,Qx=typeof self==\"object\"&&self&&self.Object===Object&&self,Kf=Fx||Qx||Function(\"return this\")(),ks=Kf.Symbol,qf=Object.prototype,Zx=qf.hasOwnProperty,Gx=qf.toString,dn=ks?ks.toStringTag:void 0,Yx=Object.prototype.toString,yd=ks?ks.toStringTag:void 0;function Xx(e){return e==null?e===void 0?\"[object Undefined]\":\"[object Null]\":yd&&yd in Object(e)?function(t){var i=Zx.call(t,dn),n=t[dn];try{t[dn]=void 0;var r=!0}catch{}var s=Gx.call(t);return r&&(i?t[dn]=n:delete t[dn]),s}(e):function(t){return Yx.call(t)}(e)}var Jx=/\\s/,Kx=/^\\s+/;function qx(e){return e&&e.slice(0,function(t){for(var i=t.length;i--&&Jx.test(t.charAt(i)););return i}(e)+1).replace(Kx,\"\")}function Wa(e){var t=typeof e;return e!=null&&(t==\"object\"||t==\"function\")}var eS=/^[-+]0x[0-9a-f]+$/i,tS=/^0b[01]+$/i,iS=/^0o[0-7]+$/i,nS=parseInt;function xd(e){if(typeof e==\"number\")return e;if(function(n){return typeof n==\"symbol\"||function(r){return r!=null&&typeof r==\"object\"}(n)&&Xx(n)==\"[object Symbol]\"}(e))return NaN;if(Wa(e)){var t=typeof e.valueOf==\"function\"?e.valueOf():e;e=Wa(t)?t+\"\":t}if(typeof e!=\"string\")return e===0?e:+e;e=qx(e);var i=tS.test(e);return i||iS.test(e)?nS(e.slice(2),i?2:8):eS.test(e)?NaN:+e}var zo=function(){return Kf.Date.now()},rS=Math.max,sS=Math.min;function Tr(e,t,i){var n,r,s,o,a,l,u=0,d=!1,p=!1,m=!0;if(typeof e!=\"function\")throw new TypeError(\"Expected a function\");function v(g){var w=n,x=r;return n=r=void 0,u=g,o=e.apply(x,w)}function S(g){return u=g,a=setTimeout(h,t),d?v(g):o}function y(g){var w=g-l;return l===void 0||w>=t||w<0||p&&g-u>=s}function h(){var g=zo();if(y(g))return c(g);a=setTimeout(h,function(w){var x=t-(w-l);return p?sS(x,s-(w-u)):x}(g))}function c(g){return a=void 0,m&&n?v(g):(n=r=void 0,o)}function f(){var g=zo(),w=y(g);if(n=arguments,r=this,l=g,w){if(a===void 0)return S(l);if(p)return clearTimeout(a),a=setTimeout(h,t),v(l)}return a===void 0&&(a=setTimeout(h,t)),o}return t=xd(t)||0,Wa(i)&&(d=!!i.leading,s=(p=\"maxWait\"in i)?rS(xd(i.maxWait)||0,t):s,m=\"trailing\"in i?!!i.trailing:m),f.cancel=function(){a!==void 0&&clearTimeout(a),u=0,n=l=r=a=void 0},f.flush=function(){return a===void 0?o:c(zo())},f}class Sd extends xi.exports.Component{constructor(t){super(t),this.seeking=!1,this.mobileSeeking=!1,this.track=null,this.hoverTime=null,this.offset=0,this.secondsPrefix=\"00:00:\",this.minutesPrefix=\"00:\",this.seekPause=!1,this.handleTouchSeeking=i=>{let n=0;for(let r=0;r<i.changedTouches.length;r++)n=i.changedTouches[r].pageX;n=n<0?0:n,this.mobileSeeking&&this.changeCurrentTimePosition(n)},this.handleSeeking=i=>{this.seeking&&this.changeCurrentTimePosition(i.pageX)},this.setTrackWidthState=()=>{this.track&&this.setState({trackWidth:this.track.offsetWidth})},this.handleTrackHover=(i,n)=>{if(this.track){const r=this.props.scale||1;let s;s=i?0:(n.pageX-this.track.getBoundingClientRect().left)/r,this.setState({seekHoverPosition:s,trackWidth:this.track.offsetWidth})}},this.mouseSeekingHandler=i=>{this.setSeeking(!1,i),this.onMouseUp()},this.setSeeking=(i,n)=>{n.preventDefault(),this.handleSeeking(n),this.seeking=i,this.setState({seekHoverPosition:i?this.state.seekHoverPosition:0})},this.mobileTouchSeekingHandler=()=>{this.setMobileSeeking(!1)},this.setMobileSeeking=i=>{this.mobileSeeking=i,this.setState({seekHoverPosition:i?this.state.seekHoverPosition:0})},this.renderBufferProgress=()=>{if(this.props.buffered){const i=Le(Le({},this.getPositionStyle(this.props.buffered)),this.props.bufferColor&&{backgroundColor:this.props.bufferColor});return H.createElement(\"div\",{className:\"buffered\",style:i})}return null},this.renderProgress=()=>{const i=Le(Le({},this.getPositionStyle(this.props.current)),this.props.sliderColor&&{backgroundColor:this.props.sliderColor});return H.createElement(\"div\",{className:\"connect\",style:i})},this.renderHoverProgress=()=>{const i=Le(Le({},this.getSeekHoverPosition()),this.props.sliderHoverColor&&{backgroundColor:this.props.sliderHoverColor});return H.createElement(\"div\",{className:\"seek-hover\",style:i})},this.renderThumb=()=>H.createElement(\"div\",{className:this.isThumbActive()?\"thumb active\":\"thumb\",style:this.getThumbHandlerPosition()},H.createElement(\"div\",{style:{backgroundColor:this.props.thumbColor},className:\"handler\"})),this.onMouseDown=i=>{var n,r;this.props.pause&&!this.props.paused&&(this.props.pause(),this.seekPause=!0),this.setSeeking(!0,i),(r=(n=this.props).onSeekStart)==null||r.call(n)},this.onMouseUp=()=>{var i,n;this.props.play&&this.seekPause&&(this.props.play(),this.seekPause=!1),(n=(i=this.props).onSeekEnd)==null||n.call(i)},this.props.secondsPrefix&&(this.secondsPrefix=this.props.secondsPrefix),this.props.minutesPrefix&&(this.minutesPrefix=this.props.minutesPrefix),this.state={ready:!1,trackWidth:0,seekHoverPosition:0}}componentDidMount(){this.setTrackWidthState(),window.addEventListener(\"resize\",this.setTrackWidthState),window.addEventListener(\"mousemove\",this.handleSeeking),window.addEventListener(\"mouseup\",this.mouseSeekingHandler),window.addEventListener(\"touchmove\",this.handleTouchSeeking),window.addEventListener(\"touchend\",this.mobileTouchSeekingHandler)}componentWillUnmount(){window.removeEventListener(\"resize\",this.setTrackWidthState),window.removeEventListener(\"mousemove\",this.handleSeeking),window.removeEventListener(\"mouseup\",this.mouseSeekingHandler),window.removeEventListener(\"touchmove\",this.handleTouchSeeking),window.removeEventListener(\"touchend\",this.mobileTouchSeekingHandler)}changeCurrentTimePosition(t){if(this.track){const i=this.props.scale||1;let n=(t-this.track.getBoundingClientRect().left)/i;n=Math.min(this.state.trackWidth,Math.max(0,n)),this.setState({seekHoverPosition:n});const r=+(n/this.state.trackWidth*this.props.total).toFixed(0);this.props.onChange(r)}}getPositionStyle(t){return{transform:`scaleX(${100*t/this.props.total/100})`}}getThumbHandlerPosition(){return{transform:`translateX(${this.state.trackWidth/(this.props.total/this.props.current)}px)`}}getSeekHoverPosition(){return{transform:`scaleX(${100*this.state.seekHoverPosition/this.state.trackWidth/100})`}}getHoverTimePosition(){let t=0;return this.hoverTime&&(t=this.state.seekHoverPosition-this.hoverTime.offsetWidth/2,this.props.limitTimeTooltipBySides&&(t<0?t=0:t+this.hoverTime.offsetWidth>this.state.trackWidth&&(t=this.state.trackWidth-this.hoverTime.offsetWidth))),{transform:`translateX(${t}px)`}}secondsToTime(t){t=Math.round(t+this.offset);const i=Math.floor(t/3600),n=t%3600,r=Math.floor(n/60),s=Math.ceil(n%60);return{hh:i.toString(),mm:r<10?\"0\"+r:r.toString(),ss:s<10?\"0\"+s:s.toString()}}getHoverTime(){const t=100*this.state.seekHoverPosition/this.state.trackWidth,i=Math.floor(+t*(this.props.total/100)),n=this.secondsToTime(i);return this.props.total+this.offset<60?this.secondsPrefix+n.ss:this.props.total+this.offset<3600?this.minutesPrefix+n.mm+\":\"+n.ss:n.hh+\":\"+n.mm+\":\"+n.ss}isThumbActive(){return this.state.seekHoverPosition>0||this.seeking}drawHoverTime(){return this.props.hideHoverTime?null:H.createElement(\"div\",{className:this.isThumbActive()?\"hover-time active\":\"hover-time\",style:this.getHoverTimePosition(),ref:t=>this.hoverTime=t},this.getHoverTime())}render(){return H.createElement(\"div\",{className:\"seek-slider\"},H.createElement(\"div\",{className:\"track\",ref:t=>this.track=t,onMouseMove:t=>this.handleTrackHover(!1,t),onMouseLeave:t=>this.handleTrackHover(!0,t),onMouseDown:this.onMouseDown,onTouchStart:t=>{this.setMobileSeeking(!0),this.onMouseDown(t)},onMouseUp:this.onMouseUp,onTouchEnd:this.onMouseUp},H.createElement(\"div\",{className:\"main\"},this.renderBufferProgress(),this.renderHoverProgress(),this.renderProgress())),this.drawHoverTime(),this.renderThumb())}}class oS extends xi.exports.Component{constructor(t){super(t),this.stageVolume=0,this.updateVolumeTimer=0,this.onVolumeSeeking=!1,this.onClickOperationButton=()=>{const{paused:i}=this.props;i?this.props.play():this.props.pause()},this.operationButton=()=>{const{paused:i}=this.props;return i?H.createElement(\"img\",{src:\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1tZGkiIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNOCA1LjE0djE0bDExLTdsLTExLTd6IiBmaWxsPSIjZmZmIj48L3BhdGg+PC9zdmc+Cg==\"}):H.createElement(\"img\",{src:\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1tZGkiIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTQgMTloNFY1aC00TTYgMTloNFY1SDZ2MTR6IiBmaWxsPSIjZmZmIj48L3BhdGg+PC9zdmc+Cg==\"})},this.operationVolumeButton=()=>this.props.volume>.9?H.createElement(\"img\",{src:\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1tZGkiIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTQgMy4yM3YyLjA2YzIuODkuODYgNSAzLjU0IDUgNi43MXMtMi4xMSA1Ljg0LTUgNi43djIuMDdjNC0uOTEgNy00LjQ5IDctOC43N2MwLTQuMjgtMy03Ljg2LTctOC43N00xNi41IDEyYzAtMS43Ny0xLTMuMjktMi41LTQuMDNWMTZjMS41LS43MSAyLjUtMi4yNCAyLjUtNE0zIDl2Nmg0bDUgNVY0TDcgOUgzeiIgZmlsbD0iI2ZmZiI+PC9wYXRoPjwvc3ZnPgo=\"}):this.props.volume===0?H.createElement(\"img\",{src:\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1tZGkiIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNNyA5djZoNGw1IDVWNGwtNSA1SDd6IiBmaWxsPSIjZmZmIj48L3BhdGg+PC9zdmc+Cg==\"}):H.createElement(\"img\",{src:\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1tZGkiIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNNSA5djZoNGw1IDVWNEw5IDltOS41IDNjMC0xLjc3LTEtMy4yOS0yLjUtNC4wM1YxNmMxLjUtLjcxIDIuNS0yLjI0IDIuNS00eiIgZmlsbD0iI2ZmZiI+PC9wYXRoPjwvc3ZnPgo=\"}),this.handleClickVolume=()=>{this.props.volume===0?this.stageVolume!==0?this.props.setVolume(this.stageVolume):this.props.setVolume(1):(this.stageVolume=this.props.volume,this.props.setVolume(0))},this.onChange=i=>{this.setState({currentTime:i}),i&&this.changeTime(i)},this.changeTime=Tr(i=>{this.props.setCurrentTime(i)},50),this.onVolumeChange=i=>{this.changeVolume(i),this.setState({seekVolume:i/100})},this.changeVolume=Tr(i=>{this.props.setVolume(i/100)},50),this.onVolumeSeekStart=()=>{this.onVolumeSeeking=!0},this.onVolumeSeekEnd=Tr(()=>{this.onVolumeSeeking=!1},500),this.onProgressSeekStart=()=>this.setState({isPlayerSeeking:!0}),this.onProgressSeekEnd=Tr(()=>{this.setState({isPlayerSeeking:!1})},500),this.state={isPlayerSeeking:!1,isVolumeHover:!1,seekVolume:1,visible:!0,currentTime:0},this.stageVolume=t.volume}componentDidMount(){this.updateVolumeTimer=setInterval(()=>{this.onVolumeSeeking||this.setState({seekVolume:this.props.volume}),this.state.isPlayerSeeking||this.setState({currentTime:this.props.currentTime})},100)}componentWillUnmount(){this.updateVolumeTimer&&clearInterval(this.updateVolumeTimer)}render(){const{duration:t,currentTime:i}=this.props;return H.createElement(\"div\",{className:\"player-controller\",style:{opacity:this.props.visible?\"1\":\"0\"}},H.createElement(\"div\",{className:\"player-controller-progress\"},H.createElement(Sd,{total:t,current:this.state.currentTime,onChange:this.onChange,buffered:this.props.buffered,bufferColor:\"rgba(255,255,255,0.3)\",hideHoverTime:!0,limitTimeTooltipBySides:!0,onSeekStart:this.onProgressSeekStart,onSeekEnd:this.onProgressSeekEnd,play:this.props.play,pause:this.props.pause,paused:this.props.paused,scale:this.props.scale})),H.createElement(\"div\",{className:\"player-controller-actions\"},H.createElement(\"div\",{className:\"player-controller-actions-left\"},H.createElement(\"div\",{onClick:this.onClickOperationButton,className:\"player-controller-play\"},this.operationButton()),H.createElement(\"div\",{className:\"player-volume-box\",onMouseEnter:()=>this.setState({isVolumeHover:!0}),onMouseLeave:()=>this.setState({isVolumeHover:!1})},H.createElement(\"div\",{onClick:this.handleClickVolume,className:\"player-volume\"},this.operationVolumeButton()),H.createElement(\"div\",{className:\"player-volume-slider\"},H.createElement(Sd,{total:100,current:100*this.state.seekVolume,onChange:this.onVolumeChange,onSeekStart:this.onVolumeSeekStart,onSeekEnd:this.onVolumeSeekEnd,scale:this.props.scale,limitTimeTooltipBySides:!0,hideHoverTime:!0})))),H.createElement(\"div\",{className:\"player-mid-box-time\"},Cd(Math.floor(i/1e3)),\" /\",\" \",Cd(Math.floor(t/1e3)))))}}function Cd(e){const t=e%60,i=(e-t)/60;if(i>=60){const n=i%60;return`${hn((i-n)/60)}:${hn(n)}:${hn(t)}`}return`${hn(i)}:${hn(t)}`}function hn(e){return e<=9?`0${e}`:`${e}`}class aS extends xi.exports.Component{constructor(){super(...arguments),this.putAttributes=t=>{const{context:i}=this.props,n=i.getAttributes()||{};for(const r in t)n[r]!==t[r]&&i.updateAttributes([r],t[r])}}render(){const{context:t}=this.props,i=t.getRoom(),n=i?void 0:t.getDisplayer(),r=this.putAttributes;return H.createElement(lS,{room:i,player:n,context:t,plugin:{putAttributes:r}})}}class lS extends xi.exports.Component{constructor(t){super(t),this.alertMask=null,this.container=H.createRef(),this.controllerHiddenTimer=0,this.syncPlayerTimer=0,this.retryCount=0,this.decreaseRetryTimer=0,this.noSoundSyncCount=0,this.showController=()=>{this.setState({controllerVisible:!0}),this.debounceHidingController()},this.play=()=>{var i;const n=(i=this.props.room)==null?void 0:i.calibrationTimestamp;this.debug(\">>> play\",{paused:!1,hostTime:n}),this.isEnabled()&&this.props.plugin.putAttributes({paused:!1,hostTime:n})},this.pause=()=>{const i=Ar(this.getAttributes(),this.props);this.debug(\">>> pause\",{paused:!0,currentTime:i}),this.isEnabled()&&this.props.plugin.putAttributes({paused:!0,currentTime:i})},this.setVolume=i=>{this.debug(\">>> volume\",{volume:i}),this.isEnabled()&&this.props.plugin.putAttributes({volume:i}),this.isEnabled()&&this.props.plugin.putAttributes({volume:i,muted:i===0})},this.setCurrentTime=i=>{var n;const r=(n=this.props.room)==null?void 0:n.calibrationTimestamp;this.debug(\">>> seek\",{currentTime:i/1e3,hostTime:r}),this.isEnabled()&&this.props.plugin.putAttributes({currentTime:i/1e3,hostTime:r})},this.resetPlayer=()=>{var i;(i=this.player)==null||i.autoplay(!1),this.state.NoSound||(this.debug(\">>> ended\",{paused:!0,currentTime:0}),this.isEnabled()&&this.props.plugin.putAttributes({paused:!0,currentTime:0}))},this.syncPlayerWithAttributes=()=>{var i;const n=this.getAttributes();if(!n)return;const r=this.player;if(!r||this.state.NoSound&&(this.noSoundSyncCount+=1)%8!=0)return;r.paused()!==n.paused&&(this.debug(\"<<< paused -> %o\",n.paused),n.paused?r.pause():(i=r.play())==null||i.catch(this.catchPlayFail)),r.muted()!==n.muted&&(this.debug(\"<<< muted -> %o\",n.muted),r.muted(n.muted)),r.volume()!==n.volume&&(this.debug(\"<<< volume -> %o\",n.volume),r.volume(n.volume));const s=Ar(n,this.props);let o=zt.currentTimeMaxError;this.state.NoSound&&(o*=3),s>r.duration()?this.resetPlayer():Math.abs(r.currentTime()-s)>o&&(this.debug(\"<<< currentTime -> %o\",s),r.currentTime(s))},this.debounceHidingController=()=>{this.controllerHiddenTimer&&(clearTimeout(this.controllerHiddenTimer),this.controllerHiddenTimer=0),this.controllerHiddenTimer=setTimeout(()=>{this.setState({controllerVisible:!1}),this.controllerHiddenTimer=0},3e3)},this.decreaseRetryCount=()=>{this.player&&this.retryCount>0&&(this.retryCount=this.retryCount-1)},this.catchPlayFail=i=>{var n,r;const s=String(i);if($x&&s.includes(\"NotAllowedError\")||s.includes(\"interact\"))(n=this.player)==null||n.autoplay(\"any\"),this.setState({NoSound:!0});else{const o=(r=this.player)==null?void 0:r.error();o&&(this.retryCount<=3?(this.initPlayer(),this.retryCount=this.retryCount+1):(this.debug(\"catch videojs media error\",o),this.setState({MediaError:!0}))),this.debug(\"catch error\",i)}},this.fixPlayFail=()=>{this.debug(\"try to fix play state\"),this.setState({NoSound:!1});const{muted:i,volume:n}=this.getAttributes();this.player&&(this.player.muted(i),this.player.volume(n))},this.initPlayer=async()=>{var i;(i=this.player)==null||i.dispose(),this.player=void 0,this.debug(\"creating elements ...\");const{type:n,src:r,poster:s}=this.getAttributes(),o=document.createElement(\"div\");o.setAttribute(\"data-vjs-player\",\"\");const a=document.createElement(\"video\");a.className=\"video-js\",s&&(a.poster=s),a.setAttribute(\"playsInline\",\"\"),a.setAttribute(\"webkit-playsinline\",\"\");const l=document.createElement(\"source\");new URL(r).pathname.endsWith(\".m3u8\")?l.type=\"application/x-mpegURL\":a.src=r,l.src=r,n&&(l.type=n),a.appendChild(l),o.appendChild(a),this.container.current.appendChild(o),await new Promise(d=>(window.requestAnimationFrame||window.setTimeout)(d)),this.debug(\"initializing videojs() ...\");const u=gu.default(a);this.player=u,window.player=u,u.one(\"loadedmetadata\",this.gracefullyUpdate),u.on(\"ready\",()=>{var d;(d=zt.onPlayer)==null||d.call(zt,u),u.on(\"timeupdate\",this.gracefullyUpdate),u.on(\"volumechange\",this.gracefullyUpdate),u.on(\"seeked\",this.gracefullyUpdate),u.on(\"play\",this.gracefullyUpdate),u.on(\"pause\",this.gracefullyUpdate),u.on(\"ended\",this.resetPlayer)}),u.on(\"error\",this.catchPlayFail),this.setState({MediaError:!1})},this.gracefullyUpdate=()=>this.setState({updater:!this.state.updater}),this.setupAlert=i=>{i&&(i.addEventListener(\"touchstart\",this.fixPlayFail),i.addEventListener(\"click\",this.fixPlayFail)),this.alertMask=i},this.setupReload=i=>{i&&(i.addEventListener(\"touchstart\",this.initPlayer),i.addEventListener(\"click\",this.initPlayer))},this.state={NoSound:!1,MediaError:!1,updater:!1,controllerVisible:!1},t.room&&function(i){if(!i.calibrationTimestamp)throw new Error(\"@netless/app-media-player@0.1.0-alpha.5 requires white-web-sdk@^2.13.8 to work properly.\")}(t.room)}getAttributes(){const{context:t}=this.props;let i=t.getAttributes();if(i){if(i=Le(Le({},Xf),i),this.player){let r=Ar(i,this.props),s=this.player.duration();!i.paused&&r>s&&(n=Le({},i),i=_x(n,Ox({currentTime:0,paused:!0})),this.resetPlayer())}var n;return i}}isShowingPoster(){const t=this.getAttributes();return!(t!=null&&t.src)||Hx.some(i=>t.src.endsWith(i))}render(){var t,i;if(!this.props.room&&!this.props.player)return null;const n=this.getAttributes();if(!n)return null;const r=1e3*(((t=this.player)==null?void 0:t.duration())||1e3),s=((i=this.player)==null?void 0:i.bufferedPercent())||0;return H.createElement(\"div\",{className:this.isEnabled()?\"vjs-p\":\"vjs-p disabled\",onMouseEnter:this.showController,onMouseMove:this.showController},H.createElement(\"div\",{className:\"video-js-plugin-player\",ref:this.container}),this.isShowingPoster()&&H.createElement(\"div\",{className:\"video-js-plugin-poster\"},n.poster&&H.createElement(\"img\",{src:n.poster,alt:\"\",draggable:!1})),H.createElement(oS,{duration:r,volume:n.volume,setVolume:this.setVolume,paused:n.paused,play:this.play,pause:this.pause,currentTime:1e3*Ar(n,this.props),setCurrentTime:this.setCurrentTime,buffered:r*s,visible:!0}),this.state.NoSound&&H.createElement(\"div\",{ref:this.setupAlert,className:\"videojs-plugin-muted-alert\"}),this.state.MediaError&&H.createElement(\"div\",{className:\"videojs-plugin-recovery-mode\"},H.createElement(\"button\",{ref:this.setupReload},\"Reload Player\")))}debug(t,...i){zt.verbose&&zt.log(`[MediaPlayer] ${t}`,...i)}componentDidMount(){this.debug(\"app version =\",\"0.1.0-alpha.5\"),this.debug(\"video.js version =\",gu.default.VERSION),this.initPlayer(),this.props.context.emitter.on(\"attributesUpdate\",this.syncPlayerWithAttributes),this.syncPlayerTimer=setInterval(this.syncPlayerWithAttributes,zt.syncInterval),this.decreaseRetryTimer=setInterval(this.decreaseRetryCount,zt.retryInterval)}componentWillUnmount(){var t;this.debug(\"unmount\"),this.props.context.emitter.off(\"attributesUpdate\",this.syncPlayerWithAttributes),(t=this.player)==null||t.dispose(),clearInterval(this.syncPlayerTimer),clearInterval(this.decreaseRetryTimer)}isEnabled(){return this.props.context.getIsWritable()}}const $a={kind:\"MediaPlayer\",setup(e){let t=e.getAttributes();if(!t||!t.src)return e.emitter.emit(\"destroy\",{error:new Error(\"[MediaPlayer]: Missing 'attributes'.'src'.\")});t=Le(Le({},Xf),t);const i=e.getBox();i.mountStyles(`.vjs-p{display:flex;flex-grow:1}.vjs-p *{pointer-events:auto}.vjs-p.disabled *{pointer-events:none}.vjs-p .video-js-plugin-poster{position:absolute;top:0;left:0;right:0;bottom:0;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgQAAACACAYAAAB0vHFxAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAACBKADAAQAAAABAAAAgAAAAACE3oPTAAAKXUlEQVR4Ae3dYW4ktxEG0LW9FwkC2McycokAOUGAXMLwtQwYvomdP4akHUnNnm6SVUU+/xqpe8ji+yiDWz3a/e7L5v/98se//3pL8K9//O+7t19Hv85eX7RP9vnllz2h4/rkd+wz+ir/0cLfjv/9t1/6igABAgQIENhRwIFgx9StmQABAgQIPAg4EDyA+JIAAQIECOwo8HXHRVvzPIHRzwBHjz9PKudMo31Hj59TdZ2qsueXvb5sO0GHIFsi6iFAgAABAgECOgQB6KbsJ5Dtt0L6rWyPkeRXO+fs+WWvL1v6OgTZElEPAQIECBAIENAhCEA3ZT8Bzwj7WUaMJL8I9X5zZs8ve339kugzkg5BH0ejECBAgACB0gIOBKXjUzwBAgQIEOgj4EDQx9EoBAgQIECgtIADQen4FE+AAAECBPoIOBD0cTQKAQIECBAoLeC3DErHp/iWgE8Zt4RyX5df7nxa1Y3Ob/T4rfWtdl2HYLVErYcAAQIECFwQWL5DsPoJcvX1XdjTpd4iv1JxvStWfu9IfCORwLP7U4cgUXhKIUCAAAECUQIOBFHy5iVAgAABAokEHAgShaEUAgQIECAQJXD7MwTPPqOIWujVeUevb/T4V9ftfecE5HfOKetd8suajLoiBHQIItTNSYAAAQIEkgnc7hAkW0/3ckb/e9qjx+8OYsBvBOT3DUe5L+RXLjIFDxTQIRiIa2gCBAgQIFBFoNkh2P0Z2+j1jx4/+0asvv7q9d/dH9XXX73+3fO7u/7W+3fbHzoErR3hOgECBAgQ2ECg2SHwjG2DXRC4xOj9tdufAHpHLb/eonPHk9+xd7TPcXX9r+oQ9Dc1IgECBAgQKCfgQFAuMgUTIECAAIH+Ag4E/U2NSIAAAQIEygk0P0MQvaLsz3hb9bWu840WOJ5ffsc+2a/KL3tC6jsSmL1/dQiO0nCNAAECBAhsItDsEMw+oTzrHl1f61OorevPrvfZ+6N9WvVmr09+xwnKr7ZP9vyOdcdfze7Tuz4dgvF7ygwECBAgQCC9QLNDkH0F0X+C45NdoHZ99rf8aguofqRA7/8/6BCMTMvYBAgQIECgiED5DkHvZyhFcjtdJp/TVClvlF/KWE4XJb/TVG68INB7f+kQXAjBWwgQIECAwGoCDgSrJWo9BAgQIEDggoADwQU0byFAgAABAqsJfO39DGI1IOuJFbA/Y/3vzi6/u4Kx7189v7vru/v+2HTfz65D8N7EdwgQIECAwHYCw3/LYLUT1HY7pLFg+TaAkl+WX/KAGuXJrwEUfLlaPjoEwRvG9AQIECBAIIPA8A5B779JKQOaGl4F5PtqUfGV/Cqm9lqz/F4tMr6qlo8OQcZdpCYCBAgQIDBZYHiHoNozlMn+5aeTb+0I5Se/2gK5q6/286VDkHs/qY4AAQIECEwRcCCYwmwSAgQIECCQW8CBIHc+qiNAgAABAlMEhn+GYMoqTEKAAAEC7wSqPcN+twDfmCqgQzCV22QECBAgQCCnQHiHoPoJtlV/63rObfFaVfX6X1dy7VX19Vev/1pqr++qvv7q9b8m4dVHAtny1SH4KCXfI0CAAAECmwmEdwiq/U1Om+2PL/Kpnbj85FdbYO3qs/186hCsvd+sjgABAgQInBJwIDjF5CYCBAgQILC2gAPB2vlaHQECBAgQOCUQ/hmCbJ+yPKW20U3yqR22/ORXW2Dt6qN/Ph/n1yFYe79ZHQECBAgQOCXgQHCKyU0ECBAgQGBtAQeCtfO1OgIECBAgcErAgeAUk5sIECBAgMDaAg4Ea+drdQQIECBA4JTA1+///OGnoztd52N/fC7g58PPx+e748sX+8P+qLQ/dAiO0nKNAAECBAhsIuBAsEnQlkmAAAECBI4EHAiOdFwjQIAAAQKbCDgQbBK0ZRIgQIAAgSMBB4IjHdcIECBAgMAmAuH/lsHP//zvb5tYl1ymfErG9lK0/F4oSr6QX8nYThcdne/j/DoEp6NzIwECBAgQWFfAgWDdbK2MAAECBAicFnAgOE3lRgIECBAgsK5A+GcIfv39Pz++5X18pvH2mtfzBeQz37znjPLrqTl/LPnNN585Y7Z8dQhmpm8uAgQIECCQVCC8Q1C9I9Cqv3U96b54Kat6/S8Lufii+vqr138xtpe3VV9/9fpfgvDiQ4Fs+eoQfBiTbxIgQIAAgb0EwjsEe3FbLQECBOYJZPsT6LyVm+mKgA7BFTXvIUCAAAECiwk4ECwWqOUQIECAAIErAg4EV9S8hwABAgQILCYw/DMEnmEttmMeliPfB5BiX8qvWGAP5crvASTZl9Xy0SFItoGUQ4AAAQIEIgSGdwiy/U1MEcgrzynf2unKT361BXJXX+3nS4cg935SHQECBAgQmCIwvENQ7RnKFPWFJpFv7TDlJ7/aArmrr/bzpUOQez+pjgABAgQITBH4Wu0EM0XFJGkE7M80UVwqRH6X2NK8afX87q7v7vvTBP13IToE2RJRDwECBAgQCBBwIAhANyUBAgQIEMgm4ECQLRH1ECBAgACBAIHhv2Uwek2rPcPp7cWnt+jc8eQ317v3bPLrLWq8twK995cOwVtdrwkQIECAwKYC5TsE1f4mqNn7jM9s8b7zya+v5+zR5DdbfK/5eu8vHYK99o/VEiBAgACBDwWaHYLezyg+rOLGN6Pra53QWtdvLP3UW6N9WkVmr09+xwnKr7ZP9vyOdcdfze7Tuz4dgvF7ygwECBAgQCC9QLNDEL2C3ieg3utp1de63rueZ8fLXt+z6+l9f3af7PX1zuPZ8bL7ZK/vWW/39xWYvT90CPrmZzQCBAgQIFBSwIGgZGyKJkCAAAECfQUcCPp6Go0AAQIECJQUaH6GIPpT1iVVFX1aIHp/zX5GdxqmyI3yKxLUJ2XK7xOYv78d7XNcXf+rOgT9TY1IgAABAgTKCTQ7BLv/CWr0+kePn31HVl9/9frv7o/q669e/+753V1/6/277Q8dgtaOcJ0AAQIECGwg0OwQbGBwuMTRz5BGj3+4OBdvC8jvNmHoAPIL5Td5MgEdgmSBKIcAAQIECEQI3O4QrP6MZfT6Ro8fsal2mlN+tdOWX+38VN9XQIegr6fRCBAgQIBASQEHgpKxKZoAAQIECPQVcCDo62k0AgQIECBQUuD2Zwiyr3r1Z4Srry/7/rpbn/zuCsa+X36x/mY/Fnh2f+oQHHu6SoAAAQIEthBYvkOwRYoW+anAsyfkTwdyIURAfiHs3SYdnd/o8btBFBlIh6BIUMokQIAAAQIjBRwIRuoamwABAgQIFBFwICgSlDIJECBAgMBIAQeCkbrGJkCAAAECRQQcCIoEpUwCBAgQIDBSwG8ZjNQ19nABnzIeTjx0AvkN5R0+ePb8stc3PKAnJ9AheBLM7QQIECBAYEUBHYIVU91oTf49+9phy09+IwXsr+d0dQie83I3AQIECBBYUkCHYMlY8yxq9DO80ePnkYypZLTv6PFj1PaZNXt+2evLtlN0CLIloh4CBAgQIBAg4EAQgG5KAgQIECCQTcCBIFsi6iFAgAABAgEC/wdVfx9UuC8B6AAAAABJRU5ErkJggg==);background-repeat:repeat-x;background-position:0 50%;display:flex;align-items:center;justify-content:center}.vjs-p .video-js-plugin-poster img{box-shadow:0 0 5px 10px #0006}.vjs-p .player-controller,.vjs-p .videojs-plugin-muted-alert{pointer-events:auto}.vjs-p.disabled .videojs-plugin-close-icon,.vjs-p.disabled .player-controller{pointer-events:none}.vjs-p .video-js-plugin-player{position:absolute;top:0;left:0;right:0;bottom:0}.video-js,[data-vjs-player]{width:100%;height:100%}.vjs-p .videojs-plugin-muted-alert{pointer-events:auto;cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0;z-index:43}.vjs-p .videojs-plugin-muted-alert:before{pointer-events:auto;cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0;z-index:43;content:\"\\\\f104\";background:rgba(0,0,0,.3);font-family:VideoJS;font-size:2em;display:flex;align-items:center;justify-content:center;color:#fff}.vjs-p .videojs-plugin-recovery-mode{pointer-events:auto;cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0;z-index:44}.vjs-p .videojs-plugin-recovery-mode button{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.vjs-p .seek-slider{position:relative;width:100%}.vjs-p .seek-slider:focus{outline:none}.vjs-p .seek-slider .track{padding:10px 0;cursor:pointer;outline:none}.vjs-p .seek-slider .track:focus{border:0;outline:none}.vjs-p .seek-slider .track .main{width:100%;height:3px;background-color:#ffffff4d;border-radius:30px;position:absolute;left:0;top:8.5px;transition:transform .4s;outline:none}.vjs-p .seek-slider .track .main:focus{border:0;outline:none}.vjs-p .seek-slider .track .main .buffered{position:absolute;background-color:#ffffff4d;width:100%;height:100%;transform:scaleX(.8);z-index:2;transform-origin:0 0}.vjs-p .seek-slider .track .main .seek-hover{position:absolute;background-color:#ffffff80;width:100%;height:100%;z-index:1;transform:scaleX(.6);transform-origin:0 0;opacity:0;transition:opacity .4s}.vjs-p .seek-slider .track .main .connect{position:absolute;background-color:#fff;width:100%;height:100%;z-index:3;left:0;transform:scaleX(.13);transform-origin:0 0}.vjs-p .seek-slider .track.active .main{transform:scaleY(2)}.vjs-p .seek-slider .thumb{pointer-events:none;position:absolute;width:12px;height:12px;left:-6px;top:4px;z-index:4;transform:translate(100px)}.vjs-p .seek-slider .thumb .handler{border-radius:100%;width:100%;height:100%;background-color:#fff;opacity:0;transform:scale(.4);cursor:pointer;transition:transform .2s;pointer-events:none}.vjs-p .seek-slider .thumb.active .handler{opacity:1;transform:scale(1)}.vjs-p .seek-slider .hover-time{position:absolute;background-color:#0000004d;line-height:18px;font-size:16px;color:#ddd;top:-25px;left:0;padding:5px 10px;border-radius:5px;box-shadow:0 0 5px #0000004d;opacity:0;transform:translate(150px);pointer-events:none}.vjs-p .seek-slider .hover-time.active{opacity:1}.vjs-p .seek-slider:hover .track .main .seek-hover{opacity:1}.vjs-p .player-controller{position:absolute;z-index:100;bottom:0px;left:0;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:stretch;height:64px;background-image:linear-gradient(0deg,#000,transparent);transition:opacity .2s;color:#fff}.vjs-p .player-menu-box{display:flex;align-items:center;justify-content:center;flex-direction:column;margin-bottom:40px}.vjs-p .player-menu-cell{width:100%;text-align:center;font-size:12px;color:#7a7b7c}.vjs-p .player-multiple-play{width:64px;height:120px}.vjs-p .player-controller-actions-left{display:flex;justify-content:center;align-items:center;flex-shrink:0}.vjs-p .player-right-box{font-size:14px;color:#7a7b7c;cursor:pointer;margin-right:12px}.vjs-p .player-controller-actions{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-left:8px;padding-right:8px;margin-top:2px}.vjs-p .player-mid-box-time{font-size:9px;display:flex;justify-content:center;align-items:center;color:#fff;flex-shrink:0;margin-right:8px;font-family:monospace}.vjs-p .player-controller-play{display:flex;align-items:center;justify-content:center;cursor:pointer;padding-right:4px}.vjs-p .player-controller-progress{width:calc(100% - 28px);margin-left:14px;display:flex;align-items:center;justify-content:center;margin-top:8px}.vjs-p .player-volume{display:flex;align-items:center;justify-content:center;cursor:pointer;margin-right:16px;margin-left:8px}.vjs-p .player-volume-slider{width:60px;margin-right:12px;display:flex;align-items:center}.vjs-p .player-volume-box{display:flex;flex-direction:row}.netless-app-media-player-container{display:flex;position:relative;height:100%}\n`);const n=document.createElement(\"div\");n.classList.add(\"netless-app-media-player-container\"),md.render(H.createElement(aS,{context:e}),n),i.mountContent(n),e.emitter.on(\"destroy\",()=>{console.log(\"[MediaPlayer]: destroy\"),md.unmountComponentAtNode(n)})}},uS=()=>{ie.debug&&Wx({verbose:!0}),ie.register({kind:Ko.kind,src:Ko}),ie.register({kind:$a.kind,src:$a})},cS={DocsViewer:Ko.kind,MediaPlayer:$a.kind};const eg=new Bv({emitter:R}),W=class extends A.InvisiblePlugin{constructor(e){super(e);this.version=\"0.4.35\",this.dependencies={dependencies:{\"@juggle/resize-observer\":\"^3.3.1\",\"@netless/telebox-insider\":\"0.2.26\",emittery:\"^0.9.2\",lodash:\"^4.17.21\",\"p-retry\":\"^4.6.1\",\"side-effect-manager\":\"^0.1.5\",uuid:\"^7.0.3\",\"video.js\":\">=7\"},peerDependencies:{\"white-web-sdk\":\"^2.16.0\"},devDependencies:{\"@netless/app-docs-viewer\":\"^0.2.9\",\"@netless/app-media-player\":\"0.1.0-beta.5\",\"@rollup/plugin-commonjs\":\"^20.0.0\",\"@rollup/plugin-node-resolve\":\"^13.0.4\",\"@rollup/plugin-url\":\"^6.1.0\",\"@sveltejs/vite-plugin-svelte\":\"^1.0.0-next.22\",\"@tsconfig/svelte\":\"^2.0.1\",\"@types/debug\":\"^4.1.7\",\"@types/lodash\":\"^4.14.182\",\"@types/lodash-es\":\"^4.17.4\",\"@types/uuid\":\"^8.3.1\",\"@typescript-eslint/eslint-plugin\":\"^4.30.0\",\"@typescript-eslint/parser\":\"^4.30.0\",\"@vitest/ui\":\"^0.14.1\",cypress:\"^8.7.0\",dotenv:\"^10.0.0\",eslint:\"^7.32.0\",\"eslint-config-prettier\":\"^8.3.0\",\"eslint-plugin-svelte3\":\"^3.2.0\",jsdom:\"^19.0.0\",less:\"^4.1.1\",prettier:\"^2.3.2\",\"prettier-plugin-svelte\":\"^2.4.0\",\"rollup-plugin-analyzer\":\"^4.0.0\",\"rollup-plugin-styles\":\"^3.14.1\",svelte:\"^3.42.4\",typescript:\"^4.5.5\",vite:\"^2.5.3\",vitest:\"^0.14.1\",\"white-web-sdk\":\"2.16.10\"}},this.emitter=se,this.viewMode=A.ViewMode.Broadcaster,this.isReplay=A.isPlayer(this.displayer),this.containerSizeRatio=W.containerSizeRatio,W.displayer=e.displayer,window.NETLESS_DEPS={dependencies:{\"@juggle/resize-observer\":\"^3.3.1\",\"@netless/telebox-insider\":\"0.2.26\",emittery:\"^0.9.2\",lodash:\"^4.17.21\",\"p-retry\":\"^4.6.1\",\"side-effect-manager\":\"^0.1.5\",uuid:\"^7.0.3\",\"video.js\":\">=7\"},peerDependencies:{\"white-web-sdk\":\"^2.16.0\"},devDependencies:{\"@netless/app-docs-viewer\":\"^0.2.9\",\"@netless/app-media-player\":\"0.1.0-beta.5\",\"@rollup/plugin-commonjs\":\"^20.0.0\",\"@rollup/plugin-node-resolve\":\"^13.0.4\",\"@rollup/plugin-url\":\"^6.1.0\",\"@sveltejs/vite-plugin-svelte\":\"^1.0.0-next.22\",\"@tsconfig/svelte\":\"^2.0.1\",\"@types/debug\":\"^4.1.7\",\"@types/lodash\":\"^4.14.182\",\"@types/lodash-es\":\"^4.17.4\",\"@types/uuid\":\"^8.3.1\",\"@typescript-eslint/eslint-plugin\":\"^4.30.0\",\"@typescript-eslint/parser\":\"^4.30.0\",\"@vitest/ui\":\"^0.14.1\",cypress:\"^8.7.0\",dotenv:\"^10.0.0\",eslint:\"^7.32.0\",\"eslint-config-prettier\":\"^8.3.0\",\"eslint-plugin-svelte3\":\"^3.2.0\",jsdom:\"^19.0.0\",less:\"^4.1.1\",prettier:\"^2.3.2\",\"prettier-plugin-svelte\":\"^2.4.0\",\"rollup-plugin-analyzer\":\"^4.0.0\",\"rollup-plugin-styles\":\"^3.14.1\",svelte:\"^3.42.4\",typescript:\"^4.5.5\",vite:\"^2.5.3\",vitest:\"^0.14.1\",\"white-web-sdk\":\"2.16.10\"}}}static async mount(e){const t=e.room;W.container=e.container;const i=e.containerSizeRatio,n=e.debug,r=e.cursor;W.params=e,W.displayer=e.room,em();let s;if(A.isRoom(t)){if(t.phase!==A.RoomPhase.Connected)throw new Error(\"[WindowManager]: Room only Connected can be mount\");t.phase===A.RoomPhase.Connected&&t.isWritable&&(t.disableSerialization=!1),s=await this.initManager(t)}if(W.isCreated)throw new Error(\"[WindowManager]: Already created cannot be created again\");if(this.debug=Boolean(n),ai(\"Already insert room\",s),A.isRoom(this.displayer)){if(!s)throw new Error(\"[WindowManager]: init InvisiblePlugin failed\")}else await fg.default(async o=>{if(s=await t.getInvisiblePlugin(W.kind),!s)throw ai(`manager is empty. retrying ${o}`),new Error},{retries:10});if(!s)throw new Error(\"[WindowManager]: create manager failed\");i&&(W.containerSizeRatio=i),await s.ensureAttributes(),s.appManager=new Kg(s),s._pageState=new jv(s.appManager),s.cursorManager=new Lv(s.appManager,Boolean(r),e.applianceIcons),i&&(s.containerSizeRatio=i),e.container&&s.bindContainer(e.container),Rv(t,s),R.emit(\"onCreated\"),W.isCreated=!0;try{await xg()}catch(o){console.warn(\"[WindowManager]: indexedDB open failed\"),console.log(o)}return s}static async initManager(e){let t=e.getInvisiblePlugin(W.kind);if(!t&&A.isRoom(e))if(e.isWritable===!1){try{await e.setWritable(!0)}catch{throw new Error(\"[WindowManger]: room must be switched to be writable\")}t=await Cu(e),t==null||t.ensureAttributes(),await Gr(500),await e.setWritable(!1)}else t=await Cu(e);return t}static initContainer(e,t,i,n){W.container||(W.container=t);const{playground:r,wrapper:s,sizer:o,mainViewElement:a}=qg(t);if(W.playground=r,i&&o.classList.add(\"netless-window-manager-chess-sizer\"),n){const l=document.createElement(\"style\");l.textContent=n,r.appendChild(l)}return e.containerResizeObserver=Za.create(r,o,s,R),W.wrapper=s,a}static get registered(){return je.registered}bindContainer(e){var t,i,n,r,s,o;if(A.isRoom(this.displayer)&&this.room.phase!==A.RoomPhase.Connected)throw new Dd;if(W.isCreated&&W.container)W.container.firstChild&&e.appendChild(W.container.firstChild);else if(W.params){const a=W.params,l=W.initContainer(this,e,a.chessboard,a.overwriteStyles);this.boxManager&&this.boxManager.destroy();const u=lv(this,se,R,wt,{collectorContainer:a.collectorContainer,collectorStyles:a.collectorStyles,prefersColorScheme:a.prefersColorScheme});this.boxManager=u,(t=this.appManager)==null||t.setBoxManager(u),this.bindMainView(l,a.disableCameraTransform),W.wrapper&&((i=this.cursorManager)==null||i.setupWrapper(W.wrapper))}R.emit(\"updateManagerRect\"),(n=this.appManager)==null||n.refresh(),(r=this.appManager)==null||r.resetMaximized(),(s=this.appManager)==null||s.resetMinimized(),(o=this.appManager)==null||o.displayerWritableListener(!this.room.isWritable),W.container=e}bindCollectorContainer(e){W.isCreated&&this.boxManager?this.boxManager.setCollectorContainer(e):W.params&&(W.params.collectorContainer=e)}static register(e){return je.register(e)}static unregister(e){return je.unregister(e)}async addApp(e){if(this.appManager)return this.appManager.rootDirRemoving?new Promise((t,i)=>{R.once(\"rootDirRemoved\").then(async()=>{try{const n=await this._addApp(e);t(n)}catch(n){i(n.message)}})}):this._addApp(e);throw new Xe}async _addApp(e){var t,i,n;if(this.appManager){if(!e.kind||typeof e.kind!=\"string\")throw new kd;const r=await((t=je.appClasses.get(e.kind))==null?void 0:t());if(r&&((i=r.config)==null?void 0:i.singleton)&&this.appManager.appProxies.has(e.kind))throw new Ad;const s=this.setupScenePath(e,this.appManager);return s===void 0?void 0:((n=e==null?void 0:e.options)!=null&&n.scenePath&&(e.options.scenePath=Rg(e.options.scenePath)),await this.appManager.addApp(e,Boolean(s)))}else throw new Xe}setupScenePath(e,t){let i=!1;if(e.options){const{scenePath:n,scenes:r}=e.options;if(n){if(!Bg(n))throw new Pd;const s=Object.keys(this.apps||{});for(const o of s){const a=t.store.getAppScenePath(o);if(a&&a===n){if(console.warn(`[WindowManager]: ScenePath ${n} Already opened`),this.boxManager){const l=this.boxManager.getTopBox();l&&this.boxManager.setZIndex(o,l.zIndex+1,!1)}return}}}n&&r&&r.length>0&&(this.isDynamicPPT(r)?(i=!0,Oi(this.displayer)[n]||wn(this.room,n,r)):Oi(this.displayer)[n]||wn(this.room,n,[{name:r[0].name}])),n&&r===void 0&&wn(this.room,n,[{}])}return i}async setMainViewScenePath(e){this.appManager&&await this.appManager.setMainViewScenePath(e)}async setMainViewSceneIndex(e){this.appManager&&await this.appManager.setMainViewSceneIndex(e)}async nextPage(){if(this.appManager){const e=this.mainViewSceneIndex+1;return e>=this.mainViewScenesLength?(console.warn(\"[WindowManager]: current page is the last page\"),!1):(await this.appManager.setMainViewSceneIndex(e),!0)}else return!1}async prevPage(){if(this.appManager){const e=this.mainViewSceneIndex-1;return e<0?(console.warn(\"[WindowManager]: current page is the first page\"),!1):(await this.appManager.setMainViewSceneIndex(e),!0)}else return!1}async addPage(e){if(this.appManager){const t=e==null?void 0:e.after,i=e==null?void 0:e.scene;if(t){const n=this.mainViewSceneIndex+1;this.room.putScenes(De,[i||{}],n)}else this.room.putScenes(De,[i||{}])}}async removePage(e){if(this.appManager){const t=e===void 0?this.pageState.index:e;return this.pageState.length===1?(console.warn(\"[WindowManager]: can not remove the last page\"),!1):t<0||t>=this.pageState.length?(console.warn(`[WindowManager]: index ${e} out of range`),!1):this.appManager.removeSceneByIndex(t)}else return!1}getMainViewScenePath(){var e;return(e=this.appManager)==null?void 0:e.store.getMainViewScenePath()}getMainViewSceneIndex(){var e;return(e=this.appManager)==null?void 0:e.store.getMainViewSceneIndex()}setReadonly(e){var t;this.readonly=e,(t=this.boxManager)==null||t.setReadonly(e),R.emit(\"setReadonly\",e)}switchMainViewToWriter(){var e;return(e=this.appManager)==null?void 0:e.mainViewProxy.mainViewClickHandler()}onAppDestroy(e,t){Lg(`destroy-${e}`,t)}setViewMode(e){var t,i,n;e===A.ViewMode.Broadcaster&&(this.canOperate&&((t=this.appManager)==null||t.mainViewProxy.setCameraAndSize()),(i=this.appManager)==null||i.mainViewProxy.start()),e===A.ViewMode.Freedom&&((n=this.appManager)==null||n.mainViewProxy.stop()),this.viewMode=e}setBoxState(e){if(!!this.canOperate)switch(e){case\"normal\":this.setMaximized(!1),this.setMinimized(!1);break;case\"maximized\":this.setMaximized(!0),this.setMinimized(!1);break;case\"minimized\":this.setMinimized(!0);break}}setMaximized(e){var t;!this.canOperate||(t=this.boxManager)==null||t.setMaximized(e,!1)}setMinimized(e){var t;!this.canOperate||(t=this.boxManager)==null||t.setMinimized(e,!1)}get mainView(){if(this.appManager)return this.appManager.mainViewProxy.view;throw new Xe}get camera(){if(this.appManager)return this.appManager.mainViewProxy.view.camera;throw new Xe}get cameraState(){if(this.appManager)return this.appManager.mainViewProxy.cameraState;throw new Xe}get apps(){var e;return(e=this.appManager)==null?void 0:e.store.apps()}get boxState(){var e;if(this.appManager)return(e=this.appManager.boxManager)==null?void 0:e.boxState;throw new Xe}get darkMode(){var e,t;return Boolean((t=(e=this.appManager)==null?void 0:e.boxManager)==null?void 0:t.darkMode)}get prefersColorScheme(){var e;if(this.appManager)return(e=this.appManager.boxManager)==null?void 0:e.prefersColorScheme;throw new Xe}get focused(){return this.attributes.focus}get focusedView(){var e,t;return((t=(e=this.appManager)==null?void 0:e.focusApp)==null?void 0:t.view)||this.mainView}get mainViewSceneIndex(){var e;return((e=this._pageState)==null?void 0:e.index)||0}get mainViewSceneDir(){var e;if(this.appManager)return(e=this.appManager)==null?void 0:e.getMainViewSceneDir();throw new Xe}get topApp(){var e,t;return(t=(e=this.boxManager)==null?void 0:e.getTopBox())==null?void 0:t.id}get mainViewScenesLength(){var e;return((e=this._pageState)==null?void 0:e.length)||0}get canRedoSteps(){var e;return((e=this.focusedView)==null?void 0:e.canRedoSteps)||0}get canUndoSteps(){var e;return((e=this.focusedView)==null?void 0:e.canUndoSteps)||0}get sceneState(){if(this.appManager)return this.appManager.sceneState;throw new Xe}get pageState(){if(this._pageState)return this._pageState.toObject();throw new Xe}queryAll(){var e;return Array.from(((e=this.appManager)==null?void 0:e.appProxies.values())||[])}queryOne(e){var t;return(t=this.appManager)==null?void 0:t.appProxies.get(e)}async closeApp(e){var t;return(t=this.appManager)==null?void 0:t.closeApp(e)}moveCamera(e){var n;const t=E.omit(e,[\"animationMode\"]),i=q({},this.mainView.camera);E.isEqual(q(q({},i),t),i)||(this.mainView.moveCamera(e),(n=this.appManager)==null||n.dispatchInternalEvent(J.MoveCamera,e),setTimeout(()=>{var r;(r=this.appManager)==null||r.mainViewProxy.setCameraAndSize()},500))}moveCameraToContain(e){var t;this.mainView.moveCameraToContain(e),(t=this.appManager)==null||t.dispatchInternalEvent(J.MoveCameraToContain,e),setTimeout(()=>{var i;(i=this.appManager)==null||i.mainViewProxy.setCameraAndSize()},500)}convertToPointInWorld(e){return this.mainView.convertToPointInWorld(e)}setCameraBound(e){this.mainView.setCameraBound(e)}onDestroy(){this._destroy()}destroy(){this._destroy()}_destroy(){var e,t,i,n;(e=this.containerResizeObserver)==null||e.disconnect(),(t=this.appManager)==null||t.destroy(),(i=this.cursorManager)==null||i.destroy(),W.container=void 0,W.wrapper=void 0,W.isCreated=!1,W.playground&&((n=W.playground.parentNode)==null||n.removeChild(W.playground)),W.params=void 0,ai(\"Destroyed\")}bindMainView(e,t){var i;this.appManager&&(this.appManager.bindMainView(e,Boolean(t)),(i=this.cursorManager)==null||i.setMainViewDivElement(e))}get canOperate(){return A.isRoom(this.displayer)?this.displayer.isWritable&&this.displayer.phase===A.RoomPhase.Connected:!1}get room(){return this.displayer}safeSetAttributes(e){this.canOperate&&this.setAttributes(e)}safeUpdateAttributes(e,t){this.canOperate&&this.updateAttributes(e,t)}setPrefersColorScheme(e){var t,i;(i=(t=this.appManager)==null?void 0:t.boxManager)==null||i.setPrefersColorScheme(e)}cleanCurrentScene(){var e;(e=this.focusedView)==null||e.cleanCurrentScene()}redo(){var e;return((e=this.focusedView)==null?void 0:e.redo())||0}undo(){var e;return((e=this.focusedView)==null?void 0:e.undo())||0}delete(){var e;(e=this.focusedView)==null||e.delete()}copy(){var e;(e=this.focusedView)==null||e.copy()}paste(){var e;(e=this.focusedView)==null||e.paste()}duplicate(){var e;(e=this.focusedView)==null||e.duplicate()}insertText(e,t,i){var n;return((n=this.focusedView)==null?void 0:n.insertText(e,t,i))||\"\"}insertImage(e){var t;return(t=this.focusedView)==null?void 0:t.insertImage(e)}completeImageUpload(e,t){var i;return(i=this.focusedView)==null?void 0:i.completeImageUpload(e,t)}lockImage(e,t){var i;return(i=this.focusedView)==null?void 0:i.lockImage(e,t)}lockImages(e){var t;return(t=this.focusedView)==null?void 0:t.lockImages(e)}refresh(){var e;this._refresh(),(e=this.appManager)==null||e.dispatchInternalEvent(J.Refresh)}_refresh(){var e,t,i;(e=this.appManager)==null||e.mainViewProxy.rebind(),W.container&&this.bindContainer(W.container),(i=(t=this.appManager)==null?void 0:t.refresher)==null||i.refresh()}setContainerSizeRatio(e){if(!E.isNumber(e))throw new Error(`[WindowManager]: updateContainerSizeRatio error, ratio must be a number. but got ${e}`);W.containerSizeRatio=e,this.containerSizeRatio=e,R.emit(\"containerSizeRatioUpdate\",e)}isDynamicPPT(e){var i,n;const t=(n=(i=e[0])==null?void 0:i.ppt)==null?void 0:n.src;return t==null?void 0:t.startsWith(\"pptx://\")}async ensureAttributes(){E.isNull(this.attributes)&&await Gr(50),E.isObject(this.attributes)&&(this.attributes[be.Apps]||this.safeSetAttributes({[be.Apps]:{}}),this.attributes[be.Cursors]||this.safeSetAttributes({[be.Cursors]:{}}),this.attributes._mainScenePath||this.safeSetAttributes({_mainScenePath:bd}),this.attributes._mainSceneIndex||this.safeSetAttributes({_mainSceneIndex:0}),this.attributes[be.Registered]||this.safeSetAttributes({[be.Registered]:{}}))}};let ie=W;ie.kind=\"WindowManager\";ie.debug=!1;ie.containerSizeRatio=vg;ie.isCreated=!1;uS();exports.AppCreateError=Ad;exports.AppManagerNotInitError=Xe;exports.AppNotRegisterError=Vg;exports.BindContainerRoomPhaseInvalidError=Dd;exports.BoxManagerNotFoundError=zd;exports.BoxNotCreatedError=Nd;exports.BuiltinApps=cS;exports.InvalidScenePath=Pd;exports.ParamsInvalidError=kd;exports.WhiteWebSDKInvalidError=Td;exports.WindowManager=ie;exports.calculateNextIndex=Fa;exports.reconnectRefresher=eg;\n//# sourceMappingURL=index.cjs.js.map\n\n\n//# sourceURL=webpack://whiteboard-bridge/./node_modules/@netless/window-manager/dist/index.cjs.js?");

/***/ }),

/***/ 79654:
/*!****************************************************!*\
  !*** ./node_modules/@netless/xml-js/dist/index.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("/* provided dependency */ var Buffer = __webpack_require__(/*! buffer */ 48764)[\"Buffer\"];\n\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\nfunction getAugmentedNamespace(n) {\n\tif (n.__esModule) return n;\n\tvar a = Object.defineProperty({}, '__esModule', {value: true});\n\tObject.keys(n).forEach(function (k) {\n\t\tvar d = Object.getOwnPropertyDescriptor(n, k);\n\t\tObject.defineProperty(a, k, d.get ? d : {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\treturn n[k];\n\t\t\t}\n\t\t});\n\t});\n\treturn a;\n}\n\nvar global$1 = (typeof __webpack_require__.g !== \"undefined\" ? __webpack_require__.g :\n  typeof self !== \"undefined\" ? self :\n  typeof window !== \"undefined\" ? window : {});\n\nvar lookup = [];\nvar revLookup = [];\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array;\nvar inited = false;\nfunction init () {\n  inited = true;\n  var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n  for (var i = 0, len = code.length; i < len; ++i) {\n    lookup[i] = code[i];\n    revLookup[code.charCodeAt(i)] = i;\n  }\n\n  revLookup['-'.charCodeAt(0)] = 62;\n  revLookup['_'.charCodeAt(0)] = 63;\n}\n\nfunction toByteArray (b64) {\n  if (!inited) {\n    init();\n  }\n  var i, j, l, tmp, placeHolders, arr;\n  var len = b64.length;\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // the number of equal signs (place holders)\n  // if there are two placeholders, than the two characters before it\n  // represent one byte\n  // if there is only one, then the three characters before it represent 2 bytes\n  // this is just a cheap hack to not do indexOf twice\n  placeHolders = b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0;\n\n  // base64 is 4/3 + up to two characters of the original data\n  arr = new Arr(len * 3 / 4 - placeHolders);\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  l = placeHolders > 0 ? len - 4 : len;\n\n  var L = 0;\n\n  for (i = 0, j = 0; i < l; i += 4, j += 3) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)];\n    arr[L++] = (tmp >> 16) & 0xFF;\n    arr[L++] = (tmp >> 8) & 0xFF;\n    arr[L++] = tmp & 0xFF;\n  }\n\n  if (placeHolders === 2) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4);\n    arr[L++] = tmp & 0xFF;\n  } else if (placeHolders === 1) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2);\n    arr[L++] = (tmp >> 8) & 0xFF;\n    arr[L++] = tmp & 0xFF;\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp;\n  var output = [];\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2]);\n    output.push(tripletToBase64(tmp));\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  if (!inited) {\n    init();\n  }\n  var tmp;\n  var len = uint8.length;\n  var extraBytes = len % 3; // if we have 1 byte left, pad 2 bytes\n  var output = '';\n  var parts = [];\n  var maxChunkLength = 16383; // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)));\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1];\n    output += lookup[tmp >> 2];\n    output += lookup[(tmp << 4) & 0x3F];\n    output += '==';\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + (uint8[len - 1]);\n    output += lookup[tmp >> 10];\n    output += lookup[(tmp >> 4) & 0x3F];\n    output += lookup[(tmp << 2) & 0x3F];\n    output += '=';\n  }\n\n  parts.push(output);\n\n  return parts.join('')\n}\n\nfunction read (buffer, offset, isLE, mLen, nBytes) {\n  var e, m;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var nBits = -7;\n  var i = isLE ? (nBytes - 1) : 0;\n  var d = isLE ? -1 : 1;\n  var s = buffer[offset + i];\n\n  i += d;\n\n  e = s & ((1 << (-nBits)) - 1);\n  s >>= (-nBits);\n  nBits += eLen;\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1);\n  e >>= (-nBits);\n  nBits += mLen;\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen);\n    e = e - eBias;\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nfunction write (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0);\n  var i = isLE ? 0 : (nBytes - 1);\n  var d = isLE ? 1 : -1;\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0;\n\n  value = Math.abs(value);\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0;\n    e = eMax;\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2);\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * Math.pow(2, 1 - eBias);\n    }\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n      e = 0;\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m;\n  eLen += mLen;\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128;\n}\n\nvar toString = {}.toString;\n\nvar isArray$4 = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n\nvar INSPECT_MAX_BYTES = 50;\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer$1.TYPED_ARRAY_SUPPORT = global$1.TYPED_ARRAY_SUPPORT !== undefined\n  ? global$1.TYPED_ARRAY_SUPPORT\n  : true;\n\nfunction kMaxLength () {\n  return Buffer$1.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer$1.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length);\n    that.__proto__ = Buffer$1.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer$1(length);\n    }\n    that.length = length;\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer$1 (arg, encodingOrOffset, length) {\n  if (!Buffer$1.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer$1)) {\n    return new Buffer$1(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer$1.poolSize = 8192; // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer$1._augment = function (arr) {\n  arr.__proto__ = Buffer$1.prototype;\n  return arr\n};\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer$1.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n};\n\nif (Buffer$1.TYPED_ARRAY_SUPPORT) {\n  Buffer$1.prototype.__proto__ = Uint8Array.prototype;\n  Buffer$1.__proto__ = Uint8Array;\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size);\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer$1.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n};\n\nfunction allocUnsafe (that, size) {\n  assertSize(size);\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0);\n  if (!Buffer$1.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0;\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer$1.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n};\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer$1.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n};\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8';\n  }\n\n  if (!Buffer$1.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0;\n  that = createBuffer(that, length);\n\n  var actual = that.write(string, encoding);\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual);\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0;\n  that = createBuffer(that, length);\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255;\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength; // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array);\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset);\n  } else {\n    array = new Uint8Array(array, byteOffset, length);\n  }\n\n  if (Buffer$1.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array;\n    that.__proto__ = Buffer$1.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array);\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (internalIsBuffer(obj)) {\n    var len = checked(obj.length) | 0;\n    that = createBuffer(that, len);\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len);\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray$4(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\nBuffer$1.isBuffer = isBuffer;\nfunction internalIsBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer$1.compare = function compare (a, b) {\n  if (!internalIsBuffer(a) || !internalIsBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n};\n\nBuffer$1.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n};\n\nBuffer$1.concat = function concat (list, length) {\n  if (!isArray$4(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer$1.alloc(0)\n  }\n\n  var i;\n  if (length === undefined) {\n    length = 0;\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length;\n    }\n  }\n\n  var buffer = Buffer$1.allocUnsafe(length);\n  var pos = 0;\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i];\n    if (!internalIsBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos);\n    pos += buf.length;\n  }\n  return buffer\n};\n\nfunction byteLength (string, encoding) {\n  if (internalIsBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string;\n  }\n\n  var len = string.length;\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false;\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n}\nBuffer$1.byteLength = byteLength;\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false;\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0;\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length;\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0;\n  start >>>= 0;\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8';\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase();\n        loweredCase = true;\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer$1.prototype._isBuffer = true;\n\nfunction swap (b, n, m) {\n  var i = b[n];\n  b[n] = b[m];\n  b[m] = i;\n}\n\nBuffer$1.prototype.swap16 = function swap16 () {\n  var len = this.length;\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1);\n  }\n  return this\n};\n\nBuffer$1.prototype.swap32 = function swap32 () {\n  var len = this.length;\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3);\n    swap(this, i + 1, i + 2);\n  }\n  return this\n};\n\nBuffer$1.prototype.swap64 = function swap64 () {\n  var len = this.length;\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7);\n    swap(this, i + 1, i + 6);\n    swap(this, i + 2, i + 5);\n    swap(this, i + 3, i + 4);\n  }\n  return this\n};\n\nBuffer$1.prototype.toString = function toString () {\n  var length = this.length | 0;\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n};\n\nBuffer$1.prototype.equals = function equals (b) {\n  if (!internalIsBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer$1.compare(this, b) === 0\n};\n\nBuffer$1.prototype.inspect = function inspect () {\n  var str = '';\n  var max = INSPECT_MAX_BYTES;\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ');\n    if (this.length > max) str += ' ... ';\n  }\n  return '<Buffer ' + str + '>'\n};\n\nBuffer$1.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!internalIsBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0;\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0;\n  }\n  if (thisStart === undefined) {\n    thisStart = 0;\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length;\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0;\n  end >>>= 0;\n  thisStart >>>= 0;\n  thisEnd >>>= 0;\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart;\n  var y = end - start;\n  var len = Math.min(x, y);\n\n  var thisCopy = this.slice(thisStart, thisEnd);\n  var targetCopy = target.slice(start, end);\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i];\n      y = targetCopy[i];\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n};\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset;\n    byteOffset = 0;\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff;\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000;\n  }\n  byteOffset = +byteOffset;  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1);\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset;\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1;\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0;\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer$1.from(val, encoding);\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (internalIsBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF; // Search for a byte value [0-255]\n    if (Buffer$1.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1;\n  var arrLength = arr.length;\n  var valLength = val.length;\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase();\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2;\n      arrLength /= 2;\n      valLength /= 2;\n      byteOffset /= 2;\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i;\n  if (dir) {\n    var foundIndex = -1;\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i;\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex;\n        foundIndex = -1;\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength;\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true;\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false;\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer$1.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n};\n\nBuffer$1.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n};\n\nBuffer$1.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n};\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0;\n  var remaining = buf.length - offset;\n  if (!length) {\n    length = remaining;\n  } else {\n    length = Number(length);\n    if (length > remaining) {\n      length = remaining;\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length;\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2;\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16);\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed;\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer$1.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8';\n    length = this.length;\n    offset = 0;\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset;\n    length = this.length;\n    offset = 0;\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0;\n    if (isFinite(length)) {\n      length = length | 0;\n      if (encoding === undefined) encoding = 'utf8';\n    } else {\n      encoding = length;\n      length = undefined;\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset;\n  if (length === undefined || length > remaining) length = remaining;\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8';\n\n  var loweredCase = false;\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n};\n\nBuffer$1.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n};\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return fromByteArray(buf)\n  } else {\n    return fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end);\n  var res = [];\n\n  var i = start;\n  while (i < end) {\n    var firstByte = buf[i];\n    var codePoint = null;\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1;\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint;\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte;\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1];\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F);\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint;\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F);\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint;\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n          fourthByte = buf[i + 3];\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F);\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint;\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD;\n      bytesPerSequence = 1;\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000;\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800);\n      codePoint = 0xDC00 | codePoint & 0x3FF;\n    }\n\n    res.push(codePoint);\n    i += bytesPerSequence;\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000;\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length;\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = '';\n  var i = 0;\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    );\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F);\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i]);\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length;\n\n  if (!start || start < 0) start = 0;\n  if (!end || end < 0 || end > len) end = len;\n\n  var out = '';\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i]);\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end);\n  var res = '';\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256);\n  }\n  return res\n}\n\nBuffer$1.prototype.slice = function slice (start, end) {\n  var len = this.length;\n  start = ~~start;\n  end = end === undefined ? len : ~~end;\n\n  if (start < 0) {\n    start += len;\n    if (start < 0) start = 0;\n  } else if (start > len) {\n    start = len;\n  }\n\n  if (end < 0) {\n    end += len;\n    if (end < 0) end = 0;\n  } else if (end > len) {\n    end = len;\n  }\n\n  if (end < start) end = start;\n\n  var newBuf;\n  if (Buffer$1.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end);\n    newBuf.__proto__ = Buffer$1.prototype;\n  } else {\n    var sliceLen = end - start;\n    newBuf = new Buffer$1(sliceLen, undefined);\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start];\n    }\n  }\n\n  return newBuf\n};\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer$1.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n\n  return val\n};\n\nBuffer$1.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length);\n  }\n\n  var val = this[offset + --byteLength];\n  var mul = 1;\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul;\n  }\n\n  return val\n};\n\nBuffer$1.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  return this[offset]\n};\n\nBuffer$1.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return this[offset] | (this[offset + 1] << 8)\n};\n\nBuffer$1.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return (this[offset] << 8) | this[offset + 1]\n};\n\nBuffer$1.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n};\n\nBuffer$1.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n};\n\nBuffer$1.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n  mul *= 0x80;\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n\n  return val\n};\n\nBuffer$1.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n  var i = byteLength;\n  var mul = 1;\n  var val = this[offset + --i];\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul;\n  }\n  mul *= 0x80;\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n\n  return val\n};\n\nBuffer$1.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n};\n\nBuffer$1.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset] | (this[offset + 1] << 8);\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n};\n\nBuffer$1.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset + 1] | (this[offset] << 8);\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n};\n\nBuffer$1.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n};\n\nBuffer$1.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n};\n\nBuffer$1.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return read(this, offset, true, 23, 4)\n};\n\nBuffer$1.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return read(this, offset, false, 23, 4)\n};\n\nBuffer$1.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return read(this, offset, true, 52, 8)\n};\n\nBuffer$1.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return read(this, offset, false, 52, 8)\n};\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!internalIsBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer$1.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var mul = 1;\n  var i = 0;\n  this[offset] = value & 0xFF;\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF;\n  }\n\n  return offset + byteLength\n};\n\nBuffer$1.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  this[offset + i] = value & 0xFF;\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF;\n  }\n\n  return offset + byteLength\n};\n\nBuffer$1.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0);\n  if (!Buffer$1.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  this[offset] = (value & 0xff);\n  return offset + 1\n};\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1;\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8;\n  }\n}\n\nBuffer$1.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n  if (Buffer$1.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff);\n    this[offset + 1] = (value >>> 8);\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n  return offset + 2\n};\n\nBuffer$1.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n  if (Buffer$1.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8);\n    this[offset + 1] = (value & 0xff);\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n  return offset + 2\n};\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1;\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff;\n  }\n}\n\nBuffer$1.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n  if (Buffer$1.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24);\n    this[offset + 2] = (value >>> 16);\n    this[offset + 1] = (value >>> 8);\n    this[offset] = (value & 0xff);\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n  return offset + 4\n};\n\nBuffer$1.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n  if (Buffer$1.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24);\n    this[offset + 1] = (value >>> 16);\n    this[offset + 2] = (value >>> 8);\n    this[offset + 3] = (value & 0xff);\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n  return offset + 4\n};\n\nBuffer$1.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = 0;\n  var mul = 1;\n  var sub = 0;\n  this[offset] = value & 0xFF;\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1;\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength\n};\n\nBuffer$1.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  var sub = 0;\n  this[offset + i] = value & 0xFF;\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1;\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength\n};\n\nBuffer$1.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80);\n  if (!Buffer$1.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  if (value < 0) value = 0xff + value + 1;\n  this[offset] = (value & 0xff);\n  return offset + 1\n};\n\nBuffer$1.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n  if (Buffer$1.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff);\n    this[offset + 1] = (value >>> 8);\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n  return offset + 2\n};\n\nBuffer$1.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n  if (Buffer$1.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8);\n    this[offset + 1] = (value & 0xff);\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n  return offset + 2\n};\n\nBuffer$1.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n  if (Buffer$1.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff);\n    this[offset + 1] = (value >>> 8);\n    this[offset + 2] = (value >>> 16);\n    this[offset + 3] = (value >>> 24);\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n  return offset + 4\n};\n\nBuffer$1.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n  if (value < 0) value = 0xffffffff + value + 1;\n  if (Buffer$1.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24);\n    this[offset + 1] = (value >>> 16);\n    this[offset + 2] = (value >>> 8);\n    this[offset + 3] = (value & 0xff);\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n  return offset + 4\n};\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4);\n  }\n  write(buf, value, offset, littleEndian, 23, 4);\n  return offset + 4\n}\n\nBuffer$1.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n};\n\nBuffer$1.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n};\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8);\n  }\n  write(buf, value, offset, littleEndian, 52, 8);\n  return offset + 8\n}\n\nBuffer$1.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n};\n\nBuffer$1.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n};\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer$1.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0;\n  if (!end && end !== 0) end = this.length;\n  if (targetStart >= target.length) targetStart = target.length;\n  if (!targetStart) targetStart = 0;\n  if (end > 0 && end < start) end = start;\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length;\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start;\n  }\n\n  var len = end - start;\n  var i;\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else if (len < 1000 || !Buffer$1.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    );\n  }\n\n  return len\n};\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer$1.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start;\n      start = 0;\n      end = this.length;\n    } else if (typeof end === 'string') {\n      encoding = end;\n      end = this.length;\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0);\n      if (code < 256) {\n        val = code;\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer$1.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255;\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0;\n  end = end === undefined ? this.length : end >>> 0;\n\n  if (!val) val = 0;\n\n  var i;\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val;\n    }\n  } else {\n    var bytes = internalIsBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer$1(val, encoding).toString());\n    var len = bytes.length;\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len];\n    }\n  }\n\n  return this\n};\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g;\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '');\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '=';\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity;\n  var codePoint;\n  var length = string.length;\n  var leadSurrogate = null;\n  var bytes = [];\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i);\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint;\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n        leadSurrogate = codePoint;\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000;\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n    }\n\n    leadSurrogate = null;\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint);\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      );\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      );\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      );\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = [];\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF);\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo;\n  var byteArray = [];\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i);\n    hi = c >> 8;\n    lo = c % 256;\n    byteArray.push(lo);\n    byteArray.push(hi);\n  }\n\n  return byteArray\n}\n\n\nfunction base64ToBytes (str) {\n  return toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i];\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n\n\n// the following is from is-buffer, also by Feross Aboukhadijeh and with same lisence\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nfunction isBuffer(obj) {\n  return obj != null && (!!obj._isBuffer || isFastBuffer(obj) || isSlowBuffer(obj))\n}\n\nfunction isFastBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isFastBuffer(obj.slice(0, 0))\n}\n\nvar sax$1 = {};\n\nvar domain;\n\n// This constructor is used to store event handlers. Instantiating this is\n// faster than explicitly calling `Object.create(null)` to get a \"clean\" empty\n// object (tested with v8 v4.9).\nfunction EventHandlers() {}\nEventHandlers.prototype = Object.create(null);\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\n\n// nodejs oddity\n// require('events') === require('events').EventEmitter\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.usingDomains = false;\n\nEventEmitter.prototype.domain = undefined;\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\nEventEmitter.init = function() {\n  this.domain = null;\n  if (EventEmitter.usingDomains) {\n    // if there is an active domain, then attach to it.\n    if (domain.active ) ;\n  }\n\n  if (!this._events || this._events === Object.getPrototypeOf(this)._events) {\n    this._events = new EventHandlers();\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || isNaN(n))\n    throw new TypeError('\"n\" argument must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\n// These standalone emit* functions are used to optimize calling of event\n// handlers for fast cases because emit() itself often has a variable number of\n// arguments and can be deoptimized because of that. These functions always have\n// the same number of arguments and thus do not get deoptimized, so the code\n// inside them can execute faster.\nfunction emitNone(handler, isFn, self) {\n  if (isFn)\n    handler.call(self);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self);\n  }\n}\nfunction emitOne(handler, isFn, self, arg1) {\n  if (isFn)\n    handler.call(self, arg1);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1);\n  }\n}\nfunction emitTwo(handler, isFn, self, arg1, arg2) {\n  if (isFn)\n    handler.call(self, arg1, arg2);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2);\n  }\n}\nfunction emitThree(handler, isFn, self, arg1, arg2, arg3) {\n  if (isFn)\n    handler.call(self, arg1, arg2, arg3);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2, arg3);\n  }\n}\n\nfunction emitMany(handler, isFn, self, args) {\n  if (isFn)\n    handler.apply(self, args);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].apply(self, args);\n  }\n}\n\nEventEmitter.prototype.emit = function emit(type) {\n  var er, handler, len, args, i, events, domain;\n  var doError = (type === 'error');\n\n  events = this._events;\n  if (events)\n    doError = (doError && events.error == null);\n  else if (!doError)\n    return false;\n\n  domain = this.domain;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    er = arguments[1];\n    if (domain) {\n      if (!er)\n        er = new Error('Uncaught, unspecified \"error\" event');\n      er.domainEmitter = this;\n      er.domain = domain;\n      er.domainThrown = false;\n      domain.emit('error', er);\n    } else if (er instanceof Error) {\n      throw er; // Unhandled 'error' event\n    } else {\n      // At least give some kind of context to the user\n      var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n      err.context = er;\n      throw err;\n    }\n    return false;\n  }\n\n  handler = events[type];\n\n  if (!handler)\n    return false;\n\n  var isFn = typeof handler === 'function';\n  len = arguments.length;\n  switch (len) {\n    // fast cases\n    case 1:\n      emitNone(handler, isFn, this);\n      break;\n    case 2:\n      emitOne(handler, isFn, this, arguments[1]);\n      break;\n    case 3:\n      emitTwo(handler, isFn, this, arguments[1], arguments[2]);\n      break;\n    case 4:\n      emitThree(handler, isFn, this, arguments[1], arguments[2], arguments[3]);\n      break;\n    // slower\n    default:\n      args = new Array(len - 1);\n      for (i = 1; i < len; i++)\n        args[i - 1] = arguments[i];\n      emitMany(handler, isFn, this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n\n  events = target._events;\n  if (!events) {\n    events = target._events = new EventHandlers();\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (!existing) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] = prepend ? [listener, existing] :\n                                          [existing, listener];\n    } else {\n      // If we've already got an array, just append.\n      if (prepend) {\n        existing.unshift(listener);\n      } else {\n        existing.push(listener);\n      }\n    }\n\n    // Check for listener leak\n    if (!existing.warned) {\n      m = $getMaxListeners(target);\n      if (m && m > 0 && existing.length > m) {\n        existing.warned = true;\n        var w = new Error('Possible EventEmitter memory leak detected. ' +\n                            existing.length + ' ' + type + ' listeners added. ' +\n                            'Use emitter.setMaxListeners() to increase limit');\n        w.name = 'MaxListenersExceededWarning';\n        w.emitter = target;\n        w.type = type;\n        w.count = existing.length;\n        emitWarning(w);\n      }\n    }\n  }\n\n  return target;\n}\nfunction emitWarning(e) {\n  typeof console.warn === 'function' ? console.warn(e) : console.log(e);\n}\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction _onceWrap(target, type, listener) {\n  var fired = false;\n  function g() {\n    target.removeListener(type, g);\n    if (!fired) {\n      fired = true;\n      listener.apply(target, arguments);\n    }\n  }\n  g.listener = listener;\n  return g;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      list = events[type];\n      if (!list)\n        return this;\n\n      if (list === listener || (list.listener && list.listener === listener)) {\n        if (--this._eventsCount === 0)\n          this._events = new EventHandlers();\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length; i-- > 0;) {\n          if (list[i] === listener ||\n              (list[i].listener && list[i].listener === listener)) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (list.length === 1) {\n          list[0] = undefined;\n          if (--this._eventsCount === 0) {\n            this._events = new EventHandlers();\n            return this;\n          } else {\n            delete events[type];\n          }\n        } else {\n          spliceOne(list, position);\n        }\n\n        if (events.removeListener)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events;\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (!events.removeListener) {\n        if (arguments.length === 0) {\n          this._events = new EventHandlers();\n          this._eventsCount = 0;\n        } else if (events[type]) {\n          if (--this._eventsCount === 0)\n            this._events = new EventHandlers();\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        for (var i = 0, key; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = new EventHandlers();\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners) {\n        // LIFO order\n        do {\n          this.removeListener(type, listeners[listeners.length - 1]);\n        } while (listeners[0]);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  var evlistener;\n  var ret;\n  var events = this._events;\n\n  if (!events)\n    ret = [];\n  else {\n    evlistener = events[type];\n    if (!evlistener)\n      ret = [];\n    else if (typeof evlistener === 'function')\n      ret = [evlistener.listener || evlistener];\n    else\n      ret = unwrapListeners(evlistener);\n  }\n\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount$1.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount$1;\nfunction listenerCount$1(type) {\n  var events = this._events;\n\n  if (events) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? Reflect.ownKeys(this._events) : [];\n};\n\n// About 1.5x faster than the two-arg version of Array#splice().\nfunction spliceOne(list, index) {\n  for (var i = index, k = i + 1, n = list.length; k < n; i += 1, k += 1)\n    list[i] = list[k];\n  list.pop();\n}\n\nfunction arrayClone(arr, i) {\n  var copy = new Array(i);\n  while (i--)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\n// shim for using process in browser\n// based off https://github.com/defunctzombie/node-process/blob/master/browser.js\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\nvar cachedSetTimeout = defaultSetTimout;\nvar cachedClearTimeout = defaultClearTimeout;\nif (typeof global$1.setTimeout === 'function') {\n    cachedSetTimeout = setTimeout;\n}\nif (typeof global$1.clearTimeout === 'function') {\n    cachedClearTimeout = clearTimeout;\n}\n\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\nfunction nextTick(fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n}\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nvar title = 'browser';\nvar platform = 'browser';\nvar browser = true;\nvar env = {};\nvar argv = [];\nvar version = ''; // empty string to avoid regexp issues\nvar versions = {};\nvar release = {};\nvar config = {};\n\nfunction noop() {}\n\nvar on = noop;\nvar addListener = noop;\nvar once = noop;\nvar off = noop;\nvar removeListener = noop;\nvar removeAllListeners = noop;\nvar emit = noop;\n\nfunction binding(name) {\n    throw new Error('process.binding is not supported');\n}\n\nfunction cwd () { return '/' }\nfunction chdir (dir) {\n    throw new Error('process.chdir is not supported');\n}function umask() { return 0; }\n\n// from https://github.com/kumavis/browser-process-hrtime/blob/master/index.js\nvar performance = global$1.performance || {};\nvar performanceNow =\n  performance.now        ||\n  performance.mozNow     ||\n  performance.msNow      ||\n  performance.oNow       ||\n  performance.webkitNow  ||\n  function(){ return (new Date()).getTime() };\n\n// generate timestamp or delta\n// see http://nodejs.org/api/process.html#process_process_hrtime\nfunction hrtime(previousTimestamp){\n  var clocktime = performanceNow.call(performance)*1e-3;\n  var seconds = Math.floor(clocktime);\n  var nanoseconds = Math.floor((clocktime%1)*1e9);\n  if (previousTimestamp) {\n    seconds = seconds - previousTimestamp[0];\n    nanoseconds = nanoseconds - previousTimestamp[1];\n    if (nanoseconds<0) {\n      seconds--;\n      nanoseconds += 1e9;\n    }\n  }\n  return [seconds,nanoseconds]\n}\n\nvar startTime = new Date();\nfunction uptime() {\n  var currentTime = new Date();\n  var dif = currentTime - startTime;\n  return dif / 1000;\n}\n\nvar browser$1 = {\n  nextTick: nextTick,\n  title: title,\n  browser: browser,\n  env: env,\n  argv: argv,\n  version: version,\n  versions: versions,\n  on: on,\n  addListener: addListener,\n  once: once,\n  off: off,\n  removeListener: removeListener,\n  removeAllListeners: removeAllListeners,\n  emit: emit,\n  binding: binding,\n  cwd: cwd,\n  chdir: chdir,\n  umask: umask,\n  hrtime: hrtime,\n  platform: platform,\n  release: release,\n  config: config,\n  uptime: uptime\n};\n\nvar process = browser$1;\n\nvar inherits;\nif (typeof Object.create === 'function'){\n  inherits = function inherits(ctor, superCtor) {\n    // implementation from standard node.js 'util' module\n    ctor.super_ = superCtor;\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  inherits = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor;\n    var TempCtor = function () {};\n    TempCtor.prototype = superCtor.prototype;\n    ctor.prototype = new TempCtor();\n    ctor.prototype.constructor = ctor;\n  };\n}\nvar inherits$1 = inherits;\n\nvar formatRegExp = /%[sdj%]/g;\nfunction format(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n}\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nfunction deprecate(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global$1.process)) {\n    return function() {\n      return deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n}\n\nvar debugs = {};\nvar debugEnviron;\nfunction debuglog(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = 0;\n      debugs[set] = function() {\n        var msg = format.apply(null, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n}\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    _extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray$3(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var length = output.reduce(function(prev, cur) {\n    if (cur.indexOf('\\n') >= 0) ;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray$3(ar) {\n  return Array.isArray(ar);\n}\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\n\nfunction isNull(arg) {\n  return arg === null;\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\nfunction _extend(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n}\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nfunction BufferList() {\n  this.head = null;\n  this.tail = null;\n  this.length = 0;\n}\n\nBufferList.prototype.push = function (v) {\n  var entry = { data: v, next: null };\n  if (this.length > 0) this.tail.next = entry;else this.head = entry;\n  this.tail = entry;\n  ++this.length;\n};\n\nBufferList.prototype.unshift = function (v) {\n  var entry = { data: v, next: this.head };\n  if (this.length === 0) this.tail = entry;\n  this.head = entry;\n  ++this.length;\n};\n\nBufferList.prototype.shift = function () {\n  if (this.length === 0) return;\n  var ret = this.head.data;\n  if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n  --this.length;\n  return ret;\n};\n\nBufferList.prototype.clear = function () {\n  this.head = this.tail = null;\n  this.length = 0;\n};\n\nBufferList.prototype.join = function (s) {\n  if (this.length === 0) return '';\n  var p = this.head;\n  var ret = '' + p.data;\n  while (p = p.next) {\n    ret += s + p.data;\n  }return ret;\n};\n\nBufferList.prototype.concat = function (n) {\n  if (this.length === 0) return Buffer$1.alloc(0);\n  if (this.length === 1) return this.head.data;\n  var ret = Buffer$1.allocUnsafe(n >>> 0);\n  var p = this.head;\n  var i = 0;\n  while (p) {\n    p.data.copy(ret, i);\n    i += p.data.length;\n    p = p.next;\n  }\n  return ret;\n};\n\n// Copyright Joyent, Inc. and other Node contributors.\nvar isBufferEncoding = Buffer$1.isEncoding\n  || function(encoding) {\n       switch (encoding && encoding.toLowerCase()) {\n         case 'hex': case 'utf8': case 'utf-8': case 'ascii': case 'binary': case 'base64': case 'ucs2': case 'ucs-2': case 'utf16le': case 'utf-16le': case 'raw': return true;\n         default: return false;\n       }\n     };\n\n\nfunction assertEncoding(encoding) {\n  if (encoding && !isBufferEncoding(encoding)) {\n    throw new Error('Unknown encoding: ' + encoding);\n  }\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters. CESU-8 is handled as part of the UTF-8 encoding.\n//\n// @TODO Handling all encodings inside a single object makes it very difficult\n// to reason about this code, so it should be split up in the future.\n// @TODO There should be a utf8-strict encoding that rejects invalid UTF-8 code\n// points as used by CESU-8.\nfunction StringDecoder(encoding) {\n  this.encoding = (encoding || 'utf8').toLowerCase().replace(/[-_]/, '');\n  assertEncoding(encoding);\n  switch (this.encoding) {\n    case 'utf8':\n      // CESU-8 represents each of Surrogate Pair by 3-bytes\n      this.surrogateSize = 3;\n      break;\n    case 'ucs2':\n    case 'utf16le':\n      // UTF-16 represents each of Surrogate Pair by 2-bytes\n      this.surrogateSize = 2;\n      this.detectIncompleteChar = utf16DetectIncompleteChar;\n      break;\n    case 'base64':\n      // Base-64 stores 3 bytes in 4 chars, and pads the remainder.\n      this.surrogateSize = 3;\n      this.detectIncompleteChar = base64DetectIncompleteChar;\n      break;\n    default:\n      this.write = passThroughWrite;\n      return;\n  }\n\n  // Enough space to store all bytes of a single character. UTF-8 needs 4\n  // bytes, but CESU-8 may require up to 6 (3 bytes per surrogate).\n  this.charBuffer = new Buffer$1(6);\n  // Number of bytes received for the current incomplete multi-byte character.\n  this.charReceived = 0;\n  // Number of bytes expected for the current incomplete multi-byte character.\n  this.charLength = 0;\n}\n\n// write decodes the given buffer and returns it as JS string that is\n// guaranteed to not contain any partial multi-byte characters. Any partial\n// character found at the end of the buffer is buffered up, and will be\n// returned when calling write again with the remaining bytes.\n//\n// Note: Converting a Buffer containing an orphan surrogate to a String\n// currently works, but converting a String to a Buffer (via `new Buffer`, or\n// Buffer#write) will replace incomplete surrogates with the unicode\n// replacement character. See https://codereview.chromium.org/121173009/ .\nStringDecoder.prototype.write = function(buffer) {\n  var charStr = '';\n  // if our last write ended with an incomplete multibyte character\n  while (this.charLength) {\n    // determine how many remaining bytes this buffer has to offer for this char\n    var available = (buffer.length >= this.charLength - this.charReceived) ?\n        this.charLength - this.charReceived :\n        buffer.length;\n\n    // add the new bytes to the char buffer\n    buffer.copy(this.charBuffer, this.charReceived, 0, available);\n    this.charReceived += available;\n\n    if (this.charReceived < this.charLength) {\n      // still not enough chars in this buffer? wait for more ...\n      return '';\n    }\n\n    // remove bytes belonging to the current character from the buffer\n    buffer = buffer.slice(available, buffer.length);\n\n    // get the character that was split\n    charStr = this.charBuffer.slice(0, this.charLength).toString(this.encoding);\n\n    // CESU-8: lead surrogate (D800-DBFF) is also the incomplete character\n    var charCode = charStr.charCodeAt(charStr.length - 1);\n    if (charCode >= 0xD800 && charCode <= 0xDBFF) {\n      this.charLength += this.surrogateSize;\n      charStr = '';\n      continue;\n    }\n    this.charReceived = this.charLength = 0;\n\n    // if there are no more bytes in this buffer, just emit our char\n    if (buffer.length === 0) {\n      return charStr;\n    }\n    break;\n  }\n\n  // determine and set charLength / charReceived\n  this.detectIncompleteChar(buffer);\n\n  var end = buffer.length;\n  if (this.charLength) {\n    // buffer the incomplete character bytes we got\n    buffer.copy(this.charBuffer, 0, buffer.length - this.charReceived, end);\n    end -= this.charReceived;\n  }\n\n  charStr += buffer.toString(this.encoding, 0, end);\n\n  var end = charStr.length - 1;\n  var charCode = charStr.charCodeAt(end);\n  // CESU-8: lead surrogate (D800-DBFF) is also the incomplete character\n  if (charCode >= 0xD800 && charCode <= 0xDBFF) {\n    var size = this.surrogateSize;\n    this.charLength += size;\n    this.charReceived += size;\n    this.charBuffer.copy(this.charBuffer, size, 0, size);\n    buffer.copy(this.charBuffer, 0, 0, size);\n    return charStr.substring(0, end);\n  }\n\n  // or just emit the charStr\n  return charStr;\n};\n\n// detectIncompleteChar determines if there is an incomplete UTF-8 character at\n// the end of the given buffer. If so, it sets this.charLength to the byte\n// length that character, and sets this.charReceived to the number of bytes\n// that are available for this character.\nStringDecoder.prototype.detectIncompleteChar = function(buffer) {\n  // determine how many bytes we have to check at the end of this buffer\n  var i = (buffer.length >= 3) ? 3 : buffer.length;\n\n  // Figure out if one of the last i bytes of our buffer announces an\n  // incomplete char.\n  for (; i > 0; i--) {\n    var c = buffer[buffer.length - i];\n\n    // See http://en.wikipedia.org/wiki/UTF-8#Description\n\n    // 110XXXXX\n    if (i == 1 && c >> 5 == 0x06) {\n      this.charLength = 2;\n      break;\n    }\n\n    // 1110XXXX\n    if (i <= 2 && c >> 4 == 0x0E) {\n      this.charLength = 3;\n      break;\n    }\n\n    // 11110XXX\n    if (i <= 3 && c >> 3 == 0x1E) {\n      this.charLength = 4;\n      break;\n    }\n  }\n  this.charReceived = i;\n};\n\nStringDecoder.prototype.end = function(buffer) {\n  var res = '';\n  if (buffer && buffer.length)\n    res = this.write(buffer);\n\n  if (this.charReceived) {\n    var cr = this.charReceived;\n    var buf = this.charBuffer;\n    var enc = this.encoding;\n    res += buf.slice(0, cr).toString(enc);\n  }\n\n  return res;\n};\n\nfunction passThroughWrite(buffer) {\n  return buffer.toString(this.encoding);\n}\n\nfunction utf16DetectIncompleteChar(buffer) {\n  this.charReceived = buffer.length % 2;\n  this.charLength = this.charReceived ? 2 : 0;\n}\n\nfunction base64DetectIncompleteChar(buffer) {\n  this.charReceived = buffer.length % 3;\n  this.charLength = this.charReceived ? 3 : 0;\n}\n\nvar stringDecoder = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tStringDecoder: StringDecoder\n});\n\nReadable.ReadableState = ReadableState;\n\nvar debug = debuglog('stream');\ninherits$1(Readable, EventEmitter);\n\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') {\n    return emitter.prependListener(event, fn);\n  } else {\n    // This is a hack to make sure that our error handler is attached before any\n    // userland ones.  NEVER DO THIS. This is here only because this code needs\n    // to continue to work with older versions of Node.js that do not include\n    // the prependListener() method. The goal is to eventually remove this hack.\n    if (!emitter._events || !emitter._events[event])\n      emitter.on(event, fn);\n    else if (Array.isArray(emitter._events[event]))\n      emitter._events[event].unshift(fn);\n    else\n      emitter._events[event] = [fn, emitter._events[event]];\n  }\n}\nfunction listenerCount (emitter, type) {\n  return emitter.listeners(type).length;\n}\nfunction ReadableState(options, stream) {\n\n  options = options || {};\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n\n  if (stream instanceof Duplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  var hwm = options.highWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n  this.highWaterMark = hwm || hwm === 0 ? hwm : defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = ~ ~this.highWaterMark;\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // when piping, we only care about 'readable' events that happen\n  // after read()ing all the bytes and not getting any pushback.\n  this.ranOut = false;\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\nfunction Readable(options) {\n\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  this._readableState = new ReadableState(options, this);\n\n  // legacy\n  this.readable = true;\n\n  if (options && typeof options.read === 'function') this._read = options.read;\n\n  EventEmitter.call(this);\n}\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n\n  if (!state.objectMode && typeof chunk === 'string') {\n    encoding = encoding || state.defaultEncoding;\n    if (encoding !== state.encoding) {\n      chunk = Buffer$1.from(chunk, encoding);\n      encoding = '';\n    }\n  }\n\n  return readableAddChunk(this, state, chunk, encoding, false);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  var state = this._readableState;\n  return readableAddChunk(this, state, chunk, '', true);\n};\n\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\nfunction readableAddChunk(stream, state, chunk, encoding, addToFront) {\n  var er = chunkInvalid(state, chunk);\n  if (er) {\n    stream.emit('error', er);\n  } else if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else if (state.objectMode || chunk && chunk.length > 0) {\n    if (state.ended && !addToFront) {\n      var e = new Error('stream.push() after EOF');\n      stream.emit('error', e);\n    } else if (state.endEmitted && addToFront) {\n      var _e = new Error('stream.unshift() after end event');\n      stream.emit('error', _e);\n    } else {\n      var skipAdd;\n      if (state.decoder && !addToFront && !encoding) {\n        chunk = state.decoder.write(chunk);\n        skipAdd = !state.objectMode && chunk.length === 0;\n      }\n\n      if (!addToFront) state.reading = false;\n\n      // Don't add to the buffer if we've decoded to an empty string chunk and\n      // we're not in object mode\n      if (!skipAdd) {\n        // if we want the data now, just emit it.\n        if (state.flowing && state.length === 0 && !state.sync) {\n          stream.emit('data', chunk);\n          stream.read(0);\n        } else {\n          // update the buffer info.\n          state.length += state.objectMode ? 1 : chunk.length;\n          if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n\n          if (state.needReadable) emitReadable(stream);\n        }\n      }\n\n      maybeReadMore(stream, state);\n    }\n  } else if (!addToFront) {\n    state.reading = false;\n  }\n\n  return needMoreData(state);\n}\n\n// if it's past the high water mark, we can push in some more.\n// Also, if we have no data yet, we can stand some\n// more bytes.  This is to work around cases where hwm=0,\n// such as the repl.  Also, if the push() triggered a\n// readable event, and the user called read(largeNumber) such that\n// needReadable was set, then we ought to push more, so that another\n// 'readable' event will be triggered.\nfunction needMoreData(state) {\n  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);\n}\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  this._readableState.decoder = new StringDecoder(enc);\n  this._readableState.encoding = enc;\n  return this;\n};\n\n// Don't raise the hwm > 8MB\nvar MAX_HWM = 0x800000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n\n  if (ret === null) {\n    state.needReadable = true;\n    n = 0;\n  } else {\n    state.length -= n;\n  }\n\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n\n  if (ret !== null) this.emit('data', ret);\n\n  return ret;\n};\n\nfunction chunkInvalid(state, chunk) {\n  var er = null;\n  if (!Buffer$1.isBuffer(chunk) && typeof chunk !== 'string' && chunk !== null && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  return er;\n}\n\nfunction onEofChunk(stream, state) {\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n\n  // emit 'readable' now to make sure it gets picked up.\n  emitReadable(stream);\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    if (state.sync) nextTick(emitReadable_, stream);else emitReadable_(stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  debug('emit readable');\n  stream.emit('readable');\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    nextTick(maybeReadMore_, stream, state);\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  var len = state.length;\n  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;else len = state.length;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  this.emit('error', new Error('not implemented'));\n};\n\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n\n  var doEnd = (!pipeOpts || pipeOpts.end !== false);\n\n  var endFn = doEnd ? onend : cleanup;\n  if (state.endEmitted) nextTick(endFn);else src.once('end', endFn);\n\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable) {\n    debug('onunpipe');\n    if (readable === src) {\n      cleanup();\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', cleanup);\n    src.removeListener('data', ondata);\n\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n\n  // If the user pushes more data while we're writing to dest then we'll end up\n  // in ondata again. However, we only want to increase awaitDrain once because\n  // dest will only emit one 'drain' event for the multiple writes.\n  // => Introduce a guard on increasing awaitDrain.\n  var increasedAwaitDrain = false;\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    increasedAwaitDrain = false;\n    var ret = dest.write(chunk);\n    if (false === ret && !increasedAwaitDrain) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', src._readableState.awaitDrain);\n        src._readableState.awaitDrain++;\n        increasedAwaitDrain = true;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (listenerCount(dest, 'error') === 0) dest.emit('error', er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function () {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && src.listeners('data').length) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var _i = 0; _i < len; _i++) {\n      dests[_i].emit('unpipe', this);\n    }return this;\n  }\n\n  // try to find the right one.\n  var i = indexOf(state.pipes, dest);\n  if (i === -1) return this;\n\n  state.pipes.splice(i, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n\n  dest.emit('unpipe', this);\n\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = EventEmitter.prototype.on.call(this, ev, fn);\n\n  if (ev === 'data') {\n    // Start flowing on next tick if stream isn't explicitly paused\n    if (this._readableState.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    var state = this._readableState;\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.emittedReadable = false;\n      if (!state.reading) {\n        nextTick(nReadingNextTick, this);\n      } else if (state.length) {\n        emitReadable(this);\n      }\n    }\n  }\n\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\n\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    state.flowing = true;\n    resume(this, state);\n  }\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    nextTick(resume_, stream, state);\n  }\n}\n\nfunction resume_(stream, state) {\n  if (!state.reading) {\n    debug('resume read 0');\n    stream.read(0);\n  }\n\n  state.resumeScheduled = false;\n  state.awaitDrain = 0;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\n\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (false !== this._readableState.flowing) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null) {}\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var state = this._readableState;\n  var paused = false;\n\n  var self = this;\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) self.push(chunk);\n    }\n\n    self.push(null);\n  });\n\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\n    var ret = self.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function (method) {\n        return function () {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  var events = ['error', 'close', 'destroy', 'pause', 'resume'];\n  forEach(events, function (ev) {\n    stream.on(ev, self.emit.bind(self, ev));\n  });\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  self._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return self;\n};\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = fromListPartial(n, state.buffer, state.decoder);\n  }\n\n  return ret;\n}\n\n// Extracts only enough buffered data to satisfy the amount requested.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromListPartial(n, list, hasStrings) {\n  var ret;\n  if (n < list.head.data.length) {\n    // slice is the same for buffers and strings\n    ret = list.head.data.slice(0, n);\n    list.head.data = list.head.data.slice(n);\n  } else if (n === list.head.data.length) {\n    // first chunk is a perfect match\n    ret = list.shift();\n  } else {\n    // result spans more than one buffer\n    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);\n  }\n  return ret;\n}\n\n// Copies a specified amount of characters from the list of buffered data\n// chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBufferString(n, list) {\n  var p = list.head;\n  var c = 1;\n  var ret = p.data;\n  n -= ret.length;\n  while (p = p.next) {\n    var str = p.data;\n    var nb = n > str.length ? str.length : n;\n    if (nb === str.length) ret += str;else ret += str.slice(0, n);\n    n -= nb;\n    if (n === 0) {\n      if (nb === str.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = str.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\n// Copies a specified amount of bytes from the list of buffered data chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBuffer(n, list) {\n  var ret = Buffer$1.allocUnsafe(n);\n  var p = list.head;\n  var c = 1;\n  p.data.copy(ret);\n  n -= p.data.length;\n  while (p = p.next) {\n    var buf = p.data;\n    var nb = n > buf.length ? buf.length : n;\n    buf.copy(ret, ret.length - n, 0, nb);\n    n -= nb;\n    if (n === 0) {\n      if (nb === buf.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = buf.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n\n  // If we get here before consuming all the bytes, then that is a\n  // bug in node.  Should never happen.\n  if (state.length > 0) throw new Error('\"endReadable()\" called on non-empty stream');\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    nextTick(endReadableNT, state, stream);\n  }\n}\n\nfunction endReadableNT(state, stream) {\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n  }\n}\n\nfunction forEach(xs, f) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    f(xs[i], i);\n  }\n}\n\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}\n\n// A bit simpler than readable streams.\nWritable.WritableState = WritableState;\ninherits$1(Writable, EventEmitter);\n\nfunction nop() {}\n\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\nfunction WritableState(options, stream) {\n  Object.defineProperty(this, 'buffer', {\n    get: deprecate(function () {\n      return this.getBuffer();\n    }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.')\n  });\n  options = options || {};\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n\n  if (stream instanceof Duplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  var hwm = options.highWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n  this.highWaterMark = hwm || hwm === 0 ? hwm : defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = ~ ~this.highWaterMark;\n\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\n\nWritableState.prototype.getBuffer = function writableStateGetBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\nfunction Writable(options) {\n\n  // Writable ctor is applied to Duplexes, though they're not\n  // instanceof Writable, they're instanceof Readable.\n  if (!(this instanceof Writable) && !(this instanceof Duplex)) return new Writable(options);\n\n  this._writableState = new WritableState(options, this);\n\n  // legacy.\n  this.writable = true;\n\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n\n    if (typeof options.writev === 'function') this._writev = options.writev;\n  }\n\n  EventEmitter.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  this.emit('error', new Error('Cannot pipe, not readable'));\n};\n\nfunction writeAfterEnd(stream, cb) {\n  var er = new Error('write after end');\n  // TODO: defer error events consistently everywhere, not just the cb\n  stream.emit('error', er);\n  nextTick(cb, er);\n}\n\n// If we get something that is not a buffer, string, null, or undefined,\n// and we're not in objectMode, then that's an error.\n// Otherwise stream chunks are all considered to be of length=1, and the\n// watermarks determine how many objects to keep in the buffer, rather than\n// how many bytes or characters.\nfunction validChunk(stream, state, chunk, cb) {\n  var valid = true;\n  var er = false;\n  // Always throw error if a null is written\n  // if we are not in object mode then throw\n  // if it is not a buffer, string, or undefined.\n  if (chunk === null) {\n    er = new TypeError('May not write null values to stream');\n  } else if (!Buffer$1.isBuffer(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  if (er) {\n    stream.emit('error', er);\n    nextTick(cb, er);\n    valid = false;\n  }\n  return valid;\n}\n\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (Buffer$1.isBuffer(chunk)) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n\n  if (typeof cb !== 'function') cb = nop;\n\n  if (state.ended) writeAfterEnd(this, cb);else if (validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, chunk, encoding, cb);\n  }\n\n  return ret;\n};\n\nWritable.prototype.cork = function () {\n  var state = this._writableState;\n\n  state.corked++;\n};\n\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n\n    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\n\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer$1.from(chunk, encoding);\n  }\n  return chunk;\n}\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, chunk, encoding, cb) {\n  chunk = decodeChunk(state, chunk, encoding);\n\n  if (Buffer$1.isBuffer(chunk)) encoding = 'buffer';\n  var len = state.objectMode ? 1 : chunk.length;\n\n  state.length += len;\n\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = new WriteReq(chunk, encoding, cb);\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n  if (sync) nextTick(cb, er);else cb(er);\n\n  stream._writableState.errorEmitted = true;\n  stream.emit('error', er);\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n\n  onwriteStateUpdate(state);\n\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state);\n\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      /*<replacement>*/\n        nextTick(afterWrite, stream, state, finished, cb);\n      /*</replacement>*/\n    } else {\n        afterWrite(stream, state, finished, cb);\n      }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n\n    var count = 0;\n    while (entry) {\n      buffer[count] = entry;\n      entry = entry.next;\n      count += 1;\n    }\n\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n\n  state.bufferedRequestCount = 0;\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new Error('not implemented'));\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending && !state.finished) endWritable(this, state, cb);\n};\n\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\n\nfunction prefinish(stream, state) {\n  if (!state.prefinished) {\n    state.prefinished = true;\n    stream.emit('prefinish');\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    if (state.pendingcb === 0) {\n      prefinish(stream, state);\n      state.finished = true;\n      stream.emit('finish');\n    } else {\n      prefinish(stream, state);\n    }\n  }\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) nextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n\n  this.next = null;\n  this.entry = null;\n\n  this.finish = function (err) {\n    var entry = _this.entry;\n    _this.entry = null;\n    while (entry) {\n      var cb = entry.callback;\n      state.pendingcb--;\n      cb(err);\n      entry = entry.next;\n    }\n    if (state.corkedRequestsFree) {\n      state.corkedRequestsFree.next = _this;\n    } else {\n      state.corkedRequestsFree = _this;\n    }\n  };\n}\n\ninherits$1(Duplex, Readable);\n\nvar keys = Object.keys(Writable.prototype);\nfor (var v = 0; v < keys.length; v++) {\n  var method = keys[v];\n  if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n}\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n\n  Readable.call(this, options);\n  Writable.call(this, options);\n\n  if (options && options.readable === false) this.readable = false;\n\n  if (options && options.writable === false) this.writable = false;\n\n  this.allowHalfOpen = true;\n  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;\n\n  this.once('end', onend);\n}\n\n// the no-half-open enforcer\nfunction onend() {\n  // if we allow half-open state, or if the writable side ended,\n  // then we're ok.\n  if (this.allowHalfOpen || this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  nextTick(onEndNT, this);\n}\n\nfunction onEndNT(self) {\n  self.end();\n}\n\n// a transform stream is a readable/writable stream where you do\ninherits$1(Transform, Duplex);\n\nfunction TransformState(stream) {\n  this.afterTransform = function (er, data) {\n    return afterTransform(stream, er, data);\n  };\n\n  this.needTransform = false;\n  this.transforming = false;\n  this.writecb = null;\n  this.writechunk = null;\n  this.writeencoding = null;\n}\n\nfunction afterTransform(stream, er, data) {\n  var ts = stream._transformState;\n  ts.transforming = false;\n\n  var cb = ts.writecb;\n\n  if (!cb) return stream.emit('error', new Error('no writecb in Transform class'));\n\n  ts.writechunk = null;\n  ts.writecb = null;\n\n  if (data !== null && data !== undefined) stream.push(data);\n\n  cb(er);\n\n  var rs = stream._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    stream._read(rs.highWaterMark);\n  }\n}\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n\n  Duplex.call(this, options);\n\n  this._transformState = new TransformState(this);\n\n  // when the writable side finishes, then flush out anything remaining.\n  var stream = this;\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  this.once('prefinish', function () {\n    if (typeof this._flush === 'function') this._flush(function (er) {\n      done(stream, er);\n    });else done(stream);\n  });\n}\n\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  throw new Error('Not implemented');\n};\n\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\nfunction done(stream, er) {\n  if (er) return stream.emit('error', er);\n\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  var ws = stream._writableState;\n  var ts = stream._transformState;\n\n  if (ws.length) throw new Error('Calling transform done when ws.length != 0');\n\n  if (ts.transforming) throw new Error('Calling transform done when still transforming');\n\n  return stream.push(null);\n}\n\ninherits$1(PassThrough, Transform);\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};\n\ninherits$1(Stream, EventEmitter);\nStream.Readable = Readable;\nStream.Writable = Writable;\nStream.Duplex = Duplex;\nStream.Transform = Transform;\nStream.PassThrough = PassThrough;\n\n// Backwards-compat with node 0.4.x\nStream.Stream = Stream;\n\n// old-style streams.  Note that the pipe method (the only relevant\n// part of this class) is overridden in the Readable class.\n\nfunction Stream() {\n  EventEmitter.call(this);\n}\n\nStream.prototype.pipe = function(dest, options) {\n  var source = this;\n\n  function ondata(chunk) {\n    if (dest.writable) {\n      if (false === dest.write(chunk) && source.pause) {\n        source.pause();\n      }\n    }\n  }\n\n  source.on('data', ondata);\n\n  function ondrain() {\n    if (source.readable && source.resume) {\n      source.resume();\n    }\n  }\n\n  dest.on('drain', ondrain);\n\n  // If the 'end' option is not supplied, dest.end() will be called when\n  // source gets the 'end' or 'close' events.  Only dest.end() once.\n  if (!dest._isStdio && (!options || options.end !== false)) {\n    source.on('end', onend);\n    source.on('close', onclose);\n  }\n\n  var didOnEnd = false;\n  function onend() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    dest.end();\n  }\n\n\n  function onclose() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    if (typeof dest.destroy === 'function') dest.destroy();\n  }\n\n  // don't leave dangling pipes when there are errors.\n  function onerror(er) {\n    cleanup();\n    if (EventEmitter.listenerCount(this, 'error') === 0) {\n      throw er; // Unhandled stream error in pipe.\n    }\n  }\n\n  source.on('error', onerror);\n  dest.on('error', onerror);\n\n  // remove all the event listeners that were added.\n  function cleanup() {\n    source.removeListener('data', ondata);\n    dest.removeListener('drain', ondrain);\n\n    source.removeListener('end', onend);\n    source.removeListener('close', onclose);\n\n    source.removeListener('error', onerror);\n    dest.removeListener('error', onerror);\n\n    source.removeListener('end', cleanup);\n    source.removeListener('close', cleanup);\n\n    dest.removeListener('close', cleanup);\n  }\n\n  source.on('end', cleanup);\n  source.on('close', cleanup);\n\n  dest.on('close', cleanup);\n\n  dest.emit('pipe', source);\n\n  // Allow for unix-like usage: A.pipe(B).pipe(C)\n  return dest;\n};\n\nvar stream = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\t'default': Stream,\n\tReadable: Readable,\n\tWritable: Writable,\n\tDuplex: Duplex,\n\tTransform: Transform,\n\tPassThrough: PassThrough,\n\tStream: Stream\n});\n\nvar require$$0 = /*@__PURE__*/getAugmentedNamespace(stream);\n\nvar require$$1 = /*@__PURE__*/getAugmentedNamespace(stringDecoder);\n\n(function (exports) {\n(function (sax) { // wrapper for non-node envs\n  sax.parser = function (strict, opt) { return new SAXParser(strict, opt) };\n  sax.SAXParser = SAXParser;\n  sax.SAXStream = SAXStream;\n  sax.createStream = createStream;\n\n  // When we pass the MAX_BUFFER_LENGTH position, start checking for buffer overruns.\n  // When we check, schedule the next check for MAX_BUFFER_LENGTH - (max(buffer lengths)),\n  // since that's the earliest that a buffer overrun could occur.  This way, checks are\n  // as rare as required, but as often as necessary to ensure never crossing this bound.\n  // Furthermore, buffers are only tested at most once per write(), so passing a very\n  // large string into write() might have undesirable effects, but this is manageable by\n  // the caller, so it is assumed to be safe.  Thus, a call to write() may, in the extreme\n  // edge case, result in creating at most one complete copy of the string passed in.\n  // Set to Infinity to have unlimited buffers.\n  sax.MAX_BUFFER_LENGTH = 64 * 1024;\n\n  var buffers = [\n    'comment', 'sgmlDecl', 'textNode', 'tagName', 'doctype',\n    'procInstName', 'procInstBody', 'entity', 'attribName',\n    'attribValue', 'cdata', 'script'\n  ];\n\n  sax.EVENTS = [\n    'text',\n    'processinginstruction',\n    'sgmldeclaration',\n    'doctype',\n    'comment',\n    'opentagstart',\n    'attribute',\n    'opentag',\n    'closetag',\n    'opencdata',\n    'cdata',\n    'closecdata',\n    'error',\n    'end',\n    'ready',\n    'script',\n    'opennamespace',\n    'closenamespace'\n  ];\n\n  function SAXParser (strict, opt) {\n    if (!(this instanceof SAXParser)) {\n      return new SAXParser(strict, opt)\n    }\n\n    var parser = this;\n    clearBuffers(parser);\n    parser.q = parser.c = '';\n    parser.bufferCheckPosition = sax.MAX_BUFFER_LENGTH;\n    parser.opt = opt || {};\n    parser.opt.lowercase = parser.opt.lowercase || parser.opt.lowercasetags;\n    parser.looseCase = parser.opt.lowercase ? 'toLowerCase' : 'toUpperCase';\n    parser.tags = [];\n    parser.closed = parser.closedRoot = parser.sawRoot = false;\n    parser.tag = parser.error = null;\n    parser.strict = !!strict;\n    parser.noscript = !!(strict || parser.opt.noscript);\n    parser.state = S.BEGIN;\n    parser.strictEntities = parser.opt.strictEntities;\n    parser.ENTITIES = parser.strictEntities ? Object.create(sax.XML_ENTITIES) : Object.create(sax.ENTITIES);\n    parser.attribList = [];\n\n    // namespaces form a prototype chain.\n    // it always points at the current tag,\n    // which protos to its parent tag.\n    if (parser.opt.xmlns) {\n      parser.ns = Object.create(rootNS);\n    }\n\n    // mostly just for error reporting\n    parser.trackPosition = parser.opt.position !== false;\n    if (parser.trackPosition) {\n      parser.position = parser.line = parser.column = 0;\n    }\n    emit(parser, 'onready');\n  }\n\n  if (!Object.create) {\n    Object.create = function (o) {\n      function F () {}\n      F.prototype = o;\n      var newf = new F();\n      return newf\n    };\n  }\n\n  if (!Object.keys) {\n    Object.keys = function (o) {\n      var a = [];\n      for (var i in o) if (o.hasOwnProperty(i)) a.push(i);\n      return a\n    };\n  }\n\n  function checkBufferLength (parser) {\n    var maxAllowed = Math.max(sax.MAX_BUFFER_LENGTH, 10);\n    var maxActual = 0;\n    for (var i = 0, l = buffers.length; i < l; i++) {\n      var len = parser[buffers[i]].length;\n      if (len > maxAllowed) {\n        // Text/cdata nodes can get big, and since they're buffered,\n        // we can get here under normal conditions.\n        // Avoid issues by emitting the text node now,\n        // so at least it won't get any bigger.\n        switch (buffers[i]) {\n          case 'textNode':\n            closeText(parser);\n            break\n\n          case 'cdata':\n            emitNode(parser, 'oncdata', parser.cdata);\n            parser.cdata = '';\n            break\n\n          case 'script':\n            emitNode(parser, 'onscript', parser.script);\n            parser.script = '';\n            break\n\n          default:\n            error(parser, 'Max buffer length exceeded: ' + buffers[i]);\n        }\n      }\n      maxActual = Math.max(maxActual, len);\n    }\n    // schedule the next check for the earliest possible buffer overrun.\n    var m = sax.MAX_BUFFER_LENGTH - maxActual;\n    parser.bufferCheckPosition = m + parser.position;\n  }\n\n  function clearBuffers (parser) {\n    for (var i = 0, l = buffers.length; i < l; i++) {\n      parser[buffers[i]] = '';\n    }\n  }\n\n  function flushBuffers (parser) {\n    closeText(parser);\n    if (parser.cdata !== '') {\n      emitNode(parser, 'oncdata', parser.cdata);\n      parser.cdata = '';\n    }\n    if (parser.script !== '') {\n      emitNode(parser, 'onscript', parser.script);\n      parser.script = '';\n    }\n  }\n\n  SAXParser.prototype = {\n    end: function () { end(this); },\n    write: write,\n    resume: function () { this.error = null; return this },\n    close: function () { return this.write(null) },\n    flush: function () { flushBuffers(this); }\n  };\n\n  var Stream;\n  try {\n    Stream = require$$0.Stream;\n  } catch (ex) {\n    Stream = function () {};\n  }\n\n  var streamWraps = sax.EVENTS.filter(function (ev) {\n    return ev !== 'error' && ev !== 'end'\n  });\n\n  function createStream (strict, opt) {\n    return new SAXStream(strict, opt)\n  }\n\n  function SAXStream (strict, opt) {\n    if (!(this instanceof SAXStream)) {\n      return new SAXStream(strict, opt)\n    }\n\n    Stream.apply(this);\n\n    this._parser = new SAXParser(strict, opt);\n    this.writable = true;\n    this.readable = true;\n\n    var me = this;\n\n    this._parser.onend = function () {\n      me.emit('end');\n    };\n\n    this._parser.onerror = function (er) {\n      me.emit('error', er);\n\n      // if didn't throw, then means error was handled.\n      // go ahead and clear error, so we can write again.\n      me._parser.error = null;\n    };\n\n    this._decoder = null;\n\n    streamWraps.forEach(function (ev) {\n      Object.defineProperty(me, 'on' + ev, {\n        get: function () {\n          return me._parser['on' + ev]\n        },\n        set: function (h) {\n          if (!h) {\n            me.removeAllListeners(ev);\n            me._parser['on' + ev] = h;\n            return h\n          }\n          me.on(ev, h);\n        },\n        enumerable: true,\n        configurable: false\n      });\n    });\n  }\n\n  SAXStream.prototype = Object.create(Stream.prototype, {\n    constructor: {\n      value: SAXStream\n    }\n  });\n\n  SAXStream.prototype.write = function (data) {\n    if (typeof Buffer$1 === 'function' &&\n      typeof Buffer$1.isBuffer === 'function' &&\n      Buffer$1.isBuffer(data)) {\n      if (!this._decoder) {\n        var SD = require$$1.StringDecoder;\n        this._decoder = new SD('utf8');\n      }\n      data = this._decoder.write(data);\n    }\n\n    this._parser.write(data.toString());\n    this.emit('data', data);\n    return true\n  };\n\n  SAXStream.prototype.end = function (chunk) {\n    if (chunk && chunk.length) {\n      this.write(chunk);\n    }\n    this._parser.end();\n    return true\n  };\n\n  SAXStream.prototype.on = function (ev, handler) {\n    var me = this;\n    if (!me._parser['on' + ev] && streamWraps.indexOf(ev) !== -1) {\n      me._parser['on' + ev] = function () {\n        var args = arguments.length === 1 ? [arguments[0]] : Array.apply(null, arguments);\n        args.splice(0, 0, ev);\n        me.emit.apply(me, args);\n      };\n    }\n\n    return Stream.prototype.on.call(me, ev, handler)\n  };\n\n  // this really needs to be replaced with character classes.\n  // XML allows all manner of ridiculous numbers and digits.\n  var CDATA = '[CDATA[';\n  var DOCTYPE = 'DOCTYPE';\n  var XML_NAMESPACE = 'http://www.w3.org/XML/1998/namespace';\n  var XMLNS_NAMESPACE = 'http://www.w3.org/2000/xmlns/';\n  var rootNS = { xml: XML_NAMESPACE, xmlns: XMLNS_NAMESPACE };\n\n  // http://www.w3.org/TR/REC-xml/#NT-NameStartChar\n  // This implementation works on strings, a single character at a time\n  // as such, it cannot ever support astral-plane characters (10000-EFFFF)\n  // without a significant breaking change to either this  parser, or the\n  // JavaScript language.  Implementation of an emoji-capable xml parser\n  // is left as an exercise for the reader.\n  var nameStart = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/;\n\n  var nameBody = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/;\n\n  var entityStart = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/;\n  var entityBody = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/;\n\n  function isWhitespace (c) {\n    return c === ' ' || c === '\\n' || c === '\\r' || c === '\\t'\n  }\n\n  function isQuote (c) {\n    return c === '\"' || c === '\\''\n  }\n\n  function isAttribEnd (c) {\n    return c === '>' || isWhitespace(c)\n  }\n\n  function isMatch (regex, c) {\n    return regex.test(c)\n  }\n\n  function notMatch (regex, c) {\n    return !isMatch(regex, c)\n  }\n\n  var S = 0;\n  sax.STATE = {\n    BEGIN: S++, // leading byte order mark or whitespace\n    BEGIN_WHITESPACE: S++, // leading whitespace\n    TEXT: S++, // general stuff\n    TEXT_ENTITY: S++, // &amp and such.\n    OPEN_WAKA: S++, // <\n    SGML_DECL: S++, // <!BLARG\n    SGML_DECL_QUOTED: S++, // <!BLARG foo \"bar\n    DOCTYPE: S++, // <!DOCTYPE\n    DOCTYPE_QUOTED: S++, // <!DOCTYPE \"//blah\n    DOCTYPE_DTD: S++, // <!DOCTYPE \"//blah\" [ ...\n    DOCTYPE_DTD_QUOTED: S++, // <!DOCTYPE \"//blah\" [ \"foo\n    COMMENT_STARTING: S++, // <!-\n    COMMENT: S++, // <!--\n    COMMENT_ENDING: S++, // <!-- blah -\n    COMMENT_ENDED: S++, // <!-- blah --\n    CDATA: S++, // <![CDATA[ something\n    CDATA_ENDING: S++, // ]\n    CDATA_ENDING_2: S++, // ]]\n    PROC_INST: S++, // <?hi\n    PROC_INST_BODY: S++, // <?hi there\n    PROC_INST_ENDING: S++, // <?hi \"there\" ?\n    OPEN_TAG: S++, // <strong\n    OPEN_TAG_SLASH: S++, // <strong /\n    ATTRIB: S++, // <a\n    ATTRIB_NAME: S++, // <a foo\n    ATTRIB_NAME_SAW_WHITE: S++, // <a foo _\n    ATTRIB_VALUE: S++, // <a foo=\n    ATTRIB_VALUE_QUOTED: S++, // <a foo=\"bar\n    ATTRIB_VALUE_CLOSED: S++, // <a foo=\"bar\"\n    ATTRIB_VALUE_UNQUOTED: S++, // <a foo=bar\n    ATTRIB_VALUE_ENTITY_Q: S++, // <foo bar=\"&quot;\"\n    ATTRIB_VALUE_ENTITY_U: S++, // <foo bar=&quot\n    CLOSE_TAG: S++, // </a\n    CLOSE_TAG_SAW_WHITE: S++, // </a   >\n    SCRIPT: S++, // <script> ...\n    SCRIPT_ENDING: S++ // <script> ... <\n  };\n\n  sax.XML_ENTITIES = {\n    'amp': '&',\n    'gt': '>',\n    'lt': '<',\n    'quot': '\"',\n    'apos': \"'\"\n  };\n\n  sax.ENTITIES = {\n    'amp': '&',\n    'gt': '>',\n    'lt': '<',\n    'quot': '\"',\n    'apos': \"'\",\n    'AElig': 198,\n    'Aacute': 193,\n    'Acirc': 194,\n    'Agrave': 192,\n    'Aring': 197,\n    'Atilde': 195,\n    'Auml': 196,\n    'Ccedil': 199,\n    'ETH': 208,\n    'Eacute': 201,\n    'Ecirc': 202,\n    'Egrave': 200,\n    'Euml': 203,\n    'Iacute': 205,\n    'Icirc': 206,\n    'Igrave': 204,\n    'Iuml': 207,\n    'Ntilde': 209,\n    'Oacute': 211,\n    'Ocirc': 212,\n    'Ograve': 210,\n    'Oslash': 216,\n    'Otilde': 213,\n    'Ouml': 214,\n    'THORN': 222,\n    'Uacute': 218,\n    'Ucirc': 219,\n    'Ugrave': 217,\n    'Uuml': 220,\n    'Yacute': 221,\n    'aacute': 225,\n    'acirc': 226,\n    'aelig': 230,\n    'agrave': 224,\n    'aring': 229,\n    'atilde': 227,\n    'auml': 228,\n    'ccedil': 231,\n    'eacute': 233,\n    'ecirc': 234,\n    'egrave': 232,\n    'eth': 240,\n    'euml': 235,\n    'iacute': 237,\n    'icirc': 238,\n    'igrave': 236,\n    'iuml': 239,\n    'ntilde': 241,\n    'oacute': 243,\n    'ocirc': 244,\n    'ograve': 242,\n    'oslash': 248,\n    'otilde': 245,\n    'ouml': 246,\n    'szlig': 223,\n    'thorn': 254,\n    'uacute': 250,\n    'ucirc': 251,\n    'ugrave': 249,\n    'uuml': 252,\n    'yacute': 253,\n    'yuml': 255,\n    'copy': 169,\n    'reg': 174,\n    'nbsp': 160,\n    'iexcl': 161,\n    'cent': 162,\n    'pound': 163,\n    'curren': 164,\n    'yen': 165,\n    'brvbar': 166,\n    'sect': 167,\n    'uml': 168,\n    'ordf': 170,\n    'laquo': 171,\n    'not': 172,\n    'shy': 173,\n    'macr': 175,\n    'deg': 176,\n    'plusmn': 177,\n    'sup1': 185,\n    'sup2': 178,\n    'sup3': 179,\n    'acute': 180,\n    'micro': 181,\n    'para': 182,\n    'middot': 183,\n    'cedil': 184,\n    'ordm': 186,\n    'raquo': 187,\n    'frac14': 188,\n    'frac12': 189,\n    'frac34': 190,\n    'iquest': 191,\n    'times': 215,\n    'divide': 247,\n    'OElig': 338,\n    'oelig': 339,\n    'Scaron': 352,\n    'scaron': 353,\n    'Yuml': 376,\n    'fnof': 402,\n    'circ': 710,\n    'tilde': 732,\n    'Alpha': 913,\n    'Beta': 914,\n    'Gamma': 915,\n    'Delta': 916,\n    'Epsilon': 917,\n    'Zeta': 918,\n    'Eta': 919,\n    'Theta': 920,\n    'Iota': 921,\n    'Kappa': 922,\n    'Lambda': 923,\n    'Mu': 924,\n    'Nu': 925,\n    'Xi': 926,\n    'Omicron': 927,\n    'Pi': 928,\n    'Rho': 929,\n    'Sigma': 931,\n    'Tau': 932,\n    'Upsilon': 933,\n    'Phi': 934,\n    'Chi': 935,\n    'Psi': 936,\n    'Omega': 937,\n    'alpha': 945,\n    'beta': 946,\n    'gamma': 947,\n    'delta': 948,\n    'epsilon': 949,\n    'zeta': 950,\n    'eta': 951,\n    'theta': 952,\n    'iota': 953,\n    'kappa': 954,\n    'lambda': 955,\n    'mu': 956,\n    'nu': 957,\n    'xi': 958,\n    'omicron': 959,\n    'pi': 960,\n    'rho': 961,\n    'sigmaf': 962,\n    'sigma': 963,\n    'tau': 964,\n    'upsilon': 965,\n    'phi': 966,\n    'chi': 967,\n    'psi': 968,\n    'omega': 969,\n    'thetasym': 977,\n    'upsih': 978,\n    'piv': 982,\n    'ensp': 8194,\n    'emsp': 8195,\n    'thinsp': 8201,\n    'zwnj': 8204,\n    'zwj': 8205,\n    'lrm': 8206,\n    'rlm': 8207,\n    'ndash': 8211,\n    'mdash': 8212,\n    'lsquo': 8216,\n    'rsquo': 8217,\n    'sbquo': 8218,\n    'ldquo': 8220,\n    'rdquo': 8221,\n    'bdquo': 8222,\n    'dagger': 8224,\n    'Dagger': 8225,\n    'bull': 8226,\n    'hellip': 8230,\n    'permil': 8240,\n    'prime': 8242,\n    'Prime': 8243,\n    'lsaquo': 8249,\n    'rsaquo': 8250,\n    'oline': 8254,\n    'frasl': 8260,\n    'euro': 8364,\n    'image': 8465,\n    'weierp': 8472,\n    'real': 8476,\n    'trade': 8482,\n    'alefsym': 8501,\n    'larr': 8592,\n    'uarr': 8593,\n    'rarr': 8594,\n    'darr': 8595,\n    'harr': 8596,\n    'crarr': 8629,\n    'lArr': 8656,\n    'uArr': 8657,\n    'rArr': 8658,\n    'dArr': 8659,\n    'hArr': 8660,\n    'forall': 8704,\n    'part': 8706,\n    'exist': 8707,\n    'empty': 8709,\n    'nabla': 8711,\n    'isin': 8712,\n    'notin': 8713,\n    'ni': 8715,\n    'prod': 8719,\n    'sum': 8721,\n    'minus': 8722,\n    'lowast': 8727,\n    'radic': 8730,\n    'prop': 8733,\n    'infin': 8734,\n    'ang': 8736,\n    'and': 8743,\n    'or': 8744,\n    'cap': 8745,\n    'cup': 8746,\n    'int': 8747,\n    'there4': 8756,\n    'sim': 8764,\n    'cong': 8773,\n    'asymp': 8776,\n    'ne': 8800,\n    'equiv': 8801,\n    'le': 8804,\n    'ge': 8805,\n    'sub': 8834,\n    'sup': 8835,\n    'nsub': 8836,\n    'sube': 8838,\n    'supe': 8839,\n    'oplus': 8853,\n    'otimes': 8855,\n    'perp': 8869,\n    'sdot': 8901,\n    'lceil': 8968,\n    'rceil': 8969,\n    'lfloor': 8970,\n    'rfloor': 8971,\n    'lang': 9001,\n    'rang': 9002,\n    'loz': 9674,\n    'spades': 9824,\n    'clubs': 9827,\n    'hearts': 9829,\n    'diams': 9830\n  };\n\n  Object.keys(sax.ENTITIES).forEach(function (key) {\n    var e = sax.ENTITIES[key];\n    var s = typeof e === 'number' ? String.fromCharCode(e) : e;\n    sax.ENTITIES[key] = s;\n  });\n\n  for (var s in sax.STATE) {\n    sax.STATE[sax.STATE[s]] = s;\n  }\n\n  // shorthand\n  S = sax.STATE;\n\n  function emit (parser, event, data) {\n    parser[event] && parser[event](data);\n  }\n\n  function emitNode (parser, nodeType, data) {\n    if (parser.textNode) closeText(parser);\n    emit(parser, nodeType, data);\n  }\n\n  function closeText (parser) {\n    parser.textNode = textopts(parser.opt, parser.textNode);\n    if (parser.textNode) emit(parser, 'ontext', parser.textNode);\n    parser.textNode = '';\n  }\n\n  function textopts (opt, text) {\n    if (opt.trim) text = text.trim();\n    if (opt.normalize) text = text.replace(/\\s+/g, ' ');\n    return text\n  }\n\n  function error (parser, er) {\n    closeText(parser);\n    if (parser.trackPosition) {\n      er += '\\nLine: ' + parser.line +\n        '\\nColumn: ' + parser.column +\n        '\\nChar: ' + parser.c;\n    }\n    er = new Error(er);\n    parser.error = er;\n    emit(parser, 'onerror', er);\n    return parser\n  }\n\n  function end (parser) {\n    if (parser.sawRoot && !parser.closedRoot) strictFail(parser, 'Unclosed root tag');\n    if ((parser.state !== S.BEGIN) &&\n      (parser.state !== S.BEGIN_WHITESPACE) &&\n      (parser.state !== S.TEXT)) {\n      error(parser, 'Unexpected end');\n    }\n    closeText(parser);\n    parser.c = '';\n    parser.closed = true;\n    emit(parser, 'onend');\n    SAXParser.call(parser, parser.strict, parser.opt);\n    return parser\n  }\n\n  function strictFail (parser, message) {\n    if (typeof parser !== 'object' || !(parser instanceof SAXParser)) {\n      throw new Error('bad call to strictFail')\n    }\n    if (parser.strict) {\n      error(parser, message);\n    }\n  }\n\n  function newTag (parser) {\n    if (!parser.strict) parser.tagName = parser.tagName[parser.looseCase]();\n    var parent = parser.tags[parser.tags.length - 1] || parser;\n    var tag = parser.tag = { name: parser.tagName, attributes: {} };\n\n    // will be overridden if tag contails an xmlns=\"foo\" or xmlns:foo=\"bar\"\n    if (parser.opt.xmlns) {\n      tag.ns = parent.ns;\n    }\n    parser.attribList.length = 0;\n    emitNode(parser, 'onopentagstart', tag);\n  }\n\n  function qname (name, attribute) {\n    var i = name.indexOf(':');\n    var qualName = i < 0 ? [ '', name ] : name.split(':');\n    var prefix = qualName[0];\n    var local = qualName[1];\n\n    // <x \"xmlns\"=\"http://foo\">\n    if (attribute && name === 'xmlns') {\n      prefix = 'xmlns';\n      local = '';\n    }\n\n    return { prefix: prefix, local: local }\n  }\n\n  function attrib (parser) {\n    if (!parser.strict) {\n      parser.attribName = parser.attribName[parser.looseCase]();\n    }\n\n    if (parser.attribList.indexOf(parser.attribName) !== -1 ||\n      parser.tag.attributes.hasOwnProperty(parser.attribName)) {\n      parser.attribName = parser.attribValue = '';\n      return\n    }\n\n    if (parser.opt.xmlns) {\n      var qn = qname(parser.attribName, true);\n      var prefix = qn.prefix;\n      var local = qn.local;\n\n      if (prefix === 'xmlns') {\n        // namespace binding attribute. push the binding into scope\n        if (local === 'xml' && parser.attribValue !== XML_NAMESPACE) {\n          strictFail(parser,\n            'xml: prefix must be bound to ' + XML_NAMESPACE + '\\n' +\n            'Actual: ' + parser.attribValue);\n        } else if (local === 'xmlns' && parser.attribValue !== XMLNS_NAMESPACE) {\n          strictFail(parser,\n            'xmlns: prefix must be bound to ' + XMLNS_NAMESPACE + '\\n' +\n            'Actual: ' + parser.attribValue);\n        } else {\n          var tag = parser.tag;\n          var parent = parser.tags[parser.tags.length - 1] || parser;\n          if (tag.ns === parent.ns) {\n            tag.ns = Object.create(parent.ns);\n          }\n          tag.ns[local] = parser.attribValue;\n        }\n      }\n\n      // defer onattribute events until all attributes have been seen\n      // so any new bindings can take effect. preserve attribute order\n      // so deferred events can be emitted in document order\n      parser.attribList.push([parser.attribName, parser.attribValue]);\n    } else {\n      // in non-xmlns mode, we can emit the event right away\n      parser.tag.attributes[parser.attribName] = parser.attribValue;\n      emitNode(parser, 'onattribute', {\n        name: parser.attribName,\n        value: parser.attribValue\n      });\n    }\n\n    parser.attribName = parser.attribValue = '';\n  }\n\n  function openTag (parser, selfClosing) {\n    if (parser.opt.xmlns) {\n      // emit namespace binding events\n      var tag = parser.tag;\n\n      // add namespace info to tag\n      var qn = qname(parser.tagName);\n      tag.prefix = qn.prefix;\n      tag.local = qn.local;\n      tag.uri = tag.ns[qn.prefix] || '';\n\n      if (tag.prefix && !tag.uri) {\n        strictFail(parser, 'Unbound namespace prefix: ' +\n          JSON.stringify(parser.tagName));\n        tag.uri = qn.prefix;\n      }\n\n      var parent = parser.tags[parser.tags.length - 1] || parser;\n      if (tag.ns && parent.ns !== tag.ns) {\n        Object.keys(tag.ns).forEach(function (p) {\n          emitNode(parser, 'onopennamespace', {\n            prefix: p,\n            uri: tag.ns[p]\n          });\n        });\n      }\n\n      // handle deferred onattribute events\n      // Note: do not apply default ns to attributes:\n      //   http://www.w3.org/TR/REC-xml-names/#defaulting\n      for (var i = 0, l = parser.attribList.length; i < l; i++) {\n        var nv = parser.attribList[i];\n        var name = nv[0];\n        var value = nv[1];\n        var qualName = qname(name, true);\n        var prefix = qualName.prefix;\n        var local = qualName.local;\n        var uri = prefix === '' ? '' : (tag.ns[prefix] || '');\n        var a = {\n          name: name,\n          value: value,\n          prefix: prefix,\n          local: local,\n          uri: uri\n        };\n\n        // if there's any attributes with an undefined namespace,\n        // then fail on them now.\n        if (prefix && prefix !== 'xmlns' && !uri) {\n          strictFail(parser, 'Unbound namespace prefix: ' +\n            JSON.stringify(prefix));\n          a.uri = prefix;\n        }\n        parser.tag.attributes[name] = a;\n        emitNode(parser, 'onattribute', a);\n      }\n      parser.attribList.length = 0;\n    }\n\n    parser.tag.isSelfClosing = !!selfClosing;\n\n    // process the tag\n    parser.sawRoot = true;\n    parser.tags.push(parser.tag);\n    emitNode(parser, 'onopentag', parser.tag);\n    if (!selfClosing) {\n      // special case for <script> in non-strict mode.\n      if (!parser.noscript && parser.tagName.toLowerCase() === 'script') {\n        parser.state = S.SCRIPT;\n      } else {\n        parser.state = S.TEXT;\n      }\n      parser.tag = null;\n      parser.tagName = '';\n    }\n    parser.attribName = parser.attribValue = '';\n    parser.attribList.length = 0;\n  }\n\n  function closeTag (parser) {\n    if (!parser.tagName) {\n      strictFail(parser, 'Weird empty close tag.');\n      parser.textNode += '</>';\n      parser.state = S.TEXT;\n      return\n    }\n\n    if (parser.script) {\n      if (parser.tagName !== 'script') {\n        parser.script += '</' + parser.tagName + '>';\n        parser.tagName = '';\n        parser.state = S.SCRIPT;\n        return\n      }\n      emitNode(parser, 'onscript', parser.script);\n      parser.script = '';\n    }\n\n    // first make sure that the closing tag actually exists.\n    // <a><b></c></b></a> will close everything, otherwise.\n    var t = parser.tags.length;\n    var tagName = parser.tagName;\n    if (!parser.strict) {\n      tagName = tagName[parser.looseCase]();\n    }\n    var closeTo = tagName;\n    while (t--) {\n      var close = parser.tags[t];\n      if (close.name !== closeTo) {\n        // fail the first time in strict mode\n        strictFail(parser, 'Unexpected close tag');\n      } else {\n        break\n      }\n    }\n\n    // didn't find it.  we already failed for strict, so just abort.\n    if (t < 0) {\n      strictFail(parser, 'Unmatched closing tag: ' + parser.tagName);\n      parser.textNode += '</' + parser.tagName + '>';\n      parser.state = S.TEXT;\n      return\n    }\n    parser.tagName = tagName;\n    var s = parser.tags.length;\n    while (s-- > t) {\n      var tag = parser.tag = parser.tags.pop();\n      parser.tagName = parser.tag.name;\n      emitNode(parser, 'onclosetag', parser.tagName);\n\n      var x = {};\n      for (var i in tag.ns) {\n        x[i] = tag.ns[i];\n      }\n\n      var parent = parser.tags[parser.tags.length - 1] || parser;\n      if (parser.opt.xmlns && tag.ns !== parent.ns) {\n        // remove namespace bindings introduced by tag\n        Object.keys(tag.ns).forEach(function (p) {\n          var n = tag.ns[p];\n          emitNode(parser, 'onclosenamespace', { prefix: p, uri: n });\n        });\n      }\n    }\n    if (t === 0) parser.closedRoot = true;\n    parser.tagName = parser.attribValue = parser.attribName = '';\n    parser.attribList.length = 0;\n    parser.state = S.TEXT;\n  }\n\n  function parseEntity (parser) {\n    var entity = parser.entity;\n    var entityLC = entity.toLowerCase();\n    var num;\n    var numStr = '';\n\n    if (parser.ENTITIES[entity]) {\n      return parser.ENTITIES[entity]\n    }\n    if (parser.ENTITIES[entityLC]) {\n      return parser.ENTITIES[entityLC]\n    }\n    entity = entityLC;\n    if (entity.charAt(0) === '#') {\n      if (entity.charAt(1) === 'x') {\n        entity = entity.slice(2);\n        num = parseInt(entity, 16);\n        numStr = num.toString(16);\n      } else {\n        entity = entity.slice(1);\n        num = parseInt(entity, 10);\n        numStr = num.toString(10);\n      }\n    }\n    entity = entity.replace(/^0+/, '');\n    if (isNaN(num) || numStr.toLowerCase() !== entity) {\n      strictFail(parser, 'Invalid character entity');\n      return '&' + parser.entity + ';'\n    }\n\n    return String.fromCodePoint(num)\n  }\n\n  function beginWhiteSpace (parser, c) {\n    if (c === '<') {\n      parser.state = S.OPEN_WAKA;\n      parser.startTagPosition = parser.position;\n    } else if (!isWhitespace(c)) {\n      // have to process this as a text node.\n      // weird, but happens.\n      strictFail(parser, 'Non-whitespace before first tag.');\n      parser.textNode = c;\n      parser.state = S.TEXT;\n    }\n  }\n\n  function charAt (chunk, i) {\n    var result = '';\n    if (i < chunk.length) {\n      result = chunk.charAt(i);\n    }\n    return result\n  }\n\n  function write (chunk) {\n    var parser = this;\n    if (this.error) {\n      throw this.error\n    }\n    if (parser.closed) {\n      return error(parser,\n        'Cannot write after close. Assign an onready handler.')\n    }\n    if (chunk === null) {\n      return end(parser)\n    }\n    if (typeof chunk === 'object') {\n      chunk = chunk.toString();\n    }\n    var i = 0;\n    var c = '';\n    while (true) {\n      c = charAt(chunk, i++);\n      parser.c = c;\n\n      if (!c) {\n        break\n      }\n\n      if (parser.trackPosition) {\n        parser.position++;\n        if (c === '\\n') {\n          parser.line++;\n          parser.column = 0;\n        } else {\n          parser.column++;\n        }\n      }\n\n      switch (parser.state) {\n        case S.BEGIN:\n          parser.state = S.BEGIN_WHITESPACE;\n          if (c === '\\uFEFF') {\n            continue\n          }\n          beginWhiteSpace(parser, c);\n          continue\n\n        case S.BEGIN_WHITESPACE:\n          beginWhiteSpace(parser, c);\n          continue\n\n        case S.TEXT:\n          if (parser.sawRoot && !parser.closedRoot) {\n            var starti = i - 1;\n            while (c && c !== '<' && c !== '&') {\n              c = charAt(chunk, i++);\n              if (c && parser.trackPosition) {\n                parser.position++;\n                if (c === '\\n') {\n                  parser.line++;\n                  parser.column = 0;\n                } else {\n                  parser.column++;\n                }\n              }\n            }\n            parser.textNode += chunk.substring(starti, i - 1);\n          }\n          if (c === '<' && !(parser.sawRoot && parser.closedRoot && !parser.strict)) {\n            parser.state = S.OPEN_WAKA;\n            parser.startTagPosition = parser.position;\n          } else {\n            if (!isWhitespace(c) && (!parser.sawRoot || parser.closedRoot)) {\n              strictFail(parser, 'Text data outside of root node.');\n            }\n            if (c === '&') {\n              parser.state = S.TEXT_ENTITY;\n            } else {\n              parser.textNode += c;\n            }\n          }\n          continue\n\n        case S.SCRIPT:\n          // only non-strict\n          if (c === '<') {\n            parser.state = S.SCRIPT_ENDING;\n          } else {\n            parser.script += c;\n          }\n          continue\n\n        case S.SCRIPT_ENDING:\n          if (c === '/') {\n            parser.state = S.CLOSE_TAG;\n          } else {\n            parser.script += '<' + c;\n            parser.state = S.SCRIPT;\n          }\n          continue\n\n        case S.OPEN_WAKA:\n          // either a /, ?, !, or text is coming next.\n          if (c === '!') {\n            parser.state = S.SGML_DECL;\n            parser.sgmlDecl = '';\n          } else if (isWhitespace(c)) ; else if (isMatch(nameStart, c)) {\n            parser.state = S.OPEN_TAG;\n            parser.tagName = c;\n          } else if (c === '/') {\n            parser.state = S.CLOSE_TAG;\n            parser.tagName = '';\n          } else if (c === '?') {\n            parser.state = S.PROC_INST;\n            parser.procInstName = parser.procInstBody = '';\n          } else {\n            strictFail(parser, 'Unencoded <');\n            // if there was some whitespace, then add that in.\n            if (parser.startTagPosition + 1 < parser.position) {\n              var pad = parser.position - parser.startTagPosition;\n              c = new Array(pad).join(' ') + c;\n            }\n            parser.textNode += '<' + c;\n            parser.state = S.TEXT;\n          }\n          continue\n\n        case S.SGML_DECL:\n          if ((parser.sgmlDecl + c).toUpperCase() === CDATA) {\n            emitNode(parser, 'onopencdata');\n            parser.state = S.CDATA;\n            parser.sgmlDecl = '';\n            parser.cdata = '';\n          } else if (parser.sgmlDecl + c === '--') {\n            parser.state = S.COMMENT;\n            parser.comment = '';\n            parser.sgmlDecl = '';\n          } else if ((parser.sgmlDecl + c).toUpperCase() === DOCTYPE) {\n            parser.state = S.DOCTYPE;\n            if (parser.doctype || parser.sawRoot) {\n              strictFail(parser,\n                'Inappropriately located doctype declaration');\n            }\n            parser.doctype = '';\n            parser.sgmlDecl = '';\n          } else if (c === '>') {\n            emitNode(parser, 'onsgmldeclaration', parser.sgmlDecl);\n            parser.sgmlDecl = '';\n            parser.state = S.TEXT;\n          } else if (isQuote(c)) {\n            parser.state = S.SGML_DECL_QUOTED;\n            parser.sgmlDecl += c;\n          } else {\n            parser.sgmlDecl += c;\n          }\n          continue\n\n        case S.SGML_DECL_QUOTED:\n          if (c === parser.q) {\n            parser.state = S.SGML_DECL;\n            parser.q = '';\n          }\n          parser.sgmlDecl += c;\n          continue\n\n        case S.DOCTYPE:\n          if (c === '>') {\n            parser.state = S.TEXT;\n            emitNode(parser, 'ondoctype', parser.doctype);\n            parser.doctype = true; // just remember that we saw it.\n          } else {\n            parser.doctype += c;\n            if (c === '[') {\n              parser.state = S.DOCTYPE_DTD;\n            } else if (isQuote(c)) {\n              parser.state = S.DOCTYPE_QUOTED;\n              parser.q = c;\n            }\n          }\n          continue\n\n        case S.DOCTYPE_QUOTED:\n          parser.doctype += c;\n          if (c === parser.q) {\n            parser.q = '';\n            parser.state = S.DOCTYPE;\n          }\n          continue\n\n        case S.DOCTYPE_DTD:\n          parser.doctype += c;\n          if (c === ']') {\n            parser.state = S.DOCTYPE;\n          } else if (isQuote(c)) {\n            parser.state = S.DOCTYPE_DTD_QUOTED;\n            parser.q = c;\n          }\n          continue\n\n        case S.DOCTYPE_DTD_QUOTED:\n          parser.doctype += c;\n          if (c === parser.q) {\n            parser.state = S.DOCTYPE_DTD;\n            parser.q = '';\n          }\n          continue\n\n        case S.COMMENT:\n          if (c === '-') {\n            parser.state = S.COMMENT_ENDING;\n          } else {\n            parser.comment += c;\n          }\n          continue\n\n        case S.COMMENT_ENDING:\n          if (c === '-') {\n            parser.state = S.COMMENT_ENDED;\n            parser.comment = textopts(parser.opt, parser.comment);\n            if (parser.comment) {\n              emitNode(parser, 'oncomment', parser.comment);\n            }\n            parser.comment = '';\n          } else {\n            parser.comment += '-' + c;\n            parser.state = S.COMMENT;\n          }\n          continue\n\n        case S.COMMENT_ENDED:\n          if (c !== '>') {\n            strictFail(parser, 'Malformed comment');\n            // allow <!-- blah -- bloo --> in non-strict mode,\n            // which is a comment of \" blah -- bloo \"\n            parser.comment += '--' + c;\n            parser.state = S.COMMENT;\n          } else {\n            parser.state = S.TEXT;\n          }\n          continue\n\n        case S.CDATA:\n          if (c === ']') {\n            parser.state = S.CDATA_ENDING;\n          } else {\n            parser.cdata += c;\n          }\n          continue\n\n        case S.CDATA_ENDING:\n          if (c === ']') {\n            parser.state = S.CDATA_ENDING_2;\n          } else {\n            parser.cdata += ']' + c;\n            parser.state = S.CDATA;\n          }\n          continue\n\n        case S.CDATA_ENDING_2:\n          if (c === '>') {\n            if (parser.cdata) {\n              emitNode(parser, 'oncdata', parser.cdata);\n            }\n            emitNode(parser, 'onclosecdata');\n            parser.cdata = '';\n            parser.state = S.TEXT;\n          } else if (c === ']') {\n            parser.cdata += ']';\n          } else {\n            parser.cdata += ']]' + c;\n            parser.state = S.CDATA;\n          }\n          continue\n\n        case S.PROC_INST:\n          if (c === '?') {\n            parser.state = S.PROC_INST_ENDING;\n          } else if (isWhitespace(c)) {\n            parser.state = S.PROC_INST_BODY;\n          } else {\n            parser.procInstName += c;\n          }\n          continue\n\n        case S.PROC_INST_BODY:\n          if (!parser.procInstBody && isWhitespace(c)) {\n            continue\n          } else if (c === '?') {\n            parser.state = S.PROC_INST_ENDING;\n          } else {\n            parser.procInstBody += c;\n          }\n          continue\n\n        case S.PROC_INST_ENDING:\n          if (c === '>') {\n            emitNode(parser, 'onprocessinginstruction', {\n              name: parser.procInstName,\n              body: parser.procInstBody\n            });\n            parser.procInstName = parser.procInstBody = '';\n            parser.state = S.TEXT;\n          } else {\n            parser.procInstBody += '?' + c;\n            parser.state = S.PROC_INST_BODY;\n          }\n          continue\n\n        case S.OPEN_TAG:\n          if (isMatch(nameBody, c)) {\n            parser.tagName += c;\n          } else {\n            newTag(parser);\n            if (c === '>') {\n              openTag(parser);\n            } else if (c === '/') {\n              parser.state = S.OPEN_TAG_SLASH;\n            } else {\n              if (!isWhitespace(c)) {\n                strictFail(parser, 'Invalid character in tag name');\n              }\n              parser.state = S.ATTRIB;\n            }\n          }\n          continue\n\n        case S.OPEN_TAG_SLASH:\n          if (c === '>') {\n            openTag(parser, true);\n            closeTag(parser);\n          } else {\n            strictFail(parser, 'Forward-slash in opening tag not followed by >');\n            parser.state = S.ATTRIB;\n          }\n          continue\n\n        case S.ATTRIB:\n          // haven't read the attribute name yet.\n          if (isWhitespace(c)) {\n            continue\n          } else if (c === '>') {\n            openTag(parser);\n          } else if (c === '/') {\n            parser.state = S.OPEN_TAG_SLASH;\n          } else if (isMatch(nameStart, c)) {\n            parser.attribName = c;\n            parser.attribValue = '';\n            parser.state = S.ATTRIB_NAME;\n          } else {\n            strictFail(parser, 'Invalid attribute name');\n          }\n          continue\n\n        case S.ATTRIB_NAME:\n          if (c === '=') {\n            parser.state = S.ATTRIB_VALUE;\n          } else if (c === '>') {\n            strictFail(parser, 'Attribute without value');\n            parser.attribValue = parser.attribName;\n            attrib(parser);\n            openTag(parser);\n          } else if (isWhitespace(c)) {\n            parser.state = S.ATTRIB_NAME_SAW_WHITE;\n          } else if (isMatch(nameBody, c)) {\n            parser.attribName += c;\n          } else {\n            strictFail(parser, 'Invalid attribute name');\n          }\n          continue\n\n        case S.ATTRIB_NAME_SAW_WHITE:\n          if (c === '=') {\n            parser.state = S.ATTRIB_VALUE;\n          } else if (isWhitespace(c)) {\n            continue\n          } else {\n            strictFail(parser, 'Attribute without value');\n            parser.tag.attributes[parser.attribName] = '';\n            parser.attribValue = '';\n            emitNode(parser, 'onattribute', {\n              name: parser.attribName,\n              value: ''\n            });\n            parser.attribName = '';\n            if (c === '>') {\n              openTag(parser);\n            } else if (isMatch(nameStart, c)) {\n              parser.attribName = c;\n              parser.state = S.ATTRIB_NAME;\n            } else {\n              strictFail(parser, 'Invalid attribute name');\n              parser.state = S.ATTRIB;\n            }\n          }\n          continue\n\n        case S.ATTRIB_VALUE:\n          if (isWhitespace(c)) {\n            continue\n          } else if (isQuote(c)) {\n            parser.q = c;\n            parser.state = S.ATTRIB_VALUE_QUOTED;\n          } else {\n            strictFail(parser, 'Unquoted attribute value');\n            parser.state = S.ATTRIB_VALUE_UNQUOTED;\n            parser.attribValue = c;\n          }\n          continue\n\n        case S.ATTRIB_VALUE_QUOTED:\n          if (c !== parser.q) {\n            if (c === '&') {\n              parser.state = S.ATTRIB_VALUE_ENTITY_Q;\n            } else {\n              parser.attribValue += c;\n            }\n            continue\n          }\n          attrib(parser);\n          parser.q = '';\n          parser.state = S.ATTRIB_VALUE_CLOSED;\n          continue\n\n        case S.ATTRIB_VALUE_CLOSED:\n          if (isWhitespace(c)) {\n            parser.state = S.ATTRIB;\n          } else if (c === '>') {\n            openTag(parser);\n          } else if (c === '/') {\n            parser.state = S.OPEN_TAG_SLASH;\n          } else if (isMatch(nameStart, c)) {\n            strictFail(parser, 'No whitespace between attributes');\n            parser.attribName = c;\n            parser.attribValue = '';\n            parser.state = S.ATTRIB_NAME;\n          } else {\n            strictFail(parser, 'Invalid attribute name');\n          }\n          continue\n\n        case S.ATTRIB_VALUE_UNQUOTED:\n          if (!isAttribEnd(c)) {\n            if (c === '&') {\n              parser.state = S.ATTRIB_VALUE_ENTITY_U;\n            } else {\n              parser.attribValue += c;\n            }\n            continue\n          }\n          attrib(parser);\n          if (c === '>') {\n            openTag(parser);\n          } else {\n            parser.state = S.ATTRIB;\n          }\n          continue\n\n        case S.CLOSE_TAG:\n          if (!parser.tagName) {\n            if (isWhitespace(c)) {\n              continue\n            } else if (notMatch(nameStart, c)) {\n              if (parser.script) {\n                parser.script += '</' + c;\n                parser.state = S.SCRIPT;\n              } else {\n                strictFail(parser, 'Invalid tagname in closing tag.');\n              }\n            } else {\n              parser.tagName = c;\n            }\n          } else if (c === '>') {\n            closeTag(parser);\n          } else if (isMatch(nameBody, c)) {\n            parser.tagName += c;\n          } else if (parser.script) {\n            parser.script += '</' + parser.tagName;\n            parser.tagName = '';\n            parser.state = S.SCRIPT;\n          } else {\n            if (!isWhitespace(c)) {\n              strictFail(parser, 'Invalid tagname in closing tag');\n            }\n            parser.state = S.CLOSE_TAG_SAW_WHITE;\n          }\n          continue\n\n        case S.CLOSE_TAG_SAW_WHITE:\n          if (isWhitespace(c)) {\n            continue\n          }\n          if (c === '>') {\n            closeTag(parser);\n          } else {\n            strictFail(parser, 'Invalid characters in closing tag');\n          }\n          continue\n\n        case S.TEXT_ENTITY:\n        case S.ATTRIB_VALUE_ENTITY_Q:\n        case S.ATTRIB_VALUE_ENTITY_U:\n          var returnState;\n          var buffer;\n          switch (parser.state) {\n            case S.TEXT_ENTITY:\n              returnState = S.TEXT;\n              buffer = 'textNode';\n              break\n\n            case S.ATTRIB_VALUE_ENTITY_Q:\n              returnState = S.ATTRIB_VALUE_QUOTED;\n              buffer = 'attribValue';\n              break\n\n            case S.ATTRIB_VALUE_ENTITY_U:\n              returnState = S.ATTRIB_VALUE_UNQUOTED;\n              buffer = 'attribValue';\n              break\n          }\n\n          if (c === ';') {\n            parser[buffer] += parseEntity(parser);\n            parser.entity = '';\n            parser.state = returnState;\n          } else if (isMatch(parser.entity.length ? entityBody : entityStart, c)) {\n            parser.entity += c;\n          } else {\n            strictFail(parser, 'Invalid character in entity name');\n            parser[buffer] += '&' + parser.entity + c;\n            parser.entity = '';\n            parser.state = returnState;\n          }\n\n          continue\n\n        default:\n          throw new Error(parser, 'Unknown state: ' + parser.state)\n      }\n    } // while\n\n    if (parser.position >= parser.bufferCheckPosition) {\n      checkBufferLength(parser);\n    }\n    return parser\n  }\n\n  /*! http://mths.be/fromcodepoint v0.1.0 by @mathias */\n  /* istanbul ignore next */\n  if (!String.fromCodePoint) {\n    (function () {\n      var stringFromCharCode = String.fromCharCode;\n      var floor = Math.floor;\n      var fromCodePoint = function () {\n        var MAX_SIZE = 0x4000;\n        var codeUnits = [];\n        var highSurrogate;\n        var lowSurrogate;\n        var index = -1;\n        var length = arguments.length;\n        if (!length) {\n          return ''\n        }\n        var result = '';\n        while (++index < length) {\n          var codePoint = Number(arguments[index]);\n          if (\n            !isFinite(codePoint) || // `NaN`, `+Infinity`, or `-Infinity`\n            codePoint < 0 || // not a valid Unicode code point\n            codePoint > 0x10FFFF || // not a valid Unicode code point\n            floor(codePoint) !== codePoint // not an integer\n          ) {\n            throw RangeError('Invalid code point: ' + codePoint)\n          }\n          if (codePoint <= 0xFFFF) { // BMP code point\n            codeUnits.push(codePoint);\n          } else { // Astral code point; split in surrogate halves\n            // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n            codePoint -= 0x10000;\n            highSurrogate = (codePoint >> 10) + 0xD800;\n            lowSurrogate = (codePoint % 0x400) + 0xDC00;\n            codeUnits.push(highSurrogate, lowSurrogate);\n          }\n          if (index + 1 === length || codeUnits.length > MAX_SIZE) {\n            result += stringFromCharCode.apply(null, codeUnits);\n            codeUnits.length = 0;\n          }\n        }\n        return result\n      };\n      /* istanbul ignore next */\n      if (Object.defineProperty) {\n        Object.defineProperty(String, 'fromCodePoint', {\n          value: fromCodePoint,\n          configurable: true,\n          writable: true\n        });\n      } else {\n        String.fromCodePoint = fromCodePoint;\n      }\n    }());\n  }\n})(exports);\n}(sax$1));\n\nvar arrayHelper = {\n\n  isArray: function(value) {\n    if (Array.isArray) {\n      return Array.isArray(value);\n    }\n    // fallback for older browsers like  IE 8\n    return Object.prototype.toString.call( value ) === '[object Array]';\n  }\n\n};\n\nvar isArray$2 = arrayHelper.isArray;\n\nvar optionsHelper = {\n\n  copyOptions: function (options) {\n    var key, copy = {};\n    for (key in options) {\n      if (options.hasOwnProperty(key)) {\n        copy[key] = options[key];\n      }\n    }\n    return copy;\n  },\n\n  ensureFlagExists: function (item, options) {\n    if (!(item in options) || typeof options[item] !== 'boolean') {\n      options[item] = false;\n    }\n  },\n\n  ensureSpacesExists: function (options) {\n    if (!('spaces' in options) || (typeof options.spaces !== 'number' && typeof options.spaces !== 'string')) {\n      options.spaces = 0;\n    }\n  },\n\n  ensureAlwaysArrayExists: function (options) {\n    if (!('alwaysArray' in options) || (typeof options.alwaysArray !== 'boolean' && !isArray$2(options.alwaysArray))) {\n      options.alwaysArray = false;\n    }\n  },\n\n  ensureKeyExists: function (key, options) {\n    if (!(key + 'Key' in options) || typeof options[key + 'Key'] !== 'string') {\n      options[key + 'Key'] = options.compact ? '_' + key : key;\n    }\n  },\n\n  checkFnExists: function (key, options) {\n    return key + 'Fn' in options;\n  }\n\n};\n\nvar sax = sax$1;\nvar helper$2 = optionsHelper;\nvar isArray$1 = arrayHelper.isArray;\n\nvar options;\nvar currentElement$1;\n\nfunction validateOptions$2(userOptions) {\n  options = helper$2.copyOptions(userOptions);\n  helper$2.ensureFlagExists('ignoreDeclaration', options);\n  helper$2.ensureFlagExists('ignoreInstruction', options);\n  helper$2.ensureFlagExists('ignoreAttributes', options);\n  helper$2.ensureFlagExists('ignoreText', options);\n  helper$2.ensureFlagExists('ignoreComment', options);\n  helper$2.ensureFlagExists('ignoreCdata', options);\n  helper$2.ensureFlagExists('ignoreDoctype', options);\n  helper$2.ensureFlagExists('compact', options);\n  helper$2.ensureFlagExists('alwaysChildren', options);\n  helper$2.ensureFlagExists('addParent', options);\n  helper$2.ensureFlagExists('trim', options);\n  helper$2.ensureFlagExists('nativeType', options);\n  helper$2.ensureFlagExists('nativeTypeAttributes', options);\n  helper$2.ensureFlagExists('sanitize', options);\n  helper$2.ensureFlagExists('instructionHasAttributes', options);\n  helper$2.ensureFlagExists('captureSpacesBetweenElements', options);\n  helper$2.ensureAlwaysArrayExists(options);\n  helper$2.ensureKeyExists('declaration', options);\n  helper$2.ensureKeyExists('instruction', options);\n  helper$2.ensureKeyExists('attributes', options);\n  helper$2.ensureKeyExists('text', options);\n  helper$2.ensureKeyExists('comment', options);\n  helper$2.ensureKeyExists('cdata', options);\n  helper$2.ensureKeyExists('doctype', options);\n  helper$2.ensureKeyExists('type', options);\n  helper$2.ensureKeyExists('name', options);\n  helper$2.ensureKeyExists('elements', options);\n  helper$2.ensureKeyExists('parent', options);\n  return options;\n}\n\nfunction nativeType(value) {\n  var nValue = Number(value);\n  if (!isNaN(nValue)) {\n    return nValue;\n  }\n  var bValue = value.toLowerCase();\n  if (bValue === 'true') {\n    return true;\n  } else if (bValue === 'false') {\n    return false;\n  }\n  return value;\n}\n\nfunction addField(type, value) {\n  var key;\n  if (options.compact) {\n    if (\n      !currentElement$1[options[type + 'Key']] &&\n      (isArray$1(options.alwaysArray) ? options.alwaysArray.indexOf(options[type + 'Key']) !== -1 : options.alwaysArray)\n    ) {\n      currentElement$1[options[type + 'Key']] = [];\n    }\n    if (currentElement$1[options[type + 'Key']] && !isArray$1(currentElement$1[options[type + 'Key']])) {\n      currentElement$1[options[type + 'Key']] = [currentElement$1[options[type + 'Key']]];\n    }\n    if (type + 'Fn' in options && typeof value === 'string') {\n      value = options[type + 'Fn'](value, currentElement$1);\n    }\n    if (type === 'instruction' && ('instructionFn' in options || 'instructionNameFn' in options)) {\n      for (key in value) {\n        if (value.hasOwnProperty(key)) {\n          if ('instructionFn' in options) {\n            value[key] = options.instructionFn(value[key], key, currentElement$1);\n          } else {\n            var temp = value[key];\n            delete value[key];\n            value[options.instructionNameFn(key, temp, currentElement$1)] = temp;\n          }\n        }\n      }\n    }\n    if (isArray$1(currentElement$1[options[type + 'Key']])) {\n      currentElement$1[options[type + 'Key']].push(value);\n    } else {\n      currentElement$1[options[type + 'Key']] = value;\n    }\n  } else {\n    if (!currentElement$1[options.elementsKey]) {\n      currentElement$1[options.elementsKey] = [];\n    }\n    var element = {};\n    element[options.typeKey] = type;\n    if (type === 'instruction') {\n      for (key in value) {\n        if (value.hasOwnProperty(key)) {\n          break;\n        }\n      }\n      element[options.nameKey] = 'instructionNameFn' in options ? options.instructionNameFn(key, value, currentElement$1) : key;\n      if (options.instructionHasAttributes) {\n        element[options.attributesKey] = value[key][options.attributesKey];\n        if ('instructionFn' in options) {\n          element[options.attributesKey] = options.instructionFn(element[options.attributesKey], key, currentElement$1);\n        }\n      } else {\n        if ('instructionFn' in options) {\n          value[key] = options.instructionFn(value[key], key, currentElement$1);\n        }\n        element[options.instructionKey] = value[key];\n      }\n    } else {\n      if (type + 'Fn' in options) {\n        value = options[type + 'Fn'](value, currentElement$1);\n      }\n      element[options[type + 'Key']] = value;\n    }\n    if (options.addParent) {\n      element[options.parentKey] = currentElement$1;\n    }\n    currentElement$1[options.elementsKey].push(element);\n  }\n}\n\nfunction manipulateAttributes(attributes) {\n  if ('attributesFn' in options && attributes) {\n    attributes = options.attributesFn(attributes, currentElement$1);\n  }\n  if ((options.trim || 'attributeValueFn' in options || 'attributeNameFn' in options || options.nativeTypeAttributes) && attributes) {\n    var key;\n    for (key in attributes) {\n      if (attributes.hasOwnProperty(key)) {\n        if (options.trim) attributes[key] = attributes[key].trim();\n        if (options.nativeTypeAttributes) {\n          attributes[key] = nativeType(attributes[key]);\n        }\n        if ('attributeValueFn' in options) attributes[key] = options.attributeValueFn(attributes[key], key, currentElement$1);\n        if ('attributeNameFn' in options) {\n          var temp = attributes[key];\n          delete attributes[key];\n          attributes[options.attributeNameFn(key, attributes[key], currentElement$1)] = temp;\n        }\n      }\n    }\n  }\n  return attributes;\n}\n\nfunction onInstruction(instruction) {\n  var attributes = {};\n  if (instruction.body && (instruction.name.toLowerCase() === 'xml' || options.instructionHasAttributes)) {\n    var attrsRegExp = /([\\w:-]+)\\s*=\\s*(?:\"([^\"]*)\"|'([^']*)'|(\\w+))\\s*/g;\n    var match;\n    while ((match = attrsRegExp.exec(instruction.body)) !== null) {\n      attributes[match[1]] = match[2] || match[3] || match[4];\n    }\n    attributes = manipulateAttributes(attributes);\n  }\n  if (instruction.name.toLowerCase() === 'xml') {\n    if (options.ignoreDeclaration) {\n      return;\n    }\n    currentElement$1[options.declarationKey] = {};\n    if (Object.keys(attributes).length) {\n      currentElement$1[options.declarationKey][options.attributesKey] = attributes;\n    }\n    if (options.addParent) {\n      currentElement$1[options.declarationKey][options.parentKey] = currentElement$1;\n    }\n  } else {\n    if (options.ignoreInstruction) {\n      return;\n    }\n    if (options.trim) {\n      instruction.body = instruction.body.trim();\n    }\n    var value = {};\n    if (options.instructionHasAttributes && Object.keys(attributes).length) {\n      value[instruction.name] = {};\n      value[instruction.name][options.attributesKey] = attributes;\n    } else {\n      value[instruction.name] = instruction.body;\n    }\n    addField('instruction', value);\n  }\n}\n\nfunction onStartElement(name, attributes) {\n  var element;\n  if (typeof name === 'object') {\n    attributes = name.attributes;\n    name = name.name;\n  }\n  attributes = manipulateAttributes(attributes);\n  if ('elementNameFn' in options) {\n    name = options.elementNameFn(name, currentElement$1);\n  }\n  if (options.compact) {\n    element = {};\n    if (!options.ignoreAttributes && attributes && Object.keys(attributes).length) {\n      element[options.attributesKey] = {};\n      var key;\n      for (key in attributes) {\n        if (attributes.hasOwnProperty(key)) {\n          element[options.attributesKey][key] = attributes[key];\n        }\n      }\n    }\n    if (\n      !(name in currentElement$1) &&\n      (isArray$1(options.alwaysArray) ? options.alwaysArray.indexOf(name) !== -1 : options.alwaysArray)\n    ) {\n      currentElement$1[name] = [];\n    }\n    if (currentElement$1[name] && !isArray$1(currentElement$1[name])) {\n      currentElement$1[name] = [currentElement$1[name]];\n    }\n    if (isArray$1(currentElement$1[name])) {\n      currentElement$1[name].push(element);\n    } else {\n      currentElement$1[name] = element;\n    }\n  } else {\n    if (!currentElement$1[options.elementsKey]) {\n      currentElement$1[options.elementsKey] = [];\n    }\n    element = {};\n    element[options.typeKey] = 'element';\n    element[options.nameKey] = name;\n    if (!options.ignoreAttributes && attributes && Object.keys(attributes).length) {\n      element[options.attributesKey] = attributes;\n    }\n    if (options.alwaysChildren) {\n      element[options.elementsKey] = [];\n    }\n    currentElement$1[options.elementsKey].push(element);\n  }\n  element[options.parentKey] = currentElement$1; // will be deleted in onEndElement() if !options.addParent\n  currentElement$1 = element;\n}\n\nfunction onText(text) {\n  if (options.ignoreText) {\n    return;\n  }\n  if (!text.trim() && !options.captureSpacesBetweenElements) {\n    return;\n  }\n  if (options.trim) {\n    text = text.trim();\n  }\n  if (options.nativeType) {\n    text = nativeType(text);\n  }\n  if (options.sanitize) {\n    text = text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  }\n  addField('text', text);\n}\n\nfunction onComment(comment) {\n  if (options.ignoreComment) {\n    return;\n  }\n  if (options.trim) {\n    comment = comment.trim();\n  }\n  addField('comment', comment);\n}\n\nfunction onEndElement(name) {\n  var parentElement = currentElement$1[options.parentKey];\n  if (!options.addParent) {\n    delete currentElement$1[options.parentKey];\n  }\n  currentElement$1 = parentElement;\n}\n\nfunction onCdata(cdata) {\n  if (options.ignoreCdata) {\n    return;\n  }\n  if (options.trim) {\n    cdata = cdata.trim();\n  }\n  addField('cdata', cdata);\n}\n\nfunction onDoctype(doctype) {\n  if (options.ignoreDoctype) {\n    return;\n  }\n  doctype = doctype.replace(/^ /, '');\n  if (options.trim) {\n    doctype = doctype.trim();\n  }\n  addField('doctype', doctype);\n}\n\nfunction onError(error) {\n  error.note = error; //console.error(error);\n  if ('onErrorFn' in options) options.onErrorFn(error);\n}\n\nvar xml2js$1 = function (xml, userOptions) {\n\n  var parser = sax.parser(true, {}) ;\n  var result = {};\n  currentElement$1 = result;\n\n  options = validateOptions$2(userOptions);\n\n  {\n    parser.opt = {strictEntities: true};\n    parser.onopentag = onStartElement;\n    parser.ontext = onText;\n    parser.oncomment = onComment;\n    parser.onclosetag = onEndElement;\n    parser.onerror = onError;\n    parser.oncdata = onCdata;\n    parser.ondoctype = onDoctype;\n    parser.onprocessinginstruction = onInstruction;\n  }\n\n  {\n    try {\n      parser.write(xml).close();\n    } catch (e) {}\n  }\n\n  if (result[options.elementsKey]) {\n    var temp = result[options.elementsKey];\n    delete result[options.elementsKey];\n    result[options.elementsKey] = temp;\n    delete result.text;\n  }\n\n  return result;\n\n};\n\nvar helper$1 = optionsHelper;\nvar xml2js = xml2js$1;\n\nfunction validateOptions$1 (userOptions) {\n  var options = helper$1.copyOptions(userOptions);\n  helper$1.ensureSpacesExists(options);\n  return options;\n}\n\nvar xml2json = function(xml, userOptions) {\n  var options, js, json, parentKey;\n  options = validateOptions$1(userOptions);\n  js = xml2js(xml, options);\n  parentKey = 'compact' in options && options.compact ? '_parent' : 'parent';\n  // parentKey = ptions.compact ? '_parent' : 'parent'; // consider this\n  if ('addParent' in options && options.addParent) {\n    json = JSON.stringify(js, function (k, v) { return k === parentKey? '_' : v; }, options.spaces);\n  } else {\n    json = JSON.stringify(js, null, options.spaces);\n  }\n  return json.replace(/\\u2028/g, '\\\\u2028').replace(/\\u2029/g, '\\\\u2029');\n};\n\nvar helper = optionsHelper;\nvar isArray = arrayHelper.isArray;\n\nvar currentElement, currentElementName;\n\nfunction validateOptions(userOptions) {\n  var options = helper.copyOptions(userOptions);\n  helper.ensureFlagExists('ignoreDeclaration', options);\n  helper.ensureFlagExists('ignoreInstruction', options);\n  helper.ensureFlagExists('ignoreAttributes', options);\n  helper.ensureFlagExists('ignoreText', options);\n  helper.ensureFlagExists('ignoreComment', options);\n  helper.ensureFlagExists('ignoreCdata', options);\n  helper.ensureFlagExists('ignoreDoctype', options);\n  helper.ensureFlagExists('compact', options);\n  helper.ensureFlagExists('indentText', options);\n  helper.ensureFlagExists('indentCdata', options);\n  helper.ensureFlagExists('indentAttributes', options);\n  helper.ensureFlagExists('indentInstruction', options);\n  helper.ensureFlagExists('fullTagEmptyElement', options);\n  helper.ensureFlagExists('noQuotesForNativeAttributes', options);\n  helper.ensureSpacesExists(options);\n  if (typeof options.spaces === 'number') {\n    options.spaces = Array(options.spaces + 1).join(' ');\n  }\n  helper.ensureKeyExists('declaration', options);\n  helper.ensureKeyExists('instruction', options);\n  helper.ensureKeyExists('attributes', options);\n  helper.ensureKeyExists('text', options);\n  helper.ensureKeyExists('comment', options);\n  helper.ensureKeyExists('cdata', options);\n  helper.ensureKeyExists('doctype', options);\n  helper.ensureKeyExists('type', options);\n  helper.ensureKeyExists('name', options);\n  helper.ensureKeyExists('elements', options);\n  return options;\n}\n\nfunction writeIndentation(options, depth, firstLine) {\n  return (!firstLine && options.spaces ? '\\n' : '') + Array(depth + 1).join(options.spaces);\n}\n\nfunction writeAttributes(attributes, options, depth) {\n  if (options.ignoreAttributes) {\n    return '';\n  }\n  if ('attributesFn' in options) {\n    attributes = options.attributesFn(attributes, currentElementName, currentElement);\n  }\n  var key, attr, attrName, quote, result = [];\n  for (key in attributes) {\n    if (attributes.hasOwnProperty(key) && attributes[key] !== null && attributes[key] !== undefined) {\n      quote = options.noQuotesForNativeAttributes && typeof attributes[key] !== 'string' ? '' : '\"';\n      attr = '' + attributes[key]; // ensure number and boolean are converted to String\n      attr = attr.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/\"/g, '&quot;');\n      attrName = 'attributeNameFn' in options ? options.attributeNameFn(key, attr, currentElementName, currentElement) : key;\n      result.push((options.spaces && options.indentAttributes? writeIndentation(options, depth+1, false) : ' '));\n      result.push(attrName + '=' + quote + ('attributeValueFn' in options ? options.attributeValueFn(attr, key, currentElementName, currentElement) : attr) + quote);\n    }\n  }\n  if (attributes && Object.keys(attributes).length && options.spaces && options.indentAttributes) {\n    result.push(writeIndentation(options, depth, false));\n  }\n  return result.join('');\n}\n\nfunction writeDeclaration(declaration, options, depth) {\n  currentElement = declaration;\n  currentElementName = 'xml';\n  return options.ignoreDeclaration ? '' :  '<?' + 'xml' + writeAttributes(declaration[options.attributesKey], options, depth) + '?>';\n}\n\nfunction writeInstruction(instruction, options, depth) {\n  if (options.ignoreInstruction) {\n    return '';\n  }\n  var key;\n  for (key in instruction) {\n    if (instruction.hasOwnProperty(key)) {\n      break;\n    }\n  }\n  var instructionName = 'instructionNameFn' in options ? options.instructionNameFn(key, instruction[key], currentElementName, currentElement) : key;\n  if (typeof instruction[key] === 'object') {\n    currentElement = instruction;\n    currentElementName = instructionName;\n    return '<?' + instructionName + writeAttributes(instruction[key][options.attributesKey], options, depth) + '?>';\n  } else {\n    var instructionValue = instruction[key] ? instruction[key] : '';\n    if ('instructionFn' in options) instructionValue = options.instructionFn(instructionValue, key, currentElementName, currentElement);\n    return '<?' + instructionName + (instructionValue ? ' ' + instructionValue : '') + '?>';\n  }\n}\n\nfunction writeComment(comment, options) {\n  return options.ignoreComment ? '' : '<!--' + ('commentFn' in options ? options.commentFn(comment, currentElementName, currentElement) : comment) + '-->';\n}\n\nfunction writeCdata(cdata, options) {\n  return options.ignoreCdata ? '' : '<![CDATA[' + ('cdataFn' in options ? options.cdataFn(cdata, currentElementName, currentElement) : cdata.replace(']]>', ']]]]><![CDATA[>')) + ']]>';\n}\n\nfunction writeDoctype(doctype, options) {\n  return options.ignoreDoctype ? '' : '<!DOCTYPE ' + ('doctypeFn' in options ? options.doctypeFn(doctype, currentElementName, currentElement) : doctype) + '>';\n}\n\nfunction writeText(text, options) {\n  if (options.ignoreText) return '';\n  text = '' + text; // ensure Number and Boolean are converted to String\n  text = text.replace(/&amp;/g, '&'); // desanitize to avoid double sanitization\n  text = text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  return 'textFn' in options ? options.textFn(text, currentElementName, currentElement) : text;\n}\n\nfunction hasContent(element, options) {\n  var i;\n  if (element.elements && element.elements.length) {\n    for (i = 0; i < element.elements.length; ++i) {\n      switch (element.elements[i][options.typeKey]) {\n      case 'text':\n        if (options.indentText) {\n          return true;\n        }\n        break; // skip to next key\n      case 'cdata':\n        if (options.indentCdata) {\n          return true;\n        }\n        break; // skip to next key\n      case 'instruction':\n        if (options.indentInstruction) {\n          return true;\n        }\n        break; // skip to next key\n      case 'doctype':\n      case 'comment':\n      case 'element':\n        return true;\n      default:\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\nfunction writeElement(element, options, depth) {\n  currentElement = element;\n  currentElementName = element.name;\n  var xml = [], elementName = 'elementNameFn' in options ? options.elementNameFn(element.name, element) : element.name;\n  xml.push('<' + elementName);\n  if (element[options.attributesKey]) {\n    xml.push(writeAttributes(element[options.attributesKey], options, depth));\n  }\n  var withClosingTag = element[options.elementsKey] && element[options.elementsKey].length || element[options.attributesKey] && element[options.attributesKey]['xml:space'] === 'preserve';\n  if (!withClosingTag) {\n    if ('fullTagEmptyElementFn' in options) {\n      withClosingTag = options.fullTagEmptyElementFn(element.name, element);\n    } else {\n      withClosingTag = options.fullTagEmptyElement;\n    }\n  }\n  if (withClosingTag) {\n    xml.push('>');\n    if (element[options.elementsKey] && element[options.elementsKey].length) {\n      xml.push(writeElements(element[options.elementsKey], options, depth + 1));\n      currentElement = element;\n      currentElementName = element.name;\n    }\n    xml.push(options.spaces && hasContent(element, options) ? '\\n' + Array(depth + 1).join(options.spaces) : '');\n    xml.push('</' + elementName + '>');\n  } else {\n    xml.push('/>');\n  }\n  return xml.join('');\n}\n\nfunction writeElements(elements, options, depth, firstLine) {\n  return elements.reduce(function (xml, element) {\n    var indent = writeIndentation(options, depth, firstLine && !xml);\n    switch (element.type) {\n    case 'element': return xml + indent + writeElement(element, options, depth);\n    case 'comment': return xml + indent + writeComment(element[options.commentKey], options);\n    case 'doctype': return xml + indent + writeDoctype(element[options.doctypeKey], options);\n    case 'cdata': return xml + (options.indentCdata ? indent : '') + writeCdata(element[options.cdataKey], options);\n    case 'text': return xml + (options.indentText ? indent : '') + writeText(element[options.textKey], options);\n    case 'instruction':\n      var instruction = {};\n      instruction[element[options.nameKey]] = element[options.attributesKey] ? element : element[options.instructionKey];\n      return xml + (options.indentInstruction ? indent : '') + writeInstruction(instruction, options, depth);\n    }\n  }, '');\n}\n\nfunction hasContentCompact(element, options, anyContent) {\n  var key;\n  for (key in element) {\n    if (element.hasOwnProperty(key)) {\n      switch (key) {\n      case options.parentKey:\n      case options.attributesKey:\n        break; // skip to next key\n      case options.textKey:\n        if (options.indentText || anyContent) {\n          return true;\n        }\n        break; // skip to next key\n      case options.cdataKey:\n        if (options.indentCdata || anyContent) {\n          return true;\n        }\n        break; // skip to next key\n      case options.instructionKey:\n        if (options.indentInstruction || anyContent) {\n          return true;\n        }\n        break; // skip to next key\n      case options.doctypeKey:\n      case options.commentKey:\n        return true;\n      default:\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\nfunction writeElementCompact(element, name, options, depth, indent) {\n  currentElement = element;\n  currentElementName = name;\n  var elementName = 'elementNameFn' in options ? options.elementNameFn(name, element) : name;\n  if (typeof element === 'undefined' || element === null || element === '') {\n    return 'fullTagEmptyElementFn' in options && options.fullTagEmptyElementFn(name, element) || options.fullTagEmptyElement ? '<' + elementName + '></' + elementName + '>' : '<' + elementName + '/>';\n  }\n  var xml = [];\n  if (name) {\n    xml.push('<' + elementName);\n    if (typeof element !== 'object') {\n      xml.push('>' + writeText(element,options) + '</' + elementName + '>');\n      return xml.join('');\n    }\n    if (element[options.attributesKey]) {\n      xml.push(writeAttributes(element[options.attributesKey], options, depth));\n    }\n    var withClosingTag = hasContentCompact(element, options, true) || element[options.attributesKey] && element[options.attributesKey]['xml:space'] === 'preserve';\n    if (!withClosingTag) {\n      if ('fullTagEmptyElementFn' in options) {\n        withClosingTag = options.fullTagEmptyElementFn(name, element);\n      } else {\n        withClosingTag = options.fullTagEmptyElement;\n      }\n    }\n    if (withClosingTag) {\n      xml.push('>');\n    } else {\n      xml.push('/>');\n      return xml.join('');\n    }\n  }\n  xml.push(writeElementsCompact(element, options, depth + 1, false));\n  currentElement = element;\n  currentElementName = name;\n  if (name) {\n    xml.push((indent ? writeIndentation(options, depth, false) : '') + '</' + elementName + '>');\n  }\n  return xml.join('');\n}\n\nfunction writeElementsCompact(element, options, depth, firstLine) {\n  var i, key, nodes, xml = [];\n  for (key in element) {\n    if (element.hasOwnProperty(key)) {\n      nodes = isArray(element[key]) ? element[key] : [element[key]];\n      for (i = 0; i < nodes.length; ++i) {\n        switch (key) {\n        case options.declarationKey: xml.push(writeDeclaration(nodes[i], options, depth)); break;\n        case options.instructionKey: xml.push((options.indentInstruction ? writeIndentation(options, depth, firstLine) : '') + writeInstruction(nodes[i], options, depth)); break;\n        case options.attributesKey: case options.parentKey: break; // skip\n        case options.textKey: xml.push((options.indentText ? writeIndentation(options, depth, firstLine) : '') + writeText(nodes[i], options)); break;\n        case options.cdataKey: xml.push((options.indentCdata ? writeIndentation(options, depth, firstLine) : '') + writeCdata(nodes[i], options)); break;\n        case options.doctypeKey: xml.push(writeIndentation(options, depth, firstLine) + writeDoctype(nodes[i], options)); break;\n        case options.commentKey: xml.push(writeIndentation(options, depth, firstLine) + writeComment(nodes[i], options)); break;\n        default: xml.push(writeIndentation(options, depth, firstLine) + writeElementCompact(nodes[i], key, options, depth, hasContentCompact(nodes[i], options)));\n        }\n        firstLine = firstLine && !xml.length;\n      }\n    }\n  }\n  return xml.join('');\n}\n\nvar js2xml$1 = function (js, options) {\n  options = validateOptions(options);\n  var xml = [];\n  currentElement = js;\n  currentElementName = '_root_';\n  if (options.compact) {\n    xml.push(writeElementsCompact(js, options, 0, true));\n  } else {\n    if (js[options.declarationKey]) {\n      xml.push(writeDeclaration(js[options.declarationKey], options, 0));\n    }\n    if (js[options.elementsKey] && js[options.elementsKey].length) {\n      xml.push(writeElements(js[options.elementsKey], options, 0, !xml.length));\n    }\n  }\n  return xml.join('');\n};\n\nvar js2xml = js2xml$1;\n\nvar json2xml = function (json, options) {\n  if (json instanceof Buffer) {\n    json = json.toString();\n  }\n  var js = null;\n  if (typeof (json) === 'string') {\n    try {\n      js = JSON.parse(json);\n    } catch (e) {\n      throw new Error('The JSON structure is invalid');\n    }\n  } else {\n    js = json;\n  }\n  return js2xml(js, options);\n};\n\nexports.js2xml = js2xml$1;\nexports.json2xml = json2xml;\nexports.xml2js = xml2js$1;\nexports.xml2json = xml2json;\n//# sourceMappingURL=index.js.map\n\n\n//# sourceURL=webpack://whiteboard-bridge/./node_modules/@netless/xml-js/dist/index.js?");

/***/ }),

/***/ 19418:
/*!*************************************************************!*\
  !*** ./node_modules/@netless/window-manager/dist/style.css ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n//# sourceURL=webpack://whiteboard-bridge/./node_modules/@netless/window-manager/dist/style.css?");

/***/ })

}]);