/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkwhiteboard_bridge"] = self["webpackChunkwhiteboard_bridge"] || []).push([["main"],{

/***/ 80782:
/*!*********************************************************!*\
  !*** ./node_modules/@netless/window-manager/dist/ sync ***!
  \*********************************************************/
/***/ (function(module) {

eval("function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 80782;\nmodule.exports = webpackEmptyContext;\n\n//# sourceURL=webpack://whiteboard-bridge/./node_modules/@netless/window-manager/dist/_sync?");

/***/ }),

/***/ 89734:
/*!*********************!*\
  !*** ./src/App.css ***!
  \*********************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n//# sourceURL=webpack://whiteboard-bridge/./src/App.css?");

/***/ }),

/***/ 6167:
/*!*********************!*\
  !*** ./src/App.tsx ***!
  \*********************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = App;\nexports.whiteboardContainerId = void 0;\n\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ 67294));\n\nvar _Funs = __webpack_require__(/*! ./utils/Funs */ 28388);\n\nvar _SDK = __webpack_require__(/*! ./bridge/SDK */ 5294);\n\n__webpack_require__(/*! @netless/window-manager/dist/style.css */ 19418);\n\n__webpack_require__(/*! ./App.css */ 89734);\n\n__webpack_require__(/*! video.js/dist/video-js.css */ 75735);\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar whiteboardContainerId = \"whiteboard-container\";\nexports.whiteboardContainerId = whiteboardContainerId;\n\nfunction App() {\n  (0, _react.useEffect)(function () {\n    return function () {\n      window.removeEventListener(\"error\", _Funs.globalErrorEvent);\n      window.removeEventListener(\"message\", _Funs.postCustomMessage);\n    };\n  }, []);\n  window.addEventListener(\"error\", _Funs.globalErrorEvent);\n  window.addEventListener(\"message\", _Funs.postCustomMessage);\n  var divRef = (0, _react.useRef)(null);\n  var fullStyle = {\n    position: \"absolute\",\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    zIndex: 1\n  };\n\n  var getDiv = function getDiv() {\n    return divRef.current;\n  };\n\n  (0, _SDK.setWhiteboardDivGetter)(getDiv);\n  return /*#__PURE__*/_react.default.createElement(\"div\", {\n    id: whiteboardContainerId,\n    ref: divRef,\n    style: fullStyle\n  });\n}\n\n//# sourceURL=webpack://whiteboard-bridge/./src/App.tsx?");

/***/ }),

/***/ 24433:
/*!**********************!*\
  !*** ./src/Debug.ts ***!
  \**********************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.addDebugFunctions = addDebugFunctions;\n\nvar _Logger = __webpack_require__(/*! ./utils/Logger */ 38789);\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar appIdentifier = \"283/VGiScM9Wiw2HJg\";\nvar testRoomUUID = \"1ca4ab20f77911ec81b2010e494af17e\";\nvar testRoomToken = \"NETLESSROOM_YWs9eTBJOWsxeC1IVVo4VGh0NyZub25jZT0xNjU2NDg2MDA4NzY0MDAmcm9sZT0wJnNpZz00NzlmNThjZWJlMTRiNzI0N2U0YWZjZmFlNzM5MGMxYjBlYmQ3MWJkODMzMDFkMWVjNWQ1Zjg1ZDZhMjdiOGM4JnV1aWQ9MWNhNGFiMjBmNzc5MTFlYzgxYjIwMTBlNDk0YWYxN2U\";\n\nfunction addDebugFunctions() {\n  function testRoom() {\n    (0, _Logger.enableReport)(true);\n\n    var sdkParams = _objectSpread(_objectSpread({}, {\n      enableSyncedStore: true\n    }), {}, {\n      log: true,\n      userCursor: true,\n      __platform: \"bridge\",\n      appIdentifier: appIdentifier,\n      useMultiViews: true\n    });\n\n    window.newWhiteSdk(sdkParams, function () {});\n    var roomParams = {\n      uuid: testRoomUUID,\n      uid: \"0\",\n      roomToken: testRoomToken,\n      userPayload: {\n        avatar: \"https://white-pan.oss-cn-shanghai.aliyuncs.com/40/image/mask.jpg\"\n      }\n    };\n    window.joinRoom(roomParams, function () {});\n  }\n\n  function testReplay() {\n    (0, _Logger.enableReport)(true);\n    var sdkParams = {\n      log: true,\n      userCursor: true,\n      __platform: \"bridge\",\n      appIdentifier: appIdentifier,\n      useMultiViews: true\n    };\n    window.newWhiteSdk(sdkParams, function () {});\n    var replayParams = {\n      room: testRoomUUID,\n      roomToken: testRoomToken\n    };\n    window.replayRoom(replayParams, function () {});\n  }\n\n  window.testRoom = testRoom;\n  window.testReplay = testReplay;\n}\n\n//# sourceURL=webpack://whiteboard-bridge/./src/Debug.ts?");

/***/ }),

/***/ 87670:
/*!***********************!*\
  !*** ./src/Global.ts ***!
  \***********************/
/***/ (function() {

"use strict";
eval("\n\ntypeof Proxy == \"undefined\" ? window.__netlessMobXUseProxies = \"ifavailable\" : undefined;\n\n//# sourceURL=webpack://whiteboard-bridge/./src/Global.ts?");

/***/ }),

/***/ 59048:
/*!*************************!*\
  !*** ./src/Polyfill.ts ***!
  \*************************/
/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(/*! @netless/canvas-polyfill */ 35827);\n\n__webpack_require__(/*! whatwg-fetch */ 7774);\n\nvar _resizeObserver = __webpack_require__(/*! @juggle/resize-observer */ 79667);\n\n// workaround for iOS below 13.3\nif (!window.ResizeObserver) {\n  window.ResizeObserver = _resizeObserver.ResizeObserver;\n}\n\n//# sourceURL=webpack://whiteboard-bridge/./src/Polyfill.ts?");

/***/ }),

/***/ 39310:
/*!********************!*\
  !*** ./src/Rtc.ts ***!
  \********************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.Rtc = void 0;\n\nvar _dsbridge = _interopRequireDefault(__webpack_require__(/*! dsbridge */ 70781));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar Rtc = /*#__PURE__*/function () {\n  function Rtc() {\n    var _this = this;\n\n    _classCallCheck(this, Rtc);\n\n    _defineProperty(this, \"startCallback\", void 0);\n\n    _defineProperty(this, \"stopCallback\", void 0);\n\n    _defineProperty(this, \"startAudioMixing\", function (filePath, loopback, replace, cycle, callback) {\n      _this.startCallback = callback;\n      return _dsbridge.default.call(\"rtc.startAudioMixing\", {\n        filePath: filePath,\n        loopback: loopback,\n        replace: replace,\n        cycle: cycle\n      });\n    });\n\n    _defineProperty(this, \"stopAudioMixing\", function (callback) {\n      _this.stopCallback = callback;\n      return _dsbridge.default.call(\"rtc.stopAudioMixing\");\n    });\n\n    _dsbridge.default.register(\"rtc\", {\n      callback: function callback(state, errorCode) {\n        switch (state) {\n          case Rtc.kStopAudioMixing:\n            {\n              if (_this.stopCallback) {\n                _this.stopCallback(state, errorCode);\n              }\n            }\n            break;\n\n          case Rtc.kStartAudioMixing:\n            {\n              if (_this.startCallback) {\n                _this.startCallback(state, errorCode);\n              }\n            }\n            break;\n\n          default:\n            {\n              if (_this.startCallback) {\n                _this.startCallback(state, errorCode);\n              } else if (_this.stopCallback) {\n                _this.stopCallback(state, errorCode);\n              }\n            }\n            break;\n        }\n      }\n    });\n  }\n  /**\n  * (filePath: string, loopback: boolean, replace: boolean, cycle: number, callback?: (state: number, errorCode: number) => void) => number;\n  * callback: native 收到回调事件，需要用户注册监听，在接到回调后调用该方法\n          * state:\n          *  710: 成功调用 startAudioMixing 或 resumeAudioMixing\n          *  711: 成功调用 pauseAudioMixing\n          *  713: 成功调用 stopAudioMixing\n          *  714: 播放失败，error code 会有具体原因\n  */\n\n\n  _createClass(Rtc, [{\n    key: \"pauseAudioMixing\",\n    value: function pauseAudioMixing() {\n      return _dsbridge.default.call(\"rtc.pauseAudioMixing\");\n    }\n  }, {\n    key: \"resumeAudioMixing\",\n    value: function resumeAudioMixing() {\n      return _dsbridge.default.call(\"rtc.resumeAudioMixing\");\n    }\n  }, {\n    key: \"setAudioMixingPosition\",\n    value: function setAudioMixingPosition(pos) {\n      return _dsbridge.default.call(\"rtc.setAudioMixingPosition\", pos);\n    }\n  }]);\n\n  return Rtc;\n}();\n\nexports.Rtc = Rtc;\n\n_defineProperty(Rtc, \"kStartAudioMixing\", 710);\n\n_defineProperty(Rtc, \"kStopAudioMixing\", 713);\n\n_defineProperty(Rtc, \"kAudioError\", 714);\n\n//# sourceURL=webpack://whiteboard-bridge/./src/Rtc.ts?");

/***/ }),

/***/ 32407:
/*!**************************!*\
  !*** ./src/WebSocket.ts ***!
  \**************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.WebSocketBridge = void 0;\n\nvar _dsbridge = _interopRequireDefault(__webpack_require__(/*! dsbridge */ 70781));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar ReadyState;\n\n(function (ReadyState) {\n  ReadyState[ReadyState[\"CONNECTING\"] = 0] = \"CONNECTING\";\n  ReadyState[ReadyState[\"OPEN\"] = 1] = \"OPEN\";\n  ReadyState[ReadyState[\"CLOSING\"] = 2] = \"CLOSING\";\n  ReadyState[ReadyState[\"CLOSED\"] = 3] = \"CLOSED\";\n})(ReadyState || (ReadyState = {}));\n\nfunction hookWebSocket() {\n  var originConstructor = WebSocket;\n\n  WebSocket = function WebSocket(url, protocols) {\n    if (window.nativeWebSocket) {\n      return new WebSocketBridge(url);\n    } else {\n      return new originConstructor(url, protocols);\n    }\n  };\n}\n\nhookWebSocket();\n\nfunction encodeArrayBufferAsBase64(ab) {\n  var arr = new Uint8Array(ab);\n  var binary = '';\n  var len = arr.length;\n\n  for (var i = 0; i < len; i++) {\n    binary += String.fromCharCode(arr[i]);\n  }\n\n  return window.btoa(binary);\n}\n\n;\n\nfunction base64ToArrayBuffer(base64) {\n  var binary_string = window.atob(base64);\n  var len = binary_string.length;\n  var bytes = new Uint8Array(len);\n\n  for (var i = 0; i < len; i++) {\n    bytes[i] = binary_string.charCodeAt(i);\n  }\n\n  return bytes.buffer;\n}\n\nvar generateKey = 0; // 最终应该在底层把 akko-socket 拆解掉比较好\n\nvar WebSocketBridge = /*#__PURE__*/function () {\n  // \"arraybuffer\" | \"blob\";\n  // TODO:考虑一个正在 close，另一个在初始化，此时 native 回调前后交错。\n  function WebSocketBridge(url) {\n    var _this = this;\n\n    _classCallCheck(this, WebSocketBridge);\n\n    _defineProperty(this, \"binaryType\", \"blob\");\n\n    _defineProperty(this, \"key\", void 0);\n\n    _defineProperty(this, \"_readyState\", ReadyState.CONNECTING);\n\n    _defineProperty(this, \"_bufferedAmount\", 0);\n\n    _defineProperty(this, \"listeners\", {});\n\n    _defineProperty(this, \"onceListeners\", {});\n\n    _defineProperty(this, \"_onError\", function (e) {\n      if (_this.key !== e.key) {\n        return;\n      }\n\n      console.log(\"_onError: \", e); // 是否要处理 readyState\n\n      _this.dispatchEvent(\"error\", e);\n    });\n\n    _defineProperty(this, \"_onMessage\", function (message) {\n      if (_this.key !== message.key) {\n        return;\n      } // 因为是伪造的 Event，所以缺少 Event 中的一系列属性，用 any 替换一下\n\n\n      if (message.type === \"arraybuffer\") {\n        _this.dispatchEvent(\"message\", {\n          data: base64ToArrayBuffer(message.data),\n          key: _this.key\n        });\n      } else {\n        _this.dispatchEvent(\"message\", {\n          data: message.data,\n          key: _this.key\n        });\n      }\n    });\n\n    _defineProperty(this, \"_onClose\", function (event) {\n      if (_this.key === event.key) {\n        console.log(\"_onClose: \", event);\n        _this._readyState = ReadyState.CLOSED;\n\n        _this.dispatchEvent(\"close\", event);\n      }\n    });\n\n    _defineProperty(this, \"_onOpen\", function (data) {\n      if (_this.key === data.key) {\n        console.log(\"_onOpen\");\n        _this._readyState = ReadyState.OPEN;\n\n        _this.dispatchEvent(\"open\", {});\n      }\n    });\n\n    this.key = generateKey;\n    generateKey += 1;\n    this.registerBridge();\n\n    _dsbridge.default.call(\"ws.setup\", {\n      url: url,\n      key: this.key\n    });\n  } // TODO:测试该状态\n\n\n  _createClass(WebSocketBridge, [{\n    key: \"send\",\n    value: function send(data) {\n      if (data instanceof ArrayBuffer) {\n        var str = encodeArrayBufferAsBase64(data);\n\n        _dsbridge.default.call(\"ws.send\", {\n          data: str,\n          type: \"arraybuffer\",\n          key: this.key\n        });\n      } else {\n        _dsbridge.default.call(\"ws.send\", {\n          data: data,\n          type: \"string\",\n          key: this.key\n        });\n      }\n    }\n  }, {\n    key: \"close\",\n    value: function close(code, reason) {\n      console.log(\"close: \", {\n        code: code,\n        reason: reason\n      });\n      this._readyState = ReadyState.CLOSING;\n\n      _dsbridge.default.call(\"ws.close\", {\n        code: code,\n        reason: reason,\n        key: this.key\n      }); // 主动调用 websocket 的 close 方法，web 端应该仍然会主动触发 close 事件。这部分操作，在 native 端实现\n\n    }\n  }, {\n    key: \"addEventListener\",\n    value: function addEventListener(type, listener, options) {\n      this.listeners[type] = this.listeners[type] || [];\n      this.onceListeners[type] = this.onceListeners[type] || [];\n\n      if (options && options !== true && options.once) {\n        this.onceListeners[type].push(listener);\n      } else {\n        this.listeners[type].push(listener);\n      }\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener(type, listener, options) {\n      if (!(type in this.listeners)) {\n        return;\n      }\n\n      var stack = this.listeners[type];\n\n      for (var i = 0, l = stack.length; i < l; i++) {\n        if (stack[i] === listener) {\n          stack.splice(i, 1);\n          break;\n        }\n      }\n\n      var onceStack = this.onceListeners[type];\n\n      for (var _i = 0, _l = onceStack.length; _i < _l; _i++) {\n        if (onceStack[_i] === listener) {\n          onceStack.splice(_i, 1);\n          break;\n        }\n      }\n    }\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(type, event) {\n      if (!(type in this.listeners)) {\n        return true;\n      }\n\n      var stack = this.listeners[type].slice();\n\n      for (var i = 0, l = stack.length; i < l; i++) {\n        stack[i].call(this, event);\n      }\n\n      var onceStack = this.onceListeners[type].slice();\n\n      for (var _i2 = 0, _l2 = onceStack.length; _i2 < _l2; _i2++) {\n        onceStack[_i2].call(this, event);\n\n        onceStack.splice(_i2, 1);\n      }\n\n      return true;\n    }\n  }, {\n    key: \"registerBridge\",\n    value: function registerBridge() {\n      var _this2 = this;\n\n      _dsbridge.default.register(\"ws\", {\n        onError: this._onError,\n        onMessage: this._onMessage,\n        onClose: this._onClose,\n        onOpen: this._onOpen\n      });\n\n      if (true) {\n        _dsbridge.default.register(\"ws.readyState\", function () {\n          return _this2._readyState;\n        });\n\n        _dsbridge.default.register(\"ws.mockCloseFromJs\", function () {\n          _this2.close(0, '');\n        });\n      }\n    }\n  }, {\n    key: \"readyState\",\n    get: function get() {\n      return this._readyState;\n    } // TODO:实现该值\n\n  }, {\n    key: \"bufferedAmount\",\n    get: function get() {\n      return this._bufferedAmount;\n    }\n  }]);\n\n  return WebSocketBridge;\n}();\n\nexports.WebSocketBridge = WebSocketBridge;\n\n//# sourceURL=webpack://whiteboard-bridge/./src/WebSocket.ts?");

/***/ }),

/***/ 16139:
/*!*********************************!*\
  !*** ./src/bridge/Displayer.ts ***!
  \*********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.registerDisplayerBridge = registerDisplayerBridge;\nexports.DisplayerBridge = exports.AsyncDisplayerBridge = void 0;\n\nvar _ = __webpack_require__(/*! . */ 70396);\n\nvar _BoundConvert = __webpack_require__(/*! ../utils/BoundConvert */ 51126);\n\nvar _html2canvas = _interopRequireDefault(__webpack_require__(/*! html2canvas */ 61120));\n\nvar _Funs = __webpack_require__(/*! ../utils/Funs */ 28388);\n\nvar _App = __webpack_require__(/*! ../App */ 6167);\n\nvar _Logger = __webpack_require__(/*! ../utils/Logger */ 38789);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar displayerNameSpace = \"displayer\";\nvar asyncDisplayerNameSpace = \"displayerAsync\";\n\nfunction registerDisplayerBridge(aDisplayer) {\n  (0, _.register)(displayerNameSpace, new DisplayerBridge(aDisplayer));\n  (0, _.registerAsyn)(asyncDisplayerNameSpace, new AsyncDisplayerBridge(aDisplayer));\n  (0, _Funs.addBridgeLogHook)([displayerNameSpace, asyncDisplayerNameSpace], _Logger.logger);\n}\n\nfunction urlContentToDataUri(url) {\n  return fetch(url).then(function (response) {\n    return response.blob();\n  }).then(function (blob) {\n    return new Promise(function (callback) {\n      var reader = new FileReader();\n\n      reader.onload = function () {\n        callback(this.result);\n      };\n\n      reader.readAsDataURL(blob);\n    });\n  });\n}\n\nfunction setBackgroundColor(r, g, b, a) {\n  var div = document.getElementById(_App.whiteboardContainerId);\n\n  if (div) {\n    var color = a === 1 || a === undefined ? \"rgb(\".concat(r, \", \").concat(g, \", \").concat(b, \")\") : \"rgb(\".concat(r, \", \").concat(g, \", \").concat(b, \")\");\n    div.style.background = color;\n  } else {\n    console.log(_App.whiteboardContainerId, \"not exist\");\n  }\n}\n\nwindow.setBackgroundColor = setBackgroundColor;\n\nfunction screenshot(scenePath, fn, responseCallback) {\n  var div = document.createElement(\"div\");\n  div.setAttribute(\"class\", \"shadow\");\n  var whiteboard = document.getElementById(_App.whiteboardContainerId);\n\n  if (whiteboard) {\n    var color = window.getComputedStyle(whiteboard).backgroundColor;\n    div.style.background = color;\n  }\n\n  document.body.appendChild(div);\n  fn(scenePath, div, div.clientWidth, div.clientHeight);\n  (0, _html2canvas.default)(div, {\n    useCORS: true,\n    onclone: function () {\n      var _onclone = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(div) {\n        var images, _i, _images, i, image, url, dataUri;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                images = Array.from(div.getElementsByTagName(\"image\"));\n                _i = 0, _images = images;\n\n              case 2:\n                if (!(_i < _images.length)) {\n                  _context.next = 13;\n                  break;\n                }\n\n                i = _images[_i];\n                image = i;\n                url = image.href.baseVal; // https://github.com/niklasvh/html2canvas/issues/2104\n\n                _context.next = 8;\n                return urlContentToDataUri(url);\n\n              case 8:\n                dataUri = _context.sent;\n                image.href.baseVal = dataUri;\n\n              case 10:\n                _i++;\n                _context.next = 2;\n                break;\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function onclone(_x) {\n        return _onclone.apply(this, arguments);\n      }\n\n      return onclone;\n    }()\n  }).then(function (canvas) {\n    var data = canvas.toDataURL();\n    document.body.removeChild(div);\n    responseCallback(data);\n  });\n}\n\nvar AsyncDisplayerBridge = function AsyncDisplayerBridge(aDisplayer) {\n  var _this = this;\n\n  _classCallCheck(this, AsyncDisplayerBridge);\n\n  this.aDisplayer = aDisplayer;\n\n  _defineProperty(this, \"sceneSnapshot\", function (scenePath, responseCallback) {\n    screenshot(scenePath, _this.aDisplayer.fillSceneSnapshot.bind(_this.aDisplayer), responseCallback);\n  });\n\n  _defineProperty(this, \"scenePreview\", function (scenePath, responseCallback) {\n    screenshot(scenePath, _this.aDisplayer.scenePreview.bind(_this.aDisplayer), responseCallback);\n  });\n};\n\nexports.AsyncDisplayerBridge = AsyncDisplayerBridge;\n\nvar DisplayerBridge = function DisplayerBridge(aDisplayer) {\n  var _this2 = this;\n\n  _classCallCheck(this, DisplayerBridge);\n\n  this.aDisplayer = aDisplayer;\n\n  _defineProperty(this, \"postMessage\", function (payload) {\n    var message = {\n      name: \"parentWindow\",\n      payload: payload\n    };\n    var iframes = document.getElementsByTagName(\"iframe\");\n\n    if (iframes.length > 0 && iframes[0].contentWindow) {\n      var iframe = iframes[0];\n      iframe.contentWindow.postMessage(message, \"*\");\n    } else if (iframes.length == 0) {\n      (0, _Logger.logger)(\"postmessage fail\", \"no frames exist\");\n    } else {\n      (0, _Logger.logger)(\"postmessage fail\", \"no content Window\");\n    }\n  });\n\n  _defineProperty(this, \"scaleIframeToFit\", function () {\n    var iframeBridge = _this2.aDisplayer.getInvisiblePlugin(\"IframeBridge\");\n\n    if (iframeBridge) {\n      iframeBridge.scaleIframeToFit();\n    }\n  });\n\n  _defineProperty(this, \"setDisableCameraTransform\", function (disable) {\n    _this2.aDisplayer.disableCameraTransform = disable;\n  });\n\n  _defineProperty(this, \"getDisableCameraTransform\", function () {\n    return _this2.aDisplayer.disableCameraTransform;\n  });\n\n  _defineProperty(this, \"setCameraBound\", function (nativeBound) {\n    var bound = (0, _BoundConvert.convertBound)(nativeBound);\n\n    _this2.aDisplayer.setCameraBound(bound);\n  });\n\n  _defineProperty(this, \"getMemberState\", function (memberId) {\n    return JSON.stringify(_this2.aDisplayer.memberState(memberId));\n  });\n\n  _defineProperty(this, \"getWindowManagerAttributes\", function () {\n    var _window$manager, _window$manager$appMa;\n\n    return JSON.parse(JSON.stringify((_window$manager = window.manager) === null || _window$manager === void 0 ? void 0 : (_window$manager$appMa = _window$manager.appManager) === null || _window$manager$appMa === void 0 ? void 0 : _window$manager$appMa.attributes));\n  });\n\n  _defineProperty(this, \"scenePathType\", function (path) {\n    return _this2.aDisplayer.scenePathType(path);\n  });\n\n  _defineProperty(this, \"entireScenes\", function () {\n    return _this2.aDisplayer.entireScenes();\n  });\n\n  _defineProperty(this, \"getScene\", function (scenePath) {\n    return _this2.aDisplayer.getScene(scenePath);\n  });\n\n  _defineProperty(this, \"moveCamera\", function (camera) {\n    _this2.aDisplayer.moveCamera(camera);\n  });\n\n  _defineProperty(this, \"moveCameraToContain\", function (contain) {\n    _this2.aDisplayer.moveCameraToContain(contain);\n  });\n\n  _defineProperty(this, \"refreshViewSize\", function () {\n    _this2.aDisplayer.refreshViewSize();\n  });\n\n  _defineProperty(this, \"scalePptToFit\", function (mode) {\n    _this2.aDisplayer.scalePptToFit(mode);\n  });\n\n  _defineProperty(this, \"convertToPointInWorld\", function (x, y) {\n    var point = _this2.aDisplayer.convertToPointInWorld({\n      x: x,\n      y: y\n    });\n\n    return point;\n  });\n\n  _defineProperty(this, \"setBackgroundColor\", function (r, g, b, a) {\n    var div = document.getElementById(_App.whiteboardContainerId);\n    var color = a === 1 || a === undefined ? \"rgb(\".concat(r, \", \").concat(g, \", \").concat(b, \")\") : \"rgb(\".concat(r, \", \").concat(g, \", \").concat(b, \")\");\n    div.style.background = color;\n  });\n\n  _defineProperty(this, \"addHighFrequencyEventListener\", function (eventName, interval) {\n    _this2.aDisplayer.addMagixEventListener(eventName, function (evts) {\n      var uuid = _this2.aDisplayer.uuid || _this2.aDisplayer.roomUUID;\n      var nativeEvts = evts.map(function (evt) {\n        return {\n          uuid: uuid,\n          eventName: evt.event,\n          payload: evt.payload,\n          scope: evt.scope,\n          authorId: evt.authorId\n        };\n      });\n\n      if ((0, _Funs.isRoom)(_this2.aDisplayer)) {\n        (0, _.call)(\"room.fireHighFrequencyEvent\", JSON.stringify(nativeEvts));\n      } else {\n        (0, _.call)(\"player.fireHighFrequencyEvent\", JSON.stringify(nativeEvts));\n      }\n    }, interval);\n  });\n\n  _defineProperty(this, \"addMagixEventListener\", function (eventName) {\n    _this2.aDisplayer.addMagixEventListener(eventName, function (evt) {\n      var uuid = _this2.aDisplayer.uuid || _this2.aDisplayer.roomUUID;\n      var nativeEvt = {\n        uuid: uuid,\n        eventName: evt.event,\n        payload: evt.payload,\n        scope: evt.scope,\n        authorId: evt.authorId\n      };\n\n      if ((0, _Funs.isRoom)(_this2.aDisplayer)) {\n        (0, _.call)(\"room.fireMagixEvent\", JSON.stringify(nativeEvt));\n      } else {\n        (0, _.call)(\"player.fireMagixEvent\", JSON.stringify(nativeEvt));\n      }\n    });\n  });\n\n  _defineProperty(this, \"removeMagixEventListener\", function (eventName) {\n    _this2.aDisplayer.removeMagixEventListener(eventName);\n  });\n} // 尝试让 native 端直接传入 json 格式\n;\n\nexports.DisplayerBridge = DisplayerBridge;\n\n//# sourceURL=webpack://whiteboard-bridge/./src/bridge/Displayer.ts?");

/***/ }),

/***/ 15581:
/*!*******************************!*\
  !*** ./src/bridge/Manager.ts ***!
  \*******************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.addManagerListener = addManagerListener;\n\nvar _RoomCallbackHandler = __webpack_require__(/*! ../native/RoomCallbackHandler */ 42470);\n\nvar _ = __webpack_require__(/*! . */ 70396);\n\nfunction addManagerListener(manager, logger, handler) {\n  window.manager = manager;\n\n  if (handler instanceof _RoomCallbackHandler.RoomCallbackHandler) {\n    addRoomListener(manager, logger, handler);\n  } else {\n    addReplayListener(manager, logger, handler);\n  }\n}\n\nfunction addRoomListener(manager, logger, handler) {\n  // 多窗口模式下，原有的 cameraState 意义丢失，通过这种方式，来替代显示 mainView 的 cameraState\n  manager.emitter.on(\"cameraStateChange\", function (cameraState) {\n    handler.onRoomStateChanged({\n      cameraState: cameraState\n    });\n  });\n  manager.emitter.on(\"sceneStateChange\", function (sceneState) {\n    (0, _.call)(\"room.fireRoomStateChanged\", JSON.stringify({\n      sceneState: sceneState\n    }));\n  });\n  manager.emitter.on(\"boxStateChange\", function (state) {\n    handler.onRoomStateChanged({\n      windowBoxState: state\n    });\n  });\n  manager.emitter.on(\"pageStateChange\", function (pageState) {\n    handler.onRoomStateChanged({\n      pageState: pageState\n    });\n  });\n  manager.emitter.on(\"canRedoStepsChange\", function (canRedoSteps) {\n    handler.onCanRedoStepsUpdate(canRedoSteps);\n  });\n  manager.emitter.on(\"canUndoStepsChange\", function (canUndoSteps) {\n    handler.onCanUndoStepsUpdate(canUndoSteps);\n  });\n  manager.emitter.on(\"loadApp\", function (event) {\n    logger(\"loadApp\", event);\n  });\n}\n\nfunction addReplayListener(manager, logger, handler) {\n  // 多窗口模式下，原有的 cameraState 意义丢失，通过这种方式，来替代显示 mainView 的 cameraState\n  manager.emitter.on(\"cameraStateChange\", function (cameraState) {\n    handler.onPlayerStateChanged({\n      cameraState: cameraState\n    });\n  });\n  manager.emitter.on(\"sceneStateChange\", function (sceneState) {\n    (0, _.call)(\"player.onPlayerStateChanged\", JSON.stringify({\n      sceneState: sceneState\n    }));\n  });\n  manager.emitter.on(\"boxStateChange\", function (state) {\n    handler.onPlayerStateChanged({\n      windowBoxState: state\n    });\n  });\n  manager.emitter.on(\"pageStateChange\", function (pageState) {\n    handler.onPlayerStateChanged({\n      pageState: pageState\n    });\n  });\n  manager.emitter.on(\"loadApp\", function (event) {\n    logger(\"loadApp\", event); // dsBridge.call(\"manager.onLoadApp\", event);\n  });\n}\n\n//# sourceURL=webpack://whiteboard-bridge/./src/bridge/Manager.ts?");

/***/ }),

/***/ 82969:
/*!******************************!*\
  !*** ./src/bridge/Player.ts ***!
  \******************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.registerPlayerBridge = registerPlayerBridge;\nexports.PlayerAsyncBridge = exports.PlayerStateBridge = void 0;\n\nvar _whiteWebSdk = __webpack_require__(/*! white-web-sdk */ 63314);\n\nvar _Displayer = __webpack_require__(/*! ./Displayer */ 16139);\n\nvar _combinePlayer = __webpack_require__(/*! @netless/combine-player */ 45387);\n\nvar _Funs = __webpack_require__(/*! ../utils/Funs */ 28388);\n\nvar _Logger = __webpack_require__(/*! ../utils/Logger */ 38789);\n\nvar _ = __webpack_require__(/*! . */ 70396);\n\nvar _whiteboardBridgeTypes = __webpack_require__(/*! @netless/whiteboard-bridge-types */ 11358);\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction registerPlayerBridge(aPlayer, aCombinePlayer, lastSchedule, callbackHandler) {\n  window.player = aPlayer;\n  window.combinePlayer = aCombinePlayer;\n  (0, _Displayer.registerDisplayerBridge)(aPlayer);\n  (0, _.registerAsyn)(_whiteboardBridgeTypes.playerNameSpace, new PlayerAsyncBridge(aPlayer, aCombinePlayer));\n  (0, _.register)(_whiteboardBridgeTypes.playerStateNameSpace, new PlayerStateBridge(aPlayer, aCombinePlayer));\n  (0, _Funs.addBridgeLogHook)([_whiteboardBridgeTypes.playerNameSpace, _whiteboardBridgeTypes.playerStateNameSpace], _Logger.logger);\n\n  if (aCombinePlayer) {\n    aCombinePlayer.setOnStatusChange(function (status, message) {\n      lastSchedule.time = 0;\n\n      switch (status) {\n        case _combinePlayer.PublicCombinedStatus.Pause:\n          {\n            callbackHandler.onPhaseChanged(_whiteWebSdk.PlayerPhase.Pause);\n            break;\n          }\n\n        case _combinePlayer.PublicCombinedStatus.PauseBuffering:\n        case _combinePlayer.PublicCombinedStatus.PauseSeeking:\n        case _combinePlayer.PublicCombinedStatus.PlayingBuffering:\n        case _combinePlayer.PublicCombinedStatus.PlayingSeeking:\n          {\n            callbackHandler.onPhaseChanged(_whiteWebSdk.PlayerPhase.Buffering);\n            break;\n          }\n\n        case _combinePlayer.PublicCombinedStatus.Ended:\n          {\n            callbackHandler.onPhaseChanged(_whiteWebSdk.PlayerPhase.Ended);\n            break;\n          }\n\n        case _combinePlayer.PublicCombinedStatus.Playing:\n          {\n            callbackHandler.onPhaseChanged(_whiteWebSdk.PlayerPhase.Playing);\n            break;\n          }\n\n        case _combinePlayer.PublicCombinedStatus.Disabled:\n          {\n            callbackHandler.onStoppedWithError(new Error(message));\n            break;\n          }\n\n        default:\n          {\n            break;\n          }\n      }\n    });\n  }\n}\n\nvar PlayerStateBridge = function PlayerStateBridge(player, combinePlayer) {\n  var _this = this;\n\n  _classCallCheck(this, PlayerStateBridge);\n\n  this.player = player;\n  this.combinePlayer = combinePlayer;\n\n  _defineProperty(this, \"roomUUID\", function () {\n    return _this.player.roomUUID;\n  });\n\n  _defineProperty(this, \"phase\", function () {\n    return _this.player.phase;\n  });\n\n  _defineProperty(this, \"playerState\", function () {\n    // 如果没有加载第一帧，会直接报错\n    try {\n      var state = _this.player.state;\n\n      if (window.manager) {\n        state = _objectSpread(_objectSpread(_objectSpread({}, state), {\n          windowBoxState: window.manager.boxState\n        }), {}, {\n          cameraState: window.manager.cameraState,\n          sceneState: window.manager.sceneState\n        });\n      }\n\n      return state;\n    } catch (error) {\n      return {};\n    }\n  });\n\n  _defineProperty(this, \"isPlayable\", function () {\n    return _this.player.isPlayable;\n  });\n\n  _defineProperty(this, \"playbackSpeed\", function () {\n    if (_this.combinePlayer) {\n      return _this.combinePlayer.playbackRate;\n    }\n\n    return _this.player.playbackSpeed;\n  });\n\n  _defineProperty(this, \"timeInfo\", function () {\n    var _this$player = _this.player,\n        progressTime = _this$player.progressTime,\n        timeDuration = _this$player.timeDuration,\n        framesCount = _this$player.framesCount,\n        beginTimestamp = _this$player.beginTimestamp;\n    var info = {\n      scheduleTime: progressTime,\n      timeDuration: timeDuration,\n      framesCount: framesCount,\n      beginTimestamp: beginTimestamp\n    };\n    return info;\n  });\n};\n\nexports.PlayerStateBridge = PlayerStateBridge;\n\nvar PlayerAsyncBridge = function PlayerAsyncBridge(player, combinePlayer) {\n  var _this2 = this;\n\n  _classCallCheck(this, PlayerAsyncBridge);\n\n  this.player = player;\n  this.combinePlayer = combinePlayer;\n\n  _defineProperty(this, \"play\", function () {\n    if (_this2.combinePlayer) {\n      _this2.combinePlayer.play();\n    } else {\n      _this2.player.play();\n    }\n  });\n\n  _defineProperty(this, \"pause\", function () {\n    if (_this2.combinePlayer) {\n      _this2.combinePlayer.pause();\n    } else {\n      _this2.player.pause();\n    }\n  });\n\n  _defineProperty(this, \"stop\", function () {\n    try {\n      _this2.player.stop();\n    } catch (error) {\n      console.log(\"stop:\", error.message);\n    }\n  });\n\n  _defineProperty(this, \"seekToScheduleTime\", function (beginTime, responseCallback) {\n    if (_this2.combinePlayer) {\n      _this2.combinePlayer.seek(beginTime);\n\n      if (responseCallback) {\n        setTimeout(function () {\n          responseCallback(_whiteWebSdk.PlayerSeekingResult.Success);\n        }, 0);\n      }\n    } else {\n      _this2.player.seekToProgressTime(beginTime).then(function (result) {\n        if (responseCallback) {\n          responseCallback(result);\n        }\n      });\n    }\n  });\n\n  _defineProperty(this, \"setObserverMode\", function (observerMode) {\n    _this2.player.setObserverMode(observerMode);\n  });\n\n  _defineProperty(this, \"setPlaybackSpeed\", function (rate) {\n    if (_this2.combinePlayer) {\n      _this2.combinePlayer.playbackRate = rate;\n    } else {\n      _this2.player.playbackSpeed = rate;\n    }\n  });\n};\n\nexports.PlayerAsyncBridge = PlayerAsyncBridge;\n\n//# sourceURL=webpack://whiteboard-bridge/./src/bridge/Player.ts?");

/***/ }),

/***/ 61558:
/*!****************************!*\
  !*** ./src/bridge/Room.ts ***!
  \****************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.registerBridgeRoom = registerBridgeRoom;\nexports.RoomStateBridge = exports.RoomAsyncBridge = exports.RoomSyncBridge = exports.RoomPPTBridge = exports.RoomBridge = void 0;\n\nvar _windowManager = __webpack_require__(/*! @netless/window-manager */ 70732);\n\nvar _dsbridge = _interopRequireDefault(__webpack_require__(/*! dsbridge */ 70781));\n\nvar _whiteWebSdk = __webpack_require__(/*! white-web-sdk */ 63314);\n\nvar _Funs = __webpack_require__(/*! ../utils/Funs */ 28388);\n\nvar _Logger = __webpack_require__(/*! ../utils/Logger */ 38789);\n\nvar _Displayer = __webpack_require__(/*! ./Displayer */ 16139);\n\nvar _2 = __webpack_require__(/*! . */ 70396);\n\nvar _whiteboardBridgeTypes = __webpack_require__(/*! @netless/whiteboard-bridge-types */ 11358);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _createForOfIteratorHelper(o) { if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _wrapRegExp(re, groups) { _wrapRegExp = function _wrapRegExp(re, groups) { return new BabelRegExp(re, undefined, groups); }; var _RegExp = _wrapNativeSuper(RegExp); var _super = RegExp.prototype; var _groups = new WeakMap(); function BabelRegExp(re, flags, groups) { var _this = _RegExp.call(this, re, flags); _groups.set(_this, groups || _groups.get(re)); return _this; } _inherits(BabelRegExp, _RegExp); BabelRegExp.prototype.exec = function (str) { var result = _super.exec.call(this, str); if (result) result.groups = buildGroups(result, this); return result; }; BabelRegExp.prototype[Symbol.replace] = function (str, substitution) { if (typeof substitution === \"string\") { var groups = _groups.get(this); return _super[Symbol.replace].call(this, str, substitution.replace(/\\$<([^>]+)>/g, function (_, name) { return \"$\" + groups[name]; })); } else if (typeof substitution === \"function\") { var _this = this; return _super[Symbol.replace].call(this, str, function () { var args = []; args.push.apply(args, arguments); if (_typeof(args[args.length - 1]) !== \"object\") { args.push(buildGroups(args, _this)); } return substitution.apply(this, args); }); } else { return _super[Symbol.replace].call(this, str, substitution); } }; function buildGroups(result, re) { var g = _groups.get(re); return Object.keys(g).reduce(function (groups, name) { groups[name] = result[g[name]]; return groups; }, Object.create(null)); } return _wrapRegExp.apply(this, arguments); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction registerBridgeRoom(aRoom) {\n  window.room = aRoom;\n  (0, _Displayer.registerDisplayerBridge)(aRoom); // FIXME:同步方法尽量还是放在同步方法里。\n  // 由于 Android 不方便改，暂时只把新加的 get 方法放在此处。dsbridge 注册时，同一个注册内容，会被覆盖，而不是合并。\n\n  (0, _2.register)(_whiteboardBridgeTypes.roomNamespace, new RoomBridge());\n  (0, _2.registerAsyn)(_whiteboardBridgeTypes.roomNamespace, new RoomAsyncBridge(aRoom));\n  (0, _2.register)(_whiteboardBridgeTypes.pptNamespace, new RoomPPTBridge(aRoom));\n  (0, _2.register)(_whiteboardBridgeTypes.roomSyncNamespace, new RoomSyncBridge(aRoom));\n  (0, _2.register)(_whiteboardBridgeTypes.roomStateNamespace, new RoomStateBridge(aRoom));\n  (0, _Funs.addBridgeLogHook)([_whiteboardBridgeTypes.roomNamespace, _whiteboardBridgeTypes.pptNamespace, _whiteboardBridgeTypes.roomSyncNamespace, _whiteboardBridgeTypes.roomStateNamespace], _Logger.logger);\n}\n\nfunction makeSlideParams(scenes) {\n  var scenesWithoutPPT = scenes.map(function (v) {\n    return {\n      name: v.name\n    };\n  });\n  var taskId = \"\";\n  var url = \"\"; // e.g. \"ppt(x)://prefix/dynamicConvert/{taskId}/1.slide\"\n\n  var pptSrcRE = /*#__PURE__*/_wrapRegExp(/^pptx?(:\\/\\/[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uFEFE\\uFF00-\\uFFFF]+?dynamicConvert)\\/([0-9A-Z_a-z]+)\\//, {\n    prefix: 1,\n    taskId: 2\n  });\n\n  var _iterator = _createForOfIteratorHelper(scenes),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var ppt = _step.value.ppt;\n\n      if (!ppt || !ppt.src.startsWith(\"ppt\")) {\n        continue;\n      }\n\n      var match = pptSrcRE.exec(ppt.src);\n\n      if (!match || !match.groups) {\n        continue;\n      }\n\n      taskId = match.groups.taskId;\n      url = \"https\" + match.groups.prefix;\n      break;\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return {\n    scenesWithoutPPT: scenesWithoutPPT,\n    taskId: taskId,\n    url: url\n  };\n}\n\nfunction addSlideApp(scenePath, title, scenes) {\n  var _makeSlideParams = makeSlideParams(scenes),\n      scenesWithoutPPT = _makeSlideParams.scenesWithoutPPT,\n      taskId = _makeSlideParams.taskId,\n      url = _makeSlideParams.url;\n\n  try {\n    if (taskId && url) {\n      return window.manager.addApp({\n        // TODO: extract to a constant\n        kind: \"Slide\",\n        options: {\n          scenePath: scenePath,\n          title: title,\n          scenes: scenesWithoutPPT\n        },\n        attributes: {\n          taskId: taskId,\n          url: url\n        }\n      });\n    } else {\n      return window.manager.addApp({\n        kind: _windowManager.BuiltinApps.DocsViewer,\n        options: {\n          scenePath: scenePath,\n          title: title,\n          scenes: scenes\n        }\n      });\n    }\n  } catch (err) {\n    (0, _Logger.logger)(\"addSlideApp error\", err);\n    return Promise.reject();\n  }\n}\n\nfunction updateIframePluginState(room) {\n  // iframe 根据 disableDeviceInputs 禁用操作，主动修改该值后，需要调用 updateIframePluginState 来更新状态\n  // tslint:disable-next-line:no-unused-expression\n  room.getInvisiblePlugin(\"IframeBridge\") && room.getInvisiblePlugin(\"IframeBridge\").computedZindex(); // tslint:disable-next-line:no-unused-expression\n\n  room.getInvisiblePlugin(\"IframeBridge\") && room.getInvisiblePlugin(\"IframeBridge\").updateStyle();\n}\n\nvar RoomBridge = /*#__PURE__*/function () {\n  function RoomBridge() {\n    _classCallCheck(this, RoomBridge);\n  }\n\n  _createClass(RoomBridge, [{\n    key: \"setWindowManagerAttributes\",\n    value: function setWindowManagerAttributes(attributes) {\n      var _window$manager, _window$manager2;\n\n      (_window$manager = window.manager) === null || _window$manager === void 0 ? void 0 : _window$manager.setAttributes(attributes);\n      (_window$manager2 = window.manager) === null || _window$manager2 === void 0 ? void 0 : _window$manager2.refresh();\n    }\n  }, {\n    key: \"setContainerSizeRatio\",\n    value: function setContainerSizeRatio(ratio) {\n      var _window$manager3;\n\n      (_window$manager3 = window.manager) === null || _window$manager3 === void 0 ? void 0 : _window$manager3.setContainerSizeRatio(ratio);\n    }\n  }, {\n    key: \"setPrefersColorScheme\",\n    value: function setPrefersColorScheme(scheme) {\n      var _window$manager4;\n\n      (_window$manager4 = window.manager) === null || _window$manager4 === void 0 ? void 0 : _window$manager4.setPrefersColorScheme(scheme);\n    }\n  }]);\n\n  return RoomBridge;\n}();\n\nexports.RoomBridge = RoomBridge;\n\nvar RoomPPTBridge = function RoomPPTBridge(room) {\n  var _this2 = this;\n\n  _classCallCheck(this, RoomPPTBridge);\n\n  this.room = room;\n\n  _defineProperty(this, \"nextStep\", function () {\n    _this2.room.pptNextStep();\n  });\n\n  _defineProperty(this, \"previousStep\", function () {\n    _this2.room.pptPreviousStep();\n  });\n};\n\nexports.RoomPPTBridge = RoomPPTBridge;\n\nvar RoomSyncBridge = function RoomSyncBridge(room) {\n  var _this3 = this;\n\n  _classCallCheck(this, RoomSyncBridge);\n\n  this.room = room;\n\n  _defineProperty(this, \"syncBlockTimestamp\", function (timestamp) {\n    _this3.room.syncBlockTimestamp(timestamp);\n  });\n\n  _defineProperty(this, \"disableSerialization\", function (disable) {\n    _this3.room.disableSerialization = disable;\n    /** 单窗口且开启序列化主动触发一次redo,undo次数回调 */\n\n    if (!disable && window.manager == null) {\n      _dsbridge.default.call(\"room.fireCanUndoStepsUpdate\", _this3.room.canUndoSteps);\n\n      _dsbridge.default.call(\"room.fireCanRedoStepsUpdate\", _this3.room.canRedoSteps);\n    }\n  });\n\n  _defineProperty(this, \"copy\", function () {\n    _this3.room.copy();\n  });\n\n  _defineProperty(this, \"paste\", function () {\n    _this3.room.paste();\n  });\n\n  _defineProperty(this, \"duplicate\", function () {\n    _this3.room.duplicate();\n  });\n\n  _defineProperty(this, \"delete\", function () {\n    _this3.room.delete();\n  });\n\n  _defineProperty(this, \"disableEraseImage\", function (disable) {\n    _this3.room.disableEraseImage = disable;\n  });\n};\n\nexports.RoomSyncBridge = RoomSyncBridge;\n\nvar RoomAsyncBridge = function RoomAsyncBridge(room) {\n  var _this4 = this;\n\n  _classCallCheck(this, RoomAsyncBridge);\n\n  this.room = room;\n\n  _defineProperty(this, \"redo\", function (responseCallback) {\n    var count = _this4.room.redo();\n\n    responseCallback(count);\n  });\n\n  _defineProperty(this, \"undo\", function (responseCallback) {\n    var count = _this4.room.undo();\n\n    responseCallback(count);\n  });\n\n  _defineProperty(this, \"canRedoSteps\", function (responseCallback) {\n    if (window.manager) {\n      responseCallback(window.manager.canRedoSteps);\n    } else {\n      responseCallback(_this4.room.canRedoSteps);\n    }\n  });\n\n  _defineProperty(this, \"canUndoSteps\", function (responseCallback) {\n    if (window.manager) {\n      responseCallback(window.manager.canUndoSteps);\n    } else {\n      responseCallback(_this4.room.canUndoSteps);\n    }\n  });\n\n  _defineProperty(this, \"setGlobalState\", function (modifyState) {\n    _this4.room.setGlobalState(modifyState);\n  });\n\n  _defineProperty(this, \"setScenePath\", function (scenePath, responseCallback) {\n    try {\n      if (window.manager) {\n        window.manager.setMainViewScenePath(scenePath);\n      } else {\n        _this4.room.setScenePath(scenePath);\n      }\n\n      responseCallback(JSON.stringify({}));\n    } catch (e) {\n      return responseCallback(JSON.stringify({\n        __error: {\n          message: e.message,\n          jsStack: e.stack\n        }\n      }));\n    }\n  });\n\n  _defineProperty(this, \"addPage\", function (params, responseCallback) {\n    if (window.manager) {\n      window.manager.addPage(params).then(function () {\n        if (responseCallback) {\n          responseCallback();\n        }\n      }).catch(function (e) {\n        if (responseCallback) {\n          return responseCallback(JSON.stringify({\n            __error: {\n              message: e.message,\n              jsStack: e.stack\n            }\n          }));\n        }\n      });\n    } else {\n      var dir = _this4.room.state.sceneState.contextPath;\n      var after = params.after;\n\n      if (after) {\n        var tIndex = _this4.room.state.sceneState.index + 1;\n\n        _this4.room.putScenes(dir, [params.scene || {}], tIndex);\n      } else {\n        _this4.room.putScenes(dir, [params.scene || {}]);\n      }\n\n      if (responseCallback) {\n        setTimeout(function () {\n          responseCallback();\n        }, 0);\n      }\n    }\n  });\n\n  _defineProperty(this, \"removePage\", function (params, responseCallback) {\n    if (window.manager) {\n      window.manager.removePage(params.index).then(function (success) {\n        responseCallback(success);\n      }).catch(function (e) {\n        return responseCallback(JSON.stringify({\n          __error: {\n            message: e.message,\n            jsStack: e.stack\n          }\n        }));\n      });\n    } else {\n      var scenes = _this4.room.state.sceneState.scenes;\n      var index = params.index || _this4.room.state.sceneState.index;\n\n      if (scenes.length == 1) {\n        (0, _Logger.logger)(\"removePage warning\", \"can't remove the last page\");\n        return responseCallback(JSON.stringify({\n          __error: {\n            message: \"removePage warning, can't remove the last page\"\n          }\n        }));\n      }\n\n      if (index < scenes.length) {\n        var dir = _this4.room.state.sceneState.contextPath; // 根场景时 contextPath 为 \"/\", 其他场景示例 \"/context/Path\"\n\n        var dirWithSlash = dir.endsWith(\"/\") ? dir : dir + \"/\";\n\n        _this4.room.removeScenes(dirWithSlash + scenes[index].name);\n\n        return responseCallback(true);\n      } else {\n        (0, _Logger.logger)(\"removePage warning\", \"index out of range\");\n        return responseCallback(JSON.stringify({\n          __error: {\n            message: 'removePage warning, index out of range'\n          }\n        }));\n      }\n    }\n  });\n\n  _defineProperty(this, \"nextPage\", function (responseCallback) {\n    if (window.manager) {\n      window.manager.nextPage().then(function (result) {\n        responseCallback(result);\n      });\n    } else {\n      var nextIndex = _this4.room.state.sceneState.index + 1;\n\n      if (nextIndex < _this4.room.state.sceneState.scenes.length) {\n        _this4.room.setSceneIndex(nextIndex);\n\n        responseCallback(true);\n      } else {\n        responseCallback(false);\n      }\n    }\n  });\n\n  _defineProperty(this, \"prevPage\", function (responseCallback) {\n    if (window.manager) {\n      window.manager.prevPage().then(function (result) {\n        responseCallback(result);\n      });\n    } else {\n      var prevIndex = _this4.room.state.sceneState.index - 1;\n\n      if (prevIndex >= 0) {\n        _this4.room.setSceneIndex(prevIndex);\n\n        responseCallback(true);\n      } else {\n        responseCallback(false);\n      }\n    }\n  });\n\n  _defineProperty(this, \"setMemberState\", function (memberState) {\n    _this4.room.setMemberState(memberState);\n  });\n\n  _defineProperty(this, \"setViewMode\", function (viewMode) {\n    var mode = _whiteWebSdk.ViewMode[viewMode];\n\n    if (mode === undefined) {\n      mode = _whiteWebSdk.ViewMode.Freedom;\n    }\n\n    if (window.manager) {\n      window.manager.setViewMode(mode);\n    } else {\n      _this4.room.setViewMode(mode);\n    }\n  });\n\n  _defineProperty(this, \"setWritable\", function (writable, responseCallback) {\n    _this4.room.setWritable(writable).then(function () {\n      responseCallback(JSON.stringify({\n        isWritable: _this4.room.isWritable,\n        observerId: _this4.room.observerId\n      }));\n    }).catch(function (error) {\n      responseCallback(JSON.stringify({\n        __error: {\n          message: error.message,\n          jsStack: error.stack\n        }\n      }));\n    });\n  });\n\n  _defineProperty(this, \"getMemberState\", function (responseCallback) {\n    return responseCallback(JSON.stringify(_this4.room.state.memberState));\n  });\n\n  _defineProperty(this, \"getGlobalState\", function (responseCallback) {\n    return responseCallback(JSON.stringify(_this4.room.state.globalState));\n  });\n\n  _defineProperty(this, \"getSceneState\", function (responseCallback) {\n    return responseCallback(JSON.stringify(_this4.room.state.sceneState));\n  });\n\n  _defineProperty(this, \"getRoomMembers\", function (responseCallback) {\n    return responseCallback(JSON.stringify(_this4.room.state.roomMembers));\n  });\n\n  _defineProperty(this, \"getPptImages\", function (responseCallback) {\n    var ppts = _this4.room.state.sceneState.scenes.map(function (s) {\n      if (s.ppt) {\n        return s.ppt.src;\n      } else {\n        return \"\";\n      }\n    });\n\n    return responseCallback(JSON.stringify(ppts));\n  });\n\n  _defineProperty(this, \"setSceneIndex\", function (index, responseCallback) {\n    try {\n      if (window.manager) {\n        window.manager.setMainViewSceneIndex(index);\n      } else {\n        _this4.room.setSceneIndex(index);\n      }\n\n      responseCallback(JSON.stringify({}));\n    } catch (error) {\n      responseCallback(JSON.stringify({\n        __error: {\n          message: error.message,\n          jsStack: error.stack\n        }\n      }));\n    }\n  });\n\n  _defineProperty(this, \"getScenes\", function (responseCallback) {\n    return responseCallback(JSON.stringify(_this4.room.state.sceneState.scenes));\n  });\n\n  _defineProperty(this, \"getZoomScale\", function (responseCallback) {\n    var scale = 1;\n\n    if (window.manager) {\n      scale = window.manager.mainView.camera.scale;\n    } else {\n      scale = _this4.room.state.cameraState.scale;\n    }\n\n    return responseCallback(JSON.stringify(scale));\n  });\n\n  _defineProperty(this, \"getBroadcastState\", function (responseCallback) {\n    return responseCallback(JSON.stringify(_this4.room.state.broadcastState));\n  });\n\n  _defineProperty(this, \"getRoomPhase\", function (responseCallback) {\n    return responseCallback(_this4.room.phase);\n  });\n\n  _defineProperty(this, \"disconnect\", function (responseCallback) {\n    _this4.room.disconnect().then(function () {\n      responseCallback();\n    });\n  });\n\n  _defineProperty(this, \"zoomChange\", function (scale) {\n    _this4.room.moveCamera({\n      scale: scale\n    });\n  });\n\n  _defineProperty(this, \"disableCameraTransform\", function (disableCamera) {\n    _this4.room.disableCameraTransform = disableCamera;\n  });\n\n  _defineProperty(this, \"disableDeviceInputs\", function (disable) {\n    if (window.manager) {\n      window.manager.setReadonly(disable);\n    }\n\n    _this4.room.disableDeviceInputs = disable;\n    updateIframePluginState(_this4.room);\n  });\n\n  _defineProperty(this, \"disableOperations\", function (disableOperations) {\n    _this4.room.disableCameraTransform = disableOperations;\n    _this4.room.disableDeviceInputs = disableOperations;\n    updateIframePluginState(_this4.room);\n  });\n\n  _defineProperty(this, \"disableWindowOperation\", function (disable) {\n    var _window$manager5;\n\n    (_window$manager5 = window.manager) === null || _window$manager5 === void 0 ? void 0 : _window$manager5.setReadonly(disable);\n  });\n\n  _defineProperty(this, \"putScenes\", function (dir, scenes, index, responseCallback) {\n    _this4.room.putScenes(dir, scenes, index);\n\n    responseCallback(JSON.stringify(_this4.room.state.sceneState));\n  });\n\n  _defineProperty(this, \"removeScenes\", function (dirOrPath) {\n    _this4.room.removeScenes(dirOrPath);\n  });\n\n  _defineProperty(this, \"moveScene\", function (source, target) {\n    _this4.room.moveScene(source, target);\n  });\n\n  _defineProperty(this, \"insertText\", function (x, y, textContent, responseCallback) {\n    if (window.manager) {\n      responseCallback(window.manager.mainView.insertText(x, y, textContent));\n    } else {\n      responseCallback(_this4.room.insertText(x, y, textContent));\n    }\n  });\n\n  _defineProperty(this, \"cleanScene\", function (retainPpt) {\n    var retain;\n\n    if (retainPpt === undefined) {\n      retain = false;\n    } else {\n      retain = !!retainPpt;\n    }\n\n    _this4.room.cleanCurrentScene(retainPpt);\n  });\n\n  _defineProperty(this, \"insertImage\", function (imageInfo) {\n    _this4.room.insertImage(imageInfo);\n  });\n\n  _defineProperty(this, \"insertVideo\", function (videoInfo) {// TODO: ???\n  });\n\n  _defineProperty(this, \"completeImageUpload\", function (uuid, url) {\n    _this4.room.completeImageUpload(uuid, url);\n  });\n\n  _defineProperty(this, \"dispatchMagixEvent\", function (event) {\n    _this4.room.dispatchMagixEvent(event.eventName, event.payload);\n  });\n\n  _defineProperty(this, \"setTimeDelay\", function (delay) {\n    _this4.room.timeDelay = delay;\n  });\n\n  _defineProperty(this, \"addApp\", function (kind, options, attributes, responseCallback) {\n    if (window.manager) {\n      if (kind === \"Slide\") {\n        // 检查是否使用由 projector 转换服务\n        var _ref = attributes || {},\n            taskId = _ref.taskId,\n            url = _ref.url;\n\n        if (taskId && url) {\n          window.manager.addApp({\n            kind: kind,\n            options: options,\n            attributes: attributes\n          }).then(function (appId) {\n            responseCallback(appId);\n          });\n        } else {\n          // 兼容Canvas版本转换服务\n          var opts = options;\n          addSlideApp(opts.scenePath, opts.title, opts.scenes).then(function (appId) {\n            responseCallback(appId);\n          });\n        }\n      } else {\n        window.manager.addApp({\n          kind: kind,\n          options: options,\n          attributes: attributes\n        }).then(function (appId) {\n          responseCallback(appId);\n        });\n      }\n    }\n  });\n\n  _defineProperty(this, \"closeApp\", function (appId, responseCallback) {\n    if (window.manager) {\n      window.manager.closeApp(appId).then(function () {\n        return responseCallback(undefined);\n      });\n    }\n  });\n\n  _defineProperty(this, \"getSyncedState\", function (responseCallback) {\n    var result = window.syncedStore ? window.syncedStore.attributes : {};\n    responseCallback(JSON.stringify(result));\n  });\n};\n\nexports.RoomAsyncBridge = RoomAsyncBridge;\n\nvar RoomStateBridge = function RoomStateBridge(room) {\n  var _this5 = this;\n\n  _classCallCheck(this, RoomStateBridge);\n\n  this.room = room;\n\n  _defineProperty(this, \"getRoomState\", function () {\n    var state = _this5.room.state;\n\n    if (window.manager) {\n      return _objectSpread(_objectSpread(_objectSpread({}, state), {\n        windowBoxState: window.manager.boxState\n      }), {}, {\n        cameraState: window.manager.cameraState,\n        sceneState: window.manager.sceneState\n      }, {\n        pageState: window.manager.pageState\n      });\n    } else {\n      return _objectSpread(_objectSpread({}, state), (0, _Funs.createPageState)(state.sceneState));\n    }\n  });\n\n  _defineProperty(this, \"getTimeDelay\", function () {\n    return _this5.room.timeDelay;\n  });\n\n  _defineProperty(this, \"getPhase\", function () {\n    return _this5.room.phase;\n  });\n\n  _defineProperty(this, \"isWritable\", function () {\n    return _this5.room.isWritable;\n  });\n\n  _defineProperty(this, \"debugInfo\", function () {\n    try {\n      var screen = _this5.room.screen;\n      var camera = screen.camera,\n          visionRectangle = screen.visionRectangle,\n          adaptedRectangle = screen.adaptedRectangle,\n          divElement = screen.divElement;\n      return {\n        camera: camera,\n        visionRectangle: visionRectangle,\n        adaptedRectangle: adaptedRectangle,\n        divWidth: divElement.clientWidth,\n        divHeight: divElement.clientHeight\n      };\n    } catch (error) {\n      return {\n        error: error.message\n      };\n    }\n  });\n};\n\nexports.RoomStateBridge = RoomStateBridge;\n\n//# sourceURL=webpack://whiteboard-bridge/./src/bridge/Room.ts?");

/***/ }),

/***/ 5294:
/*!***************************!*\
  !*** ./src/bridge/SDK.ts ***!
  \***************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.setWhiteboardDivGetter = setWhiteboardDivGetter;\nexports.registerSDKBridge = registerSDKBridge;\nexports.sdkCallbackHandler = void 0;\n\nvar _ImgError = __webpack_require__(/*! ../utils/ImgError */ 54505);\n\nvar _cursorTool = __webpack_require__(/*! @netless/cursor-tool */ 28401);\n\nvar _ = __webpack_require__(/*! . */ 70396);\n\nvar _whiteWebSdk = __webpack_require__(/*! white-web-sdk */ 63314);\n\nvar _whiteVideoPlugin = __webpack_require__(/*! @netless/white-video-plugin */ 9207);\n\nvar _whiteAudioPlugin = __webpack_require__(/*! @netless/white-audio-plugin */ 99256);\n\nvar _whiteVideoPlugin2 = __webpack_require__(/*! @netless/white-video-plugin2 */ 37223);\n\nvar _whiteAudioPlugin2 = __webpack_require__(/*! @netless/white-audio-plugin2 */ 63813);\n\nvar _videoJsPlugin = __webpack_require__(/*! @netless/video-js-plugin */ 77024);\n\nvar _appSlide = _interopRequireWildcard(__webpack_require__(/*! @netless/app-slide */ 42560));\n\nvar _windowManager = __webpack_require__(/*! @netless/window-manager */ 70732);\n\nvar _syncedStore = __webpack_require__(/*! @netless/synced-store */ 38298);\n\nvar _iframeBridge = __webpack_require__(/*! @netless/iframe-bridge */ 73623);\n\nvar _Logger = __webpack_require__(/*! ../utils/Logger */ 38789);\n\nvar _BoundConvert = __webpack_require__(/*! ../utils/BoundConvert */ 51126);\n\nvar _Manager = __webpack_require__(/*! ./Manager */ 15581);\n\nvar _RoomCallbackHandler = __webpack_require__(/*! ../native/RoomCallbackHandler */ 42470);\n\nvar _Funs = __webpack_require__(/*! ../utils/Funs */ 28388);\n\nvar _ReplayerCallbackHandler = __webpack_require__(/*! ../native/ReplayerCallbackHandler */ 15748);\n\nvar _combinePlayer = _interopRequireDefault(__webpack_require__(/*! @netless/combine-player */ 45387));\n\nvar _Room = __webpack_require__(/*! ./Room */ 61558);\n\nvar _Player = __webpack_require__(/*! ./Player */ 82969);\n\nvar _Rtc = __webpack_require__(/*! ../Rtc */ 39310);\n\nvar _SDKCallbackHandler = __webpack_require__(/*! ../native/SDKCallbackHandler */ 25219);\n\nvar _SyncedStore = __webpack_require__(/*! ./SyncedStore */ 97839);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _createForOfIteratorHelper(o) { if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar sdk = undefined;\nvar room = undefined;\nvar player = undefined;\nvar rtcClient = new _Rtc.Rtc();\nvar nativeConfig = undefined;\nvar cursorAdapter = undefined;\nvar sdkCallbackHandler = new _SDKCallbackHandler.SDKCallbackHandler();\nexports.sdkCallbackHandler = sdkCallbackHandler;\nvar divRef;\nvar textareaCSSId = \"whiteboard-native-css\";\nvar nativeFontFaceCSS = \"whiteboard-native-font-face\";\n(0, _whiteWebSdk.setAsyncModuleLoadMode)(_whiteWebSdk.AsyncModuleLoadMode.StoreAsBase64);\n\nfunction setWhiteboardDivGetter(aGetter) {\n  divRef = aGetter;\n}\n\nvar sdkNameSpace = \"sdk\";\n\nfunction registerSDKBridge() {\n  var sdk = new SDKBridge();\n  (0, _.registerAsyn)(sdkNameSpace, sdk);\n  window.newWhiteSdk = sdk.newWhiteSdk;\n  window.joinRoom = sdk.joinRoom;\n  window.replayRoom = sdk.replayRoom;\n  (0, _Funs.addBridgeLogHook)([sdkNameSpace], _Logger.logger);\n}\n\nfunction removeBind() {\n  if (window.manager) {\n    window.manager.destroy();\n    window.manager = undefined;\n    room = undefined;\n    player = undefined;\n  } else if (room) {\n    room.bindHtmlElement(null); // FIXME:最好执行 disconnect，但是由于如果主动执行 disconnect，会触发状态变化回调，导致一定问题，所以此处不能主动执行。\n\n    room = undefined;\n  } else if (player) {\n    player.bindHtmlElement(null);\n    player = undefined;\n  }\n\n  if (window.syncedStore) {\n    (0, _SyncedStore.destorySyncedStore)();\n  }\n}\n\nfunction mountWindowManager(_x, _x2, _x3) {\n  return _mountWindowManager.apply(this, arguments);\n}\n\nfunction _mountWindowManager() {\n  _mountWindowManager = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(room, handler, windowParams) {\n    var manager;\n    return regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return _windowManager.WindowManager.mount(_objectSpread(_objectSpread({\n              // 高比宽\n              containerSizeRatio: 9 / 16,\n              chessboard: true,\n              cursor: !!cursorAdapter\n            }, windowParams), {}, {\n              container: divRef(),\n              room: room\n            }));\n\n          case 2:\n            manager = _context4.sent;\n            (0, _Manager.addManagerListener)(manager, _Logger.logger, handler);\n            return _context4.abrupt(\"return\", manager);\n\n          case 5:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _mountWindowManager.apply(this, arguments);\n}\n\nvar SDKBridge = function SDKBridge() {\n  _classCallCheck(this, SDKBridge);\n\n  _defineProperty(this, \"newWhiteSdk\", function (config) {\n    var urlInterrupter = config.enableInterrupterAPI ? function (url) {\n      var modifyUrl = sdkCallbackHandler.onUrlInterrupter(url);\n\n      if (modifyUrl.length > 0) {\n        return modifyUrl;\n      }\n\n      return url;\n    } : undefined;\n\n    var log = config.log,\n        __nativeTags = config.__nativeTags,\n        __platform = config.__platform,\n        __netlessUA = config.__netlessUA,\n        initializeOriginsStates = config.initializeOriginsStates,\n        useMultiViews = config.useMultiViews,\n        userCursor = config.userCursor,\n        enableInterrupterAPI = config.enableInterrupterAPI,\n        routeBackup = config.routeBackup,\n        enableRtcIntercept = config.enableRtcIntercept,\n        enableImgErrorCallback = config.enableImgErrorCallback,\n        enableIFramePlugin = config.enableIFramePlugin,\n        enableSyncedStore = config.enableSyncedStore,\n        restConfig = _objectWithoutProperties(config, [\"log\", \"__nativeTags\", \"__platform\", \"__netlessUA\", \"initializeOriginsStates\", \"useMultiViews\", \"userCursor\", \"enableInterrupterAPI\", \"routeBackup\", \"enableRtcIntercept\", \"enableImgErrorCallback\", \"enableIFramePlugin\", \"enableSyncedStore\"]);\n\n    (0, _Logger.enableReport)(!!log);\n    nativeConfig = config;\n\n    if (__platform) {\n      window.__platform = __platform;\n    }\n\n    if (__netlessUA) {\n      window.__netlessUA = __netlessUA.join(' ');\n    }\n\n    if (enableImgErrorCallback) {\n      (0, _ImgError.hookCreateElement)();\n    }\n\n    cursorAdapter = !!userCursor ? new _cursorTool.CursorTool() : undefined;\n\n    if (__nativeTags) {\n      window.__nativeTags = _objectSpread(_objectSpread({}, window.__nativeTags), __nativeTags);\n    }\n\n    var pptParams = restConfig.pptParams || {};\n\n    if (enableRtcIntercept) {\n      pptParams.rtcClient = rtcClient;\n    }\n\n    var videoJsLogger = function videoJsLogger(message) {\n      for (var _len = arguments.length, optionalParams = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        optionalParams[_key - 1] = arguments[_key];\n      }\n\n      _Logger.logger.apply(void 0, [\"videoJsPlugin\", message].concat(optionalParams));\n    };\n\n    var windowPlugins = [];\n\n    var _iterator = _createForOfIteratorHelper(window.pluginParams || []),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var value = _step.value;\n\n        var p = _defineProperty({}, value.name, window[value.variable]);\n\n        windowPlugins.push(p);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    var plugins = (0, _whiteWebSdk.createPlugins)(_objectSpread({\n      \"video\": _whiteVideoPlugin.videoPlugin,\n      \"audio\": _whiteAudioPlugin.audioPlugin,\n      \"video2\": _whiteVideoPlugin2.videoPlugin2,\n      \"audio2\": _whiteAudioPlugin2.audioPlugin2,\n      \"video.js\": (0, _videoJsPlugin.videoJsPlugin)({\n        log: videoJsLogger\n      })\n    }, windowPlugins));\n    plugins.setPluginContext(\"video.js\", {\n      enable: false,\n      verbose: true\n    });\n\n    var _iterator2 = _createForOfIteratorHelper(window.pluginContext || []),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var v = _step2.value;\n        plugins.setPluginContext(v.name, v.params);\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n\n    window.plugins = plugins;\n    var slideKind = \"Slide\";\n\n    _windowManager.WindowManager.register({\n      kind: slideKind,\n      appOptions: {\n        debug: false\n      },\n      addHooks: _appSlide.addHooks,\n      src: function () {\n        var _src = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n          return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  return _context.abrupt(\"return\", _appSlide.default);\n\n                case 1:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        function src() {\n          return _src.apply(this, arguments);\n        }\n\n        return src;\n      }()\n    });\n\n    var _iterator3 = _createForOfIteratorHelper(window.appRegisterParams || []),\n        _step3;\n\n    try {\n      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n        var _v = _step3.value;\n\n        _windowManager.WindowManager.register({\n          kind: _v.kind,\n          appOptions: _v.appOptions,\n          src: _v.variable ? window[_v.variable] : _v.url\n        });\n      } // 新增的插件需要确定是否依赖此状态\n\n    } catch (err) {\n      _iterator3.e(err);\n    } finally {\n      _iterator3.f();\n    }\n\n    var useMobXState = enableSyncedStore || enableIFramePlugin || useMultiViews;\n    var invisiblePlugins = [].concat(_toConsumableArray(enableIFramePlugin ? [_iframeBridge.IframeBridge] : []), _toConsumableArray(enableSyncedStore ? [_syncedStore.SyncedStore] : []));\n\n    try {\n      sdk = new _whiteWebSdk.WhiteWebSdk(_objectSpread(_objectSpread({}, restConfig), {}, {\n        invisiblePlugins: invisiblePlugins,\n        wrappedComponents: enableIFramePlugin ? [_iframeBridge.IframeWrapper] : undefined,\n        plugins: plugins,\n        urlInterrupter: urlInterrupter,\n        onWhiteSetupFailed: function onWhiteSetupFailed(e) {\n          sdkCallbackHandler.onSetupFail(e);\n        },\n        pptParams: pptParams,\n        useMobXState: useMobXState\n      }));\n      window.sdk = sdk;\n    } catch (e) {\n      sdkCallbackHandler.onSetupFail(e);\n    }\n  });\n\n  _defineProperty(this, \"joinRoom\", function (nativeParams, responseCallback) {\n    if (!sdk) {\n      responseCallback(JSON.stringify({\n        __error: {\n          message: \"sdk init failed\"\n        }\n      }));\n      return;\n    }\n\n    removeBind();\n\n    var _nativeParams$timeout = nativeParams.timeout,\n        timeout = _nativeParams$timeout === void 0 ? 45000 : _nativeParams$timeout,\n        cameraBound = nativeParams.cameraBound,\n        windowParams = nativeParams.windowParams,\n        disableCameraTransform = nativeParams.disableCameraTransform,\n        nativeWebSocket = nativeParams.nativeWebSocket,\n        joinRoomParams = _objectWithoutProperties(nativeParams, [\"timeout\", \"cameraBound\", \"windowParams\", \"disableCameraTransform\", \"nativeWebSocket\"]);\n\n    var _ref = nativeConfig,\n        useMultiViews = _ref.useMultiViews,\n        enableSyncedStore = _ref.enableSyncedStore;\n\n    var invisiblePlugins = _toConsumableArray(useMultiViews ? [_windowManager.WindowManager] : []);\n\n    window.nativeWebSocket = nativeWebSocket;\n    var roomCallbackHandler = new _RoomCallbackHandler.RoomCallbackHandler();\n    sdk.joinRoom(_objectSpread(_objectSpread({\n      useMultiViews: useMultiViews,\n      disableCameraTransform: disableCameraTransform\n    }, joinRoomParams), {}, {\n      invisiblePlugins: invisiblePlugins,\n      cursorAdapter: useMultiViews ? undefined : cursorAdapter,\n      cameraBound: (0, _BoundConvert.convertBound)(cameraBound),\n      disableMagixEventDispatchLimit: useMultiViews\n    }), _objectSpread(_objectSpread({}, roomCallbackHandler), sdkCallbackHandler)).then( /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(aRoom) {\n        var _window$syncedStore;\n\n        var roomState, manager;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                removeBind();\n                room = aRoom;\n                roomState = room.state;\n                /** native 端，把 sdk 初始化时的 useMultiViews 记录下来，再初始化 sdk 的时候，同步传递进来，避免用户写两遍 */\n\n                if (!useMultiViews) {\n                  _context2.next = 16;\n                  break;\n                }\n\n                _context2.prev = 4;\n                _context2.next = 7;\n                return mountWindowManager(room, roomCallbackHandler, windowParams);\n\n              case 7:\n                manager = _context2.sent;\n                roomState = _objectSpread(_objectSpread(_objectSpread({}, roomState), {\n                  windowBoxState: manager.boxState\n                }), {}, {\n                  cameraState: manager.cameraState,\n                  sceneState: manager.sceneState\n                }, {\n                  pageState: manager.pageState\n                });\n                _context2.next = 14;\n                break;\n\n              case 11:\n                _context2.prev = 11;\n                _context2.t0 = _context2[\"catch\"](4);\n                return _context2.abrupt(\"return\", responseCallback(JSON.stringify({\n                  __error: {\n                    message: _context2.t0.message,\n                    jsStack: _context2.t0.stack\n                  }\n                })));\n\n              case 14:\n                _context2.next = 19;\n                break;\n\n              case 16:\n                room.bindHtmlElement(divRef());\n\n                if (!!cursorAdapter) {\n                  cursorAdapter.setRoom(room);\n                }\n\n                roomState = _objectSpread(_objectSpread({}, roomState), (0, _Funs.createPageState)(roomState.sceneState));\n\n              case 19:\n                if (!enableSyncedStore) {\n                  _context2.next = 22;\n                  break;\n                }\n\n                _context2.next = 22;\n                return (0, _SyncedStore.initSyncedStore)(room, roomCallbackHandler);\n\n              case 22:\n                (0, _Room.registerBridgeRoom)(room);\n                return _context2.abrupt(\"return\", responseCallback(JSON.stringify({\n                  state: roomState,\n                  observerId: room.observerId,\n                  isWritable: room.isWritable,\n                  syncedStore: (_window$syncedStore = window.syncedStore) === null || _window$syncedStore === void 0 ? void 0 : _window$syncedStore.attributes\n                })));\n\n              case 24:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[4, 11]]);\n      }));\n\n      return function (_x4) {\n        return _ref2.apply(this, arguments);\n      };\n    }()).catch(function (e) {\n      return responseCallback(JSON.stringify({\n        __error: {\n          message: e.message,\n          jsStack: e.stack\n        }\n      }));\n    });\n  });\n\n  _defineProperty(this, \"replayRoom\", function (nativeParams, responseCallback) {\n    var _nativeConfig2;\n\n    // nativeReplayParams = nativeParams;\n    if (!sdk) {\n      responseCallback(JSON.stringify({\n        __error: {\n          message: \"sdk init failed\"\n        }\n      }));\n      return;\n    }\n\n    var _nativeParams$step = nativeParams.step,\n        step = _nativeParams$step === void 0 ? 500 : _nativeParams$step,\n        cameraBound = nativeParams.cameraBound,\n        mediaURL = nativeParams.mediaURL,\n        windowParams = nativeParams.windowParams,\n        replayParams = _objectWithoutProperties(nativeParams, [\"step\", \"cameraBound\", \"mediaURL\", \"windowParams\"]);\n\n    removeBind();\n    var _ref3 = nativeConfig,\n        useMultiViews = _ref3.useMultiViews,\n        enableSyncedStore = _ref3.enableSyncedStore;\n    var replayCallbackHanlder;\n\n    var phaseChangeHook = function phaseChangeHook(player, phase) {\n      var _nativeConfig;\n\n      if ((phase === _whiteWebSdk.PlayerPhase.Pause || phase === _whiteWebSdk.PlayerPhase.Playing) && !!((_nativeConfig = nativeConfig) === null || _nativeConfig === void 0 ? void 0 : _nativeConfig.useMultiViews) && player.getInvisiblePlugin(_windowManager.WindowManager.kind) === null && !window.manager) {\n        var _room = player;\n        var _ref4 = nativeParams,\n            _windowParams = _ref4.windowParams; // sdk 内部，先触发回调，才更新 invisiblePlugins，所以要带一个延迟，放到回调后执行\n\n        setTimeout(function () {\n          mountWindowManager(_room, replayCallbackHanlder, _windowParams).catch(function (e) {\n            console.error(\"mount error\", e);\n          });\n        }, 0);\n      }\n    };\n\n    replayCallbackHanlder = new _ReplayerCallbackHandler.ReplayerCallbackHandler(step, !!mediaURL, !!((_nativeConfig2 = nativeConfig) === null || _nativeConfig2 === void 0 ? void 0 : _nativeConfig2.enableIFramePlugin), phaseChangeHook);\n    sdk.replayRoom(_objectSpread(_objectSpread({}, replayParams), {}, {\n      cursorAdapter: useMultiViews ? undefined : cursorAdapter,\n      cameraBound: (0, _BoundConvert.convertBound)(cameraBound),\n      invisiblePlugins: useMultiViews ? [_windowManager.WindowManager] : [],\n      useMultiViews: useMultiViews\n    }), _objectSpread(_objectSpread({}, replayCallbackHanlder), sdkCallbackHandler)).then( /*#__PURE__*/function () {\n      var _ref5 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(mPlayer) {\n        var _cursorAdapter, videoDom, combinePlayerFactory, combinePlayer, scheduleTime, timeDuration, framesCount, beginTimestamp;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                removeBind();\n                player = mPlayer; // 多窗口需要调用 player 的 getInvisiblePlugin 方法，获取数据，而这些数据需要在 player 成功初始化，首次进入 play || pause 状态，才能获取到，所以回放时，多窗口需要异步\n\n                if (!useMultiViews) {\n                  mPlayer.bindHtmlElement(divRef());\n\n                  if (!!cursorAdapter) {\n                    (_cursorAdapter = cursorAdapter) === null || _cursorAdapter === void 0 ? void 0 : _cursorAdapter.setPlayer(player);\n                  }\n                }\n\n                if (!enableSyncedStore) {\n                  _context3.next = 6;\n                  break;\n                }\n\n                _context3.next = 6;\n                return (0, _SyncedStore.initSyncedStore)(player, replayCallbackHanlder);\n\n              case 6:\n                if (mediaURL) {\n                  // FIXME: 多次初始化，会造成一些问题\n                  videoDom = document.createElement(\"video\");\n                  videoDom.setAttribute(\"x5-video-player-type\", \"h5-page\");\n                  videoDom.setAttribute(\"playsInline\", \"\");\n                  videoDom.setAttribute(\"style\", \"display:none;\");\n                  videoDom.setAttribute(\"class\", \"video-js\");\n                  document.body.appendChild(videoDom);\n                  combinePlayerFactory = new _combinePlayer.default(player, {\n                    url: mediaURL,\n                    videoDOM: videoDom\n                  });\n                  combinePlayer = combinePlayerFactory.create();\n                  (0, _Player.registerPlayerBridge)(mPlayer, combinePlayer, _ReplayerCallbackHandler.lastSchedule, replayCallbackHanlder);\n                } else {\n                  (0, _Player.registerPlayerBridge)(mPlayer, undefined, _ReplayerCallbackHandler.lastSchedule, replayCallbackHanlder);\n                }\n\n                scheduleTime = mPlayer.progressTime, timeDuration = mPlayer.timeDuration, framesCount = mPlayer.framesCount, beginTimestamp = mPlayer.beginTimestamp;\n                return _context3.abrupt(\"return\", responseCallback(JSON.stringify({\n                  timeInfo: {\n                    scheduleTime: scheduleTime,\n                    timeDuration: timeDuration,\n                    framesCount: framesCount,\n                    beginTimestamp: beginTimestamp\n                  }\n                })));\n\n              case 9:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function (_x5) {\n        return _ref5.apply(this, arguments);\n      };\n    }()).catch(function (e) {\n      return responseCallback(JSON.stringify({\n        __error: {\n          message: e.message,\n          jsStack: e.stack\n        }\n      }));\n    });\n  });\n\n  _defineProperty(this, \"isPlayable\", function (nativeReplayParams, responseCallback) {\n    if (!sdk) {\n      responseCallback(false);\n      return;\n    }\n\n    var _nativeReplayParams$s = nativeReplayParams.step,\n        step = _nativeReplayParams$s === void 0 ? 500 : _nativeReplayParams$s,\n        cameraBound = nativeReplayParams.cameraBound,\n        replayParams = _objectWithoutProperties(nativeReplayParams, [\"step\", \"cameraBound\"]);\n\n    sdk.isPlayable(_objectSpread({}, replayParams)).then(function (isPlayable) {\n      responseCallback(isPlayable);\n    });\n  });\n\n  _defineProperty(this, \"asyncInsertFontFaces\", function (fontFaces, responseCallback) {\n    var _iterator4 = _createForOfIteratorHelper(fontFaces),\n        _step4;\n\n    try {\n      var _loop = function _loop() {\n        var f = _step4.value;\n        var fontWeight = f[\"font-weight\"];\n        var fontStyle = f[\"font-style\"];\n        var unicodeRange = f[\"unicode-range\"];\n        var description = JSON.parse(JSON.stringify({\n          weight: fontWeight,\n          style: fontStyle,\n          unicodeRange: unicodeRange\n        }));\n        var font = new FontFace(f[\"font-family\"], f.src, description); // FIXME: responseCallback 只能调用一次，第二次再调用，就没有效果了\n\n        font.load().then(function (fontFaces) {\n          (0, _Logger.logger)(\"asyncInsertFontFaces load font success\", f);\n          document.fonts.add(font);\n          responseCallback({\n            success: true,\n            fontFace: f\n          });\n        }).catch(function (e) {\n          (0, _Logger.logger)(\"asyncInsertFontFaces load font failed\", f);\n          responseCallback({\n            success: false,\n            fontFace: f,\n            error: e\n          });\n        });\n      };\n\n      for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n        _loop();\n      }\n    } catch (err) {\n      _iterator4.e(err);\n    } finally {\n      _iterator4.f();\n    }\n  });\n\n  _defineProperty(this, \"updateNativeFontFaceCSS\", function (fontFaces) {\n    var sheet = document.getElementById(nativeFontFaceCSS);\n\n    if (!sheet) {\n      sheet = document.createElement(\"style\");\n      sheet.id = nativeFontFaceCSS;\n      document.body.appendChild(sheet);\n    }\n\n    var fontCss = fontFaces.map(function (v) {\n      var css = Object.keys(v).reduce(function (p, c) {\n        var value = v[c]; // 部分字段有空格，需要使用\"\"包裹，但有\"会导致 src 字段等出现问题，不能无脑包裹\n\n        if (value.includes(\" \")) {\n          return \"\".concat(p, \"\\n\").concat(c, \": \\\"\").concat(v[c], \"\\\";\");\n        } else {\n          return \"\".concat(p, \"\\n\").concat(c, \": \").concat(v[c], \";\");\n        }\n      }, \"\");\n      return \"@font-face {\\n                \".concat(css, \"\\n            }\");\n    });\n    sheet.innerHTML = fontCss.join(\"\\n\");\n  });\n\n  _defineProperty(this, \"updateNativeTextareaFont\", function (fonts) {\n    var sheet = document.getElementById(textareaCSSId);\n\n    if (!sheet) {\n      sheet = document.createElement(\"style\");\n      sheet.id = textareaCSSId;\n      document.body.appendChild(sheet);\n    }\n\n    var fontNames = fonts.map(function (f) {\n      return \"\\\"\".concat(f, \"\\\"\");\n    }).join(\",\");\n    sheet.innerHTML = \".netless-whiteboard textarea {\\n            font-family: \".concat(fontNames, \"; \\n        }\");\n  });\n\n  _defineProperty(this, \"registerApp\", function (para, responseCallback) {\n    if (para.javascriptString) {\n      var variable = para.variable;\n      var src = Function(\"\\n                    \".concat(para.javascriptString, \";\\n                    if (typeof \").concat(variable, \" == \\\"undefined\\\") {\\n                        return undefined; \\n                    } else {\\n                        return \").concat(variable, \";\\n                    } \\n                    \"))();\n\n      if (!src) {\n        responseCallback(JSON.stringify({\n          __error: {\n            message: \"variable does not exist\"\n          }\n        }));\n        return;\n      } else {\n        _windowManager.WindowManager.register({\n          kind: para.kind,\n          src: src,\n          appOptions: para.appOptions\n        }).then(function () {\n          return responseCallback();\n        });\n      }\n    } else if (para.url) {\n      _windowManager.WindowManager.register({\n        kind: para.kind,\n        src: para.url,\n        appOptions: para.appOptions\n      }).then(function () {\n        return responseCallback();\n      });\n    }\n  });\n};\n\n//# sourceURL=webpack://whiteboard-bridge/./src/bridge/SDK.ts?");

/***/ }),

/***/ 97839:
/*!***********************************!*\
  !*** ./src/bridge/SyncedStore.ts ***!
  \***********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.initSyncedStore = initSyncedStore;\nexports.destorySyncedStore = destorySyncedStore;\nexports.StoreBridge = exports.StoreAsyncBridge = void 0;\n\nvar _syncedStore = __webpack_require__(/*! @netless/synced-store */ 38298);\n\nvar _ = __webpack_require__(/*! . */ 70396);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar syncedStoreNamespace = \"store\";\nvar syncedStoreAsyncNamespace = \"store\";\nvar storages = new Map();\n\nfunction initSyncedStore(_x, _x2) {\n  return _initSyncedStore.apply(this, arguments);\n}\n\nfunction _initSyncedStore() {\n  _initSyncedStore = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(room, handler) {\n    var syncedStore;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _syncedStore.SyncedStore.init(room);\n\n          case 2:\n            syncedStore = _context.sent;\n            window.syncedStore = syncedStore;\n            (0, _.register)(syncedStoreNamespace, new StoreBridge(syncedStore, handler));\n            (0, _.registerAsyn)(syncedStoreAsyncNamespace, new StoreAsyncBridge(syncedStore, handler));\n            return _context.abrupt(\"return\", syncedStore);\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _initSyncedStore.apply(this, arguments);\n}\n\nfunction destorySyncedStore() {\n  window.syncedStore = undefined;\n  var cacheStorages = storages;\n  storages.clear();\n  cacheStorages.forEach(function (storage) {\n    storage.destroy();\n  });\n}\n\nvar StoreAsyncBridge = function StoreAsyncBridge(syncedStore, handler) {\n  var _this = this;\n\n  _classCallCheck(this, StoreAsyncBridge);\n\n  this.syncedStore = syncedStore;\n  this.handler = handler;\n\n  _defineProperty(this, \"connectStorage\", function (name, object, responseCallback) {\n    try {\n      var storage = _this.syncedStore.connectStorage(name, object);\n\n      storage.addStateChangedListener(function (diff) {\n        if (true) {\n          console.log(\"storage[\".concat(name, \"] state changed \").concat(JSON.stringify(diff)));\n        }\n\n        var data = {};\n        Object.keys(diff).forEach(function (key) {\n          if (diff[key]) {\n            data[key] = diff[key].newValue;\n          }\n        });\n\n        if (true) {\n          console.log(\"storage[\".concat(name, \"] state changed processed \").concat(JSON.stringify(data)));\n        }\n\n        _this.handler.onSyncedStoreUpdate({\n          name: name,\n          data: data\n        });\n      });\n      storages[name] = storage; // TODO check\n\n      responseCallback(JSON.stringify(storage.state));\n    } catch (e) {\n      responseCallback(JSON.stringify({\n        __error: {\n          message: e.message,\n          jsStack: e.stack\n        }\n      }));\n    }\n  });\n\n  _defineProperty(this, \"getStorageState\", function (name, responseCallback) {\n    var storage = storages[name];\n    return responseCallback(JSON.stringify((storage === null || storage === void 0 ? void 0 : storage.state) || {}));\n  });\n};\n\nexports.StoreAsyncBridge = StoreAsyncBridge;\n\nvar StoreBridge = function StoreBridge(syncedStore, handler) {\n  var _this2 = this;\n\n  _classCallCheck(this, StoreBridge);\n\n  this.syncedStore = syncedStore;\n  this.handler = handler;\n\n  _defineProperty(this, \"destroyStorage\", function (name) {\n    var storage = storages[name];\n    storage === null || storage === void 0 ? void 0 : storage.destroy();\n  });\n\n  _defineProperty(this, \"emptyStorage\", function (name) {\n    var storage = storages[name];\n    storage === null || storage === void 0 ? void 0 : storage.emptyStorage();\n  });\n\n  _defineProperty(this, \"deleteStorage\", function (name) {\n    var storage = storages[name];\n    storage === null || storage === void 0 ? void 0 : storage.deleteStorage();\n  });\n\n  _defineProperty(this, \"setStorageState\", function (name, partialState) {\n    var storage = storages[name];\n\n    if (storage && _this2.syncedStore.isWritable) {\n      storage.setState(partialState);\n    }\n  });\n} // Destroy the Storage instance. The data will be kept.\n;\n\nexports.StoreBridge = StoreBridge;\n\n//# sourceURL=webpack://whiteboard-bridge/./src/bridge/SyncedStore.ts?");

/***/ }),

/***/ 70396:
/*!*****************************!*\
  !*** ./src/bridge/index.ts ***!
  \*****************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.call = call;\nexports.register = register;\nexports.registerAsyn = registerAsyn;\n\nvar _dsbridge = _interopRequireDefault(__webpack_require__(/*! dsbridge */ 70781));\n\nvar _webviewBridge = __webpack_require__(/*! @netless/webview-bridge */ 25608);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar rnBridge;\n\nif (window.ReactNativeWebView) {\n  rnBridge = new _webviewBridge.Bridge();\n  window.bridge = rnBridge;\n}\n\nfunction call(handlerName, args, responseCallback) {\n  if (rnBridge) {\n    rnBridge.call(handlerName, args, responseCallback);\n    return;\n  }\n\n  return _dsbridge.default.call(handlerName, args, responseCallback);\n}\n\nfunction register(handlerName, handler, async) {\n  if (rnBridge) {\n    rnBridge.register(handlerName, handler);\n    return;\n  }\n\n  return _dsbridge.default.register(handlerName, handler, async);\n}\n\nfunction registerAsyn(handlerName, handler) {\n  if (rnBridge) {\n    rnBridge.registerAsyn(handlerName, handler);\n    return;\n  }\n\n  return _dsbridge.default.registerAsyn(handlerName, handler);\n}\n\n//# sourceURL=webpack://whiteboard-bridge/./src/bridge/index.ts?");

/***/ }),

/***/ 36037:
/*!***********************!*\
  !*** ./src/index.tsx ***!
  \***********************/
/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n__webpack_require__(/*! core-js/modules/es.symbol */ 82526);\n\n__webpack_require__(/*! core-js/modules/es.symbol.description */ 41817);\n\n__webpack_require__(/*! core-js/modules/es.symbol.async-iterator */ 72443);\n\n__webpack_require__(/*! core-js/modules/es.symbol.has-instance */ 92401);\n\n__webpack_require__(/*! core-js/modules/es.symbol.is-concat-spreadable */ 8722);\n\n__webpack_require__(/*! core-js/modules/es.symbol.iterator */ 32165);\n\n__webpack_require__(/*! core-js/modules/es.symbol.match */ 69007);\n\n__webpack_require__(/*! core-js/modules/es.symbol.replace */ 83510);\n\n__webpack_require__(/*! core-js/modules/es.symbol.search */ 41840);\n\n__webpack_require__(/*! core-js/modules/es.symbol.species */ 6982);\n\n__webpack_require__(/*! core-js/modules/es.symbol.split */ 32159);\n\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive */ 96649);\n\n__webpack_require__(/*! core-js/modules/es.symbol.to-string-tag */ 39341);\n\n__webpack_require__(/*! core-js/modules/es.symbol.unscopables */ 60543);\n\n__webpack_require__(/*! core-js/modules/es.array.concat */ 92222);\n\n__webpack_require__(/*! core-js/modules/es.array.copy-within */ 50545);\n\n__webpack_require__(/*! core-js/modules/es.array.every */ 26541);\n\n__webpack_require__(/*! core-js/modules/es.array.fill */ 43290);\n\n__webpack_require__(/*! core-js/modules/es.array.filter */ 57327);\n\n__webpack_require__(/*! core-js/modules/es.array.find */ 69826);\n\n__webpack_require__(/*! core-js/modules/es.array.find-index */ 34553);\n\n__webpack_require__(/*! core-js/modules/es.array.flat */ 84944);\n\n__webpack_require__(/*! core-js/modules/es.array.flat-map */ 86535);\n\n__webpack_require__(/*! core-js/modules/es.array.for-each */ 89554);\n\n__webpack_require__(/*! core-js/modules/es.array.from */ 91038);\n\n__webpack_require__(/*! core-js/modules/es.array.includes */ 26699);\n\n__webpack_require__(/*! core-js/modules/es.array.index-of */ 82772);\n\n__webpack_require__(/*! core-js/modules/es.array.iterator */ 66992);\n\n__webpack_require__(/*! core-js/modules/es.array.last-index-of */ 94986);\n\n__webpack_require__(/*! core-js/modules/es.array.map */ 21249);\n\n__webpack_require__(/*! core-js/modules/es.array.of */ 26572);\n\n__webpack_require__(/*! core-js/modules/es.array.reduce */ 85827);\n\n__webpack_require__(/*! core-js/modules/es.array.reduce-right */ 96644);\n\n__webpack_require__(/*! core-js/modules/es.array.reverse */ 65069);\n\n__webpack_require__(/*! core-js/modules/es.array.slice */ 47042);\n\n__webpack_require__(/*! core-js/modules/es.array.some */ 5212);\n\n__webpack_require__(/*! core-js/modules/es.array.sort */ 2707);\n\n__webpack_require__(/*! core-js/modules/es.array.species */ 38706);\n\n__webpack_require__(/*! core-js/modules/es.array.splice */ 40561);\n\n__webpack_require__(/*! core-js/modules/es.array.unscopables.flat */ 33792);\n\n__webpack_require__(/*! core-js/modules/es.array.unscopables.flat-map */ 99244);\n\n__webpack_require__(/*! core-js/modules/es.array-buffer.constructor */ 18264);\n\n__webpack_require__(/*! core-js/modules/es.array-buffer.is-view */ 76938);\n\n__webpack_require__(/*! core-js/modules/es.array-buffer.slice */ 39575);\n\n__webpack_require__(/*! core-js/modules/es.date.to-json */ 5735);\n\n__webpack_require__(/*! core-js/modules/es.date.to-primitive */ 96078);\n\n__webpack_require__(/*! core-js/modules/es.function.has-instance */ 4855);\n\n__webpack_require__(/*! core-js/modules/es.json.to-string-tag */ 73706);\n\n__webpack_require__(/*! core-js/modules/es.map */ 51532);\n\n__webpack_require__(/*! core-js/modules/es.math.acosh */ 99752);\n\n__webpack_require__(/*! core-js/modules/es.math.asinh */ 82376);\n\n__webpack_require__(/*! core-js/modules/es.math.atanh */ 73181);\n\n__webpack_require__(/*! core-js/modules/es.math.cbrt */ 23484);\n\n__webpack_require__(/*! core-js/modules/es.math.clz32 */ 2388);\n\n__webpack_require__(/*! core-js/modules/es.math.cosh */ 88621);\n\n__webpack_require__(/*! core-js/modules/es.math.expm1 */ 60403);\n\n__webpack_require__(/*! core-js/modules/es.math.fround */ 84755);\n\n__webpack_require__(/*! core-js/modules/es.math.hypot */ 25438);\n\n__webpack_require__(/*! core-js/modules/es.math.log10 */ 40658);\n\n__webpack_require__(/*! core-js/modules/es.math.log1p */ 40197);\n\n__webpack_require__(/*! core-js/modules/es.math.log2 */ 44914);\n\n__webpack_require__(/*! core-js/modules/es.math.sign */ 52420);\n\n__webpack_require__(/*! core-js/modules/es.math.sinh */ 60160);\n\n__webpack_require__(/*! core-js/modules/es.math.tanh */ 60970);\n\n__webpack_require__(/*! core-js/modules/es.math.to-string-tag */ 10408);\n\n__webpack_require__(/*! core-js/modules/es.math.trunc */ 73689);\n\n__webpack_require__(/*! core-js/modules/es.number.constructor */ 9653);\n\n__webpack_require__(/*! core-js/modules/es.number.epsilon */ 93299);\n\n__webpack_require__(/*! core-js/modules/es.number.is-integer */ 33161);\n\n__webpack_require__(/*! core-js/modules/es.number.is-safe-integer */ 78285);\n\n__webpack_require__(/*! core-js/modules/es.number.max-safe-integer */ 44363);\n\n__webpack_require__(/*! core-js/modules/es.number.min-safe-integer */ 55994);\n\n__webpack_require__(/*! core-js/modules/es.number.parse-float */ 61874);\n\n__webpack_require__(/*! core-js/modules/es.number.parse-int */ 9494);\n\n__webpack_require__(/*! core-js/modules/es.object.assign */ 19601);\n\n__webpack_require__(/*! core-js/modules/es.object.define-getter */ 59595);\n\n__webpack_require__(/*! core-js/modules/es.object.define-setter */ 35500);\n\n__webpack_require__(/*! core-js/modules/es.object.entries */ 69720);\n\n__webpack_require__(/*! core-js/modules/es.object.freeze */ 43371);\n\n__webpack_require__(/*! core-js/modules/es.object.from-entries */ 38559);\n\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor */ 38880);\n\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptors */ 49337);\n\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-names */ 36210);\n\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of */ 30489);\n\n__webpack_require__(/*! core-js/modules/es.object.is-extensible */ 41825);\n\n__webpack_require__(/*! core-js/modules/es.object.is-frozen */ 98410);\n\n__webpack_require__(/*! core-js/modules/es.object.is-sealed */ 72200);\n\n__webpack_require__(/*! core-js/modules/es.object.keys */ 47941);\n\n__webpack_require__(/*! core-js/modules/es.object.lookup-getter */ 94869);\n\n__webpack_require__(/*! core-js/modules/es.object.lookup-setter */ 33952);\n\n__webpack_require__(/*! core-js/modules/es.object.prevent-extensions */ 57227);\n\n__webpack_require__(/*! core-js/modules/es.object.seal */ 60514);\n\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of */ 68304);\n\n__webpack_require__(/*! core-js/modules/es.object.to-string */ 41539);\n\n__webpack_require__(/*! core-js/modules/es.object.values */ 26833);\n\n__webpack_require__(/*! core-js/modules/es.parse-float */ 54678);\n\n__webpack_require__(/*! core-js/modules/es.parse-int */ 91058);\n\n__webpack_require__(/*! core-js/modules/es.promise */ 88674);\n\n__webpack_require__(/*! core-js/modules/es.promise.finally */ 17727);\n\n__webpack_require__(/*! core-js/modules/es.reflect.apply */ 36535);\n\n__webpack_require__(/*! core-js/modules/es.reflect.construct */ 12419);\n\n__webpack_require__(/*! core-js/modules/es.reflect.define-property */ 69596);\n\n__webpack_require__(/*! core-js/modules/es.reflect.delete-property */ 52586);\n\n__webpack_require__(/*! core-js/modules/es.reflect.get */ 74819);\n\n__webpack_require__(/*! core-js/modules/es.reflect.get-own-property-descriptor */ 95683);\n\n__webpack_require__(/*! core-js/modules/es.reflect.get-prototype-of */ 39361);\n\n__webpack_require__(/*! core-js/modules/es.reflect.has */ 51037);\n\n__webpack_require__(/*! core-js/modules/es.reflect.is-extensible */ 5898);\n\n__webpack_require__(/*! core-js/modules/es.reflect.own-keys */ 67556);\n\n__webpack_require__(/*! core-js/modules/es.reflect.prevent-extensions */ 14361);\n\n__webpack_require__(/*! core-js/modules/es.reflect.set */ 83593);\n\n__webpack_require__(/*! core-js/modules/es.reflect.set-prototype-of */ 39532);\n\n__webpack_require__(/*! core-js/modules/es.regexp.constructor */ 24603);\n\n__webpack_require__(/*! core-js/modules/es.regexp.exec */ 74916);\n\n__webpack_require__(/*! core-js/modules/es.regexp.flags */ 92087);\n\n__webpack_require__(/*! core-js/modules/es.regexp.to-string */ 39714);\n\n__webpack_require__(/*! core-js/modules/es.set */ 70189);\n\n__webpack_require__(/*! core-js/modules/es.string.code-point-at */ 79841);\n\n__webpack_require__(/*! core-js/modules/es.string.ends-with */ 27852);\n\n__webpack_require__(/*! core-js/modules/es.string.from-code-point */ 94953);\n\n__webpack_require__(/*! core-js/modules/es.string.includes */ 32023);\n\n__webpack_require__(/*! core-js/modules/es.string.iterator */ 78783);\n\n__webpack_require__(/*! core-js/modules/es.string.match */ 4723);\n\n__webpack_require__(/*! core-js/modules/es.string.pad-end */ 66528);\n\n__webpack_require__(/*! core-js/modules/es.string.pad-start */ 83112);\n\n__webpack_require__(/*! core-js/modules/es.string.raw */ 38992);\n\n__webpack_require__(/*! core-js/modules/es.string.repeat */ 82481);\n\n__webpack_require__(/*! core-js/modules/es.string.replace */ 15306);\n\n__webpack_require__(/*! core-js/modules/es.string.search */ 64765);\n\n__webpack_require__(/*! core-js/modules/es.string.split */ 23123);\n\n__webpack_require__(/*! core-js/modules/es.string.starts-with */ 23157);\n\n__webpack_require__(/*! core-js/modules/es.string.trim */ 73210);\n\n__webpack_require__(/*! core-js/modules/es.string.trim-end */ 48702);\n\n__webpack_require__(/*! core-js/modules/es.string.trim-start */ 55674);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.float32-array */ 44197);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.float64-array */ 76495);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.int8-array */ 87145);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.int16-array */ 35109);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.int32-array */ 65125);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.uint8-array */ 82472);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.uint8-clamped-array */ 49743);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.uint16-array */ 8255);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.uint32-array */ 29135);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.copy-within */ 92990);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.every */ 18927);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.fill */ 33105);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.filter */ 35035);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.find */ 74345);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.find-index */ 7174);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.for-each */ 32846);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.from */ 98145);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.includes */ 44731);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.index-of */ 77209);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.iterator */ 96319);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.join */ 58867);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.last-index-of */ 37789);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.map */ 33739);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.of */ 95206);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.reduce */ 29368);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.reduce-right */ 14483);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.reverse */ 12056);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.slice */ 30678);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.some */ 27462);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.sort */ 33824);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.to-locale-string */ 12974);\n\n__webpack_require__(/*! core-js/modules/es.typed-array.to-string */ 15016);\n\n__webpack_require__(/*! core-js/modules/es.weak-map */ 4129);\n\n__webpack_require__(/*! core-js/modules/es.weak-set */ 38478);\n\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each */ 54747);\n\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator */ 33948);\n\n__webpack_require__(/*! core-js/modules/web.immediate */ 84633);\n\n__webpack_require__(/*! core-js/modules/web.queue-microtask */ 85844);\n\n__webpack_require__(/*! core-js/modules/web.url */ 60285);\n\n__webpack_require__(/*! core-js/modules/web.url.to-json */ 83753);\n\n__webpack_require__(/*! core-js/modules/web.url-search-params */ 41637);\n\n__webpack_require__(/*! regenerator-runtime/runtime */ 35666);\n\n__webpack_require__(/*! ./Polyfill */ 59048);\n\n__webpack_require__(/*! ./Global */ 87670);\n\n__webpack_require__(/*! ./WebSocket */ 32407);\n\nvar React = _interopRequireWildcard(__webpack_require__(/*! react */ 67294));\n\nvar ReactDOM = _interopRequireWildcard(__webpack_require__(/*! react-dom */ 73935));\n\nvar _App = _interopRequireDefault(__webpack_require__(/*! ./App */ 6167));\n\nvar _Debug = __webpack_require__(/*! ./Debug */ 24433);\n\nvar _windowManager = __webpack_require__(/*! @netless/window-manager */ 70732);\n\nvar _SDK = __webpack_require__(/*! ./bridge/SDK */ 5294);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nReactDOM.render( /*#__PURE__*/React.createElement(_App.default, null), document.getElementById(\"root\"));\n(0, _SDK.registerSDKBridge)();\nwindow.registerApp = _windowManager.WindowManager.register; // Debug functions\n\n(0, _Debug.addDebugFunctions)();\n\n//# sourceURL=webpack://whiteboard-bridge/./src/index.tsx?");

/***/ }),

/***/ 15748:
/*!***********************************************!*\
  !*** ./src/native/ReplayerCallbackHandler.ts ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.ReplayerCallbackHandler = exports.lastSchedule = void 0;\n\nvar _bridge = __webpack_require__(/*! ../bridge */ 70396);\n\nvar _whiteWebSdk = __webpack_require__(/*! white-web-sdk */ 63314);\n\nvar _iFrame = __webpack_require__(/*! ../utils/iFrame */ 89774);\n\nvar _Logger = __webpack_require__(/*! ../utils/Logger */ 38789);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar lastSchedule = {\n  time: 0\n};\nexports.lastSchedule = lastSchedule;\nvar enableIFramePlugin = false;\nvar step;\n\nfunction limitScheduleCallback(fn, timestamp, step) {\n  var player = window.player;\n\n  if (player === undefined) {\n    return;\n  }\n\n  if (timestamp >= lastSchedule.time) {\n    fn();\n    lastSchedule.time = Math.ceil(timestamp / step) * step;\n  } else if (player && timestamp + step > player.timeDuration) {\n    fn();\n    lastSchedule.time = timestamp;\n  }\n}\n\nvar ReplayerCallbackHandler = function ReplayerCallbackHandler(aStep, hasMedia, isEnableIFramePlugin, phaseChangeHook) {\n  _classCallCheck(this, ReplayerCallbackHandler);\n\n  _defineProperty(this, \"onPhaseChanged\", function (phase) {});\n\n  _defineProperty(this, \"onLoadFirstFrame\", function () {\n    // playerState 在此时才可读。这个时候需要把完整的 playerState 传递给 native，保证：\n    // 1. native 端同步 API 状态的完整性\n    // 2. Android 目前 playState diff 的正确性。\n    (0, _bridge.call)(\"player.onPlayerStateChanged\", JSON.stringify(window.player.state));\n    (0, _bridge.call)(\"player.onLoadFirstFrame\");\n\n    if (enableIFramePlugin) {\n      (0, _iFrame.postIframeMessage)({\n        eventName: \"onLoadFirstFrame\",\n        params: []\n      }, _Logger.logger);\n    }\n\n    return;\n  });\n\n  _defineProperty(this, \"onPlayerStateChanged\", function (modifyState) {\n    if (window.manager && modifyState.sceneState) {\n      return;\n    }\n\n    (0, _bridge.call)(\"player.onPlayerStateChanged\", JSON.stringify(modifyState));\n\n    if (enableIFramePlugin) {\n      (0, _iFrame.postIframeMessage)({\n        eventName: \"onPlayerStateChanged\",\n        params: [modifyState]\n      }, _Logger.logger);\n    }\n  });\n\n  _defineProperty(this, \"onStoppedWithError\", function (error) {\n    (0, _bridge.call)(\"player.onStoppedWithError\", JSON.stringify({\n      \"error\": error.message,\n      jsStack: error.stack\n    }));\n\n    if (enableIFramePlugin) {\n      (0, _iFrame.postIframeMessage)({\n        eventName: \"onStoppedWithError\",\n        params: [error]\n      }, _Logger.logger);\n    }\n  });\n\n  _defineProperty(this, \"onProgressTimeChanged\", function (scheduleTime) {\n    limitScheduleCallback(function () {\n      (0, _bridge.call)(\"player.onScheduleTimeChanged\", scheduleTime);\n    }, scheduleTime, step);\n\n    if (enableIFramePlugin) {\n      (0, _iFrame.postIframeMessage)({\n        eventName: \"onProgressTimeChanged\",\n        params: [scheduleTime]\n      }, _Logger.logger);\n    }\n  });\n\n  _defineProperty(this, \"onCatchErrorWhenAppendFrame\", function (userId, error) {// dsBridge.call(\"player.fireCatchErrorWhenAppendFrame\", {userId: userId, error: error.message});\n  });\n\n  _defineProperty(this, \"onCatchErrorWhenRender\", function (err) {\n    (0, _bridge.call)(\"player.onCatchErrorWhenRender\", {\n      error: err.message\n    });\n  });\n\n  _defineProperty(this, \"onSyncedStoreUpdate\", function (update) {\n    (0, _bridge.call)(\"player.fireSyncedStoreUpdate\", JSON.stringify(update));\n  });\n\n  enableIFramePlugin = isEnableIFramePlugin;\n  step = aStep;\n\n  this.onPhaseChanged = function (phase) {\n    var player = window.player;\n\n    if (player === undefined) {\n      return;\n    }\n\n    phaseChangeHook(player, phase);\n\n    var handle = function handle(phase) {\n      lastSchedule.time = 0;\n      (0, _bridge.call)(\"player.onPhaseChanged\", phase);\n\n      if (enableIFramePlugin) {\n        (0, _iFrame.postIframeMessage)({\n          eventName: \"onPhaseChanged\",\n          params: [phase]\n        }, _Logger.logger);\n      }\n    }; // combine-player 没有 WaitingFirstFrame 和 Stopped 两个状态，这里根据原始 player 进行触发。\n    // 其他状态，均由 combine-player 将内部混合的状态，进行映射触发\n\n\n    if (hasMedia) {\n      if (phase === _whiteWebSdk.PlayerPhase.WaitingFirstFrame || phase === _whiteWebSdk.PlayerPhase.Stopped) {\n        handle(phase);\n      }\n    } else {\n      handle(phase);\n    }\n  };\n};\n\nexports.ReplayerCallbackHandler = ReplayerCallbackHandler;\n\n//# sourceURL=webpack://whiteboard-bridge/./src/native/ReplayerCallbackHandler.ts?");

/***/ }),

/***/ 42470:
/*!*******************************************!*\
  !*** ./src/native/RoomCallbackHandler.ts ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.RoomCallbackHandler = void 0;\n\nvar _Logger = __webpack_require__(/*! ../utils/Logger */ 38789);\n\nvar _bridge = __webpack_require__(/*! ../bridge */ 70396);\n\nvar _Funs = __webpack_require__(/*! ../utils/Funs */ 28388);\n\nvar _whiteWebSdk = __webpack_require__(/*! white-web-sdk */ 63314);\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar reconnectingTimeout = 45000;\n\nvar RoomCallbackHandler = function RoomCallbackHandler() {\n  _classCallCheck(this, RoomCallbackHandler);\n\n  _defineProperty(this, \"onPhaseChanged\", function (phase) {\n    (0, _bridge.call)(\"room.firePhaseChanged\", phase);\n    var room = window.room;\n\n    if (room && room.phase === _whiteWebSdk.RoomPhase.Reconnecting) {\n      setTimeout(function () {\n        if (room && room.phase === _whiteWebSdk.RoomPhase.Reconnecting) {\n          (0, _Logger.logger)(\"room start disconnect by reconnecting timeout by bridge\");\n          room.disconnect().then(function () {\n            var timeoutStr = \"Reconnect time exceeds \".concat(reconnectingTimeout, \" milliseconds, sdk call disconnect automatically\");\n            (0, _Logger.logger)(timeoutStr);\n            (0, _bridge.call)(\"room.fireDisconnectWithError\", timeoutStr);\n          });\n        }\n      }, reconnectingTimeout);\n    }\n  });\n\n  _defineProperty(this, \"onCanUndoStepsUpdate\", function (canUndoSteps) {\n    (0, _bridge.call)(\"room.fireCanUndoStepsUpdate\", canUndoSteps);\n  });\n\n  _defineProperty(this, \"onCanRedoStepsUpdate\", function (canRedoSteps) {\n    (0, _bridge.call)(\"room.fireCanRedoStepsUpdate\", canRedoSteps);\n  });\n\n  _defineProperty(this, \"onRoomStateChanged\", function (modifyState) {\n    var _modifyState = modifyState,\n        sceneState = _modifyState.sceneState,\n        resetState = _objectWithoutProperties(_modifyState, [\"sceneState\"]);\n\n    if (window.manager) {\n      // sceneState 由 windowManager 触发\n      if (Object.keys(resetState).length !== 0) {\n        (0, _bridge.call)(\"room.fireRoomStateChanged\", JSON.stringify(resetState));\n      }\n    } else {\n      // 单窗口模式下，如果有 sceneState，则手动生成一个 pageState\n      if (sceneState) {\n        modifyState = _objectSpread(_objectSpread({}, modifyState), (0, _Funs.createPageState)(sceneState));\n      }\n\n      (0, _bridge.call)(\"room.fireRoomStateChanged\", JSON.stringify(modifyState));\n    }\n  });\n\n  _defineProperty(this, \"onDisconnectWithError\", function (error) {\n    (0, _bridge.call)(\"room.fireDisconnectWithError\", error.message);\n  });\n\n  _defineProperty(this, \"onKickedWithReason\", function (reason) {\n    (0, _bridge.call)(\"room.fireKickedWithReason\", reason);\n  });\n\n  _defineProperty(this, \"onAttributesUpdate\", function (attributes) {\n    (0, _bridge.call)(\"room.fireAttributesUpdate\", JSON.stringify(attributes));\n  });\n\n  _defineProperty(this, \"onSyncedStoreUpdate\", function (update) {\n    (0, _bridge.call)(\"room.fireSyncedStoreUpdate\", JSON.stringify(update));\n  });\n\n  _defineProperty(this, \"onCatchErrorWhenAppendFrame\", function (userId, error) {\n    (0, _Logger.logger)(\"onCatchErrorWhenAppendFrame\", [userId, error.message]); // TODO: 在初始化 room 过程中，就回调该方法的话，对于 room 的判断会存在问题\n\n    (0, _bridge.call)(\"room.fireCatchErrorWhenAppendFrame\", {\n      userId: userId,\n      error: error.message\n    });\n  });\n\n  _defineProperty(this, \"onCatchErrorWhenRender\", function (err) {// FIXME: native 端未添加\n    // call(\"room.onCatchErrorWhenRender\", {error: err.message});\n  });\n};\n\nexports.RoomCallbackHandler = RoomCallbackHandler;\n\n//# sourceURL=webpack://whiteboard-bridge/./src/native/RoomCallbackHandler.ts?");

/***/ }),

/***/ 25219:
/*!******************************************!*\
  !*** ./src/native/SDKCallbackHandler.ts ***!
  \******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.SDKCallbackHandler = void 0;\n\nvar _bridge = __webpack_require__(/*! ../bridge */ 70396);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar SDKCallbackHandler = function SDKCallbackHandler() {\n  _classCallCheck(this, SDKCallbackHandler);\n\n  _defineProperty(this, \"onPostMessage\", function (message) {\n    (0, _bridge.call)(\"sdk.postMessage\", message);\n  });\n\n  _defineProperty(this, \"onThrowError\", function (message) {\n    (0, _bridge.call)(\"sdk.throwError\", message);\n  });\n\n  _defineProperty(this, \"onLogger\", function (args) {\n    (0, _bridge.call)(\"sdk.logger\", args);\n  });\n\n  _defineProperty(this, \"onUrlInterrupter\", function (url) {\n    return (0, _bridge.call)(\"sdk.urlInterrupter\", url);\n  });\n\n  _defineProperty(this, \"onSetupFail\", function (e) {\n    (0, _bridge.call)(\"sdk.setupFail\", {\n      message: e.message,\n      jsStack: e.stack\n    });\n  });\n\n  _defineProperty(this, \"onPPTLoadProgress\", function (uuid, progress) {// 不推荐用户使用这种预加载，native 端使用 zip 包的形式\n  });\n\n  _defineProperty(this, \"onPPTMediaPlay\", function (shapeId, type) {\n    console.log('onPPTMediaPlay');\n    (0, _bridge.call)(\"sdk.onPPTMediaPlay\", {\n      shapeId: shapeId,\n      type: type\n    });\n  });\n\n  _defineProperty(this, \"onPPTMediaPause\", function (shapeId, type) {\n    (0, _bridge.call)(\"sdk.onPPTMediaPause\", {\n      shapeId: shapeId,\n      type: type\n    });\n  });\n};\n\nexports.SDKCallbackHandler = SDKCallbackHandler;\n\n//# sourceURL=webpack://whiteboard-bridge/./src/native/SDKCallbackHandler.ts?");

/***/ }),

/***/ 51126:
/*!***********************************!*\
  !*** ./src/utils/BoundConvert.ts ***!
  \***********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.convertBound = convertBound;\n\nvar _whiteWebSdk = __webpack_require__(/*! white-web-sdk */ 63314);\n\nvar _whiteboardBridgeTypes = __webpack_require__(/*! @netless/whiteboard-bridge-types */ 11358);\n\nfunction convertBound(nativeBound) {\n  if (!nativeBound) {\n    return undefined;\n  }\n\n  return {\n    centerX: nativeBound.centerX,\n    centerY: nativeBound.centerY,\n    width: nativeBound.width,\n    height: nativeBound.height,\n    maxContentMode: convertToContentMode(nativeBound.maxContentMode),\n    minContentMode: convertToContentMode(nativeBound.minContentMode)\n  };\n}\n\nfunction convertToContentMode(modeType) {\n  if (!modeType) {\n    return undefined;\n  }\n\n  var scale = modeType.scale === undefined ? 1.0 : modeType.scale;\n  var space = modeType.space === undefined ? 0 : modeType.space;\n  var scaleMode = _whiteboardBridgeTypes.ScaleMode.Scale; // Android 传 string 比较方便，gson 传数字太繁琐\n\n  if (typeof modeType.mode === \"string\") {\n    scaleMode = parseInt(_whiteboardBridgeTypes.ScaleMode[modeType.mode]);\n  } else {\n    scaleMode = modeType.mode;\n  }\n\n  switch (scaleMode) {\n    case _whiteboardBridgeTypes.ScaleMode.Scale:\n      return (0, _whiteWebSdk.contentModeScale)(scale);\n\n    case _whiteboardBridgeTypes.ScaleMode.AspectFill:\n      return (0, _whiteWebSdk.contentModeAspectFill)();\n\n    case _whiteboardBridgeTypes.ScaleMode.AspectFillScale:\n      return (0, _whiteWebSdk.contentModeAspectFillScale)(scale);\n\n    case _whiteboardBridgeTypes.ScaleMode.AspectFit:\n      return (0, _whiteWebSdk.contentModeAspectFit)();\n\n    case _whiteboardBridgeTypes.ScaleMode.AspectFitScale:\n      return (0, _whiteWebSdk.contentModeAspectFitScale)(scale);\n\n    case _whiteboardBridgeTypes.ScaleMode.AspectFitSpace:\n      return (0, _whiteWebSdk.contentModeAspectFitSpace)(space);\n\n    default:\n      return undefined;\n  }\n}\n\n//# sourceURL=webpack://whiteboard-bridge/./src/utils/BoundConvert.ts?");

/***/ }),

/***/ 28388:
/*!***************************!*\
  !*** ./src/utils/Funs.ts ***!
  \***************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.addBridgeLogHook = addBridgeLogHook;\nexports.isRoom = isRoom;\nexports.globalErrorEvent = globalErrorEvent;\nexports.createPageState = createPageState;\nexports.postCustomMessage = postCustomMessage;\nexports.usePrevious = usePrevious;\n\nvar _react = __webpack_require__(/*! react */ 67294);\n\nvar _SDK = __webpack_require__(/*! ../bridge/SDK */ 5294);\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _createForOfIteratorHelper(o) { if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction addBridgeLogHook(names, logger) {\n  var async = window._dsaf;\n  var async_obj = async[\"_obs\"] || {};\n\n  var _iterator = _createForOfIteratorHelper(Object.getOwnPropertyNames(async_obj)),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var name = _step.value;\n\n      if (names.includes(name)) {\n        var namespace = async_obj[name];\n\n        var _iterator3 = _createForOfIteratorHelper(Object.getOwnPropertyNames(namespace)),\n            _step3;\n\n        try {\n          var _loop = function _loop() {\n            var funName = _step3.value;\n            var fun = namespace[funName]; // 只 hook 函数\n\n            if (typeof fun !== \"function\") {\n              return \"continue\";\n            }\n\n            namespace[funName] = function () {\n              for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n                args[_key] = arguments[_key];\n              }\n\n              // async 下， dsbridge 在调用时，会添加一个回调 function\n              logger.apply(void 0, [funName].concat(_toConsumableArray(args.slice(0, -1))));\n              return fun.apply(void 0, args);\n            };\n          };\n\n          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n            var _ret = _loop();\n\n            if (_ret === \"continue\") continue;\n          }\n        } catch (err) {\n          _iterator3.e(err);\n        } finally {\n          _iterator3.f();\n        }\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  var syn = window._dsf;\n  var syn_obj = syn[\"_obs\"] || {};\n\n  var _iterator2 = _createForOfIteratorHelper(Object.getOwnPropertyNames(syn_obj)),\n      _step2;\n\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var _name = _step2.value;\n\n      if (names.includes(_name)) {\n        var _namespace = syn_obj[_name];\n\n        var _iterator4 = _createForOfIteratorHelper(Object.getOwnPropertyNames(_namespace)),\n            _step4;\n\n        try {\n          var _loop2 = function _loop2() {\n            var funName = _step4.value;\n            var fun = _namespace[funName]; // 只 hook 函数\n\n            if (typeof fun !== \"function\") {\n              return \"continue\";\n            }\n\n            _namespace[funName] = function () {\n              for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                args[_key2] = arguments[_key2];\n              }\n\n              logger.apply(void 0, [funName].concat(args));\n              return fun.apply(void 0, args);\n            };\n          };\n\n          for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n            var _ret2 = _loop2();\n\n            if (_ret2 === \"continue\") continue;\n          }\n        } catch (err) {\n          _iterator4.e(err);\n        } finally {\n          _iterator4.f();\n        }\n      }\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n}\n\nfunction isRoom(displayer) {\n  return displayer.roomUUID === undefined;\n}\n\nfunction globalErrorEvent(e) {\n  _SDK.sdkCallbackHandler.onThrowError({\n    message: e.message,\n    error: e.error\n  });\n}\n\nfunction createPageState(sceneState) {\n  if (sceneState) {\n    return {\n      pageState: {\n        index: sceneState.index,\n        length: sceneState.scenes.length\n      }\n    };\n  } else {\n    return {};\n  }\n}\n\nfunction postCustomMessage(e) {\n  var data = e.data; // 目前在 Android 端，默认所有的发送事件是 JSON 格式的，这里的字符串都需要能序列换成 JSONObject\n\n  if (data.name === \"pptImageLoadError\") {\n    _SDK.sdkCallbackHandler.onPostMessage(JSON.stringify(data));\n  }\n\n  if (data.name === \"iframe\") {\n    _SDK.sdkCallbackHandler.onPostMessage(JSON.stringify(data));\n  }\n\n  if (data.shapeId && data.mediaType && data.action) {\n    _SDK.sdkCallbackHandler.onPostMessage(JSON.stringify(data));\n  } // 自定义的口子，目前只有监听 image 的用了\n\n\n  if (!!data.customMessage) {\n    _SDK.sdkCallbackHandler.onPostMessage(JSON.stringify(data));\n  }\n}\n\nfunction usePrevious(value) {\n  var ref = (0, _react.useRef)();\n  (0, _react.useEffect)(function () {\n    ref.current = value;\n  });\n  return ref.current;\n}\n\n//# sourceURL=webpack://whiteboard-bridge/./src/utils/Funs.ts?");

/***/ }),

/***/ 54505:
/*!*******************************!*\
  !*** ./src/utils/ImgError.ts ***!
  \*******************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.hookCreateElement = hookCreateElement;\n\nvar _Funs = __webpack_require__(/*! ./Funs */ 28388);\n\nfunction hookCreateElement() {\n  var f = document.createElement;\n\n  if (f.toString().includes(\"addEventListener(\\\"error\\\"\")) {\n    // 防止多次拦截，页面是纯净的，不会有其他拦截\n    return;\n  }\n\n  console.log(\"interrupt document.createElement success\");\n\n  document.createElement = function (tagName, options) {\n    var element = f.call(this, tagName, options);\n\n    if (element.nodeName === \"IMG\") {\n      element.addEventListener(\"error\", imageError, {\n        once: true\n      });\n      element.addEventListener(\"unload\", function () {\n        // TODO: test me\n        element.removeEventListener(\"error\", imageError);\n      });\n    }\n\n    return element;\n  };\n}\n\nfunction imageError(error) {\n  var img = this;\n  var payload = {\n    error: error,\n    message: error.message,\n    src: img.currentSrc,\n    customMessage: true,\n    name: \"imageLoadError\"\n  };\n  (0, _Funs.postCustomMessage)({\n    data: payload\n  });\n}\n\n//# sourceURL=webpack://whiteboard-bridge/./src/utils/ImgError.ts?");

/***/ }),

/***/ 38789:
/*!*****************************!*\
  !*** ./src/utils/Logger.ts ***!
  \*****************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.enableReport = enableReport;\nexports.logger = logger;\n\nvar _SDK = __webpack_require__(/*! ../bridge/SDK */ 5294);\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar reportLog = false;\n\nfunction enableReport(enable) {\n  reportLog = enable;\n}\n\nfunction logger(funName) {\n  var _console;\n\n  for (var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    params[_key - 1] = arguments[_key];\n  }\n\n  (_console = console).log.apply(_console, [funName].concat(params));\n\n  if (reportLog) {\n    report.apply(void 0, [funName].concat(params));\n  }\n}\n\nfunction report(funName) {\n  for (var _len2 = arguments.length, params = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    params[_key2 - 1] = arguments[_key2];\n  }\n\n  if (window.room) {\n    var _logger;\n\n    // sdk 的 logger，会直接使用 toString 方法，进行转换。Object 的 toString 直接是 \"[object Object]\"，无法记录内容\n    params = params.map(function (v) {\n      if (_typeof(v) === \"object\") {\n        return JSON.stringify(v);\n      }\n\n      return v;\n    });\n\n    (_logger = window.room.logger).info.apply(_logger, [funName].concat(_toConsumableArray(params)));\n  }\n\n  var message;\n\n  if (params.length === 0) {\n    message = undefined;\n  } else if (params.length === 1) {\n    // array element\n    message = params[0];\n  } else if (params.every(function (v) {\n    return typeof v === \"string\" || typeof v === \"number\" || typeof v === \"boolean\";\n  })) {\n    // string\n    message = params.join(\" \");\n  } else {\n    // array\n    message = params;\n  }\n\n  _SDK.sdkCallbackHandler.onLogger({\n    funName: funName,\n    params: message\n  });\n}\n\n//# sourceURL=webpack://whiteboard-bridge/./src/utils/Logger.ts?");

/***/ }),

/***/ 89774:
/*!*****************************!*\
  !*** ./src/utils/iFrame.ts ***!
  \*****************************/
/***/ (function(__unused_webpack_module, exports) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.postIframeMessage = postIframeMessage;\n\nfunction postIframeMessage(payload, logger) {\n  var message = {\n    name: \"parentWindow\",\n    payload: payload\n  };\n  var iframes = document.getElementsByTagName(\"iframe\");\n\n  if (iframes.length > 0 && iframes[0].contentWindow) {\n    var iframe = iframes[0]; // logger?.(\"postmessage\", message);\n\n    iframe.contentWindow.postMessage(message, \"*\");\n  } else if (iframes.length == 0) {\n    logger === null || logger === void 0 ? void 0 : logger(\"postmessage fail\", \"no frames exist\");\n  } else {\n    logger === null || logger === void 0 ? void 0 : logger(\"postmessage fail\", \"no conentWindow\");\n  }\n}\n\n//# sourceURL=webpack://whiteboard-bridge/./src/utils/iFrame.ts?");

/***/ }),

/***/ 25893:
/*!******************************!*\
  !*** min-document (ignored) ***!
  \******************************/
/***/ (function() {

eval("/* (ignored) */\n\n//# sourceURL=webpack://whiteboard-bridge/min-document_(ignored)?");

/***/ }),

/***/ 75042:
/*!************************!*\
  !*** crypto (ignored) ***!
  \************************/
/***/ (function() {

eval("/* (ignored) */\n\n//# sourceURL=webpack://whiteboard-bridge/crypto_(ignored)?");

/***/ }),

/***/ 65586:
/*!******************************!*\
  !*** min-document (ignored) ***!
  \******************************/
/***/ (function() {

eval("/* (ignored) */\n\n//# sourceURL=webpack://whiteboard-bridge/min-document_(ignored)?");

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId); }
/******/ __webpack_require__.O(0, ["web-sdk","netless","video","vendor"], function() { return __webpack_exec__(36037); });
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);